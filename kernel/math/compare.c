multiline_comment|/*&n; * linux/kernel/math/compare.c&n; *&n; * (C) 1991 Linus Torvalds&n; */
multiline_comment|/*&n; * temporary real comparison routines&n; */
macro_line|#include &lt;linux/math_emu.h&gt;
DECL|macro|clear_Cx
mdefine_line|#define clear_Cx() (I387.swd &amp;= ~0x4500)
DECL|function|normalize
r_static
r_void
id|normalize
c_func
(paren
id|temp_real
op_star
id|a
)paren
(brace
r_int
id|i
op_assign
id|a-&gt;exponent
op_amp
l_int|0x7fff
suffix:semicolon
r_int
id|sign
op_assign
id|a-&gt;exponent
op_amp
l_int|0x8000
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|a-&gt;a
op_logical_or
id|a-&gt;b
)paren
)paren
(brace
id|a-&gt;exponent
op_assign
l_int|0
suffix:semicolon
r_return
suffix:semicolon
)brace
r_while
c_loop
(paren
id|i
op_logical_and
id|a-&gt;b
op_ge
l_int|0
)paren
(brace
id|i
op_decrement
suffix:semicolon
id|__asm__
c_func
(paren
l_string|&quot;addl %0,%0 ; adcl %1,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|a-&gt;a
)paren
comma
l_string|&quot;=r&quot;
(paren
id|a-&gt;b
)paren
suffix:colon
l_string|&quot;0&quot;
(paren
id|a-&gt;a
)paren
comma
l_string|&quot;1&quot;
(paren
id|a-&gt;b
)paren
)paren
suffix:semicolon
)brace
id|a-&gt;exponent
op_assign
id|i
op_or
id|sign
suffix:semicolon
)brace
DECL|function|ftst
r_void
id|ftst
c_func
(paren
r_const
id|temp_real
op_star
id|a
)paren
(brace
id|temp_real
id|b
suffix:semicolon
id|clear_Cx
c_func
(paren
)paren
suffix:semicolon
id|b
op_assign
op_star
id|a
suffix:semicolon
id|normalize
c_func
(paren
op_amp
id|b
)paren
suffix:semicolon
r_if
c_cond
(paren
id|b.a
op_logical_or
id|b.b
op_logical_or
id|b.exponent
)paren
(brace
r_if
c_cond
(paren
id|b.exponent
OL
l_int|0
)paren
id|set_C0
c_func
(paren
)paren
suffix:semicolon
)brace
r_else
id|set_C3
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|fcom
r_void
id|fcom
c_func
(paren
r_const
id|temp_real
op_star
id|src1
comma
r_const
id|temp_real
op_star
id|src2
)paren
(brace
id|temp_real
id|a
suffix:semicolon
id|a
op_assign
op_star
id|src1
suffix:semicolon
id|a.exponent
op_xor_assign
l_int|0x8000
suffix:semicolon
id|fadd
c_func
(paren
op_amp
id|a
comma
id|src2
comma
op_amp
id|a
)paren
suffix:semicolon
id|ftst
c_func
(paren
op_amp
id|a
)paren
suffix:semicolon
)brace
DECL|function|fucom
r_void
id|fucom
c_func
(paren
r_const
id|temp_real
op_star
id|src1
comma
r_const
id|temp_real
op_star
id|src2
)paren
(brace
id|fcom
c_func
(paren
id|src1
comma
id|src2
)paren
suffix:semicolon
)brace
eof
