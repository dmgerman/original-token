multiline_comment|/*&n; *  linux/init/main.c&n; *&n; *  Copyright (C) 1991, 1992  Linus Torvalds&n; *&n; *  GK 2/5/95  -  Changed to support mounting root fs via NFS&n; *  Added initrd &amp; change_root: Werner Almesberger &amp; Hans Lermen, Feb &squot;96&n; *  Moan early if gcc is old, avoiding bogus kernels - Paul Gortmaker, May &squot;96&n; *  Simplified starting of init:  Michael A. Griffith &lt;grif@acm.org&gt; &n; */
DECL|macro|__KERNEL_SYSCALLS__
mdefine_line|#define __KERNEL_SYSCALLS__
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/fcntl.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/unistd.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/ctype.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/utsname.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/hdreg.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;linux/major.h&gt;
macro_line|#include &lt;linux/blk.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/bugs.h&gt;
macro_line|#include &lt;stdarg.h&gt;
macro_line|#ifdef CONFIG_PCI
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#endif
macro_line|#ifdef CONFIG_DIO
macro_line|#include &lt;linux/dio.h&gt;
macro_line|#endif
macro_line|#ifdef CONFIG_ZORRO
macro_line|#include &lt;linux/zorro.h&gt;
macro_line|#endif
macro_line|#ifdef CONFIG_MTRR
macro_line|#  include &lt;asm/mtrr.h&gt;
macro_line|#endif
multiline_comment|/*&n; * Versions of gcc older than that listed below may actually compile&n; * and link okay, but the end product can have subtle run time bugs.&n; * To avoid associated bogus bug reports, we flatly refuse to compile&n; * with a gcc that is known to be too old from the very beginning.&n; */
macro_line|#if __GNUC__ &lt; 2 || (__GNUC__ == 2 &amp;&amp; __GNUC_MINOR__ &lt; 6)
macro_line|#error sorry, your GCC is too old. It builds incorrect kernels.
macro_line|#endif
r_extern
r_char
id|_stext
comma
id|_etext
suffix:semicolon
r_extern
r_char
op_star
id|linux_banner
suffix:semicolon
r_extern
r_int
id|console_loglevel
suffix:semicolon
r_static
r_int
id|init
c_func
(paren
r_void
op_star
)paren
suffix:semicolon
r_extern
r_int
id|bdflush
c_func
(paren
r_void
op_star
)paren
suffix:semicolon
r_extern
r_int
id|kswapd
c_func
(paren
r_void
op_star
)paren
suffix:semicolon
r_extern
r_void
id|kswapd_setup
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|init_IRQ
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|init_modules
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|console_init
c_func
(paren
r_int
comma
r_int
)paren
suffix:semicolon
r_extern
r_void
id|sock_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|uidcache_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|mca_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|sbus_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|powermac_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|sysctl_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|filescache_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|signals_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|device_setup
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|binfmt_setup
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|free_initmem
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|filesystem_setup
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_ARCH_ACORN
r_extern
r_void
id|ecard_init
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
r_extern
r_void
id|smp_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#ifdef __i386__
r_extern
r_void
id|ioapic_pirq_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
r_extern
r_void
id|no_scroll
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|kbd_reset_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|panic_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|bmouse_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|msmouse_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|console_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PRINTER
r_extern
r_void
id|lp_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_AMIGA
r_extern
r_void
id|js_am_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_ANALOG
r_extern
r_void
id|js_an_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_ASSASIN
r_extern
r_void
id|js_as_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_CONSOLE
r_extern
r_void
id|js_console_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_DB9
r_extern
r_void
id|js_db9_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_TURBOGRAFX
r_extern
r_void
id|js_tg_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_LIGHTNING
r_extern
r_void
id|js_l4_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
r_extern
r_void
id|eth_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_ARCNET_COM20020
r_extern
r_void
id|com20020_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_RIM_I
r_extern
r_void
id|arcrimi_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_COM90xxIO
r_extern
r_void
id|com90io_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_COM90xx
r_extern
r_void
id|com90xx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DECNET
r_extern
r_void
id|decnet_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_XD
r_extern
r_void
id|xd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|xd_manual_geo_init
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_IDE
r_extern
r_void
id|ide_setup
c_func
(paren
r_char
op_star
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PD
r_extern
r_void
id|pd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PF
r_extern
r_void
id|pf_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PT
r_extern
r_void
id|pt_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PG
r_extern
r_void
id|pg_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PCD
r_extern
r_void
id|pcd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
r_extern
r_void
id|floppy_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|st_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|st0x_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|advansys_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|tmc8xx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|t128_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|pas16_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|generic_NCR5380_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|intr
)paren
suffix:semicolon
r_extern
r_void
id|generic_NCR53C400_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|intr
)paren
suffix:semicolon
r_extern
r_void
id|generic_NCR53C400A_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|intr
)paren
suffix:semicolon
r_extern
r_void
id|generic_DTC3181E_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|intr
)paren
suffix:semicolon
r_extern
r_void
id|aha152x_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|aha1542_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|gdth_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|aic7xxx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|AM53C974_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|BusLogic_Setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|ncr53c8xx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|eata2x_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|u14_34f_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|fdomain_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|ibmmca_scsi_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|in2000_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|NCR53c406a_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|wd7000_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|scsi_luns_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|scsi_logging_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|sound_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|reboot_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|video_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_CDU31A
r_extern
r_void
id|cdu31a_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_CDU31A
macro_line|#ifdef CONFIG_BLK_DEV_PS2
r_extern
r_void
id|ed_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|tp720_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_BLK_DEV_PS2
macro_line|#ifdef CONFIG_MCD
r_extern
r_void
id|mcd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_MCD
macro_line|#ifdef CONFIG_MCDX
r_extern
r_void
id|mcdx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_MCDX
macro_line|#ifdef CONFIG_SBPCD
r_extern
r_void
id|sbpcd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_SBPCD
macro_line|#ifdef CONFIG_AZTCD
r_extern
r_void
id|aztcd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_AZTCD
macro_line|#ifdef CONFIG_CDU535
r_extern
r_void
id|sonycd535_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_CDU535
macro_line|#ifdef CONFIG_GSCD
r_extern
r_void
id|gscd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_GSCD
macro_line|#ifdef CONFIG_CM206
r_extern
r_void
id|cm206_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_CM206
macro_line|#ifdef CONFIG_OPTCD
r_extern
r_void
id|optcd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_OPTCD
macro_line|#ifdef CONFIG_SJCD
r_extern
r_void
id|sjcd_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_SJCD
macro_line|#ifdef CONFIG_ISP16_CDI
r_extern
r_void
id|isp16_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif CONFIG_ISP16_CDI
macro_line|#ifdef CONFIG_BLK_DEV_RAM
r_static
r_void
id|ramdisk_start_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_static
r_void
id|load_ramdisk
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_static
r_void
id|prompt_ramdisk
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_static
r_void
id|ramdisk_size
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
r_static
r_void
id|no_initrd
c_func
(paren
r_char
op_star
id|s
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif CONFIG_BLK_DEV_RAM
macro_line|#ifdef CONFIG_ISDN_DRV_ICN
r_extern
r_void
id|icn_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ISDN_DRV_HISAX
r_extern
r_void
id|HiSax_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DIGIEPCA
r_extern
r_void
id|epca_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ISDN_DRV_PCBIT
r_extern
r_void
id|pcbit_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ATARIMOUSE
r_extern
r_void
id|atari_mouse_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DMASOUND
r_extern
r_void
id|dmasound_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ATARI_SCSI
r_extern
r_void
id|atari_scsi_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
r_extern
r_void
id|stram_swap_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|wd33c93_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|gvp11_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
r_extern
r_void
id|ncr53c7xx_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_MAC_SCSI
r_extern
r_void
id|mac_scsi_setup
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_CYCLADES
r_extern
r_void
id|cy_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DIGI
r_extern
r_void
id|pcxx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_RISCOM8
r_extern
r_void
id|riscom8_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SPECIALIX
r_extern
r_void
id|specialix_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DMASCC
r_extern
r_void
id|dmascc_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_BAYCOM_PAR
r_extern
r_void
id|baycom_par_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_BAYCOM_SER_FDX
r_extern
r_void
id|baycom_ser_fdx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_BAYCOM_SER_HDX
r_extern
r_void
id|baycom_ser_hdx_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SOUNDMODEM
r_extern
r_void
id|sm_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ADBMOUSE
r_extern
r_void
id|adb_mouse_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_WDT
r_extern
r_void
id|wdt_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PARPORT
r_extern
r_void
id|parport_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_PLIP
r_extern
r_void
id|plip_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_HFMODEM
r_extern
r_void
id|hfmodem_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_IP_PNP
r_extern
r_void
id|ip_auto_config_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ROOT_NFS
r_extern
r_void
id|nfs_root_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_FTAPE
r_extern
r_void
id|ftape_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_MDA_CONSOLE
r_extern
r_void
id|mdacon_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_SYSVIPC)
r_extern
r_void
id|ipc_init
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_QUOTA)
r_extern
r_void
id|dquot_init_hash
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_MD_BOOT
r_extern
r_void
id|md_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
id|__init
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * Boot command-line arguments&n; */
DECL|macro|MAX_INIT_ARGS
mdefine_line|#define MAX_INIT_ARGS 8
DECL|macro|MAX_INIT_ENVS
mdefine_line|#define MAX_INIT_ENVS 8
r_extern
r_void
id|time_init
c_func
(paren
r_void
)paren
suffix:semicolon
DECL|variable|memory_start
r_static
r_int
r_int
id|memory_start
op_assign
l_int|0
suffix:semicolon
DECL|variable|memory_end
r_static
r_int
r_int
id|memory_end
op_assign
l_int|0
suffix:semicolon
DECL|variable|rows
DECL|variable|cols
r_int
id|rows
comma
id|cols
suffix:semicolon
macro_line|#ifdef CONFIG_BLK_DEV_RAM
r_extern
r_int
id|rd_doload
suffix:semicolon
multiline_comment|/* 1 = load ramdisk, 0 = don&squot;t load */
r_extern
r_int
id|rd_prompt
suffix:semicolon
multiline_comment|/* 1 = prompt for ramdisk, 0 = don&squot;t prompt */
r_extern
r_int
id|rd_size
suffix:semicolon
multiline_comment|/* Size of the ramdisk(s) */
r_extern
r_int
id|rd_image_start
suffix:semicolon
multiline_comment|/* starting block # of image */
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
DECL|variable|real_root_dev
id|kdev_t
id|real_root_dev
suffix:semicolon
macro_line|#endif
macro_line|#endif
DECL|variable|root_mountflags
r_int
id|root_mountflags
op_assign
id|MS_RDONLY
suffix:semicolon
DECL|variable|execute_command
r_char
op_star
id|execute_command
op_assign
l_int|NULL
suffix:semicolon
DECL|variable|argv_init
r_static
r_char
op_star
id|argv_init
(braket
id|MAX_INIT_ARGS
op_plus
l_int|2
)braket
op_assign
(brace
l_string|&quot;init&quot;
comma
l_int|NULL
comma
)brace
suffix:semicolon
DECL|variable|envp_init
r_static
r_char
op_star
id|envp_init
(braket
id|MAX_INIT_ENVS
op_plus
l_int|2
)braket
op_assign
(brace
l_string|&quot;HOME=/&quot;
comma
l_string|&quot;TERM=linux&quot;
comma
l_int|NULL
comma
)brace
suffix:semicolon
DECL|function|get_options
r_char
op_star
id|get_options
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
r_char
op_star
id|cur
op_assign
id|str
suffix:semicolon
r_int
id|i
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|cur
op_logical_and
id|isdigit
c_func
(paren
op_star
id|cur
)paren
op_logical_and
id|i
op_le
l_int|10
)paren
(brace
id|ints
(braket
id|i
op_increment
)braket
op_assign
id|simple_strtoul
c_func
(paren
id|cur
comma
l_int|NULL
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|cur
op_assign
id|strchr
c_func
(paren
id|cur
comma
l_char|&squot;,&squot;
)paren
)paren
op_ne
l_int|NULL
)paren
id|cur
op_increment
suffix:semicolon
)brace
id|ints
(braket
l_int|0
)braket
op_assign
id|i
op_minus
l_int|1
suffix:semicolon
r_return
id|cur
suffix:semicolon
)brace
DECL|function|profile_setup
r_static
r_void
id|__init
id|profile_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
r_if
c_cond
(paren
id|ints
(braket
l_int|0
)braket
OG
l_int|0
)paren
id|prof_shift
op_assign
(paren
r_int
r_int
)paren
id|ints
(braket
l_int|1
)braket
suffix:semicolon
r_else
id|prof_shift
op_assign
l_int|2
suffix:semicolon
)brace
DECL|struct|dev_name_struct
r_static
r_struct
id|dev_name_struct
(brace
DECL|member|name
r_const
r_char
op_star
id|name
suffix:semicolon
DECL|member|num
r_const
r_int
id|num
suffix:semicolon
DECL|variable|__initdata
)brace
id|root_dev_names
(braket
)braket
id|__initdata
op_assign
(brace
macro_line|#ifdef CONFIG_ROOT_NFS
(brace
l_string|&quot;nfs&quot;
comma
l_int|0x00ff
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_IDE
(brace
l_string|&quot;hda&quot;
comma
l_int|0x0300
)brace
comma
(brace
l_string|&quot;hdb&quot;
comma
l_int|0x0340
)brace
comma
(brace
l_string|&quot;hdc&quot;
comma
l_int|0x1600
)brace
comma
(brace
l_string|&quot;hdd&quot;
comma
l_int|0x1640
)brace
comma
(brace
l_string|&quot;hde&quot;
comma
l_int|0x2100
)brace
comma
(brace
l_string|&quot;hdf&quot;
comma
l_int|0x2140
)brace
comma
(brace
l_string|&quot;hdg&quot;
comma
l_int|0x2200
)brace
comma
(brace
l_string|&quot;hdh&quot;
comma
l_int|0x2240
)brace
comma
(brace
l_string|&quot;hdi&quot;
comma
l_int|0x3800
)brace
comma
(brace
l_string|&quot;hdj&quot;
comma
l_int|0x3840
)brace
comma
(brace
l_string|&quot;hdk&quot;
comma
l_int|0x3900
)brace
comma
(brace
l_string|&quot;hdl&quot;
comma
l_int|0x3940
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_SD
(brace
l_string|&quot;sda&quot;
comma
l_int|0x0800
)brace
comma
(brace
l_string|&quot;sdb&quot;
comma
l_int|0x0810
)brace
comma
(brace
l_string|&quot;sdc&quot;
comma
l_int|0x0820
)brace
comma
(brace
l_string|&quot;sdd&quot;
comma
l_int|0x0830
)brace
comma
(brace
l_string|&quot;sde&quot;
comma
l_int|0x0840
)brace
comma
(brace
l_string|&quot;sdf&quot;
comma
l_int|0x0850
)brace
comma
(brace
l_string|&quot;sdg&quot;
comma
l_int|0x0860
)brace
comma
(brace
l_string|&quot;sdh&quot;
comma
l_int|0x0870
)brace
comma
(brace
l_string|&quot;sdi&quot;
comma
l_int|0x0880
)brace
comma
(brace
l_string|&quot;sdj&quot;
comma
l_int|0x0890
)brace
comma
(brace
l_string|&quot;sdk&quot;
comma
l_int|0x08a0
)brace
comma
(brace
l_string|&quot;sdl&quot;
comma
l_int|0x08b0
)brace
comma
(brace
l_string|&quot;sdm&quot;
comma
l_int|0x08c0
)brace
comma
(brace
l_string|&quot;sdn&quot;
comma
l_int|0x08d0
)brace
comma
(brace
l_string|&quot;sdo&quot;
comma
l_int|0x08e0
)brace
comma
(brace
l_string|&quot;sdp&quot;
comma
l_int|0x08f0
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ATARI_ACSI
(brace
l_string|&quot;ada&quot;
comma
l_int|0x1c00
)brace
comma
(brace
l_string|&quot;adb&quot;
comma
l_int|0x1c10
)brace
comma
(brace
l_string|&quot;adc&quot;
comma
l_int|0x1c20
)brace
comma
(brace
l_string|&quot;add&quot;
comma
l_int|0x1c30
)brace
comma
(brace
l_string|&quot;ade&quot;
comma
l_int|0x1c40
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_FD
(brace
l_string|&quot;fd&quot;
comma
l_int|0x0200
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MD_BOOT
(brace
l_string|&quot;md&quot;
comma
l_int|0x0900
)brace
comma
macro_line|#endif     
macro_line|#ifdef CONFIG_BLK_DEV_XD
(brace
l_string|&quot;xda&quot;
comma
l_int|0x0d00
)brace
comma
(brace
l_string|&quot;xdb&quot;
comma
l_int|0x0d40
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_RAM
(brace
l_string|&quot;ram&quot;
comma
l_int|0x0100
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_SR
(brace
l_string|&quot;scd&quot;
comma
l_int|0x0b00
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MCD
(brace
l_string|&quot;mcd&quot;
comma
l_int|0x1700
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_CDU535
(brace
l_string|&quot;cdu535&quot;
comma
l_int|0x1800
)brace
comma
(brace
l_string|&quot;sonycd&quot;
comma
l_int|0x1800
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_AZTCD
(brace
l_string|&quot;aztcd&quot;
comma
l_int|0x1d00
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_CM206
(brace
l_string|&quot;cm206cd&quot;
comma
l_int|0x2000
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_GSCD
(brace
l_string|&quot;gscd&quot;
comma
l_int|0x1000
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SBPCD
(brace
l_string|&quot;sbpcd&quot;
comma
l_int|0x1900
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_PS2
(brace
l_string|&quot;eda&quot;
comma
l_int|0x2400
)brace
comma
(brace
l_string|&quot;edb&quot;
comma
l_int|0x2440
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PD
(brace
l_string|&quot;pda&quot;
comma
l_int|0x2d00
)brace
comma
(brace
l_string|&quot;pdb&quot;
comma
l_int|0x2d10
)brace
comma
(brace
l_string|&quot;pdc&quot;
comma
l_int|0x2d20
)brace
comma
(brace
l_string|&quot;pdd&quot;
comma
l_int|0x2d30
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PCD
(brace
l_string|&quot;pcd&quot;
comma
l_int|0x2e00
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PF
(brace
l_string|&quot;pf&quot;
comma
l_int|0x2f00
)brace
comma
macro_line|#endif
macro_line|#if CONFIG_APBLOCK
(brace
l_string|&quot;apblock&quot;
comma
id|APBLOCK_MAJOR
op_lshift
l_int|8
)brace
comma
macro_line|#endif
macro_line|#if CONFIG_DDV
(brace
l_string|&quot;ddv&quot;
comma
id|DDV_MAJOR
op_lshift
l_int|8
)brace
comma
macro_line|#endif
(brace
l_int|NULL
comma
l_int|0
)brace
)brace
suffix:semicolon
DECL|function|name_to_kdev_t
id|kdev_t
id|__init
id|name_to_kdev_t
c_func
(paren
r_char
op_star
id|line
)paren
(brace
r_int
id|base
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|line
comma
l_string|&quot;/dev/&quot;
comma
l_int|5
)paren
op_eq
l_int|0
)paren
(brace
r_struct
id|dev_name_struct
op_star
id|dev
op_assign
id|root_dev_names
suffix:semicolon
id|line
op_add_assign
l_int|5
suffix:semicolon
r_do
(brace
r_int
id|len
op_assign
id|strlen
c_func
(paren
id|dev-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|line
comma
id|dev-&gt;name
comma
id|len
)paren
op_eq
l_int|0
)paren
(brace
id|line
op_add_assign
id|len
suffix:semicolon
id|base
op_assign
id|dev-&gt;num
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dev
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
id|dev-&gt;name
)paren
suffix:semicolon
)brace
r_return
id|to_kdev_t
c_func
(paren
id|base
op_plus
id|simple_strtoul
c_func
(paren
id|line
comma
l_int|NULL
comma
id|base
ques
c_cond
l_int|10
suffix:colon
l_int|16
)paren
)paren
suffix:semicolon
)brace
DECL|function|root_dev_setup
r_static
r_void
id|__init
id|root_dev_setup
c_func
(paren
r_char
op_star
id|line
comma
r_int
op_star
id|num
)paren
(brace
id|ROOT_DEV
op_assign
id|name_to_kdev_t
c_func
(paren
id|line
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * List of kernel command line parameters. The first table lists parameters&n; * which are subject to values parsing (leading numbers are converted to&n; * an array of ints and chopped off the string), the second table contains&n; * the few exceptions which obey their own syntax rules.&n; */
DECL|struct|kernel_param
r_struct
id|kernel_param
(brace
DECL|member|str
r_const
r_char
op_star
id|str
suffix:semicolon
DECL|member|setup_func
r_void
(paren
op_star
id|setup_func
)paren
(paren
r_char
op_star
comma
r_int
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|kernel_param
id|cooked_params
(braket
)braket
id|__initdata
op_assign
(brace
multiline_comment|/* FIXME: make PNP just become reserve_setup */
macro_line|#ifndef CONFIG_KERNEL_PNP_RESOURCE
(brace
l_string|&quot;reserve=&quot;
comma
id|reserve_setup
)brace
comma
macro_line|#else
(brace
l_string|&quot;reserve=&quot;
comma
id|pnp_reserve_setup
)brace
comma
macro_line|#endif
(brace
l_string|&quot;profile=&quot;
comma
id|profile_setup
)brace
comma
macro_line|#ifdef __SMP__
(brace
l_string|&quot;nosmp&quot;
comma
id|smp_setup
)brace
comma
(brace
l_string|&quot;maxcpus=&quot;
comma
id|smp_setup
)brace
comma
macro_line|#ifdef __i386__
(brace
l_string|&quot;pirq=&quot;
comma
id|ioapic_pirq_setup
)brace
comma
macro_line|#endif
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_RAM
(brace
l_string|&quot;ramdisk_start=&quot;
comma
id|ramdisk_start_setup
)brace
comma
(brace
l_string|&quot;load_ramdisk=&quot;
comma
id|load_ramdisk
)brace
comma
(brace
l_string|&quot;prompt_ramdisk=&quot;
comma
id|prompt_ramdisk
)brace
comma
(brace
l_string|&quot;ramdisk=&quot;
comma
id|ramdisk_size
)brace
comma
(brace
l_string|&quot;ramdisk_size=&quot;
comma
id|ramdisk_size
)brace
comma
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
(brace
l_string|&quot;noinitrd&quot;
comma
id|no_initrd
)brace
comma
macro_line|#endif
macro_line|#endif
macro_line|#ifdef CONFIG_FB
(brace
l_string|&quot;video=&quot;
comma
id|video_setup
)brace
comma
macro_line|#endif
(brace
l_string|&quot;panic=&quot;
comma
id|panic_setup
)brace
comma
(brace
l_string|&quot;console=&quot;
comma
id|console_setup
)brace
comma
macro_line|#ifdef CONFIG_VGA_CONSOLE
(brace
l_string|&quot;no-scroll&quot;
comma
id|no_scroll
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MDA_CONSOLE
(brace
l_string|&quot;mdacon=&quot;
comma
id|mdacon_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_VT
(brace
l_string|&quot;kbd-reset&quot;
comma
id|kbd_reset_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BUGi386
(brace
l_string|&quot;no-hlt&quot;
comma
id|no_halt
)brace
comma
(brace
l_string|&quot;no387&quot;
comma
id|no_387
)brace
comma
(brace
l_string|&quot;reboot=&quot;
comma
id|reboot_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_INET
(brace
l_string|&quot;ether=&quot;
comma
id|eth_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_COM20020
(brace
l_string|&quot;com20020=&quot;
comma
id|com20020_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_RIM_I
(brace
l_string|&quot;arcrimi=&quot;
comma
id|arcrimi_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_COM90xxIO
(brace
l_string|&quot;com90io=&quot;
comma
id|com90io_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ARCNET_COM90xx
(brace
l_string|&quot;com90xx=&quot;
comma
id|com90xx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_DECNET
(brace
l_string|&quot;decnet=&quot;
comma
id|decnet_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PRINTER
(brace
l_string|&quot;lp=&quot;
comma
id|lp_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_AMIGA
(brace
l_string|&quot;js_am=&quot;
comma
id|js_am_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_ANALOG
(brace
l_string|&quot;js_an=&quot;
comma
id|js_an_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_ASSASIN
(brace
l_string|&quot;js_as=&quot;
comma
id|js_as_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_CONSOLE
(brace
l_string|&quot;js_console=&quot;
comma
id|js_console_setup
)brace
comma
(brace
l_string|&quot;js_console2=&quot;
comma
id|js_console_setup
)brace
comma
(brace
l_string|&quot;js_console3=&quot;
comma
id|js_console_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_DB9
(brace
l_string|&quot;js_db9=&quot;
comma
id|js_db9_setup
)brace
comma
(brace
l_string|&quot;js_db9_2=&quot;
comma
id|js_db9_setup
)brace
comma
(brace
l_string|&quot;js_db9_3=&quot;
comma
id|js_db9_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_TURBOGRAFX
(brace
l_string|&quot;js_tg=&quot;
comma
id|js_tg_setup
)brace
comma
(brace
l_string|&quot;js_tg_2=&quot;
comma
id|js_tg_setup
)brace
comma
(brace
l_string|&quot;js_tg_3=&quot;
comma
id|js_tg_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI
(brace
l_string|&quot;max_scsi_luns=&quot;
comma
id|scsi_luns_setup
)brace
comma
(brace
l_string|&quot;scsi_logging=&quot;
comma
id|scsi_logging_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_JOY_LIGHTNING
(brace
l_string|&quot;js_l4=&quot;
comma
id|js_l4_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_ADVANSYS
(brace
l_string|&quot;advansys=&quot;
comma
id|advansys_setup
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_BLK_DEV_HD)
(brace
l_string|&quot;hd=&quot;
comma
id|hd_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_CHR_DEV_ST
(brace
l_string|&quot;st=&quot;
comma
id|st_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BUSMOUSE
(brace
l_string|&quot;bmouse=&quot;
comma
id|bmouse_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MS_BUSMOUSE
(brace
l_string|&quot;msmouse=&quot;
comma
id|msmouse_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_SEAGATE
(brace
l_string|&quot;st0x=&quot;
comma
id|st0x_setup
)brace
comma
(brace
l_string|&quot;tmc8xx=&quot;
comma
id|tmc8xx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_T128
(brace
l_string|&quot;t128=&quot;
comma
id|t128_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_PAS16
(brace
l_string|&quot;pas16=&quot;
comma
id|pas16_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_GENERIC_NCR5380
(brace
l_string|&quot;ncr5380=&quot;
comma
id|generic_NCR5380_setup
)brace
comma
(brace
l_string|&quot;ncr53c400=&quot;
comma
id|generic_NCR53C400_setup
)brace
comma
(brace
l_string|&quot;ncr53c400a=&quot;
comma
id|generic_NCR53C400A_setup
)brace
comma
(brace
l_string|&quot;dtc3181e=&quot;
comma
id|generic_DTC3181E_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_AHA152X
(brace
l_string|&quot;aha152x=&quot;
comma
id|aha152x_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_AHA1542
(brace
l_string|&quot;aha1542=&quot;
comma
id|aha1542_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_GDTH
(brace
l_string|&quot;gdth=&quot;
comma
id|gdth_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_AIC7XXX
(brace
l_string|&quot;aic7xxx=&quot;
comma
id|aic7xxx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_BUSLOGIC
(brace
l_string|&quot;BusLogic=&quot;
comma
id|BusLogic_Setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_NCR53C8XX
(brace
l_string|&quot;ncr53c8xx=&quot;
comma
id|ncr53c8xx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_EATA
(brace
l_string|&quot;eata=&quot;
comma
id|eata2x_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_U14_34F
(brace
l_string|&quot;u14-34f=&quot;
comma
id|u14_34f_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_AM53C974
(brace
l_string|&quot;AM53C974=&quot;
comma
id|AM53C974_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_NCR53C406A
(brace
l_string|&quot;ncr53c406a=&quot;
comma
id|NCR53c406a_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_FUTURE_DOMAIN
(brace
l_string|&quot;fdomain=&quot;
comma
id|fdomain_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_IN2000
(brace
l_string|&quot;in2000=&quot;
comma
id|in2000_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_7000FASST
(brace
l_string|&quot;wd7000=&quot;
comma
id|wd7000_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SCSI_IBMMCA
(brace
l_string|&quot;ibmmcascsi=&quot;
comma
id|ibmmca_scsi_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_XD
(brace
l_string|&quot;xd=&quot;
comma
id|xd_setup
)brace
comma
(brace
l_string|&quot;xd_geo=&quot;
comma
id|xd_manual_geo_init
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_BLK_DEV_FD) || defined(CONFIG_AMIGA_FLOPPY) || defined(CONFIG_ATARI_FLOPPY)
(brace
l_string|&quot;floppy=&quot;
comma
id|floppy_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_PS2
(brace
l_string|&quot;eda=&quot;
comma
id|ed_setup
)brace
comma
(brace
l_string|&quot;edb=&quot;
comma
id|ed_setup
)brace
comma
(brace
l_string|&quot;tp720=&quot;
comma
id|tp720_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_CDU31A
(brace
l_string|&quot;cdu31a=&quot;
comma
id|cdu31a_setup
)brace
comma
macro_line|#endif CONFIG_CDU31A
macro_line|#ifdef CONFIG_MCD
(brace
l_string|&quot;mcd=&quot;
comma
id|mcd_setup
)brace
comma
macro_line|#endif CONFIG_MCD
macro_line|#ifdef CONFIG_MCDX
(brace
l_string|&quot;mcdx=&quot;
comma
id|mcdx_setup
)brace
comma
macro_line|#endif CONFIG_MCDX
macro_line|#ifdef CONFIG_SBPCD
(brace
l_string|&quot;sbpcd=&quot;
comma
id|sbpcd_setup
)brace
comma
macro_line|#endif CONFIG_SBPCD
macro_line|#ifdef CONFIG_AZTCD
(brace
l_string|&quot;aztcd=&quot;
comma
id|aztcd_setup
)brace
comma
macro_line|#endif CONFIG_AZTCD
macro_line|#ifdef CONFIG_CDU535
(brace
l_string|&quot;sonycd535=&quot;
comma
id|sonycd535_setup
)brace
comma
macro_line|#endif CONFIG_CDU535
macro_line|#ifdef CONFIG_GSCD
(brace
l_string|&quot;gscd=&quot;
comma
id|gscd_setup
)brace
comma
macro_line|#endif CONFIG_GSCD
macro_line|#ifdef CONFIG_CM206
(brace
l_string|&quot;cm206=&quot;
comma
id|cm206_setup
)brace
comma
macro_line|#endif CONFIG_CM206
macro_line|#ifdef CONFIG_OPTCD
(brace
l_string|&quot;optcd=&quot;
comma
id|optcd_setup
)brace
comma
macro_line|#endif CONFIG_OPTCD
macro_line|#ifdef CONFIG_SJCD
(brace
l_string|&quot;sjcd=&quot;
comma
id|sjcd_setup
)brace
comma
macro_line|#endif CONFIG_SJCD
macro_line|#ifdef CONFIG_ISP16_CDI
(brace
l_string|&quot;isp16=&quot;
comma
id|isp16_setup
)brace
comma
macro_line|#endif CONFIG_ISP16_CDI
macro_line|#ifdef CONFIG_SOUND_OSS
(brace
l_string|&quot;sound=&quot;
comma
id|sound_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ISDN_DRV_ICN
(brace
l_string|&quot;icn=&quot;
comma
id|icn_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ISDN_DRV_HISAX
(brace
l_string|&quot;hisax=&quot;
comma
id|HiSax_setup
)brace
comma
(brace
l_string|&quot;HiSax=&quot;
comma
id|HiSax_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ISDN_DRV_PCBIT
(brace
l_string|&quot;pcbit=&quot;
comma
id|pcbit_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ATARIMOUSE
(brace
l_string|&quot;atamouse=&quot;
comma
id|atari_mouse_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_DMASOUND
(brace
l_string|&quot;dmasound=&quot;
comma
id|dmasound_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_ATARI_SCSI
(brace
l_string|&quot;atascsi=&quot;
comma
id|atari_scsi_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_STRAM_SWAP
(brace
l_string|&quot;stram_swap=&quot;
comma
id|stram_swap_setup
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_A4000T_SCSI) || defined(CONFIG_WARPENGINE_SCSI) &bslash;&n;&t;    || defined(CONFIG_A4091_SCSI) || defined(CONFIG_MVME16x_SCSI) &bslash;&n;&t;    || defined(CONFIG_BVME6000_SCSI)
(brace
l_string|&quot;53c7xx=&quot;
comma
id|ncr53c7xx_setup
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_A3000_SCSI) || defined(CONFIG_A2091_SCSI) &bslash;&n;&t;    || defined(CONFIG_GVP11_SCSI)
(brace
l_string|&quot;wd33c93=&quot;
comma
id|wd33c93_setup
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_GVP11_SCSI)
(brace
l_string|&quot;gvp11=&quot;
comma
id|gvp11_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MAC_SCSI
(brace
l_string|&quot;mac5380=&quot;
comma
id|mac_scsi_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_CYCLADES
(brace
l_string|&quot;cyclades=&quot;
comma
id|cy_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_DIGI
(brace
l_string|&quot;digi=&quot;
comma
id|pcxx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_DIGIEPCA
(brace
l_string|&quot;digiepca=&quot;
comma
id|epca_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_RISCOM8
(brace
l_string|&quot;riscom8=&quot;
comma
id|riscom8_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_DMASCC
(brace
l_string|&quot;dmascc=&quot;
comma
id|dmascc_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SPECIALIX
(brace
l_string|&quot;specialix=&quot;
comma
id|specialix_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BAYCOM_PAR
(brace
l_string|&quot;baycom_par=&quot;
comma
id|baycom_par_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BAYCOM_SER_FDX
(brace
l_string|&quot;baycom_ser_fdx=&quot;
comma
id|baycom_ser_fdx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_BAYCOM_SER_HDX
(brace
l_string|&quot;baycom_ser_hdx=&quot;
comma
id|baycom_ser_hdx_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_SOUNDMODEM
(brace
l_string|&quot;soundmodem=&quot;
comma
id|sm_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_WDT
(brace
l_string|&quot;wdt=&quot;
comma
id|wdt_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARPORT
(brace
l_string|&quot;parport=&quot;
comma
id|parport_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PLIP
(brace
l_string|&quot;plip=&quot;
comma
id|plip_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HFMODEM
(brace
l_string|&quot;hfmodem=&quot;
comma
id|hfmodem_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_FTAPE
(brace
l_string|&quot;ftape=&quot;
comma
id|ftape_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MD_BOOT
(brace
l_string|&quot;md=&quot;
comma
id|md_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_MACMOUSE
(brace
l_string|&quot;adb_buttons=&quot;
comma
id|adb_mouse_setup
)brace
comma
macro_line|#endif
(brace
l_int|0
comma
l_int|0
)brace
)brace
suffix:semicolon
DECL|variable|__initdata
r_static
r_struct
id|kernel_param
id|raw_params
(braket
)braket
id|__initdata
op_assign
(brace
(brace
l_string|&quot;root=&quot;
comma
id|root_dev_setup
)brace
comma
macro_line|#ifdef CONFIG_ROOT_NFS
(brace
l_string|&quot;nfsroot=&quot;
comma
id|nfs_root_setup
)brace
comma
(brace
l_string|&quot;nfsaddrs=&quot;
comma
id|ip_auto_config_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_IP_PNP
(brace
l_string|&quot;ip=&quot;
comma
id|ip_auto_config_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PCI
(brace
l_string|&quot;pci=&quot;
comma
id|pci_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PD
(brace
l_string|&quot;pd.&quot;
comma
id|pd_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PCD
(brace
l_string|&quot;pcd.&quot;
comma
id|pcd_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PF
(brace
l_string|&quot;pf.&quot;
comma
id|pf_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PT
(brace
l_string|&quot;pt.&quot;
comma
id|pt_setup
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_PARIDE_PG
(brace
l_string|&quot;pg.&quot;
comma
id|pg_setup
)brace
comma
macro_line|#endif
(brace
l_int|0
comma
l_int|0
)brace
)brace
suffix:semicolon
macro_line|#ifdef CONFIG_BLK_DEV_RAM
DECL|function|ramdisk_start_setup
r_static
r_void
id|__init
id|ramdisk_start_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
r_if
c_cond
(paren
id|ints
(braket
l_int|0
)braket
OG
l_int|0
op_logical_and
id|ints
(braket
l_int|1
)braket
op_ge
l_int|0
)paren
id|rd_image_start
op_assign
id|ints
(braket
l_int|1
)braket
suffix:semicolon
)brace
DECL|function|load_ramdisk
r_static
r_void
id|__init
id|load_ramdisk
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
r_if
c_cond
(paren
id|ints
(braket
l_int|0
)braket
OG
l_int|0
op_logical_and
id|ints
(braket
l_int|1
)braket
op_ge
l_int|0
)paren
id|rd_doload
op_assign
id|ints
(braket
l_int|1
)braket
op_amp
l_int|1
suffix:semicolon
)brace
DECL|function|prompt_ramdisk
r_static
r_void
id|__init
id|prompt_ramdisk
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
r_if
c_cond
(paren
id|ints
(braket
l_int|0
)braket
OG
l_int|0
op_logical_and
id|ints
(braket
l_int|1
)braket
op_ge
l_int|0
)paren
id|rd_prompt
op_assign
id|ints
(braket
l_int|1
)braket
op_amp
l_int|1
suffix:semicolon
)brace
DECL|function|ramdisk_size
r_static
r_void
id|__init
id|ramdisk_size
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
(brace
r_if
c_cond
(paren
id|ints
(braket
l_int|0
)braket
OG
l_int|0
op_logical_and
id|ints
(braket
l_int|1
)braket
op_ge
l_int|0
)paren
id|rd_size
op_assign
id|ints
(braket
l_int|1
)braket
suffix:semicolon
)brace
macro_line|#endif
DECL|function|checksetup
r_static
r_int
id|__init
id|checksetup
c_func
(paren
r_char
op_star
id|line
)paren
(brace
r_int
id|i
comma
id|ints
(braket
l_int|11
)braket
suffix:semicolon
macro_line|#ifdef CONFIG_BLK_DEV_IDE
multiline_comment|/* ide driver needs the basic string, rather than pre-processed values */
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|line
comma
l_string|&quot;ide&quot;
comma
l_int|3
)paren
op_logical_or
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|line
comma
l_string|&quot;hd&quot;
comma
l_int|2
)paren
op_logical_and
id|line
(braket
l_int|2
)braket
op_ne
l_char|&squot;=&squot;
)paren
)paren
(brace
id|ide_setup
c_func
(paren
id|line
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|raw_params
(braket
id|i
)braket
dot
id|str
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|n
op_assign
id|strlen
c_func
(paren
id|raw_params
(braket
id|i
)braket
dot
id|str
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|line
comma
id|raw_params
(braket
id|i
)braket
dot
id|str
comma
id|n
)paren
)paren
(brace
id|raw_params
(braket
id|i
)braket
dot
id|setup_func
c_func
(paren
id|line
op_plus
id|n
comma
l_int|NULL
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|cooked_params
(braket
id|i
)braket
dot
id|str
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
id|n
op_assign
id|strlen
c_func
(paren
id|cooked_params
(braket
id|i
)braket
dot
id|str
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|line
comma
id|cooked_params
(braket
id|i
)braket
dot
id|str
comma
id|n
)paren
)paren
(brace
id|cooked_params
(braket
id|i
)braket
dot
id|setup_func
c_func
(paren
id|get_options
c_func
(paren
id|line
op_plus
id|n
comma
id|ints
)paren
comma
id|ints
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* this should be approx 2 Bo*oMips to start (note initial shift), and will&n;   still work even if initially too large, it will just take slightly longer */
DECL|variable|loops_per_sec
r_int
r_int
id|loops_per_sec
op_assign
(paren
l_int|1
op_lshift
l_int|12
)paren
suffix:semicolon
multiline_comment|/* This is the number of bits of precision for the loops_per_second.  Each&n;   bit takes on average 1.5/HZ seconds.  This (like the original) is a little&n;   better than 1% */
DECL|macro|LPS_PREC
mdefine_line|#define LPS_PREC 8
DECL|function|calibrate_delay
r_void
id|__init
id|calibrate_delay
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|ticks
comma
id|loopbit
suffix:semicolon
r_int
id|lps_precision
op_assign
id|LPS_PREC
suffix:semicolon
id|loops_per_sec
op_assign
(paren
l_int|1
op_lshift
l_int|12
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Calibrating delay loop... &quot;
)paren
suffix:semicolon
r_while
c_loop
(paren
id|loops_per_sec
op_lshift_assign
l_int|1
)paren
(brace
multiline_comment|/* wait for &quot;start of&quot; clock tick */
id|ticks
op_assign
id|jiffies
suffix:semicolon
r_while
c_loop
(paren
id|ticks
op_eq
id|jiffies
)paren
multiline_comment|/* nothing */
suffix:semicolon
multiline_comment|/* Go .. */
id|ticks
op_assign
id|jiffies
suffix:semicolon
id|__delay
c_func
(paren
id|loops_per_sec
)paren
suffix:semicolon
id|ticks
op_assign
id|jiffies
op_minus
id|ticks
suffix:semicolon
r_if
c_cond
(paren
id|ticks
)paren
r_break
suffix:semicolon
)brace
multiline_comment|/* Do a binary approximation to get loops_per_second set to equal one clock&n;   (up to lps_precision bits) */
id|loops_per_sec
op_rshift_assign
l_int|1
suffix:semicolon
id|loopbit
op_assign
id|loops_per_sec
suffix:semicolon
r_while
c_loop
(paren
id|lps_precision
op_decrement
op_logical_and
(paren
id|loopbit
op_rshift_assign
l_int|1
)paren
)paren
(brace
id|loops_per_sec
op_or_assign
id|loopbit
suffix:semicolon
id|ticks
op_assign
id|jiffies
suffix:semicolon
r_while
c_loop
(paren
id|ticks
op_eq
id|jiffies
)paren
suffix:semicolon
id|ticks
op_assign
id|jiffies
suffix:semicolon
id|__delay
c_func
(paren
id|loops_per_sec
)paren
suffix:semicolon
r_if
c_cond
(paren
id|jiffies
op_ne
id|ticks
)paren
multiline_comment|/* longer than 1 tick */
id|loops_per_sec
op_and_assign
op_complement
id|loopbit
suffix:semicolon
)brace
multiline_comment|/* finally, adjust loops per second in terms of seconds instead of clocks */
id|loops_per_sec
op_mul_assign
id|HZ
suffix:semicolon
multiline_comment|/* Round the value and print it */
id|printk
c_func
(paren
l_string|&quot;%lu.%02lu BogoMIPS&bslash;n&quot;
comma
(paren
id|loops_per_sec
op_plus
l_int|2500
)paren
op_div
l_int|500000
comma
(paren
(paren
id|loops_per_sec
op_plus
l_int|2500
)paren
op_div
l_int|5000
)paren
op_mod
l_int|100
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * This is a simple kernel command line parsing function: it parses&n; * the command line, and fills in the arguments/environment to init&n; * as appropriate. Any cmd-line option is taken to be an environment&n; * variable if it contains the character &squot;=&squot;.&n; *&n; * This routine also checks for options meant for the kernel.&n; * These options are not given to init - they are for internal kernel use only.&n; */
DECL|function|parse_options
r_static
r_void
id|__init
id|parse_options
c_func
(paren
r_char
op_star
id|line
)paren
(brace
r_char
op_star
id|next
suffix:semicolon
r_int
id|args
comma
id|envs
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
op_star
id|line
)paren
r_return
suffix:semicolon
id|args
op_assign
l_int|0
suffix:semicolon
id|envs
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* TERM is set to &squot;linux&squot; by default */
id|next
op_assign
id|line
suffix:semicolon
r_while
c_loop
(paren
(paren
id|line
op_assign
id|next
)paren
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
(paren
id|next
op_assign
id|strchr
c_func
(paren
id|line
comma
l_char|&squot; &squot;
)paren
)paren
op_ne
l_int|NULL
)paren
op_star
id|next
op_increment
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;&t;&t; * check for kernel options first..&n;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|line
comma
l_string|&quot;ro&quot;
)paren
)paren
(brace
id|root_mountflags
op_or_assign
id|MS_RDONLY
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|line
comma
l_string|&quot;rw&quot;
)paren
)paren
(brace
id|root_mountflags
op_and_assign
op_complement
id|MS_RDONLY
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|line
comma
l_string|&quot;debug&quot;
)paren
)paren
(brace
id|console_loglevel
op_assign
l_int|10
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|line
comma
l_string|&quot;init=&quot;
comma
l_int|5
)paren
)paren
(brace
id|line
op_add_assign
l_int|5
suffix:semicolon
id|execute_command
op_assign
id|line
suffix:semicolon
multiline_comment|/* In case LILO is going to boot us with default command line,&n;&t;&t;&t; * it prepends &quot;auto&quot; before the whole cmdline which makes&n;&t;&t;&t; * the shell think it should execute a script with such name.&n;&t;&t;&t; * So we ignore all arguments entered _before_ init=... [MJ]&n;&t;&t;&t; */
id|args
op_assign
l_int|0
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|checksetup
c_func
(paren
id|line
)paren
)paren
r_continue
suffix:semicolon
multiline_comment|/*&n;&t;&t; * Then check if it&squot;s an environment variable or&n;&t;&t; * an option.&n;&t;&t; */
r_if
c_cond
(paren
id|strchr
c_func
(paren
id|line
comma
l_char|&squot;=&squot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|envs
op_ge
id|MAX_INIT_ENVS
)paren
r_break
suffix:semicolon
id|envp_init
(braket
op_increment
id|envs
)braket
op_assign
id|line
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|args
op_ge
id|MAX_INIT_ARGS
)paren
r_break
suffix:semicolon
id|argv_init
(braket
op_increment
id|args
)braket
op_assign
id|line
suffix:semicolon
)brace
)brace
id|argv_init
(braket
id|args
op_plus
l_int|1
)braket
op_assign
l_int|NULL
suffix:semicolon
id|envp_init
(braket
id|envs
op_plus
l_int|1
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
r_extern
r_void
id|setup_arch
c_func
(paren
r_char
op_star
op_star
comma
r_int
r_int
op_star
comma
r_int
r_int
op_star
)paren
suffix:semicolon
macro_line|#ifndef __SMP__
multiline_comment|/*&n; *&t;Uniprocessor idle thread&n; */
DECL|function|cpu_idle
r_int
id|cpu_idle
c_func
(paren
r_void
op_star
id|unused
)paren
(brace
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
id|idle
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
DECL|macro|smp_init
mdefine_line|#define smp_init()&t;do { } while (0)
macro_line|#else
multiline_comment|/*&n; *&t;Multiprocessor idle thread is in arch/...&n; */
r_extern
r_int
id|cpu_idle
c_func
(paren
r_void
op_star
id|unused
)paren
suffix:semicolon
multiline_comment|/* Called by boot processor to activate the rest. */
DECL|function|smp_init
r_static
r_void
id|__init
id|smp_init
c_func
(paren
r_void
)paren
(brace
multiline_comment|/* Get other processors into their bootup holding patterns. */
id|smp_boot_cpus
c_func
(paren
)paren
suffix:semicolon
id|smp_threads_ready
op_assign
l_int|1
suffix:semicolon
id|smp_commence
c_func
(paren
)paren
suffix:semicolon
)brace
macro_line|#endif
r_extern
r_void
id|initialize_secondary
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/*&n; *&t;Activate the first processor.&n; */
DECL|function|start_kernel
id|asmlinkage
r_void
id|__init
id|start_kernel
c_func
(paren
r_void
)paren
(brace
r_char
op_star
id|command_line
suffix:semicolon
macro_line|#ifdef __SMP__
r_static
r_int
id|boot_cpu
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* &quot;current&quot; has been set up, we need to load it now */
r_if
c_cond
(paren
op_logical_neg
id|boot_cpu
)paren
id|initialize_secondary
c_func
(paren
)paren
suffix:semicolon
id|boot_cpu
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * Interrupts are still disabled. Do necessary setups, then&n; * enable them&n; */
id|printk
c_func
(paren
id|linux_banner
)paren
suffix:semicolon
id|setup_arch
c_func
(paren
op_amp
id|command_line
comma
op_amp
id|memory_start
comma
op_amp
id|memory_end
)paren
suffix:semicolon
id|memory_start
op_assign
id|paging_init
c_func
(paren
id|memory_start
comma
id|memory_end
)paren
suffix:semicolon
id|trap_init
c_func
(paren
)paren
suffix:semicolon
id|init_IRQ
c_func
(paren
)paren
suffix:semicolon
id|sched_init
c_func
(paren
)paren
suffix:semicolon
id|time_init
c_func
(paren
)paren
suffix:semicolon
id|parse_options
c_func
(paren
id|command_line
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * HACK ALERT! This is early. We&squot;re enabling the console before&n;&t; * we&squot;ve done PCI setups etc, and console_init() must be aware of&n;&t; * this. But we do want output early, in case something goes wrong.&n;&t; */
id|memory_start
op_assign
id|console_init
c_func
(paren
id|memory_start
comma
id|memory_end
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_MODULES
id|init_modules
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|prof_shift
)paren
(brace
id|prof_buffer
op_assign
(paren
r_int
r_int
op_star
)paren
id|memory_start
suffix:semicolon
multiline_comment|/* only text is profiled */
id|prof_len
op_assign
(paren
r_int
r_int
)paren
op_amp
id|_etext
op_minus
(paren
r_int
r_int
)paren
op_amp
id|_stext
suffix:semicolon
id|prof_len
op_rshift_assign
id|prof_shift
suffix:semicolon
id|memory_start
op_add_assign
id|prof_len
op_star
r_sizeof
(paren
r_int
r_int
)paren
suffix:semicolon
id|memset
c_func
(paren
id|prof_buffer
comma
l_int|0
comma
id|prof_len
op_star
r_sizeof
(paren
r_int
r_int
)paren
)paren
suffix:semicolon
)brace
id|memory_start
op_assign
id|kmem_cache_init
c_func
(paren
id|memory_start
comma
id|memory_end
)paren
suffix:semicolon
id|sti
c_func
(paren
)paren
suffix:semicolon
id|calibrate_delay
c_func
(paren
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
r_if
c_cond
(paren
id|initrd_start
op_logical_and
op_logical_neg
id|initrd_below_start_ok
op_logical_and
id|initrd_start
OL
id|memory_start
)paren
(brace
id|printk
c_func
(paren
id|KERN_CRIT
l_string|&quot;initrd overwritten (0x%08lx &lt; 0x%08lx) - &quot;
l_string|&quot;disabling it.&bslash;n&quot;
comma
id|initrd_start
comma
id|memory_start
)paren
suffix:semicolon
id|initrd_start
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#endif
id|mem_init
c_func
(paren
id|memory_start
comma
id|memory_end
)paren
suffix:semicolon
id|kmem_cache_sizes_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_PROC_FS
id|proc_root_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
id|uidcache_init
c_func
(paren
)paren
suffix:semicolon
id|filescache_init
c_func
(paren
)paren
suffix:semicolon
id|dcache_init
c_func
(paren
)paren
suffix:semicolon
id|vma_init
c_func
(paren
)paren
suffix:semicolon
id|buffer_init
c_func
(paren
)paren
suffix:semicolon
id|signals_init
c_func
(paren
)paren
suffix:semicolon
id|inode_init
c_func
(paren
)paren
suffix:semicolon
id|file_table_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#if defined(CONFIG_SYSVIPC)
id|ipc_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_QUOTA)
id|dquot_init_hash
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
id|check_bugs
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;POSIX conformance testing by UNIFIX&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* &n;&t; *&t;We count on the initial thread going ok &n;&t; *&t;Like idlers init is an unlocked kernel thread, which will&n;&t; *&t;make syscalls (and thus be locked).&n;&t; */
id|smp_init
c_func
(paren
)paren
suffix:semicolon
id|kernel_thread
c_func
(paren
id|init
comma
l_int|NULL
comma
id|CLONE_FS
op_or
id|CLONE_FILES
op_or
id|CLONE_SIGHAND
)paren
suffix:semicolon
id|cpu_idle
c_func
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
DECL|function|do_linuxrc
r_static
r_int
id|do_linuxrc
c_func
(paren
r_void
op_star
id|shell
)paren
(brace
r_static
r_char
op_star
id|argv
(braket
)braket
op_assign
(brace
l_string|&quot;linuxrc&quot;
comma
l_int|NULL
comma
)brace
suffix:semicolon
id|close
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|close
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|close
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|setsid
c_func
(paren
)paren
suffix:semicolon
(paren
r_void
)paren
id|open
c_func
(paren
l_string|&quot;/dev/console&quot;
comma
id|O_RDWR
comma
l_int|0
)paren
suffix:semicolon
(paren
r_void
)paren
id|dup
c_func
(paren
l_int|0
)paren
suffix:semicolon
(paren
r_void
)paren
id|dup
c_func
(paren
l_int|0
)paren
suffix:semicolon
r_return
id|execve
c_func
(paren
id|shell
comma
id|argv
comma
id|envp_init
)paren
suffix:semicolon
)brace
DECL|function|no_initrd
r_static
r_void
id|__init
id|no_initrd
c_func
(paren
r_char
op_star
id|s
comma
r_int
op_star
id|ints
)paren
(brace
id|mount_initrd
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/*&n; * Ok, the machine is now initialized. None of the devices&n; * have been touched yet, but the CPU subsystem is up and&n; * running, and memory and process management works.&n; *&n; * Now we can finally start doing some real work..&n; */
DECL|function|do_basic_setup
r_static
r_void
id|__init
id|do_basic_setup
c_func
(paren
r_void
)paren
(brace
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
r_int
id|real_root_mountflags
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_MTRR)&t;/* Do this after SMP initialization */
multiline_comment|/*&n; * We should probably create some architecture-dependent &quot;fixup after&n; * everything is up&quot; style function where this would belong better&n; * than in init/main.c..&n; */
id|mtrr_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SYSCTL
id|sysctl_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n;&t; * Ok, at this point all CPU&squot;s should be initialized, so&n;&t; * we can start looking into devices..&n;&t; */
macro_line|#ifdef CONFIG_PCI
id|pci_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_SBUS
id|sbus_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_PMAC) || defined(CONFIG_CHRP)
id|powermac_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_MCA
id|mca_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ARCH_ACORN
id|ecard_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_ZORRO
id|zorro_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_DIO
id|dio_init
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Networking initialization needs a process context */
id|sock_init
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* Launch bdflush from here, instead of the old syscall way. */
id|kernel_thread
c_func
(paren
id|bdflush
comma
l_int|NULL
comma
id|CLONE_FS
op_or
id|CLONE_FILES
op_or
id|CLONE_SIGHAND
)paren
suffix:semicolon
multiline_comment|/* Start the background pageout daemon. */
id|kswapd_setup
c_func
(paren
)paren
suffix:semicolon
id|kernel_thread
c_func
(paren
id|kswapd
comma
l_int|NULL
comma
id|CLONE_FS
op_or
id|CLONE_FILES
op_or
id|CLONE_SIGHAND
)paren
suffix:semicolon
macro_line|#if CONFIG_AP1000
multiline_comment|/* Start the async paging daemon. */
(brace
r_extern
r_int
id|asyncd
c_func
(paren
r_void
op_star
)paren
suffix:semicolon
id|kernel_thread
c_func
(paren
id|asyncd
comma
l_int|NULL
comma
id|CLONE_FS
op_or
id|CLONE_FILES
op_or
id|CLONE_SIGHAND
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
id|real_root_dev
op_assign
id|ROOT_DEV
suffix:semicolon
id|real_root_mountflags
op_assign
id|root_mountflags
suffix:semicolon
r_if
c_cond
(paren
id|initrd_start
op_logical_and
id|mount_initrd
)paren
id|root_mountflags
op_and_assign
op_complement
id|MS_RDONLY
suffix:semicolon
r_else
id|mount_initrd
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
multiline_comment|/* Set up devices .. */
id|device_setup
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* .. executable formats .. */
id|binfmt_setup
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* .. filesystems .. */
id|filesystem_setup
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* Mount the root filesystem.. */
id|mount_root
c_func
(paren
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_UMSDOS_FS
(brace
multiline_comment|/*&n;&t;&t;&t;When mounting a umsdos fs as root, we detect&n;&t;&t;&t;the pseudo_root (/linux) and initialise it here.&n;&t;&t;&t;pseudo_root is defined in fs/umsdos/inode.c&n;&t;&t;*/
r_extern
r_struct
id|inode
op_star
id|pseudo_root
suffix:semicolon
r_if
c_cond
(paren
id|pseudo_root
op_ne
l_int|NULL
)paren
(brace
id|current-&gt;fs-&gt;root
op_assign
id|pseudo_root
suffix:semicolon
id|current-&gt;fs-&gt;pwd
op_assign
id|pseudo_root
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
id|root_mountflags
op_assign
id|real_root_mountflags
suffix:semicolon
r_if
c_cond
(paren
id|mount_initrd
op_logical_and
id|ROOT_DEV
op_ne
id|real_root_dev
op_logical_and
id|MAJOR
c_func
(paren
id|ROOT_DEV
)paren
op_eq
id|RAMDISK_MAJOR
op_logical_and
id|MINOR
c_func
(paren
id|ROOT_DEV
)paren
op_eq
l_int|0
)paren
(brace
r_int
id|error
suffix:semicolon
r_int
id|i
comma
id|pid
suffix:semicolon
id|pid
op_assign
id|kernel_thread
c_func
(paren
id|do_linuxrc
comma
l_string|&quot;/linuxrc&quot;
comma
id|SIGCHLD
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pid
OG
l_int|0
)paren
r_while
c_loop
(paren
id|pid
op_ne
id|wait
c_func
(paren
op_amp
id|i
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|MAJOR
c_func
(paren
id|real_root_dev
)paren
op_ne
id|RAMDISK_MAJOR
op_logical_or
id|MINOR
c_func
(paren
id|real_root_dev
)paren
op_ne
l_int|0
)paren
(brace
id|error
op_assign
id|change_root
c_func
(paren
id|real_root_dev
comma
l_string|&quot;/initrd&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;Change root to /initrd: &quot;
l_string|&quot;error %d&bslash;n&quot;
comma
id|error
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
DECL|function|init
r_static
r_int
id|init
c_func
(paren
r_void
op_star
id|unused
)paren
(brace
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|do_basic_setup
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Ok, we have completed the initial bootup, and&n;&t; * we&squot;re essentially up and running. Get rid of the&n;&t; * initmem segments and start the user-mode stuff..&n;&t; */
id|free_initmem
c_func
(paren
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|open
c_func
(paren
l_string|&quot;/dev/console&quot;
comma
id|O_RDWR
comma
l_int|0
)paren
OL
l_int|0
)paren
id|printk
c_func
(paren
l_string|&quot;Warning: unable to open an initial console.&bslash;n&quot;
)paren
suffix:semicolon
(paren
r_void
)paren
id|dup
c_func
(paren
l_int|0
)paren
suffix:semicolon
(paren
r_void
)paren
id|dup
c_func
(paren
l_int|0
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * We try each of these until one succeeds.&n;&t; *&n;&t; * The Bourne shell can be used instead of init if we are &n;&t; * trying to recover a really broken machine.&n;&t; */
r_if
c_cond
(paren
id|execute_command
)paren
id|execve
c_func
(paren
id|execute_command
comma
id|argv_init
comma
id|envp_init
)paren
suffix:semicolon
id|execve
c_func
(paren
l_string|&quot;/sbin/init&quot;
comma
id|argv_init
comma
id|envp_init
)paren
suffix:semicolon
id|execve
c_func
(paren
l_string|&quot;/etc/init&quot;
comma
id|argv_init
comma
id|envp_init
)paren
suffix:semicolon
id|execve
c_func
(paren
l_string|&quot;/bin/init&quot;
comma
id|argv_init
comma
id|envp_init
)paren
suffix:semicolon
id|execve
c_func
(paren
l_string|&quot;/bin/sh&quot;
comma
id|argv_init
comma
id|envp_init
)paren
suffix:semicolon
id|panic
c_func
(paren
l_string|&quot;No init found.  Try passing init= option to kernel.&quot;
)paren
suffix:semicolon
)brace
eof
