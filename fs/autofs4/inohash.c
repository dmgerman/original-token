multiline_comment|/*&n; * &quot;inohash&quot; is a misnomer.  Inodes are just stored in a single list,&n; * since this code is only ever asked for the most recently inserted&n; * inode.&n; *&n; *   Copyright 1999 Jeremy Fitzhardinge &lt;jeremy@goop.org&gt;&n; */
macro_line|#include &quot;autofs_i.h&quot;
DECL|function|autofs4_init_ihash
r_void
id|autofs4_init_ihash
c_func
(paren
r_struct
id|autofs_inohash
op_star
id|ih
)paren
(brace
id|INIT_LIST_HEAD
c_func
(paren
op_amp
id|ih-&gt;head
)paren
suffix:semicolon
)brace
DECL|function|autofs4_ihash_insert
r_void
id|autofs4_ihash_insert
c_func
(paren
r_struct
id|autofs_inohash
op_star
id|ih
comma
r_struct
id|autofs_info
op_star
id|ino
)paren
(brace
id|DPRINTK
c_func
(paren
(paren
l_string|&quot;autofs_ihash_insert: adding ino %ld&bslash;n&quot;
comma
id|ino-&gt;ino
)paren
)paren
suffix:semicolon
id|list_add
c_func
(paren
op_amp
id|ino-&gt;ino_hash
comma
op_amp
id|ih-&gt;head
)paren
suffix:semicolon
)brace
DECL|function|autofs4_ihash_delete
r_void
id|autofs4_ihash_delete
c_func
(paren
r_struct
id|autofs_info
op_star
id|inf
)paren
(brace
id|DPRINTK
c_func
(paren
(paren
l_string|&quot;autofs_ihash_delete: deleting ino %ld&bslash;n&quot;
comma
id|inf-&gt;ino
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|list_empty
c_func
(paren
op_amp
id|inf-&gt;ino_hash
)paren
)paren
id|list_del
c_func
(paren
op_amp
id|inf-&gt;ino_hash
)paren
suffix:semicolon
)brace
DECL|function|autofs4_ihash_find
r_struct
id|autofs_info
op_star
id|autofs4_ihash_find
c_func
(paren
r_struct
id|autofs_inohash
op_star
id|ih
comma
id|ino_t
id|inum
)paren
(brace
r_struct
id|list_head
op_star
id|tmp
suffix:semicolon
r_for
c_loop
(paren
id|tmp
op_assign
id|ih-&gt;head.next
suffix:semicolon
id|tmp
op_ne
op_amp
id|ih-&gt;head
suffix:semicolon
id|tmp
op_assign
id|tmp-&gt;next
)paren
(brace
r_struct
id|autofs_info
op_star
id|ino
op_assign
id|list_entry
c_func
(paren
id|tmp
comma
r_struct
id|autofs_info
comma
id|ino_hash
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ino-&gt;ino
op_eq
id|inum
)paren
(brace
id|DPRINTK
c_func
(paren
(paren
l_string|&quot;autofs_ihash_find: found %ld -&gt; %p&bslash;n&quot;
comma
id|inum
comma
id|ino
)paren
)paren
suffix:semicolon
r_return
id|ino
suffix:semicolon
)brace
)brace
id|DPRINTK
c_func
(paren
(paren
l_string|&quot;autofs_ihash_find: didn&squot;t find %ld&bslash;n&quot;
comma
id|inum
)paren
)paren
suffix:semicolon
r_return
l_int|NULL
suffix:semicolon
)brace
DECL|function|autofs4_ihash_nuke
r_void
id|autofs4_ihash_nuke
c_func
(paren
r_struct
id|autofs_inohash
op_star
id|ih
)paren
(brace
r_struct
id|list_head
op_star
id|tmp
op_assign
id|ih-&gt;head.next
suffix:semicolon
r_struct
id|list_head
op_star
id|next
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|tmp
op_ne
op_amp
id|ih-&gt;head
suffix:semicolon
id|tmp
op_assign
id|next
)paren
(brace
r_struct
id|autofs_info
op_star
id|ino
suffix:semicolon
id|next
op_assign
id|tmp-&gt;next
suffix:semicolon
id|ino
op_assign
id|list_entry
c_func
(paren
id|tmp
comma
r_struct
id|autofs_info
comma
id|ino_hash
)paren
suffix:semicolon
id|DPRINTK
c_func
(paren
(paren
l_string|&quot;autofs_ihash_nuke: nuking %ld&bslash;n&quot;
comma
id|ino-&gt;ino
)paren
)paren
suffix:semicolon
id|autofs4_free_ino
c_func
(paren
id|ino
)paren
suffix:semicolon
)brace
id|INIT_LIST_HEAD
c_func
(paren
op_amp
id|ih-&gt;head
)paren
suffix:semicolon
)brace
eof
