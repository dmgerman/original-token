macro_line|#ifndef AMIGAFFS_H
DECL|macro|AMIGAFFS_H
mdefine_line|#define AMIGAFFS_H
multiline_comment|/* Ugly macros to make the code pretty. */
DECL|macro|GET_END_PTR
mdefine_line|#define GET_END_PTR(st,p,sz) ((st *)((char *)(p)+((sz)-sizeof(st))))
DECL|macro|MIDBLOCK_LONGS
mdefine_line|#define MIDBLOCK_LONGS(sz) ((sz - sizeof (struct dir_front) &bslash;&n;&t;&t;&t;     - sizeof (struct dir_end)) / 4)
r_static
id|__inline__
r_int
r_int
DECL|function|swap_long
id|swap_long
(paren
r_int
r_int
id|x
)paren
(brace
macro_line|#ifdef __i386__   /* bad check... should be endian check */
r_int
r_char
op_star
id|px
suffix:semicolon
id|px
op_assign
(paren
r_int
r_char
op_star
)paren
op_amp
id|x
suffix:semicolon
r_return
(paren
(paren
id|px
(braket
l_int|3
)braket
op_lshift
l_int|0
)paren
op_or
(paren
id|px
(braket
l_int|2
)braket
op_lshift
l_int|8
)paren
op_or
(paren
id|px
(braket
l_int|1
)braket
op_lshift
l_int|16
)paren
op_or
(paren
id|px
(braket
l_int|0
)braket
op_lshift
l_int|24
)paren
)paren
suffix:semicolon
macro_line|#else
r_return
id|x
suffix:semicolon
macro_line|#endif
)brace
DECL|typedef|ULONG
r_typedef
r_int
r_int
id|ULONG
suffix:semicolon
DECL|typedef|UWORD
r_typedef
r_int
r_int
id|UWORD
suffix:semicolon
DECL|typedef|UBYTE
r_typedef
r_int
r_char
id|UBYTE
suffix:semicolon
DECL|typedef|LONG
r_typedef
r_int
id|LONG
suffix:semicolon
DECL|typedef|WORD
r_typedef
r_int
id|WORD
suffix:semicolon
DECL|typedef|BYTE
r_typedef
r_char
id|BYTE
suffix:semicolon
DECL|struct|DateStamp
r_struct
id|DateStamp
(brace
DECL|member|ds_Days
id|ULONG
id|ds_Days
suffix:semicolon
DECL|member|ds_Minute
id|ULONG
id|ds_Minute
suffix:semicolon
DECL|member|ds_Tick
id|ULONG
id|ds_Tick
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|T_SHORT
mdefine_line|#define T_SHORT &t;2
DECL|macro|T_LIST
mdefine_line|#define T_LIST&t;&t;16
DECL|macro|T_DATA
mdefine_line|#define T_DATA&t;&t;8
DECL|macro|ST_FILE
mdefine_line|#define ST_FILE &t;-3
DECL|macro|ST_USERDIR
mdefine_line|#define ST_USERDIR&t;2
DECL|macro|ST_ROOT
mdefine_line|#define ST_ROOT &t;1
DECL|macro|ST_SOFTLINK
mdefine_line|#define ST_SOFTLINK&t;3
DECL|macro|ST_LINKFILE
mdefine_line|#define ST_LINKFILE&t;-4
DECL|macro|ST_LINKDIR
mdefine_line|#define ST_LINKDIR&t;4
DECL|macro|PROT_ARCHIVE
mdefine_line|#define PROT_ARCHIVE        (1&lt;&lt;4)
DECL|macro|PROT_READ
mdefine_line|#define PROT_READ           (1&lt;&lt;3)
DECL|macro|PROT_WRITE
mdefine_line|#define PROT_WRITE          (1&lt;&lt;2)
DECL|macro|PROT_EXECUTE
mdefine_line|#define PROT_EXECUTE        (1&lt;&lt;1)
DECL|macro|PROT_DELETE
mdefine_line|#define PROT_DELETE         (1&lt;&lt;0)
DECL|macro|PROT_OTR_READ
mdefine_line|#define PROT_OTR_READ       (1&lt;&lt;15)
DECL|macro|PROT_OTR_WRITE
mdefine_line|#define PROT_OTR_WRITE      (1&lt;&lt;14)
DECL|macro|PROT_OTR_EXECUTE
mdefine_line|#define PROT_OTR_EXECUTE    (1&lt;&lt;13)
DECL|macro|PROT_OTR_DELETE
mdefine_line|#define PROT_OTR_DELETE     (1&lt;&lt;12)
DECL|macro|PROT_GRP_READ
mdefine_line|#define PROT_GRP_READ       (1&lt;&lt;11)
DECL|macro|PROT_GRP_WRITE
mdefine_line|#define PROT_GRP_WRITE      (1&lt;&lt;10)
DECL|macro|PROT_GRP_EXECUTE
mdefine_line|#define PROT_GRP_EXECUTE    (1&lt;&lt;9)
DECL|macro|PROT_GRP_DELETE
mdefine_line|#define PROT_GRP_DELETE     (1&lt;&lt;8)
DECL|struct|ffs_root_front
r_struct
id|ffs_root_front
(brace
DECL|member|primary_type
id|LONG
id|primary_type
suffix:semicolon
DECL|member|spare1
id|ULONG
id|spare1
(braket
l_int|2
)braket
suffix:semicolon
DECL|member|hash_size
id|ULONG
id|hash_size
suffix:semicolon
DECL|member|spare2
id|ULONG
id|spare2
suffix:semicolon
DECL|member|checksum
id|ULONG
id|checksum
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|ffs_root_end
r_struct
id|ffs_root_end
(brace
DECL|member|bm_flag
id|LONG
id|bm_flag
suffix:semicolon
DECL|member|bm_keys
id|ULONG
id|bm_keys
(braket
l_int|25
)braket
suffix:semicolon
DECL|member|bm_extend
id|ULONG
id|bm_extend
suffix:semicolon
DECL|member|dir_altered
r_struct
id|DateStamp
id|dir_altered
suffix:semicolon
DECL|member|disk_name
id|UBYTE
id|disk_name
(braket
l_int|40
)braket
suffix:semicolon
DECL|member|disk_altered
r_struct
id|DateStamp
id|disk_altered
suffix:semicolon
DECL|member|disk_made
r_struct
id|DateStamp
id|disk_made
suffix:semicolon
DECL|member|spare1
id|ULONG
id|spare1
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|secondary_type
id|LONG
id|secondary_type
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|dir_front
r_struct
id|dir_front
(brace
DECL|member|primary_type
id|LONG
id|primary_type
suffix:semicolon
DECL|member|own_key
id|ULONG
id|own_key
suffix:semicolon
DECL|member|spare1
id|ULONG
id|spare1
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|checksum
id|ULONG
id|checksum
suffix:semicolon
DECL|member|hash_table
id|ULONG
id|hash_table
(braket
l_int|0
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|dir_end
r_struct
id|dir_end
(brace
DECL|member|spare1
id|ULONG
id|spare1
suffix:semicolon
DECL|member|uid
id|UWORD
id|uid
suffix:semicolon
DECL|member|gid
id|UWORD
id|gid
suffix:semicolon
DECL|member|protect
id|ULONG
id|protect
suffix:semicolon
DECL|member|spare2
id|ULONG
id|spare2
suffix:semicolon
DECL|member|comment
id|UBYTE
id|comment
(braket
l_int|92
)braket
suffix:semicolon
DECL|member|created
r_struct
id|DateStamp
id|created
suffix:semicolon
DECL|member|dir_name
id|UBYTE
id|dir_name
(braket
l_int|64
)braket
suffix:semicolon
DECL|member|hash_chain
id|ULONG
id|hash_chain
suffix:semicolon
DECL|member|parent
id|ULONG
id|parent
suffix:semicolon
DECL|member|spare3
id|ULONG
id|spare3
suffix:semicolon
DECL|member|secondary_type
id|LONG
id|secondary_type
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|file_front
r_struct
id|file_front
(brace
DECL|member|primary_type
id|LONG
id|primary_type
suffix:semicolon
DECL|member|own_key
id|ULONG
id|own_key
suffix:semicolon
DECL|member|block_count
id|ULONG
id|block_count
suffix:semicolon
DECL|member|unknown1
id|ULONG
id|unknown1
suffix:semicolon
DECL|member|first_data
id|ULONG
id|first_data
suffix:semicolon
DECL|member|checksum
id|ULONG
id|checksum
suffix:semicolon
DECL|member|blocks
id|ULONG
id|blocks
(braket
l_int|0
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|file_end
r_struct
id|file_end
(brace
DECL|member|spare1
id|ULONG
id|spare1
suffix:semicolon
DECL|member|uid
id|UWORD
id|uid
suffix:semicolon
DECL|member|gid
id|UWORD
id|gid
suffix:semicolon
DECL|member|protect
id|ULONG
id|protect
suffix:semicolon
DECL|member|byte_size
id|ULONG
id|byte_size
suffix:semicolon
DECL|member|comment
id|UBYTE
id|comment
(braket
l_int|92
)braket
suffix:semicolon
DECL|member|created
r_struct
id|DateStamp
id|created
suffix:semicolon
DECL|member|file_name
id|UBYTE
id|file_name
(braket
l_int|64
)braket
suffix:semicolon
DECL|member|hash_chain
id|ULONG
id|hash_chain
suffix:semicolon
DECL|member|parent
id|ULONG
id|parent
suffix:semicolon
DECL|member|extension
id|ULONG
id|extension
suffix:semicolon
DECL|member|secondary_type
id|LONG
id|secondary_type
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|data_front
r_struct
id|data_front
(brace
DECL|member|primary_type
id|LONG
id|primary_type
suffix:semicolon
DECL|member|header
id|ULONG
id|header
suffix:semicolon
DECL|member|seq_num
id|ULONG
id|seq_num
suffix:semicolon
DECL|member|data_size
id|ULONG
id|data_size
suffix:semicolon
DECL|member|next_data
id|ULONG
id|next_data
suffix:semicolon
DECL|member|checksum
id|ULONG
id|checksum
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|symlink_front
r_struct
id|symlink_front
(brace
DECL|member|primary_type
id|LONG
id|primary_type
suffix:semicolon
DECL|member|own_key
id|ULONG
id|own_key
suffix:semicolon
DECL|member|unused
id|LONG
id|unused
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|checksum
id|ULONG
id|checksum
suffix:semicolon
DECL|member|symname
id|UBYTE
id|symname
(braket
l_int|0
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|symlink_end
r_struct
id|symlink_end
(brace
DECL|member|spare1
id|ULONG
id|spare1
suffix:semicolon
DECL|member|uid
id|UWORD
id|uid
suffix:semicolon
DECL|member|gid
id|UWORD
id|gid
suffix:semicolon
DECL|member|protect
id|ULONG
id|protect
suffix:semicolon
DECL|member|spare2
id|ULONG
id|spare2
suffix:semicolon
DECL|member|comment
id|UBYTE
id|comment
(braket
l_int|92
)braket
suffix:semicolon
DECL|member|created
r_struct
id|DateStamp
id|created
suffix:semicolon
DECL|member|link_name
id|UBYTE
id|link_name
(braket
l_int|64
)braket
suffix:semicolon
DECL|member|hash_chain
id|ULONG
id|hash_chain
suffix:semicolon
DECL|member|parent
id|ULONG
id|parent
suffix:semicolon
DECL|member|spare3
id|ULONG
id|spare3
suffix:semicolon
DECL|member|secondary_type
id|LONG
id|secondary_type
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|hardlink_front
r_struct
id|hardlink_front
(brace
DECL|member|primary_type
id|LONG
id|primary_type
suffix:semicolon
DECL|member|own_key
id|ULONG
id|own_key
suffix:semicolon
DECL|member|unused
id|LONG
id|unused
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|checkksum
id|ULONG
id|checkksum
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|hardlink_end
r_struct
id|hardlink_end
(brace
DECL|member|spare1
id|ULONG
id|spare1
suffix:semicolon
DECL|member|uid
id|UWORD
id|uid
suffix:semicolon
DECL|member|gid
id|UWORD
id|gid
suffix:semicolon
DECL|member|protect
id|ULONG
id|protect
suffix:semicolon
DECL|member|spare2
id|ULONG
id|spare2
suffix:semicolon
DECL|member|comment
id|UBYTE
id|comment
(braket
l_int|92
)braket
suffix:semicolon
DECL|member|created
r_struct
id|DateStamp
id|created
suffix:semicolon
DECL|member|link_name
id|UBYTE
id|link_name
(braket
l_int|32
)braket
suffix:semicolon
DECL|member|spare3
id|ULONG
id|spare3
suffix:semicolon
DECL|member|original
id|ULONG
id|original
suffix:semicolon
DECL|member|link_chain
id|ULONG
id|link_chain
suffix:semicolon
DECL|member|spare4
id|ULONG
id|spare4
(braket
l_int|5
)braket
suffix:semicolon
DECL|member|hash_chain
id|ULONG
id|hash_chain
suffix:semicolon
DECL|member|parent
id|ULONG
id|parent
suffix:semicolon
DECL|member|spare5
id|ULONG
id|spare5
suffix:semicolon
DECL|member|secondary_type
id|LONG
id|secondary_type
suffix:semicolon
)brace
suffix:semicolon
macro_line|#endif
eof
