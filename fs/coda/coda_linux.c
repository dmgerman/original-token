multiline_comment|/*&n; * Inode operations for Coda filesystem&n; * Original version: (C) 1996 P. Braam and M. Callahan&n; * Rewritten for Linux 2.1. (C) 1997 Carnegie Mellon University&n; * &n; * Carnegie Mellon encourages users to contribute improvements to&n; * the Coda project. Contact Peter Braam (coda@cs.cmu.edu).&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/stat.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/locks.h&gt;
macro_line|#include &lt;asm/segment.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/coda.h&gt;
macro_line|#include &lt;linux/coda_linux.h&gt;
macro_line|#include &lt;linux/coda_psdev.h&gt;
macro_line|#include &lt;linux/coda_cnode.h&gt;
macro_line|#include &lt;linux/coda_namecache.h&gt;
multiline_comment|/* initialize the debugging variables */
DECL|variable|coda_debug
r_int
id|coda_debug
op_assign
l_int|815
suffix:semicolon
DECL|variable|coda_print_entry
r_int
id|coda_print_entry
op_assign
l_int|1
suffix:semicolon
DECL|variable|coda_access_cache
r_int
id|coda_access_cache
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* caller must allocate 36 byte string ! */
DECL|function|coda_f2s
r_char
op_star
id|coda_f2s
c_func
(paren
id|ViceFid
op_star
id|f
comma
r_char
op_star
id|s
)paren
(brace
r_if
c_cond
(paren
id|f
)paren
(brace
id|sprintf
c_func
(paren
id|s
comma
l_string|&quot;(%-#10lx,%-#10lx,%-#10lx)&quot;
comma
id|f-&gt;Volume
comma
id|f-&gt;Vnode
comma
id|f-&gt;Unique
)paren
suffix:semicolon
)brace
r_return
id|s
suffix:semicolon
)brace
DECL|function|coda_isroot
r_int
id|coda_isroot
c_func
(paren
r_struct
id|inode
op_star
id|i
)paren
(brace
r_if
c_cond
(paren
id|i-&gt;i_sb-&gt;s_root-&gt;d_inode
op_eq
id|i
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|coda_load_creds
r_void
id|coda_load_creds
c_func
(paren
r_struct
id|CodaCred
op_star
id|cred
)paren
(brace
r_int
id|i
suffix:semicolon
id|cred-&gt;cr_uid
op_assign
(paren
id|vuid_t
)paren
id|current-&gt;uid
suffix:semicolon
id|cred-&gt;cr_euid
op_assign
(paren
id|vuid_t
)paren
id|current-&gt;euid
suffix:semicolon
id|cred-&gt;cr_suid
op_assign
(paren
id|vuid_t
)paren
id|current-&gt;suid
suffix:semicolon
id|cred-&gt;cr_fsuid
op_assign
(paren
id|vuid_t
)paren
id|current-&gt;fsuid
suffix:semicolon
id|cred-&gt;cr_gid
op_assign
(paren
id|vgid_t
)paren
id|current-&gt;gid
suffix:semicolon
id|cred-&gt;cr_egid
op_assign
(paren
id|vgid_t
)paren
id|current-&gt;egid
suffix:semicolon
id|cred-&gt;cr_sgid
op_assign
(paren
id|vgid_t
)paren
id|current-&gt;sgid
suffix:semicolon
id|cred-&gt;cr_fsgid
op_assign
(paren
id|vgid_t
)paren
id|current-&gt;fsgid
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|NGROUPS
suffix:semicolon
op_increment
id|i
)paren
(brace
id|cred-&gt;cr_groups
(braket
id|i
)braket
op_assign
(paren
id|vgid_t
)paren
id|current-&gt;groups
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
eof
