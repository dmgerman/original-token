multiline_comment|/*&n; * Symlink inode operations for Coda filesystem&n; * Original version: (C) 1996 P. Braam and M. Callahan&n; * Rewritten for Linux 2.1. (C) 1997 Carnegie Mellon University&n; * &n; * Carnegie Mellon encourages users to contribute improvements to&n; * the Coda project. Contact Peter Braam (coda@cs.cmu.edu).&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/stat.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/locks.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/coda.h&gt;
macro_line|#include &lt;linux/coda_linux.h&gt;
macro_line|#include &lt;linux/coda_psdev.h&gt;
macro_line|#include &lt;linux/coda_fs_i.h&gt;
macro_line|#include &lt;linux/coda_proc.h&gt;
DECL|function|coda_symlink_filler
r_static
r_int
id|coda_symlink_filler
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_struct
id|page
op_star
id|page
)paren
(brace
r_struct
id|inode
op_star
id|inode
op_assign
id|page-&gt;mapping-&gt;host
suffix:semicolon
r_int
id|error
suffix:semicolon
r_struct
id|coda_inode_info
op_star
id|cnp
suffix:semicolon
r_int
r_int
id|len
op_assign
id|PAGE_SIZE
suffix:semicolon
r_char
op_star
id|p
op_assign
id|kmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|cnp
op_assign
id|ITOC
c_func
(paren
id|inode
)paren
suffix:semicolon
id|coda_vfs_stat.follow_link
op_increment
suffix:semicolon
id|error
op_assign
id|venus_readlink
c_func
(paren
id|inode-&gt;i_sb
comma
op_amp
(paren
id|cnp-&gt;c_fid
)paren
comma
id|p
comma
op_amp
id|len
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|fail
suffix:semicolon
id|SetPageUptodate
c_func
(paren
id|page
)paren
suffix:semicolon
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|UnlockPage
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|fail
suffix:colon
id|SetPageError
c_func
(paren
id|page
)paren
suffix:semicolon
id|kunmap
c_func
(paren
id|page
)paren
suffix:semicolon
id|UnlockPage
c_func
(paren
id|page
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
DECL|variable|coda_symlink_aops
r_struct
id|address_space_operations
id|coda_symlink_aops
op_assign
(brace
id|readpage
suffix:colon
id|coda_symlink_filler
)brace
suffix:semicolon
eof
