multiline_comment|/*&n; *  dialog - Display simple dialog boxes from shell scripts&n; *&n; *  ORIGINAL AUTHOR: Savio Lam (lam836@cs.cuhk.hk)&n; *  MODIFIED FOR LINUX KERNEL CONFIG BY: William Roadcap (roadcap@cfw.com)&n; *&n; *  This program is free software; you can redistribute it and/or&n; *  modify it under the terms of the GNU General Public License&n; *  as published by the Free Software Foundation; either version 2&n; *  of the License, or (at your option) any later version.&n; *&n; *  This program is distributed in the hope that it will be useful,&n; *  but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *  GNU General Public License for more details.&n; *&n; *  You should have received a copy of the GNU General Public License&n; *  along with this program; if not, write to the Free Software&n; *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n; */
macro_line|#include &quot;dialog.h&quot;
r_static
r_void
id|Usage
(paren
r_const
r_char
op_star
id|name
)paren
suffix:semicolon
DECL|typedef|jumperFn
r_typedef
r_int
(paren
id|jumperFn
)paren
(paren
r_const
r_char
op_star
id|title
comma
r_int
id|argc
comma
r_const
r_char
op_star
r_const
op_star
id|argv
)paren
suffix:semicolon
DECL|struct|Mode
r_struct
id|Mode
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|argmin
DECL|member|argmax
DECL|member|argmod
r_int
id|argmin
comma
id|argmax
comma
id|argmod
suffix:semicolon
DECL|member|jumper
id|jumperFn
op_star
id|jumper
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|j_menu
DECL|variable|j_checklist
DECL|variable|j_radiolist
DECL|variable|j_yesno
DECL|variable|j_textbox
DECL|variable|j_inputbox
id|jumperFn
id|j_menu
comma
id|j_checklist
comma
id|j_radiolist
comma
id|j_yesno
comma
id|j_textbox
comma
id|j_inputbox
suffix:semicolon
DECL|variable|j_msgbox
DECL|variable|j_infobox
id|jumperFn
id|j_msgbox
comma
id|j_infobox
suffix:semicolon
DECL|variable|modes
r_static
r_struct
id|Mode
id|modes
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;--menu&quot;
comma
l_int|9
comma
l_int|0
comma
l_int|3
comma
id|j_menu
)brace
comma
(brace
l_string|&quot;--checklist&quot;
comma
l_int|9
comma
l_int|0
comma
l_int|3
comma
id|j_checklist
)brace
comma
(brace
l_string|&quot;--radiolist&quot;
comma
l_int|9
comma
l_int|0
comma
l_int|3
comma
id|j_radiolist
)brace
comma
(brace
l_string|&quot;--yesno&quot;
comma
l_int|5
comma
l_int|5
comma
l_int|1
comma
id|j_yesno
)brace
comma
(brace
l_string|&quot;--textbox&quot;
comma
l_int|5
comma
l_int|5
comma
l_int|1
comma
id|j_textbox
)brace
comma
(brace
l_string|&quot;--inputbox&quot;
comma
l_int|5
comma
l_int|6
comma
l_int|1
comma
id|j_inputbox
)brace
comma
(brace
l_string|&quot;--msgbox&quot;
comma
l_int|5
comma
l_int|5
comma
l_int|1
comma
id|j_msgbox
)brace
comma
(brace
l_string|&quot;--infobox&quot;
comma
l_int|5
comma
l_int|5
comma
l_int|1
comma
id|j_infobox
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|modePtr
r_static
r_struct
id|Mode
op_star
id|modePtr
suffix:semicolon
macro_line|#ifdef LOCALE
macro_line|#include &lt;locale.h&gt;
macro_line|#endif
r_int
DECL|function|main
id|main
(paren
r_int
id|argc
comma
r_const
r_char
op_star
r_const
op_star
id|argv
)paren
(brace
r_int
id|offset
op_assign
l_int|0
comma
id|clear_screen
op_assign
l_int|0
comma
id|end_common_opts
op_assign
l_int|0
comma
id|retval
suffix:semicolon
r_const
r_char
op_star
id|title
op_assign
l_int|NULL
suffix:semicolon
macro_line|#ifdef LOCALE
(paren
r_void
)paren
id|setlocale
(paren
id|LC_ALL
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef TRACE
id|trace
c_func
(paren
id|TRACE_CALLS
op_or
id|TRACE_UPDATE
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|argc
OL
l_int|2
)paren
(brace
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|offset
OL
id|argc
op_minus
l_int|1
op_logical_and
op_logical_neg
id|end_common_opts
)paren
(brace
multiline_comment|/* Common options */
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|argv
(braket
id|offset
op_plus
l_int|1
)braket
comma
l_string|&quot;--title&quot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|argc
op_minus
id|offset
OL
l_int|3
op_logical_or
id|title
op_ne
l_int|NULL
)paren
(brace
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
id|title
op_assign
id|argv
(braket
id|offset
op_plus
l_int|2
)braket
suffix:semicolon
id|offset
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|argv
(braket
id|offset
op_plus
l_int|1
)braket
comma
l_string|&quot;--backtitle&quot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|backtitle
op_ne
l_int|NULL
)paren
(brace
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
id|backtitle
op_assign
id|argv
(braket
id|offset
op_plus
l_int|2
)braket
suffix:semicolon
id|offset
op_add_assign
l_int|2
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|argv
(braket
id|offset
op_plus
l_int|1
)braket
comma
l_string|&quot;--clear&quot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|clear_screen
)paren
(brace
multiline_comment|/* Hey, &quot;--clear&quot; can&squot;t appear twice! */
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|argc
op_eq
l_int|2
)paren
(brace
multiline_comment|/* we only want to clear the screen */
id|init_dialog
(paren
)paren
suffix:semicolon
id|refresh
(paren
)paren
suffix:semicolon
multiline_comment|/* init_dialog() will clear the screen for us */
id|end_dialog
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|clear_screen
op_assign
l_int|1
suffix:semicolon
id|offset
op_increment
suffix:semicolon
)brace
)brace
r_else
multiline_comment|/* no more common options */
id|end_common_opts
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
op_minus
l_int|1
op_eq
id|offset
)paren
(brace
multiline_comment|/* no more options */
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/* use a table to look for the requested mode, to avoid code duplication */
r_for
c_loop
(paren
id|modePtr
op_assign
id|modes
suffix:semicolon
id|modePtr-&gt;name
suffix:semicolon
id|modePtr
op_increment
)paren
multiline_comment|/* look for the mode */
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|argv
(braket
id|offset
op_plus
l_int|1
)braket
comma
id|modePtr-&gt;name
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|modePtr-&gt;name
)paren
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|argc
op_minus
id|offset
OL
id|modePtr-&gt;argmin
)paren
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|modePtr-&gt;argmax
op_logical_and
id|argc
op_minus
id|offset
OG
id|modePtr-&gt;argmax
)paren
id|Usage
(paren
id|argv
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|init_dialog
(paren
)paren
suffix:semicolon
id|retval
op_assign
(paren
op_star
(paren
id|modePtr-&gt;jumper
)paren
)paren
(paren
id|title
comma
id|argc
op_minus
id|offset
comma
id|argv
op_plus
id|offset
)paren
suffix:semicolon
r_if
c_cond
(paren
id|clear_screen
)paren
(brace
multiline_comment|/* clear screen before exit */
id|attr_clear
(paren
id|stdscr
comma
id|LINES
comma
id|COLS
comma
id|screen_attr
)paren
suffix:semicolon
id|refresh
(paren
)paren
suffix:semicolon
)brace
id|end_dialog
c_func
(paren
)paren
suffix:semicolon
m_exit
(paren
id|retval
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Print program usage&n; */
r_static
r_void
DECL|function|Usage
id|Usage
(paren
r_const
r_char
op_star
id|name
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;&n;&bslash;ndialog, by Savio Lam (lam836@cs.cuhk.hk).&bslash;&n;&bslash;n  patched by Stuart Herbert (S.Herbert@shef.ac.uk)&bslash;&n;&bslash;n  modified/gutted for use as a Linux kernel config tool by &bslash;&n;&bslash;n  William Roadcap (roadcapw@cfw.com)&bslash;&n;&bslash;n&bslash;&n;&bslash;n* Display dialog boxes from shell scripts *&bslash;&n;&bslash;n&bslash;&n;&bslash;nUsage: %s --clear&bslash;&n;&bslash;n       %s [--title &lt;title&gt;] [--backtitle &lt;backtitle&gt;] --clear &lt;Box options&gt;&bslash;&n;&bslash;n&bslash;&n;&bslash;nBox options:&bslash;&n;&bslash;n&bslash;&n;&bslash;n  --menu      &lt;text&gt; &lt;height&gt; &lt;width&gt; &lt;menu height&gt; &lt;tag1&gt; &lt;item1&gt;...&bslash;&n;&bslash;n  --checklist &lt;text&gt; &lt;height&gt; &lt;width&gt; &lt;list height&gt; &lt;tag1&gt; &lt;item1&gt; &lt;status1&gt;...&bslash;&n;&bslash;n  --radiolist &lt;text&gt; &lt;height&gt; &lt;width&gt; &lt;list height&gt; &lt;tag1&gt; &lt;item1&gt; &lt;status1&gt;...&bslash;&n;&bslash;n  --textbox   &lt;file&gt; &lt;height&gt; &lt;width&gt;&bslash;&n;&bslash;n  --inputbox  &lt;text&gt; &lt;height&gt; &lt;width&gt; [&lt;init&gt;]&bslash;&n;&bslash;n  --yesno     &lt;text&gt; &lt;height&gt; &lt;width&gt;&bslash;&n;&bslash;n&quot;
comma
id|name
comma
id|name
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * These are the program jumpers&n; */
r_int
DECL|function|j_menu
id|j_menu
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_menu
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|5
)braket
)paren
comma
id|av
(braket
l_int|6
)braket
comma
(paren
id|ac
op_minus
l_int|6
)paren
op_div
l_int|2
comma
id|av
op_plus
l_int|7
)paren
suffix:semicolon
)brace
r_int
DECL|function|j_checklist
id|j_checklist
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_checklist
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|5
)braket
)paren
comma
(paren
id|ac
op_minus
l_int|6
)paren
op_div
l_int|3
comma
id|av
op_plus
l_int|6
comma
id|FLAG_CHECK
)paren
suffix:semicolon
)brace
r_int
DECL|function|j_radiolist
id|j_radiolist
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_checklist
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|5
)braket
)paren
comma
(paren
id|ac
op_minus
l_int|6
)paren
op_div
l_int|3
comma
id|av
op_plus
l_int|6
comma
id|FLAG_RADIO
)paren
suffix:semicolon
)brace
r_int
DECL|function|j_textbox
id|j_textbox
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_textbox
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
)brace
r_int
DECL|function|j_yesno
id|j_yesno
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_yesno
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
)brace
r_int
DECL|function|j_inputbox
id|j_inputbox
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_int
id|ret
op_assign
id|dialog_inputbox
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
comma
id|ac
op_eq
l_int|6
ques
c_cond
id|av
(braket
l_int|5
)braket
suffix:colon
(paren
r_char
op_star
)paren
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
op_eq
l_int|0
)paren
id|fprintf
c_func
(paren
id|stderr
comma
id|dialog_input_result
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
r_int
DECL|function|j_msgbox
id|j_msgbox
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_msgbox
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
comma
l_int|1
)paren
suffix:semicolon
)brace
r_int
DECL|function|j_infobox
id|j_infobox
(paren
r_const
r_char
op_star
id|t
comma
r_int
id|ac
comma
r_const
r_char
op_star
r_const
op_star
id|av
)paren
(brace
r_return
id|dialog_msgbox
(paren
id|t
comma
id|av
(braket
l_int|2
)braket
comma
id|atoi
(paren
id|av
(braket
l_int|3
)braket
)paren
comma
id|atoi
(paren
id|av
(braket
l_int|4
)braket
)paren
comma
l_int|0
)paren
suffix:semicolon
)brace
eof
