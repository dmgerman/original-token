multiline_comment|/*********************************************************************&n; *                &n; * Filename:      irproc.c&n; * Version:       1.0&n; * Description:   Various entries in the /proc file system&n; * Status:        Experimental.&n; * Author:        Thomas Davis, &lt;ratbert@radiks.net&gt;&n; * Created at:    Sat Feb 21 21:33:24 1998&n; * Modified at:   Tue Apr  6 19:07:06 1999&n; * Modified by:   Dag Brattli &lt;dagb@cs.uit.no&gt;&n; * &n; *     Copyright (c) 1998, Thomas Davis, &lt;ratbert@radiks.net&gt;, &n; *     All Rights Reserved.&n; *      &n; *     This program is free software; you can redistribute it and/or &n; *     modify it under the terms of the GNU General Public License as &n; *     published by the Free Software Foundation; either version 2 of &n; *     the License, or (at your option) any later version.&n; *  &n; *     I, Thomas Davis, provide no warranty for any of this software. &n; *     This material is provided &quot;AS-IS&quot; and at no charge. &n; *     &n; *     Portions lifted from the linux/fs/procfs/ files.&n; *&n; ********************************************************************/
macro_line|#include &lt;linux/miscdevice.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;net/irda/irda.h&gt;
macro_line|#include &lt;net/irda/irmod.h&gt;
macro_line|#include &lt;net/irda/irlap.h&gt;
macro_line|#include &lt;net/irda/irlmp.h&gt;
r_extern
r_int
id|irda_device_proc_read
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
id|unused
)paren
suffix:semicolon
r_extern
r_int
id|irlap_proc_read
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
id|unused
)paren
suffix:semicolon
r_extern
r_int
id|irlmp_proc_read
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
id|unused
)paren
suffix:semicolon
r_extern
r_int
id|irttp_proc_read
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
id|unused
)paren
suffix:semicolon
r_extern
r_int
id|irias_proc_read
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
id|unused
)paren
suffix:semicolon
r_extern
r_int
id|discovery_proc_read
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
id|unused
)paren
suffix:semicolon
DECL|enum|irda_directory_inos
r_enum
id|irda_directory_inos
(brace
DECL|enumerator|PROC_IRDA_LAP
id|PROC_IRDA_LAP
op_assign
l_int|1
comma
DECL|enumerator|PROC_IRDA_LMP
id|PROC_IRDA_LMP
comma
DECL|enumerator|PROC_IRDA_TTP
id|PROC_IRDA_TTP
comma
DECL|enumerator|PROC_IRDA_LPT
id|PROC_IRDA_LPT
comma
DECL|enumerator|PROC_IRDA_COMM
id|PROC_IRDA_COMM
comma
DECL|enumerator|PROC_IRDA_IRDA_DEVICE
id|PROC_IRDA_IRDA_DEVICE
comma
DECL|enumerator|PROC_IRDA_IRIAS
id|PROC_IRDA_IRIAS
)brace
suffix:semicolon
DECL|struct|irda_entry
r_struct
id|irda_entry
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|fn
r_int
(paren
op_star
id|fn
)paren
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|proc_irda
r_struct
id|proc_dir_entry
op_star
id|proc_irda
suffix:semicolon
DECL|variable|dir
r_static
id|irda_entry
id|dir
(braket
)braket
op_assign
(brace
macro_line|#if 0 
(brace
l_string|&quot;lpt&quot;
comma
id|irlpt_proc_read
)brace
comma
macro_line|#endif
(brace
l_string|&quot;discovery&quot;
comma
id|discovery_proc_read
)brace
comma
(brace
l_string|&quot;irda_device&quot;
comma
id|irda_device_proc_read
)brace
comma
(brace
l_string|&quot;irttp&quot;
comma
id|irttp_proc_read
)brace
comma
(brace
l_string|&quot;irlmp&quot;
comma
id|irlmp_proc_read
)brace
comma
(brace
l_string|&quot;irlap&quot;
comma
id|irlap_proc_read
)brace
comma
(brace
l_string|&quot;irias&quot;
comma
id|irias_proc_read
)brace
comma
)brace
suffix:semicolon
DECL|macro|IRDA_ENTRIES_NUM
mdefine_line|#define IRDA_ENTRIES_NUM (sizeof(dir)/sizeof(dir[0]))
multiline_comment|/*&n; * Function irda_proc_register (void)&n; *&n; *    Register irda entry in /proc file system&n; *&n; */
DECL|function|irda_proc_register
r_void
id|irda_proc_register
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
id|proc_irda
op_assign
id|proc_create_entry
c_func
(paren
l_string|&quot;net/irda&quot;
comma
id|S_IFDIR
comma
l_int|NULL
)paren
suffix:semicolon
macro_line|#ifdef MODULE
id|proc_irda-&gt;fill_inode
op_assign
op_amp
id|irda_proc_modcount
suffix:semicolon
macro_line|#endif /* MODULE */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|IRDA_ENTRIES_NUM
suffix:semicolon
id|i
op_increment
)paren
id|proc_create_entry
c_func
(paren
id|dir
(braket
id|i
)braket
dot
id|name
comma
l_int|0
comma
id|proc_irda
)paren
op_member_access_from_pointer
id|get_info
op_assign
id|dir
(braket
id|i
)braket
dot
id|fn
suffix:semicolon
)brace
multiline_comment|/*&n; * Function irda_proc_unregister (void)&n; *&n; *    Unregister irda entry in /proc file system&n; *&n; */
DECL|function|irda_proc_unregister
r_void
id|irda_proc_unregister
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|IRDA_ENTRIES_NUM
suffix:semicolon
id|i
op_increment
)paren
id|proc_remove_entry
c_func
(paren
id|dir
(braket
id|i
)braket
dot
id|name
comma
id|proc_irda
)paren
suffix:semicolon
id|proc_remove_entry
c_func
(paren
l_string|&quot;net/irda&quot;
comma
l_int|NULL
)paren
suffix:semicolon
)brace
eof
