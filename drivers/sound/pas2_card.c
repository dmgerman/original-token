DECL|macro|_PAS2_CARD_C_
mdefine_line|#define _PAS2_CARD_C_
multiline_comment|/*&n; * sound/pas2_card.c&n; *&n; * Detection routine for the Pro Audio Spectrum cards.&n; *&n; * Copyright by Hannu Savolainen 1993&n; *&n; * Redistribution and use in source and binary forms, with or without&n; * modification, are permitted provided that the following conditions are&n; * met: 1. Redistributions of source code must retain the above copyright&n; * notice, this list of conditions and the following disclaimer. 2.&n; * Redistributions in binary form must reproduce the above copyright notice,&n; * this list of conditions and the following disclaimer in the documentation&n; * and/or other materials provided with the distribution.&n; *&n; * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&squot;&squot; AND ANY&n; * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED&n; * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE&n; * DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR&n; * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL&n; * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR&n; * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER&n; * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT&n; * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY&n; * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF&n; * SUCH DAMAGE.&n; *&n; */
macro_line|#include &quot;sound_config.h&quot;
macro_line|#if defined(CONFIGURE_SOUNDCARD) &amp;&amp; !defined(EXCLUDE_PAS)
DECL|macro|DEFINE_TRANSLATIONS
mdefine_line|#define DEFINE_TRANSLATIONS
macro_line|#include &quot;pas.h&quot;
multiline_comment|/*&n; * The Address Translation code is used to convert I/O register addresses to&n; * be relative to the given base -register&n; */
DECL|variable|translat_code
r_int
id|translat_code
suffix:semicolon
DECL|variable|pas_intr_mask
r_static
r_int
id|pas_intr_mask
op_assign
l_int|0
suffix:semicolon
DECL|variable|pas_irq
r_static
r_int
id|pas_irq
op_assign
l_int|0
suffix:semicolon
DECL|variable|pas_model
r_char
id|pas_model
suffix:semicolon
DECL|variable|pas_model_names
r_static
r_char
op_star
id|pas_model_names
(braket
)braket
op_assign
(brace
l_string|&quot;&quot;
comma
l_string|&quot;Pro AudioSpectrum+&quot;
comma
l_string|&quot;CDPC&quot;
comma
l_string|&quot;Pro AudioSpectrum 16&quot;
comma
l_string|&quot;Pro AudioSpectrum 16D&quot;
)brace
suffix:semicolon
multiline_comment|/*&n; * pas_read() and pas_write() are equivalents of INB() and OUTB()&n; */
multiline_comment|/*&n; * These routines perform the I/O address translation required&n; */
multiline_comment|/*&n; * to support other than the default base address&n; */
r_extern
r_void
id|mix_write
(paren
r_int
r_char
id|data
comma
r_int
id|ioaddr
)paren
suffix:semicolon
r_int
r_char
DECL|function|pas_read
id|pas_read
(paren
r_int
id|ioaddr
)paren
(brace
r_return
id|INB
(paren
id|ioaddr
op_xor
id|translat_code
)paren
suffix:semicolon
)brace
r_void
DECL|function|pas_write
id|pas_write
(paren
r_int
r_char
id|data
comma
r_int
id|ioaddr
)paren
(brace
id|OUTB
(paren
id|data
comma
id|ioaddr
op_xor
id|translat_code
)paren
suffix:semicolon
)brace
r_void
DECL|function|pas2_msg
id|pas2_msg
(paren
r_char
op_star
id|foo
)paren
(brace
id|printk
(paren
l_string|&quot;    PAS2: %s.&bslash;n&quot;
comma
id|foo
)paren
suffix:semicolon
)brace
multiline_comment|/******************* Begin of the Interrupt Handler ********************/
r_void
DECL|function|INT_HANDLER_PARMS
id|pasintr
(paren
id|INT_HANDLER_PARMS
(paren
id|irq
comma
id|dummy
)paren
)paren
(brace
r_int
id|status
suffix:semicolon
id|status
op_assign
id|pas_read
(paren
id|INTERRUPT_STATUS
)paren
suffix:semicolon
id|pas_write
(paren
id|status
comma
id|INTERRUPT_STATUS
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;   * Clear interrupt&n;&t;&t;&t;&t;&t;&t; */
r_if
c_cond
(paren
id|status
op_amp
id|I_S_PCM_SAMPLE_BUFFER_IRQ
)paren
(brace
macro_line|#ifndef EXCLUDE_AUDIO
id|pas_pcm_interrupt
(paren
id|status
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
id|status
op_and_assign
op_complement
id|I_S_PCM_SAMPLE_BUFFER_IRQ
suffix:semicolon
)brace
r_if
c_cond
(paren
id|status
op_amp
id|I_S_MIDI_IRQ
)paren
(brace
macro_line|#ifndef EXCLUDE_MIDI
macro_line|#ifdef EXCLUDE_PRO_MIDI
id|pas_midi_interrupt
(paren
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
id|status
op_and_assign
op_complement
id|I_S_MIDI_IRQ
suffix:semicolon
)brace
)brace
r_int
DECL|function|pas_set_intr
id|pas_set_intr
(paren
r_int
id|mask
)paren
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|mask
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pas_intr_mask
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|snd_set_irq_handler
(paren
id|pas_irq
comma
id|pasintr
comma
l_string|&quot;PAS16&quot;
)paren
)paren
OL
l_int|0
)paren
r_return
id|err
suffix:semicolon
)brace
id|pas_intr_mask
op_or_assign
id|mask
suffix:semicolon
id|pas_write
(paren
id|pas_intr_mask
comma
id|INTERRUPT_MASK
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|pas_remove_intr
id|pas_remove_intr
(paren
r_int
id|mask
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|mask
)paren
r_return
l_int|0
suffix:semicolon
id|pas_intr_mask
op_and_assign
op_complement
id|mask
suffix:semicolon
id|pas_write
(paren
id|pas_intr_mask
comma
id|INTERRUPT_MASK
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pas_intr_mask
)paren
(brace
id|snd_release_irq
(paren
id|pas_irq
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/******************* End of the Interrupt handler **********************/
multiline_comment|/******************* Begin of the Initialization Code ******************/
r_int
DECL|function|config_pas_hw
id|config_pas_hw
(paren
r_struct
id|address_info
op_star
id|hw_config
)paren
(brace
r_char
id|ok
op_assign
l_int|1
suffix:semicolon
r_int
id|int_ptrs
suffix:semicolon
multiline_comment|/* scsi/sound interrupt pointers */
id|pas_irq
op_assign
id|hw_config-&gt;irq
suffix:semicolon
id|pas_write
(paren
l_int|0x00
comma
id|INTERRUPT_MASK
)paren
suffix:semicolon
id|pas_write
(paren
l_int|0x36
comma
id|SAMPLE_COUNTER_CONTROL
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t; * Local timer control *&n;&t;&t;&t;&t;&t;&t; * register&n;&t;&t;&t;&t;&t;&t; */
id|pas_write
(paren
l_int|0x36
comma
id|SAMPLE_RATE_TIMER
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t; * Sample rate timer (16 bit)&n;&t;&t;&t;&t;&t; */
id|pas_write
(paren
l_int|0
comma
id|SAMPLE_RATE_TIMER
)paren
suffix:semicolon
id|pas_write
(paren
l_int|0x74
comma
id|SAMPLE_COUNTER_CONTROL
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t; * Local timer control *&n;&t;&t;&t;&t;&t;&t; * register&n;&t;&t;&t;&t;&t;&t; */
id|pas_write
(paren
l_int|0x74
comma
id|SAMPLE_BUFFER_COUNTER
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t; * Sample count register (16&n;&t;&t;&t;&t;&t;&t; * * bit)&n;&t;&t;&t;&t;&t;&t; */
id|pas_write
(paren
l_int|0
comma
id|SAMPLE_BUFFER_COUNTER
)paren
suffix:semicolon
id|pas_write
(paren
id|F_F_PCM_BUFFER_COUNTER
op_or
id|F_F_PCM_RATE_COUNTER
op_or
id|F_F_MIXER_UNMUTE
op_or
l_int|1
comma
id|FILTER_FREQUENCY
)paren
suffix:semicolon
id|pas_write
(paren
id|P_C_PCM_DMA_ENABLE
op_or
id|P_C_PCM_MONO
op_or
id|P_C_PCM_DAC_MODE
op_or
id|P_C_MIXER_CROSS_L_TO_L
op_or
id|P_C_MIXER_CROSS_R_TO_R
comma
id|PCM_CONTROL
)paren
suffix:semicolon
id|pas_write
(paren
id|S_M_PCM_RESET
op_or
id|S_M_FM_RESET
op_or
id|S_M_SB_RESET
op_or
id|S_M_MIXER_RESET
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t;&t;&t;&t; * |&n;&t;&t;&t;&t;&t;&t;&t;&t;&t;&t; * S_M_OPL3_DUAL_MONO&n;&t;&t;&t;&t;&t;&t;&t;&t;&t;&t; */
comma
id|SERIAL_MIXER
)paren
suffix:semicolon
id|pas_write
(paren
id|I_C_1_BOOT_RESET_ENABLE
macro_line|#ifdef PAS_JOYSTICK_ENABLE
op_or
id|I_C_1_JOYSTICK_ENABLE
macro_line|#endif
comma
id|IO_CONFIGURATION_1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pas_irq
template_param
l_int|15
)paren
(brace
id|printk
(paren
l_string|&quot;PAS2: Invalid IRQ %d&quot;
comma
id|pas_irq
)paren
suffix:semicolon
id|ok
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|int_ptrs
op_assign
id|pas_read
(paren
id|IO_CONFIGURATION_3
)paren
suffix:semicolon
id|int_ptrs
op_or_assign
id|I_C_3_PCM_IRQ_translate
(braket
id|pas_irq
)braket
op_amp
l_int|0xf
suffix:semicolon
id|pas_write
(paren
id|int_ptrs
comma
id|IO_CONFIGURATION_3
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|I_C_3_PCM_IRQ_translate
(braket
id|pas_irq
)braket
)paren
(brace
id|printk
(paren
l_string|&quot;PAS2: Invalid IRQ %d&quot;
comma
id|pas_irq
)paren
suffix:semicolon
id|ok
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|hw_config-&gt;dma
template_param
l_int|7
)paren
(brace
id|printk
(paren
l_string|&quot;PAS2: Invalid DMA selection %d&quot;
comma
id|hw_config-&gt;dma
)paren
suffix:semicolon
id|ok
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|pas_write
(paren
id|I_C_2_PCM_DMA_translate
(braket
id|hw_config-&gt;dma
)braket
comma
id|IO_CONFIGURATION_2
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|I_C_2_PCM_DMA_translate
(braket
id|hw_config-&gt;dma
)braket
)paren
(brace
id|printk
(paren
l_string|&quot;PAS2: Invalid DMA selection %d&quot;
comma
id|hw_config-&gt;dma
)paren
suffix:semicolon
id|ok
op_assign
l_int|0
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;     * This fixes the timing problems of the PAS due to the Symphony chipset&n;     * as per Media Vision.  Only define this if your PAS doesn&squot;t work correctly.&n;   */
macro_line|#ifdef SYMPHONY_PAS
id|OUTB
(paren
l_int|0x05
comma
l_int|0xa8
)paren
suffix:semicolon
id|OUTB
(paren
l_int|0x60
comma
l_int|0xa9
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef BROKEN_BUS_CLOCK
id|pas_write
(paren
id|S_C_1_PCS_ENABLE
op_or
id|S_C_1_PCS_STEREO
op_or
id|S_C_1_PCS_REALSOUND
op_or
id|S_C_1_FM_EMULATE_CLOCK
comma
id|SYSTEM_CONFIGURATION_1
)paren
suffix:semicolon
macro_line|#else
multiline_comment|/*&n;   * pas_write(S_C_1_PCS_ENABLE, SYSTEM_CONFIGURATION_1);&n;   */
id|pas_write
(paren
id|S_C_1_PCS_ENABLE
op_or
id|S_C_1_PCS_STEREO
op_or
id|S_C_1_PCS_REALSOUND
comma
id|SYSTEM_CONFIGURATION_1
)paren
suffix:semicolon
macro_line|#endif
id|pas_write
(paren
l_int|0x18
comma
id|SYSTEM_CONFIGURATION_3
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t; * ???&n;&t;&t;&t;&t;&t;&t; */
id|pas_write
(paren
id|F_F_MIXER_UNMUTE
op_or
l_int|0x01
comma
id|FILTER_FREQUENCY
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t;&t; * Sets mute&n;&t;&t;&t;&t;&t;&t;&t;&t; * off and *&n;&t;&t;&t;&t;&t;&t;&t;&t; * selects&n;&t;&t;&t;&t;&t;&t;&t;&t; * filter&n;&t;&t;&t;&t;&t;&t;&t;&t; * rate * of&n;&t;&t;&t;&t;&t;&t;&t;&t; * 17.897 kHz&n;&t;&t;&t;&t;&t;&t;&t;&t; */
macro_line|#if 1
id|pas_write
(paren
l_int|8
comma
id|PRESCALE_DIVIDER
)paren
suffix:semicolon
macro_line|#else
r_if
c_cond
(paren
id|pas_model
op_eq
id|PAS_16
op_logical_or
id|pas_model
op_eq
id|PAS_16D
)paren
id|pas_write
(paren
l_int|8
comma
id|PRESCALE_DIVIDER
)paren
suffix:semicolon
r_else
id|pas_write
(paren
l_int|0
comma
id|PRESCALE_DIVIDER
)paren
suffix:semicolon
macro_line|#endif
id|mix_write
(paren
id|P_M_MV508_ADDRESS
op_or
l_int|5
comma
id|PARALLEL_MIXER
)paren
suffix:semicolon
id|mix_write
(paren
l_int|5
comma
id|PARALLEL_MIXER
)paren
suffix:semicolon
macro_line|#if !defined(EXCLUDE_SB_EMULATION) || !defined(EXCLUDE_SB)
(brace
r_struct
id|address_info
op_star
id|sb_config
suffix:semicolon
r_if
c_cond
(paren
(paren
id|sb_config
op_assign
id|sound_getconf
(paren
id|SNDCARD_SB
)paren
)paren
)paren
(brace
r_int
r_char
id|irq_dma
suffix:semicolon
multiline_comment|/*&n;&t; * Turn on Sound Blaster compatibility&n;&t; */
multiline_comment|/*&n;&t; * bit 1 = SB emulation&n;&t; */
multiline_comment|/*&n;&t; * bit 0 = MPU401 emulation (CDPC only :-( )&n;&t; */
id|pas_write
(paren
l_int|0x02
comma
id|COMPATIBILITY_ENABLE
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * &quot;Emulation address&quot;&n;&t; */
id|pas_write
(paren
(paren
id|sb_config-&gt;io_base
op_rshift
l_int|4
)paren
op_amp
l_int|0x0f
comma
id|EMULATION_ADDRESS
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|E_C_SB_DMA_translate
(braket
id|sb_config-&gt;dma
)braket
)paren
id|printk
(paren
l_string|&quot;&bslash;n&bslash;nPAS16 Warning: Invalid SB DMA %d&bslash;n&bslash;n&quot;
comma
id|sb_config-&gt;dma
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|E_C_SB_IRQ_translate
(braket
id|sb_config-&gt;irq
)braket
)paren
id|printk
(paren
l_string|&quot;&bslash;n&bslash;nPAS16 Warning: Invalid SB IRQ %d&bslash;n&bslash;n&quot;
comma
id|sb_config-&gt;irq
)paren
suffix:semicolon
id|irq_dma
op_assign
id|E_C_SB_DMA_translate
(braket
id|sb_config-&gt;dma
)braket
op_or
id|E_C_SB_IRQ_translate
(braket
id|sb_config-&gt;irq
)braket
suffix:semicolon
id|pas_write
(paren
id|irq_dma
comma
id|EMULATION_CONFIGURATION
)paren
suffix:semicolon
)brace
)brace
macro_line|#else
id|pas_write
(paren
l_int|0x00
comma
id|COMPATIBILITY_ENABLE
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|ok
)paren
id|pas2_msg
(paren
l_string|&quot;Driver not enabled&quot;
)paren
suffix:semicolon
r_return
id|ok
suffix:semicolon
)brace
r_int
DECL|function|detect_pas_hw
id|detect_pas_hw
(paren
r_struct
id|address_info
op_star
id|hw_config
)paren
(brace
r_int
r_char
id|board_id
comma
id|foo
suffix:semicolon
multiline_comment|/*&n;   * WARNING: Setting an option like W:1 or so that disables warm boot reset&n;   * of the card will screw up this detect code something fierce. Adding code&n;   * to handle this means possibly interfering with other cards on the bus if&n;   * you have something on base port 0x388. SO be forewarned.&n;   */
id|OUTB
(paren
l_int|0xBC
comma
id|MASTER_DECODE
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t; * Talk to first board&n;&t;&t;&t;&t; */
id|OUTB
(paren
id|hw_config-&gt;io_base
op_rshift
l_int|2
comma
id|MASTER_DECODE
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; * Set base address&n;&t;&t;&t;&t;&t;&t;&t; */
id|translat_code
op_assign
id|PAS_DEFAULT_BASE
op_xor
id|hw_config-&gt;io_base
suffix:semicolon
id|pas_write
(paren
l_int|1
comma
id|WAIT_STATE
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t; * One wait-state&n;&t;&t;&t;&t; */
id|board_id
op_assign
id|pas_read
(paren
id|INTERRUPT_MASK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|board_id
op_eq
l_int|0xff
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/*&n;   * We probably have a PAS-series board, now check for a PAS2-series board&n;   * by trying to change the board revision bits. PAS2-series hardware won&squot;t&n;   * let you do this - the bits are read-only.&n;   */
id|foo
op_assign
id|board_id
op_xor
l_int|0xe0
suffix:semicolon
id|pas_write
(paren
id|foo
comma
id|INTERRUPT_MASK
)paren
suffix:semicolon
id|foo
op_assign
id|INB
(paren
id|INTERRUPT_MASK
)paren
suffix:semicolon
id|pas_write
(paren
id|board_id
comma
id|INTERRUPT_MASK
)paren
suffix:semicolon
r_if
c_cond
(paren
id|board_id
op_ne
id|foo
)paren
multiline_comment|/*&n;&t;&t;&t;&t; * Not a PAS2&n;&t;&t;&t;&t; */
r_return
l_int|0
suffix:semicolon
id|pas_model
op_assign
id|pas_read
(paren
id|CHIP_REV
)paren
suffix:semicolon
r_return
id|pas_model
suffix:semicolon
)brace
r_int
DECL|function|attach_pas_card
id|attach_pas_card
(paren
r_int
id|mem_start
comma
r_struct
id|address_info
op_star
id|hw_config
)paren
(brace
id|pas_irq
op_assign
id|hw_config-&gt;irq
suffix:semicolon
r_if
c_cond
(paren
id|detect_pas_hw
(paren
id|hw_config
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|pas_model
op_assign
id|pas_read
(paren
id|CHIP_REV
)paren
)paren
)paren
(brace
id|printk
(paren
l_string|&quot; &lt;%s rev %d&gt;&quot;
comma
id|pas_model_names
(braket
(paren
r_int
)paren
id|pas_model
)braket
comma
id|pas_read
(paren
id|BOARD_REV_ID
)paren
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|config_pas_hw
(paren
id|hw_config
)paren
)paren
(brace
macro_line|#ifndef EXCLUDE_AUDIO
id|mem_start
op_assign
id|pas_pcm_init
(paren
id|mem_start
comma
id|hw_config
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if !defined(EXCLUDE_SB_EMULATION) &amp;&amp; !defined(EXCLUDE_SB)
id|sb_dsp_disable_midi
(paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t; * The SB emulation don&squot;t support *&n;&t;&t;&t;&t;&t; * midi&n;&t;&t;&t;&t;&t; */
macro_line|#endif
macro_line|#ifndef EXCLUDE_YM3812
id|enable_opl3_mode
(paren
l_int|0x388
comma
l_int|0x38a
comma
l_int|0
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifndef EXCLUDE_MIDI
macro_line|#ifdef EXCLUDE_PRO_MIDI
id|mem_start
op_assign
id|pas_midi_init
(paren
id|mem_start
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
id|pas_init_mixer
(paren
)paren
suffix:semicolon
)brace
)brace
r_return
id|mem_start
suffix:semicolon
)brace
r_int
DECL|function|probe_pas
id|probe_pas
(paren
r_struct
id|address_info
op_star
id|hw_config
)paren
(brace
r_return
id|detect_pas_hw
(paren
id|hw_config
)paren
suffix:semicolon
)brace
macro_line|#endif
eof
