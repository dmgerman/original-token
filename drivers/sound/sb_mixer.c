multiline_comment|/*&n; * sound/sb_mixer.c&n; *&n; * The low level mixer driver for the Sound Blaster compatible cards.&n; */
multiline_comment|/*&n; * Copyright (C) by Hannu Savolainen 1993-1997&n; *&n; * OSS/Free for Linux is distributed under the GNU GENERAL PUBLIC LICENSE (GPL)&n; * Version 2 (June 1991). See the &quot;COPYING&quot; file distributed with this software&n; * for more info.&n; *&n; *&n; * Thomas Sailer&t;&t;: ioctl code reworked (vmalloc/vfree removed)&n; * Rolf Fokkens (Dec 20 1998)&t;: ES188x recording level support on a per&n; *&t;&t;&t;&t;  input basis.&n; *              (Dec 24 1998)&t;: Recognition of ES1788, ES1887, ES1888,&n; *&t;&t;&t;&t;  ES1868, ES1869 and ES1878. Could be used for&n; *&t;&t;&t;&t;  specific handling in the future. All except&n; *&t;&t;&t;&t;  ES1887 and ES1888 and ES688 are handled like&n; *&t;&t;&t;&t;  ES1688.&n; *              (Dec 27 1998)&t;: RECLEV for all (?) ES1688+ chips. ES188x now&n; *&t;&t;&t;&t;  have the &quot;Dec 20&quot; support + RECLEV&n; */
multiline_comment|/*&n; * About the documentation&n; *&n; * I don&squot;t know if the chips all are OK, but the documentation is buggy. &squot;cause&n; * I don&squot;t have all the cips myself, there&squot;s a lot I cannot verify. I&squot;ll try to&n; * keep track of my latest insights about his here. If you have additional info,&n; * please enlighten me (fokkensr@vertis.nl)!&n; *&n; * I had the impression that ES1688 also has 6 bit master volume control. The&n; * documentation about ES1888 (rev C, october &squot;95) claims that ES1888 has&n; * the following features ES1688 doesn&squot;t have:&n; * - 6 bit master volume&n; * - Full Duplex&n; * So ES1688 apparently doesn&squot;t have 6 bit master volume control, but the&n; * ES1688 does have RECLEV control. Makes me wonder: does ES688 have it too?&n; * Without RECLEV ES688 won&squot;t be much fun I guess.&n; *&n; * From the ES1888 (rev C, october &squot;95) documentation I got the impression&n; * that registers 0x68 to 0x6e don&squot;t exist which means: no recording volume&n; * controls. To my surprise the ES888 documentation (1/14/96) claims that&n; * ES888 does have these record mixer registers, but that ES1888 doesn&squot;t have&n; * 0x69 and 0x6b. So the rest should be there.&n; * &n; */
multiline_comment|/*&n; * About recognition of ESS chips&n; *&n; * The distinction of ES688, ES1688, ES1788, ES1887 and ES1888 is described in&n; * a (preliminary ??) datasheet on ES1887. It&squot;s aim is to identify ES1887, but&n; * during detection the text claims that &quot;this chip may be ...&quot; when a step&n; * fails. This scheme is used to distinct between the above chips.&n; * It appears however that some PnP chips like ES1868 are recognized as ES1788&n; * by the ES1887 detection scheme. These PnP chips can be detected in another&n; * way however: ES1868, ES1869 and ES1878 can be recognized (full proof I think)&n; * by repeatedly reading mixer register 0x40. This is done by ess_identify in&n; * sb_common.c.&n; * This results in the following detection steps:&n; * - distinct between ES688 and ES1688+ (as always done in this driver)&n; *   if ES688 we&squot;re ready&n; * - try to detect ES1868, ES1869 or ES1878&n; *   if successful we&squot;re ready&n; * - try to detect ES1888, ES1887 or ES1788&n; *   if successful we&squot;re ready&n; * - Dunno. Must be 1688. Will do in general&n; *&n; * About RECLEV support:&n; *&n; * The existing ES1688 support didn&squot;t take care of the ES1688+ recording&n; * levels very well. Whenever a device was selected (recmask) for recording&n; * it&squot;s recording level was loud, and it couldn&squot;t be changed. The fact that&n; * internal register 0xb4 could take care of RECLEV, didn&squot;t work meaning until&n; * it&squot;s value was restored every time the chip was reset; this reset the&n; * value of 0xb4 too. I guess that&squot;s what 4front also had (have?) trouble with.&n; *&n; * About ES188x support:&n; *&n; * The ES188x has separate registers to control the recording levels, for all&n; * inputs. The ES188x specific software makes these levels the same as their&n; * corresponding playback levels, unless recmask says they aren&squot;t recorded. In&n; * the latter case the recording volumes are 0.&n; * Now recording levels of inputs can be controlled, by changing the playback&n; * levels. Futhermore several devices can be recorded together (which is not&n; * possible with the ES1688.&n; * Besides the separate recording level control for each input, the common&n; * recordig level can also be controlled by RECLEV as described above.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &quot;sound_config.h&quot;
macro_line|#ifdef CONFIG_SBDSP
DECL|macro|__SB_MIXER_C__
mdefine_line|#define __SB_MIXER_C__
macro_line|#include &quot;sb.h&quot;
macro_line|#include &quot;sb_mixer.h&quot;
DECL|macro|SBPRO_RECORDING_DEVICES
mdefine_line|#define SBPRO_RECORDING_DEVICES&t;(SOUND_MASK_LINE | SOUND_MASK_MIC | SOUND_MASK_CD)
multiline_comment|/* Same as SB Pro, unless I find otherwise */
DECL|macro|SGNXPRO_RECORDING_DEVICES
mdefine_line|#define SGNXPRO_RECORDING_DEVICES SBPRO_RECORDING_DEVICES
DECL|macro|SBPRO_MIXER_DEVICES
mdefine_line|#define SBPRO_MIXER_DEVICES&t;&t;(SOUND_MASK_SYNTH | SOUND_MASK_PCM | SOUND_MASK_LINE | SOUND_MASK_MIC | &bslash;&n;&t;&t;&t;&t;&t; SOUND_MASK_CD | SOUND_MASK_VOLUME)
multiline_comment|/* SG NX Pro has treble and bass settings on the mixer. The &squot;speaker&squot;&n; * channel is the COVOX/DisneySoundSource emulation volume control&n; * on the mixer. It does NOT control speaker volume. Should have own&n; * mask eventually?&n; */
DECL|macro|SGNXPRO_MIXER_DEVICES
mdefine_line|#define SGNXPRO_MIXER_DEVICES&t;(SBPRO_MIXER_DEVICES|SOUND_MASK_BASS| &bslash;&n;&t;&t;&t;&t; SOUND_MASK_TREBLE|SOUND_MASK_SPEAKER )
DECL|macro|SB16_RECORDING_DEVICES
mdefine_line|#define SB16_RECORDING_DEVICES&t;&t;(SOUND_MASK_SYNTH | SOUND_MASK_LINE | SOUND_MASK_MIC | &bslash;&n;&t;&t;&t;&t;&t; SOUND_MASK_CD)
DECL|macro|SB16_OUTFILTER_DEVICES
mdefine_line|#define SB16_OUTFILTER_DEVICES&t;&t;(SOUND_MASK_LINE | SOUND_MASK_MIC | &bslash;&n;&t;&t;&t;&t;&t; SOUND_MASK_CD)
DECL|macro|ES688_RECORDING_DEVICES
mdefine_line|#define ES688_RECORDING_DEVICES SBPRO_RECORDING_DEVICES
DECL|macro|ES688_MIXER_DEVICES
mdefine_line|#define ES688_MIXER_DEVICES (SBPRO_MIXER_DEVICES|SOUND_MASK_LINE2|SOUND_MASK_SPEAKER)
DECL|macro|ES1688_RECORDING_DEVICES
mdefine_line|#define ES1688_RECORDING_DEVICES ES688_RECORDING_DEVICES
DECL|macro|ES1688_MIXER_DEVICES
mdefine_line|#define ES1688_MIXER_DEVICES (ES688_MIXER_DEVICES|SOUND_MASK_RECLEV)
DECL|macro|ES188X_RECORDING_DEVICES
mdefine_line|#define ES188X_RECORDING_DEVICES&t;(ES1688_RECORDING_DEVICES | SOUND_MASK_LINE2 &bslash;&n;&t;&t;&t;&t;&t; |SOUND_MASK_SYNTH)
DECL|macro|ES188X_MIXER_DEVICES
mdefine_line|#define ES188X_MIXER_DEVICES (ES1688_MIXER_DEVICES)
DECL|macro|SB16_MIXER_DEVICES
mdefine_line|#define SB16_MIXER_DEVICES&t;&t;(SOUND_MASK_SYNTH | SOUND_MASK_PCM | SOUND_MASK_SPEAKER | SOUND_MASK_LINE | SOUND_MASK_MIC | &bslash;&n;&t;&t;&t;&t;&t; SOUND_MASK_CD | &bslash;&n;&t;&t;&t;&t;&t; SOUND_MASK_IGAIN | SOUND_MASK_OGAIN | &bslash;&n;&t;&t;&t;&t;&t; SOUND_MASK_VOLUME | SOUND_MASK_BASS | SOUND_MASK_TREBLE | &bslash;&n;&t;&t;&t;&t;&t;SOUND_MASK_IMIX)
multiline_comment|/* These are the only devices that are working at the moment.  Others could&n; * be added once they are identified and a method is found to control them.&n; */
DECL|macro|ALS007_MIXER_DEVICES
mdefine_line|#define ALS007_MIXER_DEVICES&t;(SOUND_MASK_SYNTH | SOUND_MASK_LINE | &bslash;&n;&t;&t;&t;&t; SOUND_MASK_PCM | SOUND_MASK_MIC | &bslash;&n;&t;&t;&t;&t; SOUND_MASK_CD | &bslash;&n;&t;&t;&t;&t; SOUND_MASK_VOLUME)
multiline_comment|/*&n; * Mixer registers of ES188x&n; *&n; * These registers specifically take care of recording levels. To make the&n; * mapping from playback devices to recording devices every recording&n; * devices = playback device + ES188X_MIXER_RECDIFF&n; */
DECL|macro|ES188X_MIXER_RECBASE
mdefine_line|#define ES188X_MIXER_RECBASE&t;(SOUND_MIXER_LINE3 + 1)
DECL|macro|ES188X_MIXER_RECDIFF
mdefine_line|#define ES188X_MIXER_RECDIFF&t;(ES188X_MIXER_RECBASE - SOUND_MIXER_SYNTH)
DECL|macro|ES188X_MIXER_RECSYNTH
mdefine_line|#define ES188X_MIXER_RECSYNTH&t;(SOUND_MIXER_SYNTH&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECPCM
mdefine_line|#define ES188X_MIXER_RECPCM&t;(SOUND_MIXER_PCM&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECSPEAKER
mdefine_line|#define ES188X_MIXER_RECSPEAKER&t;(SOUND_MIXER_SPEAKER&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECLINE
mdefine_line|#define ES188X_MIXER_RECLINE&t;(SOUND_MIXER_LINE&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECMIC
mdefine_line|#define ES188X_MIXER_RECMIC&t;(SOUND_MIXER_MIC&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECCD
mdefine_line|#define ES188X_MIXER_RECCD&t;(SOUND_MIXER_CD&t;&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECIMIX
mdefine_line|#define ES188X_MIXER_RECIMIX&t;(SOUND_MIXER_IMIX&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECALTPCM
mdefine_line|#define ES188X_MIXER_RECALTPCM&t;(SOUND_MIXER_ALTPCM&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECRECLEV
mdefine_line|#define ES188X_MIXER_RECRECLEV&t;(SOUND_MIXER_RECLEV&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECIGAIN
mdefine_line|#define ES188X_MIXER_RECIGAIN&t;(SOUND_MIXER_IGAIN&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECOGAIN
mdefine_line|#define ES188X_MIXER_RECOGAIN&t;(SOUND_MIXER_OGAIN&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECLINE1
mdefine_line|#define ES188X_MIXER_RECLINE1&t;(SOUND_MIXER_LINE1&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECLINE2
mdefine_line|#define ES188X_MIXER_RECLINE2&t;(SOUND_MIXER_LINE2&t;+ ES188X_MIXER_RECDIFF)
DECL|macro|ES188X_MIXER_RECLINE3
mdefine_line|#define ES188X_MIXER_RECLINE3&t;(SOUND_MIXER_LINE3&t;+ ES188X_MIXER_RECDIFF)
DECL|variable|sbpro_mix
r_static
id|mixer_tab
id|sbpro_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x22
comma
l_int|7
comma
l_int|4
comma
l_int|0x22
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x26
comma
l_int|7
comma
l_int|4
comma
l_int|0x26
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x04
comma
l_int|7
comma
l_int|4
comma
l_int|0x04
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x2e
comma
l_int|7
comma
l_int|4
comma
l_int|0x2e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x0a
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x28
comma
l_int|7
comma
l_int|4
comma
l_int|0x28
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|es688_mix
r_static
id|mixer_tab
id|es688_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x32
comma
l_int|7
comma
l_int|4
comma
l_int|0x32
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x36
comma
l_int|7
comma
l_int|4
comma
l_int|0x36
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x14
comma
l_int|7
comma
l_int|4
comma
l_int|0x14
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x3c
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x3e
comma
l_int|7
comma
l_int|4
comma
l_int|0x3e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x1a
comma
l_int|7
comma
l_int|4
comma
l_int|0x1a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x38
comma
l_int|7
comma
l_int|4
comma
l_int|0x38
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE1
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE2
comma
l_int|0x3a
comma
l_int|7
comma
l_int|4
comma
l_int|0x3a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
multiline_comment|/*&n; * The ES1688 specifics... hopefully correct...&n; * - 6 bit master volume&n; *   I was wrong, ES1888 docs say ES1688 didn&squot;t have it.&n; * - RECLEV control&n; * These may apply to ES688 too. I have no idea.&n; */
DECL|variable|es1688_mix
r_static
id|mixer_tab
id|es1688_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x32
comma
l_int|7
comma
l_int|4
comma
l_int|0x32
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x36
comma
l_int|7
comma
l_int|4
comma
l_int|0x36
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x14
comma
l_int|7
comma
l_int|4
comma
l_int|0x14
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x3c
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x3e
comma
l_int|7
comma
l_int|4
comma
l_int|0x3e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x1a
comma
l_int|7
comma
l_int|4
comma
l_int|0x1a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x38
comma
l_int|7
comma
l_int|4
comma
l_int|0x38
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0xb4
comma
l_int|7
comma
l_int|4
comma
l_int|0xb4
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE1
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE2
comma
l_int|0x3a
comma
l_int|7
comma
l_int|4
comma
l_int|0x3a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
DECL|variable|es1688later_mix
r_static
id|mixer_tab
id|es1688later_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x60
comma
l_int|5
comma
l_int|6
comma
l_int|0x62
comma
l_int|5
comma
l_int|6
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x36
comma
l_int|7
comma
l_int|4
comma
l_int|0x36
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x14
comma
l_int|7
comma
l_int|4
comma
l_int|0x14
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x3c
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x3e
comma
l_int|7
comma
l_int|4
comma
l_int|0x3e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x1a
comma
l_int|7
comma
l_int|4
comma
l_int|0x1a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x38
comma
l_int|7
comma
l_int|4
comma
l_int|0x38
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0xb4
comma
l_int|7
comma
l_int|4
comma
l_int|0xb4
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE1
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE2
comma
l_int|0x3a
comma
l_int|7
comma
l_int|4
comma
l_int|0x3a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
multiline_comment|/*&n; * The ES188x specifics.&n; * Note that de master volume unlike ES688 is now controlled by two 6 bit&n; * registers. These seem to work OK on 1868 too.&n; * Also Note that the recording levels (ES188X_MIXER_REC...) have own &n; * entries as if they were playback devices. They are used internally in the&n; * driver only!&n; */
DECL|variable|es188x_mix
r_static
id|mixer_tab
id|es188x_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x60
comma
l_int|5
comma
l_int|6
comma
l_int|0x62
comma
l_int|5
comma
l_int|6
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x36
comma
l_int|7
comma
l_int|4
comma
l_int|0x36
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x14
comma
l_int|7
comma
l_int|4
comma
l_int|0x14
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x3c
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x3e
comma
l_int|7
comma
l_int|4
comma
l_int|0x3e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x1a
comma
l_int|7
comma
l_int|4
comma
l_int|0x1a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x38
comma
l_int|7
comma
l_int|4
comma
l_int|0x38
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0xb4
comma
l_int|7
comma
l_int|4
comma
l_int|0xb4
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE1
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE2
comma
l_int|0x3a
comma
l_int|7
comma
l_int|4
comma
l_int|0x3a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECSYNTH
comma
l_int|0x6b
comma
l_int|7
comma
l_int|4
comma
l_int|0x6b
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECSPEAKER
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECLINE
comma
l_int|0x6e
comma
l_int|7
comma
l_int|4
comma
l_int|0x6e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECMIC
comma
l_int|0x68
comma
l_int|7
comma
l_int|4
comma
l_int|0x68
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECCD
comma
l_int|0x6a
comma
l_int|7
comma
l_int|4
comma
l_int|0x6a
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECIMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECRECLEV
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECIGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECOGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECLINE1
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECLINE2
comma
l_int|0x6c
comma
l_int|7
comma
l_int|4
comma
l_int|0x6c
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|ES188X_MIXER_RECLINE3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
macro_line|#ifdef&t;__SGNXPRO__
macro_line|#if 0
r_static
id|mixer_tab
id|sgnxpro_mix
op_assign
(brace
multiline_comment|/* not used anywhere */
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x22
comma
l_int|7
comma
l_int|4
comma
l_int|0x22
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x46
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x44
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x26
comma
l_int|7
comma
l_int|4
comma
l_int|0x26
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x04
comma
l_int|7
comma
l_int|4
comma
l_int|0x04
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x42
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x2e
comma
l_int|7
comma
l_int|4
comma
l_int|0x2e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x0a
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x28
comma
l_int|7
comma
l_int|4
comma
l_int|0x28
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
macro_line|#endif
macro_line|#endif
DECL|variable|sb16_mix
r_static
id|mixer_tab
id|sb16_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x30
comma
l_int|7
comma
l_int|5
comma
l_int|0x31
comma
l_int|7
comma
l_int|5
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x46
comma
l_int|7
comma
l_int|4
comma
l_int|0x47
comma
l_int|7
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x44
comma
l_int|7
comma
l_int|4
comma
l_int|0x45
comma
l_int|7
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x34
comma
l_int|7
comma
l_int|5
comma
l_int|0x35
comma
l_int|7
comma
l_int|5
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x32
comma
l_int|7
comma
l_int|5
comma
l_int|0x33
comma
l_int|7
comma
l_int|5
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x3b
comma
l_int|7
comma
l_int|2
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x38
comma
l_int|7
comma
l_int|5
comma
l_int|0x39
comma
l_int|7
comma
l_int|5
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x3a
comma
l_int|7
comma
l_int|5
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x36
comma
l_int|7
comma
l_int|5
comma
l_int|0x37
comma
l_int|7
comma
l_int|5
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x3c
comma
l_int|0
comma
l_int|1
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0x3f
comma
l_int|7
comma
l_int|2
comma
l_int|0x40
comma
l_int|7
comma
l_int|2
)paren
comma
multiline_comment|/* Obsolete. Use IGAIN */
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x3f
comma
l_int|7
comma
l_int|2
comma
l_int|0x40
comma
l_int|7
comma
l_int|2
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x41
comma
l_int|7
comma
l_int|2
comma
l_int|0x42
comma
l_int|7
comma
l_int|2
)paren
)brace
suffix:semicolon
DECL|variable|als007_mix
r_static
id|mixer_tab
id|als007_mix
op_assign
(brace
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_VOLUME
comma
l_int|0x62
comma
l_int|7
comma
l_int|4
comma
l_int|0x62
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_BASS
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_TREBLE
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SYNTH
comma
l_int|0x66
comma
l_int|7
comma
l_int|4
comma
l_int|0x66
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_PCM
comma
l_int|0x64
comma
l_int|7
comma
l_int|4
comma
l_int|0x64
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_SPEAKER
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_LINE
comma
l_int|0x6e
comma
l_int|7
comma
l_int|4
comma
l_int|0x6e
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_MIC
comma
l_int|0x6a
comma
l_int|2
comma
l_int|3
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_CD
comma
l_int|0x68
comma
l_int|7
comma
l_int|4
comma
l_int|0x68
comma
l_int|3
comma
l_int|4
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IMIX
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_ALTPCM
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_RECLEV
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
multiline_comment|/* Obsolete. Use IGAIN */
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_IGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
comma
id|MIX_ENT
c_func
(paren
id|SOUND_MIXER_OGAIN
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
comma
l_int|0x00
comma
l_int|0
comma
l_int|0
)paren
)brace
suffix:semicolon
multiline_comment|/* SM_GAMES          Master volume is lower and PCM &amp; FM volumes&n;&t;&t;&t;     higher than with SB Pro. This improves the&n;&t;&t;&t;     sound quality */
DECL|variable|smg_default_levels
r_static
r_int
id|smg_default_levels
(braket
l_int|32
)braket
op_assign
(brace
l_int|0x2020
comma
multiline_comment|/* Master Volume */
l_int|0x4b4b
comma
multiline_comment|/* Bass */
l_int|0x4b4b
comma
multiline_comment|/* Treble */
l_int|0x6464
comma
multiline_comment|/* FM */
l_int|0x6464
comma
multiline_comment|/* PCM */
l_int|0x4b4b
comma
multiline_comment|/* PC Speaker */
l_int|0x4b4b
comma
multiline_comment|/* Ext Line */
l_int|0x0000
comma
multiline_comment|/* Mic */
l_int|0x4b4b
comma
multiline_comment|/* CD */
l_int|0x4b4b
comma
multiline_comment|/* Recording monitor */
l_int|0x4b4b
comma
multiline_comment|/* SB PCM */
l_int|0x4b4b
comma
multiline_comment|/* Recording level */
l_int|0x4b4b
comma
multiline_comment|/* Input gain */
l_int|0x4b4b
comma
multiline_comment|/* Output gain */
l_int|0x4040
comma
multiline_comment|/* Line1 */
l_int|0x4040
comma
multiline_comment|/* Line2 */
l_int|0x1515
multiline_comment|/* Line3 */
)brace
suffix:semicolon
DECL|variable|sb_default_levels
r_static
r_int
id|sb_default_levels
(braket
l_int|32
)braket
op_assign
(brace
l_int|0x5a5a
comma
multiline_comment|/* Master Volume */
l_int|0x4b4b
comma
multiline_comment|/* Bass */
l_int|0x4b4b
comma
multiline_comment|/* Treble */
l_int|0x4b4b
comma
multiline_comment|/* FM */
l_int|0x4b4b
comma
multiline_comment|/* PCM */
l_int|0x4b4b
comma
multiline_comment|/* PC Speaker */
l_int|0x4b4b
comma
multiline_comment|/* Ext Line */
l_int|0x1010
comma
multiline_comment|/* Mic */
l_int|0x4b4b
comma
multiline_comment|/* CD */
l_int|0x0000
comma
multiline_comment|/* Recording monitor */
l_int|0x4b4b
comma
multiline_comment|/* SB PCM */
l_int|0x4b4b
comma
multiline_comment|/* Recording level */
l_int|0x4b4b
comma
multiline_comment|/* Input gain */
l_int|0x4b4b
comma
multiline_comment|/* Output gain */
l_int|0x4040
comma
multiline_comment|/* Line1 */
l_int|0x4040
comma
multiline_comment|/* Line2 */
l_int|0x1515
multiline_comment|/* Line3 */
)brace
suffix:semicolon
DECL|variable|sb16_recmasks_L
r_static
r_int
r_char
id|sb16_recmasks_L
(braket
id|SOUND_MIXER_NRDEVICES
)braket
op_assign
(brace
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_VOLUME&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_BASS&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_TREBLE&t;*/
l_int|0x40
comma
multiline_comment|/* SOUND_MIXER_SYNTH&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_PCM&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_SPEAKER&t;*/
l_int|0x10
comma
multiline_comment|/* SOUND_MIXER_LINE&t;*/
l_int|0x01
comma
multiline_comment|/* SOUND_MIXER_MIC&t;*/
l_int|0x04
comma
multiline_comment|/* SOUND_MIXER_CD&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_IMIX&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_ALTPCM&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_RECLEV&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_IGAIN&t;*/
l_int|0x00
multiline_comment|/* SOUND_MIXER_OGAIN&t;*/
)brace
suffix:semicolon
DECL|variable|sb16_recmasks_R
r_static
r_int
r_char
id|sb16_recmasks_R
(braket
id|SOUND_MIXER_NRDEVICES
)braket
op_assign
(brace
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_VOLUME&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_BASS&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_TREBLE&t;*/
l_int|0x20
comma
multiline_comment|/* SOUND_MIXER_SYNTH&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_PCM&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_SPEAKER&t;*/
l_int|0x08
comma
multiline_comment|/* SOUND_MIXER_LINE&t;*/
l_int|0x01
comma
multiline_comment|/* SOUND_MIXER_MIC&t;*/
l_int|0x02
comma
multiline_comment|/* SOUND_MIXER_CD&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_IMIX&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_ALTPCM&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_RECLEV&t;*/
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_IGAIN&t;*/
l_int|0x00
multiline_comment|/* SOUND_MIXER_OGAIN&t;*/
)brace
suffix:semicolon
DECL|variable|smw_mix_regs
r_static
r_char
id|smw_mix_regs
(braket
)braket
op_assign
multiline_comment|/* Left mixer registers */
(brace
l_int|0x0b
comma
multiline_comment|/* SOUND_MIXER_VOLUME */
l_int|0x0d
comma
multiline_comment|/* SOUND_MIXER_BASS */
l_int|0x0d
comma
multiline_comment|/* SOUND_MIXER_TREBLE */
l_int|0x05
comma
multiline_comment|/* SOUND_MIXER_SYNTH */
l_int|0x09
comma
multiline_comment|/* SOUND_MIXER_PCM */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_SPEAKER */
l_int|0x03
comma
multiline_comment|/* SOUND_MIXER_LINE */
l_int|0x01
comma
multiline_comment|/* SOUND_MIXER_MIC */
l_int|0x07
comma
multiline_comment|/* SOUND_MIXER_CD */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_IMIX */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_ALTPCM */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_RECLEV */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_IGAIN */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_OGAIN */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_LINE1 */
l_int|0x00
comma
multiline_comment|/* SOUND_MIXER_LINE2 */
l_int|0x00
multiline_comment|/* SOUND_MIXER_LINE3 */
)brace
suffix:semicolon
DECL|variable|sbmixnum
r_static
r_int
id|sbmixnum
op_assign
l_int|1
suffix:semicolon
r_static
r_void
id|sb_mixer_reset
c_func
(paren
id|sb_devc
op_star
id|devc
)paren
suffix:semicolon
DECL|function|sb_mixer_bits
r_inline
r_void
id|sb_mixer_bits
(paren
id|sb_devc
op_star
id|devc
comma
r_int
r_int
id|reg
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|val
)paren
(brace
r_int
id|value
suffix:semicolon
id|value
op_assign
id|sb_getmixer
c_func
(paren
id|devc
comma
id|reg
)paren
suffix:semicolon
id|value
op_assign
(paren
id|value
op_amp
op_complement
id|mask
)paren
op_or
(paren
id|val
op_amp
id|mask
)paren
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
id|reg
comma
id|value
)paren
suffix:semicolon
)brace
DECL|function|sb_mixer_set_stereo
r_void
id|sb_mixer_set_stereo
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|mode
)paren
(brace
id|sb_mixer_bits
c_func
(paren
id|devc
comma
id|OUT_FILTER
comma
id|STEREO_DAC
comma
(paren
id|mode
ques
c_cond
id|STEREO_DAC
suffix:colon
id|MONO_DAC
)paren
)paren
suffix:semicolon
)brace
DECL|function|detect_mixer
r_static
r_int
id|detect_mixer
c_func
(paren
id|sb_devc
op_star
id|devc
)paren
(brace
multiline_comment|/* Just trust the mixer is there */
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|change_bits
r_static
r_void
id|change_bits
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
r_char
op_star
id|regval
comma
r_int
id|dev
comma
r_int
id|chn
comma
r_int
id|newval
)paren
(brace
r_int
r_char
id|mask
suffix:semicolon
r_int
id|shift
suffix:semicolon
id|mask
op_assign
(paren
l_int|1
op_lshift
(paren
op_star
id|devc-&gt;iomap
)paren
(braket
id|dev
)braket
(braket
id|chn
)braket
dot
id|nbits
)paren
op_minus
l_int|1
suffix:semicolon
id|newval
op_assign
(paren
r_int
)paren
(paren
(paren
id|newval
op_star
id|mask
)paren
op_plus
l_int|50
)paren
op_div
l_int|100
suffix:semicolon
multiline_comment|/* Scale */
id|shift
op_assign
(paren
op_star
id|devc-&gt;iomap
)paren
(braket
id|dev
)braket
(braket
id|chn
)braket
dot
id|bitoffs
op_minus
(paren
op_star
id|devc-&gt;iomap
)paren
(braket
id|dev
)braket
(braket
id|LEFT_CHN
)braket
dot
id|nbits
op_plus
l_int|1
suffix:semicolon
op_star
id|regval
op_and_assign
op_complement
(paren
id|mask
op_lshift
id|shift
)paren
suffix:semicolon
multiline_comment|/* Mask out previous value */
op_star
id|regval
op_or_assign
(paren
id|newval
op_amp
id|mask
)paren
op_lshift
id|shift
suffix:semicolon
multiline_comment|/* Set the new value */
)brace
DECL|function|sb_mixer_get
r_static
r_int
id|sb_mixer_get
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|dev
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
l_int|1
op_lshift
id|dev
)paren
op_amp
id|devc-&gt;supported_devices
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_return
id|devc-&gt;levels
(braket
id|dev
)braket
suffix:semicolon
)brace
DECL|function|smw_mixer_init
r_void
id|smw_mixer_init
c_func
(paren
id|sb_devc
op_star
id|devc
)paren
(brace
r_int
id|i
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x00
comma
l_int|0x18
)paren
suffix:semicolon
multiline_comment|/* Mute unused (Telephone) line */
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x10
comma
l_int|0x38
)paren
suffix:semicolon
multiline_comment|/* Config register 2 */
id|devc-&gt;supported_devices
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|smw_mix_regs
)paren
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|smw_mix_regs
(braket
id|i
)braket
op_ne
l_int|0
)paren
id|devc-&gt;supported_devices
op_or_assign
(paren
l_int|1
op_lshift
id|i
)paren
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
id|devc-&gt;supported_devices
op_amp
op_complement
(paren
id|SOUND_MASK_BASS
op_or
id|SOUND_MASK_TREBLE
op_or
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
)paren
suffix:semicolon
id|sb_mixer_reset
c_func
(paren
id|devc
)paren
suffix:semicolon
)brace
DECL|function|common_mixer_set
r_static
r_int
id|common_mixer_set
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|dev
comma
r_int
id|left
comma
r_int
id|right
)paren
(brace
r_int
id|regoffs
suffix:semicolon
r_int
r_char
id|val
suffix:semicolon
id|regoffs
op_assign
(paren
op_star
id|devc-&gt;iomap
)paren
(braket
id|dev
)braket
(braket
id|LEFT_CHN
)braket
dot
id|regno
suffix:semicolon
r_if
c_cond
(paren
id|regoffs
op_eq
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|val
op_assign
id|sb_getmixer
c_func
(paren
id|devc
comma
id|regoffs
)paren
suffix:semicolon
id|change_bits
c_func
(paren
id|devc
comma
op_amp
id|val
comma
id|dev
comma
id|LEFT_CHN
comma
id|left
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
op_star
id|devc-&gt;iomap
)paren
(braket
id|dev
)braket
(braket
id|RIGHT_CHN
)braket
dot
id|regno
op_ne
id|regoffs
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t;&t; * Change register&n;&t;&t;&t;&t;&t;&t;&t;&t; */
(brace
id|sb_setmixer
c_func
(paren
id|devc
comma
id|regoffs
comma
id|val
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; * Save the old one&n;&t;&t;&t;&t;&t;&t;&t; */
id|regoffs
op_assign
(paren
op_star
id|devc-&gt;iomap
)paren
(braket
id|dev
)braket
(braket
id|RIGHT_CHN
)braket
dot
id|regno
suffix:semicolon
r_if
c_cond
(paren
id|regoffs
op_eq
l_int|0
)paren
r_return
id|left
op_or
(paren
id|left
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; * Just left channel present&n;&t;&t;&t;&t;&t;&t;&t; */
id|val
op_assign
id|sb_getmixer
c_func
(paren
id|devc
comma
id|regoffs
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; * Read the new one&n;&t;&t;&t;&t;&t;&t;&t; */
)brace
id|change_bits
c_func
(paren
id|devc
comma
op_amp
id|val
comma
id|dev
comma
id|RIGHT_CHN
comma
id|right
)paren
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
id|regoffs
comma
id|val
)paren
suffix:semicolon
r_return
id|left
op_or
(paren
id|right
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * After a sb_dsp_reset extended register 0xb4 (RECLEV) is reset too. After&n; * sb_dsp_reset RECLEV has to be restored. This is where ess_mixer_reload&n; * helps.&n; */
DECL|function|ess_mixer_reload
r_void
id|ess_mixer_reload
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|dev
)paren
(brace
r_int
id|left
comma
id|right
comma
id|value
suffix:semicolon
id|value
op_assign
id|devc-&gt;levels
(braket
id|dev
)braket
suffix:semicolon
id|left
op_assign
id|value
op_amp
l_int|0x000000ff
suffix:semicolon
id|right
op_assign
(paren
id|value
op_amp
l_int|0x0000ff00
)paren
op_rshift
l_int|8
suffix:semicolon
id|common_mixer_set
c_func
(paren
id|devc
comma
id|dev
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Changing playback levels at ES188x means having to take care of recording&n; * levels of recorded inputs (devc-&gt;recmask) too!&n; */
DECL|function|es188x_mixer_set
r_static
r_int
id|es188x_mixer_set
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|dev
comma
r_int
id|left
comma
r_int
id|right
)paren
(brace
r_if
c_cond
(paren
id|devc-&gt;recmask
op_amp
(paren
l_int|1
op_lshift
id|dev
)paren
)paren
(brace
id|common_mixer_set
c_func
(paren
id|devc
comma
id|dev
op_plus
id|ES188X_MIXER_RECDIFF
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_return
id|common_mixer_set
c_func
(paren
id|devc
comma
id|dev
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
DECL|function|smw_mixer_set
r_static
r_int
id|smw_mixer_set
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|dev
comma
r_int
id|left
comma
r_int
id|right
)paren
(brace
r_int
id|reg
comma
id|val
suffix:semicolon
r_switch
c_cond
(paren
id|dev
)paren
(brace
r_case
id|SOUND_MIXER_VOLUME
suffix:colon
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x0b
comma
l_int|96
op_minus
(paren
l_int|96
op_star
id|left
op_div
l_int|100
)paren
)paren
suffix:semicolon
multiline_comment|/* 96=mute, 0=max */
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x0c
comma
l_int|96
op_minus
(paren
l_int|96
op_star
id|right
op_div
l_int|100
)paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_BASS
suffix:colon
r_case
id|SOUND_MIXER_TREBLE
suffix:colon
id|devc-&gt;levels
(braket
id|dev
)braket
op_assign
id|left
op_or
(paren
id|right
op_lshift
l_int|8
)paren
suffix:semicolon
multiline_comment|/* Set left bass and treble values */
id|val
op_assign
(paren
(paren
id|devc-&gt;levels
(braket
id|SOUND_MIXER_TREBLE
)braket
op_amp
l_int|0xff
)paren
op_star
l_int|16
op_div
(paren
r_int
)paren
l_int|100
)paren
op_lshift
l_int|4
suffix:semicolon
id|val
op_or_assign
(paren
(paren
id|devc-&gt;levels
(braket
id|SOUND_MIXER_BASS
)braket
op_amp
l_int|0xff
)paren
op_star
l_int|16
op_div
(paren
r_int
)paren
l_int|100
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x0d
comma
id|val
)paren
suffix:semicolon
multiline_comment|/* Set right bass and treble values */
id|val
op_assign
(paren
(paren
(paren
id|devc-&gt;levels
(braket
id|SOUND_MIXER_TREBLE
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_star
l_int|16
op_div
(paren
r_int
)paren
l_int|100
)paren
op_lshift
l_int|4
suffix:semicolon
id|val
op_or_assign
(paren
(paren
(paren
id|devc-&gt;levels
(braket
id|SOUND_MIXER_BASS
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_star
l_int|16
op_div
(paren
r_int
)paren
l_int|100
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x0e
comma
id|val
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|reg
op_assign
id|smw_mix_regs
(braket
id|dev
)braket
suffix:semicolon
r_if
c_cond
(paren
id|reg
op_eq
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
id|reg
comma
(paren
l_int|24
op_minus
(paren
l_int|24
op_star
id|left
op_div
l_int|100
)paren
)paren
op_or
l_int|0x20
)paren
suffix:semicolon
multiline_comment|/* 24=mute, 0=max */
id|sb_setmixer
c_func
(paren
id|devc
comma
id|reg
op_plus
l_int|1
comma
(paren
l_int|24
op_minus
(paren
l_int|24
op_star
id|right
op_div
l_int|100
)paren
)paren
op_or
l_int|0x40
)paren
suffix:semicolon
)brace
id|devc-&gt;levels
(braket
id|dev
)braket
op_assign
id|left
op_or
(paren
id|right
op_lshift
l_int|8
)paren
suffix:semicolon
r_return
id|left
op_or
(paren
id|right
op_lshift
l_int|8
)paren
suffix:semicolon
)brace
DECL|function|sb_mixer_set
r_static
r_int
id|sb_mixer_set
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|dev
comma
r_int
id|value
)paren
(brace
r_int
id|left
op_assign
id|value
op_amp
l_int|0x000000ff
suffix:semicolon
r_int
id|right
op_assign
(paren
id|value
op_amp
l_int|0x0000ff00
)paren
op_rshift
l_int|8
suffix:semicolon
r_int
id|retval
suffix:semicolon
r_if
c_cond
(paren
id|left
OG
l_int|100
)paren
id|left
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|right
OG
l_int|100
)paren
id|right
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|dev
OG
l_int|31
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|devc-&gt;supported_devices
op_amp
(paren
l_int|1
op_lshift
id|dev
)paren
)paren
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; * Not supported&n;&t;&t;&t;&t;&t;&t;&t; */
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* Differentiate depending on the chipsets */
r_switch
c_cond
(paren
id|devc-&gt;model
)paren
(brace
r_case
id|MDL_SMW
suffix:colon
id|retval
op_assign
id|smw_mixer_set
c_func
(paren
id|devc
comma
id|dev
comma
id|left
comma
id|right
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MDL_ESS
suffix:colon
r_if
c_cond
(paren
id|devc-&gt;submodel
op_eq
id|SUBMDL_ES188X
)paren
(brace
id|retval
op_assign
id|es188x_mixer_set
c_func
(paren
id|devc
comma
id|dev
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_else
(brace
id|retval
op_assign
id|common_mixer_set
c_func
(paren
id|devc
comma
id|dev
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|retval
op_assign
id|common_mixer_set
c_func
(paren
id|devc
comma
id|dev
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|retval
op_ge
l_int|0
)paren
id|devc-&gt;levels
(braket
id|dev
)braket
op_assign
id|retval
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
multiline_comment|/*&n; * set_recsrc doesn&squot;t apply to ES188x&n; */
DECL|function|set_recsrc
r_static
r_void
id|set_recsrc
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|src
)paren
(brace
id|sb_setmixer
c_func
(paren
id|devc
comma
id|RECORD_SRC
comma
(paren
id|sb_getmixer
c_func
(paren
id|devc
comma
id|RECORD_SRC
)paren
op_amp
op_complement
l_int|7
)paren
op_or
(paren
id|src
op_amp
l_int|0x7
)paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Changing the recmask on a ES188x means:&n; * (1) Find the differences&n; * (2) For &quot;turned-on&quot;  inputs: make the recording level the playback level&n; * (3) For &quot;turned-off&quot; inputs: make the recording level zero&n; */
DECL|function|es188x_set_recmask
r_static
r_int
id|es188x_set_recmask
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|mask
)paren
(brace
r_int
id|i
comma
id|i_mask
comma
id|cur_mask
comma
id|diff_mask
suffix:semicolon
r_int
id|value
comma
id|left
comma
id|right
suffix:semicolon
id|cur_mask
op_assign
id|devc-&gt;recmask
suffix:semicolon
id|diff_mask
op_assign
(paren
id|cur_mask
op_xor
id|mask
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|i_mask
op_assign
(paren
l_int|1
op_lshift
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|diff_mask
op_amp
id|i_mask
)paren
(brace
multiline_comment|/* Difference? (1)&t;*/
r_if
c_cond
(paren
id|mask
op_amp
id|i_mask
)paren
(brace
multiline_comment|/* Turn it on  (2)&t;*/
id|value
op_assign
id|devc-&gt;levels
(braket
id|i
)braket
suffix:semicolon
id|left
op_assign
id|value
op_amp
l_int|0x000000ff
suffix:semicolon
id|right
op_assign
(paren
id|value
op_amp
l_int|0x0000ff00
)paren
op_rshift
l_int|8
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Turn it off (3)&t;*/
id|left
op_assign
l_int|0
suffix:semicolon
id|right
op_assign
l_int|0
suffix:semicolon
)brace
id|common_mixer_set
c_func
(paren
id|devc
comma
id|i
op_plus
id|ES188X_MIXER_RECDIFF
comma
id|left
comma
id|right
)paren
suffix:semicolon
)brace
)brace
r_return
id|mask
suffix:semicolon
)brace
DECL|function|set_recmask
r_static
r_int
id|set_recmask
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|mask
)paren
(brace
r_int
id|devmask
comma
id|i
suffix:semicolon
r_int
r_char
id|regimageL
comma
id|regimageR
suffix:semicolon
id|devmask
op_assign
id|mask
op_amp
id|devc-&gt;supported_rec_devices
suffix:semicolon
r_switch
c_cond
(paren
id|devc-&gt;model
)paren
(brace
r_case
id|MDL_SBPRO
suffix:colon
r_case
id|MDL_ESS
suffix:colon
r_case
id|MDL_JAZZ
suffix:colon
r_case
id|MDL_SMW
suffix:colon
r_if
c_cond
(paren
id|devc-&gt;model
op_eq
id|MDL_ESS
op_logical_and
id|devc-&gt;submodel
op_eq
id|SUBMDL_ES188X
)paren
(brace
multiline_comment|/*&n;&t;&t;&t;&t; * ES188x needs a separate approach&n;&t;&t;&t;&t; */
id|devmask
op_assign
id|es188x_set_recmask
c_func
(paren
id|devc
comma
id|devmask
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
suffix:semicolon
r_if
c_cond
(paren
id|devmask
op_ne
id|SOUND_MASK_MIC
op_logical_and
id|devmask
op_ne
id|SOUND_MASK_LINE
op_logical_and
id|devmask
op_ne
id|SOUND_MASK_CD
)paren
(brace
multiline_comment|/*&n;&t;&t;&t;&t; * More than one device selected. Drop the&n;&t;&t;&t;&t; * previous selection&n;&t;&t;&t;&t; */
id|devmask
op_and_assign
op_complement
id|devc-&gt;recmask
suffix:semicolon
)brace
r_if
c_cond
(paren
id|devmask
op_ne
id|SOUND_MASK_MIC
op_logical_and
id|devmask
op_ne
id|SOUND_MASK_LINE
op_logical_and
id|devmask
op_ne
id|SOUND_MASK_CD
)paren
(brace
multiline_comment|/*&n;&t;&t;&t;&t; * More than one device selected. Default to&n;&t;&t;&t;&t; * mic&n;&t;&t;&t;&t; */
id|devmask
op_assign
id|SOUND_MASK_MIC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|devmask
op_xor
id|devc-&gt;recmask
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; *&t;Input source changed&n;&t;&t;&t;&t;&t;&t;&t; */
(brace
r_switch
c_cond
(paren
id|devmask
)paren
(brace
r_case
id|SOUND_MASK_MIC
suffix:colon
id|set_recsrc
c_func
(paren
id|devc
comma
id|SRC__MIC
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MASK_LINE
suffix:colon
id|set_recsrc
c_func
(paren
id|devc
comma
id|SRC__LINE
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MASK_CD
suffix:colon
id|set_recsrc
c_func
(paren
id|devc
comma
id|SRC__CD
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|set_recsrc
c_func
(paren
id|devc
comma
id|SRC__MIC
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|MDL_SB16
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|devmask
)paren
id|devmask
op_assign
id|SOUND_MASK_MIC
suffix:semicolon
r_if
c_cond
(paren
id|devc-&gt;submodel
op_eq
id|SUBMDL_ALS007
)paren
(brace
r_switch
c_cond
(paren
id|devmask
)paren
(brace
r_case
id|SOUND_MASK_LINE
suffix:colon
id|sb_setmixer
c_func
(paren
id|devc
comma
id|ALS007_RECORD_SRC
comma
id|ALS007_LINE
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MASK_CD
suffix:colon
id|sb_setmixer
c_func
(paren
id|devc
comma
id|ALS007_RECORD_SRC
comma
id|ALS007_CD
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MASK_SYNTH
suffix:colon
id|sb_setmixer
c_func
(paren
id|devc
comma
id|ALS007_RECORD_SRC
comma
id|ALS007_SYNTH
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/* Also takes care of SOUND_MASK_MIC case */
id|sb_setmixer
c_func
(paren
id|devc
comma
id|ALS007_RECORD_SRC
comma
id|ALS007_MIC
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_else
(brace
id|regimageL
op_assign
id|regimageR
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|SOUND_MIXER_NRDEVICES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
l_int|1
op_lshift
id|i
)paren
op_amp
id|devmask
)paren
(brace
id|regimageL
op_or_assign
id|sb16_recmasks_L
(braket
id|i
)braket
suffix:semicolon
id|regimageR
op_or_assign
id|sb16_recmasks_R
(braket
id|i
)braket
suffix:semicolon
)brace
id|sb_setmixer
(paren
id|devc
comma
id|SB16_IMASK_L
comma
id|regimageL
)paren
suffix:semicolon
id|sb_setmixer
(paren
id|devc
comma
id|SB16_IMASK_R
comma
id|regimageR
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
)brace
id|devc-&gt;recmask
op_assign
id|devmask
suffix:semicolon
r_return
id|devc-&gt;recmask
suffix:semicolon
)brace
DECL|function|set_outmask
r_static
r_int
id|set_outmask
c_func
(paren
id|sb_devc
op_star
id|devc
comma
r_int
id|mask
)paren
(brace
r_int
id|devmask
comma
id|i
suffix:semicolon
r_int
r_char
id|regimage
suffix:semicolon
id|devmask
op_assign
id|mask
op_amp
id|devc-&gt;supported_out_devices
suffix:semicolon
r_switch
c_cond
(paren
id|devc-&gt;model
)paren
(brace
r_case
id|MDL_SB16
suffix:colon
r_if
c_cond
(paren
id|devc-&gt;submodel
op_eq
id|SUBMDL_ALS007
)paren
r_break
suffix:semicolon
r_else
(brace
id|regimage
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|SOUND_MIXER_NRDEVICES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
l_int|1
op_lshift
id|i
)paren
op_amp
id|devmask
)paren
(brace
id|regimage
op_or_assign
(paren
id|sb16_recmasks_L
(braket
id|i
)braket
op_or
id|sb16_recmasks_R
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|sb_setmixer
(paren
id|devc
comma
id|SB16_OMASK
comma
id|regimage
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|devc-&gt;outmask
op_assign
id|devmask
suffix:semicolon
r_return
id|devc-&gt;outmask
suffix:semicolon
)brace
DECL|function|sb_mixer_ioctl
r_static
r_int
id|sb_mixer_ioctl
c_func
(paren
r_int
id|dev
comma
r_int
r_int
id|cmd
comma
id|caddr_t
id|arg
)paren
(brace
id|sb_devc
op_star
id|devc
op_assign
id|mixer_devs
(braket
id|dev
)braket
op_member_access_from_pointer
id|devc
suffix:semicolon
r_int
id|val
comma
id|ret
suffix:semicolon
multiline_comment|/*&n;&t; * Use ioctl(fd, SOUND_MIXER_PRIVATE1, &amp;mode) to turn AGC off (0) or on (1).&n;&t; */
r_if
c_cond
(paren
id|cmd
op_eq
id|SOUND_MIXER_PRIVATE1
op_logical_and
id|devc-&gt;model
op_eq
id|MDL_SB16
)paren
(brace
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|val
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x43
comma
(paren
op_complement
id|val
)paren
op_amp
l_int|0x01
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
(paren
id|cmd
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_eq
l_char|&squot;M&squot;
)paren
(brace
r_if
c_cond
(paren
id|_SIOC_DIR
c_func
(paren
id|cmd
)paren
op_amp
id|_SIOC_WRITE
)paren
(brace
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|val
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
op_amp
l_int|0xff
)paren
(brace
r_case
id|SOUND_MIXER_RECSRC
suffix:colon
id|ret
op_assign
id|set_recmask
c_func
(paren
id|devc
comma
id|val
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_OUTSRC
suffix:colon
id|ret
op_assign
id|set_outmask
c_func
(paren
id|devc
comma
id|val
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|ret
op_assign
id|sb_mixer_set
c_func
(paren
id|devc
comma
id|cmd
op_amp
l_int|0xff
comma
id|val
)paren
suffix:semicolon
)brace
)brace
r_else
r_switch
c_cond
(paren
id|cmd
op_amp
l_int|0xff
)paren
(brace
r_case
id|SOUND_MIXER_RECSRC
suffix:colon
id|ret
op_assign
id|devc-&gt;recmask
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_OUTSRC
suffix:colon
id|ret
op_assign
id|devc-&gt;outmask
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_DEVMASK
suffix:colon
id|ret
op_assign
id|devc-&gt;supported_devices
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_STEREODEVS
suffix:colon
id|ret
op_assign
id|devc-&gt;supported_devices
suffix:semicolon
multiline_comment|/* The ESS seems to have stereo mic controls */
r_if
c_cond
(paren
id|devc-&gt;model
op_eq
id|MDL_ESS
)paren
id|ret
op_and_assign
op_complement
(paren
id|SOUND_MASK_SPEAKER
op_or
id|SOUND_MASK_IMIX
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|devc-&gt;model
op_ne
id|MDL_JAZZ
op_logical_and
id|devc-&gt;model
op_ne
id|MDL_SMW
)paren
id|ret
op_and_assign
op_complement
(paren
id|SOUND_MASK_MIC
op_or
id|SOUND_MASK_SPEAKER
op_or
id|SOUND_MASK_IMIX
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_RECMASK
suffix:colon
id|ret
op_assign
id|devc-&gt;supported_rec_devices
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_OUTMASK
suffix:colon
id|ret
op_assign
id|devc-&gt;supported_out_devices
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_CAPS
suffix:colon
id|ret
op_assign
id|devc-&gt;mixer_caps
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|ret
op_assign
id|sb_mixer_get
c_func
(paren
id|devc
comma
id|cmd
op_amp
l_int|0xff
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|put_user
c_func
(paren
id|ret
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
)brace
r_else
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|variable|sb_mixer_operations
r_static
r_struct
id|mixer_operations
id|sb_mixer_operations
op_assign
(brace
l_string|&quot;SB&quot;
comma
l_string|&quot;Sound Blaster&quot;
comma
id|sb_mixer_ioctl
)brace
suffix:semicolon
DECL|variable|als007_mixer_operations
r_static
r_struct
id|mixer_operations
id|als007_mixer_operations
op_assign
(brace
l_string|&quot;ALS007&quot;
comma
l_string|&quot;Avance ALS-007&quot;
comma
id|sb_mixer_ioctl
)brace
suffix:semicolon
DECL|function|sb_mixer_reset
r_static
r_void
id|sb_mixer_reset
c_func
(paren
id|sb_devc
op_star
id|devc
)paren
(brace
r_char
id|name
(braket
l_int|32
)braket
suffix:semicolon
r_int
id|i
suffix:semicolon
r_extern
r_int
id|sm_games
suffix:semicolon
id|sprintf
c_func
(paren
id|name
comma
l_string|&quot;SB_%d&quot;
comma
id|devc-&gt;sbmixnum
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sm_games
)paren
id|devc-&gt;levels
op_assign
id|load_mixer_volumes
c_func
(paren
id|name
comma
id|smg_default_levels
comma
l_int|1
)paren
suffix:semicolon
r_else
id|devc-&gt;levels
op_assign
id|load_mixer_volumes
c_func
(paren
id|name
comma
id|sb_default_levels
comma
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|SOUND_MIXER_NRDEVICES
suffix:semicolon
id|i
op_increment
)paren
id|sb_mixer_set
c_func
(paren
id|devc
comma
id|i
comma
id|devc-&gt;levels
(braket
id|i
)braket
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Separate actions for ES188x:&n;&t; * Change registers 7a and 1c to make the record mixer the&n;&t; * actual recording source.&n;&t; * Then call set_recmask twice to do extra ES188x initializations&n;&t; */
r_if
c_cond
(paren
id|devc-&gt;model
op_eq
id|MDL_ESS
op_logical_and
id|devc-&gt;submodel
op_eq
id|SUBMDL_ES188X
)paren
(brace
id|sb_mixer_bits
c_func
(paren
id|devc
comma
l_int|0x7a
comma
l_int|0x18
comma
l_int|0x08
)paren
suffix:semicolon
id|sb_mixer_bits
c_func
(paren
id|devc
comma
l_int|0x1c
comma
l_int|0x07
comma
l_int|0x07
)paren
suffix:semicolon
id|set_recmask
c_func
(paren
id|devc
comma
id|ES188X_RECORDING_DEVICES
)paren
suffix:semicolon
id|set_recmask
c_func
(paren
id|devc
comma
l_int|0
)paren
suffix:semicolon
)brace
id|set_recmask
c_func
(paren
id|devc
comma
id|SOUND_MASK_MIC
)paren
suffix:semicolon
)brace
DECL|function|sb_mixer_init
r_int
id|sb_mixer_init
c_func
(paren
id|sb_devc
op_star
id|devc
)paren
(brace
r_int
id|mixer_type
op_assign
l_int|0
suffix:semicolon
r_int
id|m
suffix:semicolon
id|devc-&gt;sbmixnum
op_assign
id|sbmixnum
op_increment
suffix:semicolon
id|devc-&gt;levels
op_assign
l_int|NULL
suffix:semicolon
id|sb_setmixer
c_func
(paren
id|devc
comma
l_int|0x00
comma
l_int|0
)paren
suffix:semicolon
multiline_comment|/* Reset mixer */
r_if
c_cond
(paren
op_logical_neg
(paren
id|mixer_type
op_assign
id|detect_mixer
c_func
(paren
id|devc
)paren
)paren
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* No mixer. Why? */
r_switch
c_cond
(paren
id|devc-&gt;model
)paren
(brace
r_case
id|MDL_SBPRO
suffix:colon
r_case
id|MDL_AZTECH
suffix:colon
r_case
id|MDL_JAZZ
suffix:colon
id|devc-&gt;mixer_caps
op_assign
id|SOUND_CAP_EXCL_INPUT
suffix:semicolon
id|devc-&gt;supported_devices
op_assign
id|SBPRO_MIXER_DEVICES
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
id|SBPRO_RECORDING_DEVICES
suffix:semicolon
id|devc-&gt;iomap
op_assign
op_amp
id|sbpro_mix
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MDL_ESS
suffix:colon
id|devc-&gt;mixer_caps
op_assign
id|SOUND_CAP_EXCL_INPUT
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t; * Take care of ES188x specifics...&n;&t;&t;&t; */
r_switch
c_cond
(paren
id|devc-&gt;submodel
)paren
(brace
r_case
id|SUBMDL_ES188X
suffix:colon
id|devc-&gt;supported_devices
op_assign
id|ES188X_MIXER_DEVICES
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
id|ES188X_RECORDING_DEVICES
suffix:semicolon
id|devc-&gt;iomap
op_assign
op_amp
id|es188x_mix
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|devc-&gt;submodel
OL
l_int|8
)paren
(brace
id|devc-&gt;supported_devices
op_assign
id|ES688_MIXER_DEVICES
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
id|ES688_RECORDING_DEVICES
suffix:semicolon
id|devc-&gt;iomap
op_assign
op_amp
id|es688_mix
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*&n;&t;&t;&t;&t;&t; * es1688 has 4 bits master vol.&n;&t;&t;&t;&t;&t; * later chips have 6 bits (?)&n;&t;&t;&t;&t;&t; */
id|devc-&gt;supported_devices
op_assign
id|ES1688_MIXER_DEVICES
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
id|ES1688_RECORDING_DEVICES
suffix:semicolon
r_if
c_cond
(paren
id|devc-&gt;submodel
OL
l_int|0x10
)paren
(brace
id|devc-&gt;iomap
op_assign
op_amp
id|es1688_mix
suffix:semicolon
)brace
r_else
(brace
id|devc-&gt;iomap
op_assign
op_amp
id|es1688later_mix
suffix:semicolon
)brace
)brace
)brace
r_break
suffix:semicolon
r_case
id|MDL_SMW
suffix:colon
id|devc-&gt;mixer_caps
op_assign
id|SOUND_CAP_EXCL_INPUT
suffix:semicolon
id|devc-&gt;supported_devices
op_assign
l_int|0
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
l_int|0
suffix:semicolon
id|devc-&gt;iomap
op_assign
op_amp
id|sbpro_mix
suffix:semicolon
id|smw_mixer_init
c_func
(paren
id|devc
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MDL_SB16
suffix:colon
id|devc-&gt;mixer_caps
op_assign
l_int|0
suffix:semicolon
id|devc-&gt;supported_rec_devices
op_assign
id|SB16_RECORDING_DEVICES
suffix:semicolon
id|devc-&gt;supported_out_devices
op_assign
id|SB16_OUTFILTER_DEVICES
suffix:semicolon
r_if
c_cond
(paren
id|devc-&gt;submodel
op_ne
id|SUBMDL_ALS007
)paren
(brace
id|devc-&gt;supported_devices
op_assign
id|SB16_MIXER_DEVICES
suffix:semicolon
id|devc-&gt;iomap
op_assign
op_amp
id|sb16_mix
suffix:semicolon
)brace
r_else
(brace
id|devc-&gt;supported_devices
op_assign
id|ALS007_MIXER_DEVICES
suffix:semicolon
id|devc-&gt;iomap
op_assign
op_amp
id|als007_mix
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;sb_mixer: Unsupported mixer type %d&bslash;n&quot;
comma
id|devc-&gt;model
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|m
op_assign
id|sound_alloc_mixerdev
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|m
op_eq
op_minus
l_int|1
)paren
r_return
l_int|0
suffix:semicolon
id|mixer_devs
(braket
id|m
)braket
op_assign
(paren
r_struct
id|mixer_operations
op_star
)paren
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|mixer_operations
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|mixer_devs
(braket
id|m
)braket
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sb_mixer: Can&squot;t allocate memory&bslash;n&quot;
)paren
suffix:semicolon
id|sound_unload_mixerdev
c_func
(paren
id|m
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|devc-&gt;submodel
op_ne
id|SUBMDL_ALS007
)paren
id|memcpy
(paren
(paren
r_char
op_star
)paren
id|mixer_devs
(braket
id|m
)braket
comma
(paren
r_char
op_star
)paren
op_amp
id|sb_mixer_operations
comma
r_sizeof
(paren
r_struct
id|mixer_operations
)paren
)paren
suffix:semicolon
r_else
id|memcpy
(paren
(paren
r_char
op_star
)paren
id|mixer_devs
(braket
id|m
)braket
comma
(paren
r_char
op_star
)paren
op_amp
id|als007_mixer_operations
comma
r_sizeof
(paren
r_struct
id|mixer_operations
)paren
)paren
suffix:semicolon
id|mixer_devs
(braket
id|m
)braket
op_member_access_from_pointer
id|devc
op_assign
id|devc
suffix:semicolon
id|devc-&gt;my_mixerdev
op_assign
id|m
suffix:semicolon
id|sb_mixer_reset
c_func
(paren
id|devc
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
eof
