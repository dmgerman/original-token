DECL|macro|DISABLED_OPTIONS
mdefine_line|#define DISABLED_OPTIONS &t;(B(OPT_PNP))
multiline_comment|/*&n; * sound/configure.c  - Configuration program for the Linux Sound Driver&n; *&n; * Copyright by Hannu Savolainen 1993-1995&n; *&n; * Redistribution and use in source and binary forms, with or without&n; * modification, are permitted provided that the following conditions are&n; * met: 1. Redistributions of source code must retain the above copyright&n; * notice, this list of conditions and the following disclaimer. 2.&n; * Redistributions in binary form must reproduce the above copyright notice,&n; * this list of conditions and the following disclaimer in the documentation&n; * and/or other materials provided with the distribution.&n; *&n; * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&squot;&squot; AND ANY&n; * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED&n; * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE&n; * DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR&n; * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL&n; * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR&n; * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER&n; * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT&n; * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY&n; * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF&n; * SUCH DAMAGE.&n; *&n; */
macro_line|#include &lt;stdio.h&gt;
macro_line|#include &lt;unistd.h&gt;
macro_line|#include &lt;stdlib.h&gt;
DECL|macro|B
mdefine_line|#define B(x)&t;(1 &lt;&lt; (x))
multiline_comment|/*&n; * Option numbers&n; */
DECL|macro|OPT_PAS
mdefine_line|#define OPT_PAS&t;&t;0
DECL|macro|OPT_SB
mdefine_line|#define OPT_SB&t;&t;1
DECL|macro|OPT_ADLIB
mdefine_line|#define OPT_ADLIB&t;2
DECL|macro|OPT_LAST_MUTUAL
mdefine_line|#define OPT_LAST_MUTUAL&t;2
DECL|macro|OPT_GUS
mdefine_line|#define OPT_GUS&t;&t;3
DECL|macro|OPT_MPU401
mdefine_line|#define OPT_MPU401&t;4
DECL|macro|OPT_UART6850
mdefine_line|#define OPT_UART6850&t;5
DECL|macro|OPT_PSS
mdefine_line|#define OPT_PSS&t;&t;6
DECL|macro|OPT_GUS16
mdefine_line|#define OPT_GUS16&t;7
DECL|macro|OPT_GUSMAX
mdefine_line|#define OPT_GUSMAX&t;8
DECL|macro|OPT_MSS
mdefine_line|#define OPT_MSS&t;&t;9
DECL|macro|OPT_SSCAPE
mdefine_line|#define OPT_SSCAPE&t;10
DECL|macro|OPT_TRIX
mdefine_line|#define OPT_TRIX&t;11
DECL|macro|OPT_MAD16
mdefine_line|#define OPT_MAD16&t;12
DECL|macro|OPT_CS4232
mdefine_line|#define OPT_CS4232&t;13
DECL|macro|OPT_MAUI
mdefine_line|#define OPT_MAUI&t;14
DECL|macro|OPT_PNP
mdefine_line|#define OPT_PNP&t;&t;15
DECL|macro|OPT_HIGHLEVEL
mdefine_line|#define OPT_HIGHLEVEL   16&t;/* This must be same than the next one */
DECL|macro|OPT_SBPRO
mdefine_line|#define OPT_SBPRO&t;16
DECL|macro|OPT_SB16
mdefine_line|#define OPT_SB16&t;17
DECL|macro|OPT_AEDSP16
mdefine_line|#define OPT_AEDSP16     18
DECL|macro|OPT_AUDIO
mdefine_line|#define OPT_AUDIO&t;19
DECL|macro|OPT_MIDI_AUTO
mdefine_line|#define OPT_MIDI_AUTO&t;20
DECL|macro|OPT_MIDI
mdefine_line|#define OPT_MIDI&t;21
DECL|macro|OPT_YM3812_AUTO
mdefine_line|#define OPT_YM3812_AUTO&t;22
DECL|macro|OPT_YM3812
mdefine_line|#define OPT_YM3812&t;23
DECL|macro|OPT_SEQUENCER
mdefine_line|#define OPT_SEQUENCER&t;24
DECL|macro|OPT_LAST
mdefine_line|#define OPT_LAST&t;24&t;/* Last defined OPT number */
DECL|macro|ANY_DEVS
mdefine_line|#define ANY_DEVS (B(OPT_AUDIO)|B(OPT_MIDI)|B(OPT_SEQUENCER)|B(OPT_GUS)| &bslash;&n;&t;&t;  B(OPT_MPU401)|B(OPT_PSS)|B(OPT_GUS16)|B(OPT_GUSMAX)| &bslash;&n;&t;&t;  B(OPT_MSS)|B(OPT_SSCAPE)|B(OPT_UART6850)|B(OPT_TRIX)| &bslash;&n;&t;&t;  B(OPT_MAD16)|B(OPT_CS4232)|B(OPT_MAUI))
DECL|macro|AUDIO_CARDS
mdefine_line|#define AUDIO_CARDS (B (OPT_PSS) | B (OPT_SB) | B (OPT_PAS) | B (OPT_GUS) | &bslash;&n;&t;&t;B (OPT_MSS) | B (OPT_GUS16) | B (OPT_GUSMAX) | B (OPT_TRIX) | &bslash;&n;&t;&t;B (OPT_SSCAPE)| B(OPT_MAD16) | B(OPT_CS4232))
DECL|macro|MIDI_CARDS
mdefine_line|#define MIDI_CARDS (B (OPT_PSS) | B (OPT_SB) | B (OPT_PAS) | B (OPT_MPU401) | &bslash;&n;&t;&t;    B (OPT_GUS) | B (OPT_TRIX) | B (OPT_SSCAPE)|B(OPT_MAD16) | &bslash;&n;&t;&t;    B (OPT_CS4232)|B(OPT_MAUI))
DECL|macro|MPU_DEVS
mdefine_line|#define MPU_DEVS (B(OPT_PSS)|B(OPT_SSCAPE)|B(OPT_TRIX)|B(OPT_MAD16)|&bslash;&n;&t;&t;  B(OPT_CS4232)|B(OPT_PNP)|B(OPT_MAUI))
DECL|macro|AD1848_DEVS
mdefine_line|#define AD1848_DEVS (B(OPT_GUS16)|B(OPT_MSS)|B(OPT_PSS)|B(OPT_GUSMAX)|&bslash;&n;&t;&t;     B(OPT_SSCAPE)|B(OPT_TRIX)|B(OPT_MAD16)|B(OPT_CS4232)|&bslash;&n;&t;&t;     B(OPT_PNP))
multiline_comment|/*&n; * Options that have been disabled for some reason (incompletely implemented&n; * and/or tested). Don&squot;t remove from this list before looking at file&n; * experimental.txt for further info.&n; */
r_typedef
r_struct
(brace
DECL|member|conditions
r_int
r_int
id|conditions
suffix:semicolon
DECL|member|exclusive_options
r_int
r_int
id|exclusive_options
suffix:semicolon
DECL|member|macro
r_char
id|macro
(braket
l_int|20
)braket
suffix:semicolon
DECL|member|verify
r_int
id|verify
suffix:semicolon
DECL|member|alias
r_int
id|alias
suffix:semicolon
DECL|member|default_answ
r_int
id|default_answ
suffix:semicolon
)brace
DECL|typedef|hw_entry
id|hw_entry
suffix:semicolon
multiline_comment|/*&n; * The rule table for the driver options. The first field defines a set of&n; * options which must be selected before this entry can be selected. The&n; * second field is a set of options which are not allowed with this one. If&n; * the fourth field is zero, the option is selected without asking&n; * confirmation from the user.&n; *&n; * With this version of the rule table it is possible to select just one type of&n; * hardware.&n; *&n; * NOTE!        Keep the following table and the questions array in sync with the&n; * option numbering!&n; */
DECL|variable|hw_table
id|hw_entry
id|hw_table
(braket
)braket
op_assign
(brace
multiline_comment|/*&n; * 0&n; */
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;PAS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;SB&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
id|B
(paren
id|OPT_PAS
)paren
op_or
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;ADLIB&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;GUS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MPU401&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;UART6850&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;PSS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_GUS
)paren
comma
l_int|0
comma
l_string|&quot;GUS16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_GUS
)paren
comma
id|B
(paren
id|OPT_GUS16
)paren
comma
l_string|&quot;GUSMAX&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MSS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;SSCAPE&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;TRIX&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MAD16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;CS4232&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MAUI&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;PNP&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_SB
)paren
comma
id|B
(paren
id|OPT_PAS
)paren
comma
l_string|&quot;SBPRO&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_SB
)paren
op_or
id|B
(paren
id|OPT_SBPRO
)paren
comma
id|B
(paren
id|OPT_PAS
)paren
comma
l_string|&quot;SB16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_SBPRO
)paren
op_or
id|B
(paren
id|OPT_MSS
)paren
op_or
id|B
(paren
id|OPT_MPU401
)paren
comma
l_int|0
comma
l_string|&quot;AEDSP16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|AUDIO_CARDS
comma
l_int|0
comma
l_string|&quot;AUDIO&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_MPU401
)paren
comma
l_int|0
comma
l_string|&quot;MIDI_AUTO&quot;
comma
l_int|0
comma
id|OPT_MIDI
comma
l_int|0
)brace
comma
(brace
id|MIDI_CARDS
comma
l_int|0
comma
l_string|&quot;MIDI&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_ADLIB
)paren
comma
l_int|0
comma
l_string|&quot;YM3812_AUTO&quot;
comma
l_int|0
comma
id|OPT_YM3812
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_PSS
)paren
op_or
id|B
(paren
id|OPT_SB
)paren
op_or
id|B
(paren
id|OPT_PAS
)paren
op_or
id|B
(paren
id|OPT_ADLIB
)paren
op_or
id|B
(paren
id|OPT_MSS
)paren
op_or
id|B
(paren
id|OPT_PSS
)paren
comma
id|B
(paren
id|OPT_YM3812_AUTO
)paren
comma
l_string|&quot;YM3812&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_MIDI
)paren
op_or
id|B
(paren
id|OPT_YM3812
)paren
op_or
id|B
(paren
id|OPT_YM3812_AUTO
)paren
op_or
id|B
(paren
id|OPT_GUS
)paren
comma
l_int|0
comma
l_string|&quot;SEQUENCER&quot;
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
)brace
suffix:semicolon
DECL|variable|questions
r_char
op_star
id|questions
(braket
)braket
op_assign
(brace
l_string|&quot;ProAudioSpectrum 16 support&quot;
comma
l_string|&quot;SoundBlaster support&quot;
comma
l_string|&quot;Generic OPL2/OPL3 FM synthesizer support&quot;
comma
l_string|&quot;Gravis Ultrasound support&quot;
comma
l_string|&quot;MPU-401 support (NOT for SB16)&quot;
comma
l_string|&quot;6850 UART Midi support&quot;
comma
l_string|&quot;PSS (ECHO-ADI2111) support&quot;
comma
l_string|&quot;16 bit sampling option of GUS (_NOT_ GUS MAX)&quot;
comma
l_string|&quot;GUS MAX support&quot;
comma
l_string|&quot;Microsoft Sound System support&quot;
comma
l_string|&quot;Ensoniq Soundscape support&quot;
comma
l_string|&quot;MediaTriX AudioTriX Pro support&quot;
comma
l_string|&quot;Support for MAD16 and/or Mozart based cards&quot;
comma
l_string|&quot;Support for Crystal CS4232 based (PnP) cards&quot;
comma
l_string|&quot;Support for Turtle Beach Wave Front (Maui, Tropez) synthesizers&quot;
comma
l_string|&quot;Support for PnP soundcards (_EXPERIMENTAL_)&quot;
comma
l_string|&quot;SoundBlaster Pro support&quot;
comma
l_string|&quot;SoundBlaster 16 support&quot;
comma
l_string|&quot;Audio Excel DSP 16 initialization support&quot;
comma
l_string|&quot;/dev/dsp and /dev/audio supports (usually required)&quot;
comma
l_string|&quot;This should not be asked&quot;
comma
l_string|&quot;MIDI interface support&quot;
comma
l_string|&quot;This should not be asked&quot;
comma
l_string|&quot;FM synthesizer (YM3812/OPL-3) support&quot;
comma
l_string|&quot;/dev/sequencer support&quot;
comma
l_string|&quot;Is the sky really falling&quot;
)brace
suffix:semicolon
DECL|struct|kludge
r_struct
id|kludge
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|mask
r_int
id|mask
suffix:semicolon
)brace
DECL|variable|extra_options
id|extra_options
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;MPU_EMU&quot;
comma
id|MPU_DEVS
)brace
comma
(brace
l_string|&quot;AD1848&quot;
comma
id|AD1848_DEVS
)brace
comma
(brace
l_int|NULL
comma
l_int|0
)brace
)brace
suffix:semicolon
DECL|variable|old_config_used
r_int
id|old_config_used
op_assign
l_int|0
suffix:semicolon
DECL|variable|selected_options
r_int
r_int
id|selected_options
op_assign
l_int|0
suffix:semicolon
DECL|variable|sb_dma
r_int
id|sb_dma
op_assign
l_int|0
suffix:semicolon
r_void
id|build_defines
(paren
r_void
)paren
suffix:semicolon
macro_line|#include &quot;hex2hex.h&quot;
r_int
id|bin2hex
(paren
r_char
op_star
id|path
comma
r_char
op_star
id|target
comma
r_char
op_star
id|varname
)paren
suffix:semicolon
r_int
DECL|function|can_select_option
id|can_select_option
(paren
r_int
id|nr
)paren
(brace
r_if
c_cond
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|conditions
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|conditions
op_amp
id|selected_options
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|exclusive_options
)paren
r_if
c_cond
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|exclusive_options
op_amp
id|selected_options
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|DISABLED_OPTIONS
op_amp
id|B
(paren
id|nr
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|think_positively
id|think_positively
(paren
r_int
id|def_answ
)paren
(brace
r_char
id|answ
(braket
l_int|512
)braket
suffix:semicolon
r_int
id|len
suffix:semicolon
r_if
c_cond
(paren
(paren
id|len
op_assign
id|read
(paren
l_int|0
comma
id|answ
comma
r_sizeof
(paren
id|answ
)paren
)paren
)paren
OL
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;nERROR! Cannot read stdin&bslash;n&quot;
)paren
suffix:semicolon
id|perror
(paren
l_string|&quot;stdin&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef CONFIGURE_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OL
l_int|2
)paren
multiline_comment|/*&n;&t;&t;&t;&t; * There is an additional LF at the end&n;&t;&t;&t;&t; */
r_return
id|def_answ
suffix:semicolon
id|answ
(braket
id|len
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|answ
comma
l_string|&quot;y&quot;
)paren
op_logical_or
op_logical_neg
id|strcmp
(paren
id|answ
comma
l_string|&quot;Y&quot;
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|ask_value
id|ask_value
(paren
r_char
op_star
id|format
comma
r_int
id|default_answer
)paren
(brace
r_char
id|answ
(braket
l_int|512
)braket
suffix:semicolon
r_int
id|len
comma
id|num
suffix:semicolon
id|play_it_again_Sam
suffix:colon
r_if
c_cond
(paren
(paren
id|len
op_assign
id|read
(paren
l_int|0
comma
id|answ
comma
r_sizeof
(paren
id|answ
)paren
)paren
)paren
OL
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;nERROR! Cannot read stdin&bslash;n&quot;
)paren
suffix:semicolon
id|perror
(paren
l_string|&quot;stdin&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef CONFIGURE_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OL
l_int|2
)paren
multiline_comment|/*&n;&t;&t;&t;&t; * There is an additional LF at the end&n;&t;&t;&t;&t; */
r_return
id|default_answer
suffix:semicolon
id|answ
(braket
id|len
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|sscanf
(paren
id|answ
comma
id|format
comma
op_amp
id|num
)paren
op_ne
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Illegal format. Try again: &quot;
)paren
suffix:semicolon
r_goto
id|play_it_again_Sam
suffix:semicolon
)brace
r_return
id|num
suffix:semicolon
)brace
r_void
DECL|function|rebuild_file
id|rebuild_file
(paren
r_char
op_star
id|line
)paren
(brace
r_char
op_star
id|method
comma
op_star
r_new
comma
op_star
id|old
comma
op_star
id|var
comma
op_star
id|p
suffix:semicolon
id|method
op_assign
id|p
op_assign
id|line
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|old
op_assign
id|p
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
r_new
op_assign
id|p
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|var
op_assign
id|p
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Rebuilding file %s (%s %s)&bslash;n&quot;
comma
r_new
comma
id|method
comma
id|old
)paren
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|method
comma
l_string|&quot;bin2hex&quot;
)paren
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|bin2hex
(paren
id|old
comma
r_new
comma
id|var
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Rebuild failed&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|strcmp
(paren
id|method
comma
l_string|&quot;hex2hex&quot;
)paren
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|hex2hex
(paren
id|old
comma
r_new
comma
id|var
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Rebuild failed&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Failed to build &squot;%s&squot; - unknown method %s&bslash;n&quot;
comma
r_new
comma
id|method
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_int
DECL|function|use_old_config
id|use_old_config
(paren
r_char
op_star
id|filename
)paren
(brace
r_char
id|buf
(braket
l_int|1024
)braket
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
id|FILE
op_star
id|oldf
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Copying old configuration from %s&bslash;n&quot;
comma
id|filename
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|oldf
op_assign
id|fopen
(paren
id|filename
comma
l_string|&quot;r&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Couldn&squot;t open previous configuration file&bslash;n&quot;
)paren
suffix:semicolon
id|perror
(paren
id|filename
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_while
c_loop
(paren
id|fgets
(paren
id|buf
comma
l_int|1024
comma
id|oldf
)paren
op_ne
l_int|NULL
)paren
(brace
r_char
id|tmp
(braket
l_int|100
)braket
suffix:semicolon
r_if
c_cond
(paren
id|buf
(braket
l_int|0
)braket
op_ne
l_char|&squot;#&squot;
)paren
(brace
id|printf
(paren
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|buf
comma
l_int|8
)paren
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;/*build &quot;
)paren
op_eq
l_int|0
)paren
id|rebuild_file
(paren
op_amp
id|buf
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|strncpy
(paren
id|tmp
comma
id|buf
comma
l_int|8
)paren
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;#define &quot;
)paren
op_eq
l_int|0
)paren
(brace
r_char
op_star
id|id
op_assign
op_amp
id|buf
(braket
l_int|8
)braket
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|id
(braket
id|i
)braket
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot; &squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;t&squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;n&squot;
)paren
id|i
op_increment
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|id
comma
id|i
)paren
suffix:semicolon
id|tmp
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;SELECTED_SOUND_OPTIONS&quot;
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Truncate the string */
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;EXCLUDE_&quot;
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
multiline_comment|/* Skip excludes */
id|printf
(paren
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;#undef  &quot;
)paren
op_eq
l_int|0
)paren
(brace
r_char
op_star
id|id
op_assign
op_amp
id|buf
(braket
l_int|8
)braket
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|id
(braket
id|i
)braket
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot; &squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;t&squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;n&squot;
)paren
id|i
op_increment
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|id
comma
id|i
)paren
suffix:semicolon
id|tmp
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Truncate the string */
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;EXCLUDE_&quot;
)paren
op_ne
l_int|0
)paren
r_continue
suffix:semicolon
multiline_comment|/* Not a #undef  EXCLUDE_ line */
id|strncpy
(paren
id|tmp
comma
op_amp
id|id
(braket
l_int|8
)braket
comma
id|i
op_minus
l_int|8
)paren
suffix:semicolon
id|tmp
(braket
id|i
op_minus
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|strcmp
(paren
id|hw_table
(braket
id|i
)braket
dot
id|macro
comma
id|tmp
)paren
op_eq
l_int|0
)paren
(brace
id|selected_options
op_or_assign
(paren
l_int|1
op_lshift
id|i
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_continue
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
)brace
id|fclose
(paren
id|oldf
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
id|printf
(paren
l_string|&quot;#undef  EXCLUDE_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#define EXCLUDE_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|extra_options
(braket
id|i
)braket
dot
id|mask
)paren
id|printf
(paren
l_string|&quot;#undef  EXCLUDE_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#define EXCLUDE_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SELECTED_SOUND_OPTIONS&bslash;t0x%08x&bslash;n&quot;
comma
id|selected_options
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Old configuration copied.&bslash;n&quot;
)paren
suffix:semicolon
id|build_defines
(paren
)paren
suffix:semicolon
id|old_config_used
op_assign
l_int|1
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|build_defines
id|build_defines
(paren
r_void
)paren
(brace
id|FILE
op_star
id|optf
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
(paren
id|optf
op_assign
id|fopen
(paren
l_string|&quot;.defines&quot;
comma
l_string|&quot;w&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|perror
(paren
l_string|&quot;.defines&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
id|fprintf
(paren
id|optf
comma
l_string|&quot;CONFIG_%s=y&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
id|fprintf
(paren
id|optf
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|extra_options
(braket
id|i
)braket
dot
id|mask
)paren
id|fprintf
(paren
id|optf
comma
l_string|&quot;CONFIG_%s=y&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|fprintf
(paren
id|optf
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|fclose
(paren
id|optf
)paren
suffix:semicolon
)brace
r_int
DECL|function|main
id|main
(paren
r_int
id|argc
comma
r_char
op_star
id|argv
(braket
)braket
)paren
(brace
r_int
id|i
comma
id|num
comma
id|def_size
comma
id|full_driver
op_assign
l_int|1
suffix:semicolon
r_char
id|answ
(braket
l_int|10
)braket
suffix:semicolon
r_int
id|sb_base
op_assign
l_int|0
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nConfiguring the sound support&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|argc
OG
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|use_old_config
(paren
id|argv
(braket
l_int|1
)braket
)paren
)paren
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|access
(paren
l_string|&quot;/etc/soundconf&quot;
comma
id|R_OK
)paren
op_eq
l_int|0
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Old configuration exists in /etc/soundconf. Use it (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
r_if
c_cond
(paren
id|use_old_config
(paren
l_string|&quot;/etc/soundconf&quot;
)paren
)paren
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;/*&bslash;tGenerated by configure. Don&squot;t edit!!!!&bslash;t*/&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
(brace
multiline_comment|/*&n;     * Partial driver&n;     */
id|full_driver
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|can_select_option
(paren
id|i
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t; * Not selected yet&n;&t;&t;&t;&t;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|verify
)paren
(brace
r_if
c_cond
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
id|selected_options
op_or_assign
id|B
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
suffix:semicolon
r_else
id|selected_options
op_or_assign
id|B
(paren
id|i
)paren
suffix:semicolon
)brace
r_else
(brace
r_int
id|def_answ
op_assign
id|hw_table
(braket
id|i
)braket
dot
id|default_answ
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
id|def_answ
ques
c_cond
l_string|&quot;  %s (y/n) ? &quot;
suffix:colon
l_string|&quot;  %s (n/y) ? &quot;
comma
id|questions
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
id|def_answ
)paren
)paren
r_if
c_cond
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
id|selected_options
op_or_assign
id|B
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
suffix:semicolon
r_else
id|selected_options
op_or_assign
id|B
(paren
id|i
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SBPRO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the mixer of SG NX Pro ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define __SGNXPRO__&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the MV Jazz16 (ProSonic etc.) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define JAZZ16&bslash;n&quot;
)paren
suffix:semicolon
r_do
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;tValid 16 bit DMA channels for ProSonic/Jazz 16 are&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;t1, 3, 5 (default), 7&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;tEnter 16bit DMA channel for Prosonic : &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
op_logical_and
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;ProSonic 16 bit DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define JAZZ_DMA16 %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you have SoundMan Wave (n/y) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define SM_WAVE&bslash;n&quot;
)paren
suffix:semicolon
id|midi0001_again
suffix:colon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Logitech SoundMan Wave has a microcontroller which must be initialized&bslash;n&quot;
l_string|&quot;before MIDI emulation works. This is possible only if the microcode&bslash;n&quot;
l_string|&quot;file is compiled into the driver.&bslash;n&quot;
l_string|&quot;Do you have access to the MIDI0001.BIN file (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|path
(braket
l_int|512
)braket
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter full name of the MIDI0001.BIN file (pwd is sound): &quot;
)paren
suffix:semicolon
id|scanf
(paren
l_string|&quot;%s&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;including microcode file %s&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bin2hex
(paren
id|path
comma
l_string|&quot;smw-midi0001.h&quot;
comma
l_string|&quot;smw_ucode&quot;
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;couldn&squot;t open %s file&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;try again with correct path? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
r_goto
id|midi0001_again
suffix:semicolon
)brace
r_else
(brace
id|printf
(paren
l_string|&quot;#define SMW_MIDI0001_INCLUDED&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*build bin2hex %s smw-midi0001.h smw_ucode */&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SBPRO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;nThe Logitech SoundMan Games supports 44 kHz in stereo&bslash;n&quot;
l_string|&quot;while the standard SB Pro supports just 22 kHz/stereo&bslash;n&quot;
l_string|&quot;You have an option to enable the SM Games mode.&bslash;n&quot;
l_string|&quot;However do enable it only if you are _sure_ that your&bslash;n&quot;
l_string|&quot;card is a SM Games. Enabling this feature with a&bslash;n&quot;
l_string|&quot;plain old SB Pro _will_ cause troubles with stereo mode.&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;DANGER! Read the above once again before answering &squot;y&squot;&bslash;n&quot;
l_string|&quot;Answer &squot;n&squot; in case you are unsure what to do!&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you have a Logitech SoundMan Games (n/y) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define SM_GAMES&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB16
)paren
)paren
id|selected_options
op_or_assign
id|B
(paren
id|OPT_SBPRO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_AEDSP16
)paren
)paren
(brace
r_int
id|sel1
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SBPRO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the Audio Excel SoundBlaster pro mode ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define AEDSP16_SBPRO&bslash;n&quot;
)paren
suffix:semicolon
id|sel1
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MSS
)paren
)paren
op_logical_and
(paren
id|sel1
op_eq
l_int|0
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the Audio Excel Microsoft Sound System mode? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define AEDSP16_MSS&bslash;n&quot;
)paren
suffix:semicolon
id|sel1
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|sel1
op_eq
l_int|0
)paren
(brace
id|printf
(paren
l_string|&quot;#undef CONFIGURE_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;ERROR!!!!!&bslash;nYou loose: you must select at least one mode when using Audio Excel!&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MPU401
)paren
)paren
id|printf
(paren
l_string|&quot;#define AEDSP16_MPU401&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_PSS
)paren
)paren
(brace
id|genld_again
suffix:colon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;if you wish to emulate the soundblaster and you have a DSPxxx.LD.&bslash;n&quot;
l_string|&quot;then you must include the LD in the kernel.&bslash;n&quot;
l_string|&quot;Do you wish to include a LD (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|path
(braket
l_int|512
)braket
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter the path to your LD file (pwd is sound): &quot;
)paren
suffix:semicolon
id|scanf
(paren
l_string|&quot;%s&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;including LD file %s&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bin2hex
(paren
id|path
comma
l_string|&quot;synth-ld.h&quot;
comma
l_string|&quot;pss_synth&quot;
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;couldn&squot;t open %s as the ld file&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;try again with correct path? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
r_goto
id|genld_again
suffix:semicolon
)brace
r_else
(brace
id|printf
(paren
l_string|&quot;#define PSS_HAVE_LD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*build bin2hex %s synth-ld.h pss_synth */&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|FILE
op_star
id|sf
op_assign
id|fopen
(paren
l_string|&quot;synth-ld.h&quot;
comma
l_string|&quot;w&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;/* automaticaly generated by configure */&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;unsigned char pss_synth[1];&bslash;n&quot;
l_string|&quot;#define pss_synthLen 0&bslash;n&quot;
)paren
suffix:semicolon
id|fclose
(paren
id|sf
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_TRIX
)paren
)paren
(brace
id|hex2hex_again
suffix:colon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MediaTriX audioTriX Pro has a onboard microcontroller&bslash;n&quot;
l_string|&quot;which needs to be initialized by downloading&bslash;n&quot;
l_string|&quot;the code from file TRXPRO.HEX in the DOS driver&bslash;n&quot;
l_string|&quot;directory. If you don&squot;t have the TRXPRO.HEX handy&bslash;n&quot;
l_string|&quot;you may skip this step. However SB and MPU-401&bslash;n&quot;
l_string|&quot;modes of AudioTriX Pro will not work without&bslash;n&quot;
l_string|&quot;this file!&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;Do you want to include TRXPRO.HEX in your kernel (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|path
(braket
l_int|512
)braket
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter the path to your TRXPRO.HEX file (pwd is sound): &quot;
)paren
suffix:semicolon
id|scanf
(paren
l_string|&quot;%s&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;including HEX file %s&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|hex2hex
(paren
id|path
comma
l_string|&quot;trix_boot.h&quot;
comma
l_string|&quot;trix_boot&quot;
)paren
)paren
r_goto
id|hex2hex_again
suffix:semicolon
id|printf
(paren
l_string|&quot;/*build hex2hex %s trix_boot.h trix_boot */&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define INCLUDE_TRIX_BOOT&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|selected_options
op_amp
id|ANY_DEVS
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#undef CONFIGURE_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n*** This combination is useless. Sound driver disabled!!! ***&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_else
id|printf
(paren
l_string|&quot;#define KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
id|printf
(paren
l_string|&quot;#undef  EXCLUDE_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#define EXCLUDE_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|extra_options
(braket
id|i
)braket
dot
id|mask
)paren
id|printf
(paren
l_string|&quot;#undef  EXCLUDE_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#define EXCLUDE_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|build_defines
(paren
)paren
suffix:semicolon
multiline_comment|/*&n;   * IRQ and DMA settings&n;   */
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_AEDSP16
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for Audio Excel DSP 16 ?&bslash;n&quot;
l_string|&quot;Warning:&bslash;n&quot;
l_string|&quot;If you are using Audio Excel SoundBlaster emulation,&bslash;n&quot;
l_string|&quot;you must use the same I/O base for Audio Excel and SoundBlaster.&bslash;n&quot;
l_string|&quot;The factory default is 220 (other possible value is 240)&bslash;n&quot;
l_string|&quot;Enter the Audio Excel DSP 16 I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x220
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Audio Excel DSP 16 I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define AEDSP16_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB
)paren
)paren
op_logical_and
id|selected_options
op_amp
(paren
id|B
(paren
id|OPT_AUDIO
)paren
op_or
id|B
(paren
id|OPT_MIDI
)paren
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for SB?&bslash;n&quot;
l_string|&quot;The factory default is 220&bslash;n&quot;
l_string|&quot;Enter the SB I/O base: &quot;
)paren
suffix:semicolon
id|sb_base
op_assign
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x220
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SB I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SBC_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for SoundBlaster?&bslash;n&quot;
l_string|&quot;The IRQ address is defined by the jumpers on your card.&bslash;n&quot;
l_string|&quot;The factory default is either 5 or 7 (depending on the model).&bslash;n&quot;
l_string|&quot;Valid values are 9(=2), 5, 7 and 10.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|9
op_logical_and
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|10
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|7
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SoundBlaster IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SBC_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
(paren
id|B
(paren
id|OPT_SBPRO
)paren
op_or
id|B
(paren
id|OPT_PAS
)paren
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA channel for SoundBlaster?&bslash;n&quot;
l_string|&quot;For SB 1.0, 1.5 and 2.0 this MUST be 1&bslash;n&quot;
l_string|&quot;SB Pro supports DMA channels 0, 1 and 3 (jumper)&bslash;n&quot;
l_string|&quot;For SB16 give the 8 bit DMA# here&bslash;n&quot;
l_string|&quot;The default value is 1&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
template_param
l_int|3
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|1
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SoundBlaster DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SBC_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|sb_dma
op_assign
id|num
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB16
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n16 bit DMA channel for SoundBlaster 16?&bslash;n&quot;
l_string|&quot;Possible values are 5, 6 or 7&bslash;n&quot;
l_string|&quot;The default value is 6&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|6
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|num
template_param
l_int|7
)paren
op_logical_and
(paren
id|num
op_ne
id|sb_dma
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|6
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SoundBlaster DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SB16_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for SB16 Midi?&bslash;n&quot;
l_string|&quot;Possible values are 300 and 330&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Enter the SB16 Midi I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SB16 Midi I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SB16MIDI_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_PAS
)paren
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
(paren
id|B
(paren
id|OPT_AUDIO
)paren
op_or
id|B
(paren
id|OPT_MIDI
)paren
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for ProAudioSpectrum?&bslash;n&quot;
l_string|&quot;The recommended value is the IRQ used under DOS.&bslash;n&quot;
l_string|&quot;Please refer to the ProAudioSpectrum User&squot;s Guide.&bslash;n&quot;
l_string|&quot;The default value is 10.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
op_logical_or
id|num
op_eq
l_int|2
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t;&t; * Illegal&n;&t;&t;&t;&t;&t;&t;&t;&t; */
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|10
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;ProAudioSpectrum IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PAS_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_AUDIO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA number for ProAudioSpectrum?&bslash;n&quot;
l_string|&quot;The recommended value is the DMA channel under DOS.&bslash;n&quot;
l_string|&quot;Please refer to the ProAudioSpectrum User&squot;s Guide.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|4
op_logical_or
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nProAudioSpectrum DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PAS_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nEnable Joystick port on ProAudioSpectrum (n/y) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define PAS_JOYSTICK_ENABLE&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PAS16 could be noisy with some mother boards&bslash;n&quot;
l_string|&quot;There is a command line switch (was it :T?)&bslash;n&quot;
l_string|&quot;in the DOS driver for PAS16 which solves this.&bslash;n&quot;
l_string|&quot;Don&squot;t enable this feature unless you have problems!&bslash;n&quot;
l_string|&quot;Do you have to use this switch with DOS (y/n) ?&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define BROKEN_BUS_CLOCK&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_GUS
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for Gravis Ultrasound?&bslash;n&quot;
l_string|&quot;Valid choices are 210, 220, 230, 240, 250 or 260&bslash;n&quot;
l_string|&quot;The factory default is 220&bslash;n&quot;
l_string|&quot;Enter the GUS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x220
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|num
OG
l_int|0x260
)paren
op_logical_or
(paren
(paren
id|num
op_amp
l_int|0xf0f
)paren
op_ne
l_int|0x200
)paren
op_logical_or
(paren
(paren
id|num
op_amp
l_int|0x0f0
)paren
OG
l_int|0x060
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|0x220
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB
)paren
)paren
op_logical_and
(paren
id|num
op_eq
id|sb_base
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;FATAL ERROR!!!!!!!!!!!!!!&bslash;n&quot;
l_string|&quot;&bslash;t0x220 cannot be used if SoundBlaster is enabled.&bslash;n&quot;
l_string|&quot;&bslash;tRun the config again.&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef CONFIGURE_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;GUS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for Gravis UltraSound?&bslash;n&quot;
l_string|&quot;The recommended value is the IRQ used under DOS.&bslash;n&quot;
l_string|&quot;Please refer to the Gravis Ultrasound User&squot;s Guide.&bslash;n&quot;
l_string|&quot;The default value is 15.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|15
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
op_logical_or
id|num
op_eq
l_int|2
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t;&t; * Invalid&n;&t;&t;&t;&t;&t;&t;&t; */
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|15
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Gravis UltraSound IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA number for Gravis UltraSound?&bslash;n&quot;
l_string|&quot;The recommended value is the DMA channel under DOS.&bslash;n&quot;
l_string|&quot;Please refer to the Gravis Ultrasound User&squot;s Guide.&bslash;n&quot;
l_string|&quot;The default value is 6&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|6
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|4
op_logical_or
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|6
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nGravis UltraSound DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSecond DMA channel for GUS (optional)?&bslash;n&quot;
l_string|&quot;The default value is 7 (-1 disables)&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
OG
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|7
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nGUS DMA2 set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS_DMA2 %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_GUS16
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for GUS16 (GUS 16 bit sampling option)?&bslash;n&quot;
l_string|&quot;The factory default is 530&bslash;n&quot;
l_string|&quot;Other possible values are  604, E80 or F40&bslash;n&quot;
l_string|&quot;Enter the GUS16 I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x530
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;GUS16 I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS16_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for GUS16?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5, 7, or 9(=2).&bslash;n&quot;
l_string|&quot;The default value is 7.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|7
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;GUS16 IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS16_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA number for GUS16?&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
template_param
l_int|3
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nGUS16 DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define GUS16_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MPU401
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for MPU-401?&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Enter the MPU-401 I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MPU-401 I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MPU_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for MPU-401?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5, 7 and 9(=2).&bslash;n&quot;
l_string|&quot;The default value is 9.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|9
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MPU-401 IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MPU_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MAUI
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for TB Maui (MIDI I/O of TB Tropez)?&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Valid alternatives are 210, 230, 260, 290, 300, 320, 338 and 330&bslash;n&quot;
l_string|&quot;Enter the Maui/Tropez MIDI I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Maui I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAUI_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for TB Maui (TB Tropez MIDI)?&bslash;n&quot;
l_string|&quot;Valid numbers are: 5, 9, 12 and 15.&bslash;n&quot;
l_string|&quot;The default value is 9.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|9
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Maui/Tropez MIDI IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAUI_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_UART6850
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for 6850 UART Midi?&bslash;n&quot;
l_string|&quot;Be carefull. No defaults.&bslash;n&quot;
l_string|&quot;Enter the 6850 UART I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|0
)paren
(brace
multiline_comment|/*&n;&t;     * Invalid value entered&n;&t;   */
id|printf
(paren
l_string|&quot;#define EXCLUDE_UART6850&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;6850 UART I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define U6850_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for 6850 UART?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5, 7 and 9(=2).&bslash;n&quot;
l_string|&quot;The default value is 5.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;6850 UART IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define U6850_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_PSS
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for PSS?&bslash;n&quot;
l_string|&quot;The factory default is 220 (240 also possible)&bslash;n&quot;
l_string|&quot;Enter the PSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x220
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
macro_line|#if YOU_WANT_TO_WASTE_RESOURCES
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for PSS?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5, 7, 9(=2) or 10.&bslash;n&quot;
l_string|&quot;The default value is 10.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|7
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA number for ECHO-PSS?&bslash;n&quot;
l_string|&quot;The default value is 5&bslash;n&quot;
l_string|&quot;Valid values are 5, 6 and 7&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nECHO-PSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
macro_line|#endif
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMSS (MS Sound System) I/O base for the PSS card?&bslash;n&quot;
l_string|&quot;The factory default is 530&bslash;n&quot;
l_string|&quot;Other possible values are  604, E80 or F40&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x530
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PSS/MSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_MSS_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for the MSS mode of PSS ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 7, 9(=2), 10 and 11.&bslash;n&quot;
l_string|&quot;The default value is 11.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|11
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|11
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PSS/MSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_MSS_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMSS DMA number for PSS?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|4
op_logical_or
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nPSS/MSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_MSS_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI I/O base for PSS?&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Enter the PSS MIDI I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PSS/MIDI I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_MPU_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for PSS MIDI?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5, 7 and 9(=2).&bslash;n&quot;
l_string|&quot;The default value is 9.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|9
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PSS MIDI IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define PSS_MPU_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MSS
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nI/O base for MSS (MS Sound System)?&bslash;n&quot;
l_string|&quot;The factory default is 530&bslash;n&quot;
l_string|&quot;Other possible values are  604, E80 or F40&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x530
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MSS_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for MSS?&bslash;n&quot;
l_string|&quot;Valid numbers are: 7, 9(=2), 10 and 11.&bslash;n&quot;
l_string|&quot;The default value is 10.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|7
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MSS_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA number for MSS?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|4
op_logical_or
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MSS_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SSCAPE
)paren
)paren
(brace
r_int
id|reveal_spea
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n(MIDI) I/O base for Ensoniq Soundscape?&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Other possible values are 320, 340 or 350&bslash;n&quot;
l_string|&quot;Enter the Soundscape I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Soundscape I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SSCAPE_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Is your SoundScape card made/marketed by Reveal or Spea? &quot;
)paren
suffix:semicolon
id|reveal_spea
op_assign
id|think_positively
(paren
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|reveal_spea
)paren
id|printf
(paren
l_string|&quot;#define REVEAL_SPEA&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for Soundscape?&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|reveal_spea
)paren
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Check valid interrupts from the manual of your card.&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Valid numbers are: 5, 7, 9(=2) and 10.&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The default value is 9.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|9
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|9
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Soundscape IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SSCAPE_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nDMA number for Soundscape?&bslash;n&quot;
l_string|&quot;Valid values are 1 and 3 (sometimes 0)&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|4
op_logical_or
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSoundscape DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SSCAPE_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMSS (MS Sound System) I/O base for the SSCAPE card?&bslash;n&quot;
l_string|&quot;The factory default is 534&bslash;n&quot;
l_string|&quot;Other possible values are  608, E84 or F44&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x534
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SSCAPE/MSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SSCAPE_MSS_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for the MSS mode of SSCAPE ?&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|reveal_spea
)paren
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Valid numbers are: 5, 7, 9(=2) and 15.&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Valid numbers are: 5, 7, 9(=2) and 10.&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The default value is 5.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|6
op_logical_or
id|num
template_param
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|10
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;SSCAPE/MSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SSCAPE_MSS_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMSS DMA number for SSCAPE?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|4
op_logical_or
id|num
template_param
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSSCAPE/MSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SSCAPE_MSS_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_TRIX
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nWindows Sound System I/O base for the AudioTriX card?&bslash;n&quot;
l_string|&quot;The factory default is 530&bslash;n&quot;
l_string|&quot;Other possible values are  604, E80 or F40&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x530
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;AudioTriX MSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for the WSS mode of AudioTriX ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 5, 7, 9(=2), 10 and 11.&bslash;n&quot;
l_string|&quot;The default value is 11.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|11
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|9
op_logical_and
id|num
op_ne
l_int|10
op_logical_and
id|num
op_ne
l_int|11
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|11
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; AudioTriX WSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nWSS DMA number for AudioTriX?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|0
op_logical_and
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nAudioTriX/WSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSecond (capture) DMA number for AudioTriX?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 0&bslash;n&quot;
l_string|&quot;(-1 disables the second DMA)&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|0
op_logical_and
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
op_logical_or
id|num
op_ne
op_minus
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|0
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nAudioTriX/WSS DMA2 set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_DMA2 %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSoundBlaster I/O address for the AudioTriX card?&bslash;n&quot;
l_string|&quot;The factory default is 220&bslash;n&quot;
l_string|&quot;Other possible values are 200, 210, 230, 240, 250, 260 and 270&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x220
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;AudioTriX SB I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_SB_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for the SB mode of AudioTriX ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5 and 7.&bslash;n&quot;
l_string|&quot;The default value is 7.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|7
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|3
op_logical_and
id|num
op_ne
l_int|4
op_logical_and
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|7
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; AudioTriX SB IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_SB_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSB DMA number for AudioTriX?&bslash;n&quot;
l_string|&quot;Valid values are 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 1&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|1
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nAudioTriX/SB DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_SB_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI (MPU-401) I/O address for the AudioTriX card?&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Other possible values are 330, 370, 3B0 and 3F0&bslash;n&quot;
l_string|&quot;Enter the MPU I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;AudioTriX MIDI I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_MPU_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI IRQ number for the AudioTriX ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 3, 4, 5, 7 and 9(=2).&bslash;n&quot;
l_string|&quot;The default value is 5.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|3
op_logical_and
id|num
op_ne
l_int|4
op_logical_and
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|9
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; AudioTriX MIDI IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define TRIX_MPU_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_CS4232
)paren
)paren
(brace
r_int
id|dma1
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nWindows Sound System I/O base for CS4232?&bslash;n&quot;
l_string|&quot;The factory default is 534&bslash;n&quot;
l_string|&quot;Other possible values are  608, E84 or F44&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x534
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;CS4232 MSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define CS4232_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for the WSS mode of CS4232 ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 5, 7, 9(=2), 11, 12 or 15.&bslash;n&quot;
l_string|&quot;The default value is 11.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|11
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|9
op_logical_and
id|num
op_ne
l_int|11
op_logical_and
id|num
op_ne
l_int|12
op_logical_or
id|num
op_ne
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|11
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; CS4232 WSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define CS4232_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nWSS DMA number for CS4232?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 0&bslash;n&quot;
l_string|&quot;(select the lowes possible one if you want to&bslash;n&quot;
l_string|&quot;use full duplex mode)&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|0
op_logical_and
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|0
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nCS4232/WSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define CS4232_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|dma1
op_assign
id|num
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n Second WSS DMA number for CS4232?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value (-1 disables duplex mode): &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
id|dma1
op_logical_or
(paren
id|num
op_ne
op_minus
l_int|1
op_logical_and
id|num
op_ne
l_int|0
op_logical_and
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nCS4232/WSS DMA2 set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define CS4232_DMA2 %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI (MPU-401) I/O address for the CS4232 card?&bslash;n&quot;
l_string|&quot;The factory default is 330&bslash;n&quot;
l_string|&quot;Other possible values are 330, 370, 3B0 and 3F0&bslash;n&quot;
l_string|&quot;Enter the MPU I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;CS4232 MIDI I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define CS4232_MPU_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI IRQ number for CS4232?&bslash;n&quot;
l_string|&quot;Valid numbers are: 5, 7, 9(=2), 11, 12 or 15.&bslash;n&quot;
l_string|&quot;The default value is 5.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|9
op_logical_and
id|num
op_ne
l_int|11
op_logical_and
id|num
op_ne
l_int|12
op_logical_or
id|num
op_ne
l_int|15
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; CS4232 MIDI IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define CS4232_MPU_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MAD16
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n*** Options for the MAD16 and Mozart based cards ***&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nWindows Sound System I/O base for the MAD16/Mozart card?&bslash;n&quot;
l_string|&quot;The factory default is 530&bslash;n&quot;
l_string|&quot;Other possible values are  604, E80 or F40&bslash;n&quot;
l_string|&quot;(Check which ones are supported by your card!!!!!!)&bslash;n&quot;
l_string|&quot;Enter the MSS I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x530
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MAD16 MSS I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAD16_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|sb_base
op_eq
l_int|0x220
op_logical_and
(paren
id|num
op_eq
l_int|0x530
op_logical_or
id|num
op_eq
l_int|0x480
)paren
)paren
op_logical_or
(paren
id|sb_base
op_eq
l_int|0x240
op_logical_and
(paren
id|num
op_eq
l_int|0xf40
op_logical_or
id|num
op_eq
l_int|0x604
)paren
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;FATAL ERROR!!!!!!!!!!!!!!&bslash;n&quot;
l_string|&quot;&bslash;tThis I/O port selection makes MAD16/Mozart&bslash;n&quot;
l_string|&quot;&bslash;tto use 0x%03x as the SB port.&bslash;n&quot;
l_string|&quot;&bslash;tThis conflicts with the true SB card.&bslash;n&quot;
l_string|&quot;&bslash;tRun the config again and select another I/O base.&bslash;n&quot;
comma
id|sb_base
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef CONFIGURE_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#undef KERNEL_SOUNDCARD&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nIRQ number for the WSS mode of MAD16/Mozart ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 7, 9(=2), 10 and 11.&bslash;n&quot;
l_string|&quot;The default value is 11.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|11
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|9
op_logical_and
id|num
op_ne
l_int|10
op_logical_and
id|num
op_ne
l_int|11
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|11
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; MAD16 WSS IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAD16_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nWSS DMA (playback) number for MAD16/Mozart?&bslash;n&quot;
l_string|&quot;Valid values are 0, 1 and 3.&bslash;n&quot;
l_string|&quot;The default value is 3&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|0
op_logical_and
id|num
op_ne
l_int|1
op_logical_and
id|num
op_ne
l_int|3
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|3
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMAD16/WSS DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAD16_DMA %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|num
op_assign
(paren
id|num
op_eq
l_int|0
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMAD16/Mozart supports full duplex mode if the&bslash;n&quot;
l_string|&quot;card has a suitable codec chip (CS423x or AD1845).&bslash;n&quot;
l_string|&quot;This mode requires another DMA channel (DMA%d)&bslash;n&quot;
l_string|&quot;Do you want to enable this mode? (n/y)&quot;
comma
id|num
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMAD16/WSS capture DMA set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAD16_DMA2 %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
r_else
id|printf
(paren
l_string|&quot;#define MAD16_DMA2 -1&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI (MPU-401/SB) I/O address for the MAD16 card?&bslash;n&quot;
l_string|&quot;(This is the second MIDI port in TB Tropez)&bslash;n&quot;
l_string|&quot;Other possible values are 330, 320, 310 and 300&bslash;n&quot;
l_string|&quot;For 82C928 and Mozart you may use any nonzero value&bslash;n&quot;
l_string|&quot;since the driver ignores this setting.&bslash;n&quot;
l_string|&quot;The factory default is 330 (use 0 to disable)&bslash;n&quot;
l_string|&quot;Enter the MIDI I/O base: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
l_int|0x330
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|0
)paren
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MAD16/Mozart MIDI port disabled&bslash;n&quot;
)paren
suffix:semicolon
r_else
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MAD16 MIDI I/O base set to %03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAD16_MPU_BASE 0x%03x&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nMIDI IRQ number for the MAD16 ?&bslash;n&quot;
l_string|&quot;Valid numbers are: 5, 7, 9(=2) and 10.&bslash;n&quot;
l_string|&quot;The default value is 5.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
l_int|5
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|3
op_logical_and
id|num
op_ne
l_int|4
op_logical_and
id|num
op_ne
l_int|5
op_logical_and
id|num
op_ne
l_int|7
op_logical_and
id|num
op_ne
l_int|9
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
l_int|5
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot; MAD16 MIDI IRQ set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define MAD16_MPU_IRQ %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_AUDIO
)paren
)paren
(brace
id|def_size
op_assign
l_int|65536
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nSelect the DMA buffer size (4096, 16384, 32768 or 65536 bytes)&bslash;n&quot;
l_string|&quot;%d is recommended value for this configuration.&bslash;n&quot;
l_string|&quot;Enter the value: &quot;
comma
id|def_size
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
id|def_size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_ne
l_int|4096
op_logical_and
id|num
op_ne
l_int|16384
op_logical_and
id|num
op_ne
l_int|32768
op_logical_and
id|num
op_ne
l_int|65536
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;*** Illegal input! ***&bslash;n&quot;
)paren
suffix:semicolon
id|num
op_assign
id|def_size
suffix:semicolon
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The DMA buffer size set to %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define DSP_BUFFSIZE %d&bslash;n&quot;
comma
id|num
)paren
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;#define SELECTED_SOUND_OPTIONS&bslash;t0x%08x&bslash;n&quot;
comma
id|selected_options
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The sound driver is now configured.&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#if defined(SCO) || defined(ISC) || defined(SYSV)
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Remember to update the System file&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|old_config_used
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Save this configuration to /etc/soundconf (y/n)&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
id|fclose
(paren
id|stdout
)paren
suffix:semicolon
r_if
c_cond
(paren
id|system
(paren
l_string|&quot;cp local.h /etc/soundconf&quot;
)paren
op_ne
l_int|0
)paren
id|perror
(paren
l_string|&quot;&squot;cp local.h /etc/soundconf&squot;&quot;
)paren
suffix:semicolon
)brace
)brace
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_int
DECL|function|bin2hex
id|bin2hex
(paren
r_char
op_star
id|path
comma
r_char
op_star
id|target
comma
r_char
op_star
id|varname
)paren
(brace
r_int
id|fd
suffix:semicolon
r_int
id|count
suffix:semicolon
r_char
id|c
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|fd
op_assign
id|open
(paren
id|path
comma
l_int|0
)paren
)paren
OG
l_int|0
)paren
(brace
id|FILE
op_star
id|sf
op_assign
id|fopen
(paren
id|target
comma
l_string|&quot;w&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;/* automaticaly generated by configure */&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;static unsigned char %s[] = {&bslash;n&quot;
comma
id|varname
)paren
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|count
op_assign
id|read
(paren
id|fd
comma
op_amp
id|c
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ne
l_int|0
op_logical_and
(paren
id|i
op_mod
l_int|10
)paren
op_eq
l_int|0
)paren
id|fprintf
(paren
id|sf
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;0x%02x,&quot;
comma
id|c
op_amp
l_int|0xFFL
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|fprintf
(paren
id|sf
comma
l_string|&quot;};&bslash;n&quot;
l_string|&quot;#define %sLen %d&bslash;n&quot;
comma
id|varname
comma
id|i
)paren
suffix:semicolon
id|fclose
(paren
id|sf
)paren
suffix:semicolon
id|close
(paren
id|fd
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
eof
