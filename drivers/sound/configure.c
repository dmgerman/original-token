DECL|macro|DISABLED_OPTIONS
mdefine_line|#define DISABLED_OPTIONS &t;(B(OPT_PNP)|B(OPT_AEDSP16))
multiline_comment|/*&n; * sound/configure.c  - Configuration program for the Linux Sound Driver&n; *&n; * Copyright by Hannu Savolainen 1993-1995&n; *&n; * Redistribution and use in source and binary forms, with or without&n; * modification, are permitted provided that the following conditions are&n; * met: 1. Redistributions of source code must retain the above copyright&n; * notice, this list of conditions and the following disclaimer. 2.&n; * Redistributions in binary form must reproduce the above copyright notice,&n; * this list of conditions and the following disclaimer in the documentation&n; * and/or other materials provided with the distribution.&n; *&n; * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&squot;&squot; AND ANY&n; * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED&n; * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE&n; * DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR&n; * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL&n; * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR&n; * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER&n; * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT&n; * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY&n; * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF&n; * SUCH DAMAGE.&n; *&n; */
macro_line|#include &lt;stdio.h&gt;
macro_line|#include &lt;unistd.h&gt;
macro_line|#include &lt;stdlib.h&gt;
DECL|macro|B
mdefine_line|#define B(x)&t;(1 &lt;&lt; (x))
multiline_comment|/*&n; * Option numbers&n; */
DECL|macro|OPT_PAS
mdefine_line|#define OPT_PAS&t;&t;0
DECL|macro|OPT_SB
mdefine_line|#define OPT_SB&t;&t;1
DECL|macro|OPT_ADLIB
mdefine_line|#define OPT_ADLIB&t;2
DECL|macro|OPT_LAST_MUTUAL
mdefine_line|#define OPT_LAST_MUTUAL&t;2
DECL|macro|OPT_GUS
mdefine_line|#define OPT_GUS&t;&t;3
DECL|macro|OPT_MPU401
mdefine_line|#define OPT_MPU401&t;4
DECL|macro|OPT_UART6850
mdefine_line|#define OPT_UART6850&t;5
DECL|macro|OPT_PSS
mdefine_line|#define OPT_PSS&t;&t;6
DECL|macro|OPT_GUS16
mdefine_line|#define OPT_GUS16&t;7
DECL|macro|OPT_GUSMAX
mdefine_line|#define OPT_GUSMAX&t;8
DECL|macro|OPT_MSS
mdefine_line|#define OPT_MSS&t;&t;9
DECL|macro|OPT_SSCAPE
mdefine_line|#define OPT_SSCAPE&t;10
DECL|macro|OPT_TRIX
mdefine_line|#define OPT_TRIX&t;11
DECL|macro|OPT_MAD16
mdefine_line|#define OPT_MAD16&t;12
DECL|macro|OPT_CS4232
mdefine_line|#define OPT_CS4232&t;13
DECL|macro|OPT_MAUI
mdefine_line|#define OPT_MAUI&t;14
DECL|macro|OPT_PNP
mdefine_line|#define OPT_PNP&t;&t;15
DECL|macro|OPT_HIGHLEVEL
mdefine_line|#define OPT_HIGHLEVEL   16&t;/* This must be same than the next one */
DECL|macro|OPT_SBPRO
mdefine_line|#define OPT_SBPRO&t;16
DECL|macro|OPT_SB16
mdefine_line|#define OPT_SB16&t;17
DECL|macro|OPT_AEDSP16
mdefine_line|#define OPT_AEDSP16     18
DECL|macro|OPT_AUDIO
mdefine_line|#define OPT_AUDIO&t;19
DECL|macro|OPT_MIDI_AUTO
mdefine_line|#define OPT_MIDI_AUTO&t;20
DECL|macro|OPT_MIDI
mdefine_line|#define OPT_MIDI&t;21
DECL|macro|OPT_YM3812_AUTO
mdefine_line|#define OPT_YM3812_AUTO&t;22
DECL|macro|OPT_YM3812
mdefine_line|#define OPT_YM3812&t;23
DECL|macro|OPT_SEQUENCER
mdefine_line|#define OPT_SEQUENCER&t;24
DECL|macro|OPT_LAST
mdefine_line|#define OPT_LAST&t;24&t;/* Last defined OPT number */
DECL|macro|DUMMY_OPTS
mdefine_line|#define DUMMY_OPTS (B(OPT_MIDI_AUTO)|B(OPT_YM3812_AUTO))
DECL|macro|ANY_DEVS
mdefine_line|#define ANY_DEVS (B(OPT_AUDIO)|B(OPT_MIDI)|B(OPT_SEQUENCER)|B(OPT_GUS)| &bslash;&n;&t;&t;  B(OPT_MPU401)|B(OPT_PSS)|B(OPT_GUS16)|B(OPT_GUSMAX)| &bslash;&n;&t;&t;  B(OPT_MSS)|B(OPT_SSCAPE)|B(OPT_UART6850)|B(OPT_TRIX)| &bslash;&n;&t;&t;  B(OPT_MAD16)|B(OPT_CS4232)|B(OPT_MAUI))
DECL|macro|AUDIO_CARDS
mdefine_line|#define AUDIO_CARDS (B (OPT_PSS) | B (OPT_SB) | B (OPT_PAS) | B (OPT_GUS) | &bslash;&n;&t;&t;B (OPT_MSS) | B (OPT_GUS16) | B (OPT_GUSMAX) | B (OPT_TRIX) | &bslash;&n;&t;&t;B (OPT_SSCAPE)| B(OPT_MAD16) | B(OPT_CS4232))
DECL|macro|MIDI_CARDS
mdefine_line|#define MIDI_CARDS (B (OPT_PSS) | B (OPT_SB) | B (OPT_PAS) | B (OPT_MPU401) | &bslash;&n;&t;&t;    B (OPT_GUS) | B (OPT_TRIX) | B (OPT_SSCAPE)|B(OPT_MAD16) | &bslash;&n;&t;&t;    B (OPT_CS4232)|B(OPT_MAUI))
DECL|macro|MPU_DEVS
mdefine_line|#define MPU_DEVS (B(OPT_PSS)|B(OPT_SSCAPE)|B(OPT_TRIX)|B(OPT_MAD16)|&bslash;&n;&t;&t;  B(OPT_CS4232)|B(OPT_PNP)|B(OPT_MAUI))
DECL|macro|AD1848_DEVS
mdefine_line|#define AD1848_DEVS (B(OPT_GUS16)|B(OPT_MSS)|B(OPT_PSS)|B(OPT_GUSMAX)|&bslash;&n;&t;&t;     B(OPT_SSCAPE)|B(OPT_TRIX)|B(OPT_MAD16)|B(OPT_CS4232)|&bslash;&n;&t;&t;     B(OPT_PNP))
multiline_comment|/*&n; * Options that have been disabled for some reason (incompletely implemented&n; * and/or tested). Don&squot;t remove from this list before looking at file&n; * experimental.txt for further info.&n; */
r_typedef
r_struct
(brace
DECL|member|conditions
r_int
r_int
id|conditions
suffix:semicolon
DECL|member|exclusive_options
r_int
r_int
id|exclusive_options
suffix:semicolon
DECL|member|macro
r_char
id|macro
(braket
l_int|20
)braket
suffix:semicolon
DECL|member|verify
r_int
id|verify
suffix:semicolon
DECL|member|alias
r_int
id|alias
suffix:semicolon
DECL|member|default_answ
r_int
id|default_answ
suffix:semicolon
)brace
DECL|typedef|hw_entry
id|hw_entry
suffix:semicolon
multiline_comment|/*&n; * The rule table for the driver options. The first field defines a set of&n; * options which must be selected before this entry can be selected. The&n; * second field is a set of options which are not allowed with this one. If&n; * the fourth field is zero, the option is selected without asking&n; * confirmation from the user.&n; *&n; * With this version of the rule table it is possible to select just one type of&n; * hardware.&n; *&n; * NOTE!        Keep the following table and the questions array in sync with the&n; * option numbering!&n; */
DECL|variable|hw_table
id|hw_entry
id|hw_table
(braket
)braket
op_assign
(brace
multiline_comment|/*&n; * 0&n; */
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;PAS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;SB&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
id|B
(paren
id|OPT_PAS
)paren
op_or
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;ADLIB&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;GUS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MPU401&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;UART6850&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;PSS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_GUS
)paren
comma
l_int|0
comma
l_string|&quot;GUS16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_GUS
)paren
comma
id|B
(paren
id|OPT_GUS16
)paren
comma
l_string|&quot;GUSMAX&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MSS&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;SSCAPE&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;TRIX&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MAD16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;CS4232&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;MAUI&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_string|&quot;PNP&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_SB
)paren
comma
id|B
(paren
id|OPT_PAS
)paren
comma
l_string|&quot;SBPRO&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_SB
)paren
op_or
id|B
(paren
id|OPT_SBPRO
)paren
comma
id|B
(paren
id|OPT_PAS
)paren
comma
l_string|&quot;SB16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_SBPRO
)paren
op_or
id|B
(paren
id|OPT_MSS
)paren
op_or
id|B
(paren
id|OPT_MPU401
)paren
comma
l_int|0
comma
l_string|&quot;AEDSP16&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
id|AUDIO_CARDS
comma
l_int|0
comma
l_string|&quot;AUDIO&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_MPU401
)paren
op_or
id|B
(paren
id|OPT_MAUI
)paren
comma
l_int|0
comma
l_string|&quot;MIDI_AUTO&quot;
comma
l_int|0
comma
id|OPT_MIDI
comma
l_int|0
)brace
comma
(brace
id|MIDI_CARDS
comma
l_int|0
comma
l_string|&quot;MIDI&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_ADLIB
)paren
comma
l_int|0
comma
l_string|&quot;YM3812_AUTO&quot;
comma
l_int|0
comma
id|OPT_YM3812
comma
l_int|0
)brace
comma
(brace
id|B
(paren
id|OPT_PSS
)paren
op_or
id|B
(paren
id|OPT_SB
)paren
op_or
id|B
(paren
id|OPT_PAS
)paren
op_or
id|B
(paren
id|OPT_ADLIB
)paren
op_or
id|B
(paren
id|OPT_MSS
)paren
op_or
id|B
(paren
id|OPT_PSS
)paren
comma
id|B
(paren
id|OPT_YM3812_AUTO
)paren
comma
l_string|&quot;YM3812&quot;
comma
l_int|1
comma
l_int|0
comma
l_int|1
)brace
comma
(brace
id|B
(paren
id|OPT_MIDI
)paren
op_or
id|B
(paren
id|OPT_YM3812
)paren
op_or
id|B
(paren
id|OPT_YM3812_AUTO
)paren
op_or
id|B
(paren
id|OPT_GUS
)paren
comma
l_int|0
comma
l_string|&quot;SEQUENCER&quot;
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
)brace
suffix:semicolon
DECL|variable|questions
r_char
op_star
id|questions
(braket
)braket
op_assign
(brace
l_string|&quot;ProAudioSpectrum 16 support&quot;
comma
l_string|&quot;SoundBlaster support&quot;
comma
l_string|&quot;Generic OPL2/OPL3 FM synthesizer support&quot;
comma
l_string|&quot;Gravis Ultrasound support&quot;
comma
l_string|&quot;MPU-401 support (NOT for SB16)&quot;
comma
l_string|&quot;6850 UART Midi support&quot;
comma
l_string|&quot;PSS (ECHO-ADI2111) support&quot;
comma
l_string|&quot;16 bit sampling option of GUS (_NOT_ GUS MAX)&quot;
comma
l_string|&quot;GUS MAX support&quot;
comma
l_string|&quot;Microsoft Sound System support&quot;
comma
l_string|&quot;Ensoniq Soundscape support&quot;
comma
l_string|&quot;MediaTriX AudioTriX Pro support&quot;
comma
l_string|&quot;Support for MAD16 and/or Mozart based cards&quot;
comma
l_string|&quot;Support for Crystal CS4232 based (PnP) cards&quot;
comma
l_string|&quot;Support for Turtle Beach Wave Front (Maui, Tropez) synthesizers&quot;
comma
l_string|&quot;Support for PnP soundcards (_EXPERIMENTAL_)&quot;
comma
l_string|&quot;SoundBlaster Pro support&quot;
comma
l_string|&quot;SoundBlaster 16 support&quot;
comma
l_string|&quot;Audio Excel DSP 16 initialization support&quot;
comma
l_string|&quot;/dev/dsp and /dev/audio supports (usually required)&quot;
comma
l_string|&quot;This should not be asked&quot;
comma
l_string|&quot;MIDI interface support&quot;
comma
l_string|&quot;This should not be asked&quot;
comma
l_string|&quot;FM synthesizer (YM3812/OPL-3) support&quot;
comma
l_string|&quot;/dev/sequencer support&quot;
comma
l_string|&quot;Is the sky really falling&quot;
)brace
suffix:semicolon
DECL|struct|kludge
r_struct
id|kludge
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|member|mask
r_int
id|mask
suffix:semicolon
)brace
DECL|variable|extra_options
id|extra_options
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;MPU_EMU&quot;
comma
id|MPU_DEVS
)brace
comma
(brace
l_string|&quot;AD1848&quot;
comma
id|AD1848_DEVS
)brace
comma
(brace
l_int|NULL
comma
l_int|0
)brace
)brace
suffix:semicolon
DECL|variable|oldconf
r_char
op_star
id|oldconf
op_assign
l_string|&quot;/etc/soundconf&quot;
suffix:semicolon
DECL|variable|old_config_used
r_int
id|old_config_used
op_assign
l_int|0
suffix:semicolon
DECL|variable|def_size
DECL|variable|sb_base
r_int
id|def_size
comma
id|sb_base
op_assign
l_int|0
suffix:semicolon
DECL|variable|selected_options
r_int
r_int
id|selected_options
op_assign
l_int|0
suffix:semicolon
DECL|variable|sb_dma
r_int
id|sb_dma
op_assign
l_int|0
suffix:semicolon
DECL|variable|dump_only
r_int
id|dump_only
op_assign
l_int|0
suffix:semicolon
r_void
id|build_defines
(paren
r_void
)paren
suffix:semicolon
macro_line|#include &quot;hex2hex.h&quot;
r_int
id|bin2hex
(paren
r_char
op_star
id|path
comma
r_char
op_star
id|target
comma
r_char
op_star
id|varname
)paren
suffix:semicolon
r_int
DECL|function|can_select_option
id|can_select_option
(paren
r_int
id|nr
)paren
(brace
r_if
c_cond
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|conditions
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|conditions
op_amp
id|selected_options
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|exclusive_options
)paren
r_if
c_cond
(paren
id|hw_table
(braket
id|nr
)braket
dot
id|exclusive_options
op_amp
id|selected_options
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|DISABLED_OPTIONS
op_amp
id|B
(paren
id|nr
)paren
)paren
r_return
l_int|0
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_int
DECL|function|think_positively
id|think_positively
(paren
r_int
id|def_answ
)paren
(brace
r_char
id|answ
(braket
l_int|512
)braket
suffix:semicolon
r_int
id|len
suffix:semicolon
r_if
c_cond
(paren
(paren
id|len
op_assign
id|read
(paren
l_int|0
comma
id|answ
comma
r_sizeof
(paren
id|answ
)paren
)paren
)paren
OL
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;nERROR! Cannot read stdin&bslash;n&quot;
)paren
suffix:semicolon
id|perror
(paren
l_string|&quot;stdin&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;invalid_configuration__run_make_config_again&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OL
l_int|2
)paren
multiline_comment|/*&n;&t;&t;&t;&t; * There is an additional LF at the end&n;&t;&t;&t;&t; */
r_return
id|def_answ
suffix:semicolon
id|answ
(braket
id|len
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
(paren
id|answ
comma
l_string|&quot;y&quot;
)paren
op_logical_or
op_logical_neg
id|strcmp
(paren
id|answ
comma
l_string|&quot;Y&quot;
)paren
)paren
r_return
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|ask_value
id|ask_value
(paren
r_char
op_star
id|format
comma
r_int
id|default_answer
)paren
(brace
r_char
id|answ
(braket
l_int|512
)braket
suffix:semicolon
r_int
id|len
comma
id|num
suffix:semicolon
id|play_it_again_Sam
suffix:colon
r_if
c_cond
(paren
(paren
id|len
op_assign
id|read
(paren
l_int|0
comma
id|answ
comma
r_sizeof
(paren
id|answ
)paren
)paren
)paren
OL
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;nERROR! Cannot read stdin&bslash;n&quot;
)paren
suffix:semicolon
id|perror
(paren
l_string|&quot;stdin&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;invalid_configuration__run_make_config_again&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OL
l_int|2
)paren
multiline_comment|/*&n;&t;&t;&t;&t; * There is an additional LF at the end&n;&t;&t;&t;&t; */
r_return
id|default_answer
suffix:semicolon
id|answ
(braket
id|len
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|sscanf
(paren
id|answ
comma
id|format
comma
op_amp
id|num
)paren
op_ne
l_int|1
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Illegal format. Try again: &quot;
)paren
suffix:semicolon
r_goto
id|play_it_again_Sam
suffix:semicolon
)brace
r_return
id|num
suffix:semicolon
)brace
DECL|macro|FMT_HEX
mdefine_line|#define FMT_HEX 1
DECL|macro|FMT_INT
mdefine_line|#define FMT_INT 2
r_void
DECL|function|ask_int_choice
id|ask_int_choice
(paren
r_int
id|mask
comma
r_char
op_star
id|macro
comma
r_char
op_star
id|question
comma
r_int
id|format
comma
r_int
id|defa
comma
r_char
op_star
id|choices
)paren
(brace
r_int
id|num
comma
id|i
suffix:semicolon
r_if
c_cond
(paren
id|dump_only
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|mask
op_eq
id|B
(paren
id|i
)paren
)paren
(brace
r_int
id|j
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|strlen
(paren
id|choices
)paren
suffix:semicolon
id|j
op_increment
)paren
r_if
c_cond
(paren
id|choices
(braket
id|j
)braket
op_eq
l_char|&squot;&bslash;&squot;&squot;
)paren
id|choices
(braket
id|j
)braket
op_assign
l_char|&squot;_&squot;
suffix:semicolon
id|printf
(paren
l_string|&quot;&bslash;nif [ &bslash;&quot;$CONFIG_%s&bslash;&quot; = &bslash;&quot;y&bslash;&quot; ]; then&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
r_if
c_cond
(paren
id|format
op_eq
id|FMT_INT
)paren
id|printf
(paren
l_string|&quot;int &squot;%s %s&squot; %s %d&bslash;n&quot;
comma
id|question
comma
id|choices
comma
id|macro
comma
id|defa
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;hex &squot;%s %s&squot; %s %x&bslash;n&quot;
comma
id|question
comma
id|choices
comma
id|macro
comma
id|defa
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;fi&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|mask
op_amp
id|selected_options
)paren
)paren
r_return
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n%s&bslash;n&quot;
comma
id|question
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Possible values are: %s&bslash;n&quot;
comma
id|choices
)paren
suffix:semicolon
r_if
c_cond
(paren
id|format
op_eq
id|FMT_INT
)paren
(brace
r_if
c_cond
(paren
id|defa
op_eq
op_minus
l_int|1
)paren
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;t(-1 disables this feature)&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The default value is %d&bslash;n&quot;
comma
id|defa
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%d&quot;
comma
id|defa
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
op_minus
l_int|1
)paren
r_return
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;%s set to %d.&bslash;n&quot;
comma
id|question
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define %s %d&bslash;n&quot;
comma
id|macro
comma
id|num
)paren
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|defa
op_eq
l_int|0
)paren
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;t(0 disables this feature)&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The default value is %x&bslash;n&quot;
comma
id|defa
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter the value: &quot;
)paren
suffix:semicolon
id|num
op_assign
id|ask_value
(paren
l_string|&quot;%x&quot;
comma
id|defa
)paren
suffix:semicolon
r_if
c_cond
(paren
id|num
op_eq
l_int|0
)paren
r_return
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;%s set to %x.&bslash;n&quot;
comma
id|question
comma
id|num
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define %s 0x%x&bslash;n&quot;
comma
id|macro
comma
id|num
)paren
suffix:semicolon
)brace
)brace
)brace
r_void
DECL|function|rebuild_file
id|rebuild_file
(paren
r_char
op_star
id|line
)paren
(brace
r_char
op_star
id|method
comma
op_star
r_new
comma
op_star
id|old
comma
op_star
id|var
comma
op_star
id|p
suffix:semicolon
id|method
op_assign
id|p
op_assign
id|line
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|old
op_assign
id|p
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
r_new
op_assign
id|p
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|var
op_assign
id|p
suffix:semicolon
r_while
c_loop
(paren
op_star
id|p
op_logical_and
op_star
id|p
op_ne
l_char|&squot; &squot;
)paren
id|p
op_increment
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Rebuilding file %s (%s %s)&bslash;n&quot;
comma
r_new
comma
id|method
comma
id|old
)paren
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|method
comma
l_string|&quot;bin2hex&quot;
)paren
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|bin2hex
(paren
id|old
comma
r_new
comma
id|var
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Rebuild failed&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|strcmp
(paren
id|method
comma
l_string|&quot;hex2hex&quot;
)paren
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|hex2hex
(paren
id|old
comma
r_new
comma
id|var
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Rebuild failed&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Failed to build &squot;%s&squot; - unknown method %s&bslash;n&quot;
comma
r_new
comma
id|method
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
)brace
r_int
DECL|function|use_old_config
id|use_old_config
(paren
r_char
op_star
id|filename
)paren
(brace
r_char
id|buf
(braket
l_int|1024
)braket
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
id|FILE
op_star
id|oldf
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Copying old configuration from %s&bslash;n&quot;
comma
id|filename
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|oldf
op_assign
id|fopen
(paren
id|filename
comma
l_string|&quot;r&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Couldn&squot;t open previous configuration file&bslash;n&quot;
)paren
suffix:semicolon
id|perror
(paren
id|filename
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_while
c_loop
(paren
id|fgets
(paren
id|buf
comma
l_int|1024
comma
id|oldf
)paren
op_ne
l_int|NULL
)paren
(brace
r_char
id|tmp
(braket
l_int|100
)braket
suffix:semicolon
r_if
c_cond
(paren
id|buf
(braket
l_int|0
)braket
op_ne
l_char|&squot;#&squot;
)paren
(brace
id|printf
(paren
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|buf
comma
l_int|8
)paren
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;/*build &quot;
)paren
op_eq
l_int|0
)paren
id|rebuild_file
(paren
op_amp
id|buf
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|strncpy
(paren
id|tmp
comma
id|buf
comma
l_int|8
)paren
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;#define &quot;
)paren
op_eq
l_int|0
)paren
(brace
r_char
op_star
id|id
op_assign
op_amp
id|buf
(braket
l_int|8
)braket
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|id
(braket
id|i
)braket
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot; &squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;t&squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;n&squot;
)paren
id|i
op_increment
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|id
comma
id|i
)paren
suffix:semicolon
id|tmp
(braket
id|i
)braket
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;SELECTED_SOUND_OPTIONS&quot;
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;KERNEL_SOUNDCARD&quot;
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Truncate the string */
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;EXCLUDE_&quot;
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
multiline_comment|/* Skip excludes */
id|strncpy
(paren
id|tmp
comma
id|id
comma
id|i
)paren
suffix:semicolon
id|tmp
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Truncate the string */
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;CONFIG_&quot;
)paren
op_eq
l_int|0
)paren
(brace
id|strncpy
(paren
id|tmp
comma
op_amp
id|id
(braket
l_int|7
)braket
comma
id|i
op_minus
l_int|7
)paren
suffix:semicolon
id|tmp
(braket
id|i
op_minus
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|strcmp
(paren
id|hw_table
(braket
id|i
)braket
dot
id|macro
comma
id|tmp
)paren
op_eq
l_int|0
)paren
(brace
id|selected_options
op_or_assign
(paren
l_int|1
op_lshift
id|i
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_continue
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;#undef  &quot;
)paren
op_eq
l_int|0
)paren
(brace
r_char
op_star
id|id
op_assign
op_amp
id|buf
(braket
l_int|8
)braket
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|id
(braket
id|i
)braket
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot; &squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;t&squot;
op_logical_and
id|id
(braket
id|i
)braket
op_ne
l_char|&squot;&bslash;n&squot;
)paren
id|i
op_increment
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|id
comma
id|i
)paren
suffix:semicolon
id|tmp
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Truncate the string */
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;CONFIG_&quot;
)paren
op_eq
l_int|0
)paren
r_continue
suffix:semicolon
id|strncpy
(paren
id|tmp
comma
id|id
comma
id|i
)paren
suffix:semicolon
id|tmp
(braket
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Truncate the string */
r_if
c_cond
(paren
id|strcmp
(paren
id|tmp
comma
l_string|&quot;EXCLUDE_&quot;
)paren
op_ne
l_int|0
)paren
r_continue
suffix:semicolon
multiline_comment|/* Not a #undef  EXCLUDE_ line */
id|strncpy
(paren
id|tmp
comma
op_amp
id|id
(braket
l_int|8
)braket
comma
id|i
op_minus
l_int|8
)paren
suffix:semicolon
id|tmp
(braket
id|i
op_minus
l_int|8
)braket
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|strcmp
(paren
id|hw_table
(braket
id|i
)braket
dot
id|macro
comma
id|tmp
)paren
op_eq
l_int|0
)paren
(brace
id|selected_options
op_or_assign
(paren
l_int|1
op_lshift
id|i
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_continue
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;%s&quot;
comma
id|buf
)paren
suffix:semicolon
)brace
id|fclose
(paren
id|oldf
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
id|printf
(paren
l_string|&quot;#define CONFIG_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#undef  CONFIG_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|extra_options
(braket
id|i
)braket
dot
id|mask
)paren
id|printf
(paren
l_string|&quot;#define CONFIG_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#undef  CONFIG_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SELECTED_SOUND_OPTIONS&bslash;t0x%08x&bslash;n&quot;
comma
id|selected_options
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Old configuration copied.&bslash;n&quot;
)paren
suffix:semicolon
id|build_defines
(paren
)paren
suffix:semicolon
id|old_config_used
op_assign
l_int|1
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_void
DECL|function|build_defines
id|build_defines
(paren
r_void
)paren
(brace
id|FILE
op_star
id|optf
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
(paren
id|optf
op_assign
id|fopen
(paren
l_string|&quot;.defines&quot;
comma
l_string|&quot;w&quot;
)paren
)paren
op_eq
l_int|NULL
)paren
(brace
id|perror
(paren
l_string|&quot;.defines&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
id|fprintf
(paren
id|optf
comma
l_string|&quot;CONFIG_%s=y&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
id|fprintf
(paren
id|optf
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|extra_options
(braket
id|i
)braket
dot
id|mask
)paren
id|fprintf
(paren
id|optf
comma
l_string|&quot;CONFIG_%s=y&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|fprintf
(paren
id|optf
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|fclose
(paren
id|optf
)paren
suffix:semicolon
)brace
r_void
DECL|function|ask_parameters
id|ask_parameters
(paren
r_void
)paren
(brace
r_int
id|num
suffix:semicolon
id|build_defines
(paren
)paren
suffix:semicolon
multiline_comment|/*&n;   * IRQ and DMA settings&n;   */
id|ask_int_choice
(paren
id|B
(paren
id|OPT_AEDSP16
)paren
comma
l_string|&quot;AEDSP16_BASE&quot;
comma
l_string|&quot;I/O base for Audio Excel DSP 16&quot;
comma
id|FMT_HEX
comma
l_int|0x220
comma
l_string|&quot;220 or 240&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;SBC_BASE&quot;
comma
l_string|&quot;I/O base for SB&quot;
comma
id|FMT_HEX
comma
l_int|0x220
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;SBC_IRQ&quot;
comma
l_string|&quot;SoundBlaster IRQ&quot;
comma
id|FMT_INT
comma
l_int|7
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;SBC_DMA&quot;
comma
l_string|&quot;SoundBlaster DMA&quot;
comma
id|FMT_INT
comma
l_int|1
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;SB_DMA2&quot;
comma
l_string|&quot;SoundBlaster 16 bit DMA (if required)&quot;
comma
id|FMT_INT
comma
op_minus
l_int|1
comma
l_string|&quot;5, 6 or 7&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;SB_MPU_BASE&quot;
comma
l_string|&quot;MPU401 I/O base of SB16, Jazz16 and ES1688&quot;
comma
id|FMT_HEX
comma
l_int|0
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SB
)paren
comma
l_string|&quot;SB_MPU_IRQ&quot;
comma
l_string|&quot;SB MPU401 IRQ (SB16, Jazz16 and ES1688)&quot;
comma
id|FMT_INT
comma
op_minus
l_int|1
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PAS
)paren
comma
l_string|&quot;PAS_IRQ&quot;
comma
l_string|&quot;PAS16 IRQ&quot;
comma
id|FMT_INT
comma
l_int|10
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PAS
)paren
comma
l_string|&quot;PAS_DMA&quot;
comma
l_string|&quot;PAS16 DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_PAS
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nEnable Joystick port on ProAudioSpectrum (n/y) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define PAS_JOYSTICK_ENABLE&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;PAS16 could be noisy with some mother boards&bslash;n&quot;
l_string|&quot;There is a command line switch (was it :T?)&bslash;n&quot;
l_string|&quot;in the DOS driver for PAS16 which solves this.&bslash;n&quot;
l_string|&quot;Don&squot;t enable this feature unless you have problems!&bslash;n&quot;
l_string|&quot;Do you have to use this switch with DOS (y/n) ?&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define BROKEN_BUS_CLOCK&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS
)paren
comma
l_string|&quot;GUS_BASE&quot;
comma
l_string|&quot;I/O base for Gravis UltraSound (GUS)&quot;
comma
id|FMT_HEX
comma
l_int|0x220
comma
l_string|&quot;210, 220, 230, 240, 250 or 260&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS
)paren
comma
l_string|&quot;GUS_IRQ&quot;
comma
l_string|&quot;GUS IRQ&quot;
comma
id|FMT_INT
comma
l_int|15
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS
)paren
comma
l_string|&quot;GUS_DMA&quot;
comma
l_string|&quot;GUS DMA&quot;
comma
id|FMT_INT
comma
l_int|6
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS
)paren
comma
l_string|&quot;GUS_DMA2&quot;
comma
l_string|&quot;Second DMA channel for GUS&quot;
comma
id|FMT_INT
comma
op_minus
l_int|1
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS16
)paren
comma
l_string|&quot;GUS16_BASE&quot;
comma
l_string|&quot;I/O base for the 16 bit daughtercard of GUS&quot;
comma
id|FMT_HEX
comma
l_int|0x530
comma
l_string|&quot;530, 604, E80 or F40&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS16
)paren
comma
l_string|&quot;GUS16_IRQ&quot;
comma
l_string|&quot;GUS 16 bit daughtercard IRQ&quot;
comma
id|FMT_INT
comma
l_int|7
comma
l_string|&quot;3, 4, 5, 7, or 9&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_GUS16
)paren
comma
l_string|&quot;GUS16_DMA&quot;
comma
l_string|&quot;GUS DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MPU401
)paren
comma
l_string|&quot;MPU_BASE&quot;
comma
l_string|&quot;I/O base for MPU401&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MPU401
)paren
comma
l_string|&quot;MPU_IRQ&quot;
comma
l_string|&quot;MPU401 IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAUI
)paren
comma
l_string|&quot;MAUI_BASE&quot;
comma
l_string|&quot;I/O base for Maui&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;210, 230, 260, 290, 300, 320, 338 or 330&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAUI
)paren
comma
l_string|&quot;MAUI_IRQ&quot;
comma
l_string|&quot;Maui IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;5, 9, 12 or 15&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_UART6850
)paren
comma
l_string|&quot;U6850_BASE&quot;
comma
l_string|&quot;I/O base for UART 6850 MIDI port&quot;
comma
id|FMT_HEX
comma
l_int|0
comma
l_string|&quot;(Unknown)&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_UART6850
)paren
comma
l_string|&quot;U6850_IRQ&quot;
comma
l_string|&quot;UART6850 IRQ&quot;
comma
id|FMT_INT
comma
op_minus
l_int|1
comma
l_string|&quot;(Unknown)&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PSS
)paren
comma
l_string|&quot;PSS_BASE&quot;
comma
l_string|&quot;PSS I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x220
comma
l_string|&quot;220 or 240&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PSS
)paren
comma
l_string|&quot;PSS_MSS_BASE&quot;
comma
l_string|&quot;PSS audio I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x530
comma
l_string|&quot;530, 604, E80 or F40&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PSS
)paren
comma
l_string|&quot;PSS_MSS_IRQ&quot;
comma
l_string|&quot;PSS audio IRQ&quot;
comma
id|FMT_INT
comma
l_int|11
comma
l_string|&quot;7, 9, 10 or 11&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PSS
)paren
comma
l_string|&quot;PSS_MSS_DMA&quot;
comma
l_string|&quot;PSS audio DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PSS
)paren
comma
l_string|&quot;PSS_MPU_BASE&quot;
comma
l_string|&quot;PSS MIDI I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_PSS
)paren
comma
l_string|&quot;PSS_MPU_IRQ&quot;
comma
l_string|&quot;PSS MIDI IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;3, 4, 5, 7 or 9&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MSS
)paren
comma
l_string|&quot;MSS_BASE&quot;
comma
l_string|&quot;MSS/WSS I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x530
comma
l_string|&quot;530, 604, E80 or F40&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MSS
)paren
comma
l_string|&quot;MSS_IRQ&quot;
comma
l_string|&quot;MSS/WSS IRQ&quot;
comma
id|FMT_INT
comma
l_int|11
comma
l_string|&quot;7, 9, 10 or 11&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MSS
)paren
comma
l_string|&quot;MSS_DMA&quot;
comma
l_string|&quot;MSS/WSS DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SSCAPE
)paren
comma
l_string|&quot;SSCAPE_BASE&quot;
comma
l_string|&quot;Soundscape MIDI I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SSCAPE
)paren
comma
l_string|&quot;SSCAPE_IRQ&quot;
comma
l_string|&quot;Soundscape MIDI IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SSCAPE
)paren
comma
l_string|&quot;SSCAPE_DMA&quot;
comma
l_string|&quot;Soundscape initialization DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SSCAPE
)paren
comma
l_string|&quot;SSCAPE_MSS_BASE&quot;
comma
l_string|&quot;Soundscape audio I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x534
comma
l_string|&quot;534, 608, E84 or F44&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SSCAPE
)paren
comma
l_string|&quot;SSCAPE_MSS_IRQ&quot;
comma
l_string|&quot;Soundscape audio IRQ&quot;
comma
id|FMT_INT
comma
l_int|11
comma
l_string|&quot;7, 9, 10 or 11&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_SSCAPE
)paren
comma
l_string|&quot;SSCAPE_MSS_DMA&quot;
comma
l_string|&quot;Soundscape audio DMA&quot;
comma
id|FMT_INT
comma
l_int|0
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SSCAPE
)paren
)paren
(brace
r_int
id|reveal_spea
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Is your SoundScape card made/marketed by Reveal or Spea? &quot;
)paren
suffix:semicolon
id|reveal_spea
op_assign
id|think_positively
(paren
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|reveal_spea
)paren
id|printf
(paren
l_string|&quot;#define REVEAL_SPEA&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_BASE&quot;
comma
l_string|&quot;AudioTriX audio I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x530
comma
l_string|&quot;530, 604, E80 or F40&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_IRQ&quot;
comma
l_string|&quot;AudioTriX audio IRQ&quot;
comma
id|FMT_INT
comma
l_int|11
comma
l_string|&quot;7, 9, 10 or 11&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_DMA&quot;
comma
l_string|&quot;AudioTriX audio DMA&quot;
comma
id|FMT_INT
comma
l_int|0
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_DMA2&quot;
comma
l_string|&quot;AudioTriX second (duplex) DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_MPU_BASE&quot;
comma
l_string|&quot;AudioTriX MIDI I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;330, 370, 3B0 or 3F0&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_MPU_IRQ&quot;
comma
l_string|&quot;AudioTriX MIDI IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;3, 4, 5, 7 or 9&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_SB_BASE&quot;
comma
l_string|&quot;AudioTriX SB I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x220
comma
l_string|&quot;220, 210, 230, 240, 250, 260 or 270&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_SB_IRQ&quot;
comma
l_string|&quot;AudioTriX SB IRQ&quot;
comma
id|FMT_INT
comma
l_int|7
comma
l_string|&quot;3, 4, 5 or 7&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_TRIX
)paren
comma
l_string|&quot;TRIX_SB_DMA&quot;
comma
l_string|&quot;AudioTriX SB DMA&quot;
comma
id|FMT_INT
comma
l_int|1
comma
l_string|&quot;1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_CS4232
)paren
comma
l_string|&quot;CS4232_BASE&quot;
comma
l_string|&quot;CS4232 audio I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x530
comma
l_string|&quot;530, 604, E80 or F40&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_CS4232
)paren
comma
l_string|&quot;CS4232_IRQ&quot;
comma
l_string|&quot;CS4232 audio IRQ&quot;
comma
id|FMT_INT
comma
l_int|11
comma
l_string|&quot;5, 7, 9, 11, 12 or 15&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_CS4232
)paren
comma
l_string|&quot;CS4232_DMA&quot;
comma
l_string|&quot;CS4232 audio DMA&quot;
comma
id|FMT_INT
comma
l_int|0
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_CS4232
)paren
comma
l_string|&quot;CS4232_DMA2&quot;
comma
l_string|&quot;CS4232 second (duplex) DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_CS4232
)paren
comma
l_string|&quot;CS4232_MPU_BASE&quot;
comma
l_string|&quot;CS4232 MIDI I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;330, 370, 3B0 or 3F0&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_CS4232
)paren
comma
l_string|&quot;CS4232_MPU_IRQ&quot;
comma
l_string|&quot;CS4232 MIDI IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;5, 7, 9, 11, 12 or 15&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAD16
)paren
comma
l_string|&quot;MAD16_BASE&quot;
comma
l_string|&quot;MAD16 audio I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x530
comma
l_string|&quot;530, 604, E80 or F40&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAD16
)paren
comma
l_string|&quot;MAD16_IRQ&quot;
comma
l_string|&quot;MAD16 audio IRQ&quot;
comma
id|FMT_INT
comma
l_int|11
comma
l_string|&quot;7, 9, 10 or 11&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAD16
)paren
comma
l_string|&quot;MAD16_DMA&quot;
comma
l_string|&quot;MAD16 audio DMA&quot;
comma
id|FMT_INT
comma
l_int|3
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAD16
)paren
comma
l_string|&quot;MAD16_DMA2&quot;
comma
l_string|&quot;MAD16 second (duplex) DMA&quot;
comma
id|FMT_INT
comma
l_int|0
comma
l_string|&quot;0, 1 or 3&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAD16
)paren
comma
l_string|&quot;MAD16_MPU_BASE&quot;
comma
l_string|&quot;MAD16 MIDI I/O base&quot;
comma
id|FMT_HEX
comma
l_int|0x330
comma
l_string|&quot;300, 310, 320 or 330 (0 disables)&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_MAD16
)paren
comma
l_string|&quot;MAD16_MPU_IRQ&quot;
comma
l_string|&quot;MAD16 MIDI IRQ&quot;
comma
id|FMT_INT
comma
l_int|9
comma
l_string|&quot;5, 7, 9 or 10&quot;
)paren
suffix:semicolon
id|ask_int_choice
(paren
id|B
(paren
id|OPT_AUDIO
)paren
comma
l_string|&quot;DSP_BUFFSIZE&quot;
comma
l_string|&quot;Audio DMA buffer size&quot;
comma
id|FMT_INT
comma
l_int|65536
comma
l_string|&quot;4096, 16384, 32768 or 65536&quot;
)paren
suffix:semicolon
)brace
r_void
DECL|function|dump_script
id|dump_script
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
id|DUMMY_OPTS
op_amp
id|B
(paren
id|i
)paren
)paren
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
id|DISABLED_OPTIONS
op_amp
id|B
(paren
id|i
)paren
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;bool &squot;%s&squot; CONFIG_%s&bslash;n&quot;
comma
id|questions
(braket
id|i
)braket
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
)brace
id|dump_only
op_assign
l_int|1
suffix:semicolon
id|selected_options
op_assign
l_int|0
suffix:semicolon
id|ask_parameters
(paren
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#&bslash;n$MAKE -C drivers/sound kernelconfig || exit 1&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_void
DECL|function|dump_fixed_local
id|dump_fixed_local
(paren
r_void
)paren
(brace
r_int
id|i
op_assign
l_int|0
suffix:semicolon
id|printf
(paren
l_string|&quot;/* Computer generated file. Please don&squot;t edit! */&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define KERNEL_COMPATIBLE_CONFIG&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SELECTED_SOUND_OPTIONS&bslash;t0x%08x&bslash;n&bslash;n&quot;
comma
id|selected_options
)paren
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_int
id|n
op_assign
l_int|0
comma
id|j
suffix:semicolon
id|printf
(paren
l_string|&quot;#if &quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|OPT_LAST
suffix:semicolon
id|j
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
id|DISABLED_OPTIONS
op_amp
id|B
(paren
id|j
)paren
)paren
)paren
r_if
c_cond
(paren
id|extra_options
(braket
id|i
)braket
dot
id|mask
op_amp
id|B
(paren
id|j
)paren
)paren
(brace
r_if
c_cond
(paren
id|n
)paren
id|printf
(paren
l_string|&quot; || &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|n
op_increment
op_mod
l_int|2
)paren
)paren
id|printf
(paren
l_string|&quot;&bslash;&bslash;&bslash;n  &quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;defined(CONFIG_%s)&quot;
comma
id|hw_table
(braket
id|j
)braket
dot
id|macro
)paren
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#&bslash;tdefine CONFIG_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#endif&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
)brace
r_void
DECL|function|dump_fixed_defines
id|dump_fixed_defines
(paren
r_void
)paren
(brace
r_int
id|i
op_assign
l_int|0
suffix:semicolon
id|printf
(paren
l_string|&quot;# Computer generated file. Please don&squot;t edit&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_int
id|n
op_assign
l_int|0
comma
id|j
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|OPT_LAST
suffix:semicolon
id|j
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
id|DISABLED_OPTIONS
op_amp
id|B
(paren
id|j
)paren
)paren
)paren
r_if
c_cond
(paren
id|extra_options
(braket
id|i
)braket
dot
id|mask
op_amp
id|B
(paren
id|j
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;ifdef CONFIG_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|j
)braket
dot
id|macro
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;CONFIG_%s=y&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;endif&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
)brace
r_int
DECL|function|main
id|main
(paren
r_int
id|argc
comma
r_char
op_star
id|argv
(braket
)braket
)paren
(brace
r_int
id|i
comma
id|num
comma
id|full_driver
op_assign
l_int|1
suffix:semicolon
r_char
id|answ
(braket
l_int|10
)braket
suffix:semicolon
r_char
id|old_config_file
(braket
l_int|200
)braket
suffix:semicolon
r_if
c_cond
(paren
id|getuid
(paren
)paren
op_ne
l_int|0
)paren
multiline_comment|/* Not root */
(brace
r_char
op_star
id|home
suffix:semicolon
r_if
c_cond
(paren
(paren
id|home
op_assign
id|getenv
(paren
l_string|&quot;HOME&quot;
)paren
)paren
op_ne
l_int|NULL
)paren
(brace
id|sprintf
(paren
id|old_config_file
comma
l_string|&quot;%s/.soundconf&quot;
comma
id|home
)paren
suffix:semicolon
id|oldconf
op_assign
id|old_config_file
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|argc
OG
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|strcmp
(paren
id|argv
(braket
l_int|1
)braket
comma
l_string|&quot;-o&quot;
)paren
op_eq
l_int|0
op_logical_and
id|use_old_config
(paren
id|oldconf
)paren
)paren
m_exit
(paren
l_int|0
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|strcmp
(paren
id|argv
(braket
l_int|1
)braket
comma
l_string|&quot;script&quot;
)paren
op_eq
l_int|0
)paren
(brace
id|dump_script
(paren
)paren
suffix:semicolon
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|strcmp
(paren
id|argv
(braket
l_int|1
)braket
comma
l_string|&quot;fixedlocal&quot;
)paren
op_eq
l_int|0
)paren
(brace
id|dump_fixed_local
(paren
)paren
suffix:semicolon
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|strcmp
(paren
id|argv
(braket
l_int|1
)braket
comma
l_string|&quot;fixeddefines&quot;
)paren
op_eq
l_int|0
)paren
(brace
id|dump_fixed_defines
(paren
)paren
suffix:semicolon
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;nConfiguring the sound support&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|access
(paren
id|oldconf
comma
id|R_OK
)paren
op_eq
l_int|0
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Old configuration exists in %s. Use it (y/n) ? &quot;
comma
id|oldconf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
r_if
c_cond
(paren
id|use_old_config
(paren
id|oldconf
)paren
)paren
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;/*&bslash;tGenerated by configure. Don&squot;t edit!!!!&bslash;t*/&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*&bslash;tMaking changes to this file is not as simple as it may look.&bslash;t*/&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*&bslash;tIf you change the CONFIG_ settings in local.h you&bslash;t*/&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*&bslash;t_have_ to edit .defines too.&bslash;t*/&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
(brace
multiline_comment|/*&n;     * Partial driver&n;     */
id|full_driver
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|can_select_option
(paren
id|i
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
)paren
multiline_comment|/*&n;&t;&t;&t;&t;&t;&t; * Not selected yet&n;&t;&t;&t;&t;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|verify
)paren
(brace
r_if
c_cond
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
id|selected_options
op_or_assign
id|B
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
suffix:semicolon
r_else
id|selected_options
op_or_assign
id|B
(paren
id|i
)paren
suffix:semicolon
)brace
r_else
(brace
r_int
id|def_answ
op_assign
id|hw_table
(braket
id|i
)braket
dot
id|default_answ
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
id|def_answ
ques
c_cond
l_string|&quot;  %s (y/n) ? &quot;
suffix:colon
l_string|&quot;  %s (n/y) ? &quot;
comma
id|questions
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
id|def_answ
)paren
)paren
r_if
c_cond
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
id|selected_options
op_or_assign
id|B
(paren
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
suffix:semicolon
r_else
id|selected_options
op_or_assign
id|B
(paren
id|i
)paren
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SBPRO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the mixer of SG NX Pro ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define __SGNXPRO__&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the MV Jazz16 (ProSonic etc.) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you have SoundMan Wave (n/y) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define SM_WAVE&bslash;n&quot;
)paren
suffix:semicolon
id|midi0001_again
suffix:colon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Logitech SoundMan Wave has a microcontroller which must be initialized&bslash;n&quot;
l_string|&quot;before MIDI emulation works. This is possible only if the microcode&bslash;n&quot;
l_string|&quot;file is compiled into the driver.&bslash;n&quot;
l_string|&quot;Do you have access to the MIDI0001.BIN file (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|path
(braket
l_int|512
)braket
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter full name of the MIDI0001.BIN file (pwd is sound): &quot;
)paren
suffix:semicolon
id|scanf
(paren
l_string|&quot;%s&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;including microcode file %s&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bin2hex
(paren
id|path
comma
l_string|&quot;smw-midi0001.h&quot;
comma
l_string|&quot;smw_ucode&quot;
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;couldn&squot;t open %s file&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;try again with correct path? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
r_goto
id|midi0001_again
suffix:semicolon
)brace
r_else
(brace
id|printf
(paren
l_string|&quot;#define SMW_MIDI0001_INCLUDED&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*build bin2hex %s smw-midi0001.h smw_ucode */&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SBPRO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n&bslash;nThe Logitech SoundMan Games supports 44 kHz in stereo&bslash;n&quot;
l_string|&quot;while the standard SB Pro supports just 22 kHz/stereo&bslash;n&quot;
l_string|&quot;You have an option to enable the SM Games mode.&bslash;n&quot;
l_string|&quot;However do enable it only if you are _sure_ that your&bslash;n&quot;
l_string|&quot;card is a SM Games. Enabling this feature with a&bslash;n&quot;
l_string|&quot;plain old SB Pro _will_ cause troubles with stereo mode.&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;DANGER! Read the above once again before answering &squot;y&squot;&bslash;n&quot;
l_string|&quot;Answer &squot;n&squot; in case you are unsure what to do!&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you have a Logitech SoundMan Games (n/y) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|0
)paren
)paren
id|printf
(paren
l_string|&quot;#define SM_GAMES&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SB16
)paren
)paren
id|selected_options
op_or_assign
id|B
(paren
id|OPT_SBPRO
)paren
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_AEDSP16
)paren
)paren
(brace
r_int
id|sel1
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_SBPRO
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the Audio Excel SoundBlaster pro mode ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define AEDSP16_SBPRO&bslash;n&quot;
)paren
suffix:semicolon
id|sel1
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MSS
)paren
)paren
op_logical_and
(paren
id|sel1
op_eq
l_int|0
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Do you want support for the Audio Excel Microsoft Sound System mode? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;#define AEDSP16_MSS&bslash;n&quot;
)paren
suffix:semicolon
id|sel1
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|sel1
op_eq
l_int|0
)paren
(brace
id|printf
(paren
l_string|&quot;invalid_configuration__run_make_config_again&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;ERROR!!!!!&bslash;nYou must select at least one mode when using Audio Excel!&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
op_minus
l_int|1
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_MPU401
)paren
)paren
id|printf
(paren
l_string|&quot;#define AEDSP16_MPU401&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_PSS
)paren
)paren
(brace
id|genld_again
suffix:colon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;if you wish to emulate the soundblaster and you have a DSPxxx.LD.&bslash;n&quot;
l_string|&quot;then you must include the LD in the kernel.&bslash;n&quot;
l_string|&quot;Do you wish to include a LD (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|path
(braket
l_int|512
)braket
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter the path to your LD file (pwd is sound): &quot;
)paren
suffix:semicolon
id|scanf
(paren
l_string|&quot;%s&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;including LD file %s&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|bin2hex
(paren
id|path
comma
l_string|&quot;synth-ld.h&quot;
comma
l_string|&quot;pss_synth&quot;
)paren
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;couldn&squot;t open %s as the ld file&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;try again with correct path? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
r_goto
id|genld_again
suffix:semicolon
)brace
r_else
(brace
id|printf
(paren
l_string|&quot;#define PSS_HAVE_LD&bslash;n&quot;
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;/*build bin2hex %s synth-ld.h pss_synth */&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|FILE
op_star
id|sf
op_assign
id|fopen
(paren
l_string|&quot;synth-ld.h&quot;
comma
l_string|&quot;w&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;/* automaticaly generated by configure */&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;unsigned char pss_synth[1];&bslash;n&quot;
l_string|&quot;#define pss_synthLen 0&bslash;n&quot;
)paren
suffix:semicolon
id|fclose
(paren
id|sf
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|OPT_TRIX
)paren
)paren
(brace
id|hex2hex_again
suffix:colon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;MediaTriX audioTriX Pro has a onboard microcontroller&bslash;n&quot;
l_string|&quot;which needs to be initialized by downloading&bslash;n&quot;
l_string|&quot;the code from file TRXPRO.HEX in the DOS driver&bslash;n&quot;
l_string|&quot;directory. If you don&squot;t have the TRXPRO.HEX handy&bslash;n&quot;
l_string|&quot;you may skip this step. However SB and MPU-401&bslash;n&quot;
l_string|&quot;modes of AudioTriX Pro will not work without&bslash;n&quot;
l_string|&quot;this file!&bslash;n&quot;
l_string|&quot;&bslash;n&quot;
l_string|&quot;Do you want to include TRXPRO.HEX in your kernel (y/n) ? &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|path
(braket
l_int|512
)braket
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Enter the path to your TRXPRO.HEX file (pwd is sound): &quot;
)paren
suffix:semicolon
id|scanf
(paren
l_string|&quot;%s&quot;
comma
id|path
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;including HEX file %s&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|hex2hex
(paren
id|path
comma
l_string|&quot;trix_boot.h&quot;
comma
l_string|&quot;trix_boot&quot;
)paren
)paren
r_goto
id|hex2hex_again
suffix:semicolon
id|printf
(paren
l_string|&quot;/*build hex2hex %s trix_boot.h trix_boot */&bslash;n&quot;
comma
id|path
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define INCLUDE_TRIX_BOOT&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|selected_options
op_amp
id|ANY_DEVS
)paren
)paren
(brace
id|printf
(paren
l_string|&quot;invalid_configuration__run_make_config_again&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;&bslash;n*** This combination is useless. Sound driver disabled!!! ***&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
id|OPT_LAST
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|hw_table
(braket
id|i
)braket
dot
id|alias
)paren
r_if
c_cond
(paren
id|selected_options
op_amp
id|B
(paren
id|i
)paren
)paren
id|printf
(paren
l_string|&quot;#define CONFIG_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#undef  CONFIG_%s&bslash;n&quot;
comma
id|hw_table
(braket
id|i
)braket
dot
id|macro
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|extra_options
(braket
id|i
)braket
dot
id|name
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|selected_options
op_amp
id|extra_options
(braket
id|i
)braket
dot
id|mask
)paren
id|printf
(paren
l_string|&quot;#define CONFIG_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
r_else
id|printf
(paren
l_string|&quot;#undef  CONFIG_%s&bslash;n&quot;
comma
id|extra_options
(braket
id|i
)braket
dot
id|name
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|printf
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|ask_parameters
(paren
)paren
suffix:semicolon
id|printf
(paren
l_string|&quot;#define SELECTED_SOUND_OPTIONS&bslash;t0x%08x&bslash;n&quot;
comma
id|selected_options
)paren
suffix:semicolon
id|fprintf
(paren
id|stderr
comma
l_string|&quot;The sound driver is now configured.&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#if defined(SCO) || defined(ISC) || defined(SYSV)
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Remember to update the System file&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|old_config_used
)paren
(brace
id|fprintf
(paren
id|stderr
comma
l_string|&quot;Save copy of this configuration to %s (y/n)&quot;
comma
id|oldconf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|think_positively
(paren
l_int|1
)paren
)paren
(brace
r_char
id|cmd
(braket
l_int|200
)braket
suffix:semicolon
id|sprintf
(paren
id|cmd
comma
l_string|&quot;cp local.h %s&quot;
comma
id|oldconf
)paren
suffix:semicolon
id|fclose
(paren
id|stdout
)paren
suffix:semicolon
r_if
c_cond
(paren
id|system
(paren
id|cmd
)paren
op_ne
l_int|0
)paren
id|perror
(paren
id|cmd
)paren
suffix:semicolon
)brace
)brace
m_exit
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_int
DECL|function|bin2hex
id|bin2hex
(paren
r_char
op_star
id|path
comma
r_char
op_star
id|target
comma
r_char
op_star
id|varname
)paren
(brace
r_int
id|fd
suffix:semicolon
r_int
id|count
suffix:semicolon
r_char
id|c
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|fd
op_assign
id|open
(paren
id|path
comma
l_int|0
)paren
)paren
OG
l_int|0
)paren
(brace
id|FILE
op_star
id|sf
op_assign
id|fopen
(paren
id|target
comma
l_string|&quot;w&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;/* automaticaly generated by configure */&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;static unsigned char %s[] = {&bslash;n&quot;
comma
id|varname
)paren
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
id|count
op_assign
id|read
(paren
id|fd
comma
op_amp
id|c
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ne
l_int|0
op_logical_and
(paren
id|i
op_mod
l_int|10
)paren
op_eq
l_int|0
)paren
id|fprintf
(paren
id|sf
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|fprintf
(paren
id|sf
comma
l_string|&quot;0x%02x,&quot;
comma
id|c
op_amp
l_int|0xFFL
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|fprintf
(paren
id|sf
comma
l_string|&quot;};&bslash;n&quot;
l_string|&quot;#define %sLen %d&bslash;n&quot;
comma
id|varname
comma
id|i
)paren
suffix:semicolon
id|fclose
(paren
id|sf
)paren
suffix:semicolon
id|close
(paren
id|fd
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
eof
