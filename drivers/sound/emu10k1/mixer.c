multiline_comment|/*&n; **********************************************************************&n; *     mixer.c - /dev/mixer interface for emu10k1 driver&n; *     Copyright 1999, 2000 Creative Labs, Inc.&n; *&n; *     This program uses some code from es1371.c, Copyright 1998-1999&n; *     Thomas Sailer&n; *&n; **********************************************************************&n; *&n; *     Date                 Author          Summary of changes&n; *     ----                 ------          ------------------&n; *     October 20, 1999     Bertrand Lee    base code release&n; *     November 2, 1999     Alan Cox        cleaned up stuff&n; *&n; **********************************************************************&n; *&n; *     This program is free software; you can redistribute it and/or&n; *     modify it under the terms of the GNU General Public License as&n; *     published by the Free Software Foundation; either version 2 of&n; *     the License, or (at your option) any later version.&n; *&n; *     This program is distributed in the hope that it will be useful,&n; *     but WITHOUT ANY WARRANTY; without even the implied warranty of&n; *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n; *     GNU General Public License for more details.&n; *&n; *     You should have received a copy of the GNU General Public&n; *     License along with this program; if not, write to the Free&n; *     Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,&n; *     USA.&n; *&n; **********************************************************************&n; */
DECL|macro|__NO_VERSION__
mdefine_line|#define __NO_VERSION__&t;&t;/* Kernel version only defined once */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/bitops.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &quot;hwaccess.h&quot;
macro_line|#include &quot;8010.h&quot;
macro_line|#include &quot;recmgr.h&quot;
DECL|macro|AC97_PESSIMISTIC
mdefine_line|#define AC97_PESSIMISTIC
DECL|macro|OSS_DOCUMENTED_MIXER_SEMANTICS
macro_line|#undef OSS_DOCUMENTED_MIXER_SEMANTICS
DECL|macro|vol_to_hw_5
mdefine_line|#define vol_to_hw_5(swvol) (31 - (((swvol) * 31) / 100))
DECL|macro|vol_to_hw_4
mdefine_line|#define vol_to_hw_4(swvol) (15 - (((swvol) * 15) / 100))
DECL|macro|vol_to_sw_5
mdefine_line|#define vol_to_sw_5(hwvol) (((31 - (hwvol)) * 100) / 31)
DECL|macro|vol_to_sw_4
mdefine_line|#define vol_to_sw_4(hwvol) (((15 - (hwvol)) * 100) / 15)
DECL|macro|DM_MUTE
mdefine_line|#define DM_MUTE 0x80000000
macro_line|#ifdef PRIVATE_PCM_VOLUME
DECL|variable|sblive_pcm_volume
r_struct
id|sblive_pcm_volume_rec
id|sblive_pcm_volume
(braket
id|MAX_PCM_CHANNELS
)braket
suffix:semicolon
DECL|variable|pcm_last_mixer
id|u16
id|pcm_last_mixer
op_assign
l_int|0x6464
suffix:semicolon
macro_line|#endif
multiline_comment|/* Mapping arrays */
DECL|variable|recsrc
r_static
r_const
r_int
r_int
id|recsrc
(braket
)braket
op_assign
(brace
id|SOUND_MASK_MIC
comma
id|SOUND_MASK_CD
comma
id|SOUND_MASK_VIDEO
comma
id|SOUND_MASK_LINE1
comma
id|SOUND_MASK_LINE
comma
id|SOUND_MASK_VOLUME
comma
id|SOUND_MASK_OGAIN
comma
multiline_comment|/* Used to be PHONEOUT */
id|SOUND_MASK_PHONEIN
comma
macro_line|#ifdef TONE_CONTROL
id|SOUND_MASK_TREBLE
comma
id|SOUND_MASK_BASS
comma
macro_line|#endif
)brace
suffix:semicolon
DECL|variable|volreg
r_static
r_const
r_int
r_char
id|volreg
(braket
id|SOUND_MIXER_NRDEVICES
)braket
op_assign
(brace
multiline_comment|/* 5 bit stereo */
(braket
id|SOUND_MIXER_LINE
)braket
op_assign
id|AC97_LINEINVOLUME
comma
(braket
id|SOUND_MIXER_CD
)braket
op_assign
id|AC97_CDVOLUME
comma
(braket
id|SOUND_MIXER_VIDEO
)braket
op_assign
id|AC97_VIDEOVOLUME
comma
(braket
id|SOUND_MIXER_LINE1
)braket
op_assign
id|AC97_AUXVOLUME
comma
multiline_comment|/*&t;[SOUND_MIXER_PCM] = AC97_PCMOUTVOLUME, */
multiline_comment|/* 5 bit stereo, setting 6th bit equal to maximum attenuation */
multiline_comment|/*&t;[SOUND_MIXER_VOLUME] = AC97_MASTERVOLUME, */
(braket
id|SOUND_MIXER_PHONEOUT
)braket
op_assign
id|AC97_HEADPHONEVOLUME
comma
multiline_comment|/* 5 bit mono, setting 6th bit equal to maximum attenuation */
(braket
id|SOUND_MIXER_OGAIN
)braket
op_assign
id|AC97_MASTERVOLUMEMONO
comma
multiline_comment|/* 5 bit mono */
(braket
id|SOUND_MIXER_PHONEIN
)braket
op_assign
id|AC97_PHONEVOLUME
comma
multiline_comment|/* 4 bit mono but shifted by 1 */
(braket
id|SOUND_MIXER_SPEAKER
)braket
op_assign
id|AC97_PCBEEPVOLUME
comma
multiline_comment|/* 5 bit mono, 7th bit = preamp */
(braket
id|SOUND_MIXER_MIC
)braket
op_assign
id|AC97_MICVOLUME
comma
multiline_comment|/* 4 bit stereo */
(braket
id|SOUND_MIXER_RECLEV
)braket
op_assign
id|AC97_RECORDGAIN
comma
multiline_comment|/* 4 bit mono */
(braket
id|SOUND_MIXER_IGAIN
)braket
op_assign
id|AC97_RECORDGAINMIC
comma
multiline_comment|/* test code */
(braket
id|SOUND_MIXER_BASS
)braket
op_assign
id|AC97_GENERALPURPOSE
comma
(braket
id|SOUND_MIXER_TREBLE
)braket
op_assign
id|AC97_MASTERTONE
comma
(braket
id|SOUND_MIXER_LINE2
)braket
op_assign
id|AC97_PCMOUTVOLUME
comma
(braket
id|SOUND_MIXER_DIGITAL2
)braket
op_assign
id|AC97_MASTERVOLUME
)brace
suffix:semicolon
macro_line|#ifdef OSS_DOCUMENTED_MIXER_SEMANTICS
DECL|macro|swab
mdefine_line|#define swab(x) ((((x) &gt;&gt; 8) &amp; 0xff) | (((x) &lt;&lt; 8) &amp; 0xff00))
multiline_comment|/* FIXME: mixer_rdch() is broken. */
DECL|function|mixer_rdch
r_static
r_int
id|mixer_rdch
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
comma
r_int
r_int
id|ch
comma
r_int
op_star
id|arg
)paren
(brace
id|u16
id|reg
suffix:semicolon
r_int
id|j
suffix:semicolon
r_int
id|nL
comma
id|nR
suffix:semicolon
r_switch
c_cond
(paren
id|ch
)paren
(brace
r_case
id|SOUND_MIXER_PCM
suffix:colon
r_case
id|SOUND_MIXER_VOLUME
suffix:colon
macro_line|#ifdef TONE_CONTROL
r_case
id|SOUND_MIXER_TREBLE
suffix:colon
r_case
id|SOUND_MIXER_BASS
suffix:colon
macro_line|#endif
r_return
id|put_user
c_func
(paren
l_int|0x0000
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|ch
)paren
(brace
r_case
id|SOUND_MIXER_LINE
suffix:colon
r_case
id|SOUND_MIXER_CD
suffix:colon
r_case
id|SOUND_MIXER_VIDEO
suffix:colon
r_case
id|SOUND_MIXER_LINE1
suffix:colon
id|sblive_readac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
op_amp
id|reg
)paren
suffix:semicolon
id|nL
op_assign
(paren
(paren
op_complement
(paren
id|reg
op_rshift
l_int|8
)paren
op_amp
l_int|0x1f
)paren
op_star
l_int|100
)paren
op_div
l_int|32
suffix:semicolon
id|nR
op_assign
(paren
op_complement
(paren
id|reg
op_amp
l_int|0x1f
)paren
op_star
l_int|100
)paren
op_div
l_int|32
suffix:semicolon
id|DPD
c_func
(paren
l_int|2
comma
l_string|&quot;mixer_rdch: l=%d, r=%d&bslash;n&quot;
comma
id|nL
comma
id|nR
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|reg
op_amp
l_int|0x8000
ques
c_cond
l_int|0
suffix:colon
(paren
id|nL
op_lshift
l_int|8
)paren
op_or
id|nR
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_OGAIN
suffix:colon
r_case
id|SOUND_MIXER_PHONEIN
suffix:colon
id|sblive_readac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
op_amp
id|reg
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|reg
op_amp
l_int|0x8000
ques
c_cond
l_int|0
suffix:colon
op_complement
(paren
id|reg
op_amp
l_int|0x1f
)paren
op_star
l_int|0x64
op_div
l_int|0x20
op_star
l_int|0x101
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_SPEAKER
suffix:colon
id|sblive_readac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
op_amp
id|reg
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|reg
op_amp
l_int|0x8000
ques
c_cond
l_int|0
suffix:colon
op_complement
(paren
(paren
id|reg
op_rshift
l_int|1
)paren
op_amp
l_int|0xf
)paren
op_star
l_int|0x64
op_div
l_int|0x10
op_star
l_int|0x101
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_MIC
suffix:colon
id|sblive_readac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
op_amp
id|reg
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|reg
op_amp
l_int|0x8000
ques
c_cond
l_int|0
suffix:colon
op_complement
(paren
id|reg
op_amp
l_int|0x1f
)paren
op_star
l_int|0x64
op_div
l_int|0x20
op_star
l_int|0x101
op_plus
(paren
(paren
id|reg
op_amp
l_int|0x40
)paren
ques
c_cond
l_int|0x1e1e
suffix:colon
l_int|0
)paren
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_RECLEV
suffix:colon
id|sblive_readac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
op_amp
id|reg
)paren
suffix:semicolon
id|nL
op_assign
(paren
(paren
op_complement
(paren
id|reg
op_rshift
l_int|8
)paren
op_amp
l_int|0x1f
)paren
op_star
l_int|100
)paren
op_div
l_int|16
suffix:semicolon
id|nR
op_assign
(paren
op_complement
(paren
id|reg
op_amp
l_int|0x1f
)paren
op_star
l_int|100
)paren
op_div
l_int|16
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|reg
op_amp
l_int|0x8000
ques
c_cond
l_int|0
suffix:colon
(paren
id|nL
op_lshift
l_int|8
)paren
op_or
id|nR
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
macro_line|#endif&t;&t;&t;&t;/* OSS_DOCUMENTED_MIXER_SEMANTICS */
DECL|variable|volidx
r_static
r_const
r_int
r_char
id|volidx
(braket
id|SOUND_MIXER_NRDEVICES
)braket
op_assign
(brace
multiline_comment|/* 5 bit stereo */
(braket
id|SOUND_MIXER_LINE
)braket
op_assign
l_int|1
comma
(braket
id|SOUND_MIXER_CD
)braket
op_assign
l_int|2
comma
(braket
id|SOUND_MIXER_VIDEO
)braket
op_assign
l_int|3
comma
(braket
id|SOUND_MIXER_LINE1
)braket
op_assign
l_int|4
comma
(braket
id|SOUND_MIXER_PCM
)braket
op_assign
l_int|5
comma
multiline_comment|/* 6 bit stereo */
(braket
id|SOUND_MIXER_VOLUME
)braket
op_assign
l_int|6
comma
(braket
id|SOUND_MIXER_PHONEOUT
)braket
op_assign
l_int|7
comma
multiline_comment|/* 6 bit mono */
(braket
id|SOUND_MIXER_OGAIN
)braket
op_assign
l_int|8
comma
(braket
id|SOUND_MIXER_PHONEIN
)braket
op_assign
l_int|9
comma
multiline_comment|/* 4 bit mono but shifted by 1 */
(braket
id|SOUND_MIXER_SPEAKER
)braket
op_assign
l_int|10
comma
multiline_comment|/* 6 bit mono + preamp */
(braket
id|SOUND_MIXER_MIC
)braket
op_assign
l_int|11
comma
multiline_comment|/* 4 bit stereo */
(braket
id|SOUND_MIXER_RECLEV
)braket
op_assign
l_int|12
comma
multiline_comment|/* 4 bit mono */
(braket
id|SOUND_MIXER_IGAIN
)braket
op_assign
l_int|13
comma
(braket
id|SOUND_MIXER_TREBLE
)braket
op_assign
l_int|14
comma
(braket
id|SOUND_MIXER_BASS
)braket
op_assign
l_int|15
comma
(braket
id|SOUND_MIXER_LINE2
)braket
op_assign
l_int|16
comma
(braket
id|SOUND_MIXER_LINE3
)braket
op_assign
l_int|17
comma
(braket
id|SOUND_MIXER_DIGITAL1
)braket
op_assign
l_int|18
comma
(braket
id|SOUND_MIXER_DIGITAL2
)braket
op_assign
l_int|19
)brace
suffix:semicolon
macro_line|#ifdef TONE_CONTROL
DECL|variable|bass_table
r_static
r_const
id|u32
id|bass_table
(braket
l_int|41
)braket
(braket
l_int|5
)braket
op_assign
(brace
(brace
l_int|0x3e4f844f
comma
l_int|0x84ed4cc3
comma
l_int|0x3cc69927
comma
l_int|0x7b03553a
comma
l_int|0xc4da8486
)brace
comma
(brace
l_int|0x3e69a17a
comma
l_int|0x84c280fb
comma
l_int|0x3cd77cd4
comma
l_int|0x7b2f2a6f
comma
l_int|0xc4b08d1d
)brace
comma
(brace
l_int|0x3e82ff42
comma
l_int|0x849991d5
comma
l_int|0x3ce7466b
comma
l_int|0x7b5917c6
comma
l_int|0xc48863ee
)brace
comma
(brace
l_int|0x3e9bab3c
comma
l_int|0x847267f0
comma
l_int|0x3cf5ffe8
comma
l_int|0x7b813560
comma
l_int|0xc461f22c
)brace
comma
(brace
l_int|0x3eb3b275
comma
l_int|0x844ced29
comma
l_int|0x3d03b295
comma
l_int|0x7ba79a1c
comma
l_int|0xc43d223b
)brace
comma
(brace
l_int|0x3ecb2174
comma
l_int|0x84290c8b
comma
l_int|0x3d106714
comma
l_int|0x7bcc5ba3
comma
l_int|0xc419dfa5
)brace
comma
(brace
l_int|0x3ee2044b
comma
l_int|0x8406b244
comma
l_int|0x3d1c2561
comma
l_int|0x7bef8e77
comma
l_int|0xc3f8170f
)brace
comma
(brace
l_int|0x3ef86698
comma
l_int|0x83e5cb96
comma
l_int|0x3d26f4d8
comma
l_int|0x7c114600
comma
l_int|0xc3d7b625
)brace
comma
(brace
l_int|0x3f0e5390
comma
l_int|0x83c646c9
comma
l_int|0x3d30dc39
comma
l_int|0x7c319498
comma
l_int|0xc3b8ab97
)brace
comma
(brace
l_int|0x3f23d60b
comma
l_int|0x83a81321
comma
l_int|0x3d39e1af
comma
l_int|0x7c508b9c
comma
l_int|0xc39ae704
)brace
comma
(brace
l_int|0x3f38f884
comma
l_int|0x838b20d2
comma
l_int|0x3d420ad2
comma
l_int|0x7c6e3b75
comma
l_int|0xc37e58f1
)brace
comma
(brace
l_int|0x3f4dc52c
comma
l_int|0x836f60ef
comma
l_int|0x3d495cab
comma
l_int|0x7c8ab3a6
comma
l_int|0xc362f2be
)brace
comma
(brace
l_int|0x3f6245e8
comma
l_int|0x8354c565
comma
l_int|0x3d4fdbb8
comma
l_int|0x7ca602d6
comma
l_int|0xc348a69b
)brace
comma
(brace
l_int|0x3f76845f
comma
l_int|0x833b40ec
comma
l_int|0x3d558bf0
comma
l_int|0x7cc036df
comma
l_int|0xc32f677c
)brace
comma
(brace
l_int|0x3f8a8a03
comma
l_int|0x8322c6fb
comma
l_int|0x3d5a70c4
comma
l_int|0x7cd95cd7
comma
l_int|0xc317290b
)brace
comma
(brace
l_int|0x3f9e6014
comma
l_int|0x830b4bc3
comma
l_int|0x3d5e8d25
comma
l_int|0x7cf1811a
comma
l_int|0xc2ffdfa5
)brace
comma
(brace
l_int|0x3fb20fae
comma
l_int|0x82f4c420
comma
l_int|0x3d61e37f
comma
l_int|0x7d08af56
comma
l_int|0xc2e9804a
)brace
comma
(brace
l_int|0x3fc5a1cc
comma
l_int|0x82df2592
comma
l_int|0x3d6475c3
comma
l_int|0x7d1ef294
comma
l_int|0xc2d40096
)brace
comma
(brace
l_int|0x3fd91f55
comma
l_int|0x82ca6632
comma
l_int|0x3d664564
comma
l_int|0x7d345541
comma
l_int|0xc2bf56b9
)brace
comma
(brace
l_int|0x3fec9120
comma
l_int|0x82b67cac
comma
l_int|0x3d675356
comma
l_int|0x7d48e138
comma
l_int|0xc2ab796e
)brace
comma
(brace
l_int|0x40000000
comma
l_int|0x82a36037
comma
l_int|0x3d67a012
comma
l_int|0x7d5c9fc9
comma
l_int|0xc2985fee
)brace
comma
(brace
l_int|0x401374c7
comma
l_int|0x8291088a
comma
l_int|0x3d672b93
comma
l_int|0x7d6f99c3
comma
l_int|0xc28601f2
)brace
comma
(brace
l_int|0x4026f857
comma
l_int|0x827f6dd7
comma
l_int|0x3d65f559
comma
l_int|0x7d81d77c
comma
l_int|0xc27457a3
)brace
comma
(brace
l_int|0x403a939f
comma
l_int|0x826e88c5
comma
l_int|0x3d63fc63
comma
l_int|0x7d9360d4
comma
l_int|0xc2635996
)brace
comma
(brace
l_int|0x404e4faf
comma
l_int|0x825e5266
comma
l_int|0x3d613f32
comma
l_int|0x7da43d42
comma
l_int|0xc25300c6
)brace
comma
(brace
l_int|0x406235ba
comma
l_int|0x824ec434
comma
l_int|0x3d5dbbc3
comma
l_int|0x7db473d7
comma
l_int|0xc243468e
)brace
comma
(brace
l_int|0x40764f1f
comma
l_int|0x823fd80c
comma
l_int|0x3d596f8f
comma
l_int|0x7dc40b44
comma
l_int|0xc23424a2
)brace
comma
(brace
l_int|0x408aa576
comma
l_int|0x82318824
comma
l_int|0x3d545787
comma
l_int|0x7dd309e2
comma
l_int|0xc2259509
)brace
comma
(brace
l_int|0x409f4296
comma
l_int|0x8223cf0b
comma
l_int|0x3d4e7012
comma
l_int|0x7de175b5
comma
l_int|0xc2179218
)brace
comma
(brace
l_int|0x40b430a0
comma
l_int|0x8216a7a1
comma
l_int|0x3d47b505
comma
l_int|0x7def5475
comma
l_int|0xc20a1670
)brace
comma
(brace
l_int|0x40c97a0a
comma
l_int|0x820a0d12
comma
l_int|0x3d4021a1
comma
l_int|0x7dfcab8d
comma
l_int|0xc1fd1cf5
)brace
comma
(brace
l_int|0x40df29a6
comma
l_int|0x81fdfad6
comma
l_int|0x3d37b08d
comma
l_int|0x7e098028
comma
l_int|0xc1f0a0ca
)brace
comma
(brace
l_int|0x40f54ab1
comma
l_int|0x81f26ca9
comma
l_int|0x3d2e5bd1
comma
l_int|0x7e15d72b
comma
l_int|0xc1e49d52
)brace
comma
(brace
l_int|0x410be8da
comma
l_int|0x81e75e89
comma
l_int|0x3d241cce
comma
l_int|0x7e21b544
comma
l_int|0xc1d90e24
)brace
comma
(brace
l_int|0x41231051
comma
l_int|0x81dcccb3
comma
l_int|0x3d18ec37
comma
l_int|0x7e2d1ee6
comma
l_int|0xc1cdef10
)brace
comma
(brace
l_int|0x413acdd0
comma
l_int|0x81d2b39e
comma
l_int|0x3d0cc20a
comma
l_int|0x7e38184e
comma
l_int|0xc1c33c13
)brace
comma
(brace
l_int|0x41532ea7
comma
l_int|0x81c90ffb
comma
l_int|0x3cff9585
comma
l_int|0x7e42a58b
comma
l_int|0xc1b8f15a
)brace
comma
(brace
l_int|0x416c40cd
comma
l_int|0x81bfdeb2
comma
l_int|0x3cf15d21
comma
l_int|0x7e4cca7c
comma
l_int|0xc1af0b3f
)brace
comma
(brace
l_int|0x418612ea
comma
l_int|0x81b71cdc
comma
l_int|0x3ce20e85
comma
l_int|0x7e568ad3
comma
l_int|0xc1a58640
)brace
comma
(brace
l_int|0x41a0b465
comma
l_int|0x81aec7c5
comma
l_int|0x3cd19e7c
comma
l_int|0x7e5fea1e
comma
l_int|0xc19c5f03
)brace
comma
(brace
l_int|0x41bc3573
comma
l_int|0x81a6dcea
comma
l_int|0x3cc000e9
comma
l_int|0x7e68ebc2
comma
l_int|0xc1939250
)brace
)brace
suffix:semicolon
DECL|variable|treble_table
r_static
r_const
id|u32
id|treble_table
(braket
l_int|41
)braket
(braket
l_int|5
)braket
op_assign
(brace
(brace
l_int|0x0125cba9
comma
l_int|0xfed5debd
comma
l_int|0x00599b6c
comma
l_int|0x0d2506da
comma
l_int|0xfa85b354
)brace
comma
(brace
l_int|0x0142f67e
comma
l_int|0xfeb03163
comma
l_int|0x0066cd0f
comma
l_int|0x0d14c69d
comma
l_int|0xfa914473
)brace
comma
(brace
l_int|0x016328bd
comma
l_int|0xfe860158
comma
l_int|0x0075b7f2
comma
l_int|0x0d03eb27
comma
l_int|0xfa9d32d2
)brace
comma
(brace
l_int|0x0186b438
comma
l_int|0xfe56c982
comma
l_int|0x00869234
comma
l_int|0x0cf27048
comma
l_int|0xfaa97fca
)brace
comma
(brace
l_int|0x01adf358
comma
l_int|0xfe21f5fe
comma
l_int|0x00999842
comma
l_int|0x0ce051c2
comma
l_int|0xfab62ca5
)brace
comma
(brace
l_int|0x01d949fa
comma
l_int|0xfde6e287
comma
l_int|0x00af0d8d
comma
l_int|0x0ccd8b4a
comma
l_int|0xfac33aa7
)brace
comma
(brace
l_int|0x02092669
comma
l_int|0xfda4d8bf
comma
l_int|0x00c73d4c
comma
l_int|0x0cba1884
comma
l_int|0xfad0ab07
)brace
comma
(brace
l_int|0x023e0268
comma
l_int|0xfd5b0e4a
comma
l_int|0x00e27b54
comma
l_int|0x0ca5f509
comma
l_int|0xfade7ef2
)brace
comma
(brace
l_int|0x0278645c
comma
l_int|0xfd08a2b0
comma
l_int|0x01012509
comma
l_int|0x0c911c63
comma
l_int|0xfaecb788
)brace
comma
(brace
l_int|0x02b8e091
comma
l_int|0xfcac9d1a
comma
l_int|0x0123a262
comma
l_int|0x0c7b8a14
comma
l_int|0xfafb55df
)brace
comma
(brace
l_int|0x03001a9a
comma
l_int|0xfc45e9ce
comma
l_int|0x014a6709
comma
l_int|0x0c65398f
comma
l_int|0xfb0a5aff
)brace
comma
(brace
l_int|0x034ec6d7
comma
l_int|0xfbd3576b
comma
l_int|0x0175f397
comma
l_int|0x0c4e2643
comma
l_int|0xfb19c7e4
)brace
comma
(brace
l_int|0x03a5ac15
comma
l_int|0xfb5393ee
comma
l_int|0x01a6d6ed
comma
l_int|0x0c364b94
comma
l_int|0xfb299d7c
)brace
comma
(brace
l_int|0x0405a562
comma
l_int|0xfac52968
comma
l_int|0x01ddafae
comma
l_int|0x0c1da4e2
comma
l_int|0xfb39dca5
)brace
comma
(brace
l_int|0x046fa3fe
comma
l_int|0xfa267a66
comma
l_int|0x021b2ddd
comma
l_int|0x0c042d8d
comma
l_int|0xfb4a8631
)brace
comma
(brace
l_int|0x04e4b17f
comma
l_int|0xf975be0f
comma
l_int|0x0260149f
comma
l_int|0x0be9e0f2
comma
l_int|0xfb5b9ae0
)brace
comma
(brace
l_int|0x0565f220
comma
l_int|0xf8b0fbe5
comma
l_int|0x02ad3c29
comma
l_int|0x0bceba73
comma
l_int|0xfb6d1b60
)brace
comma
(brace
l_int|0x05f4a745
comma
l_int|0xf7d60722
comma
l_int|0x030393d4
comma
l_int|0x0bb2b578
comma
l_int|0xfb7f084d
)brace
comma
(brace
l_int|0x06923236
comma
l_int|0xf6e279bd
comma
l_int|0x03642465
comma
l_int|0x0b95cd75
comma
l_int|0xfb916233
)brace
comma
(brace
l_int|0x07401713
comma
l_int|0xf5d3aef9
comma
l_int|0x03d01283
comma
l_int|0x0b77fded
comma
l_int|0xfba42984
)brace
comma
(brace
l_int|0x08000000
comma
l_int|0xf4a6bd88
comma
l_int|0x0448a161
comma
l_int|0x0b594278
comma
l_int|0xfbb75e9f
)brace
comma
(brace
l_int|0x08d3c097
comma
l_int|0xf3587131
comma
l_int|0x04cf35a4
comma
l_int|0x0b3996c9
comma
l_int|0xfbcb01cb
)brace
comma
(brace
l_int|0x09bd59a2
comma
l_int|0xf1e543f9
comma
l_int|0x05655880
comma
l_int|0x0b18f6b2
comma
l_int|0xfbdf1333
)brace
comma
(brace
l_int|0x0abefd0f
comma
l_int|0xf04956ca
comma
l_int|0x060cbb12
comma
l_int|0x0af75e2c
comma
l_int|0xfbf392e8
)brace
comma
(brace
l_int|0x0bdb123e
comma
l_int|0xee806984
comma
l_int|0x06c739fe
comma
l_int|0x0ad4c962
comma
l_int|0xfc0880dd
)brace
comma
(brace
l_int|0x0d143a94
comma
l_int|0xec85d287
comma
l_int|0x0796e150
comma
l_int|0x0ab134b0
comma
l_int|0xfc1ddce5
)brace
comma
(brace
l_int|0x0e6d5664
comma
l_int|0xea547598
comma
l_int|0x087df0a0
comma
l_int|0x0a8c9cb6
comma
l_int|0xfc33a6ad
)brace
comma
(brace
l_int|0x0fe98a2a
comma
l_int|0xe7e6ba35
comma
l_int|0x097edf83
comma
l_int|0x0a66fe5b
comma
l_int|0xfc49ddc2
)brace
comma
(brace
l_int|0x118c4421
comma
l_int|0xe536813a
comma
l_int|0x0a9c6248
comma
l_int|0x0a4056d7
comma
l_int|0xfc608185
)brace
comma
(brace
l_int|0x1359422e
comma
l_int|0xe23d19eb
comma
l_int|0x0bd96efb
comma
l_int|0x0a18a3bf
comma
l_int|0xfc77912c
)brace
comma
(brace
l_int|0x1554982b
comma
l_int|0xdef33645
comma
l_int|0x0d3942bd
comma
l_int|0x09efe312
comma
l_int|0xfc8f0bc1
)brace
comma
(brace
l_int|0x1782b68a
comma
l_int|0xdb50deb1
comma
l_int|0x0ebf676d
comma
l_int|0x09c6133f
comma
l_int|0xfca6f019
)brace
comma
(brace
l_int|0x19e8715d
comma
l_int|0xd74d64fd
comma
l_int|0x106fb999
comma
l_int|0x099b3337
comma
l_int|0xfcbf3cd6
)brace
comma
(brace
l_int|0x1c8b07b8
comma
l_int|0xd2df56ab
comma
l_int|0x124e6ec8
comma
l_int|0x096f4274
comma
l_int|0xfcd7f060
)brace
comma
(brace
l_int|0x1f702b6d
comma
l_int|0xcdfc6e92
comma
l_int|0x14601c10
comma
l_int|0x0942410b
comma
l_int|0xfcf108e5
)brace
comma
(brace
l_int|0x229e0933
comma
l_int|0xc89985cd
comma
l_int|0x16a9bcfa
comma
l_int|0x09142fb5
comma
l_int|0xfd0a8451
)brace
comma
(brace
l_int|0x261b5118
comma
l_int|0xc2aa8409
comma
l_int|0x1930bab6
comma
l_int|0x08e50fdc
comma
l_int|0xfd24604d
)brace
comma
(brace
l_int|0x29ef3f5d
comma
l_int|0xbc224f28
comma
l_int|0x1bfaf396
comma
l_int|0x08b4e3aa
comma
l_int|0xfd3e9a3b
)brace
comma
(brace
l_int|0x2e21a59b
comma
l_int|0xb4f2ba46
comma
l_int|0x1f0ec2d6
comma
l_int|0x0883ae15
comma
l_int|0xfd592f33
)brace
comma
(brace
l_int|0x32baf44b
comma
l_int|0xad0c7429
comma
l_int|0x227308a3
comma
l_int|0x085172eb
comma
l_int|0xfd741bfd
)brace
comma
(brace
l_int|0x37c4448b
comma
l_int|0xa45ef51d
comma
l_int|0x262f3267
comma
l_int|0x081e36dc
comma
l_int|0xfd8f5d14
)brace
)brace
suffix:semicolon
DECL|function|set_bass
r_static
r_void
id|set_bass
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
comma
r_int
id|l
comma
r_int
id|r
)paren
(brace
r_int
id|i
suffix:semicolon
id|l
op_assign
(paren
id|l
op_star
l_int|40
op_plus
l_int|50
)paren
op_div
l_int|100
suffix:semicolon
id|r
op_assign
(paren
id|r
op_star
l_int|40
op_plus
l_int|50
)paren
op_div
l_int|100
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x80
op_plus
(paren
id|i
op_star
l_int|2
)paren
comma
l_int|0
comma
id|bass_table
(braket
id|l
)braket
(braket
id|i
)braket
)paren
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x80
op_plus
(paren
id|i
op_star
l_int|2
)paren
op_plus
l_int|1
comma
l_int|0
comma
id|bass_table
(braket
id|r
)braket
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
DECL|function|set_treble
r_static
r_void
id|set_treble
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
comma
r_int
id|l
comma
r_int
id|r
)paren
(brace
r_int
id|i
suffix:semicolon
id|l
op_assign
(paren
id|l
op_star
l_int|40
op_plus
l_int|50
)paren
op_div
l_int|100
suffix:semicolon
id|r
op_assign
(paren
id|r
op_star
l_int|40
op_plus
l_int|50
)paren
op_div
l_int|100
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x90
op_plus
(paren
id|i
op_star
l_int|2
)paren
comma
l_int|0
comma
id|treble_table
(braket
id|l
)braket
(braket
id|i
)braket
)paren
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x90
op_plus
(paren
id|i
op_star
l_int|2
)paren
op_plus
l_int|1
comma
l_int|0
comma
id|treble_table
(braket
id|r
)braket
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
DECL|variable|db_table
r_static
r_const
id|u32
id|db_table
(braket
l_int|101
)braket
op_assign
(brace
l_int|0x00000000
comma
l_int|0x01571f82
comma
l_int|0x01674b41
comma
l_int|0x01783a1b
comma
l_int|0x0189f540
comma
l_int|0x019c8651
comma
l_int|0x01aff763
comma
l_int|0x01c45306
comma
l_int|0x01d9a446
comma
l_int|0x01eff6b8
comma
l_int|0x0207567a
comma
l_int|0x021fd03d
comma
l_int|0x0239714c
comma
l_int|0x02544792
comma
l_int|0x027061a1
comma
l_int|0x028dcebb
comma
l_int|0x02ac9edc
comma
l_int|0x02cce2bf
comma
l_int|0x02eeabe8
comma
l_int|0x03120cb0
comma
l_int|0x0337184e
comma
l_int|0x035de2df
comma
l_int|0x03868173
comma
l_int|0x03b10a18
comma
l_int|0x03dd93e9
comma
l_int|0x040c3713
comma
l_int|0x043d0cea
comma
l_int|0x04702ff3
comma
l_int|0x04a5bbf2
comma
l_int|0x04ddcdfb
comma
l_int|0x0518847f
comma
l_int|0x0555ff62
comma
l_int|0x05966005
comma
l_int|0x05d9c95d
comma
l_int|0x06206005
comma
l_int|0x066a4a52
comma
l_int|0x06b7b067
comma
l_int|0x0708bc4c
comma
l_int|0x075d9a01
comma
l_int|0x07b6779d
comma
l_int|0x08138561
comma
l_int|0x0874f5d5
comma
l_int|0x08dafde1
comma
l_int|0x0945d4ed
comma
l_int|0x09b5b4fd
comma
l_int|0x0a2adad1
comma
l_int|0x0aa58605
comma
l_int|0x0b25f936
comma
l_int|0x0bac7a24
comma
l_int|0x0c3951d8
comma
l_int|0x0ccccccc
comma
l_int|0x0d673b17
comma
l_int|0x0e08f093
comma
l_int|0x0eb24510
comma
l_int|0x0f639481
comma
l_int|0x101d3f2d
comma
l_int|0x10dfa9e6
comma
l_int|0x11ab3e3f
comma
l_int|0x12806ac3
comma
l_int|0x135fa333
comma
l_int|0x144960c5
comma
l_int|0x153e2266
comma
l_int|0x163e6cfe
comma
l_int|0x174acbb7
comma
l_int|0x1863d04d
comma
l_int|0x198a1357
comma
l_int|0x1abe349f
comma
l_int|0x1c00db77
comma
l_int|0x1d52b712
comma
l_int|0x1eb47ee6
comma
l_int|0x2026f30f
comma
l_int|0x21aadcb6
comma
l_int|0x23410e7e
comma
l_int|0x24ea64f9
comma
l_int|0x26a7c71d
comma
l_int|0x287a26c4
comma
l_int|0x2a62812c
comma
l_int|0x2c61df84
comma
l_int|0x2e795779
comma
l_int|0x30aa0bcf
comma
l_int|0x32f52cfe
comma
l_int|0x355bf9d8
comma
l_int|0x37dfc033
comma
l_int|0x3a81dda4
comma
l_int|0x3d43c038
comma
l_int|0x4026e73c
comma
l_int|0x432ce40f
comma
l_int|0x46575af8
comma
l_int|0x49a8040f
comma
l_int|0x4d20ac2a
comma
l_int|0x50c335d3
comma
l_int|0x54919a57
comma
l_int|0x588dead1
comma
l_int|0x5cba514a
comma
l_int|0x611911ea
comma
l_int|0x65ac8c2f
comma
l_int|0x6a773c39
comma
l_int|0x6f7bbc23
comma
l_int|0x74bcc56c
comma
l_int|0x7a3d3272
comma
l_int|0x7fffffff
comma
)brace
suffix:semicolon
DECL|function|aps_update_digital
r_static
r_void
id|aps_update_digital
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
)paren
(brace
r_int
id|i
comma
id|l1
comma
id|r1
comma
id|l2
comma
id|r2
suffix:semicolon
id|i
op_assign
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_VOLUME
)braket
)braket
suffix:semicolon
id|l1
op_assign
(paren
id|i
op_amp
l_int|0xff
)paren
suffix:semicolon
id|r1
op_assign
(paren
(paren
id|i
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|i
op_assign
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_PCM
)braket
)braket
suffix:semicolon
id|l2
op_assign
(paren
id|i
op_amp
l_int|0xff
)paren
suffix:semicolon
id|r2
op_assign
(paren
(paren
id|i
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|108
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;digmix
(braket
id|i
)braket
op_ne
id|DM_MUTE
)paren
(brace
r_if
c_cond
(paren
(paren
id|i
op_mod
l_int|18
op_ge
l_int|0
)paren
op_logical_and
(paren
id|i
op_mod
l_int|18
OL
l_int|4
)paren
)paren
id|card-&gt;digmix
(braket
id|i
)braket
op_assign
(paren
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|r1
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|r2
)braket
)paren
suffix:colon
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|l1
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|l2
)braket
)paren
)paren
op_rshift
l_int|31
suffix:semicolon
r_else
id|card-&gt;digmix
(braket
id|i
)braket
op_assign
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
id|db_table
(braket
id|r1
)braket
suffix:colon
id|db_table
(braket
id|l1
)braket
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
comma
l_int|0
comma
id|card-&gt;digmix
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|update_digital
r_static
r_void
id|update_digital
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
)paren
(brace
r_int
id|i
comma
id|k
comma
id|l1
comma
id|r1
comma
id|l2
comma
id|r2
comma
id|l3
comma
id|r3
comma
id|l4
comma
id|r4
suffix:semicolon
id|u64
id|j
suffix:semicolon
id|i
op_assign
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_VOLUME
)braket
)braket
suffix:semicolon
id|l1
op_assign
(paren
id|i
op_amp
l_int|0xff
)paren
suffix:semicolon
id|r1
op_assign
(paren
(paren
id|i
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
suffix:semicolon
id|i
op_assign
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_LINE3
)braket
)braket
suffix:semicolon
id|l2
op_assign
id|i
op_amp
l_int|0xff
suffix:semicolon
id|r2
op_assign
(paren
id|i
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|i
op_assign
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_PCM
)braket
)braket
suffix:semicolon
id|l3
op_assign
id|i
op_amp
l_int|0xff
suffix:semicolon
id|r3
op_assign
(paren
id|i
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|i
op_assign
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_DIGITAL1
)braket
)braket
suffix:semicolon
id|l4
op_assign
id|i
op_amp
l_int|0xff
suffix:semicolon
id|r4
op_assign
(paren
id|i
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|i
op_assign
(paren
id|r1
op_star
id|r2
)paren
op_div
l_int|50
suffix:semicolon
r_if
c_cond
(paren
id|r2
OG
l_int|50
)paren
id|r2
op_assign
l_int|2
op_star
id|r1
op_minus
id|i
suffix:semicolon
r_else
(brace
id|r2
op_assign
id|r1
suffix:semicolon
id|r1
op_assign
id|i
suffix:semicolon
)brace
id|i
op_assign
(paren
id|l1
op_star
id|l2
)paren
op_div
l_int|50
suffix:semicolon
r_if
c_cond
(paren
id|l2
OG
l_int|50
)paren
id|l2
op_assign
l_int|2
op_star
id|l1
op_minus
id|i
suffix:semicolon
r_else
(brace
id|l2
op_assign
id|l1
suffix:semicolon
id|l1
op_assign
id|i
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|36
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;digmix
(braket
id|i
)braket
op_ne
id|DM_MUTE
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
id|i
op_ge
l_int|0
)paren
op_logical_and
(paren
id|i
OL
l_int|4
)paren
)paren
op_logical_or
(paren
(paren
id|i
op_ge
l_int|18
)paren
op_logical_and
(paren
id|i
OL
l_int|22
)paren
)paren
)paren
id|j
op_assign
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|r1
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|r3
)braket
)paren
suffix:colon
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|l1
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|l3
)braket
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|i
op_eq
l_int|6
)paren
op_logical_or
(paren
id|i
op_eq
l_int|7
)paren
op_logical_or
(paren
id|i
op_eq
l_int|24
)paren
op_logical_or
(paren
id|i
op_eq
l_int|25
)paren
)paren
id|j
op_assign
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|r1
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|r4
)braket
)paren
suffix:colon
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|l1
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|l4
)braket
)paren
suffix:semicolon
r_else
id|j
op_assign
(paren
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
id|db_table
(braket
id|r1
)braket
suffix:colon
id|db_table
(braket
id|l1
)braket
)paren
op_lshift
l_int|31
suffix:semicolon
id|card-&gt;digmix
(braket
id|i
)braket
op_assign
id|j
op_rshift
l_int|31
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
comma
l_int|0
comma
id|card-&gt;digmix
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|72
suffix:semicolon
id|i
OL
l_int|90
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;digmix
(braket
id|i
)braket
op_ne
id|DM_MUTE
)paren
(brace
r_if
c_cond
(paren
(paren
id|i
op_ge
l_int|72
)paren
op_logical_and
(paren
id|i
OL
l_int|76
)paren
)paren
id|j
op_assign
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|r2
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|r3
)braket
)paren
suffix:colon
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|l2
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|l3
)braket
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|i
op_eq
l_int|78
)paren
op_logical_or
(paren
id|i
op_eq
l_int|79
)paren
)paren
id|j
op_assign
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|r2
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|r4
)braket
)paren
suffix:colon
(paren
(paren
id|u64
)paren
id|db_table
(braket
id|l2
)braket
op_star
(paren
id|u64
)paren
id|db_table
(braket
id|l4
)braket
)paren
suffix:semicolon
r_else
id|j
op_assign
(paren
(paren
id|i
op_amp
l_int|1
)paren
ques
c_cond
id|db_table
(braket
id|r2
)braket
suffix:colon
id|db_table
(braket
id|l2
)braket
)paren
op_lshift
l_int|31
suffix:semicolon
id|card-&gt;digmix
(braket
id|i
)braket
op_assign
id|j
op_rshift
l_int|31
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
comma
l_int|0
comma
id|card-&gt;digmix
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|36
suffix:semicolon
id|i
op_le
l_int|90
suffix:semicolon
id|i
op_add_assign
l_int|18
)paren
(brace
r_if
c_cond
(paren
id|i
op_ne
l_int|72
)paren
(brace
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|4
suffix:semicolon
id|k
op_increment
)paren
r_if
c_cond
(paren
id|card-&gt;digmix
(braket
id|i
op_plus
id|k
)braket
op_ne
id|DM_MUTE
)paren
(brace
id|card-&gt;digmix
(braket
id|i
op_plus
id|k
)braket
op_assign
id|db_table
(braket
id|l3
)braket
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
op_plus
id|k
comma
l_int|0
comma
id|card-&gt;digmix
(braket
id|i
op_plus
id|k
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|card-&gt;digmix
(braket
id|i
op_plus
l_int|6
)braket
op_ne
id|DM_MUTE
)paren
(brace
id|card-&gt;digmix
(braket
id|i
op_plus
l_int|6
)braket
op_assign
id|db_table
(braket
id|l4
)braket
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
op_plus
l_int|6
comma
l_int|0
comma
id|card-&gt;digmix
(braket
id|i
op_plus
l_int|6
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|card-&gt;digmix
(braket
id|i
op_plus
l_int|7
)braket
op_ne
id|DM_MUTE
)paren
(brace
id|card-&gt;digmix
(braket
id|i
op_plus
l_int|7
)braket
op_assign
id|db_table
(braket
id|r4
)braket
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
op_plus
l_int|7
comma
l_int|0
comma
id|card-&gt;digmix
(braket
id|i
op_plus
l_int|7
)braket
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#ifdef PRIVATE_PCM_VOLUME
multiline_comment|/* calc &amp; set attenuation factor for given channel */
DECL|function|set_pcm_attn
r_static
r_int
id|set_pcm_attn
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
comma
r_int
id|ch
comma
r_int
id|l
)paren
(brace
macro_line|#ifndef PCMLEVEL
DECL|macro|PCMLEVEL
mdefine_line|#define PCMLEVEL 110&t;&t;/* almost silence */
macro_line|#endif
r_int
id|vol
op_assign
id|IFATN_ATTENUATION_MASK
suffix:semicolon
multiline_comment|/* silence */
r_if
c_cond
(paren
id|l
OG
l_int|0
)paren
id|vol
op_assign
(paren
id|PCMLEVEL
op_minus
(paren
id|l
op_star
id|PCMLEVEL
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
suffix:semicolon
id|sblive_writeptr
c_func
(paren
id|card
comma
id|IFATN
comma
id|ch
comma
id|IFATN_FILTERCUTOFF_MASK
op_or
id|vol
)paren
suffix:semicolon
id|DPD
c_func
(paren
l_int|2
comma
l_string|&quot;SOUND_MIXER_PCM: channel:%d  level:%d  attn:%d&bslash;n&quot;
comma
id|ch
comma
id|l
comma
id|vol
)paren
suffix:semicolon
r_return
id|vol
suffix:semicolon
DECL|macro|PCMLEVEL
macro_line|#undef PCMLEVEL
)brace
multiline_comment|/* update value of local PCM volume level (using channel attenuation)&n; *&n; * return 1: in case its local change&n; *        0: if the current process doesn&squot;t have entry in table&n; *&t;     (it means this process have not opened audio (mixer usually)&n; */
DECL|function|update_pcm_attn
r_static
r_int
id|update_pcm_attn
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
comma
r_int
id|l1
comma
r_int
id|r1
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|mixer
op_assign
(paren
id|r1
op_lshift
l_int|8
)paren
op_or
id|l1
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_PCM_CHANNELS
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|files
op_eq
id|current-&gt;files
)paren
(brace
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|mixer
op_assign
id|pcm_last_mixer
op_assign
id|mixer
suffix:semicolon
r_if
c_cond
(paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|opened
)paren
(brace
r_if
c_cond
(paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|channel_r
OL
id|NUM_G
)paren
(brace
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|attn_r
op_assign
id|set_pcm_attn
c_func
(paren
id|card
comma
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|channel_r
comma
id|r1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|channel_l
OL
id|NUM_G
)paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|attn_l
op_assign
id|set_pcm_attn
c_func
(paren
id|card
comma
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|channel_l
comma
id|l1
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* mono voice */
r_if
c_cond
(paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|channel_l
OL
id|NUM_G
)paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|attn_l
op_assign
id|set_pcm_attn
c_func
(paren
id|card
comma
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|channel_l
comma
(paren
id|l1
op_ge
id|r1
)paren
ques
c_cond
id|l1
suffix:colon
id|r1
)paren
suffix:semicolon
multiline_comment|/* to correctly handle mono voice here we would need&n;&t;&t;&t;&t;&t;&t;   to go into stereo mode and move the voice to the right &amp; left&n;&t;&t;&t;&t;&t;&t;   looks a bit overcomplicated... */
)brace
)brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|SOUND_MIXER_PCM
)braket
)braket
op_assign
id|mixer
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|function|emu10k1_mixer_wrch
r_int
id|emu10k1_mixer_wrch
c_func
(paren
r_struct
id|emu10k1_card
op_star
id|card
comma
r_int
r_int
id|ch
comma
r_int
id|val
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|l1
comma
id|r1
suffix:semicolon
id|u16
id|wval
suffix:semicolon
id|l1
op_assign
id|val
op_amp
l_int|0xff
suffix:semicolon
id|r1
op_assign
(paren
id|val
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
r_if
c_cond
(paren
id|l1
OG
l_int|100
)paren
id|l1
op_assign
l_int|100
suffix:semicolon
r_if
c_cond
(paren
id|r1
OG
l_int|100
)paren
id|r1
op_assign
l_int|100
suffix:semicolon
id|DPD
c_func
(paren
l_int|4
comma
l_string|&quot;emu10k1_mixer_wrch() called: ch=%u, l1=%u, r1=%u&bslash;n&quot;
comma
id|ch
comma
id|l1
comma
id|r1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|volidx
(braket
id|ch
)braket
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
macro_line|#ifdef PRIVATE_PCM_VOLUME
r_if
c_cond
(paren
id|ch
op_ne
id|SOUND_MIXER_PCM
)paren
macro_line|#endif
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|ch
)braket
)braket
op_assign
(paren
id|r1
op_lshift
l_int|8
)paren
op_or
id|l1
suffix:semicolon
r_switch
c_cond
(paren
id|ch
)paren
(brace
r_case
id|SOUND_MIXER_VOLUME
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_VOLUME:&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
id|aps_update_digital
c_func
(paren
id|card
)paren
suffix:semicolon
r_else
id|update_digital
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_PCM
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_PCM&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef PRIVATE_PCM_VOLUME
r_if
c_cond
(paren
id|update_pcm_attn
c_func
(paren
id|card
comma
id|l1
comma
id|r1
)paren
)paren
r_return
l_int|0
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
id|aps_update_digital
c_func
(paren
id|card
)paren
suffix:semicolon
r_else
id|update_digital
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
macro_line|#ifdef TONE_CONTROL
r_case
id|SOUND_MIXER_TREBLE
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_TREBLE:&bslash;n&quot;
)paren
suffix:semicolon
id|set_treble
c_func
(paren
id|card
comma
id|l1
comma
id|r1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_BASS
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_BASS:&bslash;n&quot;
)paren
suffix:semicolon
id|set_bass
c_func
(paren
id|card
comma
id|l1
comma
id|r1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_switch
c_cond
(paren
id|ch
)paren
(brace
r_case
id|SOUND_MIXER_DIGITAL1
suffix:colon
r_case
id|SOUND_MIXER_LINE3
suffix:colon
id|DPD
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_%s:&bslash;n&quot;
comma
(paren
id|ch
op_eq
id|SOUND_MIXER_DIGITAL1
)paren
ques
c_cond
l_string|&quot;DIGITAL1&quot;
suffix:colon
l_string|&quot;LINE3&quot;
)paren
suffix:semicolon
id|update_digital
c_func
(paren
id|card
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_DIGITAL2
suffix:colon
r_case
id|SOUND_MIXER_LINE2
suffix:colon
r_case
id|SOUND_MIXER_LINE1
suffix:colon
r_case
id|SOUND_MIXER_LINE
suffix:colon
r_case
id|SOUND_MIXER_CD
suffix:colon
id|DPD
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_%s:&bslash;n&quot;
comma
(paren
id|ch
op_eq
id|SOUND_MIXER_LINE1
)paren
ques
c_cond
l_string|&quot;LINE1&quot;
suffix:colon
(paren
id|ch
op_eq
id|SOUND_MIXER_LINE2
)paren
ques
c_cond
l_string|&quot;LINE2&quot;
suffix:colon
(paren
id|ch
op_eq
id|SOUND_MIXER_LINE
)paren
ques
c_cond
l_string|&quot;LINE&quot;
suffix:colon
(paren
id|ch
op_eq
id|SOUND_MIXER_DIGITAL2
)paren
ques
c_cond
l_string|&quot;DIGITAL2&quot;
suffix:colon
l_string|&quot;CD&quot;
)paren
suffix:semicolon
id|wval
op_assign
(paren
(paren
(paren
(paren
l_int|100
op_minus
id|l1
)paren
op_star
l_int|32
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
op_lshift
l_int|8
)paren
op_or
(paren
(paren
(paren
l_int|100
op_minus
id|r1
)paren
op_star
l_int|32
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
suffix:semicolon
r_if
c_cond
(paren
id|wval
op_eq
l_int|0x2020
)paren
id|wval
op_assign
l_int|0x8000
suffix:semicolon
r_else
id|wval
op_sub_assign
(paren
(paren
id|wval
op_amp
l_int|0x2020
)paren
op_div
l_int|0x20
)paren
suffix:semicolon
id|sblive_writeac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
id|wval
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_OGAIN
suffix:colon
r_case
id|SOUND_MIXER_PHONEIN
suffix:colon
id|DPD
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_%s:&bslash;n&quot;
comma
(paren
id|ch
op_eq
id|SOUND_MIXER_PHONEIN
)paren
ques
c_cond
l_string|&quot;PHONEIN&quot;
suffix:colon
l_string|&quot;OGAIN&quot;
)paren
suffix:semicolon
id|sblive_writeac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
(paren
id|l1
OL
l_int|2
)paren
ques
c_cond
l_int|0x8000
suffix:colon
(paren
(paren
l_int|100
op_minus
id|l1
)paren
op_star
l_int|32
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_SPEAKER
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_SPEAKER:&bslash;n&quot;
)paren
suffix:semicolon
id|sblive_writeac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
(paren
id|l1
OL
l_int|4
)paren
ques
c_cond
l_int|0x8000
suffix:colon
(paren
(paren
(paren
l_int|100
op_minus
id|l1
)paren
op_star
l_int|16
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_MIC
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_MIC:&bslash;n&quot;
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|l1
op_ge
l_int|30
)paren
multiline_comment|/* 20dB / (34.5dB + 12dB + 20dB) * 100 = 30 */
(brace
id|l1
op_sub_assign
l_int|30
suffix:semicolon
id|i
op_assign
l_int|0x40
suffix:semicolon
)brace
id|sblive_writeac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
(paren
id|l1
OL
l_int|2
)paren
ques
c_cond
l_int|0x8000
suffix:colon
(paren
(paren
(paren
(paren
l_int|70
op_minus
id|l1
)paren
op_star
l_int|0x20
op_plus
l_int|35
)paren
op_div
l_int|70
)paren
op_or
id|i
)paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
id|SOUND_MIXER_RECLEV
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_RECLEV:&bslash;n&quot;
)paren
suffix:semicolon
id|wval
op_assign
(paren
(paren
(paren
id|l1
op_star
l_int|16
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
op_lshift
l_int|8
)paren
op_or
(paren
(paren
id|r1
op_star
l_int|16
op_plus
l_int|50
)paren
op_div
l_int|100
)paren
suffix:semicolon
r_if
c_cond
(paren
id|wval
op_eq
l_int|0
)paren
id|wval
op_assign
l_int|0x8000
suffix:semicolon
r_else
(brace
r_if
c_cond
(paren
id|wval
op_amp
l_int|0xff
)paren
id|wval
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|wval
op_amp
l_int|0xff00
)paren
id|wval
op_sub_assign
l_int|0x0100
suffix:semicolon
)brace
id|sblive_writeac97
c_func
(paren
id|card
comma
id|volreg
(braket
id|ch
)braket
comma
id|wval
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_default
suffix:colon
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;Got unknown SOUND_MIXER ioctl&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
DECL|function|emu10k1_mixer_llseek
r_static
id|loff_t
id|emu10k1_mixer_llseek
c_func
(paren
r_struct
id|file
op_star
id|file
comma
id|loff_t
id|offset
comma
r_int
id|origin
)paren
(brace
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;sblive_mixer_llseek() called&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ESPIPE
suffix:semicolon
)brace
multiline_comment|/* Mixer file operations */
multiline_comment|/* FIXME: Do we need spinlocks in here? */
multiline_comment|/* WARNING! not all the ioctl&squot;s are supported by the emu-APS&n;   (anything AC97 related). As a general rule keep the AC97 related ioctls&n;   separate from the rest. This will make it easier to rewrite the mixer&n;   using the kernel AC97 interface. */
DECL|function|emu10k1_mixer_ioctl
r_static
r_int
id|emu10k1_mixer_ioctl
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_static
r_const
r_char
id|id
(braket
)braket
op_assign
l_string|&quot;SBLive&quot;
suffix:semicolon
r_static
r_const
r_char
id|name
(braket
)braket
op_assign
l_string|&quot;Creative SBLive&quot;
suffix:semicolon
r_int
id|i
comma
id|val
suffix:semicolon
r_struct
id|emu10k1_card
op_star
id|card
op_assign
(paren
r_struct
id|emu10k1_card
op_star
)paren
id|file-&gt;private_data
suffix:semicolon
id|u16
id|reg
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SOUND_MIXER_INFO
suffix:colon
(brace
id|mixer_info
id|info
suffix:semicolon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_INFO&bslash;n&quot;
)paren
suffix:semicolon
id|strncpy
c_func
(paren
id|info.id
comma
id|id
comma
r_sizeof
(paren
id|info.id
)paren
)paren
suffix:semicolon
id|strncpy
c_func
(paren
id|info.name
comma
id|name
comma
r_sizeof
(paren
id|info.name
)paren
)paren
suffix:semicolon
id|info.modify_counter
op_assign
id|card-&gt;modcnt
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
op_amp
id|info
comma
r_sizeof
(paren
id|info
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|SOUND_OLD_MIXER_INFO
suffix:colon
(brace
id|_old_mixer_info
id|info
suffix:semicolon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_OLD_MIXER_INFO&bslash;n&quot;
)paren
suffix:semicolon
id|strncpy
c_func
(paren
id|info.id
comma
id|id
comma
r_sizeof
(paren
id|info.id
)paren
)paren
suffix:semicolon
id|strncpy
c_func
(paren
id|info.name
comma
id|name
comma
r_sizeof
(paren
id|info.name
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
op_amp
id|info
comma
r_sizeof
(paren
id|info
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|OSS_GETVERSION
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;OSS_GETVERSION&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|SOUND_VERSION
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_PRIVATE1
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_PRIVATE1&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
id|card-&gt;digmix
comma
r_sizeof
(paren
id|card-&gt;digmix
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_PRIVATE2
suffix:colon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_PRIVATE2&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
id|card-&gt;digmix
comma
(paren
r_void
op_star
)paren
id|arg
comma
r_sizeof
(paren
id|card-&gt;digmix
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|card-&gt;digmix
)paren
op_div
r_sizeof
(paren
id|card-&gt;digmix
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|i
op_increment
)paren
id|sblive_writeptr
c_func
(paren
id|card
comma
id|FXGPREGBASE
op_plus
l_int|0x10
op_plus
id|i
comma
l_int|0
comma
(paren
id|card-&gt;digmix
(braket
id|i
)braket
op_amp
id|DM_MUTE
)paren
ques
c_cond
l_int|0
suffix:colon
id|card-&gt;digmix
(braket
id|i
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_PRIVATE3
suffix:colon
(brace
r_struct
id|mixer_private_ioctl
id|ctl
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|ctl
comma
(paren
r_void
op_star
)paren
id|arg
comma
r_sizeof
(paren
r_struct
id|mixer_private_ioctl
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_switch
c_cond
(paren
id|ctl.cmd
)paren
(brace
macro_line|#ifdef EMU10K1_DEBUG
r_case
id|CMD_WRITEFN0
suffix:colon
id|emu10k1_writefn0
c_func
(paren
id|card
comma
id|ctl.val
(braket
l_int|0
)braket
comma
id|ctl.val
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CMD_WRITEPTR
suffix:colon
r_if
c_cond
(paren
id|ctl.val
(braket
l_int|1
)braket
op_ge
l_int|0x40
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ctl.val
(braket
l_int|0
)braket
OG
l_int|0xff
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ctl.val
(braket
l_int|0
)braket
op_amp
l_int|0x7ff
)paren
OG
l_int|0x3f
)paren
(brace
id|ctl.val
(braket
l_int|1
)braket
op_assign
l_int|0x00
suffix:semicolon
)brace
id|sblive_writeptr
c_func
(paren
id|card
comma
id|ctl.val
(braket
l_int|0
)braket
comma
id|ctl.val
(braket
l_int|1
)braket
comma
id|ctl.val
(braket
l_int|2
)braket
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_case
id|CMD_READFN0
suffix:colon
id|ctl.val
(braket
l_int|2
)braket
op_assign
id|emu10k1_readfn0
c_func
(paren
id|card
comma
id|ctl.val
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
op_amp
id|ctl
comma
r_sizeof
(paren
r_struct
id|mixer_private_ioctl
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CMD_READPTR
suffix:colon
r_if
c_cond
(paren
id|ctl.val
(braket
l_int|1
)braket
op_ge
l_int|0x40
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ctl.val
(braket
l_int|0
)braket
op_amp
l_int|0x7ff
)paren
OG
l_int|0xff
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ctl.val
(braket
l_int|0
)braket
op_amp
l_int|0x7ff
)paren
OG
l_int|0x3f
)paren
(brace
id|ctl.val
(braket
l_int|1
)braket
op_assign
l_int|0x00
suffix:semicolon
)brace
id|ctl.val
(braket
l_int|2
)braket
op_assign
id|sblive_readptr
c_func
(paren
id|card
comma
id|ctl.val
(braket
l_int|0
)braket
comma
id|ctl.val
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
op_amp
id|ctl
comma
r_sizeof
(paren
r_struct
id|mixer_private_ioctl
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CMD_SETRECSRC
suffix:colon
r_switch
c_cond
(paren
id|ctl.val
(braket
l_int|0
)braket
)paren
(brace
r_case
id|WAVERECORD_AC97
suffix:colon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|card-&gt;wavein.recsrc
op_assign
id|WAVERECORD_AC97
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WAVERECORD_MIC
suffix:colon
id|card-&gt;wavein.recsrc
op_assign
id|WAVERECORD_MIC
suffix:semicolon
r_break
suffix:semicolon
r_case
id|WAVERECORD_FX
suffix:colon
id|card-&gt;wavein.recsrc
op_assign
id|WAVERECORD_FX
suffix:semicolon
id|card-&gt;wavein.fxwc
op_assign
id|ctl.val
(braket
l_int|1
)braket
op_amp
l_int|0xffff
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|card-&gt;wavein.fxwc
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CMD_GETRECSRC
suffix:colon
id|ctl.val
(braket
l_int|0
)braket
op_assign
id|card-&gt;wavein.recsrc
suffix:semicolon
id|ctl.val
(braket
l_int|1
)braket
op_assign
id|card-&gt;wavein.fxwc
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
op_amp
id|ctl
comma
r_sizeof
(paren
r_struct
id|mixer_private_ioctl
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CMD_GETVOICEPARAM
suffix:colon
id|ctl.val
(braket
l_int|0
)braket
op_assign
id|card-&gt;waveout.send_routing
(braket
l_int|0
)braket
suffix:semicolon
id|ctl.val
(braket
l_int|1
)braket
op_assign
id|card-&gt;waveout.send_a
(braket
l_int|0
)braket
op_or
id|card-&gt;waveout.send_b
(braket
l_int|0
)braket
op_lshift
l_int|8
op_or
id|card-&gt;waveout.send_c
(braket
l_int|0
)braket
op_lshift
l_int|16
op_or
id|card-&gt;waveout.send_d
(braket
l_int|0
)braket
op_lshift
l_int|24
suffix:semicolon
id|ctl.val
(braket
l_int|2
)braket
op_assign
id|card-&gt;waveout.send_routing
(braket
l_int|1
)braket
suffix:semicolon
id|ctl.val
(braket
l_int|3
)braket
op_assign
id|card-&gt;waveout.send_a
(braket
l_int|1
)braket
op_or
id|card-&gt;waveout.send_b
(braket
l_int|1
)braket
op_lshift
l_int|8
op_or
id|card-&gt;waveout.send_c
(braket
l_int|1
)braket
op_lshift
l_int|16
op_or
id|card-&gt;waveout.send_d
(braket
l_int|1
)braket
op_lshift
l_int|24
suffix:semicolon
id|ctl.val
(braket
l_int|4
)braket
op_assign
id|card-&gt;waveout.send_routing
(braket
l_int|2
)braket
suffix:semicolon
id|ctl.val
(braket
l_int|5
)braket
op_assign
id|card-&gt;waveout.send_a
(braket
l_int|2
)braket
op_or
id|card-&gt;waveout.send_b
(braket
l_int|2
)braket
op_lshift
l_int|8
op_or
id|card-&gt;waveout.send_c
(braket
l_int|2
)braket
op_lshift
l_int|16
op_or
id|card-&gt;waveout.send_d
(braket
l_int|2
)braket
op_lshift
l_int|24
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_void
op_star
)paren
id|arg
comma
op_amp
id|ctl
comma
r_sizeof
(paren
r_struct
id|mixer_private_ioctl
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CMD_SETVOICEPARAM
suffix:colon
id|card-&gt;waveout.send_routing
(braket
l_int|0
)braket
op_assign
id|ctl.val
(braket
l_int|0
)braket
op_amp
l_int|0xffff
suffix:semicolon
id|card-&gt;waveout.send_a
(braket
l_int|0
)braket
op_assign
id|ctl.val
(braket
l_int|1
)braket
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_b
(braket
l_int|0
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|1
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_c
(braket
l_int|0
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|1
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_d
(braket
l_int|0
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|1
)braket
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_routing
(braket
l_int|1
)braket
op_assign
id|ctl.val
(braket
l_int|2
)braket
op_amp
l_int|0xffff
suffix:semicolon
id|card-&gt;waveout.send_a
(braket
l_int|1
)braket
op_assign
id|ctl.val
(braket
l_int|3
)braket
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_b
(braket
l_int|1
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|3
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_c
(braket
l_int|1
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|3
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_d
(braket
l_int|1
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|3
)braket
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_routing
(braket
l_int|2
)braket
op_assign
id|ctl.val
(braket
l_int|4
)braket
op_amp
l_int|0xffff
suffix:semicolon
id|card-&gt;waveout.send_a
(braket
l_int|2
)braket
op_assign
id|ctl.val
(braket
l_int|5
)braket
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_b
(braket
l_int|2
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|5
)braket
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_c
(braket
l_int|2
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|5
)braket
op_rshift
l_int|16
)paren
op_amp
l_int|0xff
suffix:semicolon
id|card-&gt;waveout.send_d
(braket
l_int|2
)braket
op_assign
(paren
id|ctl.val
(braket
l_int|5
)braket
op_rshift
l_int|24
)paren
op_amp
l_int|0xff
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|SOUND_MIXER_PRIVATE4
suffix:colon
(brace
id|u32
id|size
suffix:semicolon
r_int
id|size_reg
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
c_func
(paren
op_amp
id|size
comma
(paren
r_void
op_star
)paren
id|arg
comma
r_sizeof
(paren
id|size
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|DPD
c_func
(paren
l_int|2
comma
l_string|&quot;External tram size 0x%x&bslash;n&quot;
comma
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|size
OG
l_int|0x1fffff
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|size
op_ne
l_int|0
)paren
(brace
id|size
op_assign
(paren
id|size
op_minus
l_int|1
)paren
op_rshift
l_int|14
suffix:semicolon
r_while
c_loop
(paren
id|size
)paren
(brace
id|size
op_rshift_assign
l_int|1
suffix:semicolon
id|size_reg
op_increment
suffix:semicolon
)brace
id|size
op_assign
l_int|0x4000
op_lshift
id|size_reg
suffix:semicolon
)brace
id|DPD
c_func
(paren
l_int|2
comma
l_string|&quot;External tram size 0x%x 0x%x&bslash;n&quot;
comma
id|size
comma
id|size_reg
)paren
suffix:semicolon
r_if
c_cond
(paren
id|size
op_ne
id|card-&gt;tankmem.size
)paren
(brace
r_if
c_cond
(paren
id|card-&gt;tankmem.size
OG
l_int|0
)paren
(brace
id|emu10k1_writefn0
c_func
(paren
id|card
comma
id|HCFG_LOCKTANKCACHE
comma
l_int|1
)paren
suffix:semicolon
id|sblive_writeptr_tag
c_func
(paren
id|card
comma
l_int|0
comma
id|TCB
comma
l_int|0
comma
id|TCBS
comma
l_int|0
comma
id|TAGLIST_END
)paren
suffix:semicolon
id|pci_free_consistent
c_func
(paren
id|card-&gt;pci_dev
comma
id|card-&gt;tankmem.size
comma
id|card-&gt;tankmem.addr
comma
id|card-&gt;tankmem.dma_handle
)paren
suffix:semicolon
id|card-&gt;tankmem.size
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|size
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
(paren
id|card-&gt;tankmem.addr
op_assign
id|pci_alloc_consistent
c_func
(paren
id|card-&gt;pci_dev
comma
id|size
comma
op_amp
id|card-&gt;tankmem.dma_handle
)paren
)paren
op_eq
l_int|NULL
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|card-&gt;tankmem.size
op_assign
id|size
suffix:semicolon
id|sblive_writeptr_tag
c_func
(paren
id|card
comma
l_int|0
comma
id|TCB
comma
id|card-&gt;tankmem.dma_handle
comma
id|TCBS
comma
id|size_reg
comma
id|TAGLIST_END
)paren
suffix:semicolon
id|emu10k1_writefn0
c_func
(paren
id|card
comma
id|HCFG_LOCKTANKCACHE
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|_IOC_TYPE
c_func
(paren
id|cmd
)paren
op_ne
l_char|&squot;M&squot;
op_logical_or
id|_IOC_SIZE
c_func
(paren
id|cmd
)paren
op_ne
r_sizeof
(paren
r_int
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|_IOC_DIR
c_func
(paren
id|cmd
)paren
op_eq
id|_IOC_READ
)paren
(brace
r_switch
c_cond
(paren
id|_IOC_NR
c_func
(paren
id|cmd
)paren
)paren
(brace
r_case
id|SOUND_MIXER_DEVMASK
suffix:colon
multiline_comment|/* Arg contains a bit for each supported device */
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_READ_DEVMASK&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
macro_line|#ifdef TONE_CONTROL
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_BASS
op_or
id|SOUND_MASK_TREBLE
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#else
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef TONE_CONTROL
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_LINE
op_or
id|SOUND_MASK_CD
op_or
id|SOUND_MASK_OGAIN
op_or
id|SOUND_MASK_LINE1
op_or
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_PHONEIN
op_or
id|SOUND_MASK_MIC
op_or
id|SOUND_MASK_BASS
op_or
id|SOUND_MASK_TREBLE
op_or
id|SOUND_MASK_RECLEV
op_or
id|SOUND_MASK_SPEAKER
op_or
id|SOUND_MASK_LINE3
op_or
id|SOUND_MASK_DIGITAL1
op_or
id|SOUND_MASK_DIGITAL2
op_or
id|SOUND_MASK_LINE2
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#else
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_LINE
op_or
id|SOUND_MASK_CD
op_or
id|SOUND_MASK_OGAIN
op_or
id|SOUND_MASK_LINE1
op_or
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_PHONEIN
op_or
id|SOUND_MASK_MIC
op_or
id|SOUND_MASK_RECLEV
op_or
id|SOUND_MASK_SPEAKER
op_or
id|SOUND_MASK_LINE3
op_or
id|SOUND_MASK_DIGITAL1
op_or
id|SOUND_MASK_DIGITAL2
op_or
id|SOUND_MASK_LINE2
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#endif
r_case
id|SOUND_MIXER_RECMASK
suffix:colon
multiline_comment|/* Arg contains a bit for each supported recording source */
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;SOUND_MIXER_READ_RECMASK&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
r_return
id|put_user
c_func
(paren
l_int|0
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_MIC
op_or
id|SOUND_MASK_CD
op_or
id|SOUND_MASK_LINE1
op_or
id|SOUND_MASK_LINE
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_OGAIN
op_or
id|SOUND_MASK_PHONEIN
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_case
id|SOUND_MIXER_STEREODEVS
suffix:colon
multiline_comment|/* Mixer channels supporting stereo */
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;SOUND_MIXER_READ_STEREODEVS&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
macro_line|#ifdef TONE_CONTROL
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_BASS
op_or
id|SOUND_MASK_TREBLE
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#else
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef TONE_CONTROL
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_LINE
op_or
id|SOUND_MASK_CD
op_or
id|SOUND_MASK_OGAIN
op_or
id|SOUND_MASK_LINE1
op_or
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_BASS
op_or
id|SOUND_MASK_TREBLE
op_or
id|SOUND_MASK_RECLEV
op_or
id|SOUND_MASK_LINE3
op_or
id|SOUND_MASK_DIGITAL1
op_or
id|SOUND_MASK_DIGITAL2
op_or
id|SOUND_MASK_LINE2
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#else
r_return
id|put_user
c_func
(paren
id|SOUND_MASK_LINE
op_or
id|SOUND_MASK_CD
op_or
id|SOUND_MASK_OGAIN
op_or
id|SOUND_MASK_LINE1
op_or
id|SOUND_MASK_PCM
op_or
id|SOUND_MASK_VOLUME
op_or
id|SOUND_MASK_RECLEV
op_or
id|SOUND_MASK_LINE3
op_or
id|SOUND_MASK_DIGITAL1
op_or
id|SOUND_MASK_DIGITAL2
op_or
id|SOUND_MASK_LINE2
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#endif
r_case
id|SOUND_MIXER_CAPS
suffix:colon
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;SOUND_MIXER_READ_CAPS&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|SOUND_CAP_EXCL_INPUT
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#ifdef PRIVATE_PCM_VOLUME
r_case
id|SOUND_MIXER_PCM
suffix:colon
multiline_comment|/* needs to be before default: !!*/
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_PCM_CHANNELS
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|files
op_eq
id|current-&gt;files
)paren
(brace
r_return
id|put_user
c_func
(paren
(paren
r_int
)paren
id|sblive_pcm_volume
(braket
id|i
)braket
dot
id|mixer
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|_IOC_NR
c_func
(paren
id|cmd
)paren
)paren
(brace
r_case
id|SOUND_MIXER_RECSRC
suffix:colon
multiline_comment|/* Arg contains a bit for each recording source */
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;SOUND_MIXER_READ_RECSRC&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
r_return
id|put_user
c_func
(paren
l_int|0
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
id|sblive_readac97
c_func
(paren
id|card
comma
id|AC97_RECORDSELECT
comma
op_amp
id|reg
)paren
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|recsrc
(braket
id|reg
op_amp
l_int|7
)braket
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
r_default
suffix:colon
id|i
op_assign
id|_IOC_NR
c_func
(paren
id|cmd
)paren
suffix:semicolon
id|DPD
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_READ(%d)&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ge
id|SOUND_MIXER_NRDEVICES
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
macro_line|#ifdef OSS_DOCUMENTED_MIXER_SEMANTICS
r_return
id|mixer_rdch
c_func
(paren
id|card
comma
id|i
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#else&t;&t;&t;&t;/* OSS_DOCUMENTED_MIXER_SEMANTICS */
r_if
c_cond
(paren
op_logical_neg
id|volidx
(braket
id|i
)braket
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_return
id|put_user
c_func
(paren
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|i
)braket
)braket
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#endif&t;&t;&t;&t;/* OSS_DOCUMENTED_MIXER_SEMANTICS */
)brace
)brace
multiline_comment|/* End of _IOC_READ */
r_if
c_cond
(paren
id|_IOC_DIR
c_func
(paren
id|cmd
)paren
op_ne
(paren
id|_IOC_READ
op_or
id|_IOC_WRITE
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* _IOC_WRITE */
id|card-&gt;modcnt
op_increment
suffix:semicolon
r_switch
c_cond
(paren
id|_IOC_NR
c_func
(paren
id|cmd
)paren
)paren
(brace
r_case
id|SOUND_MIXER_RECSRC
suffix:colon
multiline_comment|/* Arg contains a bit for each recording source */
id|DPF
c_func
(paren
l_int|2
comma
l_string|&quot;SOUND_MIXER_WRITE_RECSRC&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;isaps
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|val
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|i
op_assign
id|hweight32
c_func
(paren
id|val
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_eq
l_int|0
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* val = mixer_recmask(s); */
r_else
r_if
c_cond
(paren
id|i
OG
l_int|1
)paren
(brace
id|sblive_readac97
c_func
(paren
id|card
comma
id|AC97_RECORDSELECT
comma
op_amp
id|reg
)paren
suffix:semicolon
id|val
op_and_assign
op_complement
id|recsrc
(braket
id|reg
op_amp
l_int|7
)braket
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|val
op_amp
id|recsrc
(braket
id|i
)braket
)paren
(brace
id|DPD
c_func
(paren
l_int|2
comma
l_string|&quot;Selecting record source to be 0x%04x&bslash;n&quot;
comma
l_int|0x0101
op_star
id|i
)paren
suffix:semicolon
id|sblive_writeac97
c_func
(paren
id|card
comma
id|AC97_RECORDSELECT
comma
l_int|0x0101
op_star
id|i
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
r_default
suffix:colon
id|i
op_assign
id|_IOC_NR
c_func
(paren
id|cmd
)paren
suffix:semicolon
id|DPD
c_func
(paren
l_int|4
comma
l_string|&quot;SOUND_MIXER_WRITE(%d)&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ge
id|SOUND_MIXER_NRDEVICES
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|val
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|emu10k1_mixer_wrch
c_func
(paren
id|card
comma
id|i
comma
id|val
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
macro_line|#ifdef OSS_DOCUMENTED_MIXER_SEMANTICS
r_return
id|mixer_rdch
c_func
(paren
id|card
comma
id|i
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#else&t;&t;&t;&t;/* OSS_DOCUMENTED_MIXER_SEMANTICS */
r_return
id|put_user
c_func
(paren
id|card-&gt;arrwVol
(braket
id|volidx
(braket
id|i
)braket
)braket
comma
(paren
r_int
op_star
)paren
id|arg
)paren
suffix:semicolon
macro_line|#endif&t;&t;&t;&t;/* OSS_DOCUMENTED_MIXER_SEMANTICS */
)brace
)brace
DECL|function|emu10k1_mixer_open
r_static
r_int
id|emu10k1_mixer_open
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
r_int
id|minor
op_assign
id|MINOR
c_func
(paren
id|inode-&gt;i_rdev
)paren
suffix:semicolon
r_struct
id|emu10k1_card
op_star
id|card
suffix:semicolon
r_struct
id|list_head
op_star
id|entry
suffix:semicolon
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;emu10k1_mixer_open()&bslash;n&quot;
)paren
suffix:semicolon
id|list_for_each
c_func
(paren
id|entry
comma
op_amp
id|emu10k1_devs
)paren
(brace
id|card
op_assign
id|list_entry
c_func
(paren
id|entry
comma
r_struct
id|emu10k1_card
comma
id|list
)paren
suffix:semicolon
r_if
c_cond
(paren
id|card-&gt;mixer_num
op_eq
id|minor
)paren
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|entry
op_eq
op_amp
id|emu10k1_devs
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|file-&gt;private_data
op_assign
id|card
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|emu10k1_mixer_release
r_static
r_int
id|emu10k1_mixer_release
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
id|DPF
c_func
(paren
l_int|4
comma
l_string|&quot;emu10k1_mixer_release()&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|emu10k1_mixer_fops
r_struct
id|file_operations
id|emu10k1_mixer_fops
op_assign
(brace
id|owner
suffix:colon
id|THIS_MODULE
comma
id|llseek
suffix:colon
id|emu10k1_mixer_llseek
comma
id|ioctl
suffix:colon
id|emu10k1_mixer_ioctl
comma
id|open
suffix:colon
id|emu10k1_mixer_open
comma
id|release
suffix:colon
id|emu10k1_mixer_release
comma
)brace
suffix:semicolon
eof
