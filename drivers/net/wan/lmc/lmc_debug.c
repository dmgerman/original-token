macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/netdevice.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &quot;lmc_ver.h&quot;
macro_line|#include &quot;lmc_debug.h&quot;
multiline_comment|/*&n; * Prints out len, max to 80 octets using printk, 20 per line&n; */
DECL|function|lmcConsoleLog
r_void
id|lmcConsoleLog
c_func
(paren
r_char
op_star
id|type
comma
r_int
r_char
op_star
id|ucData
comma
r_int
id|iLen
)paren
(brace
macro_line|#ifdef DEBUG
macro_line|#ifdef LMC_PACKET_LOG
r_int
id|iNewLine
op_assign
l_int|1
suffix:semicolon
r_char
id|str
(braket
l_int|80
)braket
comma
op_star
id|pstr
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
id|KERN_DEBUG
l_string|&quot;lmc: %s: &quot;
comma
id|type
)paren
suffix:semicolon
id|pstr
op_assign
id|str
op_plus
id|strlen
c_func
(paren
id|str
)paren
suffix:semicolon
r_if
c_cond
(paren
id|iLen
OG
l_int|240
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;lmc: Printing 240 chars... out of: %d&bslash;n&quot;
comma
id|iLen
)paren
suffix:semicolon
id|iLen
op_assign
l_int|240
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;lmc: Printing %d chars&bslash;n&quot;
comma
id|iLen
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|iLen
OG
l_int|0
)paren
(brace
id|sprintf
c_func
(paren
id|pstr
comma
l_string|&quot;%02x &quot;
comma
op_star
id|ucData
)paren
suffix:semicolon
id|pstr
op_add_assign
l_int|3
suffix:semicolon
id|ucData
op_increment
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|iNewLine
op_mod
l_int|20
)paren
)paren
(brace
id|sprintf
c_func
(paren
id|pstr
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|str
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|str
comma
id|KERN_DEBUG
l_string|&quot;lmc: %s: &quot;
comma
id|type
)paren
suffix:semicolon
id|pstr
op_assign
id|str
op_plus
id|strlen
c_func
(paren
id|str
)paren
suffix:semicolon
)brace
id|iNewLine
op_increment
suffix:semicolon
id|iLen
op_decrement
suffix:semicolon
)brace
id|sprintf
c_func
(paren
id|pstr
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|str
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
)brace
macro_line|#ifdef DEBUG
DECL|variable|lmcEventLogIndex
id|u_int32_t
id|lmcEventLogIndex
op_assign
l_int|0
suffix:semicolon
DECL|variable|lmcEventLogBuf
id|u_int32_t
id|lmcEventLogBuf
(braket
id|LMC_EVENTLOGSIZE
op_star
id|LMC_EVENTLOGARGS
)braket
suffix:semicolon
macro_line|#endif
DECL|function|lmcEventLog
r_void
id|lmcEventLog
(paren
id|u_int32_t
id|EventNum
comma
id|u_int32_t
id|arg2
comma
id|u_int32_t
id|arg3
)paren
(brace
macro_line|#ifdef DEBUG
id|lmcEventLogBuf
(braket
id|lmcEventLogIndex
op_increment
)braket
op_assign
id|EventNum
suffix:semicolon
id|lmcEventLogBuf
(braket
id|lmcEventLogIndex
op_increment
)braket
op_assign
id|arg2
suffix:semicolon
id|lmcEventLogBuf
(braket
id|lmcEventLogIndex
op_increment
)braket
op_assign
id|arg3
suffix:semicolon
id|lmcEventLogBuf
(braket
id|lmcEventLogIndex
op_increment
)braket
op_assign
id|jiffies
suffix:semicolon
id|lmcEventLogIndex
op_and_assign
(paren
id|LMC_EVENTLOGSIZE
op_star
id|LMC_EVENTLOGARGS
)paren
op_minus
l_int|1
suffix:semicolon
macro_line|#endif
)brace
DECL|function|lmc_trace
r_inline
r_void
(def_block
id|lmc_trace
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_char
op_star
id|msg
)paren
(brace
macro_line|#ifdef LMC_TRACE
r_int
r_int
id|j
op_assign
id|jiffies
op_plus
l_int|3
suffix:semicolon
multiline_comment|/* Wait for 50 ms */
r_if
c_cond
(paren
id|in_interrupt
c_func
(paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: * %s&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|msg
)paren
suffix:semicolon
singleline_comment|//        while(jiffies &lt; j+10)
singleline_comment|//            ;
)brace
r_else
(brace
id|printk
c_func
(paren
l_string|&quot;%s: %s&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|msg
)paren
suffix:semicolon
r_while
c_loop
(paren
id|jiffies
OL
id|j
)paren
(brace
id|schedule
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
)brace
)def_block
multiline_comment|/* --------------------------- end if_lmc_linux.c ------------------------ */
eof
