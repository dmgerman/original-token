multiline_comment|/* netdrv_init.c: Initialization for network devices. */
multiline_comment|/*&n;&t;Written 1993,1994,1995 by Donald Becker.&n;&n;&t;The author may be reached as becker@cesdis.gsfc.nasa.gov or&n;&t;C/O Center of Excellence in Space Data and Information Sciences&n;&t;&t;Code 930.5, Goddard Space Flight Center, Greenbelt MD 20771&n;&n;&t;This file contains the initialization for the &quot;pl14+&quot; style ethernet&n;&t;drivers.  It should eventually replace most of drivers/net/Space.c.&n;&t;It&squot;s primary advantage is that it&squot;s able to allocate low-memory buffers.&n;&t;A secondary advantage is that the dangerous NE*000 netcards can reserve&n;&t;their I/O port region before the SCSI probes start.&n;&n;&t;Modifications/additions by Bjorn Ekwall &lt;bj0rn@blox.se&gt;:&n;&t;&t;ethdev_index[MAX_ETH_CARDS]&n;&t;&t;register_netdev() / unregister_netdev()&n;*/
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/if_ether.h&gt;
macro_line|#include &lt;linux/if_arp.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/netdevice.h&gt;
macro_line|#include &lt;linux/etherdevice.h&gt;
macro_line|#include &lt;linux/trdevice.h&gt;
multiline_comment|/* The network devices currently exist only in the socket namespace, so these&n;   entries are unused.  The only ones that make sense are&n;    open&t;start the ethercard&n;    close&t;stop  the ethercard&n;    ioctl&t;To get statistics, perhaps set the interface port (AUI, BNC, etc.)&n;   One can also imagine getting raw packets using&n;    read &amp; write&n;   but this is probably better handled by a raw packet socket.&n;&n;   Given that almost all of these functions are handled in the current&n;   socket-based scheme, putting ethercard devices in /dev/ seems pointless.&n;   &n;   [Removed all support for /dev network devices. When someone adds&n;    streams then by magic we get them, but otherwise they are un-needed&n;&t;and a space waste]&n;*/
multiline_comment|/* The list of used and available &quot;eth&quot; slots (for &quot;eth0&quot;, &quot;eth1&quot;, etc.) */
DECL|macro|MAX_ETH_CARDS
mdefine_line|#define MAX_ETH_CARDS 16 /* same as the number if irq&squot;s in irq2dev[] */
DECL|variable|ethdev_index
r_static
r_struct
id|device
op_star
id|ethdev_index
(braket
id|MAX_ETH_CARDS
)braket
suffix:semicolon
r_int
r_int
id|lance_init
c_func
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
suffix:semicolon
r_int
r_int
id|pi_init
c_func
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
suffix:semicolon
r_int
r_int
id|apricot_init
c_func
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
suffix:semicolon
r_int
r_int
id|dec21040_init
c_func
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
suffix:semicolon
multiline_comment|/*&n;  net_dev_init() is our network device initialization routine.&n;  It&squot;s called from init/main.c with the start and end of free memory,&n;  and returns the new start of free memory.&n;  */
DECL|function|net_dev_init
r_int
r_int
id|net_dev_init
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
(brace
multiline_comment|/* Network device initialization for devices that must allocate&n;&t;   low-memory or contiguous DMA buffers.&n;&t;   */
macro_line|#if defined(CONFIG_LANCE)
id|mem_start
op_assign
id|lance_init
c_func
(paren
id|mem_start
comma
id|mem_end
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if defined(CONFIG_PI)
id|mem_start
op_assign
id|pi_init
c_func
(paren
id|mem_start
comma
id|mem_end
)paren
suffix:semicolon
macro_line|#endif&t;
macro_line|#if defined(CONFIG_DEC_ELCP)
id|mem_start
op_assign
id|dec21040_init
c_func
(paren
id|mem_start
comma
id|mem_end
)paren
suffix:semicolon
macro_line|#endif&t;
r_return
id|mem_start
suffix:semicolon
)brace
multiline_comment|/* Fill in the fields of the device structure with ethernet-generic values.&n;&n;   If no device structure is passed, a new one is constructed, complete with&n;   a SIZEOF_PRIVATE private data area.&n;&n;   If an empty string area is passed as dev-&gt;name, or a new structure is made,&n;   a new name string is constructed.  The passed string area should be 8 bytes&n;   long.&n; */
r_struct
id|device
op_star
DECL|function|init_etherdev
id|init_etherdev
c_func
(paren
r_struct
id|device
op_star
id|dev
comma
r_int
id|sizeof_priv
comma
r_int
r_int
op_star
id|mem_startp
)paren
(brace
r_int
id|new_device
op_assign
l_int|0
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Use an existing correctly named device in Space.c:dev_base. */
r_if
c_cond
(paren
id|dev
op_eq
l_int|NULL
)paren
(brace
r_int
id|alloc_size
op_assign
r_sizeof
(paren
r_struct
id|device
)paren
op_plus
r_sizeof
(paren
l_string|&quot;eth%d  &quot;
)paren
op_plus
id|sizeof_priv
op_plus
l_int|3
suffix:semicolon
r_struct
id|device
op_star
id|cur_dev
suffix:semicolon
r_char
id|pname
(braket
l_int|8
)braket
suffix:semicolon
multiline_comment|/* Putative name for the device.  */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_ETH_CARDS
suffix:semicolon
op_increment
id|i
)paren
r_if
c_cond
(paren
id|ethdev_index
(braket
id|i
)braket
op_eq
l_int|NULL
)paren
(brace
id|sprintf
c_func
(paren
id|pname
comma
l_string|&quot;eth%d&quot;
comma
id|i
)paren
suffix:semicolon
r_for
c_loop
(paren
id|cur_dev
op_assign
id|dev_base
suffix:semicolon
id|cur_dev
suffix:semicolon
id|cur_dev
op_assign
id|cur_dev-&gt;next
)paren
r_if
c_cond
(paren
id|strcmp
c_func
(paren
id|pname
comma
id|cur_dev-&gt;name
)paren
op_eq
l_int|0
)paren
(brace
id|dev
op_assign
id|cur_dev
suffix:semicolon
id|dev-&gt;init
op_assign
l_int|NULL
suffix:semicolon
id|sizeof_priv
op_assign
(paren
id|sizeof_priv
op_plus
l_int|3
)paren
op_amp
op_complement
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|mem_startp
op_logical_and
op_star
id|mem_startp
)paren
(brace
id|dev-&gt;priv
op_assign
(paren
r_void
op_star
)paren
op_star
id|mem_startp
suffix:semicolon
op_star
id|mem_startp
op_add_assign
id|sizeof_priv
suffix:semicolon
)brace
r_else
id|dev-&gt;priv
op_assign
id|sizeof_priv
ques
c_cond
id|kmalloc
c_func
(paren
id|sizeof_priv
comma
id|GFP_KERNEL
)paren
suffix:colon
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|dev-&gt;priv
)paren
id|memset
c_func
(paren
id|dev-&gt;priv
comma
l_int|0
comma
id|sizeof_priv
)paren
suffix:semicolon
r_goto
id|found
suffix:semicolon
)brace
)brace
id|alloc_size
op_and_assign
op_complement
l_int|3
suffix:semicolon
multiline_comment|/* Round to dword boundary. */
r_if
c_cond
(paren
id|mem_startp
op_logical_and
op_star
id|mem_startp
)paren
(brace
id|dev
op_assign
(paren
r_struct
id|device
op_star
)paren
op_star
id|mem_startp
suffix:semicolon
op_star
id|mem_startp
op_add_assign
id|alloc_size
suffix:semicolon
)brace
r_else
id|dev
op_assign
(paren
r_struct
id|device
op_star
)paren
id|kmalloc
c_func
(paren
id|alloc_size
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|memset
c_func
(paren
id|dev
comma
l_int|0
comma
id|alloc_size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sizeof_priv
)paren
id|dev-&gt;priv
op_assign
(paren
r_void
op_star
)paren
(paren
id|dev
op_plus
l_int|1
)paren
suffix:semicolon
id|dev-&gt;name
op_assign
id|sizeof_priv
op_plus
(paren
r_char
op_star
)paren
(paren
id|dev
op_plus
l_int|1
)paren
suffix:semicolon
id|new_device
op_assign
l_int|1
suffix:semicolon
)brace
id|found
suffix:colon
multiline_comment|/* From the double loop above. */
r_if
c_cond
(paren
id|dev-&gt;name
op_logical_and
(paren
(paren
id|dev-&gt;name
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
op_logical_or
(paren
id|dev-&gt;name
(braket
l_int|0
)braket
op_eq
l_char|&squot; &squot;
)paren
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_ETH_CARDS
suffix:semicolon
op_increment
id|i
)paren
r_if
c_cond
(paren
id|ethdev_index
(braket
id|i
)braket
op_eq
l_int|NULL
)paren
(brace
id|sprintf
c_func
(paren
id|dev-&gt;name
comma
l_string|&quot;eth%d&quot;
comma
id|i
)paren
suffix:semicolon
id|ethdev_index
(braket
id|i
)braket
op_assign
id|dev
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|ether_setup
c_func
(paren
id|dev
)paren
suffix:semicolon
multiline_comment|/* Hmmm, should this be called here? */
r_if
c_cond
(paren
id|new_device
)paren
(brace
multiline_comment|/* Append the device to the device queue. */
r_struct
id|device
op_star
op_star
id|old_devp
op_assign
op_amp
id|dev_base
suffix:semicolon
r_while
c_loop
(paren
(paren
op_star
id|old_devp
)paren
op_member_access_from_pointer
id|next
)paren
id|old_devp
op_assign
op_amp
(paren
op_star
id|old_devp
)paren
op_member_access_from_pointer
id|next
suffix:semicolon
(paren
op_star
id|old_devp
)paren
op_member_access_from_pointer
id|next
op_assign
id|dev
suffix:semicolon
id|dev-&gt;next
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|dev
suffix:semicolon
)brace
DECL|function|eth_mac_addr
r_static
r_int
id|eth_mac_addr
c_func
(paren
r_struct
id|device
op_star
id|dev
comma
r_void
op_star
id|addr
)paren
(brace
r_struct
id|ifreq
op_star
id|ifr
op_assign
(paren
r_struct
id|ifreq
op_star
)paren
id|addr
suffix:semicolon
r_if
c_cond
(paren
id|dev-&gt;start
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|dev-&gt;dev_addr
comma
id|ifr-&gt;ifr_hwaddr.sa_data
comma
id|dev-&gt;hard_header_len
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ether_setup
r_void
id|ether_setup
c_func
(paren
r_struct
id|device
op_star
id|dev
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* Fill in the fields of the device structure with ethernet-generic values.&n;&t;   This should be in a common file instead of per-driver.  */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DEV_NUMBUFFS
suffix:semicolon
id|i
op_increment
)paren
id|skb_queue_head_init
c_func
(paren
op_amp
id|dev-&gt;buffs
(braket
id|i
)braket
)paren
suffix:semicolon
multiline_comment|/* register boot-defined &quot;eth&quot; devices */
r_if
c_cond
(paren
id|dev-&gt;name
op_logical_and
(paren
id|strncmp
c_func
(paren
id|dev-&gt;name
comma
l_string|&quot;eth&quot;
comma
l_int|3
)paren
op_eq
l_int|0
)paren
)paren
(brace
id|i
op_assign
id|simple_strtoul
c_func
(paren
id|dev-&gt;name
op_plus
l_int|3
comma
l_int|NULL
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ethdev_index
(braket
id|i
)braket
op_eq
l_int|NULL
)paren
(brace
id|ethdev_index
(braket
id|i
)braket
op_assign
id|dev
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|dev
op_ne
id|ethdev_index
(braket
id|i
)braket
)paren
(brace
multiline_comment|/* Really shouldn&squot;t happen! */
id|printk
c_func
(paren
l_string|&quot;ether_setup: Ouch! Someone else took %s&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
)brace
)brace
id|dev-&gt;hard_header
op_assign
id|eth_header
suffix:semicolon
id|dev-&gt;rebuild_header
op_assign
id|eth_rebuild_header
suffix:semicolon
id|dev-&gt;set_mac_address
op_assign
id|eth_mac_addr
suffix:semicolon
id|dev-&gt;header_cache
op_assign
id|eth_header_cache
suffix:semicolon
id|dev-&gt;type
op_assign
id|ARPHRD_ETHER
suffix:semicolon
id|dev-&gt;hard_header_len
op_assign
id|ETH_HLEN
suffix:semicolon
id|dev-&gt;mtu
op_assign
l_int|1500
suffix:semicolon
multiline_comment|/* eth_mtu */
id|dev-&gt;addr_len
op_assign
id|ETH_ALEN
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|ETH_ALEN
suffix:semicolon
id|i
op_increment
)paren
(brace
id|dev-&gt;broadcast
(braket
id|i
)braket
op_assign
l_int|0xff
suffix:semicolon
)brace
multiline_comment|/* New-style flags. */
id|dev-&gt;flags
op_assign
id|IFF_BROADCAST
op_or
id|IFF_MULTICAST
suffix:semicolon
id|dev-&gt;family
op_assign
id|AF_INET
suffix:semicolon
id|dev-&gt;pa_addr
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;pa_brdaddr
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;pa_mask
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;pa_alen
op_assign
l_int|4
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_TR
DECL|function|tr_setup
r_void
id|tr_setup
c_func
(paren
r_struct
id|device
op_star
id|dev
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* Fill in the fields of the device structure with ethernet-generic values.&n;&t;   This should be in a common file instead of per-driver.  */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|DEV_NUMBUFFS
suffix:semicolon
id|i
op_increment
)paren
id|skb_queue_head_init
c_func
(paren
op_amp
id|dev-&gt;buffs
(braket
id|i
)braket
)paren
suffix:semicolon
id|dev-&gt;hard_header
op_assign
id|tr_header
suffix:semicolon
id|dev-&gt;rebuild_header
op_assign
id|tr_rebuild_header
suffix:semicolon
id|dev-&gt;type
op_assign
id|ARPHRD_IEEE802
suffix:semicolon
id|dev-&gt;hard_header_len
op_assign
id|TR_HLEN
suffix:semicolon
id|dev-&gt;mtu
op_assign
l_int|2000
suffix:semicolon
multiline_comment|/* bug in fragmenter...*/
id|dev-&gt;addr_len
op_assign
id|TR_ALEN
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|TR_ALEN
suffix:semicolon
id|i
op_increment
)paren
(brace
id|dev-&gt;broadcast
(braket
id|i
)braket
op_assign
l_int|0xff
suffix:semicolon
)brace
multiline_comment|/* New-style flags. */
id|dev-&gt;flags
op_assign
id|IFF_BROADCAST
suffix:semicolon
id|dev-&gt;family
op_assign
id|AF_INET
suffix:semicolon
id|dev-&gt;pa_addr
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;pa_brdaddr
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;pa_mask
op_assign
l_int|0
suffix:semicolon
id|dev-&gt;pa_alen
op_assign
l_int|4
suffix:semicolon
)brace
macro_line|#endif
DECL|function|ether_config
r_int
id|ether_config
c_func
(paren
r_struct
id|device
op_star
id|dev
comma
r_struct
id|ifmap
op_star
id|map
)paren
(brace
r_if
c_cond
(paren
id|map-&gt;mem_start
op_ne
(paren
id|u_long
)paren
(paren
op_minus
l_int|1
)paren
)paren
id|dev-&gt;mem_start
op_assign
id|map-&gt;mem_start
suffix:semicolon
r_if
c_cond
(paren
id|map-&gt;mem_end
op_ne
(paren
id|u_long
)paren
(paren
op_minus
l_int|1
)paren
)paren
id|dev-&gt;mem_end
op_assign
id|map-&gt;mem_end
suffix:semicolon
r_if
c_cond
(paren
id|map-&gt;base_addr
op_ne
(paren
id|u_short
)paren
(paren
op_minus
l_int|1
)paren
)paren
id|dev-&gt;base_addr
op_assign
id|map-&gt;base_addr
suffix:semicolon
r_if
c_cond
(paren
id|map-&gt;irq
op_ne
(paren
id|u_char
)paren
(paren
op_minus
l_int|1
)paren
)paren
id|dev-&gt;irq
op_assign
id|map-&gt;irq
suffix:semicolon
r_if
c_cond
(paren
id|map-&gt;dma
op_ne
(paren
id|u_char
)paren
(paren
op_minus
l_int|1
)paren
)paren
id|dev-&gt;dma
op_assign
id|map-&gt;dma
suffix:semicolon
r_if
c_cond
(paren
id|map-&gt;port
op_ne
(paren
id|u_char
)paren
(paren
op_minus
l_int|1
)paren
)paren
id|dev-&gt;if_port
op_assign
id|map-&gt;port
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|register_netdev
r_int
id|register_netdev
c_func
(paren
r_struct
id|device
op_star
id|dev
)paren
(brace
r_struct
id|device
op_star
id|d
op_assign
id|dev_base
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|i
op_assign
id|MAX_ETH_CARDS
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev
op_logical_and
id|dev-&gt;init
)paren
(brace
r_if
c_cond
(paren
id|dev-&gt;name
op_logical_and
(paren
(paren
id|dev-&gt;name
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
op_logical_or
(paren
id|dev-&gt;name
(braket
l_int|0
)braket
op_eq
l_char|&squot; &squot;
)paren
)paren
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_ETH_CARDS
suffix:semicolon
op_increment
id|i
)paren
r_if
c_cond
(paren
id|ethdev_index
(braket
id|i
)braket
op_eq
l_int|NULL
)paren
(brace
id|sprintf
c_func
(paren
id|dev-&gt;name
comma
l_string|&quot;eth%d&quot;
comma
id|i
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;loading device &squot;%s&squot;...&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|ethdev_index
(braket
id|i
)braket
op_assign
id|dev
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|dev
op_member_access_from_pointer
id|init
c_func
(paren
id|dev
)paren
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|i
OL
id|MAX_ETH_CARDS
)paren
id|ethdev_index
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
multiline_comment|/* Add device to end of chain */
r_if
c_cond
(paren
id|dev_base
)paren
(brace
r_while
c_loop
(paren
id|d-&gt;next
)paren
id|d
op_assign
id|d-&gt;next
suffix:semicolon
id|d-&gt;next
op_assign
id|dev
suffix:semicolon
)brace
r_else
id|dev_base
op_assign
id|dev
suffix:semicolon
id|dev-&gt;next
op_assign
l_int|NULL
suffix:semicolon
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|unregister_netdev
r_void
id|unregister_netdev
c_func
(paren
r_struct
id|device
op_star
id|dev
)paren
(brace
r_struct
id|device
op_star
id|d
op_assign
id|dev_base
suffix:semicolon
r_int
r_int
id|flags
suffix:semicolon
r_int
id|i
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev
op_eq
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;was NULL&bslash;n&quot;
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* else */
r_if
c_cond
(paren
id|dev-&gt;start
)paren
id|printk
c_func
(paren
l_string|&quot;ERROR &squot;%s&squot; busy and not MOD_IN_USE.&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dev_base
op_eq
id|dev
)paren
id|dev_base
op_assign
id|dev-&gt;next
suffix:semicolon
r_else
(brace
r_while
c_loop
(paren
id|d
op_logical_and
(paren
id|d-&gt;next
op_ne
id|dev
)paren
)paren
id|d
op_assign
id|d-&gt;next
suffix:semicolon
r_if
c_cond
(paren
id|d
op_logical_and
(paren
id|d-&gt;next
op_eq
id|dev
)paren
)paren
(brace
id|d-&gt;next
op_assign
id|dev-&gt;next
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
l_string|&quot;unregister_netdev: &squot;%s&squot; not found&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_ETH_CARDS
suffix:semicolon
op_increment
id|i
)paren
(brace
r_if
c_cond
(paren
id|ethdev_index
(braket
id|i
)braket
op_eq
id|dev
)paren
(brace
id|ethdev_index
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
"&f;"
multiline_comment|/*&n; * Local variables:&n; *  compile-command: &quot;gcc -D__KERNEL__ -I/usr/src/linux/net/inet -Wall -Wstrict-prototypes -O6 -m486 -c net_init.c&quot;&n; *  version-control: t&n; *  kept-new-versions: 5&n; *  tab-width: 4&n; * End:&n; */
eof
