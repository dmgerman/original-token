multiline_comment|/******************************************************************************&n; *&n; *&t;(C)Copyright 1998,1999 SysKonnect,&n; *&t;a business unit of Schneider &amp; Koch &amp; Co. Datensysteme GmbH.&n; *&n; *&t;See the file &quot;skfddi.c&quot; for further information.&n; *&n; *&t;This program is free software; you can redistribute it and/or modify&n; *&t;it under the terms of the GNU General Public License as published by&n; *&t;the Free Software Foundation; either version 2 of the License, or&n; *&t;(at your option) any later version.&n; *&n; *&t;The information in this file is provided &quot;AS IS&quot; without warranty.&n; *&n; ******************************************************************************/
multiline_comment|/*&n;&t;SMT/CMT defaults&n;*/
macro_line|#include &quot;h/types.h&quot;
macro_line|#include &quot;h/fddi.h&quot;
macro_line|#include &quot;h/smc.h&quot;
macro_line|#ifndef OEM_USER_DATA
DECL|macro|OEM_USER_DATA
mdefine_line|#define OEM_USER_DATA&t;&quot;SK-NET FDDI V2.0 Userdata&quot;
macro_line|#endif
macro_line|#ifndef&t;lint
DECL|variable|ID_sccs
r_static
r_const
r_char
id|ID_sccs
(braket
)braket
op_assign
l_string|&quot;@(#)smtdef.c&t;2.53 99/08/11 (C) SK &quot;
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * defaults&n; */
DECL|macro|TTMS
mdefine_line|#define TTMS(x)&t;((u_long)(x)*1000L)
DECL|macro|TTS
mdefine_line|#define TTS(x)&t;((u_long)(x)*1000000L)
DECL|macro|TTUS
mdefine_line|#define TTUS(x)&t;((u_long)(x))
DECL|macro|DEFAULT_TB_MIN
mdefine_line|#define DEFAULT_TB_MIN&t;&t;TTMS(5)
DECL|macro|DEFAULT_TB_MAX
mdefine_line|#define DEFAULT_TB_MAX&t;&t;TTMS(50)
DECL|macro|DEFAULT_C_MIN
mdefine_line|#define DEFAULT_C_MIN&t;&t;TTUS(1600)
DECL|macro|DEFAULT_T_OUT
mdefine_line|#define DEFAULT_T_OUT&t;&t;TTMS(100+5)
DECL|macro|DEFAULT_TL_MIN
mdefine_line|#define DEFAULT_TL_MIN&t;&t;TTUS(30)
DECL|macro|DEFAULT_LC_SHORT
mdefine_line|#define DEFAULT_LC_SHORT&t;TTMS(50+5)
DECL|macro|DEFAULT_LC_MEDIUM
mdefine_line|#define DEFAULT_LC_MEDIUM&t;TTMS(500+20)
DECL|macro|DEFAULT_LC_LONG
mdefine_line|#define DEFAULT_LC_LONG&t;&t;TTS(5)+TTMS(50)
DECL|macro|DEFAULT_LC_EXTENDED
mdefine_line|#define DEFAULT_LC_EXTENDED&t;TTS(50)+TTMS(50)
DECL|macro|DEFAULT_T_NEXT_9
mdefine_line|#define DEFAULT_T_NEXT_9&t;TTMS(200+10)
DECL|macro|DEFAULT_NS_MAX
mdefine_line|#define DEFAULT_NS_MAX&t;&t;TTUS(1310)
DECL|macro|DEFAULT_I_MAX
mdefine_line|#define DEFAULT_I_MAX&t;&t;TTMS(25)
DECL|macro|DEFAULT_IN_MAX
mdefine_line|#define DEFAULT_IN_MAX&t;&t;TTMS(40)
DECL|macro|DEFAULT_TD_MIN
mdefine_line|#define DEFAULT_TD_MIN&t;&t;TTMS(5)
DECL|macro|DEFAULT_T_NON_OP
mdefine_line|#define DEFAULT_T_NON_OP&t;TTS(1)
DECL|macro|DEFAULT_T_STUCK
mdefine_line|#define DEFAULT_T_STUCK&t;&t;TTS(8)
DECL|macro|DEFAULT_T_DIRECT
mdefine_line|#define DEFAULT_T_DIRECT&t;TTMS(370)
DECL|macro|DEFAULT_T_JAM
mdefine_line|#define DEFAULT_T_JAM&t;&t;TTMS(370)
DECL|macro|DEFAULT_T_ANNOUNCE
mdefine_line|#define DEFAULT_T_ANNOUNCE&t;TTMS(2500)
DECL|macro|DEFAULT_D_MAX
mdefine_line|#define DEFAULT_D_MAX&t;&t;TTUS(1617)
DECL|macro|DEFAULT_LEM_ALARM
mdefine_line|#define DEFAULT_LEM_ALARM&t;(8)
DECL|macro|DEFAULT_LEM_CUTOFF
mdefine_line|#define DEFAULT_LEM_CUTOFF&t;(7)
DECL|macro|DEFAULT_TEST_DONE
mdefine_line|#define DEFAULT_TEST_DONE&t;TTS(1)
DECL|macro|DEFAULT_CHECK_POLL
mdefine_line|#define DEFAULT_CHECK_POLL&t;TTS(1)
DECL|macro|DEFAULT_POLL
mdefine_line|#define DEFAULT_POLL&t;&t;TTMS(50)
multiline_comment|/*&n; * LCT errors threshold&n; */
DECL|macro|DEFAULT_LCT_SHORT
mdefine_line|#define DEFAULT_LCT_SHORT&t;1
DECL|macro|DEFAULT_LCT_MEDIUM
mdefine_line|#define DEFAULT_LCT_MEDIUM&t;3
DECL|macro|DEFAULT_LCT_LONG
mdefine_line|#define DEFAULT_LCT_LONG&t;5
DECL|macro|DEFAULT_LCT_EXTEND
mdefine_line|#define DEFAULT_LCT_EXTEND&t;50
multiline_comment|/* Forward declarations */
r_extern
r_void
id|smt_reset_defaults
(paren
)paren
suffix:semicolon
r_static
r_void
id|smt_init_mib
(paren
)paren
suffix:semicolon
r_static
r_int
id|set_min_max
c_func
(paren
)paren
suffix:semicolon
DECL|function|smt_set_defaults
r_void
id|smt_set_defaults
c_func
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
id|smt_reset_defaults
c_func
(paren
id|smc
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|macro|MS2BCLK
mdefine_line|#define MS2BCLK(x)&t;((x)*12500L)
DECL|macro|US2BCLK
mdefine_line|#define US2BCLK(x)&t;((x)*1250L)
DECL|function|smt_reset_defaults
r_void
id|smt_reset_defaults
c_func
(paren
id|smc
comma
id|level
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_int
id|level
suffix:semicolon
(brace
r_struct
id|smt_config
op_star
id|smt
suffix:semicolon
r_int
id|i
suffix:semicolon
id|u_long
id|smt_boot_time
suffix:semicolon
id|smt_init_mib
c_func
(paren
id|smc
comma
id|level
)paren
suffix:semicolon
id|smc-&gt;os.smc_version
op_assign
id|SMC_VERSION
suffix:semicolon
id|smt_boot_time
op_assign
id|smt_get_time
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|NUMMACS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|smc-&gt;sm.last_tok_time
(braket
id|i
)braket
op_assign
id|smt_boot_time
suffix:semicolon
)brace
id|smt
op_assign
op_amp
id|smc-&gt;s
suffix:semicolon
id|smt-&gt;attach_s
op_assign
l_int|0
suffix:semicolon
id|smt-&gt;build_ring_map
op_assign
l_int|1
suffix:semicolon
id|smt-&gt;sas
op_assign
id|SMT_DAS
suffix:semicolon
id|smt-&gt;numphys
op_assign
id|NUMPHYS
suffix:semicolon
id|smt-&gt;pcm_tb_min
op_assign
id|DEFAULT_TB_MIN
suffix:semicolon
id|smt-&gt;pcm_tb_max
op_assign
id|DEFAULT_TB_MAX
suffix:semicolon
id|smt-&gt;pcm_c_min
op_assign
id|DEFAULT_C_MIN
suffix:semicolon
id|smt-&gt;pcm_t_out
op_assign
id|DEFAULT_T_OUT
suffix:semicolon
id|smt-&gt;pcm_tl_min
op_assign
id|DEFAULT_TL_MIN
suffix:semicolon
id|smt-&gt;pcm_lc_short
op_assign
id|DEFAULT_LC_SHORT
suffix:semicolon
id|smt-&gt;pcm_lc_medium
op_assign
id|DEFAULT_LC_MEDIUM
suffix:semicolon
id|smt-&gt;pcm_lc_long
op_assign
id|DEFAULT_LC_LONG
suffix:semicolon
id|smt-&gt;pcm_lc_extended
op_assign
id|DEFAULT_LC_EXTENDED
suffix:semicolon
id|smt-&gt;pcm_t_next_9
op_assign
id|DEFAULT_T_NEXT_9
suffix:semicolon
id|smt-&gt;pcm_ns_max
op_assign
id|DEFAULT_NS_MAX
suffix:semicolon
id|smt-&gt;ecm_i_max
op_assign
id|DEFAULT_I_MAX
suffix:semicolon
id|smt-&gt;ecm_in_max
op_assign
id|DEFAULT_IN_MAX
suffix:semicolon
id|smt-&gt;ecm_td_min
op_assign
id|DEFAULT_TD_MIN
suffix:semicolon
id|smt-&gt;ecm_test_done
op_assign
id|DEFAULT_TEST_DONE
suffix:semicolon
id|smt-&gt;ecm_check_poll
op_assign
id|DEFAULT_CHECK_POLL
suffix:semicolon
id|smt-&gt;rmt_t_non_op
op_assign
id|DEFAULT_T_NON_OP
suffix:semicolon
id|smt-&gt;rmt_t_stuck
op_assign
id|DEFAULT_T_STUCK
suffix:semicolon
id|smt-&gt;rmt_t_direct
op_assign
id|DEFAULT_T_DIRECT
suffix:semicolon
id|smt-&gt;rmt_t_jam
op_assign
id|DEFAULT_T_JAM
suffix:semicolon
id|smt-&gt;rmt_t_announce
op_assign
id|DEFAULT_T_ANNOUNCE
suffix:semicolon
id|smt-&gt;rmt_t_poll
op_assign
id|DEFAULT_POLL
suffix:semicolon
id|smt-&gt;rmt_dup_mac_behavior
op_assign
id|FALSE
suffix:semicolon
multiline_comment|/* See Struct smt_config */
id|smt-&gt;mac_d_max
op_assign
id|DEFAULT_D_MAX
suffix:semicolon
id|smt-&gt;lct_short
op_assign
id|DEFAULT_LCT_SHORT
suffix:semicolon
id|smt-&gt;lct_medium
op_assign
id|DEFAULT_LCT_MEDIUM
suffix:semicolon
id|smt-&gt;lct_long
op_assign
id|DEFAULT_LCT_LONG
suffix:semicolon
id|smt-&gt;lct_extended
op_assign
id|DEFAULT_LCT_EXTEND
suffix:semicolon
macro_line|#ifndef&t;SLIM_SMT
macro_line|#ifdef&t;ESS
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
id|smc-&gt;ess.sync_bw_available
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;mib.fddiESSPayload
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.fddiESSOverhead
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.fddiESSMaxTNeg
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|25
)paren
)paren
suffix:semicolon
id|smc-&gt;mib.fddiESSMinSegmentSize
op_assign
l_int|1
suffix:semicolon
id|smc-&gt;mib.fddiESSCategory
op_assign
id|SB_STATIC
suffix:semicolon
id|smc-&gt;mib.fddiESSSynchTxMode
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;ess.raf_act_timer_poll
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;ess.timer_count
op_assign
l_int|7
suffix:semicolon
multiline_comment|/* first RAF alc req after 3s */
)brace
id|smc-&gt;ess.local_sba_active
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;ess.sba_reply_pend
op_assign
l_int|NULL
suffix:semicolon
macro_line|#endif
macro_line|#ifdef&t;SBA
id|smt_init_sba
c_func
(paren
id|smc
comma
id|level
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif&t;/* no SLIM_SMT */
macro_line|#ifdef&t;TAG_MODE
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
id|smc-&gt;hw.pci_fix_value
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#endif
)brace
multiline_comment|/*&n; * manufacturer data&n; */
DECL|variable|man_data
r_static
r_const
r_char
id|man_data
(braket
l_int|32
)braket
op_assign
multiline_comment|/*&t; 01234567890123456789012345678901&t;*/
l_string|&quot;xxxSK-NET FDDI SMT 7.3 - V2.8.8&quot;
suffix:semicolon
DECL|function|smt_init_mib
r_static
r_void
id|smt_init_mib
c_func
(paren
id|smc
comma
id|level
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_int
id|level
suffix:semicolon
(brace
r_struct
id|fddi_mib
op_star
id|mib
suffix:semicolon
r_struct
id|fddi_mib_p
op_star
id|pm
suffix:semicolon
r_int
id|port
suffix:semicolon
r_int
id|path
suffix:semicolon
id|mib
op_assign
op_amp
id|smc-&gt;mib
suffix:semicolon
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
multiline_comment|/*&n;&t;&t; * set EVERYTHING to ZERO&n;&t;&t; * EXCEPT hw and os&n;&t;&t; */
id|memset
c_func
(paren
(paren
(paren
r_char
op_star
)paren
id|smc
)paren
op_plus
r_sizeof
(paren
r_struct
id|s_smt_os
)paren
op_plus
r_sizeof
(paren
r_struct
id|s_smt_hw
)paren
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|s_smc
)paren
op_minus
r_sizeof
(paren
r_struct
id|s_smt_os
)paren
op_minus
r_sizeof
(paren
r_struct
id|s_smt_hw
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|mib-&gt;fddiSMTRemoteDisconnectFlag
op_assign
l_int|0
suffix:semicolon
id|mib-&gt;fddiSMTPeerWrapFlag
op_assign
l_int|0
suffix:semicolon
)brace
id|mib-&gt;fddiSMTOpVersionId
op_assign
l_int|2
suffix:semicolon
id|mib-&gt;fddiSMTHiVersionId
op_assign
l_int|2
suffix:semicolon
id|mib-&gt;fddiSMTLoVersionId
op_assign
l_int|2
suffix:semicolon
id|memcpy
c_func
(paren
(paren
r_char
op_star
)paren
id|mib-&gt;fddiSMTManufacturerData
comma
id|man_data
comma
l_int|32
)paren
suffix:semicolon
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
id|strcpy
c_func
(paren
id|mib-&gt;fddiSMTUserData
comma
id|OEM_USER_DATA
)paren
suffix:semicolon
)brace
id|mib-&gt;fddiSMTMIBVersionId
op_assign
l_int|1
suffix:semicolon
id|mib-&gt;fddiSMTMac_Ct
op_assign
id|NUMMACS
suffix:semicolon
id|mib-&gt;fddiSMTConnectionPolicy
op_assign
id|POLICY_MM
op_or
id|POLICY_AA
op_or
id|POLICY_BB
suffix:semicolon
multiline_comment|/*&n;&t; * fddiSMTNonMaster_Ct and fddiSMTMaster_Ct are set in smt_fixup_mib&n;&t; * s.sas is not set yet (is set in init driver)&n;&t; */
id|mib-&gt;fddiSMTAvailablePaths
op_assign
id|MIB_PATH_P
op_or
id|MIB_PATH_S
suffix:semicolon
id|mib-&gt;fddiSMTConfigCapabilities
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* no hold,no wrap_ab*/
id|mib-&gt;fddiSMTTT_Notify
op_assign
l_int|10
suffix:semicolon
id|mib-&gt;fddiSMTStatRptPolicy
op_assign
id|TRUE
suffix:semicolon
id|mib-&gt;fddiSMTTrace_MaxExpiration
op_assign
id|SEC2MIB
c_func
(paren
l_int|7
)paren
suffix:semicolon
id|mib-&gt;fddiSMTMACIndexes
op_assign
id|INDEX_MAC
suffix:semicolon
id|mib-&gt;fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_SEPA
suffix:semicolon
multiline_comment|/* seperated */
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACIndex
op_assign
id|INDEX_MAC
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACFrameStatusFunctions
op_assign
id|FSC_TYPE0
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACRequestedPaths
op_assign
id|MIB_P_PATH_LOCAL
op_or
id|MIB_P_PATH_SEC_ALTER
op_or
id|MIB_P_PATH_PRIM_ALTER
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACAvailablePaths
op_assign
id|MIB_PATH_P
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACCurrentPath
op_assign
id|MIB_PATH_PRIMARY
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACT_MaxCapabilitiy
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACTVXCapabilitiy
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|US2BCLK
c_func
(paren
l_int|52
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACTvxValue
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|US2BCLK
c_func
(paren
l_int|27
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACTvxValueMIB
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|US2BCLK
c_func
(paren
l_int|27
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACT_Req
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACT_ReqMIB
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACT_Max
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACT_MaxMIB
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACT_Min
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|4
)paren
)paren
suffix:semicolon
)brace
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACHardwarePresent
op_assign
id|TRUE
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACMA_UnitdataEnable
op_assign
id|TRUE
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACFrameErrorThreshold
op_assign
l_int|1
suffix:semicolon
id|mib-&gt;m
(braket
id|MAC0
)braket
dot
id|fddiMACNotCopiedThreshold
op_assign
l_int|1
suffix:semicolon
multiline_comment|/*&n;&t; * Path attributes&n;&t; */
r_for
c_loop
(paren
id|path
op_assign
l_int|0
suffix:semicolon
id|path
OL
id|NUMPATHS
suffix:semicolon
id|path
op_increment
)paren
(brace
id|mib-&gt;a
(braket
id|path
)braket
dot
id|fddiPATHIndex
op_assign
id|INDEX_PATH
op_plus
id|path
suffix:semicolon
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
id|mib-&gt;a
(braket
id|path
)braket
dot
id|fddiPATHTVXLowerBound
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|US2BCLK
c_func
(paren
l_int|27
)paren
)paren
suffix:semicolon
id|mib-&gt;a
(braket
id|path
)braket
dot
id|fddiPATHT_MaxLowerBound
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
id|mib-&gt;a
(braket
id|path
)braket
dot
id|fddiPATHMaxT_Req
op_assign
(paren
id|u_long
)paren
(paren
op_minus
id|MS2BCLK
c_func
(paren
l_int|165
)paren
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;&t; * Port attributes&n;&t; */
id|pm
op_assign
id|mib-&gt;p
suffix:semicolon
r_for
c_loop
(paren
id|port
op_assign
l_int|0
suffix:semicolon
id|port
OL
id|NUMPHYS
suffix:semicolon
id|port
op_increment
)paren
(brace
multiline_comment|/*&n;&t;&t; * set MIB pointer in phy&n;&t;&t; */
multiline_comment|/* Attention: don&squot;t initialize mib pointer here! */
multiline_comment|/*  It must be initialized during phase 2 */
id|smc-&gt;y
(braket
id|port
)braket
dot
id|mib
op_assign
l_int|0
suffix:semicolon
id|mib-&gt;fddiSMTPORTIndexes
(braket
id|port
)braket
op_assign
id|port
op_plus
id|INDEX_PORT
suffix:semicolon
id|pm-&gt;fddiPORTIndex
op_assign
id|port
op_plus
id|INDEX_PORT
suffix:semicolon
id|pm-&gt;fddiPORTHardwarePresent
op_assign
id|TRUE
suffix:semicolon
r_if
c_cond
(paren
id|level
op_eq
l_int|0
)paren
(brace
id|pm-&gt;fddiPORTLer_Alarm
op_assign
id|DEFAULT_LEM_ALARM
suffix:semicolon
id|pm-&gt;fddiPORTLer_Cutoff
op_assign
id|DEFAULT_LEM_CUTOFF
suffix:semicolon
)brace
multiline_comment|/*&n;&t;&t; * fddiPORTRequestedPaths are set in pcmplc.c&n;&t;&t; * we don&squot;t know the port type yet !&n;&t;&t; */
id|pm-&gt;fddiPORTRequestedPaths
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|pm-&gt;fddiPORTRequestedPaths
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|pm-&gt;fddiPORTRequestedPaths
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|pm-&gt;fddiPORTAvailablePaths
op_assign
id|MIB_PATH_P
suffix:semicolon
id|pm-&gt;fddiPORTPMDClass
op_assign
id|MIB_PMDCLASS_MULTI
suffix:semicolon
id|pm
op_increment
suffix:semicolon
)brace
(paren
r_void
)paren
id|smt_set_mac_opvalues
c_func
(paren
id|smc
)paren
suffix:semicolon
)brace
DECL|function|smt_set_mac_opvalues
r_int
id|smt_set_mac_opvalues
c_func
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
r_int
id|st
suffix:semicolon
r_int
id|st2
suffix:semicolon
id|st
op_assign
id|set_min_max
c_func
(paren
l_int|1
comma
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACTvxValueMIB
comma
id|smc-&gt;mib.a
(braket
id|PATH0
)braket
dot
id|fddiPATHTVXLowerBound
comma
op_amp
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACTvxValue
)paren
suffix:semicolon
id|st
op_or_assign
id|set_min_max
c_func
(paren
l_int|0
comma
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACT_MaxMIB
comma
id|smc-&gt;mib.a
(braket
id|PATH0
)braket
dot
id|fddiPATHT_MaxLowerBound
comma
op_amp
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACT_Max
)paren
suffix:semicolon
id|st
op_or_assign
(paren
id|st2
op_assign
id|set_min_max
c_func
(paren
l_int|0
comma
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACT_ReqMIB
comma
id|smc-&gt;mib.a
(braket
id|PATH0
)braket
dot
id|fddiPATHMaxT_Req
comma
op_amp
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACT_Req
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|st2
)paren
(brace
multiline_comment|/* Treq attribute changed remotely. So send an AIX_EVENT to the&n;&t;&t; * user&n;&t;&t; */
id|AIX_EVENT
c_func
(paren
id|smc
comma
(paren
id|u_long
)paren
id|FDDI_RING_STATUS
comma
(paren
id|u_long
)paren
id|FDDI_SMT_EVENT
comma
(paren
id|u_long
)paren
id|FDDI_REMOTE_T_REQ
comma
id|smt_get_event_word
c_func
(paren
id|smc
)paren
)paren
suffix:semicolon
)brace
r_return
(paren
id|st
)paren
suffix:semicolon
)brace
DECL|function|smt_fixup_mib
r_void
id|smt_fixup_mib
c_func
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
macro_line|#ifdef&t;CONCENTRATOR
r_switch
c_cond
(paren
id|smc-&gt;s.sas
)paren
(brace
r_case
id|SMT_SAS
suffix:colon
id|smc-&gt;mib.fddiSMTNonMaster_Ct
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SMT_DAS
suffix:colon
id|smc-&gt;mib.fddiSMTNonMaster_Ct
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SMT_NAC
suffix:colon
id|smc-&gt;mib.fddiSMTNonMaster_Ct
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
id|smc-&gt;mib.fddiSMTMaster_Ct
op_assign
id|NUMPHYS
op_minus
id|smc-&gt;mib.fddiSMTNonMaster_Ct
suffix:semicolon
macro_line|#else
r_switch
c_cond
(paren
id|smc-&gt;s.sas
)paren
(brace
r_case
id|SMT_SAS
suffix:colon
id|smc-&gt;mib.fddiSMTNonMaster_Ct
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SMT_DAS
suffix:colon
id|smc-&gt;mib.fddiSMTNonMaster_Ct
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
)brace
id|smc-&gt;mib.fddiSMTMaster_Ct
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*&n; * determine new setting for operational value&n; * if limit is lower than mib&n; *&t;use limit&n; * else&n; *&t;use mib&n; * NOTE : numbers are negative, negate comparison !&n; */
DECL|function|set_min_max
r_static
r_int
id|set_min_max
c_func
(paren
id|maxflag
comma
id|mib
comma
id|limit
comma
id|oper
)paren
r_int
id|maxflag
suffix:semicolon
id|u_long
id|mib
suffix:semicolon
id|u_long
id|limit
suffix:semicolon
id|u_long
op_star
id|oper
suffix:semicolon
(brace
id|u_long
id|old
suffix:semicolon
id|old
op_assign
op_star
id|oper
suffix:semicolon
r_if
c_cond
(paren
(paren
id|limit
OG
id|mib
)paren
op_xor
id|maxflag
)paren
op_star
id|oper
op_assign
id|limit
suffix:semicolon
r_else
op_star
id|oper
op_assign
id|mib
suffix:semicolon
r_return
(paren
id|old
op_ne
op_star
id|oper
)paren
suffix:semicolon
)brace
eof
