multiline_comment|/******************************************************************************&n; *&n; *&t;(C)Copyright 1998,1999 SysKonnect,&n; *&t;a business unit of Schneider &amp; Koch &amp; Co. Datensysteme GmbH.&n; *&n; *&t;See the file &quot;skfddi.c&quot; for further information.&n; *&n; *&t;This program is free software; you can redistribute it and/or modify&n; *&t;it under the terms of the GNU General Public License as published by&n; *&t;the Free Software Foundation; either version 2 of the License, or&n; *&t;(at your option) any later version.&n; *&n; *&t;The information in this file is provided &quot;AS IS&quot; without warranty.&n; *&n; ******************************************************************************/
multiline_comment|/*&n;&t;SMT CFM&n;&t;Configuration Management&n;&t;DAS with single MAC&n;*/
multiline_comment|/*&n; *&t;Hardware independant state machine implemantation&n; *&t;The following external SMT functions are referenced :&n; *&n; *&t;&t;queue_event()&n; *&n; *&t;The following external HW dependant functions are referenced :&n; *&t;&t;config_mux()&n; *&n; *&t;The following HW dependant events are required :&n; *&t;&t;NONE &n; */
macro_line|#include &quot;h/types.h&quot;
macro_line|#include &quot;h/fddi.h&quot;
macro_line|#include &quot;h/smc.h&quot;
DECL|macro|KERNEL
mdefine_line|#define KERNEL
macro_line|#include &quot;h/smtstate.h&quot;
macro_line|#ifndef&t;lint
DECL|variable|ID_sccs
r_static
r_const
r_char
id|ID_sccs
(braket
)braket
op_assign
l_string|&quot;@(#)cfm.c&t;2.18 98/10/06 (C) SK &quot;
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * FSM Macros&n; */
DECL|macro|AFLAG
mdefine_line|#define AFLAG&t;0x10
DECL|macro|GO_STATE
mdefine_line|#define GO_STATE(x)&t;(smc-&gt;mib.fddiSMTCF_State = (x)|AFLAG)
DECL|macro|ACTIONS_DONE
mdefine_line|#define ACTIONS_DONE()&t;(smc-&gt;mib.fddiSMTCF_State &amp;= ~AFLAG)
DECL|macro|ACTIONS
mdefine_line|#define ACTIONS(x)&t;(x|AFLAG)
macro_line|#ifdef&t;DEBUG
multiline_comment|/*&n; * symbolic state names&n; */
DECL|variable|cfm_states
r_static
r_const
r_char
op_star
r_const
id|cfm_states
(braket
)braket
op_assign
(brace
l_string|&quot;SC0_ISOLATED&quot;
comma
l_string|&quot;CF1&quot;
comma
l_string|&quot;CF2&quot;
comma
l_string|&quot;CF3&quot;
comma
l_string|&quot;CF4&quot;
comma
l_string|&quot;SC1_WRAP_A&quot;
comma
l_string|&quot;SC2_WRAP_B&quot;
comma
l_string|&quot;SC5_TRHU_B&quot;
comma
l_string|&quot;SC7_WRAP_S&quot;
comma
l_string|&quot;SC9_C_WRAP_A&quot;
comma
l_string|&quot;SC10_C_WRAP_B&quot;
comma
l_string|&quot;SC11_C_WRAP_S&quot;
comma
l_string|&quot;SC4_THRU_A&quot;
)brace
suffix:semicolon
multiline_comment|/*&n; * symbolic event names&n; */
DECL|variable|cfm_events
r_static
r_const
r_char
op_star
r_const
id|cfm_events
(braket
)braket
op_assign
(brace
l_string|&quot;NONE&quot;
comma
l_string|&quot;CF_LOOP_A&quot;
comma
l_string|&quot;CF_LOOP_B&quot;
comma
l_string|&quot;CF_JOIN_A&quot;
comma
l_string|&quot;CF_JOIN_B&quot;
)brace
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * map from state to downstream port type&n; */
DECL|variable|cf_to_ptype
r_static
r_const
id|u_char
id|cf_to_ptype
(braket
)braket
op_assign
(brace
id|TNONE
comma
id|TNONE
comma
id|TNONE
comma
id|TNONE
comma
id|TNONE
comma
id|TNONE
comma
id|TB
comma
id|TB
comma
id|TS
comma
id|TA
comma
id|TB
comma
id|TS
comma
id|TB
)brace
suffix:semicolon
multiline_comment|/*&n; * CEM port states&n; */
DECL|macro|CEM_PST_DOWN
mdefine_line|#define&t;CEM_PST_DOWN&t;0
DECL|macro|CEM_PST_UP
mdefine_line|#define&t;CEM_PST_UP&t;1
DECL|macro|CEM_PST_HOLD
mdefine_line|#define&t;CEM_PST_HOLD&t;2
multiline_comment|/* define portstate array only for A and B port */
multiline_comment|/* Do this within the smc structure (use in multiple cards) */
multiline_comment|/*&n; * all Globals  are defined in smc.h&n; * struct s_cfm&n; */
multiline_comment|/*&n; * function declarations&n; */
r_static
r_void
id|cfm_fsm
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t;init CFM state machine&n;&t;clear all CFM vars and flags&n;*/
DECL|function|cfm_init
r_void
id|cfm_init
c_func
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
id|smc-&gt;mib.fddiSMTCF_State
op_assign
id|ACTIONS
c_func
(paren
id|SC0_ISOLATED
)paren
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;r.rm_loop
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_DOWN
suffix:semicolon
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_DOWN
suffix:semicolon
)brace
multiline_comment|/* Some terms conditions used by the selection criteria */
DECL|macro|THRU_ENABLED
mdefine_line|#define THRU_ENABLED(smc)&t;(smc-&gt;y[PA].pc_mode != PM_TREE &amp;&amp; &bslash;&n;&t;&t;&t;&t; smc-&gt;y[PB].pc_mode != PM_TREE)
multiline_comment|/* Selection criteria for the ports */
DECL|function|selection_criteria
r_static
r_void
id|selection_criteria
(paren
id|smc
comma
id|phy
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_struct
id|s_phy
op_star
id|phy
suffix:semicolon
(brace
r_switch
c_cond
(paren
id|phy-&gt;mib-&gt;fddiPORTMy_Type
)paren
(brace
r_case
id|TA
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|THRU_ENABLED
c_func
(paren
id|smc
)paren
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
)paren
(brace
id|phy-&gt;wc_flag
op_assign
id|TRUE
suffix:semicolon
)brace
r_else
(brace
id|phy-&gt;wc_flag
op_assign
id|FALSE
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|TB
suffix:colon
multiline_comment|/* take precedence over PA */
id|phy-&gt;wc_flag
op_assign
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TS
suffix:colon
id|phy-&gt;wc_flag
op_assign
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|TM
suffix:colon
id|phy-&gt;wc_flag
op_assign
id|FALSE
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|all_selection_criteria
r_void
id|all_selection_criteria
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
r_struct
id|s_phy
op_star
id|phy
suffix:semicolon
r_int
id|p
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
l_int|0
comma
id|phy
op_assign
id|smc-&gt;y
suffix:semicolon
id|p
OL
id|NUMPHYS
suffix:semicolon
id|p
op_increment
comma
id|phy
op_increment
)paren
(brace
multiline_comment|/* Do the selection criteria */
id|selection_criteria
(paren
id|smc
comma
id|phy
)paren
suffix:semicolon
)brace
)brace
DECL|function|cem_priv_state
r_static
r_void
id|cem_priv_state
(paren
id|smc
comma
id|event
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_int
id|event
suffix:semicolon
multiline_comment|/* State machine for private PORT states: used to optimize dual homing */
(brace
r_int
id|np
suffix:semicolon
multiline_comment|/* Number of the port */
r_int
id|i
suffix:semicolon
multiline_comment|/* Do this only in a DAS */
r_if
c_cond
(paren
id|smc-&gt;s.sas
op_ne
id|SMT_DAS
)paren
r_return
suffix:semicolon
id|np
op_assign
id|event
op_minus
id|CF_JOIN
suffix:semicolon
r_if
c_cond
(paren
id|np
op_ne
id|PA
op_logical_and
id|np
op_ne
id|PB
)paren
(brace
r_return
suffix:semicolon
)brace
multiline_comment|/* Change the port state according to the event (portnumber) */
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|np
)braket
dot
id|cf_join
)paren
(brace
id|smc-&gt;y
(braket
id|np
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_UP
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;y
(braket
id|np
)braket
dot
id|wc_flag
)paren
(brace
multiline_comment|/* set the port to done only if it is not withheld */
id|smc-&gt;y
(braket
id|np
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_DOWN
suffix:semicolon
)brace
multiline_comment|/* Don&squot;t set an hold port to down */
multiline_comment|/* Check all ports of restart conditions */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
multiline_comment|/* Check all port for PORT is on hold and no withhold is done */
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|i
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_HOLD
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|i
)braket
dot
id|wc_flag
)paren
(brace
id|smc-&gt;y
(braket
id|i
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_DOWN
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
(paren
r_int
)paren
(paren
id|EVENT_PCM
op_plus
id|i
)paren
comma
id|PC_START
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|i
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|i
)braket
dot
id|wc_flag
)paren
(brace
id|smc-&gt;y
(braket
id|i
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_HOLD
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
(paren
r_int
)paren
(paren
id|EVENT_PCM
op_plus
id|i
)paren
comma
id|PC_START
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|i
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_DOWN
op_logical_and
id|smc-&gt;y
(braket
id|i
)braket
dot
id|wc_flag
)paren
(brace
multiline_comment|/*&n;&t;&t;&t; * The port must be restarted when the wc_flag&n;&t;&t;&t; * will be reset. So set the port on hold.&n;&t;&t;&t; */
id|smc-&gt;y
(braket
id|i
)braket
dot
id|cem_pst
op_assign
id|CEM_PST_HOLD
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
multiline_comment|/*&n;&t;CFM state machine&n;&t;called by dispatcher&n;&n;&t;do&n;&t;&t;display state change&n;&t;&t;process event&n;&t;until SM is stable&n;*/
DECL|function|cfm
r_void
id|cfm
c_func
(paren
id|smc
comma
id|event
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_int
id|event
suffix:semicolon
(brace
r_int
id|state
suffix:semicolon
multiline_comment|/* remember last state */
r_int
id|cond
suffix:semicolon
r_int
id|oldstate
suffix:semicolon
multiline_comment|/* We will do the following: */
multiline_comment|/*  - compute the variable WC_Flag for every port (This is where */
multiline_comment|/*    we can extend the requested path checking !!) */
multiline_comment|/*  - do the old (SMT 6.2 like) state machine */
multiline_comment|/*  - do the resulting station states */
id|all_selection_criteria
(paren
id|smc
)paren
suffix:semicolon
multiline_comment|/* We will check now whether a state transition is allowed or not */
multiline_comment|/*  - change the portstates */
id|cem_priv_state
(paren
id|smc
comma
id|event
)paren
suffix:semicolon
id|oldstate
op_assign
id|smc-&gt;mib.fddiSMTCF_State
suffix:semicolon
r_do
(brace
id|DB_CFM
c_func
(paren
l_string|&quot;CFM : state %s%s&quot;
comma
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_amp
id|AFLAG
)paren
ques
c_cond
l_string|&quot;ACTIONS &quot;
suffix:colon
l_string|&quot;&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
op_amp
op_complement
id|AFLAG
)braket
)paren
suffix:semicolon
id|DB_CFM
c_func
(paren
l_string|&quot; event %s&bslash;n&quot;
comma
id|cfm_events
(braket
id|event
)braket
comma
l_int|0
)paren
suffix:semicolon
id|state
op_assign
id|smc-&gt;mib.fddiSMTCF_State
suffix:semicolon
id|cfm_fsm
c_func
(paren
id|smc
comma
id|event
)paren
suffix:semicolon
id|event
op_assign
l_int|0
suffix:semicolon
)brace
r_while
c_loop
(paren
id|state
op_ne
id|smc-&gt;mib.fddiSMTCF_State
)paren
suffix:semicolon
macro_line|#ifndef&t;SLIM_SMT
multiline_comment|/*&n;&t; * check peer wrap condition&n;&t; */
id|cond
op_assign
id|FALSE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC9_C_WRAP_A
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
op_logical_or
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC10_C_WRAP_B
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
op_logical_or
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC11_C_WRAP_S
op_logical_and
id|smc-&gt;y
(braket
id|PS
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
op_logical_and
id|smc-&gt;y
(braket
id|PS
)braket
dot
id|mib-&gt;fddiPORTNeighborType
op_ne
id|TS
)paren
)paren
(brace
id|cond
op_assign
id|TRUE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|cond
op_ne
id|smc-&gt;mib.fddiSMTPeerWrapFlag
)paren
id|smt_srf_event
c_func
(paren
id|smc
comma
id|SMT_COND_SMT_PEER_WRAP
comma
l_int|0
comma
id|cond
)paren
suffix:semicolon
macro_line|#if&t;0
multiline_comment|/*&n;&t; * Don&squot;t send ever MAC_PATH_CHANGE events. Our MAC is hard-wired&n;&t; * to the primary path.&n;&t; */
multiline_comment|/*&n;&t; * path change&n;&t; */
r_if
c_cond
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_ne
id|oldstate
)paren
(brace
id|smt_srf_event
c_func
(paren
id|smc
comma
id|SMT_EVENT_MAC_PATH_CHANGE
comma
id|INDEX_MAC
comma
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif&t;/* no SLIM_SMT */
multiline_comment|/*&n;&t; * set MAC port type&n;&t; */
id|smc-&gt;mib.m
(braket
id|MAC0
)braket
dot
id|fddiMACDownstreamPORTType
op_assign
id|cf_to_ptype
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
suffix:semicolon
id|cfm_state_change
c_func
(paren
id|smc
comma
(paren
r_int
)paren
id|smc-&gt;mib.fddiSMTCF_State
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t;process CFM event&n;*/
multiline_comment|/*ARGSUSED1*/
DECL|function|cfm_fsm
r_static
r_void
id|cfm_fsm
c_func
(paren
id|smc
comma
id|cmd
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_int
id|cmd
suffix:semicolon
(brace
r_switch
c_cond
(paren
id|smc-&gt;mib.fddiSMTCF_State
)paren
(brace
r_case
id|ACTIONS
c_func
(paren
id|SC0_ISOLATED
)paren
suffix:colon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_ISOLATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_ISOLATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTMACPlacement
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTMACPlacement
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_SEPA
suffix:semicolon
id|config_mux
c_func
(paren
id|smc
comma
id|MUX_ISOLATE
)paren
suffix:semicolon
multiline_comment|/* configure PHY Mux */
id|smc-&gt;r.rm_loop
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
id|FALSE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_JOIN
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
multiline_comment|/* Don&squot;t do the WC-Flag changing here */
id|ACTIONS_DONE
c_func
(paren
)paren
suffix:semicolon
id|DB_CFMN
c_func
(paren
l_int|1
comma
l_string|&quot;CFM : %s&bslash;n&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC0_ISOLATED
suffix:colon
multiline_comment|/*SC07*/
multiline_comment|/*SAS port can be PA or PB ! */
r_if
c_cond
(paren
id|smc-&gt;s.sas
op_logical_and
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_or
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
)paren
)paren
(brace
id|GO_STATE
c_func
(paren
id|SC11_C_WRAP_S
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC01*/
r_if
c_cond
(paren
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|wc_flag
)paren
op_logical_or
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
)paren
(brace
id|GO_STATE
c_func
(paren
id|SC9_C_WRAP_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC02*/
r_if
c_cond
(paren
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|wc_flag
)paren
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
)paren
(brace
id|GO_STATE
c_func
(paren
id|SC10_C_WRAP_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACTIONS
c_func
(paren
id|SC9_C_WRAP_A
)paren
suffix:colon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_CONCATENATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_ISOLATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTMACPlacement
op_assign
id|INDEX_MAC
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTMACPlacement
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_CON
suffix:semicolon
id|config_mux
c_func
(paren
id|smc
comma
id|MUX_WRAPA
)paren
suffix:semicolon
multiline_comment|/* configure PHY mux */
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
)paren
(brace
id|smc-&gt;r.rm_join
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_loop
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_LOOP
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
)brace
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
)paren
(brace
id|smc-&gt;r.rm_loop
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_JOIN
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
)brace
id|ACTIONS_DONE
c_func
(paren
)paren
suffix:semicolon
id|DB_CFMN
c_func
(paren
l_int|1
comma
l_string|&quot;CFM : %s&bslash;n&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC9_C_WRAP_A
suffix:colon
multiline_comment|/*SC10*/
r_if
c_cond
(paren
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|wc_flag
op_logical_or
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
)paren
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
)paren
(brace
id|GO_STATE
c_func
(paren
id|SC0_ISOLATED
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC12*/
r_else
r_if
c_cond
(paren
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
)paren
op_logical_or
(paren
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
op_logical_or
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
)paren
)paren
op_logical_and
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_TREE
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_TREE
)paren
)paren
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC10_C_WRAP_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC14*/
r_else
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;s.attach_s
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC4_THRU_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC15*/
r_else
r_if
c_cond
(paren
id|smc-&gt;s.attach_s
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cem_pst
op_eq
id|CEM_PST_UP
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC5_THRU_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACTIONS
c_func
(paren
id|SC10_C_WRAP_B
)paren
suffix:colon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_ISOLATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_CONCATENATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTMACPlacement
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTMACPlacement
op_assign
id|INDEX_MAC
suffix:semicolon
id|smc-&gt;mib.fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_CON
suffix:semicolon
id|config_mux
c_func
(paren
id|smc
comma
id|MUX_WRAPB
)paren
suffix:semicolon
multiline_comment|/* configure PHY mux */
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
)paren
(brace
id|smc-&gt;r.rm_join
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_loop
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_LOOP
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
)brace
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
)paren
(brace
id|smc-&gt;r.rm_loop
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_JOIN
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
)brace
id|ACTIONS_DONE
c_func
(paren
)paren
suffix:semicolon
id|DB_CFMN
c_func
(paren
l_int|1
comma
l_string|&quot;CFM : %s&bslash;n&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC10_C_WRAP_B
suffix:colon
multiline_comment|/*SC20*/
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
)paren
(brace
id|GO_STATE
c_func
(paren
id|SC0_ISOLATED
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC21*/
r_else
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
(brace
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC9_C_WRAP_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC24*/
r_else
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;s.attach_s
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC4_THRU_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC25*/
r_else
r_if
c_cond
(paren
id|smc-&gt;s.attach_s
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|pc_mode
op_eq
id|PM_PEER
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC5_THRU_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACTIONS
c_func
(paren
id|SC4_THRU_A
)paren
suffix:colon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_THRU
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_THRU
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTMACPlacement
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTMACPlacement
op_assign
id|INDEX_MAC
suffix:semicolon
id|smc-&gt;mib.fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_THRU
suffix:semicolon
id|config_mux
c_func
(paren
id|smc
comma
id|MUX_THRUA
)paren
suffix:semicolon
multiline_comment|/* configure PHY mux */
id|smc-&gt;r.rm_loop
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_JOIN
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
id|ACTIONS_DONE
c_func
(paren
)paren
suffix:semicolon
id|DB_CFMN
c_func
(paren
l_int|1
comma
l_string|&quot;CFM : %s&bslash;n&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC4_THRU_A
suffix:colon
multiline_comment|/*SC41*/
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|wc_flag
op_logical_or
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC9_C_WRAP_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC42*/
r_else
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_or
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|wc_flag
)paren
(brace
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC10_C_WRAP_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC45*/
r_else
r_if
c_cond
(paren
id|smc-&gt;s.attach_s
)paren
(brace
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC5_THRU_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACTIONS
c_func
(paren
id|SC5_THRU_B
)paren
suffix:colon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_THRU
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_THRU
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PA
)braket
dot
id|fddiPORTMACPlacement
op_assign
id|INDEX_MAC
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PB
)braket
dot
id|fddiPORTMACPlacement
op_assign
l_int|0
suffix:semicolon
id|smc-&gt;mib.fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_THRU
suffix:semicolon
id|config_mux
c_func
(paren
id|smc
comma
id|MUX_THRUB
)paren
suffix:semicolon
multiline_comment|/* configure PHY mux */
id|smc-&gt;r.rm_loop
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_JOIN
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
id|ACTIONS_DONE
c_func
(paren
)paren
suffix:semicolon
id|DB_CFMN
c_func
(paren
l_int|1
comma
l_string|&quot;CFM : %s&bslash;n&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC5_THRU_B
suffix:colon
multiline_comment|/*SC51*/
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|wc_flag
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC9_C_WRAP_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC52*/
r_else
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_or
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|wc_flag
)paren
(brace
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC10_C_WRAP_B
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/*SC54*/
r_else
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;s.attach_s
)paren
(brace
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|scrub
op_assign
id|TRUE
suffix:semicolon
id|GO_STATE
c_func
(paren
id|SC4_THRU_A
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ACTIONS
c_func
(paren
id|SC11_C_WRAP_S
)paren
suffix:colon
id|smc-&gt;mib.p
(braket
id|PS
)braket
dot
id|fddiPORTCurrentPath
op_assign
id|MIB_PATH_CONCATENATED
suffix:semicolon
id|smc-&gt;mib.p
(braket
id|PS
)braket
dot
id|fddiPORTMACPlacement
op_assign
id|INDEX_MAC
suffix:semicolon
id|smc-&gt;mib.fddiSMTStationStatus
op_assign
id|MIB_SMT_STASTA_CON
suffix:semicolon
id|config_mux
c_func
(paren
id|smc
comma
id|MUX_WRAPS
)paren
suffix:semicolon
multiline_comment|/* configure PHY mux */
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
)paren
(brace
id|smc-&gt;r.rm_join
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_loop
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_LOOP
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
)brace
r_if
c_cond
(paren
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_or
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
)paren
(brace
id|smc-&gt;r.rm_loop
op_assign
id|FALSE
suffix:semicolon
id|smc-&gt;r.rm_join
op_assign
id|TRUE
suffix:semicolon
id|queue_event
c_func
(paren
id|smc
comma
id|EVENT_RMT
comma
id|RM_JOIN
)paren
suffix:semicolon
multiline_comment|/* signal RMT */
)brace
id|ACTIONS_DONE
c_func
(paren
)paren
suffix:semicolon
id|DB_CFMN
c_func
(paren
l_int|1
comma
l_string|&quot;CFM : %s&bslash;n&quot;
comma
id|cfm_states
(braket
id|smc-&gt;mib.fddiSMTCF_State
)braket
comma
l_int|0
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC11_C_WRAP_S
suffix:colon
multiline_comment|/*SC70*/
r_if
c_cond
(paren
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_join
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PA
)braket
dot
id|cf_loop
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_join
op_logical_and
op_logical_neg
id|smc-&gt;y
(braket
id|PB
)braket
dot
id|cf_loop
)paren
(brace
id|GO_STATE
c_func
(paren
id|SC0_ISOLATED
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
id|SMT_PANIC
c_func
(paren
id|smc
comma
id|SMT_E0106
comma
id|SMT_E0106_MSG
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * get MAC&squot;s input Port&n; *&t;return :&n; *&t;&t;PA or PB&n; */
DECL|function|cfm_get_mac_input
r_int
id|cfm_get_mac_input
c_func
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
r_return
(paren
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC10_C_WRAP_B
op_logical_or
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC5_THRU_B
)paren
ques
c_cond
id|PB
suffix:colon
id|PA
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * get MAC&squot;s output Port&n; *&t;return :&n; *&t;&t;PA or PB&n; */
DECL|function|cfm_get_mac_output
r_int
id|cfm_get_mac_output
c_func
(paren
id|smc
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
(brace
r_return
(paren
(paren
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC10_C_WRAP_B
op_logical_or
id|smc-&gt;mib.fddiSMTCF_State
op_eq
id|SC4_THRU_A
)paren
ques
c_cond
id|PB
suffix:colon
id|PA
)paren
suffix:semicolon
)brace
DECL|variable|path_iso
r_static
r_char
id|path_iso
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PA
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_ISO
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_MAC
comma
l_int|0
comma
id|INDEX_MAC
comma
l_int|0
comma
id|PATH_ISO
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PB
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_ISO
)brace
suffix:semicolon
DECL|variable|path_wrap_a
r_static
r_char
id|path_wrap_a
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PA
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_MAC
comma
l_int|0
comma
id|INDEX_MAC
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PB
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_ISO
)brace
suffix:semicolon
DECL|variable|path_wrap_b
r_static
r_char
id|path_wrap_b
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PB
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_MAC
comma
l_int|0
comma
id|INDEX_MAC
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PA
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_ISO
)brace
suffix:semicolon
DECL|variable|path_thru
r_static
r_char
id|path_thru
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PA
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_MAC
comma
l_int|0
comma
id|INDEX_MAC
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PB
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_PRIM
)brace
suffix:semicolon
DECL|variable|path_wrap_s
r_static
r_char
id|path_wrap_s
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PS
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_PRIM
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_MAC
comma
l_int|0
comma
id|INDEX_MAC
comma
l_int|0
comma
id|PATH_PRIM
comma
)brace
suffix:semicolon
DECL|variable|path_iso_s
r_static
r_char
id|path_iso_s
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_PORT
comma
l_int|0
comma
id|PS
op_plus
id|INDEX_PORT
comma
l_int|0
comma
id|PATH_ISO
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|RES_MAC
comma
l_int|0
comma
id|INDEX_MAC
comma
l_int|0
comma
id|PATH_ISO
comma
)brace
suffix:semicolon
DECL|function|cem_build_path
r_int
id|cem_build_path
c_func
(paren
id|smc
comma
id|to
comma
id|path_index
)paren
r_struct
id|s_smc
op_star
id|smc
suffix:semicolon
r_char
op_star
id|to
suffix:semicolon
r_int
id|path_index
suffix:semicolon
(brace
r_char
op_star
id|path
suffix:semicolon
r_int
id|len
suffix:semicolon
r_switch
c_cond
(paren
id|smc-&gt;mib.fddiSMTCF_State
)paren
(brace
r_default
suffix:colon
r_case
id|SC0_ISOLATED
suffix:colon
id|path
op_assign
id|smc-&gt;s.sas
ques
c_cond
id|path_iso_s
suffix:colon
id|path_iso
suffix:semicolon
id|len
op_assign
id|smc-&gt;s.sas
ques
c_cond
r_sizeof
(paren
id|path_iso_s
)paren
suffix:colon
r_sizeof
(paren
id|path_iso
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC9_C_WRAP_A
suffix:colon
id|path
op_assign
id|path_wrap_a
suffix:semicolon
id|len
op_assign
r_sizeof
(paren
id|path_wrap_a
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC10_C_WRAP_B
suffix:colon
id|path
op_assign
id|path_wrap_b
suffix:semicolon
id|len
op_assign
r_sizeof
(paren
id|path_wrap_b
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC4_THRU_A
suffix:colon
id|path
op_assign
id|path_thru
suffix:semicolon
id|len
op_assign
r_sizeof
(paren
id|path_thru
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SC11_C_WRAP_S
suffix:colon
id|path
op_assign
id|path_wrap_s
suffix:semicolon
id|len
op_assign
r_sizeof
(paren
id|path_wrap_s
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|to
comma
id|path
comma
id|len
)paren
suffix:semicolon
id|LINT_USE
c_func
(paren
id|path_index
)paren
suffix:semicolon
r_return
(paren
id|len
)paren
suffix:semicolon
)brace
eof
