multiline_comment|/* $Id: envctrl.c,v 1.15 2000/02/09 22:33:23 davem Exp $&n; * envctrl.c: Temperature and Fan monitoring on Machines providing it.&n; *&n; * Copyright (C) 1998  Eddie C. Dost  (ecd@skynet.be)&n; */
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/module.h&gt;
DECL|macro|__KERNEL_SYSCALLS__
mdefine_line|#define __KERNEL_SYSCALLS__
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/unistd.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/miscdevice.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;asm/ebus.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/envctrl.h&gt;
DECL|macro|ENVCTRL_MINOR
mdefine_line|#define ENVCTRL_MINOR&t;162
DECL|macro|U450_SUPPORT
macro_line|#undef U450_SUPPORT&t;&t;/* might fry you machine, careful here !!! */
DECL|macro|DEBUG
macro_line|#undef DEBUG
DECL|macro|DEBUG_BUS_SCAN
macro_line|#undef DEBUG_BUS_SCAN
macro_line|#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,2,0)
DECL|macro|schedule_timeout
mdefine_line|#define schedule_timeout(a) { current-&gt;timeout = jiffies + (a); schedule(); }
macro_line|#endif
DECL|macro|PCF8584_ADDRESS
mdefine_line|#define PCF8584_ADDRESS&t;0x55
DECL|macro|CONTROL_PIN
mdefine_line|#define CONTROL_PIN&t;0x80
DECL|macro|CONTROL_ES0
mdefine_line|#define CONTROL_ES0&t;0x40
DECL|macro|CONTROL_ES1
mdefine_line|#define CONTROL_ES1&t;0x20
DECL|macro|CONTROL_ES2
mdefine_line|#define CONTROL_ES2&t;0x10
DECL|macro|CONTROL_ENI
mdefine_line|#define CONTROL_ENI&t;0x08
DECL|macro|CONTROL_STA
mdefine_line|#define CONTROL_STA&t;0x04
DECL|macro|CONTROL_STO
mdefine_line|#define CONTROL_STO&t;0x02
DECL|macro|CONTROL_ACK
mdefine_line|#define CONTROL_ACK&t;0x01
DECL|macro|STATUS_PIN
mdefine_line|#define STATUS_PIN&t;0x80
DECL|macro|STATUS_STS
mdefine_line|#define STATUS_STS&t;0x20
DECL|macro|STATUS_BER
mdefine_line|#define STATUS_BER&t;0x10
DECL|macro|STATUS_LRB
mdefine_line|#define STATUS_LRB&t;0x08
DECL|macro|STATUS_AD0
mdefine_line|#define STATUS_AD0&t;0x08
DECL|macro|STATUS_AAB
mdefine_line|#define STATUS_AAB&t;0x04
DECL|macro|STATUS_LAB
mdefine_line|#define STATUS_LAB&t;0x02
DECL|macro|STATUS_BB
mdefine_line|#define STATUS_BB&t;0x01
multiline_comment|/*&n; * CLK Mode Register.&n; */
DECL|macro|BUS_CLK_90
mdefine_line|#define BUS_CLK_90&t;0x00
DECL|macro|BUS_CLK_45
mdefine_line|#define BUS_CLK_45&t;0x01
DECL|macro|BUS_CLK_11
mdefine_line|#define BUS_CLK_11&t;0x02
DECL|macro|BUS_CLK_1_5
mdefine_line|#define BUS_CLK_1_5&t;0x03
DECL|macro|CLK_3
mdefine_line|#define CLK_3&t;&t;0x00
DECL|macro|CLK_4_43
mdefine_line|#define CLK_4_43&t;0x10
DECL|macro|CLK_6
mdefine_line|#define CLK_6&t;&t;0x14
DECL|macro|CLK_8
mdefine_line|#define CLK_8&t;&t;0x18
DECL|macro|CLK_12
mdefine_line|#define CLK_12&t;&t;0x1c
DECL|macro|I2C_WRITE
mdefine_line|#define I2C_WRITE&t;0x00
DECL|macro|I2C_READ
mdefine_line|#define I2C_READ&t;0x01
multiline_comment|/* PCF8584 register offsets */
DECL|macro|I2C_DATA
mdefine_line|#define I2C_DATA&t;0x00UL
DECL|macro|I2C_CSR
mdefine_line|#define I2C_CSR&t;&t;0x01UL
DECL|macro|I2C_REG_SIZE
mdefine_line|#define I2C_REG_SIZE&t;0x02UL
DECL|struct|i2c_device
r_struct
id|i2c_device
(brace
DECL|member|addr
r_int
r_char
id|addr
suffix:semicolon
DECL|member|next
r_struct
id|i2c_device
op_star
id|next
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|i2c_regs
r_static
r_int
r_int
id|i2c_regs
suffix:semicolon
DECL|variable|i2c_devices
r_static
r_struct
id|i2c_device
op_star
id|i2c_devices
suffix:semicolon
DECL|variable|errno
r_static
r_int
id|errno
suffix:semicolon
DECL|macro|MAX_TEMPERATURE
mdefine_line|#define MAX_TEMPERATURE&t;&t;111
DECL|macro|MAX_FAN_SPEED
mdefine_line|#define MAX_FAN_SPEED&t;&t;63
multiline_comment|/*&n; * UltraAXi constants.&n; */
DECL|macro|AXI_THERM_ADDR
mdefine_line|#define AXI_THERM_ADDR&t;&t;0x9e
DECL|macro|AXI_THERM_PORT_CPU
mdefine_line|#define AXI_THERM_PORT_CPU&t;0
DECL|macro|AXI_THERM_PORT_MOD
mdefine_line|#define AXI_THERM_PORT_MOD&t;1
DECL|macro|AXI_THERM_PORT_PCI
mdefine_line|#define AXI_THERM_PORT_PCI&t;2
DECL|macro|AXI_THERM_PORT_DISK
mdefine_line|#define AXI_THERM_PORT_DISK&t;3
DECL|macro|AXI_FAN_ADDR
mdefine_line|#define AXI_FAN_ADDR&t;&t;0x4e
DECL|macro|AXI_FAN_PORT_FRONT
mdefine_line|#define AXI_FAN_PORT_FRONT&t;0
DECL|macro|AXI_FAN_PORT_BACK
mdefine_line|#define AXI_FAN_PORT_BACK&t;1
DECL|macro|AXI_PIO_ADDR
mdefine_line|#define AXI_PIO_ADDR&t;&t;0x70
multiline_comment|/*&n; * Ultra 450 constants.&n; */
DECL|macro|U450_FAN_ADDR
mdefine_line|#define U450_FAN_ADDR&t;&t;0x4e
DECL|macro|U450_FAN_PORT_CPU
mdefine_line|#define U450_FAN_PORT_CPU&t;0
DECL|macro|U450_FAN_PORT_PS
mdefine_line|#define U450_FAN_PORT_PS&t;1
DECL|macro|U450_PIO_ADDR
mdefine_line|#define U450_PIO_ADDR&t;&t;0x70
DECL|macro|U450_TIMER_ADDR
mdefine_line|#define U450_TIMER_ADDR&t;&t;0xa0
r_static
r_int
r_char
DECL|variable|axi_cpu_temp_table
id|axi_cpu_temp_table
(braket
l_int|256
)braket
op_assign
(brace
l_int|0x6f
comma
l_int|0x6e
comma
l_int|0x6d
comma
l_int|0x6c
comma
l_int|0x6b
comma
l_int|0x6a
comma
l_int|0x69
comma
l_int|0x67
comma
l_int|0x66
comma
l_int|0x65
comma
l_int|0x64
comma
l_int|0x63
comma
l_int|0x61
comma
l_int|0x60
comma
l_int|0x5f
comma
l_int|0x5e
comma
l_int|0x5d
comma
l_int|0x5b
comma
l_int|0x5a
comma
l_int|0x59
comma
l_int|0x58
comma
l_int|0x57
comma
l_int|0x55
comma
l_int|0x54
comma
l_int|0x53
comma
l_int|0x52
comma
l_int|0x50
comma
l_int|0x4f
comma
l_int|0x4e
comma
l_int|0x4d
comma
l_int|0x4c
comma
l_int|0x4a
comma
l_int|0x49
comma
l_int|0x48
comma
l_int|0x47
comma
l_int|0x46
comma
l_int|0x44
comma
l_int|0x43
comma
l_int|0x42
comma
l_int|0x41
comma
l_int|0x40
comma
l_int|0x3e
comma
l_int|0x3d
comma
l_int|0x3c
comma
l_int|0x3c
comma
l_int|0x3b
comma
l_int|0x3b
comma
l_int|0x3a
comma
l_int|0x3a
comma
l_int|0x39
comma
l_int|0x39
comma
l_int|0x38
comma
l_int|0x38
comma
l_int|0x37
comma
l_int|0x37
comma
l_int|0x36
comma
l_int|0x36
comma
l_int|0x35
comma
l_int|0x35
comma
l_int|0x34
comma
l_int|0x34
comma
l_int|0x33
comma
l_int|0x33
comma
l_int|0x32
comma
l_int|0x32
comma
l_int|0x31
comma
l_int|0x31
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x2f
comma
l_int|0x2f
comma
l_int|0x2e
comma
l_int|0x2d
comma
l_int|0x2d
comma
l_int|0x2c
comma
l_int|0x2c
comma
l_int|0x2b
comma
l_int|0x2b
comma
l_int|0x2a
comma
l_int|0x2a
comma
l_int|0x29
comma
l_int|0x29
comma
l_int|0x28
comma
l_int|0x28
comma
l_int|0x27
comma
l_int|0x27
comma
l_int|0x26
comma
l_int|0x26
comma
l_int|0x25
comma
l_int|0x25
comma
l_int|0x24
comma
l_int|0x24
comma
l_int|0x23
comma
l_int|0x23
comma
l_int|0x22
comma
l_int|0x22
comma
l_int|0x21
comma
l_int|0x21
comma
l_int|0x20
comma
l_int|0x20
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
r_static
r_int
r_char
DECL|variable|axi_mod_temp_table
id|axi_mod_temp_table
(braket
l_int|256
)braket
op_assign
(brace
l_int|0x65
comma
l_int|0x64
comma
l_int|0x63
comma
l_int|0x62
comma
l_int|0x61
comma
l_int|0x60
comma
l_int|0x5f
comma
l_int|0x5e
comma
l_int|0x5d
comma
l_int|0x5c
comma
l_int|0x5b
comma
l_int|0x5a
comma
l_int|0x59
comma
l_int|0x58
comma
l_int|0x57
comma
l_int|0x56
comma
l_int|0x55
comma
l_int|0x54
comma
l_int|0x53
comma
l_int|0x52
comma
l_int|0x51
comma
l_int|0x50
comma
l_int|0x4f
comma
l_int|0x4e
comma
l_int|0x4d
comma
l_int|0x4c
comma
l_int|0x4b
comma
l_int|0x4a
comma
l_int|0x49
comma
l_int|0x48
comma
l_int|0x47
comma
l_int|0x46
comma
l_int|0x45
comma
l_int|0x44
comma
l_int|0x43
comma
l_int|0x42
comma
l_int|0x41
comma
l_int|0x40
comma
l_int|0x3f
comma
l_int|0x3e
comma
l_int|0x3d
comma
l_int|0x3c
comma
l_int|0x3b
comma
l_int|0x3b
comma
l_int|0x3b
comma
l_int|0x3a
comma
l_int|0x3a
comma
l_int|0x39
comma
l_int|0x39
comma
l_int|0x38
comma
l_int|0x38
comma
l_int|0x37
comma
l_int|0x37
comma
l_int|0x36
comma
l_int|0x36
comma
l_int|0x35
comma
l_int|0x35
comma
l_int|0x35
comma
l_int|0x34
comma
l_int|0x34
comma
l_int|0x33
comma
l_int|0x33
comma
l_int|0x32
comma
l_int|0x32
comma
l_int|0x31
comma
l_int|0x31
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x2f
comma
l_int|0x2f
comma
l_int|0x2e
comma
l_int|0x2e
comma
l_int|0x2e
comma
l_int|0x2d
comma
l_int|0x2d
comma
l_int|0x2c
comma
l_int|0x2c
comma
l_int|0x2b
comma
l_int|0x2b
comma
l_int|0x2a
comma
l_int|0x2a
comma
l_int|0x29
comma
l_int|0x29
comma
l_int|0x29
comma
l_int|0x28
comma
l_int|0x28
comma
l_int|0x27
comma
l_int|0x27
comma
l_int|0x26
comma
l_int|0x26
comma
l_int|0x25
comma
l_int|0x25
comma
l_int|0x24
comma
l_int|0x24
comma
l_int|0x23
comma
l_int|0x23
comma
l_int|0x23
comma
l_int|0x22
comma
l_int|0x22
comma
l_int|0x21
comma
l_int|0x21
comma
l_int|0x20
comma
l_int|0x20
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
r_static
r_int
r_char
DECL|variable|axi_fan_speeds
id|axi_fan_speeds
(braket
l_int|112
)braket
op_assign
(brace
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x20
comma
l_int|0x22
comma
l_int|0x23
comma
l_int|0x25
comma
l_int|0x27
comma
l_int|0x28
comma
l_int|0x2a
comma
l_int|0x2b
comma
l_int|0x2d
comma
l_int|0x2f
comma
l_int|0x30
comma
l_int|0x32
comma
l_int|0x33
comma
l_int|0x35
comma
l_int|0x37
comma
l_int|0x38
comma
l_int|0x3a
comma
l_int|0x3b
comma
l_int|0x3d
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
)brace
suffix:semicolon
DECL|struct|therm_regs
r_struct
id|therm_regs
(brace
DECL|member|addr
id|u32
id|addr
suffix:semicolon
DECL|member|port
id|u32
id|port
suffix:semicolon
DECL|member|min_temp
id|u32
id|min_temp
suffix:semicolon
DECL|member|warning
id|u32
id|warning
suffix:semicolon
DECL|member|shutdown
id|u32
id|shutdown
suffix:semicolon
DECL|member|num
id|u32
id|num
suffix:semicolon
DECL|member|den
id|u32
id|den
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|thermistor
r_struct
id|thermistor
(brace
DECL|member|name
r_char
id|name
(braket
l_int|8
)braket
suffix:semicolon
DECL|member|regs
r_struct
id|therm_regs
id|regs
suffix:semicolon
DECL|member|temperature
r_int
r_char
(paren
op_star
id|temperature
)paren
(paren
r_struct
id|thermistor
op_star
)paren
suffix:semicolon
DECL|member|fan_speed
r_int
r_char
(paren
op_star
id|fan_speed
)paren
(paren
r_struct
id|thermistor
op_star
)paren
suffix:semicolon
DECL|member|next
r_struct
id|thermistor
op_star
id|next
suffix:semicolon
multiline_comment|/* all thermistors */
DECL|member|chain
r_struct
id|thermistor
op_star
id|chain
suffix:semicolon
multiline_comment|/* thermistors for one fan */
)brace
suffix:semicolon
DECL|struct|fan_regs
r_struct
id|fan_regs
(brace
DECL|member|addr
id|u32
id|addr
suffix:semicolon
DECL|member|port
id|u32
id|port
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|fan
r_struct
id|fan
(brace
DECL|member|name
r_char
id|name
(braket
l_int|8
)braket
suffix:semicolon
DECL|member|regs
r_struct
id|fan_regs
id|regs
suffix:semicolon
DECL|member|set_speed
r_int
(paren
op_star
id|set_speed
)paren
(paren
r_struct
id|fan
op_star
comma
r_int
r_char
id|value
)paren
suffix:semicolon
DECL|member|check_failure
r_int
(paren
op_star
id|check_failure
)paren
(paren
r_struct
id|fan
op_star
)paren
suffix:semicolon
DECL|member|value
r_int
r_char
id|value
suffix:semicolon
DECL|member|monitor
r_struct
id|thermistor
op_star
id|monitor
suffix:semicolon
DECL|member|next
r_struct
id|fan
op_star
id|next
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|environment
r_struct
id|environment
(brace
DECL|member|thermistors
r_struct
id|thermistor
op_star
id|thermistors
suffix:semicolon
DECL|member|fans
r_struct
id|fan
op_star
id|fans
suffix:semicolon
DECL|member|cpu_temp_table
r_int
r_char
op_star
id|cpu_temp_table
suffix:semicolon
DECL|member|cpu_fan_speeds
r_int
r_char
op_star
id|cpu_fan_speeds
suffix:semicolon
DECL|member|ps_temp_table
r_int
r_char
op_star
id|ps_temp_table
suffix:semicolon
DECL|member|ps_fan_speeds
r_int
r_char
op_star
id|ps_fan_speeds
suffix:semicolon
DECL|member|enable
r_void
(paren
op_star
id|enable
)paren
(paren
r_struct
id|environment
op_star
)paren
suffix:semicolon
DECL|member|disable
r_void
(paren
op_star
id|disable
)paren
(paren
r_struct
id|environment
op_star
)paren
suffix:semicolon
DECL|member|keep_alive
r_void
(paren
op_star
id|keep_alive
)paren
(paren
r_struct
id|environment
op_star
)paren
suffix:semicolon
DECL|member|interval
r_int
id|interval
suffix:semicolon
DECL|member|kenvd_pid
id|pid_t
id|kenvd_pid
suffix:semicolon
DECL|member|kenvd_wait
id|wait_queue_head_t
id|kenvd_wait
suffix:semicolon
DECL|member|terminate
r_int
id|terminate
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|envctrl
r_static
r_struct
id|environment
id|envctrl
suffix:semicolon
macro_line|#ifdef DEBUG_BUS_SCAN
DECL|struct|i2c_addr_map
r_struct
id|i2c_addr_map
(brace
DECL|member|addr
r_int
r_char
id|addr
suffix:semicolon
DECL|member|mask
r_int
r_char
id|mask
suffix:semicolon
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|devmap
r_static
r_struct
id|i2c_addr_map
id|devmap
(braket
)braket
op_assign
(brace
(brace
l_int|0x70
comma
l_int|0xf0
comma
l_string|&quot;PCF8574A&quot;
)brace
comma
(brace
l_int|0x40
comma
l_int|0xf0
comma
l_string|&quot;TDA8444&quot;
)brace
comma
(brace
l_int|0x90
comma
l_int|0xf0
comma
l_string|&quot;PCF8591&quot;
)brace
comma
(brace
l_int|0xa0
comma
l_int|0xf0
comma
l_string|&quot;PCF8583&quot;
)brace
comma
)brace
suffix:semicolon
DECL|macro|NR_DEVMAP
mdefine_line|#define NR_DEVMAP (sizeof(devmap) / sizeof(devmap[0]))
macro_line|#endif
r_static
id|__inline__
r_int
DECL|function|PUT_DATA
id|PUT_DATA
c_func
(paren
r_int
r_int
id|data
comma
r_char
op_star
id|buffer
comma
r_int
id|user
)paren
(brace
r_if
c_cond
(paren
id|user
)paren
(brace
id|u8
id|tmp
op_assign
id|readb
c_func
(paren
id|data
)paren
suffix:semicolon
r_if
c_cond
(paren
id|put_user
c_func
(paren
id|tmp
comma
id|buffer
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
r_else
(brace
op_star
id|buffer
op_assign
id|readb
c_func
(paren
id|data
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|__inline__
r_int
DECL|function|GET_DATA
id|GET_DATA
c_func
(paren
r_int
r_int
id|data
comma
r_const
r_char
op_star
id|buffer
comma
r_int
id|user
)paren
(brace
r_if
c_cond
(paren
id|user
)paren
(brace
id|u8
id|tmp
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|tmp
comma
id|buffer
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|writeb
c_func
(paren
id|tmp
comma
id|data
)paren
suffix:semicolon
)brace
r_else
(brace
id|writeb
c_func
(paren
op_star
id|buffer
comma
id|data
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|i2c_read
id|i2c_read
c_func
(paren
r_int
r_char
id|dev
comma
r_char
op_star
id|buffer
comma
r_int
id|len
comma
r_int
id|user
)paren
(brace
r_int
r_char
id|dummy
suffix:semicolon
r_int
r_char
id|stat
suffix:semicolon
r_int
id|error
op_assign
op_minus
id|ENODEV
suffix:semicolon
r_int
id|count
op_assign
l_int|0
suffix:semicolon
id|writeb
c_func
(paren
(paren
id|dev
op_amp
l_int|0xfe
)paren
op_or
id|I2C_READ
comma
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
op_amp
id|STATUS_BB
)paren
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STA
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_do
(brace
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|stat
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
)paren
op_amp
id|STATUS_PIN
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|STATUS_LRB
)paren
r_goto
id|stop
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|len
op_eq
l_int|0
)paren
(brace
id|count
op_decrement
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|count
op_eq
(paren
id|len
op_minus
l_int|1
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|count
op_increment
OG
l_int|0
)paren
(brace
id|error
op_assign
id|PUT_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|buffer
op_increment
comma
id|user
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_break
suffix:semicolon
)brace
r_else
id|dummy
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_ES0
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
op_logical_and
(paren
id|count
op_increment
OG
l_int|0
)paren
)paren
id|error
op_assign
id|PUT_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|buffer
op_increment
comma
id|user
)paren
suffix:semicolon
r_else
id|dummy
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|stat
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
)paren
op_amp
id|STATUS_PIN
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|stop
suffix:colon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STO
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
op_logical_and
(paren
id|count
op_increment
OG
l_int|0
)paren
)paren
id|error
op_assign
id|PUT_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|buffer
op_increment
comma
id|user
)paren
suffix:semicolon
r_else
id|dummy
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_return
id|error
suffix:semicolon
r_return
id|count
op_minus
l_int|1
suffix:semicolon
)brace
r_static
r_int
DECL|function|i2c_write
id|i2c_write
c_func
(paren
r_int
r_char
id|dev
comma
r_const
r_char
op_star
id|buffer
comma
r_int
id|len
comma
r_int
id|user
)paren
(brace
r_int
id|error
op_assign
op_minus
id|ENODEV
suffix:semicolon
r_int
id|count
op_assign
l_int|0
suffix:semicolon
r_int
id|timeout
suffix:semicolon
id|timeout
op_assign
l_int|1000000
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
op_amp
id|STATUS_BB
)paren
op_logical_and
op_decrement
id|timeout
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|timeout
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s [%d]: TIMEOUT&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|__LINE__
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|writeb
c_func
(paren
(paren
id|dev
op_amp
l_int|0xfe
)paren
op_or
id|I2C_WRITE
comma
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STA
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_do
(brace
r_int
r_char
id|stat
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|timeout
op_assign
l_int|1000000
suffix:semicolon
r_while
c_loop
(paren
(paren
(paren
id|stat
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
)paren
op_amp
id|STATUS_PIN
)paren
op_logical_and
op_decrement
id|timeout
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|timeout
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s [%d]: TIMEOUT&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|__LINE__
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|stat
op_amp
id|STATUS_LRB
)paren
r_break
suffix:semicolon
id|error
op_assign
id|count
suffix:semicolon
r_if
c_cond
(paren
id|count
op_eq
id|len
)paren
r_break
suffix:semicolon
id|error
op_assign
id|GET_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|buffer
op_increment
comma
id|user
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_break
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STO
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
macro_line|#ifdef U450_SUPPORT
r_static
r_int
DECL|function|i2c_write_read
id|i2c_write_read
c_func
(paren
r_int
r_char
id|dev
comma
r_char
op_star
id|outbuf
comma
r_int
id|outlen
comma
r_char
op_star
id|inbuf
comma
r_int
id|inlen
comma
r_int
id|user
)paren
(brace
r_int
r_char
id|dummy
suffix:semicolon
r_int
r_char
id|stat
suffix:semicolon
r_int
id|error
op_assign
op_minus
id|ENODEV
suffix:semicolon
r_int
id|count
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
(paren
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
op_amp
id|STATUS_BB
)paren
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|writeb
c_func
(paren
(paren
id|dev
op_amp
l_int|0xfe
)paren
op_or
id|I2C_WRITE
comma
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STA
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_do
(brace
r_int
r_char
id|stat
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|stat
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
)paren
op_amp
id|STATUS_PIN
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|STATUS_LRB
)paren
r_break
suffix:semicolon
id|error
op_assign
id|count
suffix:semicolon
r_if
c_cond
(paren
id|count
op_eq
id|outlen
)paren
r_break
suffix:semicolon
id|error
op_assign
id|GET_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|outbuf
op_increment
comma
id|user
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_break
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
OL
l_int|0
)paren
(brace
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STO
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
id|writeb
c_func
(paren
id|CONTROL_ES0
op_or
id|CONTROL_STA
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|writeb
c_func
(paren
(paren
id|dev
op_amp
l_int|0xfe
)paren
op_or
id|I2C_READ
comma
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|count
op_assign
l_int|0
suffix:semicolon
r_do
(brace
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|stat
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
)paren
op_amp
id|STATUS_PIN
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|stat
op_amp
id|STATUS_LRB
)paren
r_goto
id|stop
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|inlen
op_eq
l_int|0
)paren
(brace
id|count
op_decrement
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|count
op_eq
(paren
id|inlen
op_minus
l_int|1
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|count
op_increment
OG
l_int|0
)paren
(brace
id|error
op_assign
id|PUT_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|inbuf
op_increment
comma
id|user
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_break
suffix:semicolon
)brace
r_else
id|dummy
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_ES0
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
op_logical_and
(paren
id|count
op_increment
OG
l_int|0
)paren
)paren
id|error
op_assign
id|PUT_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|inbuf
op_increment
comma
id|user
)paren
suffix:semicolon
r_else
id|dummy
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|stat
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_CSR
)paren
)paren
op_amp
id|STATUS_PIN
)paren
id|udelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|stop
suffix:colon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_STO
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
op_logical_and
(paren
id|count
op_increment
OG
l_int|0
)paren
)paren
id|error
op_assign
id|PUT_DATA
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
comma
id|inbuf
op_increment
comma
id|user
)paren
suffix:semicolon
r_else
id|dummy
op_assign
id|readb
c_func
(paren
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_return
id|error
suffix:semicolon
r_return
id|count
op_minus
l_int|1
suffix:semicolon
)brace
macro_line|#endif /* U450_SUPPORT */
r_static
r_struct
id|i2c_device
op_star
DECL|function|i2c_find_device
id|i2c_find_device
c_func
(paren
r_int
r_char
id|addr
)paren
(brace
r_struct
id|i2c_device
op_star
id|dev
suffix:semicolon
r_for
c_loop
(paren
id|dev
op_assign
id|i2c_devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
(brace
r_if
c_cond
(paren
id|dev-&gt;addr
op_eq
id|addr
)paren
r_return
id|dev
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|i2c_free_devices
id|i2c_free_devices
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2c_device
op_star
id|dev
suffix:semicolon
id|dev
op_assign
id|i2c_devices
suffix:semicolon
r_while
c_loop
(paren
id|dev
)paren
(brace
id|i2c_devices
op_assign
id|dev-&gt;next
suffix:semicolon
id|kfree
c_func
(paren
id|dev
)paren
suffix:semicolon
id|dev
op_assign
id|i2c_devices
suffix:semicolon
)brace
)brace
DECL|function|i2c_scan_bus
r_static
id|__init
r_int
id|i2c_scan_bus
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2c_device
op_star
id|dev
comma
op_star
op_star
id|last
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
r_int
id|count
op_assign
l_int|0
suffix:semicolon
id|last
op_assign
op_amp
id|i2c_devices
suffix:semicolon
r_for
c_loop
(paren
id|addr
op_assign
l_int|0
suffix:semicolon
id|addr
OL
l_int|256
suffix:semicolon
id|addr
op_add_assign
l_int|2
)paren
(brace
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|addr
comma
l_int|0
comma
l_int|0
comma
l_int|0
)paren
op_eq
l_int|0
)paren
(brace
macro_line|#ifdef DEBUG_BUS_SCAN
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|NR_DEVMAP
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
(paren
id|addr
op_amp
id|devmap
(braket
id|i
)braket
dot
id|mask
)paren
op_eq
id|devmap
(braket
id|i
)braket
dot
id|addr
)paren
r_break
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;envctrl: i2c device at %02x: %s&bslash;n&quot;
comma
id|addr
comma
id|i
OL
id|NR_DEVMAP
ques
c_cond
id|devmap
(braket
id|i
)braket
dot
id|name
suffix:colon
l_string|&quot;unknown&quot;
)paren
suffix:semicolon
macro_line|#endif
id|dev
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|i2c_device
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dev
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;i2c: can&squot;t alloc i2c_device&bslash;n&quot;
)paren
suffix:semicolon
id|i2c_free_devices
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|dev
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|i2c_device
)paren
)paren
suffix:semicolon
id|dev-&gt;addr
op_assign
id|addr
suffix:semicolon
op_star
id|last
op_assign
id|dev
suffix:semicolon
id|last
op_assign
op_amp
id|dev-&gt;next
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|count
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: no devices found&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|read_8591
id|read_8591
c_func
(paren
r_int
r_char
id|dev
comma
r_int
r_char
id|offset
comma
r_int
r_char
op_star
id|value
)paren
(brace
r_int
r_char
id|data
(braket
l_int|2
)braket
suffix:semicolon
id|data
(braket
l_int|0
)braket
op_assign
l_int|0x40
op_or
id|offset
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|dev
comma
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|i2c_read
c_func
(paren
id|dev
comma
id|data
comma
l_int|2
comma
l_int|0
)paren
op_ne
l_int|2
)paren
r_return
op_minus
l_int|1
suffix:semicolon
op_star
id|value
op_assign
id|data
(braket
l_int|1
)braket
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|write_8444
id|write_8444
c_func
(paren
r_int
r_char
id|dev
comma
r_int
r_char
id|offset
comma
r_int
r_char
id|value
)paren
(brace
r_int
r_char
id|data
(braket
l_int|2
)braket
suffix:semicolon
id|data
(braket
l_int|0
)braket
op_assign
id|offset
suffix:semicolon
id|data
(braket
l_int|1
)braket
op_assign
id|value
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|dev
comma
id|data
comma
l_int|2
comma
l_int|0
)paren
op_ne
l_int|2
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef U450_SUPPORT
r_static
r_int
DECL|function|read_8583
id|read_8583
c_func
(paren
r_int
r_char
id|dev
comma
r_int
r_char
id|offset
comma
r_int
r_char
op_star
id|value
)paren
(brace
r_int
r_char
id|data
suffix:semicolon
id|data
op_assign
id|offset
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write_read
c_func
(paren
id|dev
comma
op_amp
id|data
comma
l_int|1
comma
op_amp
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
op_minus
l_int|1
suffix:semicolon
op_star
id|value
op_assign
id|data
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|write_8583
id|write_8583
c_func
(paren
r_int
r_char
id|dev
comma
r_int
r_char
id|offset
comma
r_int
r_char
id|value
)paren
(brace
r_int
r_char
id|data
(braket
l_int|2
)braket
suffix:semicolon
id|data
(braket
l_int|0
)braket
op_assign
id|offset
suffix:semicolon
id|data
(braket
l_int|1
)braket
op_assign
id|value
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|dev
comma
id|data
comma
l_int|2
comma
l_int|0
)paren
op_ne
l_int|2
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif /* U450_SUPPORT */
r_struct
id|thermistor
op_star
DECL|function|find_thermistor
id|find_thermistor
c_func
(paren
r_const
r_char
op_star
id|name
comma
r_struct
id|thermistor
op_star
id|from
)paren
(brace
r_int
id|n
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|from
)paren
id|from
op_assign
id|envctrl.thermistors
suffix:semicolon
r_else
id|from
op_assign
id|from-&gt;next
suffix:semicolon
id|n
op_assign
id|strlen
c_func
(paren
id|name
)paren
suffix:semicolon
r_while
c_loop
(paren
id|from
op_logical_and
id|strncmp
c_func
(paren
id|from-&gt;name
comma
id|name
comma
id|n
)paren
)paren
id|from
op_assign
id|from-&gt;next
suffix:semicolon
r_return
id|from
suffix:semicolon
)brace
r_void
DECL|function|check_temperatures
id|check_temperatures
c_func
(paren
r_struct
id|environment
op_star
id|env
)paren
(brace
r_struct
id|thermistor
op_star
id|t
suffix:semicolon
r_for
c_loop
(paren
id|t
op_assign
id|env-&gt;thermistors
suffix:semicolon
id|t
suffix:semicolon
id|t
op_assign
id|t-&gt;next
)paren
(brace
macro_line|#ifdef DEBUG
id|printk
c_func
(paren
l_string|&quot;Thermistor `%s&squot; [%02x:%d]: &quot;
l_string|&quot;%d C (%d C, %d C)&bslash;n&quot;
comma
id|t-&gt;name
comma
id|t-&gt;regs.addr
comma
id|t-&gt;regs.port
comma
id|t
op_member_access_from_pointer
id|temperature
c_func
(paren
id|t
)paren
comma
id|t-&gt;regs.warning
comma
id|t-&gt;regs.shutdown
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n;&t;&t; * Implement slow-down or shutdown here...&n;&t;&t; */
)brace
)brace
r_void
DECL|function|check_fan_speeds
id|check_fan_speeds
c_func
(paren
r_struct
id|environment
op_star
id|env
)paren
(brace
r_int
r_char
id|speed
comma
id|max
suffix:semicolon
r_struct
id|thermistor
op_star
id|t
suffix:semicolon
r_struct
id|fan
op_star
id|f
suffix:semicolon
r_for
c_loop
(paren
id|f
op_assign
id|env-&gt;fans
suffix:semicolon
id|f
suffix:semicolon
id|f
op_assign
id|f-&gt;next
)paren
(brace
macro_line|#ifdef DEBUG
id|printk
c_func
(paren
l_string|&quot;Fan `%s&squot; [%02x:%d]:&quot;
comma
id|f-&gt;name
comma
id|f-&gt;regs.addr
comma
id|f-&gt;regs.port
)paren
suffix:semicolon
macro_line|#endif
id|max
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|t
op_assign
id|f-&gt;monitor
suffix:semicolon
id|t
suffix:semicolon
id|t
op_assign
id|t-&gt;chain
)paren
(brace
id|speed
op_assign
id|t
op_member_access_from_pointer
id|fan_speed
c_func
(paren
id|t
)paren
suffix:semicolon
r_if
c_cond
(paren
id|speed
OG
id|max
)paren
id|max
op_assign
id|speed
suffix:semicolon
macro_line|#ifdef DEBUG
id|printk
c_func
(paren
l_string|&quot; %s:%02x&quot;
comma
id|t-&gt;name
comma
id|speed
)paren
suffix:semicolon
macro_line|#endif
)brace
id|f
op_member_access_from_pointer
id|set_speed
c_func
(paren
id|f
comma
id|max
)paren
suffix:semicolon
macro_line|#ifdef DEBUG
id|printk
c_func
(paren
l_string|&quot; -&gt; %02x&bslash;n&quot;
comma
id|f-&gt;value
)paren
suffix:semicolon
macro_line|#endif
)brace
)brace
r_void
DECL|function|envctrl_fans_blast
id|envctrl_fans_blast
c_func
(paren
r_struct
id|environment
op_star
id|env
)paren
(brace
r_struct
id|fan
op_star
id|f
suffix:semicolon
r_for
c_loop
(paren
id|f
op_assign
id|env-&gt;fans
suffix:semicolon
id|f
suffix:semicolon
id|f
op_assign
id|f-&gt;next
)paren
id|f
op_member_access_from_pointer
id|set_speed
c_func
(paren
id|f
comma
id|MAX_FAN_SPEED
)paren
suffix:semicolon
)brace
r_int
DECL|function|kenvd
id|kenvd
c_func
(paren
r_void
op_star
id|data
)paren
(brace
r_struct
id|environment
op_star
id|env
op_assign
id|data
suffix:semicolon
id|MOD_INC_USE_COUNT
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|env-&gt;kenvd_pid
op_assign
id|current-&gt;pid
suffix:semicolon
id|exit_files
c_func
(paren
id|current
)paren
suffix:semicolon
id|exit_mm
c_func
(paren
id|current
)paren
suffix:semicolon
id|spin_lock_irq
c_func
(paren
op_amp
id|current-&gt;sigmask_lock
)paren
suffix:semicolon
id|siginitsetinv
c_func
(paren
op_amp
id|current-&gt;blocked
comma
id|sigmask
c_func
(paren
id|SIGKILL
)paren
)paren
suffix:semicolon
id|recalc_sigpending
c_func
(paren
id|current
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|current-&gt;sigmask_lock
)paren
suffix:semicolon
id|current-&gt;session
op_assign
l_int|1
suffix:semicolon
id|current-&gt;pgrp
op_assign
l_int|1
suffix:semicolon
id|strcpy
c_func
(paren
id|current-&gt;comm
comma
l_string|&quot;kenvd&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|env-&gt;enable
)paren
id|env
op_member_access_from_pointer
id|enable
c_func
(paren
id|env
)paren
suffix:semicolon
r_while
c_loop
(paren
op_logical_neg
id|env-&gt;terminate
)paren
(brace
id|check_temperatures
c_func
(paren
id|env
)paren
suffix:semicolon
id|check_fan_speeds
c_func
(paren
id|env
)paren
suffix:semicolon
r_if
c_cond
(paren
id|env-&gt;keep_alive
)paren
id|env
op_member_access_from_pointer
id|keep_alive
c_func
(paren
id|env
)paren
suffix:semicolon
id|current-&gt;state
op_assign
id|TASK_INTERRUPTIBLE
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|env-&gt;interval
op_star
id|HZ
)paren
suffix:semicolon
r_if
c_cond
(paren
id|signal_pending
c_func
(paren
id|current
)paren
)paren
(brace
id|spin_lock_irq
c_func
(paren
op_amp
id|current-&gt;sigmask_lock
)paren
suffix:semicolon
id|flush_signals
c_func
(paren
id|current
)paren
suffix:semicolon
id|spin_unlock_irq
c_func
(paren
op_amp
id|current-&gt;sigmask_lock
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|env-&gt;disable
)paren
id|env
op_member_access_from_pointer
id|disable
c_func
(paren
id|env
)paren
suffix:semicolon
id|env-&gt;kenvd_pid
op_assign
l_int|0
suffix:semicolon
id|wake_up
c_func
(paren
op_amp
id|envctrl.kenvd_wait
)paren
suffix:semicolon
id|MOD_DEC_USE_COUNT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|envctrl_stop
id|envctrl_stop
c_func
(paren
r_void
)paren
(brace
id|DECLARE_WAITQUEUE
c_func
(paren
id|wait
comma
id|current
)paren
suffix:semicolon
r_struct
id|thermistor
op_star
id|t
suffix:semicolon
r_struct
id|fan
op_star
id|f
suffix:semicolon
id|pid_t
id|pid
suffix:semicolon
r_if
c_cond
(paren
id|envctrl.kenvd_pid
)paren
(brace
id|pid
op_assign
id|envctrl.kenvd_pid
suffix:semicolon
id|current-&gt;state
op_assign
id|TASK_INTERRUPTIBLE
suffix:semicolon
id|add_wait_queue
c_func
(paren
op_amp
id|envctrl.kenvd_wait
comma
op_amp
id|wait
)paren
suffix:semicolon
id|envctrl.terminate
op_assign
l_int|1
suffix:semicolon
id|kill_proc
c_func
(paren
id|pid
comma
id|SIGKILL
comma
l_int|1
)paren
suffix:semicolon
id|schedule
c_func
(paren
)paren
suffix:semicolon
id|remove_wait_queue
c_func
(paren
op_amp
id|envctrl.kenvd_wait
comma
op_amp
id|wait
)paren
suffix:semicolon
id|current-&gt;state
op_assign
id|TASK_RUNNING
suffix:semicolon
)brace
id|t
op_assign
id|envctrl.thermistors
suffix:semicolon
r_while
c_loop
(paren
id|t
)paren
(brace
id|envctrl.thermistors
op_assign
id|t-&gt;next
suffix:semicolon
id|kfree
c_func
(paren
id|t
)paren
suffix:semicolon
id|t
op_assign
id|envctrl.thermistors
suffix:semicolon
)brace
id|f
op_assign
id|envctrl.fans
suffix:semicolon
r_while
c_loop
(paren
id|f
)paren
(brace
id|envctrl.fans
op_assign
id|f-&gt;next
suffix:semicolon
id|kfree
c_func
(paren
id|f
)paren
suffix:semicolon
id|f
op_assign
id|envctrl.fans
suffix:semicolon
)brace
r_if
c_cond
(paren
id|envctrl.cpu_temp_table
)paren
id|kfree
c_func
(paren
id|envctrl.cpu_temp_table
)paren
suffix:semicolon
r_if
c_cond
(paren
id|envctrl.cpu_fan_speeds
)paren
id|kfree
c_func
(paren
id|envctrl.cpu_fan_speeds
)paren
suffix:semicolon
r_if
c_cond
(paren
id|envctrl.ps_temp_table
)paren
id|kfree
c_func
(paren
id|envctrl.ps_temp_table
)paren
suffix:semicolon
r_if
c_cond
(paren
id|envctrl.ps_fan_speeds
)paren
id|kfree
c_func
(paren
id|envctrl.ps_fan_speeds
)paren
suffix:semicolon
)brace
r_static
r_int
r_char
DECL|function|axi_get_temperature
id|axi_get_temperature
c_func
(paren
r_struct
id|thermistor
op_star
id|t
)paren
(brace
r_int
r_char
id|value
suffix:semicolon
r_if
c_cond
(paren
id|read_8591
c_func
(paren
id|t-&gt;regs.addr
comma
id|t-&gt;regs.port
comma
op_amp
id|value
)paren
OL
l_int|0
)paren
r_return
id|MAX_TEMPERATURE
suffix:semicolon
r_if
c_cond
(paren
id|t-&gt;regs.port
op_eq
id|AXI_THERM_PORT_CPU
)paren
r_return
id|axi_cpu_temp_table
(braket
id|value
)braket
suffix:semicolon
r_else
r_return
id|axi_mod_temp_table
(braket
id|value
)braket
suffix:semicolon
)brace
r_static
r_int
r_char
DECL|function|axi_get_fan_speed
id|axi_get_fan_speed
c_func
(paren
r_struct
id|thermistor
op_star
id|t
)paren
(brace
r_int
r_char
id|temp
suffix:semicolon
id|temp
op_assign
id|t
op_member_access_from_pointer
id|temperature
c_func
(paren
id|t
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ge
id|MAX_TEMPERATURE
)paren
r_return
id|MAX_FAN_SPEED
suffix:semicolon
r_return
id|axi_fan_speeds
(braket
id|temp
)braket
suffix:semicolon
)brace
r_static
r_int
DECL|function|axi_set_fan_speed
id|axi_set_fan_speed
c_func
(paren
r_struct
id|fan
op_star
id|f
comma
r_int
r_char
id|value
)paren
(brace
r_if
c_cond
(paren
id|value
op_ne
id|f-&gt;value
)paren
(brace
r_if
c_cond
(paren
id|write_8444
c_func
(paren
id|f-&gt;regs.addr
comma
id|f-&gt;regs.port
comma
id|value
)paren
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|f-&gt;value
op_assign
id|value
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|axi_toggle_i2c_int
id|axi_toggle_i2c_int
c_func
(paren
r_struct
id|environment
op_star
id|env
)paren
(brace
r_int
r_char
id|data
suffix:semicolon
r_if
c_cond
(paren
id|i2c_read
c_func
(paren
id|AXI_PIO_ADDR
comma
op_amp
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
suffix:semicolon
id|data
op_and_assign
op_complement
(paren
l_int|0x08
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|AXI_PIO_ADDR
comma
op_amp
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
suffix:semicolon
id|mdelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|data
op_or_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|AXI_PIO_ADDR
comma
op_amp
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
suffix:semicolon
id|mdelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|rasctrl_setup
id|rasctrl_setup
c_func
(paren
r_int
id|node
)paren
(brace
r_struct
id|thermistor
op_star
id|t
comma
op_star
op_star
id|tlast
suffix:semicolon
r_struct
id|fan
op_star
id|f
comma
op_star
op_star
id|flast
suffix:semicolon
r_char
id|tmp
(braket
l_int|32
)braket
suffix:semicolon
r_int
id|monitor
suffix:semicolon
r_int
id|shutdown
suffix:semicolon
r_int
id|warning
suffix:semicolon
r_int
id|i
suffix:semicolon
id|prom_getstring
c_func
(paren
id|prom_root_node
comma
l_string|&quot;name&quot;
comma
id|tmp
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|strcmp
c_func
(paren
id|tmp
comma
l_string|&quot;SUNW,UltraSPARC-IIi-Engine&quot;
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;SUNW,rasctrl will work only on Ultra AXi&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|monitor
op_assign
id|prom_getintdefault
c_func
(paren
id|node
comma
l_string|&quot;env-monitor&quot;
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|monitor
op_eq
l_int|0
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|envctrl.interval
op_assign
id|prom_getintdefault
c_func
(paren
id|node
comma
l_string|&quot;env-mon-interval&quot;
comma
l_int|60
)paren
suffix:semicolon
id|warning
op_assign
id|prom_getintdefault
c_func
(paren
id|node
comma
l_string|&quot;warning-temp&quot;
comma
l_int|55
)paren
suffix:semicolon
id|shutdown
op_assign
id|prom_getintdefault
c_func
(paren
id|node
comma
l_string|&quot;shutdown-temp&quot;
comma
l_int|58
)paren
suffix:semicolon
id|tlast
op_assign
op_amp
id|envctrl.thermistors
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
(brace
id|t
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|thermistor
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|t
)paren
r_goto
id|out
suffix:semicolon
id|memset
c_func
(paren
id|t
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|thermistor
)paren
)paren
suffix:semicolon
id|t-&gt;regs.addr
op_assign
id|AXI_THERM_ADDR
suffix:semicolon
id|t-&gt;regs.port
op_assign
id|i
suffix:semicolon
id|t-&gt;regs.warning
op_assign
id|warning
suffix:semicolon
id|t-&gt;regs.shutdown
op_assign
id|shutdown
suffix:semicolon
r_switch
c_cond
(paren
id|i
)paren
(brace
r_case
id|AXI_THERM_PORT_CPU
suffix:colon
id|sprintf
c_func
(paren
id|t-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;CPU&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AXI_THERM_PORT_MOD
suffix:colon
id|sprintf
c_func
(paren
id|t-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;MOD&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AXI_THERM_PORT_PCI
suffix:colon
id|sprintf
c_func
(paren
id|t-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;PCI&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|AXI_THERM_PORT_DISK
suffix:colon
id|sprintf
c_func
(paren
id|t-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;DISK&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|t-&gt;temperature
op_assign
id|axi_get_temperature
suffix:semicolon
id|t-&gt;fan_speed
op_assign
id|axi_get_fan_speed
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2c_find_device
c_func
(paren
id|t-&gt;regs.addr
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: `%s&squot;: i2c device %02x not found&bslash;n&quot;
comma
id|t-&gt;name
comma
id|t-&gt;regs.addr
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|t
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
op_star
id|tlast
op_assign
id|t
suffix:semicolon
id|tlast
op_assign
op_amp
id|t-&gt;next
suffix:semicolon
)brace
id|flast
op_assign
op_amp
id|envctrl.fans
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|2
suffix:semicolon
id|i
op_increment
)paren
(brace
id|f
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|fan
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|f
)paren
r_goto
id|out
suffix:semicolon
id|memset
c_func
(paren
id|f
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|fan
)paren
)paren
suffix:semicolon
id|f-&gt;regs.addr
op_assign
id|AXI_FAN_ADDR
suffix:semicolon
id|f-&gt;regs.port
op_assign
id|i
suffix:semicolon
r_switch
c_cond
(paren
id|i
)paren
(brace
r_case
id|AXI_FAN_PORT_FRONT
suffix:colon
id|sprintf
c_func
(paren
id|f-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;FRONT&quot;
)paren
suffix:semicolon
id|t
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
(paren
id|t
op_assign
id|find_thermistor
c_func
(paren
l_string|&quot;CPU&quot;
comma
id|t
)paren
)paren
)paren
(brace
id|t-&gt;chain
op_assign
id|f-&gt;monitor
suffix:semicolon
id|f-&gt;monitor
op_assign
id|t
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|AXI_FAN_PORT_BACK
suffix:colon
id|sprintf
c_func
(paren
id|f-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;BACK&quot;
)paren
suffix:semicolon
id|t
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
(paren
id|t
op_assign
id|find_thermistor
c_func
(paren
l_string|&quot;PCI&quot;
comma
id|t
)paren
)paren
)paren
(brace
id|t-&gt;chain
op_assign
id|f-&gt;monitor
suffix:semicolon
id|f-&gt;monitor
op_assign
id|t
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|f-&gt;monitor
)paren
(brace
id|kfree
c_func
(paren
id|f
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|i2c_find_device
c_func
(paren
id|f-&gt;regs.addr
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: `%s&squot;: i2c device %02x not found&bslash;n&quot;
comma
id|f-&gt;name
comma
id|f-&gt;regs.addr
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|f
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
op_star
id|flast
op_assign
id|f
suffix:semicolon
id|flast
op_assign
op_amp
id|f-&gt;next
suffix:semicolon
id|f-&gt;check_failure
op_assign
l_int|NULL
suffix:semicolon
id|f-&gt;set_speed
op_assign
id|axi_set_fan_speed
suffix:semicolon
)brace
id|envctrl.enable
op_assign
id|axi_toggle_i2c_int
suffix:semicolon
id|envctrl.disable
op_assign
id|envctrl_fans_blast
suffix:semicolon
macro_line|#ifdef DEBUG
id|printk
c_func
(paren
l_string|&quot;Warn: %d C, Shutdown %d C, Interval %d s, Monitor %d&bslash;n&quot;
comma
id|warning
comma
id|shutdown
comma
id|envctrl.interval
comma
id|monitor
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
id|out
suffix:colon
id|envctrl_stop
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
macro_line|#ifdef U450_SUPPORT
r_static
r_int
r_char
DECL|function|envctrl_get_temperature
id|envctrl_get_temperature
c_func
(paren
r_struct
id|thermistor
op_star
id|t
)paren
(brace
r_int
r_char
id|value
suffix:semicolon
r_if
c_cond
(paren
id|read_8591
c_func
(paren
id|t-&gt;regs.addr
comma
id|t-&gt;regs.port
comma
op_amp
id|value
)paren
OL
l_int|0
)paren
r_return
id|MAX_TEMPERATURE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|t-&gt;name
comma
l_string|&quot;CPU&quot;
comma
l_int|3
)paren
)paren
r_return
id|envctrl.cpu_temp_table
(braket
id|value
)braket
suffix:semicolon
r_else
r_return
id|envctrl.ps_temp_table
(braket
id|value
)braket
suffix:semicolon
)brace
r_static
r_int
r_char
DECL|function|envctrl_get_fan_speed
id|envctrl_get_fan_speed
c_func
(paren
r_struct
id|thermistor
op_star
id|t
)paren
(brace
r_int
r_char
id|temp
suffix:semicolon
id|temp
op_assign
id|t
op_member_access_from_pointer
id|temperature
c_func
(paren
id|t
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_ge
id|MAX_TEMPERATURE
)paren
r_return
id|MAX_FAN_SPEED
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strncmp
c_func
(paren
id|t-&gt;name
comma
l_string|&quot;CPU&quot;
comma
l_int|3
)paren
)paren
r_return
id|envctrl.cpu_fan_speeds
(braket
id|temp
)braket
suffix:semicolon
r_else
r_return
id|envctrl.ps_fan_speeds
(braket
id|temp
)braket
suffix:semicolon
)brace
r_static
r_int
DECL|function|envctrl_set_fan_speed
id|envctrl_set_fan_speed
c_func
(paren
r_struct
id|fan
op_star
id|f
comma
r_int
r_char
id|value
)paren
(brace
r_if
c_cond
(paren
id|value
op_ne
id|f-&gt;value
)paren
(brace
r_if
c_cond
(paren
id|write_8444
c_func
(paren
id|f-&gt;regs.addr
comma
id|f-&gt;regs.port
comma
id|value
)paren
)paren
r_return
op_minus
l_int|1
suffix:semicolon
id|f-&gt;value
op_assign
id|value
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|u450_default_thermisters
r_static
r_int
r_char
id|u450_default_thermisters
(braket
)braket
op_assign
(brace
multiline_comment|/* CPU0 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x9e
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x46
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x43
comma
l_int|0x50
comma
l_int|0x55
comma
l_int|0x30
comma
l_int|0x00
comma
multiline_comment|/* CPU1 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x9c
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x46
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x43
comma
l_int|0x50
comma
l_int|0x55
comma
l_int|0x31
comma
l_int|0x00
comma
multiline_comment|/* CPU2 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x98
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x46
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x43
comma
l_int|0x50
comma
l_int|0x55
comma
l_int|0x32
comma
l_int|0x00
comma
multiline_comment|/* CPU3 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x96
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x46
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x50
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x43
comma
l_int|0x50
comma
l_int|0x55
comma
l_int|0x33
comma
l_int|0x00
comma
multiline_comment|/* PS0 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x90
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x5a
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x64
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x53
comma
l_int|0x30
comma
l_int|0x00
comma
multiline_comment|/* PS1 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x92
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x5a
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x64
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x53
comma
l_int|0x31
comma
l_int|0x00
comma
multiline_comment|/* PS2 */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x94
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x5a
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x64
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x50
comma
l_int|0x53
comma
l_int|0x32
comma
l_int|0x00
comma
multiline_comment|/* AMB */
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x9a
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x05
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x28
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x32
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x01
comma
l_int|0x41
comma
l_int|0x4d
comma
l_int|0x42
comma
l_int|0x00
)brace
suffix:semicolon
DECL|variable|u450_default_cpu_temp_factors
r_static
r_int
r_char
id|u450_default_cpu_temp_factors
(braket
)braket
op_assign
(brace
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x96
comma
l_int|0x94
comma
l_int|0x92
comma
l_int|0x90
comma
l_int|0x8f
comma
l_int|0x8e
comma
l_int|0x8d
comma
l_int|0x8c
comma
l_int|0x8a
comma
l_int|0x88
comma
l_int|0x87
comma
l_int|0x86
comma
l_int|0x85
comma
l_int|0x84
comma
l_int|0x83
comma
l_int|0x82
comma
l_int|0x81
comma
l_int|0x80
comma
l_int|0x7f
comma
l_int|0x7e
comma
l_int|0x7d
comma
l_int|0x7c
comma
l_int|0x7b
comma
l_int|0x7a
comma
l_int|0x79
comma
l_int|0x79
comma
l_int|0x78
comma
l_int|0x78
comma
l_int|0x77
comma
l_int|0x76
comma
l_int|0x75
comma
l_int|0x74
comma
l_int|0x73
comma
l_int|0x72
comma
l_int|0x71
comma
l_int|0x70
comma
l_int|0x70
comma
l_int|0x6f
comma
l_int|0x6f
comma
l_int|0x6e
comma
l_int|0x6e
comma
l_int|0x6e
comma
l_int|0x6d
comma
l_int|0x6d
comma
l_int|0x6c
comma
l_int|0x6b
comma
l_int|0x6a
comma
l_int|0x6a
comma
l_int|0x69
comma
l_int|0x69
comma
l_int|0x68
comma
l_int|0x67
comma
l_int|0x66
comma
l_int|0x65
comma
l_int|0x65
comma
l_int|0x64
comma
l_int|0x64
comma
l_int|0x64
comma
l_int|0x63
comma
l_int|0x63
comma
l_int|0x62
comma
l_int|0x62
comma
l_int|0x61
comma
l_int|0x61
comma
l_int|0x60
comma
l_int|0x60
comma
l_int|0x5f
comma
l_int|0x5f
comma
l_int|0x5e
comma
l_int|0x5e
comma
l_int|0x5d
comma
l_int|0x5d
comma
l_int|0x5c
comma
l_int|0x5c
comma
l_int|0x5b
comma
l_int|0x5b
comma
l_int|0x5b
comma
l_int|0x5a
comma
l_int|0x5a
comma
l_int|0x5a
comma
l_int|0x59
comma
l_int|0x59
comma
l_int|0x58
comma
l_int|0x58
comma
l_int|0x57
comma
l_int|0x57
comma
l_int|0x56
comma
l_int|0x56
comma
l_int|0x55
comma
l_int|0x55
comma
l_int|0x54
comma
l_int|0x54
comma
l_int|0x53
comma
l_int|0x53
comma
l_int|0x52
comma
l_int|0x52
comma
l_int|0x52
comma
l_int|0x51
comma
l_int|0x51
comma
l_int|0x50
comma
l_int|0x50
comma
l_int|0x50
comma
l_int|0x50
comma
l_int|0x4f
comma
l_int|0x4f
comma
l_int|0x4f
comma
l_int|0x4e
comma
l_int|0x4e
comma
l_int|0x4e
comma
l_int|0x4d
comma
l_int|0x4d
comma
l_int|0x4d
comma
l_int|0x4c
comma
l_int|0x4c
comma
l_int|0x4c
comma
l_int|0x4b
comma
l_int|0x4b
comma
l_int|0x4b
comma
l_int|0x4a
comma
l_int|0x4a
comma
l_int|0x4a
comma
l_int|0x49
comma
l_int|0x49
comma
l_int|0x49
comma
l_int|0x48
comma
l_int|0x48
comma
l_int|0x48
comma
l_int|0x47
comma
l_int|0x47
comma
l_int|0x47
comma
l_int|0x46
comma
l_int|0x46
comma
l_int|0x46
comma
l_int|0x46
comma
l_int|0x45
comma
l_int|0x45
comma
l_int|0x45
comma
l_int|0x44
comma
l_int|0x44
comma
l_int|0x44
comma
l_int|0x44
comma
l_int|0x43
comma
l_int|0x43
comma
l_int|0x43
comma
l_int|0x43
comma
l_int|0x42
comma
l_int|0x42
comma
l_int|0x42
comma
l_int|0x42
comma
l_int|0x41
comma
l_int|0x41
comma
l_int|0x41
comma
l_int|0x40
comma
l_int|0x40
comma
l_int|0x40
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3e
comma
l_int|0x3e
comma
l_int|0x3e
comma
l_int|0x3d
comma
l_int|0x3d
comma
l_int|0x3d
comma
l_int|0x3d
comma
l_int|0x3c
comma
l_int|0x3c
comma
l_int|0x3c
comma
l_int|0x3c
comma
l_int|0x3b
comma
l_int|0x3b
comma
l_int|0x3b
comma
l_int|0x3a
comma
l_int|0x3a
comma
l_int|0x3a
comma
l_int|0x39
comma
l_int|0x39
comma
l_int|0x39
comma
l_int|0x38
comma
l_int|0x38
comma
l_int|0x38
comma
l_int|0x38
comma
l_int|0x37
comma
l_int|0x37
comma
l_int|0x37
comma
l_int|0x37
comma
l_int|0x36
comma
l_int|0x36
comma
l_int|0x36
comma
l_int|0x35
comma
l_int|0x35
comma
l_int|0x35
comma
l_int|0x34
comma
l_int|0x34
comma
l_int|0x34
comma
l_int|0x33
comma
l_int|0x33
comma
l_int|0x33
comma
l_int|0x33
comma
l_int|0x32
comma
l_int|0x32
comma
l_int|0x32
comma
l_int|0x31
comma
l_int|0x31
comma
l_int|0x31
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x2f
comma
l_int|0x2f
comma
l_int|0x2f
comma
l_int|0x2e
comma
l_int|0x2e
comma
l_int|0x2e
comma
l_int|0x2d
comma
l_int|0x2d
comma
l_int|0x2d
comma
l_int|0x2c
comma
l_int|0x2c
comma
l_int|0x2c
comma
l_int|0x2b
comma
l_int|0x2b
comma
l_int|0x2b
comma
l_int|0x2a
comma
l_int|0x2a
comma
l_int|0x2a
comma
l_int|0x29
comma
l_int|0x29
comma
l_int|0x29
comma
l_int|0x28
comma
l_int|0x28
comma
l_int|0x28
)brace
suffix:semicolon
DECL|variable|u450_default_cpu_fan_speeds
r_static
r_int
r_char
id|u450_default_cpu_fan_speeds
(braket
)braket
op_assign
(brace
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x20
comma
l_int|0x21
comma
l_int|0x22
comma
l_int|0x23
comma
l_int|0x24
comma
l_int|0x25
comma
l_int|0x26
comma
l_int|0x27
comma
l_int|0x28
comma
l_int|0x2a
comma
l_int|0x2b
comma
l_int|0x2d
comma
l_int|0x30
comma
l_int|0x31
comma
l_int|0x32
comma
l_int|0x33
comma
l_int|0x34
comma
l_int|0x35
comma
l_int|0x36
comma
l_int|0x37
comma
l_int|0x38
comma
l_int|0x39
comma
l_int|0x3a
comma
l_int|0x3b
comma
l_int|0x3c
comma
l_int|0x3d
comma
l_int|0x3e
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
)brace
suffix:semicolon
DECL|variable|u450_default_ps_temp_factors
r_static
r_int
r_char
id|u450_default_ps_temp_factors
(braket
)braket
op_assign
(brace
l_int|0x9a
comma
l_int|0x96
comma
l_int|0x82
comma
l_int|0x7d
comma
l_int|0x78
comma
l_int|0x73
comma
l_int|0x6e
comma
l_int|0x6b
comma
l_int|0x69
comma
l_int|0x67
comma
l_int|0x64
comma
l_int|0x5f
comma
l_int|0x5a
comma
l_int|0x57
comma
l_int|0x55
comma
l_int|0x53
comma
l_int|0x51
comma
l_int|0x50
comma
l_int|0x4e
comma
l_int|0x4d
comma
l_int|0x4c
comma
l_int|0x4b
comma
l_int|0x49
comma
l_int|0x47
comma
l_int|0x46
comma
l_int|0x45
comma
l_int|0x44
comma
l_int|0x43
comma
l_int|0x42
comma
l_int|0x41
comma
l_int|0x40
comma
l_int|0x3f
comma
l_int|0x3e
comma
l_int|0x3d
comma
l_int|0x3c
comma
l_int|0x3c
comma
l_int|0x3b
comma
l_int|0x3a
comma
l_int|0x39
comma
l_int|0x39
comma
l_int|0x38
comma
l_int|0x37
comma
l_int|0x37
comma
l_int|0x36
comma
l_int|0x35
comma
l_int|0x35
comma
l_int|0x34
comma
l_int|0x33
comma
l_int|0x32
comma
l_int|0x32
comma
l_int|0x32
comma
l_int|0x31
comma
l_int|0x31
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x2f
comma
l_int|0x2f
comma
l_int|0x2e
comma
l_int|0x2e
comma
l_int|0x2d
comma
l_int|0x2d
comma
l_int|0x2c
comma
l_int|0x2c
comma
l_int|0x2b
comma
l_int|0x2a
comma
l_int|0x2a
comma
l_int|0x29
comma
l_int|0x29
comma
l_int|0x28
comma
l_int|0x28
comma
l_int|0x27
comma
l_int|0x27
comma
l_int|0x26
comma
l_int|0x26
comma
l_int|0x25
comma
l_int|0x25
comma
l_int|0x25
comma
l_int|0x25
comma
l_int|0x24
comma
l_int|0x24
comma
l_int|0x23
comma
l_int|0x23
comma
l_int|0x23
comma
l_int|0x22
comma
l_int|0x22
comma
l_int|0x22
comma
l_int|0x21
comma
l_int|0x21
comma
l_int|0x21
comma
l_int|0x20
comma
l_int|0x20
comma
l_int|0x20
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1e
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1d
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1c
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1b
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x1a
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x19
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x18
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x17
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x16
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x15
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x14
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x13
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x12
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x11
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x10
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0f
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0e
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0c
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0b
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x0a
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x09
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x08
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x07
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x06
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x05
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x04
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x03
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x02
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x01
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
comma
l_int|0x00
)brace
suffix:semicolon
DECL|variable|u450_default_ps_fan_speeds
r_static
r_int
r_char
id|u450_default_ps_fan_speeds
(braket
)braket
op_assign
(brace
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x1f
comma
l_int|0x21
comma
l_int|0x22
comma
l_int|0x23
comma
l_int|0x24
comma
l_int|0x25
comma
l_int|0x26
comma
l_int|0x26
comma
l_int|0x27
comma
l_int|0x28
comma
l_int|0x29
comma
l_int|0x2a
comma
l_int|0x2b
comma
l_int|0x2d
comma
l_int|0x2e
comma
l_int|0x2f
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x30
comma
l_int|0x31
comma
l_int|0x32
comma
l_int|0x33
comma
l_int|0x34
comma
l_int|0x35
comma
l_int|0x36
comma
l_int|0x37
comma
l_int|0x38
comma
l_int|0x39
comma
l_int|0x3a
comma
l_int|0x3b
comma
l_int|0x3c
comma
l_int|0x3d
comma
l_int|0x3e
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
comma
l_int|0x3f
)brace
suffix:semicolon
r_static
r_void
DECL|function|u450_toggle_i2c_int
id|u450_toggle_i2c_int
c_func
(paren
r_struct
id|environment
op_star
id|env
)paren
(brace
r_int
r_char
id|tmp
(braket
l_int|80
)braket
suffix:semicolon
r_int
r_char
id|data
suffix:semicolon
r_int
id|i
comma
id|n
suffix:semicolon
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0
comma
l_int|0x84
)paren
suffix:semicolon
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|8
comma
l_int|0x0a
)paren
suffix:semicolon
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|7
comma
l_int|0x00
)paren
suffix:semicolon
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0
comma
l_int|0x04
)paren
suffix:semicolon
id|n
op_assign
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;envctrl: PCF8583:&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|read_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
id|i
comma
op_amp
id|data
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: error reading PCF8583&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|n
op_add_assign
id|sprintf
c_func
(paren
id|tmp
op_plus
id|n
comma
l_string|&quot; %02x&quot;
comma
id|data
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;%s&bslash;n&quot;
comma
id|tmp
)paren
suffix:semicolon
macro_line|#if 1
id|data
op_assign
l_int|0x70
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|U450_PIO_ADDR
comma
op_amp
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
suffix:semicolon
id|mdelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|data
op_assign
l_int|0x78
suffix:semicolon
r_if
c_cond
(paren
id|i2c_write
c_func
(paren
id|U450_PIO_ADDR
comma
op_amp
id|data
comma
l_int|1
comma
l_int|0
)paren
op_ne
l_int|1
)paren
r_return
suffix:semicolon
id|mdelay
c_func
(paren
l_int|1
)paren
suffix:semicolon
macro_line|#endif
)brace
r_static
r_void
DECL|function|u450_set_egg_timer
id|u450_set_egg_timer
c_func
(paren
r_struct
id|environment
op_star
id|env
)paren
(brace
r_int
r_char
id|value
suffix:semicolon
macro_line|#if 0
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0x00
comma
l_int|0x84
)paren
suffix:semicolon
id|read_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0x07
comma
op_amp
id|value
)paren
suffix:semicolon
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0x07
comma
l_int|0x00
)paren
suffix:semicolon
id|write_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0x00
comma
l_int|0x04
)paren
suffix:semicolon
macro_line|#else
id|read_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0x07
comma
op_amp
id|value
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;envctrl: TIMER [%02x:07]: %02x&bslash;n&quot;
comma
id|U450_TIMER_ADDR
comma
id|value
)paren
suffix:semicolon
id|read_8583
c_func
(paren
id|U450_TIMER_ADDR
comma
l_int|0x00
comma
op_amp
id|value
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;envctrl: TIMER [%02x:00]: %02x&bslash;n&quot;
comma
id|U450_TIMER_ADDR
comma
id|value
)paren
suffix:semicolon
macro_line|#endif
)brace
r_static
r_int
DECL|function|envctrl_setup
id|envctrl_setup
c_func
(paren
r_int
id|node
)paren
(brace
r_struct
id|thermistor
op_star
id|t
comma
op_star
op_star
id|tlast
suffix:semicolon
r_struct
id|fan
op_star
id|f
comma
op_star
op_star
id|flast
suffix:semicolon
r_int
r_char
op_star
id|tmp
op_assign
l_int|NULL
comma
op_star
id|p
suffix:semicolon
r_int
id|len
comma
id|n
comma
id|err
suffix:semicolon
r_int
id|defaults
op_assign
l_int|0
suffix:semicolon
id|len
op_assign
id|prom_getproplen
c_func
(paren
id|node
comma
l_string|&quot;thermisters&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
op_le
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: no property `thermisters&squot;, using defaults&bslash;n&quot;
)paren
suffix:semicolon
id|defaults
op_increment
suffix:semicolon
id|len
op_assign
r_sizeof
(paren
id|u450_default_thermisters
)paren
suffix:semicolon
)brace
id|tmp
op_assign
(paren
r_int
r_char
op_star
)paren
id|kmalloc
c_func
(paren
id|len
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tmp
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t allocate property buffer&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_if
c_cond
(paren
id|defaults
)paren
(brace
id|memcpy
c_func
(paren
id|tmp
comma
id|u450_default_thermisters
comma
id|len
)paren
suffix:semicolon
)brace
r_else
(brace
id|err
op_assign
id|prom_getproperty
c_func
(paren
id|node
comma
l_string|&quot;thermisters&quot;
comma
id|tmp
comma
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: error reading property `thermisters&squot;&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|tmp
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
)brace
id|p
op_assign
id|tmp
suffix:semicolon
id|err
op_assign
op_minus
id|ENOMEM
suffix:semicolon
id|tlast
op_assign
op_amp
id|envctrl.thermistors
suffix:semicolon
r_while
c_loop
(paren
id|len
OG
r_sizeof
(paren
r_struct
id|therm_regs
)paren
)paren
(brace
id|t
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|thermistor
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|t
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t allocate thermistor struct&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|memset
c_func
(paren
id|t
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|thermistor
)paren
)paren
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|t-&gt;regs
comma
id|p
comma
r_sizeof
(paren
r_struct
id|therm_regs
)paren
)paren
suffix:semicolon
id|p
op_add_assign
r_sizeof
(paren
r_struct
id|therm_regs
)paren
suffix:semicolon
id|len
op_sub_assign
r_sizeof
(paren
r_struct
id|therm_regs
)paren
suffix:semicolon
id|n
op_assign
id|strlen
c_func
(paren
id|p
)paren
op_plus
l_int|1
suffix:semicolon
id|strncpy
c_func
(paren
id|t-&gt;name
comma
id|p
comma
l_int|7
)paren
suffix:semicolon
id|p
op_add_assign
id|n
suffix:semicolon
id|len
op_sub_assign
id|n
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2c_find_device
c_func
(paren
id|t-&gt;regs.addr
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: `%s&squot;: i2c device %02x not found&bslash;n&quot;
comma
id|t-&gt;name
comma
id|t-&gt;regs.addr
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|t
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
id|t-&gt;temperature
op_assign
id|envctrl_get_temperature
suffix:semicolon
id|t-&gt;fan_speed
op_assign
id|envctrl_get_fan_speed
suffix:semicolon
op_star
id|tlast
op_assign
id|t
suffix:semicolon
id|tlast
op_assign
op_amp
id|t-&gt;next
suffix:semicolon
)brace
id|flast
op_assign
op_amp
id|envctrl.fans
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|2
suffix:semicolon
id|n
op_increment
)paren
(brace
id|f
op_assign
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|fan
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|f
)paren
r_goto
id|out
suffix:semicolon
id|memset
c_func
(paren
id|f
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|fan
)paren
)paren
suffix:semicolon
id|f-&gt;regs.addr
op_assign
id|U450_FAN_ADDR
suffix:semicolon
id|f-&gt;regs.port
op_assign
id|n
suffix:semicolon
r_switch
c_cond
(paren
id|n
)paren
(brace
r_case
id|U450_FAN_PORT_CPU
suffix:colon
id|sprintf
c_func
(paren
id|f-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;CPU&quot;
)paren
suffix:semicolon
id|t
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
(paren
id|t
op_assign
id|find_thermistor
c_func
(paren
l_string|&quot;CPU&quot;
comma
id|t
)paren
)paren
)paren
(brace
id|t-&gt;chain
op_assign
id|f-&gt;monitor
suffix:semicolon
id|f-&gt;monitor
op_assign
id|t
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|U450_FAN_PORT_PS
suffix:colon
id|sprintf
c_func
(paren
id|f-&gt;name
comma
l_string|&quot;%.7s&quot;
comma
l_string|&quot;PS&quot;
)paren
suffix:semicolon
id|t
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
(paren
id|t
op_assign
id|find_thermistor
c_func
(paren
l_string|&quot;PS&quot;
comma
id|t
)paren
)paren
)paren
(brace
id|t-&gt;chain
op_assign
id|f-&gt;monitor
suffix:semicolon
id|f-&gt;monitor
op_assign
id|t
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|f-&gt;monitor
)paren
(brace
id|kfree
c_func
(paren
id|f
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|i2c_find_device
c_func
(paren
id|f-&gt;regs.addr
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: `%s&squot;: i2c device %02x not found&bslash;n&quot;
comma
id|f-&gt;name
comma
id|f-&gt;regs.addr
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|f
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
op_star
id|flast
op_assign
id|f
suffix:semicolon
id|flast
op_assign
op_amp
id|f-&gt;next
suffix:semicolon
id|f-&gt;check_failure
op_assign
l_int|NULL
suffix:semicolon
id|f-&gt;set_speed
op_assign
id|envctrl_set_fan_speed
suffix:semicolon
)brace
id|envctrl.cpu_temp_table
op_assign
id|kmalloc
c_func
(paren
l_int|256
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|envctrl.cpu_temp_table
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t allocate temperature table&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_if
c_cond
(paren
id|defaults
)paren
(brace
id|memcpy
c_func
(paren
id|envctrl.cpu_temp_table
comma
id|u450_default_cpu_temp_factors
comma
l_int|256
)paren
suffix:semicolon
)brace
r_else
(brace
id|err
op_assign
id|prom_getproperty
c_func
(paren
id|node
comma
l_string|&quot;cpu-temp-factors&quot;
comma
id|envctrl.cpu_temp_table
comma
l_int|256
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t read `cpu-temp-factors&squot;&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
)brace
id|envctrl.cpu_fan_speeds
op_assign
id|kmalloc
c_func
(paren
l_int|112
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|envctrl.cpu_fan_speeds
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t allocate fan speed table&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_if
c_cond
(paren
id|defaults
)paren
(brace
id|memcpy
c_func
(paren
id|envctrl.cpu_fan_speeds
comma
id|u450_default_cpu_fan_speeds
comma
l_int|112
)paren
suffix:semicolon
)brace
r_else
(brace
id|err
op_assign
id|prom_getproperty
c_func
(paren
id|node
comma
l_string|&quot;cpu-fan-speeds&quot;
comma
id|envctrl.cpu_fan_speeds
comma
l_int|112
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t read `cpu-fan-speeds&squot;&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
)brace
id|envctrl.ps_temp_table
op_assign
id|kmalloc
c_func
(paren
l_int|256
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|envctrl.ps_temp_table
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t allocate temperature table&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_if
c_cond
(paren
id|defaults
)paren
(brace
id|memcpy
c_func
(paren
id|envctrl.ps_temp_table
comma
id|u450_default_ps_temp_factors
comma
l_int|256
)paren
suffix:semicolon
)brace
r_else
(brace
id|err
op_assign
id|prom_getproperty
c_func
(paren
id|node
comma
l_string|&quot;ps-temp-factors&quot;
comma
id|envctrl.ps_temp_table
comma
l_int|256
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t read `ps-temp-factors&squot;&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
)brace
id|envctrl.ps_fan_speeds
op_assign
id|kmalloc
c_func
(paren
l_int|112
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|envctrl.ps_fan_speeds
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t allocate fan speed table&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_if
c_cond
(paren
id|defaults
)paren
(brace
id|memcpy
c_func
(paren
id|envctrl.ps_fan_speeds
comma
id|u450_default_ps_fan_speeds
comma
l_int|112
)paren
suffix:semicolon
)brace
r_else
(brace
id|err
op_assign
id|prom_getproperty
c_func
(paren
id|node
comma
l_string|&quot;ps-fan-speeds&quot;
comma
id|envctrl.ps_fan_speeds
comma
l_int|112
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;envctrl: can&squot;t read `ps-fan-speeds&squot;&bslash;n&quot;
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
)brace
id|envctrl.enable
op_assign
id|u450_toggle_i2c_int
suffix:semicolon
id|envctrl.keep_alive
op_assign
id|u450_set_egg_timer
suffix:semicolon
id|envctrl.disable
op_assign
id|envctrl_fans_blast
suffix:semicolon
id|envctrl.interval
op_assign
l_int|60
suffix:semicolon
id|kfree
c_func
(paren
id|tmp
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
id|out
suffix:colon
r_if
c_cond
(paren
id|tmp
)paren
id|kfree
c_func
(paren
id|tmp
)paren
suffix:semicolon
id|envctrl_stop
c_func
(paren
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
macro_line|#endif /* U450_SUPPORT */
r_static
id|loff_t
DECL|function|envctrl_llseek
id|envctrl_llseek
c_func
(paren
r_struct
id|file
op_star
id|file
comma
id|loff_t
id|offset
comma
r_int
id|type
)paren
(brace
r_return
op_minus
id|ESPIPE
suffix:semicolon
)brace
r_static
id|ssize_t
DECL|function|envctrl_read
id|envctrl_read
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_char
op_star
id|buf
comma
r_int
id|count
comma
id|loff_t
op_star
id|ppos
)paren
(brace
r_int
r_int
id|addr
op_assign
(paren
r_int
r_int
)paren
id|file-&gt;private_data
suffix:semicolon
r_return
id|i2c_read
c_func
(paren
id|addr
comma
id|buf
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
)brace
r_static
id|ssize_t
DECL|function|envctrl_write
id|envctrl_write
c_func
(paren
r_struct
id|file
op_star
id|file
comma
r_const
r_char
op_star
id|buf
comma
r_int
id|count
comma
id|loff_t
op_star
id|ppos
)paren
(brace
r_int
r_int
id|addr
op_assign
(paren
r_int
r_int
)paren
id|file-&gt;private_data
suffix:semicolon
r_return
id|i2c_write
c_func
(paren
id|addr
comma
id|buf
comma
id|count
comma
l_int|1
)paren
suffix:semicolon
)brace
r_static
r_int
DECL|function|envctrl_ioctl
id|envctrl_ioctl
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_int
r_int
id|data
suffix:semicolon
r_int
id|addr
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|I2CIOCSADR
suffix:colon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|addr
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|data
op_assign
id|addr
op_amp
l_int|0xfe
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2c_find_device
c_func
(paren
id|addr
op_amp
l_int|0xfe
)paren
)paren
r_return
op_minus
id|ENODEV
suffix:semicolon
id|file-&gt;private_data
op_assign
(paren
r_void
op_star
)paren
id|data
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2CIOCGADR
suffix:colon
id|addr
op_assign
(paren
r_int
r_int
)paren
id|file-&gt;private_data
suffix:semicolon
r_if
c_cond
(paren
id|put_user
c_func
(paren
id|addr
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|envctrl_open
id|envctrl_open
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
id|file-&gt;private_data
op_assign
l_int|0
suffix:semicolon
id|MOD_INC_USE_COUNT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|envctrl_release
id|envctrl_release
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
id|MOD_DEC_USE_COUNT
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|envctrl_fops
r_static
r_struct
id|file_operations
id|envctrl_fops
op_assign
(brace
id|llseek
suffix:colon
id|envctrl_llseek
comma
id|read
suffix:colon
id|envctrl_read
comma
id|write
suffix:colon
id|envctrl_write
comma
id|ioctl
suffix:colon
id|envctrl_ioctl
comma
id|open
suffix:colon
id|envctrl_open
comma
id|release
suffix:colon
id|envctrl_release
comma
)brace
suffix:semicolon
DECL|variable|envctrl_dev
r_static
r_struct
id|miscdevice
id|envctrl_dev
op_assign
(brace
id|ENVCTRL_MINOR
comma
l_string|&quot;envctrl&quot;
comma
op_amp
id|envctrl_fops
)brace
suffix:semicolon
macro_line|#ifdef MODULE
DECL|function|init_module
r_int
id|init_module
c_func
(paren
r_void
)paren
macro_line|#else
r_int
id|__init
id|envctrl_init
c_func
(paren
r_void
)paren
macro_line|#endif
(brace
macro_line|#ifdef CONFIG_PCI
r_struct
id|linux_ebus
op_star
id|ebus
suffix:semicolon
r_struct
id|linux_ebus_device
op_star
id|edev
op_assign
l_int|0
suffix:semicolon
id|pid_t
id|pid
suffix:semicolon
r_int
id|err
suffix:semicolon
id|for_each_ebus
c_func
(paren
id|ebus
)paren
(brace
id|for_each_ebusdev
c_func
(paren
id|edev
comma
id|ebus
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|edev-&gt;prom_name
comma
l_string|&quot;SUNW,envctrl&quot;
)paren
)paren
r_goto
id|ebus_done
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|edev-&gt;prom_name
comma
l_string|&quot;SUNW,rasctrl&quot;
)paren
)paren
r_goto
id|ebus_done
suffix:semicolon
)brace
)brace
id|ebus_done
suffix:colon
r_if
c_cond
(paren
op_logical_neg
id|edev
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: ebus device not found&bslash;n&quot;
comma
id|__FUNCTION__
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|i2c_regs
op_assign
(paren
r_int
r_int
)paren
id|ioremap
c_func
(paren
id|edev-&gt;resource
(braket
l_int|0
)braket
dot
id|start
comma
id|I2C_REG_SIZE
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|PCF8584_ADDRESS
op_rshift
l_int|1
comma
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES1
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CLK_4_43
op_or
id|BUS_CLK_90
comma
id|i2c_regs
op_plus
id|I2C_DATA
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|CONTROL_PIN
op_or
id|CONTROL_ES0
op_or
id|CONTROL_ACK
comma
id|i2c_regs
op_plus
id|I2C_CSR
)paren
suffix:semicolon
id|mdelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|misc_register
c_func
(paren
op_amp
id|envctrl_dev
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%s: unable to get misc minor %d&bslash;n&quot;
comma
id|__FUNCTION__
comma
id|envctrl_dev.minor
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
id|err
op_assign
id|i2c_scan_bus
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
(brace
id|i2c_free_devices
c_func
(paren
)paren
suffix:semicolon
id|misc_deregister
c_func
(paren
op_amp
id|envctrl_dev
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|memset
c_func
(paren
op_amp
id|envctrl
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|environment
)paren
)paren
suffix:semicolon
id|err
op_assign
op_minus
id|ENODEV
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|edev-&gt;prom_name
comma
l_string|&quot;SUNW,rasctrl&quot;
)paren
)paren
id|err
op_assign
id|rasctrl_setup
c_func
(paren
id|edev-&gt;prom_node
)paren
suffix:semicolon
macro_line|#ifdef U450_SUPPORT
r_else
r_if
c_cond
(paren
op_logical_neg
id|strcmp
c_func
(paren
id|edev-&gt;prom_name
comma
l_string|&quot;SUNW,envctrl&quot;
)paren
)paren
id|err
op_assign
id|envctrl_setup
c_func
(paren
id|edev-&gt;prom_node
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|err
)paren
(brace
id|envctrl_stop
c_func
(paren
)paren
suffix:semicolon
id|i2c_free_devices
c_func
(paren
)paren
suffix:semicolon
id|misc_deregister
c_func
(paren
op_amp
id|envctrl_dev
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
id|init_waitqueue_head
c_func
(paren
op_amp
id|envctrl.kenvd_wait
)paren
suffix:semicolon
id|pid
op_assign
id|kernel_thread
c_func
(paren
id|kenvd
comma
(paren
r_void
op_star
)paren
op_amp
id|envctrl
comma
id|CLONE_FS
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pid
OL
l_int|0
)paren
(brace
id|envctrl_stop
c_func
(paren
)paren
suffix:semicolon
id|i2c_free_devices
c_func
(paren
)paren
suffix:semicolon
id|misc_deregister
c_func
(paren
op_amp
id|envctrl_dev
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
macro_line|#else
r_return
op_minus
id|ENODEV
suffix:semicolon
macro_line|#endif
)brace
macro_line|#ifdef MODULE
DECL|function|cleanup_module
r_void
id|cleanup_module
c_func
(paren
r_void
)paren
(brace
id|envctrl_stop
c_func
(paren
)paren
suffix:semicolon
id|i2c_free_devices
c_func
(paren
)paren
suffix:semicolon
id|iounmap
c_func
(paren
id|i2c_regs
)paren
suffix:semicolon
id|misc_deregister
c_func
(paren
op_amp
id|envctrl_dev
)paren
suffix:semicolon
)brace
macro_line|#endif
eof
