multiline_comment|/*&n; * Linux Rendering Resource Manager &n; *&n; *          Implements the SGI-compatible rendering resource manager.&n; *          This takes care of implementing the virtualized video hardware&n; *          access required for OpenGL direct rendering.&n; *&n; * Author:  Miguel de Icaza (miguel@nuclecu.unam.mx)&n; *&n; * Fixes:&n; */
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/rrm.h&gt;
macro_line|#ifdef MODULE
macro_line|#include &lt;linux/module.h&gt;
macro_line|#endif
r_int
DECL|function|rrm_open_rn
id|rrm_open_rn
(paren
r_int
id|rnid
comma
r_void
op_star
id|arg
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|rrm_close_rn
id|rrm_close_rn
(paren
r_int
id|rnid
comma
r_void
op_star
id|arg
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|rrm_bind_proc_to_rn
id|rrm_bind_proc_to_rn
(paren
r_int
id|rnid
comma
r_void
op_star
id|arg
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|typedef|rrm_function
r_typedef
r_int
(paren
op_star
id|rrm_function
)paren
(paren
r_void
op_star
id|arg
)paren
suffix:semicolon
r_struct
(brace
DECL|member|r_fn
r_int
(paren
op_star
id|r_fn
)paren
(paren
r_int
id|rnid
comma
r_void
op_star
id|arg
)paren
suffix:semicolon
DECL|member|arg_size
r_int
id|arg_size
suffix:semicolon
DECL|variable|rrm_functions
)brace
id|rrm_functions
(braket
)braket
op_assign
(brace
(brace
id|rrm_open_rn
comma
r_sizeof
(paren
r_struct
id|RRM_OpenRN
)paren
)brace
comma
(brace
id|rrm_close_rn
comma
r_sizeof
(paren
r_struct
id|RRM_CloseRN
)paren
)brace
comma
(brace
id|rrm_bind_proc_to_rn
comma
r_sizeof
(paren
r_struct
id|RRM_BindProcToRN
)paren
)brace
)brace
suffix:semicolon
DECL|macro|RRM_FUNCTIONS
mdefine_line|#define RRM_FUNCTIONS (sizeof (rrm_functions)/sizeof (rrm_functions [0]))
multiline_comment|/* cmd is a number in the range [0..RRM_CMD_LIMIT-RRM_BASE] */
r_int
DECL|function|rrm_command
id|rrm_command
(paren
r_int
r_int
id|cmd
comma
r_void
op_star
id|arg
)paren
(brace
r_int
id|i
comma
id|rnid
suffix:semicolon
r_if
c_cond
(paren
id|cmd
OG
id|RRM_FUNCTIONS
)paren
(brace
id|printk
(paren
l_string|&quot;Called unimplemented rrm ioctl: %d&bslash;n&quot;
comma
id|cmd
op_plus
id|RRM_BASE
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|i
op_assign
id|verify_area
(paren
id|VERIFY_READ
comma
id|arg
comma
id|rrm_functions
(braket
id|cmd
)braket
dot
id|arg_size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
)paren
r_return
id|i
suffix:semicolon
r_if
c_cond
(paren
id|__get_user
(paren
id|rnid
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
(paren
op_star
(paren
id|rrm_functions
(braket
id|cmd
)braket
dot
id|r_fn
)paren
)paren
(paren
id|rnid
comma
id|arg
)paren
suffix:semicolon
)brace
r_int
DECL|function|rrm_close
id|rrm_close
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
)paren
(brace
multiline_comment|/* This routine is invoked when the device is closed */
r_return
l_int|0
suffix:semicolon
)brace
eof
