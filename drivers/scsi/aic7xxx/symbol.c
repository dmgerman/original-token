multiline_comment|/*&n; * Aic7xxx SCSI host adapter firmware asssembler symbol table implementation&n; *&n; * Copyright (c) 1997 Justin T. Gibbs.&n; * All rights reserved.&n; *&n; * Redistribution and use in source and binary forms, with or without&n; * modification, are permitted provided that the following conditions&n; * are met:&n; * 1. Redistributions of source code must retain the above copyright&n; *    notice immediately at the beginning of the file, without modification,&n; *    this list of conditions, and the following disclaimer.&n; * 2. Redistributions in binary form must reproduce the above copyright&n; *    notice, this list of conditions and the following disclaimer in the&n; *    documentation and/or other materials provided with the distribution.&n; * 3. The name of the author may not be used to endorse or promote products&n; *    derived from this software without specific prior written permission.&n; *&n; * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&squot;&squot; AND&n; * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE&n; * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE&n; * ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR&n; * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL&n; * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS&n; * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)&n; * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT&n; * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY&n; * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF&n; * SUCH DAMAGE.&n; *&n; *      $Id: symbol.c,v 1.1 1997/03/16 07:08:18 gibbs Exp $&n; */
macro_line|#include &lt;sys/types.h&gt;
macro_line|#include &lt;db.h&gt;
macro_line|#include &lt;fcntl.h&gt;
macro_line|#include &lt;stdio.h&gt;
macro_line|#include &lt;stdlib.h&gt;
macro_line|#include &lt;string.h&gt;
macro_line|#include &lt;sysexits.h&gt;
macro_line|#include &quot;symbol.h&quot;
macro_line|#include &quot;aic7xxx_asm.h&quot;
DECL|variable|symtable
r_static
id|DB
op_star
id|symtable
suffix:semicolon
id|symbol_t
op_star
DECL|function|symbol_create
id|symbol_create
c_func
(paren
id|name
)paren
r_char
op_star
id|name
suffix:semicolon
(brace
id|symbol_t
op_star
id|new_symbol
suffix:semicolon
id|new_symbol
op_assign
(paren
id|symbol_t
op_star
)paren
id|malloc
c_func
(paren
r_sizeof
(paren
id|symbol_t
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|new_symbol
op_eq
l_int|NULL
)paren
(brace
id|perror
c_func
(paren
l_string|&quot;Unable to create new symbol&quot;
)paren
suffix:semicolon
m_exit
(paren
id|EX_SOFTWARE
)paren
suffix:semicolon
)brace
id|memset
c_func
(paren
id|new_symbol
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|new_symbol
)paren
)paren
suffix:semicolon
id|new_symbol-&gt;name
op_assign
id|strdup
c_func
(paren
id|name
)paren
suffix:semicolon
id|new_symbol-&gt;type
op_assign
id|UNINITIALIZED
suffix:semicolon
r_return
(paren
id|new_symbol
)paren
suffix:semicolon
)brace
r_void
DECL|function|symbol_delete
id|symbol_delete
c_func
(paren
id|symbol
)paren
id|symbol_t
op_star
id|symbol
suffix:semicolon
(brace
r_if
c_cond
(paren
id|symtable
op_ne
l_int|NULL
)paren
(brace
id|DBT
id|key
suffix:semicolon
id|key.data
op_assign
id|symbol-&gt;name
suffix:semicolon
id|key.size
op_assign
id|strlen
c_func
(paren
id|symbol-&gt;name
)paren
suffix:semicolon
id|symtable
op_member_access_from_pointer
id|del
c_func
(paren
id|symtable
comma
op_amp
id|key
comma
multiline_comment|/*flags*/
l_int|0
)paren
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|symbol-&gt;type
)paren
(brace
r_case
id|SCBLOC
suffix:colon
r_case
id|SRAMLOC
suffix:colon
r_case
id|REGISTER
suffix:colon
r_if
c_cond
(paren
id|symbol-&gt;info.rinfo
op_ne
l_int|NULL
)paren
id|free
c_func
(paren
id|symbol-&gt;info.rinfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ALIAS
suffix:colon
r_if
c_cond
(paren
id|symbol-&gt;info.ainfo
op_ne
l_int|NULL
)paren
id|free
c_func
(paren
id|symbol-&gt;info.ainfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MASK
suffix:colon
r_case
id|BIT
suffix:colon
r_if
c_cond
(paren
id|symbol-&gt;info.minfo
op_ne
l_int|NULL
)paren
(brace
id|symlist_free
c_func
(paren
op_amp
id|symbol-&gt;info.minfo-&gt;symrefs
)paren
suffix:semicolon
id|free
c_func
(paren
id|symbol-&gt;info.minfo
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|CONST
suffix:colon
r_if
c_cond
(paren
id|symbol-&gt;info.cinfo
op_ne
l_int|NULL
)paren
id|free
c_func
(paren
id|symbol-&gt;info.cinfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|LABEL
suffix:colon
r_if
c_cond
(paren
id|symbol-&gt;info.linfo
op_ne
l_int|NULL
)paren
id|free
c_func
(paren
id|symbol-&gt;info.linfo
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|UNINITIALIZED
suffix:colon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|free
c_func
(paren
id|symbol-&gt;name
)paren
suffix:semicolon
id|free
c_func
(paren
id|symbol
)paren
suffix:semicolon
)brace
r_void
DECL|function|symtable_open
id|symtable_open
c_func
(paren
)paren
(brace
id|symtable
op_assign
id|dbopen
c_func
(paren
multiline_comment|/*filename*/
l_int|NULL
comma
id|O_CREAT
op_or
id|O_NONBLOCK
op_or
id|O_RDWR
comma
multiline_comment|/*mode*/
l_int|0
comma
id|DB_HASH
comma
multiline_comment|/*openinfo*/
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|symtable
op_eq
l_int|NULL
)paren
(brace
id|perror
c_func
(paren
l_string|&quot;Symbol table creation failed&quot;
)paren
suffix:semicolon
m_exit
(paren
id|EX_SOFTWARE
)paren
suffix:semicolon
multiline_comment|/* NOTREACHED */
)brace
)brace
r_void
DECL|function|symtable_close
id|symtable_close
c_func
(paren
)paren
(brace
r_if
c_cond
(paren
id|symtable
op_ne
l_int|NULL
)paren
(brace
id|DBT
id|key
suffix:semicolon
id|DBT
id|data
suffix:semicolon
r_while
c_loop
(paren
id|symtable
op_member_access_from_pointer
id|seq
c_func
(paren
id|symtable
comma
op_amp
id|key
comma
op_amp
id|data
comma
id|R_FIRST
)paren
op_eq
l_int|0
)paren
(brace
id|symbol_t
op_star
id|cursym
suffix:semicolon
id|cursym
op_assign
op_star
(paren
id|symbol_t
op_star
op_star
)paren
id|data.data
suffix:semicolon
id|symbol_delete
c_func
(paren
id|cursym
)paren
suffix:semicolon
)brace
id|symtable
op_member_access_from_pointer
id|close
c_func
(paren
id|symtable
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * The semantics of get is to return an uninitialized symbol entry&n; * if a lookup fails.&n; */
id|symbol_t
op_star
DECL|function|symtable_get
id|symtable_get
c_func
(paren
id|name
)paren
r_char
op_star
id|name
suffix:semicolon
(brace
id|DBT
id|key
suffix:semicolon
id|DBT
id|data
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|key.data
op_assign
(paren
r_void
op_star
)paren
id|name
suffix:semicolon
id|key.size
op_assign
id|strlen
c_func
(paren
id|name
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|retval
op_assign
id|symtable
op_member_access_from_pointer
id|get
c_func
(paren
id|symtable
comma
op_amp
id|key
comma
op_amp
id|data
comma
multiline_comment|/*flags*/
l_int|0
)paren
)paren
op_ne
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|retval
op_eq
op_minus
l_int|1
)paren
(brace
id|perror
c_func
(paren
l_string|&quot;Symbol table get operation failed&quot;
)paren
suffix:semicolon
m_exit
(paren
id|EX_SOFTWARE
)paren
suffix:semicolon
multiline_comment|/* NOTREACHED */
)brace
r_else
r_if
c_cond
(paren
id|retval
op_eq
l_int|1
)paren
(brace
multiline_comment|/* Symbol wasn&squot;t found, so create a new one */
id|symbol_t
op_star
id|new_symbol
suffix:semicolon
id|new_symbol
op_assign
id|symbol_create
c_func
(paren
id|name
)paren
suffix:semicolon
id|data.data
op_assign
op_amp
id|new_symbol
suffix:semicolon
id|data.size
op_assign
r_sizeof
(paren
id|new_symbol
)paren
suffix:semicolon
r_if
c_cond
(paren
id|symtable
op_member_access_from_pointer
id|put
c_func
(paren
id|symtable
comma
op_amp
id|key
comma
op_amp
id|data
comma
multiline_comment|/*flags*/
l_int|0
)paren
op_ne
l_int|0
)paren
(brace
id|perror
c_func
(paren
l_string|&quot;Symtable put failed&quot;
)paren
suffix:semicolon
m_exit
(paren
id|EX_SOFTWARE
)paren
suffix:semicolon
)brace
r_return
(paren
id|new_symbol
)paren
suffix:semicolon
)brace
r_else
(brace
id|perror
c_func
(paren
l_string|&quot;Unexpected return value from db get routine&quot;
)paren
suffix:semicolon
m_exit
(paren
id|EX_SOFTWARE
)paren
suffix:semicolon
multiline_comment|/* NOTREACHED */
)brace
)brace
r_return
(paren
op_star
(paren
id|symbol_t
op_star
op_star
)paren
id|data.data
)paren
suffix:semicolon
)brace
id|symbol_node_t
op_star
DECL|function|symlist_search
id|symlist_search
c_func
(paren
id|symlist
comma
id|symname
)paren
id|symlist_t
op_star
id|symlist
suffix:semicolon
r_char
op_star
id|symname
suffix:semicolon
(brace
id|symbol_node_t
op_star
id|curnode
suffix:semicolon
id|curnode
op_assign
id|symlist-&gt;slh_first
suffix:semicolon
r_while
c_loop
(paren
id|curnode
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
id|strcmp
c_func
(paren
id|symname
comma
id|curnode-&gt;symbol-&gt;name
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
id|curnode
op_assign
id|curnode-&gt;links.sle_next
suffix:semicolon
)brace
r_return
(paren
id|curnode
)paren
suffix:semicolon
)brace
r_void
DECL|function|symlist_add
id|symlist_add
c_func
(paren
id|symlist
comma
id|symbol
comma
id|how
)paren
id|symlist_t
op_star
id|symlist
suffix:semicolon
id|symbol_t
op_star
id|symbol
suffix:semicolon
r_int
id|how
suffix:semicolon
(brace
id|symbol_node_t
op_star
id|newnode
suffix:semicolon
id|newnode
op_assign
(paren
id|symbol_node_t
op_star
)paren
id|malloc
c_func
(paren
r_sizeof
(paren
id|symbol_node_t
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|newnode
op_eq
l_int|NULL
)paren
(brace
id|stop
c_func
(paren
l_string|&quot;symlist_add: Unable to malloc symbol_node&quot;
comma
id|EX_SOFTWARE
)paren
suffix:semicolon
multiline_comment|/* NOTREACHED */
)brace
id|newnode-&gt;symbol
op_assign
id|symbol
suffix:semicolon
r_if
c_cond
(paren
id|how
op_eq
id|SYMLIST_SORT
)paren
(brace
id|symbol_node_t
op_star
id|curnode
suffix:semicolon
r_int
id|mask
suffix:semicolon
id|mask
op_assign
id|FALSE
suffix:semicolon
r_switch
c_cond
(paren
id|symbol-&gt;type
)paren
(brace
r_case
id|REGISTER
suffix:colon
r_case
id|SCBLOC
suffix:colon
r_case
id|SRAMLOC
suffix:colon
r_break
suffix:semicolon
r_case
id|BIT
suffix:colon
r_case
id|MASK
suffix:colon
id|mask
op_assign
id|TRUE
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|stop
c_func
(paren
l_string|&quot;symlist_add: Invalid symbol type for sorting&quot;
comma
id|EX_SOFTWARE
)paren
suffix:semicolon
multiline_comment|/* NOTREACHED */
)brace
id|curnode
op_assign
id|symlist-&gt;slh_first
suffix:semicolon
r_if
c_cond
(paren
id|curnode
op_eq
l_int|NULL
op_logical_or
(paren
id|mask
op_logical_and
(paren
id|curnode-&gt;symbol-&gt;info.minfo-&gt;mask
OG
id|newnode-&gt;symbol-&gt;info.minfo-&gt;mask
)paren
)paren
op_logical_or
(paren
op_logical_neg
id|mask
op_logical_and
(paren
id|curnode-&gt;symbol-&gt;info.rinfo-&gt;address
OG
id|newnode-&gt;symbol-&gt;info.rinfo-&gt;address
)paren
)paren
)paren
(brace
id|SLIST_INSERT_HEAD
c_func
(paren
id|symlist
comma
id|newnode
comma
id|links
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_while
c_loop
(paren
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|curnode-&gt;links.sle_next
op_eq
l_int|NULL
)paren
(brace
id|SLIST_INSERT_AFTER
c_func
(paren
id|curnode
comma
id|newnode
comma
id|links
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
(brace
id|symbol_t
op_star
id|cursymbol
suffix:semicolon
id|cursymbol
op_assign
id|curnode-&gt;links.sle_next-&gt;symbol
suffix:semicolon
r_if
c_cond
(paren
(paren
id|mask
op_logical_and
(paren
id|cursymbol-&gt;info.minfo-&gt;mask
OG
id|symbol-&gt;info.minfo-&gt;mask
)paren
)paren
op_logical_or
(paren
op_logical_neg
id|mask
op_logical_and
(paren
id|cursymbol-&gt;info.rinfo-&gt;address
OG
id|symbol-&gt;info.rinfo-&gt;address
)paren
)paren
)paren
(brace
id|SLIST_INSERT_AFTER
c_func
(paren
id|curnode
comma
id|newnode
comma
id|links
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|curnode
op_assign
id|curnode-&gt;links.sle_next
suffix:semicolon
)brace
)brace
r_else
(brace
id|SLIST_INSERT_HEAD
c_func
(paren
id|symlist
comma
id|newnode
comma
id|links
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|symlist_free
id|symlist_free
c_func
(paren
id|symlist
)paren
id|symlist_t
op_star
id|symlist
suffix:semicolon
(brace
id|symbol_node_t
op_star
id|node1
comma
op_star
id|node2
suffix:semicolon
id|node1
op_assign
id|symlist-&gt;slh_first
suffix:semicolon
r_while
c_loop
(paren
id|node1
op_ne
l_int|NULL
)paren
(brace
id|node2
op_assign
id|node1-&gt;links.sle_next
suffix:semicolon
id|free
c_func
(paren
id|node1
)paren
suffix:semicolon
id|node1
op_assign
id|node2
suffix:semicolon
)brace
id|SLIST_INIT
c_func
(paren
id|symlist
)paren
suffix:semicolon
)brace
r_void
DECL|function|symlist_merge
id|symlist_merge
c_func
(paren
id|symlist_dest
comma
id|symlist_src1
comma
id|symlist_src2
)paren
id|symlist_t
op_star
id|symlist_dest
suffix:semicolon
id|symlist_t
op_star
id|symlist_src1
suffix:semicolon
id|symlist_t
op_star
id|symlist_src2
suffix:semicolon
(brace
id|symbol_node_t
op_star
id|node
suffix:semicolon
op_star
id|symlist_dest
op_assign
op_star
id|symlist_src1
suffix:semicolon
r_while
c_loop
(paren
(paren
id|node
op_assign
id|symlist_src2-&gt;slh_first
)paren
op_ne
l_int|NULL
)paren
(brace
id|SLIST_REMOVE_HEAD
c_func
(paren
id|symlist_src2
comma
id|links
)paren
suffix:semicolon
id|SLIST_INSERT_HEAD
c_func
(paren
id|symlist_dest
comma
id|node
comma
id|links
)paren
suffix:semicolon
)brace
multiline_comment|/* These are now empty */
id|SLIST_INIT
c_func
(paren
id|symlist_src1
)paren
suffix:semicolon
id|SLIST_INIT
c_func
(paren
id|symlist_src2
)paren
suffix:semicolon
)brace
r_void
DECL|function|symtable_dump
id|symtable_dump
c_func
(paren
id|ofile
)paren
id|FILE
op_star
id|ofile
suffix:semicolon
(brace
multiline_comment|/*&n;&t; * Sort the registers by address with a simple insertion sort.&n;&t; * Put bitmasks next to the first register that defines them.&n;&t; * Put constants at the end.&n;&t; */
id|symlist_t
id|registers
suffix:semicolon
id|symlist_t
id|masks
suffix:semicolon
id|symlist_t
id|constants
suffix:semicolon
id|symlist_t
id|aliases
suffix:semicolon
id|SLIST_INIT
c_func
(paren
op_amp
id|registers
)paren
suffix:semicolon
id|SLIST_INIT
c_func
(paren
op_amp
id|masks
)paren
suffix:semicolon
id|SLIST_INIT
c_func
(paren
op_amp
id|constants
)paren
suffix:semicolon
id|SLIST_INIT
c_func
(paren
op_amp
id|aliases
)paren
suffix:semicolon
r_if
c_cond
(paren
id|symtable
op_ne
l_int|NULL
)paren
(brace
id|DBT
id|key
suffix:semicolon
id|DBT
id|data
suffix:semicolon
r_int
id|flag
op_assign
id|R_FIRST
suffix:semicolon
r_while
c_loop
(paren
id|symtable
op_member_access_from_pointer
id|seq
c_func
(paren
id|symtable
comma
op_amp
id|key
comma
op_amp
id|data
comma
id|flag
)paren
op_eq
l_int|0
)paren
(brace
id|symbol_t
op_star
id|cursym
suffix:semicolon
id|cursym
op_assign
op_star
(paren
id|symbol_t
op_star
op_star
)paren
id|data.data
suffix:semicolon
r_switch
c_cond
(paren
id|cursym-&gt;type
)paren
(brace
r_case
id|REGISTER
suffix:colon
r_case
id|SCBLOC
suffix:colon
r_case
id|SRAMLOC
suffix:colon
id|symlist_add
c_func
(paren
op_amp
id|registers
comma
id|cursym
comma
id|SYMLIST_SORT
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MASK
suffix:colon
r_case
id|BIT
suffix:colon
id|symlist_add
c_func
(paren
op_amp
id|masks
comma
id|cursym
comma
id|SYMLIST_SORT
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CONST
suffix:colon
r_if
c_cond
(paren
id|cursym-&gt;info.cinfo-&gt;define
op_eq
id|FALSE
)paren
(brace
id|symlist_add
c_func
(paren
op_amp
id|constants
comma
id|cursym
comma
id|SYMLIST_INSERT_HEAD
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|ALIAS
suffix:colon
id|symlist_add
c_func
(paren
op_amp
id|aliases
comma
id|cursym
comma
id|SYMLIST_INSERT_HEAD
)paren
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|flag
op_assign
id|R_NEXT
suffix:semicolon
)brace
multiline_comment|/* Put in the masks and bits */
r_while
c_loop
(paren
id|masks.slh_first
op_ne
l_int|NULL
)paren
(brace
id|symbol_node_t
op_star
id|curnode
suffix:semicolon
id|symbol_node_t
op_star
id|regnode
suffix:semicolon
r_char
op_star
id|regname
suffix:semicolon
id|curnode
op_assign
id|masks.slh_first
suffix:semicolon
id|SLIST_REMOVE_HEAD
c_func
(paren
op_amp
id|masks
comma
id|links
)paren
suffix:semicolon
id|regnode
op_assign
id|curnode-&gt;symbol-&gt;info.minfo-&gt;symrefs.slh_first
suffix:semicolon
id|regname
op_assign
id|regnode-&gt;symbol-&gt;name
suffix:semicolon
id|regnode
op_assign
id|symlist_search
c_func
(paren
op_amp
id|registers
comma
id|regname
)paren
suffix:semicolon
id|SLIST_INSERT_AFTER
c_func
(paren
id|regnode
comma
id|curnode
comma
id|links
)paren
suffix:semicolon
)brace
multiline_comment|/* Add the aliases */
r_while
c_loop
(paren
id|aliases.slh_first
op_ne
l_int|NULL
)paren
(brace
id|symbol_node_t
op_star
id|curnode
suffix:semicolon
id|symbol_node_t
op_star
id|regnode
suffix:semicolon
r_char
op_star
id|regname
suffix:semicolon
id|curnode
op_assign
id|aliases.slh_first
suffix:semicolon
id|SLIST_REMOVE_HEAD
c_func
(paren
op_amp
id|aliases
comma
id|links
)paren
suffix:semicolon
id|regname
op_assign
id|curnode-&gt;symbol-&gt;info.ainfo-&gt;parent-&gt;name
suffix:semicolon
id|regnode
op_assign
id|symlist_search
c_func
(paren
op_amp
id|registers
comma
id|regname
)paren
suffix:semicolon
id|SLIST_INSERT_AFTER
c_func
(paren
id|regnode
comma
id|curnode
comma
id|links
)paren
suffix:semicolon
)brace
multiline_comment|/* Output what we have */
id|fprintf
c_func
(paren
id|ofile
comma
"&quot;"
multiline_comment|/*&n;  * DO NOT EDIT - This file is automatically generated.&n;  */
"&bslash;"
id|n
"&quot;"
)paren
suffix:semicolon
r_while
c_loop
(paren
id|registers.slh_first
op_ne
l_int|NULL
)paren
(brace
id|symbol_node_t
op_star
id|curnode
suffix:semicolon
id|u_int8_t
id|value
suffix:semicolon
r_char
op_star
id|tab_str
suffix:semicolon
r_char
op_star
id|tab_str2
suffix:semicolon
id|curnode
op_assign
id|registers.slh_first
suffix:semicolon
id|SLIST_REMOVE_HEAD
c_func
(paren
op_amp
id|registers
comma
id|links
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|curnode-&gt;symbol-&gt;type
)paren
(brace
r_case
id|REGISTER
suffix:colon
r_case
id|SCBLOC
suffix:colon
r_case
id|SRAMLOC
suffix:colon
id|fprintf
c_func
(paren
id|ofile
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|value
op_assign
id|curnode-&gt;symbol-&gt;info.rinfo-&gt;address
suffix:semicolon
id|tab_str
op_assign
l_string|&quot;&bslash;t&quot;
suffix:semicolon
id|tab_str2
op_assign
l_string|&quot;&bslash;t&bslash;t&quot;
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ALIAS
suffix:colon
(brace
id|symbol_t
op_star
id|parent
suffix:semicolon
id|parent
op_assign
id|curnode-&gt;symbol-&gt;info.ainfo-&gt;parent
suffix:semicolon
id|value
op_assign
id|parent-&gt;info.rinfo-&gt;address
suffix:semicolon
id|tab_str
op_assign
l_string|&quot;&bslash;t&quot;
suffix:semicolon
id|tab_str2
op_assign
l_string|&quot;&bslash;t&bslash;t&quot;
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|MASK
suffix:colon
r_case
id|BIT
suffix:colon
id|value
op_assign
id|curnode-&gt;symbol-&gt;info.minfo-&gt;mask
suffix:semicolon
id|tab_str
op_assign
l_string|&quot;&bslash;t&bslash;t&quot;
suffix:semicolon
id|tab_str2
op_assign
l_string|&quot;&bslash;t&quot;
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|value
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Quiet compiler */
id|tab_str
op_assign
l_int|NULL
suffix:semicolon
id|tab_str2
op_assign
l_int|NULL
suffix:semicolon
id|stop
c_func
(paren
l_string|&quot;symtable_dump: Invalid symbol type &quot;
l_string|&quot;encountered&quot;
comma
id|EX_SOFTWARE
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|fprintf
c_func
(paren
id|ofile
comma
l_string|&quot;#define%s%-16s%s0x%02x&bslash;n&quot;
comma
id|tab_str
comma
id|curnode-&gt;symbol-&gt;name
comma
id|tab_str2
comma
id|value
)paren
suffix:semicolon
id|free
c_func
(paren
id|curnode
)paren
suffix:semicolon
)brace
id|fprintf
c_func
(paren
id|ofile
comma
l_string|&quot;&bslash;n&bslash;n&quot;
)paren
suffix:semicolon
r_while
c_loop
(paren
id|constants.slh_first
op_ne
l_int|NULL
)paren
(brace
id|symbol_node_t
op_star
id|curnode
suffix:semicolon
id|curnode
op_assign
id|constants.slh_first
suffix:semicolon
id|SLIST_REMOVE_HEAD
c_func
(paren
op_amp
id|constants
comma
id|links
)paren
suffix:semicolon
id|fprintf
c_func
(paren
id|ofile
comma
l_string|&quot;#define&bslash;t%-8s&bslash;t0x%02x&bslash;n&quot;
comma
id|curnode-&gt;symbol-&gt;name
comma
id|curnode-&gt;symbol-&gt;info.cinfo-&gt;value
)paren
suffix:semicolon
id|free
c_func
(paren
id|curnode
)paren
suffix:semicolon
)brace
)brace
)brace
eof
