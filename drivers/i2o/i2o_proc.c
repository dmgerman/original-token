multiline_comment|/*&n; *   procfs handler for Linux I2O subsystem&n; *&n; *   (c) Copyright 1999 Deepak Saxena&n; *   &n; *   Originally written by Deepak Saxena(deepak@plexity.net)&n; *&n; *   This program is free software. You can redistribute it and/or&n; *   modify it under the terms of the GNU General Public License&n; *   as published by the Free Software Foundation; either version&n; *   2 of the License, or (at your option) any later version.&n; *&n; *   This is an initial test release. The code is based on the design&n; *   of the ide procfs system (drivers/block/ide-proc.c). Some code&n; *   taken from i2o-core module by Alan Cox.&n; *&n; *   DISCLAIMER: This code is still under development/test and may cause&n; *   your system to behave unpredictably.  Use at your own discretion.&n; *&n; *   LAN entries by Juha Siev&#xfffd;nen (Juha.Sievanen@cs.Helsinki.FI),&n; *&t;&t;    Auvo H&#xfffd;kkinen (Auvo.Hakkinen@cs.Helsinki.FI)&n; *   University of Helsinki, Department of Computer Science&n; */
multiline_comment|/*&n; * set tabstop=3&n; */
multiline_comment|/*&n; * TODO List&n; *&n; * - Add support for any version 2.0 spec changes once 2.0 IRTOS is&n; *   is available to test with&n; * - Clean up code to use official structure definitions &n; */
singleline_comment|// FIXME!
DECL|macro|FMT_U64_HEX
mdefine_line|#define FMT_U64_HEX &quot;0x%08x%08x&quot;
DECL|macro|U64_VAL
mdefine_line|#define U64_VAL(pu64) *((u32*)(pu64)+1), *((u32*)(pu64))
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/i2o.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/spinlock.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
macro_line|#include &quot;i2o_lan.h&quot;
multiline_comment|/*&n; * Structure used to define /proc entries&n; */
DECL|struct|_i2o_proc_entry_t
r_typedef
r_struct
id|_i2o_proc_entry_t
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
multiline_comment|/* entry name */
DECL|member|mode
id|mode_t
id|mode
suffix:semicolon
multiline_comment|/* mode */
DECL|member|read_proc
id|read_proc_t
op_star
id|read_proc
suffix:semicolon
multiline_comment|/* read func */
DECL|member|write_proc
id|write_proc_t
op_star
id|write_proc
suffix:semicolon
multiline_comment|/* write func */
DECL|typedef|i2o_proc_entry
)brace
id|i2o_proc_entry
suffix:semicolon
singleline_comment|// #define DRIVERDEBUG
r_static
r_int
id|i2o_proc_read_lct
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_hrt
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_status
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_hw
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_ddm_table
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_driver_store
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_drivers_stored
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_groups
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_phys_device
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_claimed
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_users
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_priv_msgs
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_authorized_users
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_dev_name
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_dev_identity
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_ddm_identity
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_uinfo
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_sgl_limits
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_sensors
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|print_serial_number
c_func
(paren
r_char
op_star
comma
r_int
comma
id|u8
op_star
comma
r_int
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_create_entries
c_func
(paren
r_void
op_star
comma
id|i2o_proc_entry
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_remove_entries
c_func
(paren
id|i2o_proc_entry
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_add_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_remove_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_add_device
c_func
(paren
r_struct
id|i2o_device
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_remove_device
c_func
(paren
r_struct
id|i2o_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|create_i2o_procfs
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_int
id|destroy_i2o_procfs
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_new_dev
c_func
(paren
r_struct
id|i2o_controller
op_star
comma
r_struct
id|i2o_device
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_dev_del
c_func
(paren
r_struct
id|i2o_controller
op_star
comma
r_struct
id|i2o_device
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_dev_info
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_mac_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_mcast_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_batch_control
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_operation
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_media_operation
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_alt_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_tx_info
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_rx_info
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_hist_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_eth_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_tr_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_fddi_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
DECL|variable|i2o_proc_dir_root
r_static
r_struct
id|proc_dir_entry
op_star
id|i2o_proc_dir_root
suffix:semicolon
multiline_comment|/*&n; * I2O OSM descriptor&n; */
DECL|variable|i2o_proc_handler
r_static
r_struct
id|i2o_handler
id|i2o_proc_handler
op_assign
(brace
l_int|NULL
comma
id|i2o_proc_new_dev
comma
id|i2o_proc_dev_del
comma
l_int|NULL
comma
l_string|&quot;I2O procfs Layer&quot;
comma
l_int|0
comma
l_int|0xffffffff
singleline_comment|// All classes
)brace
suffix:semicolon
multiline_comment|/*&n; * IOP specific entries...write field just in case someone &n; * ever wants one.&n; */
DECL|variable|generic_iop_entries
r_static
id|i2o_proc_entry
id|generic_iop_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;hrt&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_hrt
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lct&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lct
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;status&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_status
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;hw&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_hw
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;ddm_table&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_ddm_table
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;driver_store&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_driver_store
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;drivers_stored&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_drivers_stored
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Device specific entries&n; */
DECL|variable|generic_dev_entries
r_static
id|i2o_proc_entry
id|generic_dev_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;groups&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_groups
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;phys_dev&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_phys_device
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;claimed&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_claimed
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;users&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_users
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;priv_msgs&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_priv_msgs
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;authorized_users&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_authorized_users
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;dev_identity&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_dev_identity
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;ddm_identity&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_ddm_identity
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;user_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_uinfo
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;sgl_limits&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_sgl_limits
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;sensors&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_sensors
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; *  Storage unit specific entries (SCSI Periph, BS) with device names&n; */
DECL|variable|rbs_dev_entries
r_static
id|i2o_proc_entry
id|rbs_dev_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;dev_name&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_dev_name
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|macro|SCSI_TABLE_SIZE
mdefine_line|#define SCSI_TABLE_SIZE&t;13
DECL|variable|scsi_devices
r_static
r_char
op_star
id|scsi_devices
(braket
)braket
op_assign
(brace
l_string|&quot;Direct-Access Read/Write&quot;
comma
l_string|&quot;Sequential-Access Storage&quot;
comma
l_string|&quot;Printer&quot;
comma
l_string|&quot;Processor&quot;
comma
l_string|&quot;WORM Device&quot;
comma
l_string|&quot;CD-ROM Device&quot;
comma
l_string|&quot;Scanner Device&quot;
comma
l_string|&quot;Optical Memory Device&quot;
comma
l_string|&quot;Medium Changer Device&quot;
comma
l_string|&quot;Communications Device&quot;
comma
l_string|&quot;Graphics Art Pre-Press Device&quot;
comma
l_string|&quot;Graphics Art Pre-Press Device&quot;
comma
l_string|&quot;Array Controller Device&quot;
)brace
suffix:semicolon
multiline_comment|/* private */
multiline_comment|/*&n; * Generic LAN specific entries&n; * &n; * Should groups with r/w entries have their own subdirectory?&n; *&n; */
DECL|variable|lan_entries
r_static
id|i2o_proc_entry
id|lan_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;lan_dev_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_dev_info
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_mac_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_mac_addr
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_mcast_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
comma
id|i2o_proc_read_lan_mcast_addr
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_batch_ctrl&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
comma
id|i2o_proc_read_lan_batch_control
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_operation&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_operation
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_media_operation&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_media_operation
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_alt_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_alt_addr
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_tx_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_tx_info
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_rx_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_rx_info
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_hist_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_hist_stats
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Port specific LAN entries&n; * &n; */
DECL|variable|lan_eth_entries
r_static
id|i2o_proc_entry
id|lan_eth_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;lan_eth_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_eth_stats
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|lan_tr_entries
r_static
id|i2o_proc_entry
id|lan_tr_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;lan_tr_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_tr_stats
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|lan_fddi_entries
r_static
id|i2o_proc_entry
id|lan_fddi_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;lan_fddi_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_fddi_stats
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|function|chtostr
r_static
r_char
op_star
id|chtostr
c_func
(paren
id|u8
op_star
id|chars
comma
r_int
id|n
)paren
(brace
r_char
id|tmp
(braket
l_int|256
)braket
suffix:semicolon
id|tmp
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_return
id|strncat
c_func
(paren
id|tmp
comma
(paren
r_char
op_star
)paren
id|chars
comma
id|n
)paren
suffix:semicolon
)brace
DECL|function|i2o_report_query_status
r_static
r_int
id|i2o_report_query_status
c_func
(paren
r_char
op_star
id|buf
comma
r_int
id|block_status
comma
r_char
op_star
id|group
)paren
(brace
r_switch
c_cond
(paren
id|block_status
)paren
(brace
r_case
op_minus
id|ETIMEDOUT
suffix:colon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout reading group %s.&bslash;n&quot;
comma
id|group
)paren
suffix:semicolon
r_case
op_minus
id|ENOMEM
suffix:colon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;No free memory to read the table.&bslash;n&quot;
)paren
suffix:semicolon
r_case
op_minus
id|I2O_PARAMS_STATUS_INVALID_GROUP_ID
suffix:colon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Group %s not supported.&bslash;n&quot;
comma
id|group
)paren
suffix:semicolon
r_default
suffix:colon
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Error reading group %s. BlockStatus 0x%02X&bslash;n&quot;
comma
id|group
comma
op_minus
id|block_status
)paren
suffix:semicolon
)brace
)brace
DECL|variable|bus_strings
r_static
r_char
op_star
id|bus_strings
(braket
)braket
op_assign
(brace
l_string|&quot;Local Bus&quot;
comma
l_string|&quot;ISA&quot;
comma
l_string|&quot;EISA&quot;
comma
l_string|&quot;MCA&quot;
comma
l_string|&quot;PCI&quot;
comma
l_string|&quot;PCMCIA&quot;
comma
l_string|&quot;NUBUS&quot;
comma
l_string|&quot;CARDBUS&quot;
)brace
suffix:semicolon
DECL|variable|i2o_proc_lock
r_static
id|spinlock_t
id|i2o_proc_lock
op_assign
id|SPIN_LOCK_UNLOCKED
suffix:semicolon
DECL|function|i2o_proc_read_hrt
r_int
id|i2o_proc_read_hrt
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
id|i2o_hrt
op_star
id|hrt
op_assign
(paren
id|i2o_hrt
op_star
)paren
id|c-&gt;hrt
suffix:semicolon
id|u32
id|bus
suffix:semicolon
r_int
id|count
suffix:semicolon
r_int
id|i
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|hrt-&gt;hrt_version
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HRT table for controller is too new a version.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|count
op_assign
id|hrt-&gt;num_entries
suffix:semicolon
r_if
c_cond
(paren
(paren
id|count
op_star
id|hrt-&gt;entry_len
op_plus
l_int|8
)paren
OG
l_int|2048
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;i2o_proc: HRT does not fit into buffer&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HRT table too big to fit in buffer.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HRT has %d entries of %d bytes each.&bslash;n&quot;
comma
id|count
comma
id|hrt-&gt;entry_len
op_lshift
l_int|2
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Entry %d:&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Adapter ID: %0#10x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|adapter_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Controlling tid: %0#6x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|parent_tid
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_type
op_ne
l_int|0x80
)paren
(brace
id|bus
op_assign
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_type
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   %s Information&bslash;n&quot;
comma
id|bus_strings
(braket
id|bus
)braket
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|bus
)paren
(brace
r_case
id|I2O_BUS_LOCAL
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.local_bus.LbBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.local_bus.LbBaseMemoryAddress
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_ISA
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.IsaBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.IsaBaseMemoryAddress
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; CSN: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.CSN
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_EISA
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus.EisaBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus.EisaBaseMemoryAddress
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Slot: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus.EisaSlotNumber
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_MCA
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus.McaBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus.McaBaseMemoryAddress
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Slot: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus.McaSlotNumber
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_PCI
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     Bus: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciBusNumber
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Dev: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciDeviceNumber
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Func: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciFunctionNumber
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Vendor: %0#6x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciVendorID
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Device: %0#6x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciDeviceID
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;      Unsupported Bus Type&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Unknown Bus Type&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_lct
r_int
id|i2o_proc_read_lct
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
id|i2o_lct
op_star
id|lct
op_assign
(paren
id|i2o_lct
op_star
)paren
id|c-&gt;lct
suffix:semicolon
r_int
id|entries
suffix:semicolon
r_int
id|i
suffix:semicolon
DECL|macro|BUS_TABLE_SIZE
mdefine_line|#define BUS_TABLE_SIZE 3
r_static
r_char
op_star
id|bus_ports
(braket
)braket
op_assign
(brace
l_string|&quot;Generic Bus&quot;
comma
l_string|&quot;SCSI Bus&quot;
comma
l_string|&quot;Fibre Channel Bus&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|entries
op_assign
(paren
id|lct-&gt;table_size
op_minus
l_int|3
)paren
op_div
l_int|9
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;LCT contains %d %s&bslash;n&quot;
comma
id|entries
comma
id|entries
op_eq
l_int|1
ques
c_cond
l_string|&quot;entry&quot;
suffix:colon
l_string|&quot;entries&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|lct-&gt;boot_tid
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Boot Device @ ID %d&bslash;n&quot;
comma
id|lct-&gt;boot_tid
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Change Indicator: %#10x&bslash;n&quot;
comma
id|lct-&gt;change_ind
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|entries
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Entry %d&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Class, SubClass  : %s&quot;
comma
id|i2o_get_class_name
c_func
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|class_id
)paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; *&t;Classes which we&squot;ll print subclass info for&n;&t;&t; */
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|class_id
op_amp
l_int|0xFFF
)paren
(brace
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Direct-Access Read/Write&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, WORM Drive&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, CD-ROM Drive&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x07
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Optical Memory Device&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Unknown (0x%02x)&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
op_amp
l_int|0xFF
)paren
(brace
r_case
l_int|0x30
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Ethernet&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x40
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, 100base VG&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x50
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, IEEE 802.5/Token-Ring&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x60
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, ANSI X3T9.5 FDDI&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x70
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Fibre Channel&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Unknown Sub-Class (0x%02x)&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
op_amp
l_int|0xFF
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_if
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
OL
id|SCSI_TABLE_SIZE
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, %s&quot;
comma
id|scsi_devices
(braket
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)braket
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Unknown Device Type&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_BUS_ADAPTER_PORT
suffix:colon
r_if
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
OL
id|BUS_TABLE_SIZE
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, %s&quot;
comma
id|bus_ports
(braket
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)braket
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, Unknown Bus Type&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Local TID        : 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  User TID         : 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|user_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Parent TID       : 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|parent_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Identity Tag     : 0x%x%x%x%x%x%x%x%x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|0
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|1
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|2
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|3
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|4
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|5
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|6
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Change Indicator : %0#10x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|change_ind
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Event Capab Mask : %0#10x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|device_flags
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_status
r_int
id|i2o_proc_read_status
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
r_char
id|prodstr
(braket
l_int|25
)braket
suffix:semicolon
r_int
id|version
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|i2o_status_get
c_func
(paren
id|c
)paren
suffix:semicolon
singleline_comment|// reread the status block
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Organization ID        : %0#6x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;org_id
)paren
suffix:semicolon
id|version
op_assign
id|c-&gt;status_block-&gt;i2o_version
suffix:semicolon
multiline_comment|/* FIXME for Spec 2.0&n;&t;if (version == 0x02) {&n;&t;&t;len += sprintf(buf+len,&quot;Lowest I2O version supported: &quot;);&n;&t;&t;switch(workspace[2]) {&n;&t;&t;&t;case 0x00:&n;&t;&t;&t;&t;len += sprintf(buf+len,&quot;1.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x01:&n;&t;&t;&t;&t;len += sprintf(buf+len,&quot;1.5&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x02:&n;&t;&t;&t;&t;len += sprintf(buf+len,&quot;2.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;}&n;&n;&t;&t;len += sprintf(buf+len, &quot;Highest I2O version supported: &quot;);&n;&t;&t;switch(workspace[3]) {&n;&t;&t;&t;case 0x00:&n;&t;&t;&t;&t;len += sprintf(buf+len,&quot;1.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x01:&n;&t;&t;&t;&t;len += sprintf(buf+len,&quot;1.5&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;&t;case 0x02:&n;&t;&t;&t;&t;len += sprintf(buf+len,&quot;2.0&bslash;n&quot;);&n;&t;&t;&t;&t;break;&n;&t;&t;}&n;&t;}&n;*/
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IOP ID                 : %0#5x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;iop_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Host Unit ID           : %0#6x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;host_unit_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Segment Number         : %0#5x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;segment_number
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;I2O version            : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|version
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1.5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;2.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown version&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IOP State              : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|c-&gt;status_block-&gt;iop_state
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;INIT&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RESET&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HOLD&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;READY&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x08
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;OPERATIONAL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x10
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FAILED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x11
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FAULTED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Messenger Type         : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|c-&gt;status_block-&gt;msg_type
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Memory mapped&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Memory mapped only&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Remote only&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Memory mapped and remote&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Inbound Frame Size     : %d bytes&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;inbound_frame_size
op_lshift
l_int|2
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Inbound Frames     : %d&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;max_inbound_frames
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Inbound Frames : %d&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;cur_inbound_frames
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Outbound Frames    : %d&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;max_outbound_frames
)paren
suffix:semicolon
multiline_comment|/* Spec doesn&squot;t say if NULL terminated or not... */
id|memcpy
c_func
(paren
id|prodstr
comma
id|c-&gt;status_block-&gt;product_id
comma
l_int|24
)paren
suffix:semicolon
id|prodstr
(braket
l_int|24
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product ID             : %s&bslash;n&quot;
comma
id|prodstr
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Expected LCT Size      : %d bytes&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;expected_lct_size
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IOP Capabilities&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Context Field Size Support : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|c-&gt;status_block-&gt;iop_capabilities
op_amp
l_int|0x0000003
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports only 32-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports only 64-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports 32-bit and 64-bit context fields, &quot;
l_string|&quot;but not concurrently&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports 32-bit and 64-bit context fields &quot;
l_string|&quot;concurrently&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;0x%08x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;iop_capabilities
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Current Context Field Size : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|c-&gt;status_block-&gt;iop_capabilities
op_amp
l_int|0x0000000C
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;not configured&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports only 32-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports only 64-bit context fields&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|12
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Supports both 32-bit or 64-bit context fields &quot;
l_string|&quot;concurrently&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Inbound Peer Support       : %s&bslash;n&quot;
comma
(paren
id|c-&gt;status_block-&gt;iop_capabilities
op_amp
l_int|0x00000010
)paren
ques
c_cond
l_string|&quot;Supported&quot;
suffix:colon
l_string|&quot;Not supported&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Outbound Peer Support      : %s&bslash;n&quot;
comma
(paren
id|c-&gt;status_block-&gt;iop_capabilities
op_amp
l_int|0x00000020
)paren
ques
c_cond
l_string|&quot;Supported&quot;
suffix:colon
l_string|&quot;Not supported&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Peer to Peer Support       : %s&bslash;n&quot;
comma
(paren
id|c-&gt;status_block-&gt;iop_capabilities
op_amp
l_int|0x00000040
)paren
ques
c_cond
l_string|&quot;Supported&quot;
suffix:colon
l_string|&quot;Not supported&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Desired private memory size   : %d kB&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;desired_mem_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Allocated private memory size : %d kB&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;current_mem_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Private memory base address   : %0#10x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;current_mem_base
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Desired private I/O size      : %d kB&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;desired_io_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Allocated private I/O size    : %d kB&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;current_io_size
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Private I/O base address      : %0#10x&bslash;n&quot;
comma
id|c-&gt;status_block-&gt;current_io_base
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_hw
r_int
id|i2o_proc_read_hw
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|5
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|u32
id|hwcap
suffix:semicolon
r_static
r_char
op_star
id|cpu_table
(braket
)braket
op_assign
(brace
l_string|&quot;Intel 80960 series&quot;
comma
l_string|&quot;AMD2900 series&quot;
comma
l_string|&quot;Motorola 68000 series&quot;
comma
l_string|&quot;ARM series&quot;
comma
l_string|&quot;MIPS series&quot;
comma
l_string|&quot;Sparc series&quot;
comma
l_string|&quot;PowerPC series&quot;
comma
l_string|&quot;Intel x86 series&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|c
comma
id|ADAPTER_TID
comma
l_int|0x0000
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0000 IOP Hardware&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;I2O Vendor ID    : %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product ID       : %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;CPU              : &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|16
)braket
OG
l_int|8
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|cpu_table
(braket
id|work8
(braket
l_int|16
)braket
)braket
)paren
suffix:semicolon
multiline_comment|/* Anyone using ProcessorVersion? */
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RAM              : %dkB&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Non-Volatile Mem : %dkB&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|hwcap
op_assign
id|work32
(braket
l_int|3
)braket
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Capabilities : 0x%08x&bslash;n&quot;
comma
id|hwcap
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   [%s] Self booting&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000001
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   [%s] Upgradable IRTOS&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   [%s] Supports downloading DDMs&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   [%s] Supports installing DDMs&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000008
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   [%s] Battery-backed RAM&bslash;n&quot;
comma
(paren
id|hwcap
op_amp
l_int|0x00000010
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Executive group 0003h - Executing DDM List (table) */
DECL|function|i2o_proc_read_ddm_table
r_int
id|i2o_proc_read_ddm_table
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
id|_i2o_exec_execute_ddm_table
(brace
id|u16
id|ddm_tid
suffix:semicolon
id|u8
id|module_type
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
id|u16
id|i2o_vendor_id
suffix:semicolon
id|u16
id|module_id
suffix:semicolon
id|u8
id|module_name_version
(braket
l_int|28
)braket
suffix:semicolon
id|u32
id|data_size
suffix:semicolon
id|u32
id|code_size
suffix:semicolon
)brace
id|i2o_exec_execute_ddm_table
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_exec_execute_ddm_table
id|ddm_table
(braket
id|MAX_I2O_MODULES
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|i2o_exec_execute_ddm_table
id|ddm_table
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|c
comma
id|ADAPTER_TID
comma
l_int|0x0003
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0003 Executing DDM List&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tid   Module_type     Vendor Mod_id  Module_name             Vrs  Data_size Code_size&bslash;n&quot;
)paren
suffix:semicolon
id|ddm_table
op_assign
id|result.ddm_table
(braket
l_int|0
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|ddm_table
op_assign
id|result.ddm_table
(braket
op_increment
id|i
)braket
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;0x%03x &quot;
comma
id|ddm_table.ddm_tid
op_amp
l_int|0xFFF
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ddm_table.module_type
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Downloaded DDM  &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x22
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Embedded DDM    &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;                &quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-#7x&quot;
comma
id|ddm_table.i2o_vendor_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-#8x&quot;
comma
id|ddm_table.module_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-29s&quot;
comma
id|chtostr
c_func
(paren
id|ddm_table.module_name_version
comma
l_int|28
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%9d  &quot;
comma
id|ddm_table.data_size
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%8d&quot;
comma
id|ddm_table.code_size
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Executive group 0004h - Driver Store (scalar) */
DECL|function|i2o_proc_read_driver_store
r_int
id|i2o_proc_read_driver_store
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
id|u32
id|work32
(braket
l_int|8
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|c
comma
id|ADAPTER_TID
comma
l_int|0x0004
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0004 Driver Store&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Module limit  : %d&bslash;n&quot;
l_string|&quot;Module count  : %d&bslash;n&quot;
l_string|&quot;Current space : %d kB&bslash;n&quot;
l_string|&quot;Free space    : %d kB&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
comma
id|work32
(braket
l_int|1
)braket
comma
id|work32
(braket
l_int|2
)braket
op_rshift
l_int|10
comma
id|work32
(braket
l_int|3
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Executive group 0005h - Driver Store Table (table) */
DECL|function|i2o_proc_read_drivers_stored
r_int
id|i2o_proc_read_drivers_stored
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_typedef
r_struct
id|_i2o_driver_store
(brace
id|u16
id|stored_ddm_index
suffix:semicolon
id|u8
id|module_type
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
id|u16
id|i2o_vendor_id
suffix:semicolon
id|u16
id|module_id
suffix:semicolon
id|u8
id|module_name_version
(braket
l_int|28
)braket
suffix:semicolon
id|u8
id|date
(braket
l_int|8
)braket
suffix:semicolon
id|u32
id|module_size
suffix:semicolon
id|u32
id|mpb_size
suffix:semicolon
id|u32
id|module_flags
suffix:semicolon
)brace
id|i2o_driver_store_table
suffix:semicolon
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_driver_store_table
id|dst
(braket
id|MAX_I2O_MODULES
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|i2o_driver_store_table
id|dst
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|c
comma
id|ADAPTER_TID
comma
l_int|0x0005
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0005 DRIVER STORE TABLE&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;#  Module_type     Vendor Mod_id  Module_name             Vrs&quot;
l_string|&quot;Date     Mod_size Par_size Flags&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|dst
op_assign
id|result.dst
(braket
l_int|0
)braket
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|dst
op_assign
id|result.dst
(braket
op_increment
id|i
)braket
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-3d&quot;
comma
id|dst.stored_ddm_index
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dst.module_type
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Downloaded DDM  &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x22
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Embedded DDM    &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;                &quot;
)paren
suffix:semicolon
)brace
macro_line|#if 0
r_if
c_cond
(paren
id|c-&gt;i2oversion
op_eq
l_int|0x02
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-d&quot;
comma
id|dst.module_state
)paren
suffix:semicolon
)brace
macro_line|#endif
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-#7x&quot;
comma
id|dst.i2o_vendor_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-#8x&quot;
comma
id|dst.module_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-29s&quot;
comma
id|chtostr
c_func
(paren
id|dst.module_name_version
comma
l_int|28
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-9s&quot;
comma
id|chtostr
c_func
(paren
id|dst.date
comma
l_int|8
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%8d &quot;
comma
id|dst.module_size
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%8d &quot;
comma
id|dst.mpb_size
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;0x%04x&quot;
comma
id|dst.module_flags
)paren
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
id|c-&gt;i2oversion
op_eq
l_int|0x02
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%d&quot;
comma
id|dst.notification_level
)paren
suffix:semicolon
)brace
macro_line|#endif
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F000h - Params Descriptor (table) */
DECL|function|i2o_proc_read_groups
r_int
id|i2o_proc_read_groups
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
id|u8
id|properties
suffix:semicolon
r_typedef
r_struct
id|_i2o_group_info
(brace
id|u16
id|group_number
suffix:semicolon
id|u16
id|field_count
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u8
id|properties
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
)brace
id|i2o_group_info
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_group_info
id|group
(braket
l_int|256
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF000
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF000 Params Descriptor&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;#  Group   FieldCount RowCount Type   Add Del Clear&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-3d&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;0x%04X &quot;
comma
id|result.group
(braket
id|i
)braket
dot
id|group_number
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%10d &quot;
comma
id|result.group
(braket
id|i
)braket
dot
id|field_count
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%8d &quot;
comma
id|result.group
(braket
id|i
)braket
dot
id|row_count
)paren
suffix:semicolon
id|properties
op_assign
id|result.group
(braket
id|i
)braket
dot
id|properties
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x1
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Table  &quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Scalar &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x2
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; + &quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; - &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x4
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  + &quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  - &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|properties
op_amp
l_int|0x8
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  + &quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  - &quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F001h - Physical Device Table (table) */
DECL|function|i2o_proc_read_phys_device
r_int
id|i2o_proc_read_phys_device
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u32
id|adapter_id
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF001
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF001 Physical Device Table&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.row_count
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;#  AdapterId&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-2d&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%#7x&bslash;n&quot;
comma
id|result.adapter_id
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F002h - Claimed Table (table) */
DECL|function|i2o_proc_read_claimed
r_int
id|i2o_proc_read_claimed
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u16
id|claimed_tid
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF002
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF002 Claimed Table&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.row_count
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;#  ClaimedTid&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-2d&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%#7x&bslash;n&quot;
comma
id|result.claimed_tid
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F003h - User Table (table) */
DECL|function|i2o_proc_read_users
r_int
id|i2o_proc_read_users
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
id|_i2o_user_table
(brace
id|u16
id|instance
suffix:semicolon
id|u16
id|user_tid
suffix:semicolon
id|u8
id|claim_type
suffix:semicolon
id|u8
id|reserved1
suffix:semicolon
id|u16
id|reserved2
suffix:semicolon
)brace
id|i2o_user_table
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_user_table
id|user
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF003
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF003 User Table&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;#  Instance UserTid ClaimType&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-3d&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%#8x &quot;
comma
id|result.user
(braket
id|i
)braket
dot
id|instance
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%#7x &quot;
comma
id|result.user
(braket
id|i
)braket
dot
id|user_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%#9x&bslash;n&quot;
comma
id|result.user
(braket
id|i
)braket
dot
id|claim_type
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F005h - Private message extensions (table) (optional) */
DECL|function|i2o_proc_read_priv_msgs
r_int
id|i2o_proc_read_priv_msgs
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_typedef
r_struct
id|_i2o_private
(brace
id|u16
id|ext_instance
suffix:semicolon
id|u16
id|organization_id
suffix:semicolon
id|u16
id|x_function_code
suffix:semicolon
)brace
id|i2o_private
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|i2o_private
id|extension
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF000
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF005 Private Message Extensions (optional)&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Instance#  OrgId  FunctionCode&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%0#9x &quot;
comma
id|result.extension
(braket
id|i
)braket
dot
id|ext_instance
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%0#6x &quot;
comma
id|result.extension
(braket
id|i
)braket
dot
id|organization_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%0#6x&quot;
comma
id|result.extension
(braket
id|i
)braket
dot
id|x_function_code
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F006h - Authorized User Table (table) */
DECL|function|i2o_proc_read_authorized_users
r_int
id|i2o_proc_read_authorized_users
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u32
id|alternate_tid
(braket
l_int|64
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF006
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF006 Autohorized User Table&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.row_count
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;#  AlternateTid&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%-2d&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%#7x &quot;
comma
id|result.alternate_tid
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|result.more_flag
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;There is more...&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F100h - Device Identity (scalar) */
DECL|function|i2o_proc_read_dev_identity
r_int
id|i2o_proc_read_dev_identity
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|128
)braket
suffix:semicolon
singleline_comment|// allow for &quot;stuff&quot; + up to 256 byte (max) serial number
singleline_comment|// == (allow) 512d bytes (max)
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF100
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF100 Device Identity&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Device Class  : %s&bslash;n&quot;
comma
id|i2o_get_class_name
c_func
(paren
id|work16
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Owner TID     : %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Parent TID    : %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Vendor info   : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|2
)paren
comma
l_int|16
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product info  : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|6
)paren
comma
l_int|16
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Description   : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|10
)paren
comma
l_int|16
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product rev.  : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|14
)paren
comma
l_int|8
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Serial number : &quot;
)paren
suffix:semicolon
id|len
op_assign
id|print_serial_number
c_func
(paren
id|buf
comma
id|len
comma
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|16
)paren
comma
multiline_comment|/* allow for SNLen plus&n;&t;&t;&t;&t;&t;&t; * possible trailing &squot;&bslash;0&squot;&n;&t;&t;&t;&t;&t;&t; */
r_sizeof
(paren
id|work32
)paren
op_minus
(paren
l_int|16
op_star
r_sizeof
(paren
id|u32
)paren
)paren
op_minus
l_int|2
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_dev_name
r_int
id|i2o_proc_read_dev_name
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;dev_name
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
r_return
l_int|0
suffix:semicolon
id|len
op_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|d-&gt;dev_name
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F101h - DDM Identity (scalar) */
DECL|function|i2o_proc_read_ddm_identity
r_int
id|i2o_proc_read_ddm_identity
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u16
id|ddm_tid
suffix:semicolon
id|u8
id|module_name
(braket
l_int|24
)braket
suffix:semicolon
id|u8
id|module_rev
(braket
l_int|8
)braket
suffix:semicolon
id|u8
id|sn_format
suffix:semicolon
id|u8
id|serial_number
(braket
l_int|12
)braket
suffix:semicolon
id|u8
id|pad
(braket
l_int|256
)braket
suffix:semicolon
singleline_comment|// allow up to 256 byte (max) serial number
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF101
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF101 DDM Identity&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Registering DDM TID : 0x%03x&bslash;n&quot;
comma
id|result.ddm_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Module name         : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.module_name
comma
l_int|24
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Module revision     : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.module_rev
comma
l_int|8
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Serial number       : &quot;
)paren
suffix:semicolon
id|len
op_assign
id|print_serial_number
c_func
(paren
id|buf
comma
id|len
comma
id|result.serial_number
comma
r_sizeof
(paren
id|result
)paren
op_minus
l_int|36
)paren
suffix:semicolon
multiline_comment|/* allow for SNLen plus possible trailing &squot;&bslash;0&squot; */
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F102h - User Information (scalar) */
DECL|function|i2o_proc_read_uinfo
r_int
id|i2o_proc_read_uinfo
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u8
id|device_name
(braket
l_int|64
)braket
suffix:semicolon
id|u8
id|service_name
(braket
l_int|64
)braket
suffix:semicolon
id|u8
id|physical_location
(braket
l_int|64
)braket
suffix:semicolon
id|u8
id|instance_number
(braket
l_int|4
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF102
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF102 User Information&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Device name     : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.device_name
comma
l_int|64
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Service name    : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.service_name
comma
l_int|64
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Physical name   : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.physical_location
comma
l_int|64
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Instance number : %s&bslash;n&quot;
comma
id|chtostr
c_func
(paren
id|result.instance_number
comma
l_int|4
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F103h - SGL Operating Limits (scalar) */
DECL|function|i2o_proc_read_sgl_limits
r_int
id|i2o_proc_read_sgl_limits
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|12
)braket
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF103
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF103 SGL Operating Limits&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;SGL chain size        : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max SGL chain size    : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;SGL chain size target : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;SGL frag count        : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max SGL frag count    : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;SGL frag count target : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|8
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;i2oversion
op_eq
l_int|0x02
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;SGL data alignment    : %d&bslash;n&quot;
comma
id|work16
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;SGL addr limit        : %d&bslash;n&quot;
comma
id|work8
(braket
l_int|20
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;SGL addr sizes supported : &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x01
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;32 bit &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x02
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;64 bit &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x04
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;96 bit &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|21
)braket
op_amp
l_int|0x08
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;128 bit &quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* Generic group F200h - Sensors (scalar) */
DECL|function|i2o_proc_read_sensors
r_int
id|i2o_proc_read_sensors
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u16
id|sensor_instance
suffix:semicolon
id|u8
id|component
suffix:semicolon
id|u16
id|component_instance
suffix:semicolon
id|u8
id|sensor_class
suffix:semicolon
id|u8
id|sensor_type
suffix:semicolon
id|u8
id|scaling_exponent
suffix:semicolon
id|u32
id|actual_reading
suffix:semicolon
id|u32
id|minimum_reading
suffix:semicolon
id|u32
id|low2lowcat_treshold
suffix:semicolon
id|u32
id|lowcat2low_treshold
suffix:semicolon
id|u32
id|lowwarn2low_treshold
suffix:semicolon
id|u32
id|low2lowwarn_treshold
suffix:semicolon
id|u32
id|norm2lowwarn_treshold
suffix:semicolon
id|u32
id|lowwarn2norm_treshold
suffix:semicolon
id|u32
id|nominal_reading
suffix:semicolon
id|u32
id|hiwarn2norm_treshold
suffix:semicolon
id|u32
id|norm2hiwarn_treshold
suffix:semicolon
id|u32
id|high2hiwarn_treshold
suffix:semicolon
id|u32
id|hiwarn2high_treshold
suffix:semicolon
id|u32
id|hicat2high_treshold
suffix:semicolon
id|u32
id|hi2hicat_treshold
suffix:semicolon
id|u32
id|maximum_reading
suffix:semicolon
id|u8
id|sensor_state
suffix:semicolon
id|u16
id|event_enable
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0xF200
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0xF200 Sensors (optional)&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Sensor instance       : %d&bslash;n&quot;
comma
id|result.sensor_instance
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Component             : %d = &quot;
comma
id|result.component
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.component
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Other&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Planar logic Board&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;CPU&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Chassis&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Power Supply&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Storage&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;External&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Component instance    : %d&bslash;n&quot;
comma
id|result.component_instance
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Sensor class          : %s&bslash;n&quot;
comma
id|result.sensor_class
ques
c_cond
l_string|&quot;Analog&quot;
suffix:colon
l_string|&quot;Digital&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Sensor type           : %d = &quot;
comma
id|result.sensor_type
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.sensor_type
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Other&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Thermal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DC voltage (DC volts)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;AC voltage (AC volts)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DC current (DC amps)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;AC current (AC volts)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Door open&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Fan operational&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Scaling exponent      : %d&bslash;n&quot;
comma
id|result.scaling_exponent
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Actual reading        : %d&bslash;n&quot;
comma
id|result.actual_reading
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Minimum reading       : %d&bslash;n&quot;
comma
id|result.minimum_reading
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Low2LowCat treshold   : %d&bslash;n&quot;
comma
id|result.low2lowcat_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LowCat2Low treshold   : %d&bslash;n&quot;
comma
id|result.lowcat2low_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LowWarn2Low treshold  : %d&bslash;n&quot;
comma
id|result.lowwarn2low_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Low2LowWarn treshold  : %d&bslash;n&quot;
comma
id|result.low2lowwarn_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Norm2LowWarn treshold : %d&bslash;n&quot;
comma
id|result.norm2lowwarn_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LowWarn2Norm treshold : %d&bslash;n&quot;
comma
id|result.lowwarn2norm_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Nominal reading       : %d&bslash;n&quot;
comma
id|result.nominal_reading
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HiWarn2Norm treshold  : %d&bslash;n&quot;
comma
id|result.hiwarn2norm_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Norm2HiWarn treshold  : %d&bslash;n&quot;
comma
id|result.norm2hiwarn_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;High2HiWarn treshold  : %d&bslash;n&quot;
comma
id|result.high2hiwarn_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HiWarn2High treshold  : %d&bslash;n&quot;
comma
id|result.hiwarn2high_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HiCat2High treshold   : %d&bslash;n&quot;
comma
id|result.hicat2high_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;High2HiCat treshold   : %d&bslash;n&quot;
comma
id|result.hi2hicat_treshold
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Maximum reading       : %d&bslash;n&quot;
comma
id|result.maximum_reading
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Sensor state          : %d = &quot;
comma
id|result.sensor_state
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.sensor_state
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Normal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Abnormal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Low Catastrophic (LoCat)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Low (Low)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Low Warning (LoWarn)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;High Warning (HiWarn)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|7
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;High (High)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;High Catastrophic (HiCat)&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Event_enable : 0x%02X&bslash;n&quot;
comma
id|result.event_enable
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Operational state change. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x01
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Low catastrophic. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x02
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Low reading. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x04
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Low warning. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x08
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Change back to normal from out of range state. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x10
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] High warning. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x20
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] High reading. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x40
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] High catastrophic. &bslash;n&quot;
comma
(paren
id|result.event_enable
op_amp
l_int|0x80
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|print_serial_number
r_static
r_int
id|print_serial_number
c_func
(paren
r_char
op_star
id|buff
comma
r_int
id|pos
comma
id|u8
op_star
id|serialno
comma
r_int
id|max_len
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* 19990419 -sralston&n;&t; *&t;The I2O v1.5 (and v2.0 so far) &quot;official specification&quot;&n;&t; *&t;got serial numbers WRONG!&n;&t; *&t;Apparently, and despite what Section 3.4.4 says and&n;&t; *&t;Figure 3-35 shows (pg 3-39 in the pdf doc),&n;&t; *&t;the convention / consensus seems to be:&n;&t; *&t;  + First byte is SNFormat&n;&t; *&t;  + Second byte is SNLen (but only if SNFormat==7 (?))&n;&t; *&t;  + (v2.0) SCSI+BS may use IEEE Registered (64 or 128 bit) format&n;&t; */
r_switch
c_cond
(paren
id|serialno
(braket
l_int|0
)braket
)paren
(brace
r_case
id|I2O_SNFORMAT_BINARY
suffix:colon
multiline_comment|/* Binary */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;0x&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;%02X&quot;
comma
id|serialno
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_ASCII
suffix:colon
multiline_comment|/* ASCII */
r_if
c_cond
(paren
id|serialno
(braket
l_int|1
)braket
OL
l_char|&squot; &squot;
)paren
multiline_comment|/* printable or SNLen? */
(brace
multiline_comment|/* sanity */
id|max_len
op_assign
(paren
id|max_len
OL
id|serialno
(braket
l_int|1
)braket
)paren
ques
c_cond
id|max_len
suffix:colon
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|serialno
(braket
l_int|1
op_plus
id|max_len
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
multiline_comment|/* just print it */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;%s&quot;
comma
op_amp
id|serialno
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* print chars for specified length */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;%c&quot;
comma
id|serialno
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_UNICODE
suffix:colon
multiline_comment|/* UNICODE */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;UNICODE Format.  Can&squot;t Display&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_LAN48_MAC
suffix:colon
multiline_comment|/* LAN-48 MAC Address */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;LAN-48 MAC address @ %02X:%02X:%02X:%02X:%02X:%02X&quot;
comma
id|serialno
(braket
l_int|2
)braket
comma
id|serialno
(braket
l_int|3
)braket
comma
id|serialno
(braket
l_int|4
)braket
comma
id|serialno
(braket
l_int|5
)braket
comma
id|serialno
(braket
l_int|6
)braket
comma
id|serialno
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_WAN
suffix:colon
multiline_comment|/* WAN MAC Address */
multiline_comment|/* FIXME: Figure out what a WAN access address looks like?? */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;WAN Access Address&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* plus new in v2.0 */
r_case
id|I2O_SNFORMAT_LAN64_MAC
suffix:colon
multiline_comment|/* LAN-64 MAC Address */
multiline_comment|/* FIXME: Figure out what a LAN-64 address really looks like?? */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;LAN-64 MAC address @ [?:%02X:%02X:?] %02X:%02X:%02X:%02X:%02X:%02X&quot;
comma
id|serialno
(braket
l_int|8
)braket
comma
id|serialno
(braket
l_int|9
)braket
comma
id|serialno
(braket
l_int|2
)braket
comma
id|serialno
(braket
l_int|3
)braket
comma
id|serialno
(braket
l_int|4
)braket
comma
id|serialno
(braket
l_int|5
)braket
comma
id|serialno
(braket
l_int|6
)braket
comma
id|serialno
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_DDM
suffix:colon
multiline_comment|/* I2O DDM */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;DDM: Tid=%03Xh, Rsvd=%04Xh, OrgId=%04Xh&quot;
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|2
)braket
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|4
)braket
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|6
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_IEEE_REG64
suffix:colon
multiline_comment|/* IEEE Registered (64-bit) */
r_case
id|I2O_SNFORMAT_IEEE_REG128
suffix:colon
multiline_comment|/* IEEE Registered (128-bit) */
multiline_comment|/* FIXME: Figure if this is even close?? */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;IEEE NodeName(hi,lo)=(%08Xh:%08Xh), PortName(hi,lo)=(%08Xh:%08Xh)&bslash;n&quot;
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|2
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|6
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|10
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|14
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_UNKNOWN
suffix:colon
multiline_comment|/* Unknown 0    */
r_case
id|I2O_SNFORMAT_UNKNOWN2
suffix:colon
multiline_comment|/* Unknown 0xff */
r_default
suffix:colon
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;Unknown data format (0x%02x)&quot;
comma
id|serialno
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|pos
suffix:semicolon
)brace
DECL|function|i2o_get_connector_type
r_const
r_char
op_star
id|i2o_get_connector_type
c_func
(paren
r_int
id|conn
)paren
(brace
r_int
id|idx
op_assign
l_int|16
suffix:semicolon
r_static
r_char
op_star
id|i2o_connector_type
(braket
)braket
op_assign
(brace
l_string|&quot;OTHER&quot;
comma
l_string|&quot;UNKNOWN&quot;
comma
l_string|&quot;AUI&quot;
comma
l_string|&quot;UTP&quot;
comma
l_string|&quot;BNC&quot;
comma
l_string|&quot;RJ45&quot;
comma
l_string|&quot;STP DB9&quot;
comma
l_string|&quot;FIBER MIC&quot;
comma
l_string|&quot;APPLE AUI&quot;
comma
l_string|&quot;MII&quot;
comma
l_string|&quot;DB9&quot;
comma
l_string|&quot;HSSDC&quot;
comma
l_string|&quot;DUPLEX SC FIBER&quot;
comma
l_string|&quot;DUPLEX ST FIBER&quot;
comma
l_string|&quot;TNC/BNC&quot;
comma
l_string|&quot;HW DEFAULT&quot;
)brace
suffix:semicolon
r_switch
c_cond
(paren
id|conn
)paren
(brace
r_case
l_int|0x00000000
suffix:colon
id|idx
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000001
suffix:colon
id|idx
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000002
suffix:colon
id|idx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000003
suffix:colon
id|idx
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000004
suffix:colon
id|idx
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000005
suffix:colon
id|idx
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000006
suffix:colon
id|idx
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000007
suffix:colon
id|idx
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000008
suffix:colon
id|idx
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000009
suffix:colon
id|idx
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000A
suffix:colon
id|idx
op_assign
l_int|10
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000B
suffix:colon
id|idx
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000C
suffix:colon
id|idx
op_assign
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000D
suffix:colon
id|idx
op_assign
l_int|13
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000E
suffix:colon
id|idx
op_assign
l_int|14
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0xFFFFFFFF
suffix:colon
id|idx
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|i2o_connector_type
(braket
id|idx
)braket
suffix:semicolon
)brace
DECL|function|i2o_get_connection_type
r_const
r_char
op_star
id|i2o_get_connection_type
c_func
(paren
r_int
id|conn
)paren
(brace
r_int
id|idx
op_assign
l_int|0
suffix:semicolon
r_static
r_char
op_star
id|i2o_connection_type
(braket
)braket
op_assign
(brace
l_string|&quot;Unknown&quot;
comma
l_string|&quot;AUI&quot;
comma
l_string|&quot;10BASE5&quot;
comma
l_string|&quot;FIORL&quot;
comma
l_string|&quot;10BASE2&quot;
comma
l_string|&quot;10BROAD36&quot;
comma
l_string|&quot;10BASE-T&quot;
comma
l_string|&quot;10BASE-FP&quot;
comma
l_string|&quot;10BASE-FB&quot;
comma
l_string|&quot;10BASE-FL&quot;
comma
l_string|&quot;100BASE-TX&quot;
comma
l_string|&quot;100BASE-FX&quot;
comma
l_string|&quot;100BASE-T4&quot;
comma
l_string|&quot;1000BASE-SX&quot;
comma
l_string|&quot;1000BASE-LX&quot;
comma
l_string|&quot;1000BASE-CX&quot;
comma
l_string|&quot;1000BASE-T&quot;
comma
l_string|&quot;100VG-ETHERNET&quot;
comma
l_string|&quot;100VG-TOKEN RING&quot;
comma
l_string|&quot;4MBIT TOKEN RING&quot;
comma
l_string|&quot;16 Mb Token Ring&quot;
comma
l_string|&quot;125 MBAUD FDDI&quot;
comma
l_string|&quot;Point-to-point&quot;
comma
l_string|&quot;Arbitrated loop&quot;
comma
l_string|&quot;Public loop&quot;
comma
l_string|&quot;Fabric&quot;
comma
l_string|&quot;Emulation&quot;
comma
l_string|&quot;Other&quot;
comma
l_string|&quot;HW default&quot;
)brace
suffix:semicolon
r_switch
c_cond
(paren
id|conn
)paren
(brace
r_case
id|I2O_LAN_UNKNOWN
suffix:colon
id|idx
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_AUI
suffix:colon
id|idx
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE5
suffix:colon
id|idx
op_assign
l_int|2
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FIORL
suffix:colon
id|idx
op_assign
l_int|3
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE2
suffix:colon
id|idx
op_assign
l_int|4
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BROAD36
suffix:colon
id|idx
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_T
suffix:colon
id|idx
op_assign
l_int|6
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FP
suffix:colon
id|idx
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FB
suffix:colon
id|idx
op_assign
l_int|8
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FL
suffix:colon
id|idx
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_TX
suffix:colon
id|idx
op_assign
l_int|10
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_FX
suffix:colon
id|idx
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_T4
suffix:colon
id|idx
op_assign
l_int|12
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_SX
suffix:colon
id|idx
op_assign
l_int|13
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_LX
suffix:colon
id|idx
op_assign
l_int|14
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_CX
suffix:colon
id|idx
op_assign
l_int|15
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_T
suffix:colon
id|idx
op_assign
l_int|16
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100VG_ETHERNET
suffix:colon
id|idx
op_assign
l_int|17
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100VG_TR
suffix:colon
id|idx
op_assign
l_int|18
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_4MBIT
suffix:colon
id|idx
op_assign
l_int|19
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_16MBIT
suffix:colon
id|idx
op_assign
l_int|20
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_125MBAUD
suffix:colon
id|idx
op_assign
l_int|21
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_POINT_POINT
suffix:colon
id|idx
op_assign
l_int|22
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_ARB_LOOP
suffix:colon
id|idx
op_assign
l_int|23
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_PUBLIC_LOOP
suffix:colon
id|idx
op_assign
l_int|24
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FABRIC
suffix:colon
id|idx
op_assign
l_int|25
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_EMULATION
suffix:colon
id|idx
op_assign
l_int|26
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_OTHER
suffix:colon
id|idx
op_assign
l_int|27
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_DEFAULT
suffix:colon
id|idx
op_assign
l_int|28
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|i2o_connection_type
(braket
id|idx
)braket
suffix:semicolon
)brace
multiline_comment|/* LAN group 0000h - Device info (scalar) */
DECL|function|i2o_proc_read_lan_dev_info
r_int
id|i2o_proc_read_lan_dev_info
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|56
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u64
op_star
id|work64
op_assign
(paren
id|u64
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0000
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|56
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0000 LAN Device Info&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;LAN Type            : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work16
(braket
l_int|0
)braket
)paren
(brace
r_case
l_int|0x0030
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Ethernet, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0040
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100Base VG, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0050
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Token Ring, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0060
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FDDI, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0070
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Fibre Channel, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown type (0x%04x), &quot;
comma
id|work16
(braket
l_int|0
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work16
(braket
l_int|1
)braket
op_amp
l_int|0x00000001
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;emulated LAN, &quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;physical LAN port, &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work16
(braket
l_int|1
)braket
op_amp
l_int|0x00000002
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;full duplex&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;simplex&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Address format      : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work8
(braket
l_int|4
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IEEE 48bit&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FC IEEE&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown (0x%02x)&bslash;n&quot;
comma
id|work8
(braket
l_int|4
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;State               : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work8
(braket
l_int|5
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unclaimed&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Operational&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Suspended&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Resetting&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;ERROR: &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work16
(braket
l_int|3
)braket
op_amp
l_int|0x0001
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TxCU inoperative &quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work16
(braket
l_int|3
)braket
op_amp
l_int|0x0002
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RxCU inoperative &quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work16
(braket
l_int|3
)braket
op_amp
l_int|0x0004
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Local mem alloc &quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x06
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Operational no Rx&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x07
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Suspended no Rx&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unspecified&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Min packet size     : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max packet size     : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW address          : &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|16
)braket
comma
id|work8
(braket
l_int|17
)braket
comma
id|work8
(braket
l_int|18
)braket
comma
id|work8
(braket
l_int|19
)braket
comma
id|work8
(braket
l_int|20
)braket
comma
id|work8
(braket
l_int|21
)braket
comma
id|work8
(braket
l_int|22
)braket
comma
id|work8
(braket
l_int|23
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Tx wire speed   : %d bps&bslash;n&quot;
comma
(paren
r_int
)paren
id|work64
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Rx wire speed   : %d bps&bslash;n&quot;
comma
(paren
r_int
)paren
id|work64
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Min SDU packet size : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max SDU packet size : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|11
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0001h - MAC address table (scalar) */
DECL|function|i2o_proc_read_lan_mac_addr
r_int
id|i2o_proc_read_lan_mac_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|48
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0001
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|48
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0001 LAN MAC Address&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Active address          : &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|0
)braket
comma
id|work8
(braket
l_int|1
)braket
comma
id|work8
(braket
l_int|2
)braket
comma
id|work8
(braket
l_int|3
)braket
comma
id|work8
(braket
l_int|4
)braket
comma
id|work8
(braket
l_int|5
)braket
comma
id|work8
(braket
l_int|6
)braket
comma
id|work8
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current address         : &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|8
)braket
comma
id|work8
(braket
l_int|9
)braket
comma
id|work8
(braket
l_int|10
)braket
comma
id|work8
(braket
l_int|11
)braket
comma
id|work8
(braket
l_int|12
)braket
comma
id|work8
(braket
l_int|13
)braket
comma
id|work8
(braket
l_int|14
)braket
comma
id|work8
(braket
l_int|15
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Functional address mask : &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|16
)braket
comma
id|work8
(braket
l_int|17
)braket
comma
id|work8
(braket
l_int|18
)braket
comma
id|work8
(braket
l_int|19
)braket
comma
id|work8
(braket
l_int|20
)braket
comma
id|work8
(braket
l_int|21
)braket
comma
id|work8
(braket
l_int|22
)braket
comma
id|work8
(braket
l_int|23
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW/DDM capabilities : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Unicast packets supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000001
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Promiscuous mode supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Promiscuous multicast mode supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Broadcast reception disabling supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Multicast reception disabling supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Functional address disabling supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] MAC reporting supported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000800
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Filter mask : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Unicast packets disable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000001
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Promiscuous mode enable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Promiscuous multicast mode enable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Broadcast packets disable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Multicast packets disable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Functional address disable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000800
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    MAC reporting mode : &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000800
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Pass only priority MAC packets to user&bslash;n&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00001000
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Pass all MAC packets to user&bslash;n&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00001800
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Pass all MAC packets (promiscuous) to user&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Do not pass MAC packets to user&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Number of multicast addresses : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Perfect filtering for max %d multicast addresses&bslash;n&quot;
comma
id|work32
(braket
l_int|9
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Imperfect filtering for max %d multicast addresses&bslash;n&quot;
comma
id|work32
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0002h - Multicast MAC address table (table) */
DECL|function|i2o_proc_read_lan_mcast_addr
r_int
id|i2o_proc_read_lan_mcast_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
id|u8
id|mc_addr
(braket
l_int|8
)braket
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u8
id|mc_addr
(braket
l_int|256
)braket
(braket
l_int|8
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0002
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x002 LAN Multicast MAC Address&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|memcpy
c_func
(paren
id|mc_addr
comma
id|result.mc_addr
(braket
id|i
)braket
comma
l_int|8
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MC MAC address[%d]: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|i
comma
id|mc_addr
(braket
l_int|0
)braket
comma
id|mc_addr
(braket
l_int|1
)braket
comma
id|mc_addr
(braket
l_int|2
)braket
comma
id|mc_addr
(braket
l_int|3
)braket
comma
id|mc_addr
(braket
l_int|4
)braket
comma
id|mc_addr
(braket
l_int|5
)braket
comma
id|mc_addr
(braket
l_int|6
)braket
comma
id|mc_addr
(braket
l_int|7
)braket
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0003h - Batch Control (scalar) */
DECL|function|i2o_proc_read_lan_batch_control
r_int
id|i2o_proc_read_lan_batch_control
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|9
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0003
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|9
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0003 LAN Batch Control&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Batch mode &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|0
)braket
op_amp
l_int|0x00000001
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;disabled&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;enabled&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|0
)braket
op_amp
l_int|0x00000002
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; (current setting)&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|0
)braket
op_amp
l_int|0x00000004
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, forced&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, toggle&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Rx batch count : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Rx batch delay : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Tx batch delay : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Tx batch count : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0004h - LAN Operation (scalar) */
DECL|function|i2o_proc_read_lan_operation
r_int
id|i2o_proc_read_lan_operation
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|5
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0004
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|20
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0004 LAN Operation&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Packet prepadding (32b words) : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Transmission error reporting  : %s&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|1
)braket
op_amp
l_int|1
)paren
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Bad packet handling           : %s&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|1
)braket
op_amp
l_int|0x2
)paren
ques
c_cond
l_string|&quot;by host&quot;
suffix:colon
l_string|&quot;by DDM&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Packet orphan limit           : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx modes : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW CRC supression&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW IPv4 checksum&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW TCP checksum&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW UDP checksum&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW RSVP checksum&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000800
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW ICMP checksum&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00001000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Loopback supression enable&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00002000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx modes : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] FCS in payload&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW IPv4 checksum validation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW TCP checksum validation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW UDP checksum validation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW RSVP checksum validation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000800
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] HW ICMP checksum validation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00001000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0005h - Media operation (scalar) */
DECL|function|i2o_proc_read_lan_media_operation
r_int
id|i2o_proc_read_lan_media_operation
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u32
id|connector_type
suffix:semicolon
id|u32
id|connection_type
suffix:semicolon
id|u64
id|current_tx_wire_speed
suffix:semicolon
id|u64
id|current_rx_wire_speed
suffix:semicolon
id|u8
id|duplex_mode
suffix:semicolon
id|u8
id|link_status
suffix:semicolon
id|u8
id|reserved
suffix:semicolon
id|u8
id|duplex_mode_target
suffix:semicolon
id|u32
id|connector_type_target
suffix:semicolon
id|u32
id|connection_type_target
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0005
comma
op_minus
l_int|1
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0005 LAN Media Operation&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Connector type         : %s&bslash;n&quot;
comma
id|i2o_get_connector_type
c_func
(paren
id|result.connector_type
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Connection type        : %s&bslash;n&quot;
comma
id|i2o_get_connection_type
c_func
(paren
id|result.connection_type
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Tx wire speed  : %d bps&bslash;n&quot;
comma
(paren
r_int
)paren
id|result.current_tx_wire_speed
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Rx wire speed  : %d bps&bslash;n&quot;
comma
(paren
r_int
)paren
id|result.current_rx_wire_speed
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Duplex mode            : %s duplex&bslash;n&quot;
comma
(paren
id|result.duplex_mode
)paren
ques
c_cond
l_string|&quot;Full&quot;
suffix:colon
l_string|&quot;Half&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Link status            : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.link_status
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Normal&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Failure&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Reset&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unspecified&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Duplex mode target     : &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|result.duplex_mode_target
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Half duplex&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Full duplex&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Connector type target  : %s&bslash;n&quot;
comma
id|i2o_get_connector_type
c_func
(paren
id|result.connector_type_target
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Connection type target : %s&bslash;n&quot;
comma
id|i2o_get_connection_type
c_func
(paren
id|result.connection_type_target
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0006h - Alternate address (table) (optional) */
DECL|function|i2o_proc_read_lan_alt_addr
r_int
id|i2o_proc_read_lan_alt_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
id|u8
id|alt_addr
(braket
l_int|8
)braket
suffix:semicolon
r_struct
(brace
id|u16
id|result_count
suffix:semicolon
id|u16
id|pad
suffix:semicolon
id|u16
id|block_size
suffix:semicolon
id|u8
id|block_status
suffix:semicolon
id|u8
id|error_info_size
suffix:semicolon
id|u16
id|row_count
suffix:semicolon
id|u16
id|more_flag
suffix:semicolon
id|u8
id|alt_addr
(braket
l_int|256
)braket
(braket
l_int|8
)braket
suffix:semicolon
)brace
id|result
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table
c_func
(paren
id|I2O_PARAMS_TABLE_GET
comma
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0006
comma
op_minus
l_int|1
comma
l_int|NULL
comma
l_int|0
comma
op_amp
id|result
comma
r_sizeof
(paren
id|result
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0006 LAN Alternate Address (optional)&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|result.row_count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|memcpy
c_func
(paren
id|alt_addr
comma
id|result.alt_addr
(braket
id|i
)braket
comma
l_int|8
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Alternate address[%d]: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|i
comma
id|alt_addr
(braket
l_int|0
)braket
comma
id|alt_addr
(braket
l_int|1
)braket
comma
id|alt_addr
(braket
l_int|2
)braket
comma
id|alt_addr
(braket
l_int|3
)braket
comma
id|alt_addr
(braket
l_int|4
)braket
comma
id|alt_addr
(braket
l_int|5
)braket
comma
id|alt_addr
(braket
l_int|6
)braket
comma
id|alt_addr
(braket
l_int|7
)braket
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0007h - Transmit info (scalar) */
DECL|function|i2o_proc_read_lan_tx_info
r_int
id|i2o_proc_read_lan_tx_info
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|8
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0007
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|8
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0007 LAN Transmit Info&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Tx Max SG elements per packet : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx Max SG elements per chain  : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx Max outstanding packets    : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx Max packets per request    : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx modes : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] No DA in SGL&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] CRC suppression&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] MAC insertion&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000010
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] RIF insertion&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000020
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] IPv4 checksum generation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] TCP checksum generation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] UDP checksum generation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] RSVP checksum generation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000800
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] ICMP checksum generation&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00001000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Loopback enabled&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00010000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] Loopback suppression enabled&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00020000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0008h - Receive info (scalar) */
DECL|function|i2o_proc_read_lan_rx_info
r_int
id|i2o_proc_read_lan_rx_info
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|8
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0008
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|8
op_star
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0008 LAN Receive Info&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Rx Max size of chain element : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx Max Buckets               : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx Max Buckets in Reply      : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx Max Packets in Bucket     : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx Max Buckets in Post       : %d&bslash;n&quot;
comma
id|work32
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx Modes : 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] FCS reception&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|2
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] IPv4 checksum validation &bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|2
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] TCP checksum validation &bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|2
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] UDP checksum validation &bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|2
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] RSVP checksum validation &bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|2
)braket
op_amp
l_int|0x00000800
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    [%s] ICMP checksum validation &bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|2
)braket
op_amp
l_int|0x00001000
)paren
ques
c_cond
l_string|&quot;+&quot;
suffix:colon
l_string|&quot;-&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_report_opt_field
r_static
r_int
id|i2o_report_opt_field
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
id|field_name
comma
r_int
id|field_nbr
comma
r_int
id|supp_fields
comma
id|u64
op_star
id|value
)paren
(brace
r_if
c_cond
(paren
id|supp_fields
op_amp
(paren
l_int|1
op_lshift
id|field_nbr
)paren
)paren
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%-24s : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|field_name
comma
id|U64_VAL
c_func
(paren
id|value
)paren
)paren
suffix:semicolon
r_else
r_return
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%-24s : Not supported&bslash;n&quot;
comma
id|field_name
)paren
suffix:semicolon
)brace
multiline_comment|/* LAN group 0100h - LAN Historical statistics (scalar) */
multiline_comment|/* LAN group 0180h - Supported Optional Historical Statistics (scalar) */
multiline_comment|/* LAN group 0182h - Optional Non Media Specific Transmit Historical Statistics (scalar) */
multiline_comment|/* LAN group 0183h - Optional Non Media Specific Receive Historical Statistics (scalar) */
DECL|function|i2o_proc_read_lan_hist_stats
r_int
id|i2o_proc_read_lan_hist_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u64
id|tx_packets
suffix:semicolon
id|u64
id|tx_bytes
suffix:semicolon
id|u64
id|rx_packets
suffix:semicolon
id|u64
id|rx_bytes
suffix:semicolon
id|u64
id|tx_errors
suffix:semicolon
id|u64
id|rx_errors
suffix:semicolon
id|u64
id|rx_dropped
suffix:semicolon
id|u64
id|adapter_resets
suffix:semicolon
id|u64
id|adapter_suspends
suffix:semicolon
)brace
id|stats
suffix:semicolon
singleline_comment|// 0x0100
r_static
id|u64
id|supp_groups
(braket
l_int|4
)braket
suffix:semicolon
singleline_comment|// 0x0180
r_struct
(brace
id|u64
id|tx_retries
suffix:semicolon
id|u64
id|tx_directed_bytes
suffix:semicolon
id|u64
id|tx_directed_packets
suffix:semicolon
id|u64
id|tx_multicast_bytes
suffix:semicolon
id|u64
id|tx_multicast_packets
suffix:semicolon
id|u64
id|tx_broadcast_bytes
suffix:semicolon
id|u64
id|tx_broadcast_packets
suffix:semicolon
id|u64
id|tx_group_addr_packets
suffix:semicolon
id|u64
id|tx_short_packets
suffix:semicolon
)brace
id|tx_stats
suffix:semicolon
singleline_comment|// 0x0182
r_struct
(brace
id|u64
id|rx_crc_errors
suffix:semicolon
id|u64
id|rx_directed_bytes
suffix:semicolon
id|u64
id|rx_directed_packets
suffix:semicolon
id|u64
id|rx_multicast_bytes
suffix:semicolon
id|u64
id|rx_multicast_packets
suffix:semicolon
id|u64
id|rx_broadcast_bytes
suffix:semicolon
id|u64
id|rx_broadcast_packets
suffix:semicolon
id|u64
id|rx_group_addr_packets
suffix:semicolon
id|u64
id|rx_short_packets
suffix:semicolon
id|u64
id|rx_long_packets
suffix:semicolon
id|u64
id|rx_runt_packets
suffix:semicolon
)brace
id|rx_stats
suffix:semicolon
singleline_comment|// 0x0183
r_struct
(brace
id|u64
id|ipv4_generate
suffix:semicolon
id|u64
id|ipv4_validate_success
suffix:semicolon
id|u64
id|ipv4_validate_errors
suffix:semicolon
id|u64
id|tcp_generate
suffix:semicolon
id|u64
id|tcp_validate_success
suffix:semicolon
id|u64
id|tcp_validate_errors
suffix:semicolon
id|u64
id|udp_generate
suffix:semicolon
id|u64
id|udp_validate_success
suffix:semicolon
id|u64
id|udp_validate_errors
suffix:semicolon
id|u64
id|rsvp_generate
suffix:semicolon
id|u64
id|rsvp_validate_success
suffix:semicolon
id|u64
id|rsvp_validate_errors
suffix:semicolon
id|u64
id|icmp_generate
suffix:semicolon
id|u64
id|icmp_validate_success
suffix:semicolon
id|u64
id|icmp_validate_errors
suffix:semicolon
)brace
id|chksum_stats
suffix:semicolon
singleline_comment|// 0x0184
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0100
comma
op_minus
l_int|1
comma
op_amp
id|stats
comma
r_sizeof
(paren
id|stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x100 LAN Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx packets       : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_packets
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx bytes         : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_bytes
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx packets       : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.rx_packets
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx bytes         : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.rx_bytes
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx errors        : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_errors
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx errors        : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.rx_errors
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx dropped       : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.rx_dropped
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Adapter resets   : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.adapter_resets
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Adapter suspends : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.adapter_suspends
)paren
)paren
suffix:semicolon
multiline_comment|/* Optional statistics follows */
multiline_comment|/* Get 0x0180 to see which optional groups/fields are supported */
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0180
comma
op_minus
l_int|1
comma
op_amp
id|supp_groups
comma
r_sizeof
(paren
id|supp_groups
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x180 LAN Supported Optional Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_if
c_cond
(paren
id|supp_groups
(braket
l_int|1
)braket
)paren
multiline_comment|/* 0x0182 */
(brace
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0182
comma
op_minus
l_int|1
comma
op_amp
id|tx_stats
comma
r_sizeof
(paren
id|tx_stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x182 LAN Optional Tx Historical Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;==== Optional TX statistics (group 0182h)&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx RetryCount&quot;
comma
l_int|0
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_retries
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx DirectedBytes&quot;
comma
l_int|1
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_directed_bytes
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx DirectedPackets&quot;
comma
l_int|2
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_directed_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx MulticastBytes&quot;
comma
l_int|3
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_multicast_bytes
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx MulticastPackets&quot;
comma
l_int|4
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_multicast_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx BroadcastBytes&quot;
comma
l_int|5
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_broadcast_bytes
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx BroadcastPackets&quot;
comma
l_int|6
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_broadcast_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx TotalGroupAddrPackets&quot;
comma
l_int|7
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_group_addr_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx TotalPacketsTooShort&quot;
comma
l_int|8
comma
id|supp_groups
(braket
l_int|1
)braket
comma
op_amp
id|tx_stats.tx_short_packets
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|supp_groups
(braket
l_int|2
)braket
)paren
multiline_comment|/* 0x0183 */
(brace
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0183
comma
op_minus
l_int|1
comma
op_amp
id|rx_stats
comma
r_sizeof
(paren
id|rx_stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x183 LAN Optional Rx Historical Stats&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;==== Optional RX statistics (group 0183h)&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx CRCErrorCount&quot;
comma
l_int|0
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_crc_errors
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx DirectedBytes&quot;
comma
l_int|1
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_directed_bytes
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx DirectedPackets&quot;
comma
l_int|2
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_directed_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx MulticastBytes&quot;
comma
l_int|3
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_multicast_bytes
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx MulticastPackets&quot;
comma
l_int|4
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_multicast_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx BroadcastBytes&quot;
comma
l_int|5
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_broadcast_bytes
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx BroadcastPackets&quot;
comma
l_int|6
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_broadcast_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx TotalGroupAddrPackets&quot;
comma
l_int|7
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_group_addr_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx TotalPacketsTooShort&quot;
comma
l_int|8
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_short_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx TotalPacketsTooLong&quot;
comma
l_int|9
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_long_packets
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx TotalPacketsRunt&quot;
comma
l_int|10
comma
id|supp_groups
(braket
l_int|2
)braket
comma
op_amp
id|rx_stats.rx_runt_packets
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|supp_groups
(braket
l_int|3
)braket
)paren
multiline_comment|/* 0x0184 */
(brace
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0184
comma
op_minus
l_int|1
comma
op_amp
id|chksum_stats
comma
r_sizeof
(paren
id|chksum_stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x184 LAN Optional Chksum Historical Stats&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;==== Optional CHKSUM statistics (group 0x0184)&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IPv4 Generate&quot;
comma
l_int|0
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.ipv4_generate
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IPv4 ValidateSuccess&quot;
comma
l_int|1
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.ipv4_validate_success
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IPv4 ValidateError&quot;
comma
l_int|2
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.ipv4_validate_errors
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TCP  Generate&quot;
comma
l_int|3
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.tcp_generate
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TCP  ValidateSuccess&quot;
comma
l_int|4
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.tcp_validate_success
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TCP  ValidateError&quot;
comma
l_int|5
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.tcp_validate_errors
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UDP  Generate&quot;
comma
l_int|6
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.udp_generate
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UDP  ValidateSuccess&quot;
comma
l_int|7
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.udp_validate_success
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UDP  ValidateError&quot;
comma
l_int|8
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.udp_validate_errors
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RSVP Generate&quot;
comma
l_int|9
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.rsvp_generate
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RSVP ValidateSuccess&quot;
comma
l_int|10
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.rsvp_validate_success
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RSVP ValidateError&quot;
comma
l_int|11
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.rsvp_validate_errors
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;ICMP Generate&quot;
comma
l_int|12
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.icmp_generate
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;ICMP ValidateSuccess&quot;
comma
l_int|13
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.icmp_validate_success
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;ICMP ValidateError&quot;
comma
l_int|14
comma
id|supp_groups
(braket
l_int|3
)braket
comma
op_amp
id|chksum_stats.icmp_validate_errors
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0200h - Required Ethernet Statistics (scalar) */
multiline_comment|/* LAN group 0280h - Optional Ethernet Statistics Supported (scalar) */
multiline_comment|/* LAN group 0281h - Optional Ethernet Historical Statistics (scalar) */
DECL|function|i2o_proc_read_lan_eth_stats
r_int
id|i2o_proc_read_lan_eth_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_int
id|token
suffix:semicolon
r_struct
(brace
id|u64
id|rx_align_errors
suffix:semicolon
id|u64
id|tx_one_collisions
suffix:semicolon
id|u64
id|tx_multiple_collisions
suffix:semicolon
id|u64
id|tx_deferred
suffix:semicolon
id|u64
id|tx_late_collisions
suffix:semicolon
id|u64
id|tx_max_collisions
suffix:semicolon
id|u64
id|tx_carrier_lost
suffix:semicolon
id|u64
id|tx_excessive_deferrals
suffix:semicolon
)brace
id|stats
suffix:semicolon
r_static
id|u64
id|supp_fields
suffix:semicolon
r_struct
(brace
id|u64
id|rx_overrun
suffix:semicolon
id|u64
id|tx_underrun
suffix:semicolon
id|u64
id|tx_heartbeat_failure
suffix:semicolon
)brace
id|hist_stats
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0200
comma
op_minus
l_int|1
comma
op_amp
id|stats
comma
r_sizeof
(paren
id|stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0200 LAN Ethernet Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx alignment errors    : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.rx_align_errors
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx one collisions      : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_one_collisions
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx multicollisions     : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_multiple_collisions
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx deferred            : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_deferred
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx late collisions     : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_late_collisions
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx max collisions      : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_max_collisions
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx carrier lost        : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_carrier_lost
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx excessive deferrals : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|stats.tx_excessive_deferrals
)paren
)paren
suffix:semicolon
multiline_comment|/* Optional Ethernet statistics follows  */
multiline_comment|/* Get 0x0280 to see which optional fields are supported */
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0280
comma
op_minus
l_int|1
comma
op_amp
id|supp_fields
comma
r_sizeof
(paren
id|supp_fields
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0280 LAN Supported Optional Ethernet Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_if
c_cond
(paren
id|supp_fields
)paren
multiline_comment|/* 0x0281 */
(brace
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0281
comma
op_minus
l_int|1
comma
op_amp
id|stats
comma
r_sizeof
(paren
id|stats
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0281 LAN Optional Ethernet Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;==== Optional ETHERNET statistics (group 0x0281)&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx Overrun&quot;
comma
l_int|0
comma
id|supp_fields
comma
op_amp
id|hist_stats.rx_overrun
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx Underrun&quot;
comma
l_int|1
comma
id|supp_fields
comma
op_amp
id|hist_stats.tx_underrun
)paren
suffix:semicolon
id|len
op_add_assign
id|i2o_report_opt_field
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx HeartbeatFailure&quot;
comma
l_int|2
comma
id|supp_fields
comma
op_amp
id|hist_stats.tx_heartbeat_failure
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0300h - Required Token Ring Statistics (scalar) */
multiline_comment|/* LAN group 0380h, 0381h - Optional Statistics not yet defined (TODO) */
DECL|function|i2o_proc_read_lan_tr_stats
r_int
id|i2o_proc_read_lan_tr_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u64
id|work64
(braket
l_int|13
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
r_static
r_char
op_star
id|ring_status
(braket
)braket
op_assign
(brace
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;Ring Recovery&quot;
comma
l_string|&quot;Single Station&quot;
comma
l_string|&quot;Counter Overflow&quot;
comma
l_string|&quot;Remove Received&quot;
comma
l_string|&quot;&quot;
comma
l_string|&quot;Auto-Removal Error 1&quot;
comma
l_string|&quot;Lobe Wire Fault&quot;
comma
l_string|&quot;Transmit Beacon&quot;
comma
l_string|&quot;Soft Error&quot;
comma
l_string|&quot;Hard Error&quot;
comma
l_string|&quot;Signal Loss&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0300
comma
op_minus
l_int|1
comma
op_amp
id|work64
comma
r_sizeof
(paren
id|work64
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0300 Token Ring Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;LineErrors          : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LostFrames          : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;ACError             : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TxAbortDelimiter    : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BursErrors          : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FrameCopiedErrors   : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|5
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FrequencyErrors     : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;InternalErrors      : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|7
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LastRingStatus      : %s&bslash;n&quot;
comma
id|ring_status
(braket
id|work64
(braket
l_int|8
)braket
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TokenError          : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|9
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UpstreamNodeAddress : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|10
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LastRingID          : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|11
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LastBeaconType      : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|12
)braket
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0400h - Required FDDI Statistics (scalar) */
multiline_comment|/* LAN group 0480h, 0481h - Optional Statistics, not yet defined (TODO) */
DECL|function|i2o_proc_read_lan_fddi_stats
r_int
id|i2o_proc_read_lan_fddi_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u64
id|work64
(braket
l_int|11
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
r_static
r_char
op_star
id|conf_state
(braket
)braket
op_assign
(brace
l_string|&quot;Isolated&quot;
comma
l_string|&quot;Local a&quot;
comma
l_string|&quot;Local b&quot;
comma
l_string|&quot;Local ab&quot;
comma
l_string|&quot;Local s&quot;
comma
l_string|&quot;Wrap a&quot;
comma
l_string|&quot;Wrap b&quot;
comma
l_string|&quot;Wrap ab&quot;
comma
l_string|&quot;Wrap s&quot;
comma
l_string|&quot;C-Wrap a&quot;
comma
l_string|&quot;C-Wrap b&quot;
comma
l_string|&quot;C-Wrap s&quot;
comma
l_string|&quot;Through&quot;
comma
)brace
suffix:semicolon
r_static
r_char
op_star
id|ring_state
(braket
)braket
op_assign
(brace
l_string|&quot;Isolated&quot;
comma
l_string|&quot;Non-op&quot;
comma
l_string|&quot;Rind-op&quot;
comma
l_string|&quot;Detect&quot;
comma
l_string|&quot;Non-op-Dup&quot;
comma
l_string|&quot;Ring-op-Dup&quot;
comma
l_string|&quot;Directed&quot;
comma
l_string|&quot;Trace&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|link_state
(braket
)braket
op_assign
(brace
l_string|&quot;Off&quot;
comma
l_string|&quot;Break&quot;
comma
l_string|&quot;Trace&quot;
comma
l_string|&quot;Connect&quot;
comma
l_string|&quot;Next&quot;
comma
l_string|&quot;Signal&quot;
comma
l_string|&quot;Join&quot;
comma
l_string|&quot;Verify&quot;
comma
l_string|&quot;Active&quot;
comma
l_string|&quot;Maintenance&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;lct_data.tid
comma
l_int|0x0400
comma
op_minus
l_int|1
comma
op_amp
id|work64
comma
r_sizeof
(paren
id|work64
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|i2o_report_query_status
c_func
(paren
id|buf
op_plus
id|len
comma
id|token
comma
l_string|&quot;0x0400 FDDI Required Statistics&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;ConfigurationState : %s&bslash;n&quot;
comma
id|conf_state
(braket
id|work64
(braket
l_int|0
)braket
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UpstreamNode       : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DownStreamNode     : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FrameErrors        : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FramesLost         : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RingMgmtState      : %s&bslash;n&quot;
comma
id|ring_state
(braket
id|work64
(braket
l_int|5
)braket
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LCTFailures        : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LEMRejects         : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|7
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LEMCount           : &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|8
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LConnectionState   : %s&bslash;n&quot;
comma
id|link_state
(braket
id|work64
(braket
l_int|9
)braket
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_create_entries
r_static
r_int
id|i2o_proc_create_entries
c_func
(paren
r_void
op_star
id|data
comma
id|i2o_proc_entry
op_star
id|pentry
comma
r_struct
id|proc_dir_entry
op_star
id|parent
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|ent
suffix:semicolon
r_while
c_loop
(paren
id|pentry-&gt;name
op_ne
l_int|NULL
)paren
(brace
id|ent
op_assign
id|create_proc_entry
c_func
(paren
id|pentry-&gt;name
comma
id|pentry-&gt;mode
comma
id|parent
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ent
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|ent-&gt;data
op_assign
id|data
suffix:semicolon
id|ent-&gt;read_proc
op_assign
id|pentry-&gt;read_proc
suffix:semicolon
id|ent-&gt;write_proc
op_assign
id|pentry-&gt;write_proc
suffix:semicolon
id|ent-&gt;nlink
op_assign
l_int|1
suffix:semicolon
id|pentry
op_increment
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_proc_remove_entries
r_static
r_void
id|i2o_proc_remove_entries
c_func
(paren
id|i2o_proc_entry
op_star
id|pentry
comma
r_struct
id|proc_dir_entry
op_star
id|parent
)paren
(brace
r_while
c_loop
(paren
id|pentry-&gt;name
op_ne
l_int|NULL
)paren
(brace
id|remove_proc_entry
c_func
(paren
id|pentry-&gt;name
comma
id|parent
)paren
suffix:semicolon
id|pentry
op_increment
suffix:semicolon
)brace
)brace
DECL|function|i2o_proc_add_controller
r_static
r_int
id|i2o_proc_add_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
id|pctrl
comma
r_struct
id|proc_dir_entry
op_star
id|root
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|dir
comma
op_star
id|dir1
suffix:semicolon
r_struct
id|i2o_device
op_star
id|dev
suffix:semicolon
r_char
id|buff
(braket
l_int|10
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;iop%d&quot;
comma
id|pctrl-&gt;unit
)paren
suffix:semicolon
id|dir
op_assign
id|proc_mkdir
c_func
(paren
id|buff
comma
id|root
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dir
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|pctrl-&gt;proc_entry
op_assign
id|dir
suffix:semicolon
id|i2o_proc_create_entries
c_func
(paren
id|pctrl
comma
id|generic_iop_entries
comma
id|dir
)paren
suffix:semicolon
r_for
c_loop
(paren
id|dev
op_assign
id|pctrl-&gt;devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
(brace
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;%0#5x&quot;
comma
id|dev-&gt;lct_data.tid
)paren
suffix:semicolon
id|dir1
op_assign
id|proc_mkdir
c_func
(paren
id|buff
comma
id|dir
)paren
suffix:semicolon
id|dev-&gt;proc_entry
op_assign
id|dir1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dir1
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;i2o_proc: Could not allocate proc dir&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|i2o_proc_add_device
c_func
(paren
id|dev
comma
id|dir1
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_proc_new_dev
r_void
id|i2o_proc_new_dev
c_func
(paren
r_struct
id|i2o_controller
op_star
id|c
comma
r_struct
id|i2o_device
op_star
id|d
)paren
(brace
r_char
id|buff
(braket
l_int|10
)braket
suffix:semicolon
macro_line|#ifdef DRIVERDEBUG
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Adding new device to /proc/i2o/iop%d&bslash;n&quot;
comma
id|c-&gt;unit
)paren
suffix:semicolon
macro_line|#endif
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;%0#5x&quot;
comma
id|d-&gt;lct_data.tid
)paren
suffix:semicolon
id|d-&gt;proc_entry
op_assign
id|proc_mkdir
c_func
(paren
id|buff
comma
id|c-&gt;proc_entry
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|d-&gt;proc_entry
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;i2o: Could not allocate procdir!&bslash;n&quot;
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|i2o_proc_add_device
c_func
(paren
id|d
comma
id|d-&gt;proc_entry
)paren
suffix:semicolon
)brace
DECL|function|i2o_proc_add_device
r_void
id|i2o_proc_add_device
c_func
(paren
r_struct
id|i2o_device
op_star
id|dev
comma
r_struct
id|proc_dir_entry
op_star
id|dir
)paren
(brace
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|generic_dev_entries
comma
id|dir
)paren
suffix:semicolon
multiline_comment|/* Inform core that we want updates about this device&squot;s status */
id|i2o_device_notify_on
c_func
(paren
id|dev
comma
op_amp
id|i2o_proc_handler
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dev-&gt;lct_data.class_id
)paren
(brace
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|rbs_dev_entries
comma
id|dir
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|lan_entries
comma
id|dir
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dev-&gt;lct_data.sub_class
)paren
(brace
r_case
id|I2O_LAN_ETHERNET
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|lan_eth_entries
comma
id|dir
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FDDI
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|lan_fddi_entries
comma
id|dir
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_TR
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|lan_tr_entries
comma
id|dir
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
DECL|function|i2o_proc_remove_controller
r_static
r_void
id|i2o_proc_remove_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
id|pctrl
comma
r_struct
id|proc_dir_entry
op_star
id|parent
)paren
(brace
r_char
id|buff
(braket
l_int|10
)braket
suffix:semicolon
r_struct
id|i2o_device
op_star
id|dev
suffix:semicolon
multiline_comment|/* Remove unused device entries */
r_for
c_loop
(paren
id|dev
op_assign
id|pctrl-&gt;devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
(brace
id|i2o_proc_remove_device
c_func
(paren
id|dev
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|atomic_read
c_func
(paren
op_amp
id|pctrl-&gt;proc_entry-&gt;count
)paren
)paren
(brace
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;iop%d&quot;
comma
id|pctrl-&gt;unit
)paren
suffix:semicolon
id|i2o_proc_remove_entries
c_func
(paren
id|generic_iop_entries
comma
id|pctrl-&gt;proc_entry
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
id|buff
comma
id|parent
)paren
suffix:semicolon
id|pctrl-&gt;proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|i2o_proc_remove_device
r_void
id|i2o_proc_remove_device
c_func
(paren
r_struct
id|i2o_device
op_star
id|dev
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|de
op_assign
id|dev-&gt;proc_entry
suffix:semicolon
r_char
id|dev_id
(braket
l_int|10
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|dev_id
comma
l_string|&quot;%0#5x&quot;
comma
id|dev-&gt;lct_data.tid
)paren
suffix:semicolon
id|i2o_device_notify_off
c_func
(paren
id|dev
comma
op_amp
id|i2o_proc_handler
)paren
suffix:semicolon
multiline_comment|/* Would it be safe to remove _files_ even if they are in use? */
r_if
c_cond
(paren
(paren
id|de
)paren
op_logical_and
(paren
op_logical_neg
id|atomic_read
c_func
(paren
op_amp
id|de-&gt;count
)paren
)paren
)paren
(brace
id|i2o_proc_remove_entries
c_func
(paren
id|generic_dev_entries
comma
id|de
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dev-&gt;lct_data.class_id
)paren
(brace
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
id|i2o_proc_remove_entries
c_func
(paren
id|rbs_dev_entries
comma
id|de
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
(brace
id|i2o_proc_remove_entries
c_func
(paren
id|lan_entries
comma
id|de
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dev-&gt;lct_data.sub_class
)paren
(brace
r_case
id|I2O_LAN_ETHERNET
suffix:colon
id|i2o_proc_remove_entries
c_func
(paren
id|lan_eth_entries
comma
id|de
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FDDI
suffix:colon
id|i2o_proc_remove_entries
c_func
(paren
id|lan_fddi_entries
comma
id|de
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_TR
suffix:colon
id|i2o_proc_remove_entries
c_func
(paren
id|lan_tr_entries
comma
id|de
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|remove_proc_entry
c_func
(paren
id|dev_id
comma
id|dev-&gt;controller-&gt;proc_entry
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|i2o_proc_dev_del
r_void
id|i2o_proc_dev_del
c_func
(paren
r_struct
id|i2o_controller
op_star
id|c
comma
r_struct
id|i2o_device
op_star
id|d
)paren
(brace
macro_line|#ifdef DRIVERDEBUG
id|printk
c_func
(paren
id|KERN_INFO
comma
l_string|&quot;Deleting device %d from iop%d&bslash;n&quot;
comma
id|d-&gt;lct_data.tid
comma
id|c-&gt;unit
)paren
suffix:semicolon
macro_line|#endif
id|i2o_proc_remove_device
c_func
(paren
id|d
)paren
suffix:semicolon
)brace
DECL|function|create_i2o_procfs
r_static
r_int
id|create_i2o_procfs
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2o_controller
op_star
id|pctrl
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
id|i2o_proc_dir_root
op_assign
id|proc_mkdir
c_func
(paren
l_string|&quot;i2o&quot;
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2o_proc_dir_root
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_I2O_CONTROLLERS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pctrl
op_assign
id|i2o_find_controller
c_func
(paren
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pctrl
)paren
(brace
id|i2o_proc_add_controller
c_func
(paren
id|pctrl
comma
id|i2o_proc_dir_root
)paren
suffix:semicolon
id|i2o_unlock_controller
c_func
(paren
id|pctrl
)paren
suffix:semicolon
)brace
)brace
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|destroy_i2o_procfs
r_static
r_int
id|__exit
id|destroy_i2o_procfs
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2o_controller
op_star
id|pctrl
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_I2O_CONTROLLERS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pctrl
op_assign
id|i2o_find_controller
c_func
(paren
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pctrl
)paren
(brace
id|i2o_proc_remove_controller
c_func
(paren
id|pctrl
comma
id|i2o_proc_dir_root
)paren
suffix:semicolon
id|i2o_unlock_controller
c_func
(paren
id|pctrl
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|atomic_read
c_func
(paren
op_amp
id|i2o_proc_dir_root-&gt;count
)paren
)paren
(brace
id|remove_proc_entry
c_func
(paren
l_string|&quot;i2o&quot;
comma
l_int|0
)paren
suffix:semicolon
)brace
r_else
r_return
op_minus
l_int|1
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_proc_init
r_int
id|__init
id|i2o_proc_init
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|i2o_install_handler
c_func
(paren
op_amp
id|i2o_proc_handler
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;i2o_proc: Unable to install PROC handler.&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|create_i2o_procfs
c_func
(paren
)paren
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Deepak Saxena&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;I2O procfs Handler&quot;
)paren
suffix:semicolon
DECL|function|i2o_proc_exit
r_static
r_void
id|__exit
id|i2o_proc_exit
c_func
(paren
r_void
)paren
(brace
id|destroy_i2o_procfs
c_func
(paren
)paren
suffix:semicolon
id|i2o_remove_handler
c_func
(paren
op_amp
id|i2o_proc_handler
)paren
suffix:semicolon
)brace
macro_line|#ifdef MODULE
DECL|variable|i2o_proc_init
id|module_init
c_func
(paren
id|i2o_proc_init
)paren
suffix:semicolon
macro_line|#endif
DECL|variable|i2o_proc_exit
id|module_exit
c_func
(paren
id|i2o_proc_exit
)paren
suffix:semicolon
eof
