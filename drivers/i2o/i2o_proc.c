multiline_comment|/*&n; *   procfs handler for Linux I2O subsystem&n; *&n; *   Copyright (c) 1999 Intel Corporation&n; *   &n; *   Originally written by Deepak Saxena(deepak.saxena@intel.com)&n; *&n; *   This program is free software. You can redistribute it and/or&n; *   modify it under the terms of the GNU General Public License&n; *   as published by the Free Software Foundation; either version&n; *   2 of the License, or (at your option) any later version.&n; *&n; *   This is an initial test release. The code is based on the design&n; *   of the ide procfs system (drivers/block/ide-proc.c). Some code&n; *   taken from i2o-core module by Alan Cox.&n; *&n; *   DISCLAIMER: This code is still under development/test and may cause&n; *   your system to behave unpredictably.  Use at your own discretion.&n; *&n; *   LAN entries by Juha Siev&#xfffd;nen(Juha.Sievanen@cs.Helsinki.FI),&n; *   University of Helsinki, Department of Computer Science&n; *&n; */
multiline_comment|/*&n; * set tabstop=3&n; */
multiline_comment|/*&n; * TODO List&n; *&n; * - Add support for any version 2.0 spec changes once 2.0 IRTOS is&n; *   is available to test with&n; * - Clean up code to use official structure definitions &n; */
singleline_comment|// FIXME!
DECL|macro|FMT_U64_HEX
mdefine_line|#define FMT_U64_HEX &quot;0x%08x%08x&quot;
DECL|macro|U64_VAL
mdefine_line|#define U64_VAL(pu64) *((u32*)(pu64)+1), *((u32*)(pu64))
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/i2o.h&gt;
macro_line|#include &lt;linux/proc_fs.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
macro_line|#include &lt;asm/spinlock.h&gt;
macro_line|#include &quot;i2o_proc.h&quot;
macro_line|#include &quot;i2o_lan.h&quot;
multiline_comment|/*&n; * Structure used to define /proc entries&n; */
DECL|struct|_i2o_proc_entry_t
r_typedef
r_struct
id|_i2o_proc_entry_t
(brace
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
multiline_comment|/* entry name */
DECL|member|mode
id|mode_t
id|mode
suffix:semicolon
multiline_comment|/* mode */
DECL|member|read_proc
id|read_proc_t
op_star
id|read_proc
suffix:semicolon
multiline_comment|/* read func */
DECL|member|write_proc
id|write_proc_t
op_star
id|write_proc
suffix:semicolon
multiline_comment|/* write func */
DECL|typedef|i2o_proc_entry
)brace
id|i2o_proc_entry
suffix:semicolon
DECL|variable|proc_context
r_static
r_int
id|proc_context
op_assign
l_int|0
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lct
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_hrt
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_stat
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_hw
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_dev
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_dev_name
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_ddm
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_uinfo
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|print_serial_number
c_func
(paren
r_char
op_star
comma
r_int
comma
id|u8
op_star
comma
r_int
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_create_entries
c_func
(paren
r_void
op_star
comma
id|i2o_proc_entry
op_star
id|p
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_remove_entries
c_func
(paren
id|i2o_proc_entry
op_star
id|p
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_add_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_remove_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
comma
r_struct
id|proc_dir_entry
op_star
)paren
suffix:semicolon
r_static
r_int
id|create_i2o_procfs
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_int
id|destroy_i2o_procfs
c_func
(paren
r_void
)paren
suffix:semicolon
r_static
r_void
id|i2o_proc_reply
c_func
(paren
r_struct
id|i2o_handler
op_star
comma
r_struct
id|i2o_controller
op_star
comma
r_struct
id|i2o_message
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_dev_info
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_mac_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_curr_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
macro_line|#if 0
r_static
r_int
id|i2o_proc_read_lan_mcast_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
macro_line|#endif
r_static
r_int
id|i2o_proc_read_lan_batch_control
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_operation
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_media_operation
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
macro_line|#if 0
r_static
r_int
id|i2o_proc_read_lan_alt_addr
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
macro_line|#endif
r_static
r_int
id|i2o_proc_read_lan_tx_info
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_rx_info
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_hist_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_opt_tx_hist_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_opt_rx_hist_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
r_static
r_int
id|i2o_proc_read_lan_fddi_stats
c_func
(paren
r_char
op_star
comma
r_char
op_star
op_star
comma
id|off_t
comma
r_int
comma
r_int
op_star
comma
r_void
op_star
)paren
suffix:semicolon
macro_line|#if 0
multiline_comment|/* Do we really need this??? */
r_static
id|loff_t
id|i2o_proc_lseek
c_func
(paren
r_struct
id|file
op_star
id|file
comma
id|loff_t
id|off
comma
r_int
id|whence
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
DECL|variable|i2o_proc_dir_root
r_static
r_struct
id|proc_dir_entry
op_star
id|i2o_proc_dir_root
suffix:semicolon
multiline_comment|/*&n; * Message handler&n; */
DECL|variable|i2o_proc_handler
r_static
r_struct
id|i2o_handler
id|i2o_proc_handler
op_assign
(brace
(paren
r_void
op_star
)paren
id|i2o_proc_reply
comma
l_string|&quot;I2O procfs Layer&quot;
comma
l_int|0
)brace
suffix:semicolon
multiline_comment|/*&n; * IOP specific entries...write field just in case someone &n; * ever wants one.&n; */
DECL|variable|generic_iop_entries
r_static
id|i2o_proc_entry
id|generic_iop_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;hrt&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_hrt
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lct&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lct
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;stat&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_stat
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;hw&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_hw
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Device specific entries&n; */
DECL|variable|generic_dev_entries
r_static
id|i2o_proc_entry
id|generic_dev_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;dev_identity&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_dev
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;ddm_identity&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_ddm
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;user_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_uinfo
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; *  Storage unit specific entries (SCSI Periph, BS) with device names&n; */
DECL|variable|rbs_dev_entries
r_static
id|i2o_proc_entry
id|rbs_dev_entries
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;dev_name&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_dev_name
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|macro|SCSI_TABLE_SIZE
mdefine_line|#define SCSI_TABLE_SIZE&t;13
DECL|variable|scsi_devices
r_static
r_char
op_star
id|scsi_devices
(braket
)braket
op_assign
(brace
l_string|&quot;Direct-Access Read/Write&quot;
comma
l_string|&quot;Sequential-Access Storage&quot;
comma
l_string|&quot;Printer&quot;
comma
l_string|&quot;Processor&quot;
comma
l_string|&quot;WORM Device&quot;
comma
l_string|&quot;CD-ROM Device&quot;
comma
l_string|&quot;Scanner Device&quot;
comma
l_string|&quot;Optical Memory Device&quot;
comma
l_string|&quot;Medium Changer Device&quot;
comma
l_string|&quot;Communications Device&quot;
comma
l_string|&quot;Graphics Art Pre-Press Device&quot;
comma
l_string|&quot;Graphics Art Pre-Press Device&quot;
comma
l_string|&quot;Array Controller Device&quot;
)brace
suffix:semicolon
multiline_comment|/* private */
multiline_comment|/*&n; * LAN specific entries&n; * &n; * Should groups with r/w entries have their own subdirectory?&n; *&n; */
DECL|variable|lan_entries
r_static
id|i2o_proc_entry
id|lan_entries
(braket
)braket
op_assign
(brace
multiline_comment|/* LAN param groups 0000h-0008h */
(brace
l_string|&quot;lan_dev_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_dev_info
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_mac_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_mac_addr
comma
l_int|NULL
)brace
comma
macro_line|#if 0
(brace
l_string|&quot;lan_mcast_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
comma
id|i2o_proc_read_lan_mcast_addr
comma
l_int|NULL
)brace
comma
macro_line|#endif
(brace
l_string|&quot;lan_batch_ctrl&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
comma
id|i2o_proc_read_lan_batch_control
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_operation&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_operation
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_media_operation&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_media_operation
comma
l_int|NULL
)brace
comma
macro_line|#if 0
(brace
l_string|&quot;lan_alt_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_alt_addr
comma
l_int|NULL
)brace
comma
macro_line|#endif
(brace
l_string|&quot;lan_tx_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_tx_info
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_rx_info&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_rx_info
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_hist_stats
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_opt_tx_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_opt_tx_hist_stats
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_opt_rx_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_opt_rx_hist_stats
comma
l_int|NULL
)brace
comma
(brace
l_string|&quot;lan_fddi_stats&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
comma
id|i2o_proc_read_lan_fddi_stats
comma
l_int|NULL
)brace
comma
multiline_comment|/* some useful r/w entries, no write yet */
(brace
l_string|&quot;lan_curr_addr&quot;
comma
id|S_IFREG
op_or
id|S_IRUGO
op_or
id|S_IWUSR
comma
id|i2o_proc_read_lan_curr_addr
comma
l_int|NULL
)brace
comma
(brace
l_int|NULL
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|i2o_proc_token
r_static
id|u32
id|i2o_proc_token
op_assign
l_int|0
suffix:semicolon
DECL|variable|bus_strings
r_static
r_char
op_star
id|bus_strings
(braket
)braket
op_assign
(brace
l_string|&quot;Local Bus&quot;
comma
l_string|&quot;ISA&quot;
comma
l_string|&quot;EISA&quot;
comma
l_string|&quot;MCA&quot;
comma
l_string|&quot;PCI&quot;
comma
l_string|&quot;PCMCIA&quot;
comma
l_string|&quot;NUBUS&quot;
comma
l_string|&quot;CARDBUS&quot;
)brace
suffix:semicolon
DECL|variable|i2o_proc_lock
r_static
id|spinlock_t
id|i2o_proc_lock
op_assign
id|SPIN_LOCK_UNLOCKED
suffix:semicolon
DECL|function|i2o_proc_reply
r_void
id|i2o_proc_reply
c_func
(paren
r_struct
id|i2o_handler
op_star
id|phdlr
comma
r_struct
id|i2o_controller
op_star
id|pctrl
comma
r_struct
id|i2o_message
op_star
id|pmsg
)paren
(brace
id|i2o_proc_token
op_assign
id|I2O_POST_WAIT_OK
suffix:semicolon
)brace
DECL|function|i2o_proc_read_hrt
r_int
id|i2o_proc_read_hrt
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
id|pi2o_hrt
id|hrt
suffix:semicolon
id|u32
id|msg
(braket
l_int|6
)braket
suffix:semicolon
id|u32
op_star
id|workspace
suffix:semicolon
id|u32
id|bus
suffix:semicolon
r_int
id|count
suffix:semicolon
r_int
id|i
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|workspace
op_assign
id|kmalloc
c_func
(paren
l_int|2048
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|hrt
op_assign
(paren
id|pi2o_hrt
)paren
id|workspace
suffix:semicolon
r_if
c_cond
(paren
id|workspace
op_eq
l_int|NULL
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;No free memory for HRT buffer&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|memset
c_func
(paren
id|workspace
comma
l_int|0
comma
l_int|2048
)paren
suffix:semicolon
id|msg
(braket
l_int|0
)braket
op_assign
id|SIX_WORD_MSG_SIZE
op_or
id|SGL_OFFSET_4
suffix:semicolon
id|msg
(braket
l_int|1
)braket
op_assign
id|I2O_CMD_HRT_GET
op_lshift
l_int|24
op_or
id|HOST_TID
op_lshift
l_int|12
op_or
id|ADAPTER_TID
suffix:semicolon
id|msg
(braket
l_int|2
)braket
op_assign
(paren
id|u32
)paren
id|proc_context
suffix:semicolon
id|msg
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|msg
(braket
l_int|4
)braket
op_assign
(paren
l_int|0xD0000000
op_or
l_int|2048
)paren
suffix:semicolon
id|msg
(braket
l_int|5
)braket
op_assign
id|virt_to_phys
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|token
op_assign
id|i2o_post_wait
c_func
(paren
id|c
comma
id|ADAPTER_TID
comma
id|msg
comma
l_int|6
op_star
l_int|4
comma
op_amp
id|i2o_proc_token
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
op_eq
id|I2O_POST_WAIT_TIMEOUT
)paren
(brace
id|kfree
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for HRT&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hrt-&gt;hrt_version
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HRT table for controller is too new a version.&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|count
op_assign
id|hrt-&gt;num_entries
suffix:semicolon
r_if
c_cond
(paren
(paren
id|count
op_star
id|hrt-&gt;entry_len
op_plus
l_int|8
)paren
OG
l_int|2048
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;i2o_proc: HRT does not fit into buffer&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HRT table too big to fit in buffer.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HRT has %d entries of %d bytes each.&bslash;n&quot;
comma
id|count
comma
id|hrt-&gt;entry_len
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|count
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Entry %d:&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Adapter ID: %0#10x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|adapter_id
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Controlled by: %0#6x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|parent_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Bus#%d&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_num
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_type
op_ne
l_int|0x80
)paren
(brace
id|bus
op_assign
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus_type
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   %s Information&bslash;n&quot;
comma
id|bus_strings
(braket
id|bus
)braket
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|bus
)paren
(brace
r_case
id|I2O_BUS_LOCAL
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.local_bus.LbBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.local_bus.LbBaseMemoryAddress
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_ISA
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.IsaBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.IsaBaseMemoryAddress
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; CSN: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.isa_bus.CSN
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_EISA
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus.EisaBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus.EisaBaseMemoryAddress
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Slot: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.eisa_bus.EisaSlotNumber
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_MCA
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     IOBase: %0#6x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus.McaBaseIOPort
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; MemoryBase: %0#10x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus.McaBaseMemoryAddress
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Slot: %0#4x,&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.mca_bus.McaSlotNumber
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_BUS_PCI
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;     Bus: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciBusNumber
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Dev: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciDeviceNumber
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Func: %0#4x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciFunctionNumber
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Vendor: %0#6x&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciVendorID
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; Device: %0#6x&bslash;n&quot;
comma
id|hrt-&gt;hrt_entry
(braket
id|i
)braket
dot
id|bus.pci_bus.PciDeviceID
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;      Unsupported Bus Type&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Unknown Bus Type&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|kfree
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_lct
r_int
id|i2o_proc_read_lct
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
id|u32
id|msg
(braket
l_int|8
)braket
suffix:semicolon
id|u32
op_star
id|workspace
suffix:semicolon
id|pi2o_lct
id|lct
suffix:semicolon
multiline_comment|/* = (pi2o_lct)c-&gt;lct; */
r_int
id|entries
suffix:semicolon
r_int
id|token
suffix:semicolon
r_int
id|i
suffix:semicolon
DECL|macro|BUS_TABLE_SIZE
mdefine_line|#define BUS_TABLE_SIZE 3
r_static
r_char
op_star
id|bus_ports
(braket
)braket
op_assign
(brace
l_string|&quot;Generic Bus&quot;
comma
l_string|&quot;SCSI Bus&quot;
comma
l_string|&quot;Fibre Channel Bus&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|workspace
op_assign
id|kmalloc
c_func
(paren
l_int|8192
comma
id|GFP_KERNEL
)paren
suffix:semicolon
id|lct
op_assign
(paren
id|pi2o_lct
)paren
id|workspace
suffix:semicolon
r_if
c_cond
(paren
id|workspace
op_eq
l_int|NULL
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;No free memory for LCT buffer&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|memset
c_func
(paren
id|workspace
comma
l_int|0
comma
l_int|8192
)paren
suffix:semicolon
id|msg
(braket
l_int|0
)braket
op_assign
id|FOUR_WORD_MSG_SIZE
op_or
id|SGL_OFFSET_6
suffix:semicolon
id|msg
(braket
l_int|1
)braket
op_assign
id|I2O_CMD_LCT_NOTIFY
op_lshift
l_int|24
op_or
id|HOST_TID
op_lshift
l_int|12
op_or
id|ADAPTER_TID
suffix:semicolon
id|msg
(braket
l_int|2
)braket
op_assign
(paren
id|u32
)paren
id|proc_context
suffix:semicolon
id|msg
(braket
l_int|3
)braket
op_assign
l_int|0
suffix:semicolon
id|msg
(braket
l_int|4
)braket
op_assign
l_int|0xFFFFFFFF
suffix:semicolon
multiline_comment|/* All devices */
id|msg
(braket
l_int|5
)braket
op_assign
l_int|0x00000000
suffix:semicolon
multiline_comment|/* Report now */
id|msg
(braket
l_int|6
)braket
op_assign
l_int|0xD0000000
op_or
l_int|8192
suffix:semicolon
id|msg
(braket
l_int|7
)braket
op_assign
id|virt_to_bus
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|token
op_assign
id|i2o_post_wait
c_func
(paren
id|c
comma
id|ADAPTER_TID
comma
id|msg
comma
l_int|8
op_star
l_int|4
comma
op_amp
id|i2o_proc_token
comma
l_int|2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
op_eq
id|I2O_POST_WAIT_TIMEOUT
)paren
(brace
id|kfree
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for LCT&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|entries
op_assign
(paren
id|lct-&gt;table_size
op_minus
l_int|3
)paren
op_div
l_int|9
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;LCT contains %d %s&bslash;n&quot;
comma
id|entries
comma
id|entries
op_eq
l_int|1
ques
c_cond
l_string|&quot;entry&quot;
suffix:colon
l_string|&quot;entries&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|lct-&gt;boot_tid
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Boot Device @ ID %d&bslash;n&quot;
comma
id|lct-&gt;boot_tid
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|entries
suffix:semicolon
id|i
op_increment
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Entry %d&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  %s&quot;
comma
id|i2o_get_class_name
c_func
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|class_id
)paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; *&t;Classes which we&squot;ll print subclass info for&n;&t;&t; */
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|class_id
op_amp
l_int|0xFFF
)paren
(brace
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Direct-Access Read/Write&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: WORM Drive&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: CD-ROM Drive&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x07
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Optical Memory Device&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Unknown&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
r_switch
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
op_amp
l_int|0xFF
)paren
(brace
r_case
l_int|0x30
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Ethernet&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x40
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: 100base VG&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x50
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: IEEE 802.5/Token-Ring&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x60
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: ANSI X3T9.5 FDDI&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x70
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Fibre Channel&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Unknown Sub-Class&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_if
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
OL
id|SCSI_TABLE_SIZE
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: %s&quot;
comma
id|scsi_devices
(braket
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)braket
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Unknown Device Type&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_BUS_ADAPTER_PORT
suffix:colon
r_if
c_cond
(paren
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
OL
id|BUS_TABLE_SIZE
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: %s&quot;
comma
id|bus_ports
(braket
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|sub_class
)braket
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;: Unknown Bus Type&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Local TID: 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  User TID: 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|user_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Parent TID: 0x%03x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|parent_tid
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Identity Tag: 0x%x%x%x%x%x%x%x%x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|0
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|1
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|2
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|3
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|4
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|5
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|6
)braket
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|identity_tag
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Change Indicator: %0#10x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|change_ind
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;  Device Flags: %0#10x&bslash;n&quot;
comma
id|lct-&gt;lct_entry
(braket
id|i
)braket
dot
id|device_flags
)paren
suffix:semicolon
)brace
id|kfree
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_stat
r_int
id|i2o_proc_read_stat
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
id|u32
op_star
id|msg
suffix:semicolon
id|u32
id|m
suffix:semicolon
id|u8
op_star
id|workspace
suffix:semicolon
id|u16
op_star
id|work16
suffix:semicolon
id|u32
op_star
id|work32
suffix:semicolon
r_int
id|time
suffix:semicolon
r_char
id|prodstr
(braket
l_int|25
)braket
suffix:semicolon
r_int
id|version
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|workspace
op_assign
(paren
id|u8
op_star
)paren
id|kmalloc
c_func
(paren
l_int|88
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|workspace
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;No memory for status transfer&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|m
op_assign
id|I2O_POST_READ32
c_func
(paren
id|c
)paren
suffix:semicolon
r_if
c_cond
(paren
id|m
op_eq
l_int|0xFFFFFFFF
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Could not get inbound message frame from IOP!&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|msg
op_assign
(paren
id|u32
op_star
)paren
(paren
id|m
op_plus
id|c-&gt;mem_offset
)paren
suffix:semicolon
id|memset
c_func
(paren
id|workspace
comma
l_int|0
comma
l_int|88
)paren
suffix:semicolon
id|work32
op_assign
(paren
id|u32
op_star
)paren
id|workspace
suffix:semicolon
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|workspace
suffix:semicolon
id|msg
(braket
l_int|0
)braket
op_assign
id|NINE_WORD_MSG_SIZE
op_or
id|SGL_OFFSET_0
suffix:semicolon
id|msg
(braket
l_int|1
)braket
op_assign
id|I2O_CMD_STATUS_GET
op_lshift
l_int|24
op_or
id|HOST_TID
op_lshift
l_int|12
op_or
id|ADAPTER_TID
suffix:semicolon
id|msg
(braket
l_int|2
)braket
op_assign
id|msg
(braket
l_int|3
)braket
op_assign
id|msg
(braket
l_int|4
)braket
op_assign
id|msg
(braket
l_int|5
)braket
op_assign
l_int|0
suffix:semicolon
id|msg
(braket
l_int|6
)braket
op_assign
id|virt_to_phys
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|msg
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* FIXME: 64-bit */
id|msg
(braket
l_int|8
)braket
op_assign
l_int|88
suffix:semicolon
multiline_comment|/* &n;&t; * hmm...i2o_post_message should just take ptr to message, and &n;&t; * determine offset on it&squot;s own...less work for OSM developers&n;&t; */
id|i2o_post_message
c_func
(paren
id|c
comma
id|m
)paren
suffix:semicolon
id|time
op_assign
id|jiffies
suffix:semicolon
r_while
c_loop
(paren
id|workspace
(braket
l_int|87
)braket
op_ne
l_int|0xFF
)paren
(brace
r_if
c_cond
(paren
id|jiffies
op_minus
id|time
op_ge
l_int|2
op_star
id|HZ
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for status reply&bslash;n&quot;
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|workspace
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|schedule
c_func
(paren
)paren
suffix:semicolon
id|barrier
c_func
(paren
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Organization ID: %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|version
op_assign
id|workspace
(braket
l_int|9
)braket
op_amp
l_int|0xF0
op_rshift
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|version
op_eq
l_int|0x02
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Lowest I2O version supported: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|workspace
(braket
l_int|2
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1.5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;2.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Highest I2O version supported: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|workspace
(braket
l_int|3
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1.5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;2.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IOP ID: %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|2
)braket
op_amp
l_int|0xFFF
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Host Unit ID: %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Segment Number: %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|4
)braket
op_amp
l_int|0XFFF
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;I2O Version: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|version
)paren
(brace
r_case
l_int|0x00
suffix:colon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1.5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;2.0&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown version&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IOP State: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|workspace
(braket
l_int|10
)braket
)paren
(brace
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Init&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Reset&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Hold&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Hold&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x08
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Operational&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x10
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FAILED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x11
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FAULTED&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* 0x00 is the only type supported w/spec 1.5 */
multiline_comment|/* Added 2.0 types */
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Messenger Type: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|workspace
(braket
l_int|11
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Memory Mapped&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Memory mapped only&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Remote only&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Memory mapped and remote&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Inbound Frame Size: %d bytes&bslash;n&quot;
comma
id|work16
(braket
l_int|6
)braket
op_star
l_int|4
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Inbound Frames: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Inbound Frames: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Outbound Frames: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|6
)braket
)paren
suffix:semicolon
multiline_comment|/* Spec doesn&squot;t say if NULL terminated or not... */
id|memcpy
c_func
(paren
id|prodstr
comma
id|work32
op_plus
l_int|7
comma
l_int|24
)paren
suffix:semicolon
id|prodstr
(braket
l_int|24
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product ID: %s&bslash;n&quot;
comma
id|prodstr
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LCT Size: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|13
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Desired Private Memory Space: %d kB&bslash;n&quot;
comma
id|work32
(braket
l_int|15
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Allocated Private Memory Space: %d kB&bslash;n&quot;
comma
id|work32
(braket
l_int|16
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Private Memory Base Address: %0#10x&bslash;n&quot;
comma
id|work32
(braket
l_int|17
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Desired Private I/O Space: %d kB&bslash;n&quot;
comma
id|work32
(braket
l_int|18
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Allocated Private I/O Space: %d kB&bslash;n&quot;
comma
id|work32
(braket
l_int|19
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Private I/O Base Address: %0#10x&bslash;n&quot;
comma
id|work32
(braket
l_int|20
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_hw
r_int
id|i2o_proc_read_hw
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_controller
op_star
id|c
op_assign
(paren
r_struct
id|i2o_controller
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|5
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|u32
id|hwcap
suffix:semicolon
r_static
r_char
op_star
id|cpu_table
(braket
)braket
op_assign
(brace
l_string|&quot;Intel 80960 Series&quot;
comma
l_string|&quot;AMD2900 Series&quot;
comma
l_string|&quot;Motorola 68000 Series&quot;
comma
l_string|&quot;ARM Series&quot;
comma
l_string|&quot;MIPS Series&quot;
comma
l_string|&quot;Sparc Series&quot;
comma
l_string|&quot;PowerPC Series&quot;
comma
l_string|&quot;Intel x86 Series&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|c
comma
id|ADAPTER_TID
comma
id|proc_context
comma
l_int|0
comma
singleline_comment|// ParamGroup 0x0000h
op_minus
l_int|1
comma
singleline_comment|// all fields
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;IOP Hardware Information Table&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;I2O Vendor ID: %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product ID: %0#6x&bslash;n&quot;
comma
id|work16
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RAM: %dkB&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Non-Volatile Storage: %dkB&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
op_rshift
l_int|10
)paren
suffix:semicolon
id|hwcap
op_assign
id|work32
(braket
l_int|3
)braket
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Capabilities:&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|hwcap
op_amp
l_int|0x00000001
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Self-booting&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hwcap
op_amp
l_int|0x00000002
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Upgradable IRTOS&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hwcap
op_amp
l_int|0x00000004
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Supports downloading DDMs&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hwcap
op_amp
l_int|0x00000008
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Supports installing DDMs&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|hwcap
op_amp
l_int|0x00000010
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;   Battery-backed RAM&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;CPU: &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|16
)braket
OG
l_int|8
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|cpu_table
(braket
id|work8
(braket
l_int|16
)braket
)braket
)paren
suffix:semicolon
multiline_comment|/* Anyone using ProcessorVersion? */
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_dev
r_int
id|i2o_proc_read_dev
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|128
)braket
suffix:semicolon
singleline_comment|// allow for &quot;stuff&quot; + up to 256 byte (max) serial number
singleline_comment|// == (allow) 512d bytes (max)
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_char
id|sz
(braket
l_int|17
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0xF100
comma
singleline_comment|// ParamGroup F100h (Device Identity)
op_minus
l_int|1
comma
singleline_comment|// all fields
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Device Class: %s&bslash;n&quot;
comma
id|i2o_get_class_name
c_func
(paren
id|work16
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Owner TID:    %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Parent TID:   %0#5x&bslash;n&quot;
comma
id|work16
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
id|work32
op_plus
l_int|2
comma
l_int|16
)paren
suffix:semicolon
id|sz
(braket
l_int|16
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Vendor Info:  %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
id|work32
op_plus
l_int|6
comma
l_int|16
)paren
suffix:semicolon
id|sz
(braket
l_int|16
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product Info: %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
id|work32
op_plus
l_int|10
comma
l_int|16
)paren
suffix:semicolon
id|sz
(braket
l_int|16
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Description:  %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
id|work32
op_plus
l_int|14
comma
l_int|8
)paren
suffix:semicolon
id|sz
(braket
l_int|8
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Product Revision: %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Serial Number: &quot;
)paren
suffix:semicolon
id|len
op_assign
id|print_serial_number
c_func
(paren
id|buf
comma
id|len
comma
(paren
id|u8
op_star
)paren
(paren
id|work32
op_plus
l_int|16
)paren
comma
multiline_comment|/* allow for SNLen plus&n;&t;&t;&t;&t;&t;&t;&t; * possible trailing &squot;&bslash;0&squot;&n;&t;&t;&t;&t;&t;&t;&t; */
r_sizeof
(paren
id|work32
)paren
op_minus
(paren
l_int|16
op_star
r_sizeof
(paren
id|u32
)paren
)paren
op_minus
l_int|2
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_dev_name
r_int
id|i2o_proc_read_dev_name
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;dev_name
(braket
l_int|0
)braket
op_eq
l_char|&squot;&bslash;0&squot;
)paren
r_return
l_int|0
suffix:semicolon
id|len
op_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;%s&bslash;n&quot;
comma
id|d-&gt;dev_name
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_ddm
r_int
id|i2o_proc_read_ddm
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|128
)braket
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
r_char
id|mod
(braket
l_int|25
)braket
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0xF101
comma
singleline_comment|// ParamGroup F101h (DDM Identity)
op_minus
l_int|1
comma
singleline_comment|// all fields
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Registering DDM TID: 0x%03x&bslash;n&quot;
comma
id|work16
(braket
l_int|0
)braket
op_amp
l_int|0xFFF
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|mod
comma
(paren
r_char
op_star
)paren
(paren
id|work16
op_plus
l_int|1
)paren
comma
l_int|24
)paren
suffix:semicolon
id|mod
(braket
l_int|24
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Module Name: %s&bslash;n&quot;
comma
id|mod
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|mod
comma
(paren
r_char
op_star
)paren
(paren
id|work16
op_plus
l_int|13
)paren
comma
l_int|8
)paren
suffix:semicolon
id|mod
(braket
l_int|8
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Module Rev: %s&bslash;n&quot;
comma
id|mod
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Serial Number: &quot;
)paren
suffix:semicolon
id|len
op_assign
id|print_serial_number
c_func
(paren
id|buf
comma
id|len
comma
(paren
id|u8
op_star
)paren
(paren
id|work16
op_plus
l_int|17
)paren
comma
multiline_comment|/* allow for SNLen plus&n;&t;&t;&t;&t;&t;&t;&t; * possible trailing &squot;&bslash;0&squot;&n;&t;&t;&t;&t;&t;&t;&t; */
r_sizeof
(paren
id|work32
)paren
op_minus
(paren
l_int|17
op_star
r_sizeof
(paren
id|u16
)paren
)paren
op_minus
l_int|2
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_read_uinfo
r_int
id|i2o_proc_read_uinfo
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|128
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
r_char
id|sz
(braket
l_int|65
)braket
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0xF102
comma
singleline_comment|// ParamGroup F102h (User Information)
op_minus
l_int|1
comma
singleline_comment|// all fields
op_amp
id|work32
comma
r_sizeof
(paren
id|work32
)paren
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|sz
comma
(paren
r_char
op_star
)paren
id|work32
comma
l_int|64
)paren
suffix:semicolon
id|sz
(braket
l_int|64
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Device Name: %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
(paren
r_char
op_star
)paren
(paren
id|work32
op_plus
l_int|16
)paren
comma
l_int|64
)paren
suffix:semicolon
id|sz
(braket
l_int|64
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Service Name: %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
(paren
r_char
op_star
)paren
(paren
id|work32
op_plus
l_int|32
)paren
comma
l_int|64
)paren
suffix:semicolon
id|sz
(braket
l_int|64
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Physical Name: %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|memcpy
c_func
(paren
id|sz
comma
(paren
r_char
op_star
)paren
(paren
id|work32
op_plus
l_int|48
)paren
comma
l_int|4
)paren
suffix:semicolon
id|sz
(braket
l_int|4
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Instance Number: %s&bslash;n&quot;
comma
id|sz
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|print_serial_number
r_static
r_int
id|print_serial_number
c_func
(paren
r_char
op_star
id|buff
comma
r_int
id|pos
comma
id|u8
op_star
id|serialno
comma
r_int
id|max_len
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* 19990419 -sralston&n;&t; *&t;The I2O v1.5 (and v2.0 so far) &quot;official specification&quot;&n;&t; *&t;got serial numbers WRONG!&n;&t; *&t;Apparently, and despite what Section 3.4.4 says and&n;&t; *&t;Figure 3-35 shows (pg 3-39 in the pdf doc),&n;&t; *&t;the convention / consensus seems to be:&n;&t; *&t;  + First byte is SNFormat&n;&t; *&t;  + Second byte is SNLen (but only if SNFormat==7 (?))&n;&t; *&t;  + (v2.0) SCSI+BS may use IEEE Registered (64 or 128 bit) format&n;&t; */
r_switch
c_cond
(paren
id|serialno
(braket
l_int|0
)braket
)paren
(brace
r_case
id|I2O_SNFORMAT_BINARY
suffix:colon
multiline_comment|/* Binary */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;0x&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;%02X&quot;
comma
id|serialno
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_ASCII
suffix:colon
multiline_comment|/* ASCII */
r_if
c_cond
(paren
id|serialno
(braket
l_int|1
)braket
OL
l_char|&squot; &squot;
)paren
multiline_comment|/* printable or SNLen? */
(brace
multiline_comment|/* sanity */
id|max_len
op_assign
(paren
id|max_len
OL
id|serialno
(braket
l_int|1
)braket
)paren
ques
c_cond
id|max_len
suffix:colon
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|serialno
(braket
l_int|1
op_plus
id|max_len
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
multiline_comment|/* just print it */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;%s&quot;
comma
op_amp
id|serialno
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* print chars for specified length */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|serialno
(braket
l_int|1
)braket
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;%c&quot;
comma
id|serialno
(braket
l_int|2
op_plus
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_UNICODE
suffix:colon
multiline_comment|/* UNICODE */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;UNICODE Format.  Can&squot;t Display&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_LAN48_MAC
suffix:colon
multiline_comment|/* LAN-48 MAC Address */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;LAN-48 MAC Address @ %02X:%02X:%02X:%02X:%02X:%02X&quot;
comma
id|serialno
(braket
l_int|2
)braket
comma
id|serialno
(braket
l_int|3
)braket
comma
id|serialno
(braket
l_int|4
)braket
comma
id|serialno
(braket
l_int|5
)braket
comma
id|serialno
(braket
l_int|6
)braket
comma
id|serialno
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_case
id|I2O_SNFORMAT_WAN
suffix:colon
multiline_comment|/* WAN MAC Address */
multiline_comment|/* FIXME: Figure out what a WAN access address looks like?? */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;WAN Access Address&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
multiline_comment|/* plus new in v2.0 */
r_case
id|I2O_SNFORMAT_LAN64_MAC
suffix:colon
multiline_comment|/* LAN-64 MAC Address */
multiline_comment|/* FIXME: Figure out what a LAN-64 address really looks like?? */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;LAN-64 MAC Address @ [?:%02X:%02X:?] %02X:%02X:%02X:%02X:%02X:%02X&quot;
comma
id|serialno
(braket
l_int|8
)braket
comma
id|serialno
(braket
l_int|9
)braket
comma
id|serialno
(braket
l_int|2
)braket
comma
id|serialno
(braket
l_int|3
)braket
comma
id|serialno
(braket
l_int|4
)braket
comma
id|serialno
(braket
l_int|5
)braket
comma
id|serialno
(braket
l_int|6
)braket
comma
id|serialno
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_DDM
suffix:colon
multiline_comment|/* I2O DDM */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;DDM: Tid=%03Xh, Rsvd=%04Xh, OrgId=%04Xh&quot;
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|2
)braket
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|4
)braket
comma
op_star
(paren
id|u16
op_star
)paren
op_amp
id|serialno
(braket
l_int|6
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_IEEE_REG64
suffix:colon
multiline_comment|/* IEEE Registered (64-bit) */
r_case
id|I2O_SNFORMAT_IEEE_REG128
suffix:colon
multiline_comment|/* IEEE Registered (128-bit) */
multiline_comment|/* FIXME: Figure if this is even close?? */
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;IEEE NodeName(hi,lo)=(%08Xh:%08Xh), PortName(hi,lo)=(%08Xh:%08Xh)&bslash;n&quot;
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|2
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|6
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|10
)braket
comma
op_star
(paren
id|u32
op_star
)paren
op_amp
id|serialno
(braket
l_int|14
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_SNFORMAT_UNKNOWN
suffix:colon
multiline_comment|/* Unknown 0    */
r_case
id|I2O_SNFORMAT_UNKNOWN2
suffix:colon
multiline_comment|/* Unknown 0xff */
r_default
suffix:colon
id|pos
op_add_assign
id|sprintf
c_func
(paren
id|buff
op_plus
id|pos
comma
l_string|&quot;Unknown Data Format&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|pos
suffix:semicolon
)brace
multiline_comment|/* LAN group 0000h - Device info (scalar) */
DECL|function|i2o_proc_read_lan_dev_info
r_int
id|i2o_proc_read_lan_dev_info
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|56
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u16
op_star
id|work16
op_assign
(paren
id|u16
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u64
op_star
id|work64
op_assign
(paren
id|u64
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0000
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|56
op_star
l_int|4
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;LAN Type ........... &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work16
(braket
l_int|0
)braket
)paren
(brace
r_case
l_int|0x0030
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Ethernet, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0040
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100Base VG, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0050
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Token Ring, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0060
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FDDI, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0070
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Fibre Channel, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown type, &quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work16
(braket
l_int|1
)braket
op_amp
l_int|0x00000001
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;emulated LAN, &quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;physical LAN port, &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work16
(braket
l_int|1
)braket
op_amp
l_int|0x00000002
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;full duplex&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;simplex&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Address format:      &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work8
(braket
l_int|4
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;IEEE 48bit&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FC IEEE&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;State:               &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work8
(braket
l_int|5
)braket
)paren
(brace
r_case
l_int|0x00
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x01
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unclaimed&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x02
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Operational&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x03
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Suspended&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x04
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Resetting&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x05
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Error&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x06
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Operational no Rx&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x07
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Suspended no Rx&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unspecified&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Error status:      &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work16
(braket
l_int|3
)braket
op_amp
l_int|0x0001
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Transmit Control Unit Inoperative &quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work16
(braket
l_int|3
)braket
op_amp
l_int|0x0002
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Receive Control Unit Inoperative&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work16
(braket
l_int|3
)braket
op_amp
l_int|0x0004
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Local memory Allocation Error&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Min Packet size:     %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Packet size:     %d&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW Address:          &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|16
)braket
comma
id|work8
(braket
l_int|17
)braket
comma
id|work8
(braket
l_int|18
)braket
comma
id|work8
(braket
l_int|19
)braket
comma
id|work8
(braket
l_int|20
)braket
comma
id|work8
(braket
l_int|21
)braket
comma
id|work8
(braket
l_int|22
)braket
comma
id|work8
(braket
l_int|23
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Tx Wire Speed:   &quot;
id|FMT_U64_HEX
l_string|&quot; bps&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Rx Wire Speed:   &quot;
id|FMT_U64_HEX
l_string|&quot; bps&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Min SDU packet size: 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max SDU packet size: 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|11
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0001h - MAC address table (scalar) */
DECL|function|i2o_proc_read_lan_mac_addr
r_int
id|i2o_proc_read_lan_mac_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|48
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0001
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|48
op_star
l_int|4
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Active address: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|0
)braket
comma
id|work8
(braket
l_int|1
)braket
comma
id|work8
(braket
l_int|2
)braket
comma
id|work8
(braket
l_int|3
)braket
comma
id|work8
(braket
l_int|4
)braket
comma
id|work8
(braket
l_int|5
)braket
comma
id|work8
(braket
l_int|6
)braket
comma
id|work8
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current address: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|8
)braket
comma
id|work8
(braket
l_int|9
)braket
comma
id|work8
(braket
l_int|10
)braket
comma
id|work8
(braket
l_int|11
)braket
comma
id|work8
(braket
l_int|12
)braket
comma
id|work8
(braket
l_int|13
)braket
comma
id|work8
(braket
l_int|14
)braket
comma
id|work8
(braket
l_int|15
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Functional address mask: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|16
)braket
comma
id|work8
(braket
l_int|17
)braket
comma
id|work8
(braket
l_int|18
)braket
comma
id|work8
(braket
l_int|19
)braket
comma
id|work8
(braket
l_int|20
)braket
comma
id|work8
(braket
l_int|21
)braket
comma
id|work8
(braket
l_int|22
)braket
comma
id|work8
(braket
l_int|23
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Filter mask: 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW/DDM capabilities: 0x%08x&bslash;n&quot;
comma
id|work32
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Unicast packets %ssupported (%sabled)&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000001
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not &quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000001
)paren
ques
c_cond
l_string|&quot;en&quot;
suffix:colon
l_string|&quot;dis&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Promiscuous mode %ssupported (%sabled)&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not&quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000002
)paren
ques
c_cond
l_string|&quot;en&quot;
suffix:colon
l_string|&quot;dis&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Multicast promiscuous mode %ssupported (%sabled)&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not &quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000004
)paren
ques
c_cond
l_string|&quot;en&quot;
suffix:colon
l_string|&quot;dis&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Broadcast Reception disabling %ssupported (%sabled)&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not &quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000100
)paren
ques
c_cond
l_string|&quot;en&quot;
suffix:colon
l_string|&quot;dis&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Multicast Reception disabling %ssupported (%sabled)&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not &quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000200
)paren
ques
c_cond
l_string|&quot;en&quot;
suffix:colon
l_string|&quot;dis&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Functional address disabling %ssupported (%sabled)&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not &quot;
comma
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000400
)paren
ques
c_cond
l_string|&quot;en&quot;
suffix:colon
l_string|&quot;dis&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    MAC reporting %ssupported&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|7
)braket
op_amp
l_int|0x00000800
)paren
ques
c_cond
l_string|&quot;&quot;
suffix:colon
l_string|&quot;not &quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    MAC Reporting mode: &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00000800
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Pass only priority MAC packets&bslash;n&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00001000
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Pass all MAC packets&bslash;n&quot;
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|work32
(braket
l_int|6
)braket
op_amp
l_int|0x00001800
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Pass all MAC packets (promiscuous)&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Do not pass MAC packets&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Number of multicast addesses: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Perfect filtering for max %d multicast addesses&bslash;n&quot;
comma
id|work32
(braket
l_int|9
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Imperfect filtering for max %d multicast addesses&bslash;n&quot;
comma
id|work32
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0001h, field 1 - Current MAC (scalar) */
DECL|function|i2o_proc_read_lan_curr_addr
r_int
id|i2o_proc_read_lan_curr_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|2
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0001
comma
l_int|2
comma
op_amp
id|work32
comma
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Current address: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|work8
(braket
l_int|0
)braket
comma
id|work8
(braket
l_int|1
)braket
comma
id|work8
(braket
l_int|2
)braket
comma
id|work8
(braket
l_int|3
)braket
comma
id|work8
(braket
l_int|4
)braket
comma
id|work8
(braket
l_int|5
)braket
comma
id|work8
(braket
l_int|6
)braket
comma
id|work8
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/* LAN group 0002h - Multicast MAC address table (table) */
r_int
id|i2o_proc_read_lan_mcast_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u8
id|work8
(braket
l_int|32
)braket
suffix:semicolon
r_static
id|u32
id|field32
(braket
l_int|8
)braket
suffix:semicolon
r_static
id|u8
op_star
id|field8
op_assign
(paren
id|u8
op_star
)paren
id|field32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table_polled
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
op_amp
id|work8
comma
l_int|32
comma
l_int|0x0002
comma
l_int|0
comma
id|field32
comma
l_int|8
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|token
)paren
(brace
r_case
op_minus
id|ETIMEDOUT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout reading table.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
r_break
suffix:semicolon
r_case
op_minus
id|ENOMEM
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;No free memory to read the table.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
r_break
suffix:semicolon
r_case
op_minus
id|EBADR
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Error reading field.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Multicast MAC address: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|field8
(braket
l_int|0
)braket
comma
id|field8
(braket
l_int|1
)braket
comma
id|field8
(braket
l_int|2
)braket
comma
id|field8
(braket
l_int|3
)braket
comma
id|field8
(braket
l_int|4
)braket
comma
id|field8
(braket
l_int|5
)braket
comma
id|field8
(braket
l_int|6
)braket
comma
id|field8
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* LAN group 0003h - Batch Control (scalar) */
DECL|function|i2o_proc_read_lan_batch_control
r_int
id|i2o_proc_read_lan_batch_control
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|18
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0003
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|72
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Batch mode &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|0
)braket
op_amp
l_int|0x00000001
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;disabled&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;enabled&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|0
)braket
op_amp
l_int|0x00000002
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot; (current setting)&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|0
)braket
op_amp
l_int|0x00000004
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, forced&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;, toggle&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;i2oversion
op_eq
l_int|0x00
)paren
(brace
multiline_comment|/* Reserved in 1.53 and 2.0 */
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rising Load Delay: %d ms&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
op_div
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rising Load Threshold: %d ms&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
op_div
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Falling Load Delay: %d ms&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
op_div
l_int|10
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Falling Load Threshold: %d ms&bslash;n&quot;
comma
id|work32
(braket
l_int|4
)braket
op_div
l_int|10
)paren
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Rx Batch Count: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Rx Batch Delay: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|6
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;i2oversion
op_eq
l_int|0x00
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Transmission Completion Reporting Delay: %d ms&bslash;n&quot;
comma
id|work32
(braket
l_int|7
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Tx Batch Delay: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max Tx Batch Count: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|8
)braket
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0004h - LAN Operation (scalar) */
DECL|function|i2o_proc_read_lan_operation
r_int
id|i2o_proc_read_lan_operation
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|5
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0004
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|20
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Packet prepadding (32b words): %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Transmission error reporting: %s&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|1
)braket
op_amp
l_int|1
)paren
ques
c_cond
l_string|&quot;on&quot;
suffix:colon
l_string|&quot;off&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Bad packet handling: %s&bslash;n&quot;
comma
(paren
id|work32
(braket
l_int|1
)braket
op_amp
l_int|0x2
)paren
ques
c_cond
l_string|&quot;by host&quot;
suffix:colon
l_string|&quot;by DDM&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Packet orphan limit: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx modes:&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000004
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW CRC supressed&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW CRC&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000100
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW IPv4 checksumming&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000200
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW TCP checksumming&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000400
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW UDP checksumming&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00000800
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW RSVP checksumming&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00001000
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW ICMP checksumming&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|3
)braket
op_amp
l_int|0x00002000
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Loopback packet not delivered&bslash;n&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx modes:&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000004
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    FCS in payload&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000100
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW IPv4 checksum validation&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000200
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW TCP checksum validation&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000400
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW UDP checksum validation&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000800
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW RSVP checksum validation&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00001000
)paren
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    HW ICMP checksum validation&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0005h - Media operation (scalar) */
DECL|function|i2o_proc_read_lan_media_operation
r_int
id|i2o_proc_read_lan_media_operation
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|9
)braket
suffix:semicolon
r_static
id|u8
op_star
id|work8
op_assign
(paren
id|u8
op_star
)paren
id|work32
suffix:semicolon
r_static
id|u64
op_star
id|work64
op_assign
(paren
id|u64
op_star
)paren
id|work32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0005
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|36
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Connector type: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work32
(braket
l_int|0
)braket
)paren
(brace
r_case
l_int|0x00000000
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;OTHER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000001
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UNKNOWN&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000002
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;AUI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000003
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UTP&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000004
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BNC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000005
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RJ45&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000006
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;STP DB9&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000007
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FIBER MIC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000008
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;APPLE AUI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000009
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MII&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000A
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DB9&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000B
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HSSDC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000C
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DUPLEX SC FIBER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000D
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DUPLEX ST FIBER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000E
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TNC/BNC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0xFFFFFFFF
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW DEFAULT&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Connection type: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work32
(braket
l_int|1
)braket
)paren
(brace
r_case
id|I2O_LAN_UNKNOWN
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UNKNOWN&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_AUI
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;AUI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE5
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FIORL
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FIORL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE2
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE2&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BROAD36
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BROAD36&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_T
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-T&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FP
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-FP&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FB
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-FB&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FL
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-FL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_TX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100BASE-TX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_FX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100BASE-FX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_T4
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100BASE-T4&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_SX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-SX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_LX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-LX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_CX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-CX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_T
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-T&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100VG_ETHERNET
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100VG-ETHERNET&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100VG_TR
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100VG-TOKEN RING&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_4MBIT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;4MBIT TOKEN RING&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_16MBIT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;16 Mb Token Ring&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_125MBAUD
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;125 MBAUD FDDI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_POINT_POINT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Point-to-point&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_ARB_LOOP
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Arbitrated loop&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_PUBLIC_LOOP
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Public loop&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FABRIC
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Fabric&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_EMULATION
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Emulation&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_OTHER
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Other&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_DEFAULT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW default&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Tx Wire Speed: &quot;
id|FMT_U64_HEX
l_string|&quot; bps&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Current Rx Wire Speed: &quot;
id|FMT_U64_HEX
l_string|&quot; bps&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;%s duplex&bslash;n&quot;
comma
(paren
id|work8
(braket
l_int|24
)braket
op_amp
l_int|1
)paren
ques
c_cond
l_string|&quot;Full&quot;
suffix:colon
l_string|&quot;Half&quot;
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Link status: &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work8
(braket
l_int|25
)braket
op_eq
l_int|0x00
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unknown&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|work8
(braket
l_int|25
)braket
op_eq
l_int|0x01
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Normal&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|work8
(braket
l_int|25
)braket
op_eq
l_int|0x02
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Failure&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|work8
(braket
l_int|25
)braket
op_eq
l_int|0x03
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Reset&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Unspecified&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;i2oversion
op_eq
l_int|0x00
)paren
(brace
multiline_comment|/* Reserved in 1.53 and 2.0 */
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Bad packets handled by: %s&bslash;n&quot;
comma
(paren
id|work8
(braket
l_int|26
)braket
op_eq
l_int|0xFF
)paren
ques
c_cond
l_string|&quot;host&quot;
suffix:colon
l_string|&quot;DDM&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|d-&gt;i2oversion
op_ne
l_int|0x00
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Duplex mode target: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work8
(braket
l_int|27
)braket
)paren
(brace
r_case
l_int|0
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Half Duplex&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Full Duplex&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Connector type target: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work32
(braket
l_int|7
)braket
)paren
(brace
r_case
l_int|0x00000000
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;OTHER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000001
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UNKNOWN&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000002
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;AUI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000003
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UTP&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000004
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BNC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000005
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RJ45&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000006
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;STP DB9&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000007
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FIBER MIC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000008
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;APPLE AUI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x00000009
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MII&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000A
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DB9&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000B
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HSSDC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000C
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DUPLEX SC FIBER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000D
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DUPLEX ST FIBER&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x0000000E
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TNC/BNC&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0xFFFFFFFF
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW DEFAULT&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Connection type target: &quot;
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|work32
(braket
l_int|8
)braket
)paren
(brace
r_case
id|I2O_LAN_UNKNOWN
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UNKNOWN&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_AUI
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;AUI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE5
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE5&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FIORL
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FIORL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE2
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE2&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BROAD36
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BROAD36&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_T
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-T&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FP
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-FP&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FB
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-FB&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_10BASE_FL
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;10BASE-FL&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_TX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100BASE-TX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_FX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100BASE-FX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100BASE_T4
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100BASE-T4&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_SX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-SX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_LX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-LX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_CX
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-CX&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_1000BASE_T
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;1000BASE-T&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100VG_ETHERNET
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100VG-ETHERNET&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_100VG_TR
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;100VG-TOKEN RING&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_4MBIT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;4MBIT TOKEN RING&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_16MBIT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;16 Mb Token Ring&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_125MBAUD
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;125 MBAUD FDDI&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_POINT_POINT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Point-to-point&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_ARB_LOOP
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Arbitrated loop&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_PUBLIC_LOOP
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Public loop&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_FABRIC
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Fabric&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_EMULATION
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Emulation&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_OTHER
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Other&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_LAN_DEFAULT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;HW default&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/* LAN group 0006h - Alternate address (table) */
r_int
id|i2o_proc_read_lan_alt_addr
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u8
id|work8
(braket
l_int|32
)braket
suffix:semicolon
r_static
id|u32
id|field32
(braket
l_int|2
)braket
suffix:semicolon
r_static
id|u8
op_star
id|field8
op_assign
(paren
id|u8
op_star
)paren
id|field32
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_table_polled
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
op_amp
id|work8
comma
l_int|32
comma
l_int|0x0006
comma
l_int|0
comma
id|field32
comma
l_int|8
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|token
)paren
(brace
r_case
op_minus
id|ETIMEDOUT
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout reading table.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
r_break
suffix:semicolon
r_case
op_minus
id|ENOMEM
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;No free memory to read the table.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
r_break
suffix:semicolon
r_case
op_minus
id|EBADR
suffix:colon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Error reading field.&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Alternate Address: &quot;
l_string|&quot;%02X:%02X:%02X:%02X:%02X:%02X:%02X:%02X&bslash;n&quot;
comma
id|field8
(braket
l_int|0
)braket
comma
id|field8
(braket
l_int|1
)braket
comma
id|field8
(braket
l_int|2
)braket
comma
id|field8
(braket
l_int|3
)braket
comma
id|field8
(braket
l_int|4
)braket
comma
id|field8
(braket
l_int|5
)braket
comma
id|field8
(braket
l_int|6
)braket
comma
id|field8
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* LAN group 0007h - Transmit info (scalar) */
DECL|function|i2o_proc_read_lan_tx_info
r_int
id|i2o_proc_read_lan_tx_info
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|10
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0007
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Max SG Elements per packet: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max SG Elements per chain: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max outstanding packets: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max packets per request: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx modes:&bslash;n&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000002
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    No DA in SGL&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000004
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    CRC suppression&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000008
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Loop suppression&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000010
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    MAC insertion&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000020
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    RIF insertion&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000100
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    IPv4 Checksum&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000200
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    TCP Checksum&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000400
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    UDP Checksum&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00000800
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    RSVP Checksum&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00001000
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    ICMP Checksum&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|d-&gt;i2oversion
op_eq
l_int|0x00
)paren
(brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00008000
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Loopback Enabled&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00010000
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Loopback Suppression Enabled&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00010000
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Loopback Enabled&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|work32
(braket
l_int|4
)braket
op_amp
l_int|0x00020000
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;    Loopback Suppression Enabled&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0008h - Receive info (scalar) */
DECL|function|i2o_proc_read_lan_rx_info
r_int
id|i2o_proc_read_lan_rx_info
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u32
id|work32
(braket
l_int|10
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0008
comma
op_minus
l_int|1
comma
op_amp
id|work32
comma
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Max size of chain element: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Max number of buckets: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|1
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|d-&gt;i2oversion
OG
l_int|0x00
)paren
(brace
multiline_comment|/* not in 1.5 */
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx modes: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RxMaxBucketsReply: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RxMaxPacketsPerBuckets: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RxMaxPostBuckets: %d&bslash;n&quot;
comma
id|work32
(braket
l_int|5
)braket
)paren
suffix:semicolon
)brace
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0100h - LAN Historical statistics (scalar) */
DECL|function|i2o_proc_read_lan_hist_stats
r_int
id|i2o_proc_read_lan_hist_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u64
id|work64
(braket
l_int|9
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0100
comma
op_minus
l_int|1
comma
op_amp
id|work64
comma
l_int|9
op_star
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Tx packets: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx bytes: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx packets: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx bytes: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Tx errors: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx errors: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|5
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Rx dropped: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Adapter resets: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|7
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;Adapter suspends: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|8
)braket
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0182h - Optional Non Media Specific Transmit Historical Statistics&n; * (scalar) */
DECL|function|i2o_proc_read_lan_opt_tx_hist_stats
r_int
id|i2o_proc_read_lan_opt_tx_hist_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u64
id|work64
(braket
l_int|9
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0182
comma
op_minus
l_int|1
comma
op_amp
id|work64
comma
l_int|9
op_star
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;TxRetryCount: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DirectedBytesTx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DirectedPacketsTx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MulticastBytesTx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MulticastPacketsTx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BroadcastBytesTx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|5
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BroadcastPacketsTx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TotalGroupAddrTxCount: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|7
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TotalTxPacketsTooShort: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|8
)braket
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0183h - Optional Non Media Specific Receive Historical Statistics&n; * (scalar) */
DECL|function|i2o_proc_read_lan_opt_rx_hist_stats
r_int
id|i2o_proc_read_lan_opt_rx_hist_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u64
id|work64
(braket
l_int|11
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0183
comma
op_minus
l_int|1
comma
op_amp
id|work64
comma
l_int|11
op_star
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;ReceiveCRCErrorCount: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|0
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DirectedBytesRx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DirectedPacketsRx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MulticastBytesRx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;MulticastPacketsRx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BroadcastBytesRx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|5
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;BroadcastPacketsRx: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TotalGroupAddrRxCount: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|7
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TotalRxPacketsTooShort: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|8
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TotalRxPacketsTooLong: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|9
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;TotalRuntPacketsReceived: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|10
)braket
)paren
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
multiline_comment|/* LAN group 0400h - Required FDDI Statistics (scalar) */
DECL|function|i2o_proc_read_lan_fddi_stats
r_int
id|i2o_proc_read_lan_fddi_stats
c_func
(paren
r_char
op_star
id|buf
comma
r_char
op_star
op_star
id|start
comma
id|off_t
id|offset
comma
r_int
id|len
comma
r_int
op_star
id|eof
comma
r_void
op_star
id|data
)paren
(brace
r_struct
id|i2o_device
op_star
id|d
op_assign
(paren
r_struct
id|i2o_device
op_star
)paren
id|data
suffix:semicolon
r_static
id|u64
id|work64
(braket
l_int|11
)braket
suffix:semicolon
r_int
id|token
suffix:semicolon
r_static
r_char
op_star
id|conf_state
(braket
)braket
op_assign
(brace
l_string|&quot;Isolated&quot;
comma
l_string|&quot;Local a&quot;
comma
l_string|&quot;Local b&quot;
comma
l_string|&quot;Local ab&quot;
comma
l_string|&quot;Local s&quot;
comma
l_string|&quot;Wrap a&quot;
comma
l_string|&quot;Wrap b&quot;
comma
l_string|&quot;Wrap ab&quot;
comma
l_string|&quot;Wrap s&quot;
comma
l_string|&quot;C-Wrap a&quot;
comma
l_string|&quot;C-Wrap b&quot;
comma
l_string|&quot;C-Wrap s&quot;
comma
l_string|&quot;Through&quot;
comma
)brace
suffix:semicolon
r_static
r_char
op_star
id|ring_state
(braket
)braket
op_assign
(brace
l_string|&quot;Isolated&quot;
comma
l_string|&quot;Non-op&quot;
comma
l_string|&quot;Rind-op&quot;
comma
l_string|&quot;Detect&quot;
comma
l_string|&quot;Non-op-Dup&quot;
comma
l_string|&quot;Ring-op-Dup&quot;
comma
l_string|&quot;Directed&quot;
comma
l_string|&quot;Trace&quot;
)brace
suffix:semicolon
r_static
r_char
op_star
id|link_state
(braket
)braket
op_assign
(brace
l_string|&quot;Off&quot;
comma
l_string|&quot;Break&quot;
comma
l_string|&quot;Trace&quot;
comma
l_string|&quot;Connect&quot;
comma
l_string|&quot;Next&quot;
comma
l_string|&quot;Signal&quot;
comma
l_string|&quot;Join&quot;
comma
l_string|&quot;Verify&quot;
comma
l_string|&quot;Active&quot;
comma
l_string|&quot;Maintenance&quot;
)brace
suffix:semicolon
id|spin_lock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
id|len
op_assign
l_int|0
suffix:semicolon
id|token
op_assign
id|i2o_query_scalar
c_func
(paren
id|d-&gt;controller
comma
id|d-&gt;id
comma
id|proc_context
comma
l_int|0x0400
comma
op_minus
l_int|1
comma
op_amp
id|work64
comma
l_int|11
op_star
l_int|8
comma
op_amp
id|i2o_proc_token
)paren
suffix:semicolon
r_if
c_cond
(paren
id|token
OL
l_int|0
)paren
(brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;Timeout waiting for reply from IOP&bslash;n&quot;
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
comma
l_string|&quot;ConfigurationState: %s&bslash;n&quot;
comma
id|conf_state
(braket
id|work64
(braket
l_int|0
)braket
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;UpstreamNode: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|1
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;DownStreamNode: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|2
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FrameErrors: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|3
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;FramesLost: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|4
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;RingMgmtState: %s&bslash;n&quot;
comma
id|ring_state
(braket
id|work64
(braket
l_int|5
)braket
)braket
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LCTFailures: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|6
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LEMRejects: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|7
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LEMCount: &quot;
id|FMT_U64_HEX
l_string|&quot;&bslash;n&quot;
comma
id|U64_VAL
c_func
(paren
op_amp
id|work64
(braket
l_int|8
)braket
)paren
)paren
suffix:semicolon
id|len
op_add_assign
id|sprintf
c_func
(paren
id|buf
op_plus
id|len
comma
l_string|&quot;LConnectionState: %s&bslash;n&quot;
comma
id|link_state
(braket
id|work64
(braket
l_int|9
)braket
)braket
)paren
suffix:semicolon
id|spin_unlock
c_func
(paren
op_amp
id|i2o_proc_lock
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
DECL|function|i2o_proc_create_entries
r_static
r_int
id|i2o_proc_create_entries
c_func
(paren
r_void
op_star
id|data
comma
id|i2o_proc_entry
op_star
id|pentry
comma
r_struct
id|proc_dir_entry
op_star
id|parent
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|ent
suffix:semicolon
r_while
c_loop
(paren
id|pentry-&gt;name
op_ne
l_int|NULL
)paren
(brace
id|ent
op_assign
id|create_proc_entry
c_func
(paren
id|pentry-&gt;name
comma
id|pentry-&gt;mode
comma
id|parent
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ent
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|ent-&gt;data
op_assign
id|data
suffix:semicolon
id|ent-&gt;read_proc
op_assign
id|pentry-&gt;read_proc
suffix:semicolon
id|ent-&gt;write_proc
op_assign
id|pentry-&gt;write_proc
suffix:semicolon
id|ent-&gt;nlink
op_assign
l_int|1
suffix:semicolon
id|pentry
op_increment
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_proc_remove_entries
r_static
r_void
id|i2o_proc_remove_entries
c_func
(paren
id|i2o_proc_entry
op_star
id|pentry
comma
r_struct
id|proc_dir_entry
op_star
id|parent
)paren
(brace
r_while
c_loop
(paren
id|pentry-&gt;name
op_ne
l_int|NULL
)paren
(brace
id|remove_proc_entry
c_func
(paren
id|pentry-&gt;name
comma
id|parent
)paren
suffix:semicolon
id|pentry
op_increment
suffix:semicolon
)brace
)brace
DECL|function|i2o_proc_add_controller
r_static
r_int
id|i2o_proc_add_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
id|pctrl
comma
r_struct
id|proc_dir_entry
op_star
id|root
)paren
(brace
r_struct
id|proc_dir_entry
op_star
id|dir
comma
op_star
id|dir1
suffix:semicolon
r_struct
id|i2o_device
op_star
id|dev
suffix:semicolon
r_char
id|buff
(braket
l_int|10
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;iop%d&quot;
comma
id|pctrl-&gt;unit
)paren
suffix:semicolon
id|dir
op_assign
id|create_proc_entry
c_func
(paren
id|buff
comma
id|S_IFDIR
comma
id|root
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dir
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|pctrl-&gt;proc_entry
op_assign
id|dir
suffix:semicolon
id|i2o_proc_create_entries
c_func
(paren
id|pctrl
comma
id|generic_iop_entries
comma
id|dir
)paren
suffix:semicolon
r_for
c_loop
(paren
id|dev
op_assign
id|pctrl-&gt;devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
(brace
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;%0#5x&quot;
comma
id|dev-&gt;id
)paren
suffix:semicolon
id|dir1
op_assign
id|create_proc_entry
c_func
(paren
id|buff
comma
id|S_IFDIR
comma
id|dir
)paren
suffix:semicolon
id|dev-&gt;proc_entry
op_assign
id|dir1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|dir1
)paren
(brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;i2o_proc: Could not allocate proc dir&bslash;n&quot;
)paren
suffix:semicolon
)brace
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|generic_dev_entries
comma
id|dir1
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|dev
op_member_access_from_pointer
r_class
)paren
(brace
r_case
id|I2O_CLASS_SCSI_PERIPHERAL
suffix:colon
r_case
id|I2O_CLASS_RANDOM_BLOCK_STORAGE
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|rbs_dev_entries
comma
id|dir1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|I2O_CLASS_LAN
suffix:colon
id|i2o_proc_create_entries
c_func
(paren
id|dev
comma
id|lan_entries
comma
id|dir1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|i2o_proc_remove_controller
r_static
r_void
id|i2o_proc_remove_controller
c_func
(paren
r_struct
id|i2o_controller
op_star
id|pctrl
comma
r_struct
id|proc_dir_entry
op_star
id|parent
)paren
(brace
r_char
id|buff
(braket
l_int|10
)braket
suffix:semicolon
id|sprintf
c_func
(paren
id|buff
comma
l_string|&quot;iop%d&quot;
comma
id|pctrl-&gt;unit
)paren
suffix:semicolon
id|i2o_proc_remove_entries
c_func
(paren
id|generic_iop_entries
comma
id|pctrl-&gt;proc_entry
)paren
suffix:semicolon
id|remove_proc_entry
c_func
(paren
id|buff
comma
id|parent
)paren
suffix:semicolon
id|pctrl-&gt;proc_entry
op_assign
l_int|NULL
suffix:semicolon
)brace
DECL|function|create_i2o_procfs
r_static
r_int
id|create_i2o_procfs
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2o_controller
op_star
id|pctrl
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
id|i2o_proc_dir_root
op_assign
id|create_proc_entry
c_func
(paren
l_string|&quot;i2o&quot;
comma
id|S_IFDIR
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2o_proc_dir_root
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_I2O_CONTROLLERS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pctrl
op_assign
id|i2o_find_controller
c_func
(paren
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pctrl
)paren
(brace
id|i2o_proc_add_controller
c_func
(paren
id|pctrl
comma
id|i2o_proc_dir_root
)paren
suffix:semicolon
)brace
)brace
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|destroy_i2o_procfs
r_static
r_int
id|destroy_i2o_procfs
c_func
(paren
r_void
)paren
(brace
r_struct
id|i2o_controller
op_star
id|pctrl
op_assign
l_int|NULL
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|i2o_find_controller
c_func
(paren
l_int|0
)paren
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_I2O_CONTROLLERS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|pctrl
op_assign
id|i2o_find_controller
c_func
(paren
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|pctrl
)paren
(brace
id|i2o_proc_remove_controller
c_func
(paren
id|pctrl
comma
id|i2o_proc_dir_root
)paren
suffix:semicolon
)brace
)brace
suffix:semicolon
id|remove_proc_entry
c_func
(paren
l_string|&quot;i2o&quot;
comma
l_int|0
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef MODULE
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Intel Corporation&quot;
)paren
suffix:semicolon
id|MODULE_DESCRIPTION
c_func
(paren
l_string|&quot;I2O procfs Handler&quot;
)paren
suffix:semicolon
DECL|function|init_module
r_int
id|init_module
c_func
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|create_i2o_procfs
c_func
(paren
)paren
)paren
(brace
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i2o_install_handler
c_func
(paren
op_amp
id|i2o_proc_handler
)paren
OL
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;i2o_proc: Unable to install PROC handler.&bslash;n&quot;
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|proc_context
op_assign
id|i2o_proc_handler.context
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|cleanup_module
r_void
id|cleanup_module
c_func
(paren
r_void
)paren
(brace
id|destroy_i2o_procfs
c_func
(paren
)paren
suffix:semicolon
id|i2o_remove_handler
c_func
(paren
op_amp
id|i2o_proc_handler
)paren
suffix:semicolon
)brace
macro_line|#endif
eof
