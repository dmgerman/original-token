multiline_comment|/*&n;   * Copyright 1996 The Australian National University.&n;   * Copyright 1996 Fujitsu Laboratories Limited&n;   * &n;   * This software may be distributed under the terms of the Gnu&n;   * Public License version 2 or later&n;  */
multiline_comment|/*&n; *  linux/drivers/ap1000/ringbuf.c&n; *&n; * This provides the /proc/XX/ringbuf interface to the Tnet ring buffer&n; */
DECL|macro|_APLIB_
mdefine_line|#define _APLIB_
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/segment.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/ap1000/pgtapmmu.h&gt;
macro_line|#include &lt;asm/ap1000/apreg.h&gt;
macro_line|#include &lt;asm/ap1000/apservice.h&gt;
multiline_comment|/* we have a small number of reserved ring buffers to ensure that at&n;   least one parallel program can always run */
DECL|macro|RBUF_RESERVED
mdefine_line|#define RBUF_RESERVED 4
DECL|macro|RBUF_RESERVED_ORDER
mdefine_line|#define RBUF_RESERVED_ORDER 5
r_static
r_struct
(brace
DECL|member|rb_ptr
r_char
op_star
id|rb_ptr
suffix:semicolon
DECL|member|shared_ptr
r_char
op_star
id|shared_ptr
suffix:semicolon
DECL|member|used
r_int
id|used
suffix:semicolon
DECL|variable|reserved_ringbuf
)brace
id|reserved_ringbuf
(braket
id|RBUF_RESERVED
)braket
suffix:semicolon
DECL|function|ap_ringbuf_init
r_void
id|ap_ringbuf_init
c_func
(paren
r_void
)paren
(brace
r_int
id|i
comma
id|j
suffix:semicolon
r_char
op_star
id|rb_ptr
comma
op_star
id|shared_ptr
suffix:semicolon
r_int
id|rb_size
op_assign
id|PAGE_SIZE
op_star
(paren
l_int|1
op_lshift
id|RBUF_RESERVED_ORDER
)paren
suffix:semicolon
multiline_comment|/* preallocate some ringbuffers */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|RBUF_RESERVED
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|rb_ptr
op_assign
(paren
r_char
op_star
)paren
id|__get_free_pages
c_func
(paren
id|GFP_ATOMIC
comma
id|RBUF_RESERVED_ORDER
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;failed to preallocate ringbuf %d&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
id|MAP_NR
c_func
(paren
id|rb_ptr
)paren
suffix:semicolon
id|j
op_le
id|MAP_NR
c_func
(paren
id|rb_ptr
op_plus
id|rb_size
op_minus
l_int|1
)paren
suffix:semicolon
id|j
op_increment
)paren
(brace
id|set_bit
c_func
(paren
id|PG_reserved
comma
op_amp
id|mem_map
(braket
id|j
)braket
dot
id|flags
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|shared_ptr
op_assign
(paren
r_char
op_star
)paren
id|__get_free_page
c_func
(paren
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;failed to preallocate shared ptr %d&bslash;n&quot;
comma
id|i
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|set_bit
c_func
(paren
id|PG_reserved
comma
op_amp
id|mem_map
(braket
id|MAP_NR
c_func
(paren
id|shared_ptr
)paren
)braket
dot
id|flags
)paren
suffix:semicolon
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|used
op_assign
l_int|0
suffix:semicolon
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|rb_ptr
op_assign
id|rb_ptr
suffix:semicolon
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|shared_ptr
op_assign
id|shared_ptr
suffix:semicolon
)brace
)brace
DECL|function|exit_ringbuf
r_void
id|exit_ringbuf
c_func
(paren
r_struct
id|task_struct
op_star
id|tsk
)paren
(brace
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tsk-&gt;ringbuf
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|tsk-&gt;ringbuf-&gt;ringbuf
)paren
(brace
r_char
op_star
id|rb_ptr
op_assign
id|tsk-&gt;ringbuf-&gt;ringbuf
suffix:semicolon
r_char
op_star
id|shared_ptr
op_assign
id|tsk-&gt;ringbuf-&gt;shared
suffix:semicolon
r_int
id|order
op_assign
id|tsk-&gt;ringbuf-&gt;order
suffix:semicolon
r_int
id|rb_size
op_assign
id|PAGE_SIZE
op_star
(paren
l_int|1
op_lshift
id|order
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|RBUF_RESERVED
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|rb_ptr
op_eq
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|rb_ptr
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|i
OL
id|RBUF_RESERVED
)paren
(brace
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|used
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
r_for
c_loop
(paren
id|i
op_assign
id|MAP_NR
c_func
(paren
id|rb_ptr
)paren
suffix:semicolon
id|i
op_le
id|MAP_NR
c_func
(paren
id|rb_ptr
op_plus
id|rb_size
op_minus
l_int|1
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|clear_bit
c_func
(paren
id|PG_reserved
comma
op_amp
id|mem_map
(braket
id|i
)braket
dot
id|flags
)paren
suffix:semicolon
)brace
id|free_pages
c_func
(paren
(paren
r_int
)paren
id|rb_ptr
comma
id|order
)paren
suffix:semicolon
id|i
op_assign
id|MAP_NR
c_func
(paren
id|shared_ptr
)paren
suffix:semicolon
id|clear_bit
c_func
(paren
id|PG_reserved
comma
op_amp
id|mem_map
(braket
id|i
)braket
)paren
suffix:semicolon
id|free_page
c_func
(paren
(paren
r_int
)paren
id|shared_ptr
)paren
suffix:semicolon
)brace
)brace
id|kfree_s
c_func
(paren
id|tsk-&gt;ringbuf
comma
r_sizeof
(paren
op_star
(paren
id|tsk-&gt;ringbuf
)paren
)paren
)paren
suffix:semicolon
id|tsk-&gt;ringbuf
op_assign
l_int|NULL
suffix:semicolon
)brace
multiline_comment|/*&n; * map the ring buffer into users memory&n; */
DECL|function|cap_map
r_static
r_int
id|cap_map
c_func
(paren
r_int
id|rb_size
)paren
(brace
r_struct
id|task_struct
op_star
id|tsk
op_assign
id|current
suffix:semicolon
r_int
id|i
suffix:semicolon
r_char
op_star
id|rb_ptr
op_assign
l_int|NULL
suffix:semicolon
r_char
op_star
id|shared_ptr
op_assign
l_int|NULL
suffix:semicolon
r_int
id|order
op_assign
l_int|0
suffix:semicolon
r_int
id|error
comma
id|old_uid
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
(paren
r_char
op_star
)paren
id|RBUF_VBASE
comma
id|rb_size
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_return
id|error
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|MPP_IS_PAR_TASK
c_func
(paren
id|tsk-&gt;taskid
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;ringbuf_mmap called from non-parallel task&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tsk-&gt;ringbuf
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|rb_size
op_sub_assign
id|RBUF_RING_BUFFER_OFFSET
suffix:semicolon
id|rb_size
op_rshift_assign
l_int|1
suffix:semicolon
r_switch
c_cond
(paren
id|rb_size
op_div
l_int|1024
)paren
(brace
r_case
l_int|128
suffix:colon
id|order
op_assign
l_int|5
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
id|order
op_assign
l_int|7
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2048
suffix:colon
id|order
op_assign
l_int|9
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8192
suffix:colon
id|order
op_assign
l_int|11
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;ringbuf_mmap with invalid size %d&bslash;n&quot;
comma
id|rb_size
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|order
op_eq
id|RBUF_RESERVED_ORDER
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|RBUF_RESERVED
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|used
)paren
(brace
id|rb_ptr
op_assign
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|rb_ptr
suffix:semicolon
id|shared_ptr
op_assign
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|shared_ptr
suffix:semicolon
id|reserved_ringbuf
(braket
id|i
)braket
dot
id|used
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|rb_ptr
)paren
(brace
id|rb_ptr
op_assign
(paren
r_char
op_star
)paren
id|__get_free_pages
c_func
(paren
id|GFP_USER
comma
id|order
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|rb_ptr
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|MAP_NR
c_func
(paren
id|rb_ptr
)paren
suffix:semicolon
id|i
op_le
id|MAP_NR
c_func
(paren
id|rb_ptr
op_plus
id|rb_size
op_minus
l_int|1
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|set_bit
c_func
(paren
id|PG_reserved
comma
op_amp
id|mem_map
(braket
id|i
)braket
dot
id|flags
)paren
suffix:semicolon
)brace
id|shared_ptr
op_assign
(paren
r_char
op_star
)paren
id|__get_free_page
c_func
(paren
id|GFP_USER
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|shared_ptr
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|set_bit
c_func
(paren
id|PG_reserved
comma
op_amp
id|mem_map
(braket
id|MAP_NR
c_func
(paren
id|shared_ptr
)paren
)braket
dot
id|flags
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|rb_ptr
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|memset
c_func
(paren
id|rb_ptr
comma
l_int|0
comma
id|rb_size
)paren
suffix:semicolon
id|memset
c_func
(paren
id|shared_ptr
comma
l_int|0
comma
id|PAGE_SIZE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|remap_page_range
c_func
(paren
id|RBUF_VBASE
op_plus
id|RBUF_RING_BUFFER_OFFSET
comma
id|mmu_v2p
c_func
(paren
(paren
r_int
)paren
id|rb_ptr
)paren
comma
id|rb_size
comma
id|APMMU_PAGE_SHARED
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
r_if
c_cond
(paren
id|remap_page_range
c_func
(paren
id|RBUF_VBASE
op_plus
id|RBUF_RING_BUFFER_OFFSET
op_plus
id|rb_size
comma
id|mmu_v2p
c_func
(paren
(paren
r_int
)paren
id|rb_ptr
)paren
comma
id|rb_size
comma
id|APMMU_PAGE_SHARED
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
multiline_comment|/* the shared area */
r_if
c_cond
(paren
id|remap_page_range
c_func
(paren
id|RBUF_VBASE
op_plus
id|RBUF_SHARED_PAGE_OFF
comma
id|mmu_v2p
c_func
(paren
(paren
r_int
)paren
id|shared_ptr
)paren
comma
id|PAGE_SIZE
comma
id|APMMU_PAGE_SHARED
)paren
)paren
r_return
op_minus
id|EAGAIN
suffix:semicolon
macro_line|#if 0
multiline_comment|/* lock the ringbuffer in memory */
id|old_uid
op_assign
id|current-&gt;euid
suffix:semicolon
id|current-&gt;euid
op_assign
l_int|0
suffix:semicolon
id|error
op_assign
id|sys_mlock
c_func
(paren
id|RBUF_VBASE
comma
l_int|2
op_star
id|rb_size
op_plus
id|RBUF_RING_BUFFER_OFFSET
)paren
suffix:semicolon
id|current-&gt;euid
op_assign
id|old_uid
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;ringbuffer mlock failed&bslash;n&quot;
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
macro_line|#endif
multiline_comment|/* the queue pages */
DECL|macro|MAP_QUEUE
mdefine_line|#define MAP_QUEUE(offset,phys) &bslash;&n;&t;io_remap_page_range(RBUF_VBASE + offset, &bslash;&n;&t;&t;&t;    phys&lt;&lt;PAGE_SHIFT,PAGE_SIZE,APMMU_PAGE_SHARED,0xa)
id|MAP_QUEUE
c_func
(paren
id|RBUF_PUT_QUEUE
comma
l_int|0x00000
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_GET_QUEUE
comma
l_int|0x00001
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_SEND_QUEUE
comma
l_int|0x00040
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_XY_QUEUE
comma
l_int|0x00640
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_X_QUEUE
comma
l_int|0x00240
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_Y_QUEUE
comma
l_int|0x00440
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_XYG_QUEUE
comma
l_int|0x00600
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_XG_QUEUE
comma
l_int|0x00200
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_YG_QUEUE
comma
l_int|0x00400
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_CSI_QUEUE
comma
l_int|0x02004
)paren
suffix:semicolon
id|MAP_QUEUE
c_func
(paren
id|RBUF_FOP_QUEUE
comma
l_int|0x02005
)paren
suffix:semicolon
DECL|macro|MAP_QUEUE
macro_line|#undef MAP_QUEUE
r_if
c_cond
(paren
op_logical_neg
id|tsk-&gt;ringbuf
)paren
(brace
id|tsk-&gt;ringbuf
op_assign
(paren
r_void
op_star
)paren
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
(paren
id|tsk-&gt;ringbuf
)paren
)paren
comma
id|GFP_ATOMIC
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tsk-&gt;ringbuf
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|tsk-&gt;ringbuf
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|tsk-&gt;ringbuf
)paren
)paren
suffix:semicolon
id|tsk-&gt;ringbuf-&gt;ringbuf
op_assign
id|rb_ptr
suffix:semicolon
id|tsk-&gt;ringbuf-&gt;shared
op_assign
id|shared_ptr
suffix:semicolon
id|tsk-&gt;ringbuf-&gt;order
op_assign
id|order
suffix:semicolon
id|tsk-&gt;ringbuf-&gt;write_ptr
op_assign
id|mmu_v2p
c_func
(paren
(paren
r_int
)paren
id|rb_ptr
)paren
op_lshift
l_int|1
suffix:semicolon
id|tsk-&gt;ringbuf-&gt;vaddr
op_assign
id|RBUF_VBASE
suffix:semicolon
id|memset
c_func
(paren
id|tsk-&gt;ringbuf-&gt;vaddr
op_plus
id|RBUF_SHARED_PAGE_OFF
comma
l_int|0
comma
id|PAGE_SIZE
)paren
suffix:semicolon
(brace
r_struct
id|_kernel_cap_shared
op_star
id|_kernel
op_assign
(paren
r_struct
id|_kernel_cap_shared
op_star
)paren
id|tsk-&gt;ringbuf-&gt;vaddr
suffix:semicolon
id|_kernel-&gt;rbuf_read_ptr
op_assign
(paren
id|rb_size
op_rshift
l_int|5
)paren
op_minus
l_int|1
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|ringbuf_ioctl
id|ringbuf_ioctl
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
(brace
r_int
id|numcells
comma
op_star
id|phys_cells
suffix:semicolon
r_extern
r_struct
id|cap_init
id|cap_init
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|CAP_GETINIT
suffix:colon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
(paren
r_char
op_star
)paren
id|arg
comma
(paren
r_char
op_star
)paren
op_amp
id|cap_init
comma
r_sizeof
(paren
id|cap_init
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CAP_SYNC
suffix:colon
r_if
c_cond
(paren
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
(paren
r_void
op_star
)paren
id|arg
comma
r_sizeof
(paren
r_int
)paren
op_star
l_int|2
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|numcells
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
(paren
r_int
)paren
id|phys_cells
comma
(paren
(paren
r_int
op_star
)paren
id|arg
)paren
op_plus
l_int|1
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
id|phys_cells
comma
r_sizeof
(paren
r_int
)paren
op_star
id|numcells
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
r_return
id|ap_sync
c_func
(paren
id|numcells
comma
id|phys_cells
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CAP_SETGANG
suffix:colon
(brace
r_int
id|v
suffix:semicolon
r_if
c_cond
(paren
id|get_user
c_func
(paren
id|v
comma
(paren
r_int
op_star
)paren
id|arg
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
id|mpp_set_gang_factor
c_func
(paren
id|v
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|CAP_MAP
suffix:colon
r_return
id|cap_map
c_func
(paren
id|arg
)paren
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;unknown ringbuf ioctl %d&bslash;n&quot;
comma
id|cmd
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|variable|proc_ringbuf_operations
r_static
r_struct
id|file_operations
id|proc_ringbuf_operations
op_assign
(brace
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
multiline_comment|/* readdir */
l_int|NULL
comma
multiline_comment|/* poll */
id|ringbuf_ioctl
comma
multiline_comment|/* ioctl */
l_int|NULL
comma
multiline_comment|/* mmap */
l_int|NULL
comma
multiline_comment|/* no special open code */
l_int|NULL
comma
multiline_comment|/* flush */
l_int|NULL
comma
multiline_comment|/* no special release code */
l_int|NULL
multiline_comment|/* can&squot;t fsync */
)brace
suffix:semicolon
DECL|variable|proc_ringbuf_inode_operations
r_struct
id|inode_operations
id|proc_ringbuf_inode_operations
op_assign
(brace
op_amp
id|proc_ringbuf_operations
comma
multiline_comment|/* default base directory file-ops */
l_int|NULL
comma
multiline_comment|/* create */
l_int|NULL
comma
multiline_comment|/* lookup */
l_int|NULL
comma
multiline_comment|/* link */
l_int|NULL
comma
multiline_comment|/* unlink */
l_int|NULL
comma
multiline_comment|/* symlink */
l_int|NULL
comma
multiline_comment|/* mkdir */
l_int|NULL
comma
multiline_comment|/* rmdir */
l_int|NULL
comma
multiline_comment|/* mknod */
l_int|NULL
comma
multiline_comment|/* rename */
l_int|NULL
comma
multiline_comment|/* readlink */
l_int|NULL
comma
multiline_comment|/* readpage */
l_int|NULL
comma
multiline_comment|/* writepage */
l_int|NULL
comma
multiline_comment|/* bmap */
l_int|NULL
comma
multiline_comment|/* truncate */
l_int|NULL
multiline_comment|/* permission */
)brace
suffix:semicolon
eof
