multiline_comment|/*&n;    bttv-cards.c  --  this file has card-specific stuff&n;&n;&n;    bttv - Bt848 frame grabber driver&n;&n;    Copyright (C) 1996,97,98 Ralph  Metzler (rjkm@thp.uni-koeln.de)&n;                           &amp; Marcus Metzler (mocm@thp.uni-koeln.de)&n;    (c) 1999,2000 Gerd Knorr &lt;kraxel@goldbach.in-berlin.de&gt;&n;&n;    This program is free software; you can redistribute it and/or modify&n;    it under the terms of the GNU General Public License as published by&n;    the Free Software Foundation; either version 2 of the License, or&n;    (at your option) any later version.&n;&n;    This program is distributed in the hope that it will be useful,&n;    but WITHOUT ANY WARRANTY; without even the implied warranty of&n;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&n;    GNU General Public License for more details.&n;&n;    You should have received a copy of the GNU General Public License&n;    along with this program; if not, write to the Free Software&n;    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.&n;    &n;*/
DECL|macro|__NO_VERSION__
mdefine_line|#define __NO_VERSION__ 1
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/kmod.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &quot;bttv.h&quot;
macro_line|#include &quot;tuner.h&quot;
multiline_comment|/* fwd decl */
r_static
r_void
id|hauppauge_eeprom
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
suffix:semicolon
r_static
r_void
id|hauppauge_boot_msp34xx
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
suffix:semicolon
r_static
r_void
id|init_PXC200
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
suffix:semicolon
r_static
r_void
id|init_tea5757
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|card
comma
l_string|&quot;1-4i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|pll
comma
l_string|&quot;1-4i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|autoload
comma
l_string|&quot;i&quot;
)paren
suffix:semicolon
DECL|variable|card
r_static
r_int
r_int
id|card
(braket
l_int|4
)braket
op_assign
(brace
op_minus
l_int|1
comma
op_minus
l_int|1
comma
op_minus
l_int|1
comma
op_minus
l_int|1
)brace
suffix:semicolon
DECL|variable|pll
r_static
r_int
r_int
id|pll
(braket
l_int|4
)braket
op_assign
(brace
op_minus
l_int|1
comma
op_minus
l_int|1
comma
op_minus
l_int|1
comma
op_minus
l_int|1
)brace
suffix:semicolon
macro_line|#ifdef MODULE
DECL|variable|autoload
r_static
r_int
r_int
id|autoload
op_assign
l_int|1
suffix:semicolon
macro_line|#else
DECL|variable|autoload
r_static
r_int
r_int
id|autoload
op_assign
l_int|0
suffix:semicolon
macro_line|#endif
multiline_comment|/* ----------------------------------------------------------------------- */
multiline_comment|/* list of card IDs for bt878+ cards                                       */
DECL|struct|CARD
r_static
r_struct
id|CARD
(brace
DECL|member|id
r_int
id|id
suffix:semicolon
DECL|member|cardnr
r_int
id|cardnr
suffix:semicolon
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
DECL|variable|__devinitdata
)brace
id|cards
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
l_int|0x00011002
comma
id|BTTV_HAUPPAUGE878
comma
l_string|&quot;ATI TV Wonder&quot;
)brace
comma
(brace
l_int|0x00011461
comma
id|BTTV_AVPHONE98
comma
l_string|&quot;AVerMedia TVPhone98&quot;
)brace
comma
(brace
l_int|0x00021461
comma
id|BTTV_AVERMEDIA98
comma
l_string|&quot;Avermedia TVCapture 98&quot;
)brace
comma
(brace
l_int|0x00031461
comma
id|BTTV_AVPHONE98
comma
l_string|&quot;AVerMedia TVPhone98&quot;
)brace
comma
(brace
l_int|0x00041461
comma
id|BTTV_AVPHONE98
comma
l_string|&quot;AVerMedia TVPhone98&quot;
)brace
comma
(brace
l_int|0x10b42636
comma
id|BTTV_HAUPPAUGE878
comma
l_string|&quot;STB ???&quot;
)brace
comma
(brace
l_int|0x1118153b
comma
id|BTTV_TERRATVALUE
comma
l_string|&quot;Terratec TV Value&quot;
)brace
comma
(brace
l_int|0x1123153b
comma
id|BTTV_TERRATVRADIO
comma
l_string|&quot;Terratec TV/Radio+&quot;
)brace
comma
(brace
l_int|0x1200bd11
comma
id|BTTV_PINNACLERAVE
comma
l_string|&quot;Pinnacle PCTV Rave&quot;
)brace
comma
(brace
l_int|0x13eb0070
comma
id|BTTV_HAUPPAUGE878
comma
l_string|&quot;Hauppauge WinTV&quot;
)brace
comma
(brace
l_int|0x18501851
comma
id|BTTV_CHRONOS_VS2
comma
l_string|&quot;Chronos Video Shuttle II&quot;
)brace
comma
(brace
l_int|0x18521852
comma
id|BTTV_TYPHOON_TVIEW
comma
l_string|&quot;Typhoon TView TV/FM Tuner&quot;
)brace
comma
(brace
l_int|0x217d6606
comma
id|BTTV_WINFAST2000
comma
l_string|&quot;Leadtek WinFast TV 2000&quot;
)brace
comma
(brace
l_int|0x263610b4
comma
id|BTTV_STB2
comma
l_string|&quot;STB TV PCI FM, P/N 6000704&quot;
)brace
comma
(brace
l_int|0x3000144f
comma
id|BTTV_MAGICTVIEW063
comma
l_string|&quot;TView 99 (CPH063)&quot;
)brace
comma
(brace
l_int|0x300014ff
comma
id|BTTV_MAGICTVIEW061
comma
l_string|&quot;TView 99 (CPH061)&quot;
)brace
comma
(brace
l_int|0x3002144f
comma
id|BTTV_MAGICTVIEW061
comma
l_string|&quot;Askey Magic TView&quot;
)brace
comma
(brace
l_int|0x300214ff
comma
id|BTTV_PHOEBE_TVMAS
comma
l_string|&quot;Phoebe TV Master&quot;
)brace
comma
(brace
l_int|0x400a15b0
comma
id|BTTV_ZOLTRIX_GENIE
comma
l_string|&quot;Zoltrix Genie TV&quot;
)brace
comma
(brace
l_int|0x402010fc
comma
l_int|0
multiline_comment|/* no tvcards entry yet */
comma
l_string|&quot;I-O Data Co. GV-BCV3/PCI&quot;
)brace
comma
macro_line|#if 0 /* probably wrong */
(brace
l_int|0x14610002
comma
id|BTTV_AVERMEDIA98
comma
l_string|&quot;Avermedia TVCapture 98&quot;
)brace
comma
(brace
l_int|0x6606217d
comma
id|BTTV_WINFAST2000
comma
l_string|&quot;Leadtek WinFast TV 2000&quot;
)brace
comma
macro_line|#endif
(brace
l_int|0
comma
op_minus
l_int|1
comma
l_int|NULL
)brace
)brace
suffix:semicolon
multiline_comment|/* ----------------------------------------------------------------------- */
multiline_comment|/* array with description for bt848 / bt878 tv/grabber cards               */
DECL|variable|bttv_tvcards
r_struct
id|tvcard
id|bttv_tvcards
(braket
)braket
op_assign
(brace
multiline_comment|/* 0x00 */
(brace
l_string|&quot; *** UNKNOWN *** &quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;MIRO PCTV&quot;
comma
l_int|4
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|15
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|2
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|10
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Hauppauge old&quot;
comma
l_int|4
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;STB&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|4
comma
l_int|0
comma
l_int|2
comma
l_int|3
comma
l_int|1
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Intel&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
op_minus
l_int|1
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Diamond DTV2000&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|3
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|1
comma
l_int|3
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;AVerMedia TVPhone&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|3
comma
l_int|15
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|12
comma
l_int|4
comma
l_int|11
comma
l_int|11
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;MATRIX-Vision MV-Delta&quot;
comma
l_int|5
comma
l_int|1
comma
op_minus
l_int|1
comma
l_int|3
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
multiline_comment|/* 0x08 */
(brace
l_string|&quot;Fly Video II&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xc00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0xc00
comma
l_int|0x800
comma
l_int|0x400
comma
l_int|0xc00
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;TurboTV&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|3
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Hauppauge new (bt878)&quot;
comma
l_int|4
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|0
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;MIRO PCTV pro&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|65551
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|1
comma
l_int|65537
comma
l_int|0
comma
l_int|0
comma
l_int|10
)brace
comma
l_int|0
comma
multiline_comment|/* 3, 1, 0, 2, 0x3004F, { 2, 3, 1, 1}, {1, 0x10011, 5, 0,10}, 0x3004F, */
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;ADS Technologies Channel Surfer TV&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|15
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|13
comma
l_int|14
comma
l_int|11
comma
l_int|7
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;AVerMedia TVCapture 98&quot;
comma
l_int|3
comma
l_int|4
comma
l_int|0
comma
l_int|2
comma
l_int|15
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|13
comma
l_int|14
comma
l_int|11
comma
l_int|7
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Aimslab VHX&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Zoltrix TV-Max&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|15
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|10
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
multiline_comment|/* 0x10 */
(brace
l_string|&quot;Pixelview PlayTV (bt878)&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x01fe00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x01c000
comma
l_int|0
comma
l_int|0x018000
comma
l_int|0x014000
comma
l_int|0x002000
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Leadtek WinView 601&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x8300f8
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x4fa007
comma
l_int|0xcfa007
comma
l_int|0xcfa007
comma
l_int|0xcfa007
comma
l_int|0xcfa007
comma
l_int|0xcfa007
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;AVEC Intercapture&quot;
comma
l_int|3
comma
l_int|2
comma
l_int|0
comma
l_int|2
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;LifeView FlyKit w/o Tuner&quot;
comma
l_int|3
comma
l_int|1
comma
op_minus
l_int|1
comma
op_minus
l_int|1
comma
l_int|0x8dff00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;CEI Raffles Card&quot;
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Lucky Star Image World ConferenceTV&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x00fffe07
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|131072
comma
l_int|1
comma
l_int|1638400
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
id|TUNER_PHILIPS_PAL_I
)brace
comma
(brace
l_string|&quot;Phoebe Tv Master + FM&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xc00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|0x800
comma
l_int|0x400
comma
l_int|0xc00
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Modular Technology MM205 PCTV, bt878&quot;
comma
l_int|2
comma
l_int|1
comma
l_int|0
comma
op_minus
l_int|1
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
multiline_comment|/* 0x18 */
(brace
l_string|&quot;Askey/Typhoon/Anubis Magic TView CPH051/061 (bt878)&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xe00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x400
comma
l_int|0x400
comma
l_int|0x400
comma
l_int|0x400
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Terratec/Vobis TV-Boostar&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|16777215
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|131072
comma
l_int|1
comma
l_int|1638400
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Newer Hauppauge WinCam (bt878)&quot;
comma
l_int|4
comma
l_int|1
comma
l_int|0
comma
l_int|3
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|0
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;MAXI TV Video PCI2&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xffff
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|0xc00
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
id|TUNER_PHILIPS_SECAM
)brace
comma
(brace
l_string|&quot;Terratec TerraTV+&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x70000
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x20000
comma
l_int|0x30000
comma
l_int|0x00000
comma
l_int|0x10000
comma
l_int|0x40000
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Imagenation PXC200&quot;
comma
l_int|5
comma
l_int|1
comma
op_minus
l_int|1
comma
l_int|4
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;FlyVideo 98&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x8dff00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0x8dff00
comma
l_int|0x8df700
comma
l_int|0x8de700
comma
l_int|0x8dff00
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;iProTV&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
multiline_comment|/* 0x20 */
(brace
l_string|&quot;Intel Create and Share PCI&quot;
comma
l_int|4
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
comma
l_int|4
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Terratec TerraTValue&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xffff00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x500
comma
l_int|0
comma
l_int|0x300
comma
l_int|0x900
comma
l_int|0x900
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Leadtek WinFast 2000&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xfff000
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x621000
comma
l_int|0x6ddf07
comma
l_int|0x621100
comma
l_int|0x620000
comma
l_int|0xE210000
comma
l_int|0x620000
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Chronos Video Shuttle II&quot;
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|0x1800
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|0x1000
comma
l_int|0x1000
comma
l_int|0x0800
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Typhoon TView TV/FM Tuner&quot;
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|2
comma
l_int|0x1800
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0x800
comma
l_int|0
comma
l_int|0
comma
l_int|0x1800
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;PixelView PlayTV pro&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xff
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x21
comma
l_int|0x20
comma
l_int|0x24
comma
l_int|0x2c
comma
l_int|0x29
comma
l_int|0x29
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;TView99 CPH063&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x551e00
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x551400
comma
l_int|0x551200
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0x551200
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Pinnacle PCTV Rave&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x03000F
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|2
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
multiline_comment|/* 0x28 */
(brace
l_string|&quot;STB2&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|7
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|4
comma
l_int|0
comma
l_int|2
comma
l_int|3
comma
l_int|1
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;AVerMedia TVPhone 98&quot;
comma
l_int|3
comma
l_int|4
comma
l_int|0
comma
l_int|2
comma
l_int|4
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|13
comma
l_int|14
comma
l_int|11
comma
l_int|7
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
l_int|5
)brace
comma
(brace
l_string|&quot;ProVideo PV951&quot;
comma
multiline_comment|/* pic16c54 */
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|PLL_28
comma
l_int|1
)brace
comma
(brace
l_string|&quot;Little OnAir TV&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xe00b
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0xff9ff6
comma
l_int|0xff9ff6
comma
l_int|0xff1ff7
comma
l_int|0
comma
l_int|0xff3ffc
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Sigma TVII-FM&quot;
comma
l_int|2
comma
l_int|1
comma
l_int|0
comma
op_minus
l_int|1
comma
l_int|3
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|3
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|PLL_NONE
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;MATRIX-Vision MV-Delta 2&quot;
comma
l_int|5
comma
l_int|1
comma
op_minus
l_int|1
comma
l_int|3
comma
l_int|0
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|0
)brace
comma
(brace
l_int|0
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;Zoltrix Genie TV&quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0xbcf03f
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0xbc803f
comma
l_int|0
comma
l_int|0xbcb03f
comma
l_int|0
comma
l_int|0xbcb03f
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|PLL_28
comma
l_int|5
)brace
comma
(brace
l_string|&quot;Terratec TV/Radio+&quot;
comma
multiline_comment|/* Radio ?? */
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|0x1f0000
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0xe2ffff
comma
l_int|0xebffff
comma
l_int|0
comma
l_int|0
comma
l_int|0xe0ffff
comma
l_int|0xe2ffff
)brace
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
id|PLL_35
comma
l_int|1
)brace
comma
multiline_comment|/* 0x30 */
(brace
l_string|&quot;Dynalink Magic TView &quot;
comma
l_int|3
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|15
comma
(brace
l_int|2
comma
l_int|3
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|2
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
)brace
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
id|PLL_28
comma
op_minus
l_int|1
)brace
comma
)brace
suffix:semicolon
DECL|variable|bttv_num_tvcards
r_const
r_int
id|bttv_num_tvcards
op_assign
(paren
r_sizeof
(paren
id|bttv_tvcards
)paren
op_div
r_sizeof
(paren
r_struct
id|tvcard
)paren
)paren
suffix:semicolon
multiline_comment|/* ----------------------------------------------------------------------- */
DECL|variable|eeprom_data
r_static
r_int
r_char
id|eeprom_data
(braket
l_int|256
)braket
suffix:semicolon
DECL|function|bttv_dump_eeprom
r_static
r_void
id|__devinit
id|bttv_dump_eeprom
c_func
(paren
r_struct
id|bttv
op_star
id|btv
comma
r_int
id|addr
)paren
(brace
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|bttv_verbose
OL
l_int|2
)paren
r_return
suffix:semicolon
multiline_comment|/* for debugging: dump eeprom to syslog */
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;bttv%d: dump eeprom @ 0x%02x&bslash;n&quot;
comma
id|btv-&gt;nr
comma
id|addr
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;  %02x:&quot;
comma
id|i
)paren
suffix:semicolon
r_do
(brace
id|printk
c_func
(paren
l_string|&quot; %02x&quot;
comma
id|eeprom_data
(braket
id|i
op_increment
)braket
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|i
op_mod
l_int|16
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|bttv_idcard_eeprom
r_static
r_int
id|__devinit
id|bttv_idcard_eeprom
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
r_int
id|id
suffix:semicolon
r_int
id|i
comma
id|n
suffix:semicolon
id|id
op_assign
(paren
id|eeprom_data
(braket
l_int|252
)braket
op_lshift
l_int|24
)paren
op_or
(paren
id|eeprom_data
(braket
l_int|253
)braket
op_lshift
l_int|16
)paren
op_or
(paren
id|eeprom_data
(braket
l_int|254
)braket
op_lshift
l_int|8
)paren
op_or
(paren
id|eeprom_data
(braket
l_int|255
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|id
op_eq
l_int|0
op_logical_or
id|id
op_eq
l_int|0xffffffff
)paren
r_return
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* look for the card */
id|btv-&gt;cardid
op_assign
id|id
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
op_minus
l_int|1
comma
id|i
op_assign
l_int|0
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|id
op_ne
l_int|0
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|id
op_eq
id|id
)paren
id|n
op_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
id|n
op_ne
op_minus
l_int|1
)paren
(brace
multiline_comment|/* found it */
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;bttv%d: card id: %s (0x%08x) =&gt; card=%d&bslash;n&quot;
comma
id|btv-&gt;nr
comma
id|cards
(braket
id|n
)braket
dot
id|name
comma
id|id
comma
id|cards
(braket
id|n
)braket
dot
id|cardnr
)paren
suffix:semicolon
r_return
id|cards
(braket
id|n
)braket
dot
id|cardnr
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* 404 */
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;bttv%d: id: unknown (0x%08x)&bslash;n&quot;
comma
id|btv-&gt;nr
comma
id|id
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;please mail id, board name and &quot;
l_string|&quot;the correct card= insmod option to &quot;
l_string|&quot;kraxel@goldbach.in-berlin.de&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
)brace
macro_line|#ifndef HAVE_TVAUDIO
multiline_comment|/* can tda9855.c handle this too maybe? */
DECL|function|init_tda9840
r_static
r_void
id|__devinit
id|init_tda9840
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
multiline_comment|/* Horrible Hack */
id|bttv_I2CWrite
c_func
(paren
id|btv
comma
id|I2C_TDA9840
comma
id|TDA9840_SW
comma
l_int|0x2a
comma
l_int|1
)paren
suffix:semicolon
multiline_comment|/* sound mode switching */
multiline_comment|/* 00 - mute&n;           10 - mono / averaged stereo&n;           2a - stereo&n;           12 - dual A&n;           1a - dual AB&n;           16 - dual BA&n;           1e - dual B&n;           7a - external */
)brace
macro_line|#endif
DECL|function|bttv_idcard
r_void
id|__devinit
id|bttv_idcard
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
r_int
id|type
comma
id|eeprom
op_assign
l_int|0
suffix:semicolon
id|btwrite
c_func
(paren
l_int|0
comma
id|BT848_GPIO_OUT_EN
)paren
suffix:semicolon
multiline_comment|/* try to autodetect the card */
multiline_comment|/* many bt878 cards have a eeprom @ 0xa0 =&gt; read ID&n;&t;   and try to identify it */
r_if
c_cond
(paren
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_HAUPEE
comma
l_string|&quot;eeprom&quot;
)paren
op_ge
l_int|0
)paren
(brace
id|eeprom
op_assign
l_int|0xa0
suffix:semicolon
id|bttv_readee
c_func
(paren
id|btv
comma
id|eeprom_data
comma
l_int|0xa0
)paren
suffix:semicolon
id|bttv_dump_eeprom
c_func
(paren
id|btv
comma
l_int|0xa0
)paren
suffix:semicolon
multiline_comment|/* DEBUG */
id|type
op_assign
id|bttv_idcard_eeprom
c_func
(paren
id|btv
)paren
suffix:semicolon
r_if
c_cond
(paren
op_minus
l_int|1
op_ne
id|type
)paren
(brace
id|btv-&gt;type
op_assign
id|type
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|btv-&gt;id
op_le
l_int|849
)paren
(brace
multiline_comment|/* for unknown bt848, assume old Hauppauge */
id|btv-&gt;type
op_assign
id|BTTV_HAUPPAUGE
suffix:semicolon
)brace
multiline_comment|/* STB cards have a eeprom @ 0xae (old bt848) */
)brace
r_else
r_if
c_cond
(paren
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_STBEE
comma
l_string|&quot;eeprom&quot;
)paren
op_ge
l_int|0
)paren
(brace
id|btv-&gt;type
op_assign
id|BTTV_STB
suffix:semicolon
)brace
multiline_comment|/* let the user override the autodetected type */
r_if
c_cond
(paren
id|card
(braket
id|btv-&gt;nr
)braket
op_ge
l_int|0
op_logical_and
id|card
(braket
id|btv-&gt;nr
)braket
OL
id|bttv_num_tvcards
)paren
id|btv-&gt;type
op_assign
id|card
(braket
id|btv-&gt;nr
)braket
suffix:semicolon
multiline_comment|/* print which card config we are using */
id|sprintf
c_func
(paren
id|btv-&gt;video_dev.name
comma
l_string|&quot;BT%d%s(%.23s)&quot;
comma
id|btv-&gt;id
comma
(paren
id|btv-&gt;id
op_eq
l_int|848
op_logical_and
id|btv-&gt;revision
op_eq
l_int|0x12
)paren
ques
c_cond
l_string|&quot;A&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|name
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;bttv%d: model: %s [%s]&bslash;n&quot;
comma
id|btv-&gt;nr
comma
id|btv-&gt;video_dev.name
comma
(paren
id|card
(braket
id|btv-&gt;nr
)braket
op_ge
l_int|0
op_logical_and
id|card
(braket
id|btv-&gt;nr
)braket
OL
id|bttv_num_tvcards
)paren
ques
c_cond
l_string|&quot;insmod option&quot;
suffix:colon
l_string|&quot;autodetected&quot;
)paren
suffix:semicolon
multiline_comment|/* board specific initialisations */
r_if
c_cond
(paren
id|btv-&gt;type
op_eq
id|BTTV_MIRO
op_logical_or
id|btv-&gt;type
op_eq
id|BTTV_MIROPRO
)paren
(brace
multiline_comment|/* auto detect tuner for MIRO cards */
id|btv-&gt;tuner_type
op_assign
(paren
(paren
id|btread
c_func
(paren
id|BT848_GPIO_DATA
)paren
op_rshift
l_int|10
)paren
op_minus
l_int|1
)paren
op_amp
l_int|7
suffix:semicolon
macro_line|#if 0
r_if
c_cond
(paren
id|btv-&gt;type
op_eq
id|BTTV_MIROPRO
)paren
(brace
r_if
c_cond
(paren
id|bttv_verbose
)paren
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Initializing TEA5757...&bslash;n&quot;
)paren
suffix:semicolon
id|init_tea5757
c_func
(paren
id|btv
)paren
suffix:semicolon
)brace
macro_line|#endif
)brace
r_if
c_cond
(paren
id|btv-&gt;type
op_eq
id|BTTV_HAUPPAUGE
op_logical_or
id|btv-&gt;type
op_eq
id|BTTV_HAUPPAUGE878
)paren
(brace
multiline_comment|/* pick up some config infos from the eeprom */
r_if
c_cond
(paren
l_int|0xa0
op_ne
id|eeprom
)paren
(brace
id|eeprom
op_assign
l_int|0xa0
suffix:semicolon
id|bttv_readee
c_func
(paren
id|btv
comma
id|eeprom_data
comma
l_int|0xa0
)paren
suffix:semicolon
)brace
id|hauppauge_eeprom
c_func
(paren
id|btv
)paren
suffix:semicolon
id|hauppauge_boot_msp34xx
c_func
(paren
id|btv
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|btv-&gt;type
op_eq
id|BTTV_PXC200
)paren
id|init_PXC200
c_func
(paren
id|btv
)paren
suffix:semicolon
multiline_comment|/* pll configuration */
r_if
c_cond
(paren
op_logical_neg
(paren
id|btv-&gt;id
op_eq
l_int|848
op_logical_and
id|btv-&gt;revision
op_eq
l_int|0x11
)paren
)paren
(brace
multiline_comment|/* defaults from card list */
r_if
c_cond
(paren
id|PLL_28
op_eq
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|pll
)paren
(brace
id|btv-&gt;pll.pll_ifreq
op_assign
l_int|28636363
suffix:semicolon
id|btv-&gt;pll.pll_crystal
op_assign
id|BT848_IFORM_XT0
suffix:semicolon
)brace
multiline_comment|/* insmod options can override */
r_switch
c_cond
(paren
id|pll
(braket
id|btv-&gt;nr
)braket
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/* none */
id|btv-&gt;pll.pll_crystal
op_assign
l_int|0
suffix:semicolon
id|btv-&gt;pll.pll_ifreq
op_assign
l_int|0
suffix:semicolon
id|btv-&gt;pll.pll_ofreq
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
multiline_comment|/* 28 MHz */
id|btv-&gt;pll.pll_ifreq
op_assign
l_int|28636363
suffix:semicolon
id|btv-&gt;pll.pll_ofreq
op_assign
l_int|0
suffix:semicolon
id|btv-&gt;pll.pll_crystal
op_assign
id|BT848_IFORM_XT0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* 35 MHz */
id|btv-&gt;pll.pll_ifreq
op_assign
l_int|35468950
suffix:semicolon
id|btv-&gt;pll.pll_ofreq
op_assign
l_int|0
suffix:semicolon
id|btv-&gt;pll.pll_crystal
op_assign
id|BT848_IFORM_XT1
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* tuner configuration */
r_if
c_cond
(paren
op_minus
l_int|1
op_ne
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tuner_type
)paren
id|btv-&gt;tuner_type
op_assign
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tuner_type
suffix:semicolon
r_if
c_cond
(paren
id|btv-&gt;tuner_type
op_ne
op_minus
l_int|1
)paren
id|bttv_call_i2c_clients
c_func
(paren
id|btv
comma
id|TUNER_SET_TYPE
comma
op_amp
id|btv-&gt;tuner_type
)paren
suffix:semicolon
multiline_comment|/* try to detect audio/fader chips */
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|msp34xx
op_logical_and
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_MSP3400
comma
l_string|&quot;MSP34xx&quot;
)paren
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;msp3400&quot;
)paren
suffix:semicolon
)brace
macro_line|#ifndef HAVE_TVAUDIO
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda8425
op_logical_and
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_TDA8425
comma
l_string|&quot;TDA8425&quot;
)paren
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tda8425&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda9840
op_logical_and
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_TDA9840
comma
l_string|&quot;TDA9840&quot;
)paren
op_ge
l_int|0
)paren
(brace
id|init_tda9840
c_func
(paren
id|btv
)paren
suffix:semicolon
id|btv-&gt;audio_chip
op_assign
id|TDA9840
suffix:semicolon
multiline_comment|/* move this to a module too? */
id|init_tda9840
c_func
(paren
id|btv
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda985x
op_logical_and
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_TDA9850
comma
l_string|&quot;TDA985x&quot;
)paren
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tda985x&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tea63xx
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tea6300&quot;
)paren
suffix:semicolon
)brace
macro_line|#else
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda8425
op_logical_or
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda9840
op_logical_or
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda985x
op_logical_or
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tea63xx
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tvaudio&quot;
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda9875
op_logical_and
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_TDA9875
comma
l_string|&quot;TDA9875&quot;
)paren
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tda9875&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tda7432
op_logical_and
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_TDA7432
comma
l_string|&quot;TDA7432&quot;
)paren
op_ge
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tda7432&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tea64xx
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tea6420&quot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_tvcards
(braket
id|btv-&gt;type
)braket
dot
id|tuner
op_ne
op_minus
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|autoload
)paren
id|request_module
c_func
(paren
l_string|&quot;tuner&quot;
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* ----------------------------------------------------------------------- */
multiline_comment|/* some hauppauge specific stuff                                           */
DECL|struct|HAUPPAUGE_TUNER
r_static
r_struct
id|HAUPPAUGE_TUNER
(brace
DECL|member|id
r_int
id|id
suffix:semicolon
DECL|member|name
r_char
op_star
id|name
suffix:semicolon
)brace
DECL|variable|__devinitdata
id|hauppauge_tuner
(braket
)braket
id|__devinitdata
op_assign
(brace
(brace
id|TUNER_ABSENT
comma
l_string|&quot;&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;External&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Unspecified&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FI1216&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_SECAM
comma
l_string|&quot;Philips FI1216MF&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_NTSC
comma
l_string|&quot;Philips FI1236&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FI1246&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FI1256&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_PAL
comma
l_string|&quot;Philips FI1216 MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_SECAM
comma
l_string|&quot;Philips FI1216MF MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_NTSC
comma
l_string|&quot;Philips FI1236 MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_PAL_I
comma
l_string|&quot;Philips FI1246 MK2&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FI1256 MK2&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Temic 4032FY5&quot;
)brace
comma
(brace
id|TUNER_TEMIC_PAL
comma
l_string|&quot;Temic 4002FH5&quot;
)brace
comma
(brace
id|TUNER_TEMIC_PAL_I
comma
l_string|&quot;Temic 4062FY5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FR1216 MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_SECAM
comma
l_string|&quot;Philips FR1216MF MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_NTSC
comma
l_string|&quot;Philips FR1236 MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_PAL_I
comma
l_string|&quot;Philips FR1246 MK2&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FR1256 MK2&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_PAL
comma
l_string|&quot;Philips FM1216&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FM1216MF&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_NTSC
comma
l_string|&quot;Philips FM1236&quot;
)brace
comma
(brace
id|TUNER_PHILIPS_PAL_I
comma
l_string|&quot;Philips FM1246&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FM1256&quot;
)brace
comma
(brace
id|TUNER_TEMIC_4036FY5_NTSC
comma
l_string|&quot;Temic 4036FY5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Samsung TCPN9082D&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Samsung TCPM9092P&quot;
)brace
comma
(brace
id|TUNER_TEMIC_PAL
comma
l_string|&quot;Temic 4006FH5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Samsung TCPN9085D&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Samsung TCPB9085P&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Samsung TCPL9091P&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Temic 4039FR5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FQ1216 ME&quot;
)brace
comma
(brace
id|TUNER_TEMIC_PAL_I
comma
l_string|&quot;Temic 4066FY5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips TD1536&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips TD1536D&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FMR1236&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Philips FI1256MP&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Samsung TCPQ9091P&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Temic 4006FN5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Temic 4009FR5&quot;
)brace
comma
(brace
id|TUNER_ABSENT
comma
l_string|&quot;Temic 4046FM5&quot;
)brace
comma
)brace
suffix:semicolon
DECL|function|hauppauge_eeprom
r_static
r_void
id|__devinit
id|hauppauge_eeprom
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
r_if
c_cond
(paren
id|eeprom_data
(braket
l_int|9
)braket
OL
r_sizeof
(paren
id|hauppauge_tuner
)paren
op_div
r_sizeof
(paren
r_struct
id|HAUPPAUGE_TUNER
)paren
)paren
(brace
id|btv-&gt;tuner_type
op_assign
id|hauppauge_tuner
(braket
id|eeprom_data
(braket
l_int|9
)braket
)braket
dot
id|id
suffix:semicolon
r_if
c_cond
(paren
id|bttv_verbose
)paren
id|printk
c_func
(paren
l_string|&quot;bttv%d: Hauppauge eeprom: tuner=%s (%d)&bslash;n&quot;
comma
id|btv-&gt;nr
comma
id|hauppauge_tuner
(braket
id|eeprom_data
(braket
l_int|9
)braket
)braket
dot
id|name
comma
id|btv-&gt;tuner_type
)paren
suffix:semicolon
)brace
)brace
DECL|function|hauppauge_boot_msp34xx
r_static
r_void
id|__devinit
id|hauppauge_boot_msp34xx
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/* reset/enable the MSP on some Hauppauge cards */
multiline_comment|/* Thanks to Ky&#xfffd;sti M&#xfffd;lkki (kmalkki@cc.hut.fi)! */
id|btaor
c_func
(paren
l_int|32
comma
op_complement
l_int|32
comma
id|BT848_GPIO_OUT_EN
)paren
suffix:semicolon
id|btaor
c_func
(paren
l_int|0
comma
op_complement
l_int|32
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|2500
)paren
suffix:semicolon
id|btaor
c_func
(paren
l_int|32
comma
op_complement
l_int|32
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bttv_verbose
)paren
id|printk
c_func
(paren
l_string|&quot;bttv%d: Hauppauge msp34xx: reset line init&bslash;n&quot;
comma
id|btv-&gt;nr
)paren
suffix:semicolon
multiline_comment|/* look if the msp3400 driver is already registered */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|I2C_CLIENTS_MAX
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|btv-&gt;i2c_clients
(braket
id|i
)braket
op_ne
l_int|NULL
op_logical_and
id|btv-&gt;i2c_clients
(braket
id|i
)braket
op_member_access_from_pointer
id|driver-&gt;id
op_eq
id|I2C_DRIVERID_MSP3400
)paren
(brace
r_return
suffix:semicolon
)brace
)brace
multiline_comment|/* if not: look for the chip ... */
r_if
c_cond
(paren
id|bttv_I2CRead
c_func
(paren
id|btv
comma
id|I2C_MSP3400
comma
l_string|&quot;MSP34xx&quot;
)paren
)paren
(brace
multiline_comment|/* ... if found re-register to trigger a i2c bus rescan, */
multiline_comment|/*     this time with the msp34xx chip activated */
id|i2c_bit_del_bus
c_func
(paren
op_amp
id|btv-&gt;i2c_adap
)paren
suffix:semicolon
id|i2c_bit_add_bus
c_func
(paren
op_amp
id|btv-&gt;i2c_adap
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/* ----------------------------------------------------------------------- */
multiline_comment|/*  Imagenation L-Model PXC200 Framegrabber */
multiline_comment|/*  This is basically the same procedure as &n; *  used by Alessandro Rubini in his pxc200 &n; *  driver, but using BTTV functions */
DECL|function|init_PXC200
r_static
r_void
id|__devinit
id|init_PXC200
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
r_static
r_const
r_int
id|vals
(braket
)braket
op_assign
(brace
l_int|0x08
comma
l_int|0x09
comma
l_int|0x0a
comma
l_int|0x0b
comma
l_int|0x0d
comma
l_int|0x0d
comma
l_int|0x01
comma
l_int|0x02
comma
l_int|0x03
comma
l_int|0x04
comma
l_int|0x05
comma
l_int|0x06
comma
l_int|0x00
)brace
suffix:semicolon
r_int
id|i
comma
id|tmp
suffix:semicolon
multiline_comment|/* Initialise GPIO-connevted stuff */
id|btwrite
c_func
(paren
l_int|1
op_lshift
l_int|13
comma
id|BT848_GPIO_OUT_EN
)paren
suffix:semicolon
multiline_comment|/* Reset pin only */
id|btwrite
c_func
(paren
l_int|0
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|3
)paren
suffix:semicolon
id|btwrite
c_func
(paren
l_int|1
op_lshift
l_int|13
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
multiline_comment|/* GPIO inputs are pulled up, so no need to drive &n;&t; * reset pin any longer */
id|btwrite
c_func
(paren
l_int|0
comma
id|BT848_GPIO_OUT_EN
)paren
suffix:semicolon
multiline_comment|/*  we could/should try and reset/control the AD pots? but&n;&t;    right now  we simply  turned off the crushing.  Without&n;&t;    this the AGC drifts drifts&n;&t;    remember the EN is reverse logic --&gt;&n;&t;    setting BT848_ADC_AGC_EN disable the AGC&n;&t;    tboult@eecs.lehigh.edu&n;&t;*/
id|btwrite
c_func
(paren
id|BT848_ADC_RESERVED
op_or
id|BT848_ADC_AGC_EN
comma
id|BT848_ADC
)paren
suffix:semicolon
multiline_comment|/*&t;Initialise MAX517 DAC */
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Setting DAC reference voltage level ...&bslash;n&quot;
)paren
suffix:semicolon
id|bttv_I2CWrite
c_func
(paren
id|btv
comma
l_int|0x5E
comma
l_int|0
comma
l_int|0x80
comma
l_int|1
)paren
suffix:semicolon
multiline_comment|/*&t;Initialise 12C508 PIC */
multiline_comment|/*&t;The I2CWrite and I2CRead commmands are actually to the &n;&t; *&t;same chips - but the R/W bit is included in the address&n;&t; *&t;argument so the numbers are different */
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;Initialising 12C508 PIC chip ...&bslash;n&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
r_sizeof
(paren
id|vals
)paren
op_div
r_sizeof
(paren
r_int
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|tmp
op_assign
id|bttv_I2CWrite
c_func
(paren
id|btv
comma
l_int|0x1E
comma
id|vals
(braket
id|i
)braket
comma
l_int|0
comma
l_int|1
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;I2C Write(0x08) = %i&bslash;nI2C Read () = %x&bslash;n&bslash;n&quot;
comma
id|tmp
comma
id|bttv_I2CRead
c_func
(paren
id|btv
comma
l_int|0x1F
comma
l_int|NULL
)paren
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;PXC200 Initialised.&bslash;n&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------------------- */
multiline_comment|/* Miro Pro radio stuff -- the tea5757 is connected to some GPIO ports     */
multiline_comment|/*&n; * Copyright (c) 1999 Csaba Halasz &lt;qgehali@uni-miskolc.hu&gt;&n; * This code is placed under the terms of the GNU General Public License&n; *&n; * Brutally hacked by Dan Sheridan &lt;dan.sheridan@contact.org.uk&gt; djs52 8/3/00&n; */
multiline_comment|/* bus bits on the GPIO port */
DECL|macro|TEA_WE
mdefine_line|#define TEA_WE&t;&t;&t;6
DECL|macro|TEA_DATA
mdefine_line|#define TEA_DATA&t;&t;9
DECL|macro|TEA_CLK
mdefine_line|#define TEA_CLK&t;&t;&t;8
DECL|macro|TEA_MOST
mdefine_line|#define TEA_MOST&t;&t;7
DECL|macro|BUS_LOW
mdefine_line|#define BUS_LOW(bit) &t;btand(~(1&lt;&lt;TEA_##bit), BT848_GPIO_DATA)
DECL|macro|BUS_HIGH
mdefine_line|#define BUS_HIGH(bit)&t;btor((1&lt;&lt;TEA_##bit), BT848_GPIO_DATA)
DECL|macro|BUS_IN
mdefine_line|#define BUS_IN(bit)&t;((btread(BT848_GPIO_DATA) &gt;&gt; TEA_##bit) &amp; 1)
multiline_comment|/* TEA5757 register bits */
DECL|macro|TEA_FREQ
mdefine_line|#define TEA_FREQ&t;&t;0:14
DECL|macro|TEA_BUFFER
mdefine_line|#define TEA_BUFFER&t;&t;15:15
DECL|macro|TEA_SIGNAL_STRENGTH
mdefine_line|#define TEA_SIGNAL_STRENGTH&t;16:17
DECL|macro|TEA_PORT1
mdefine_line|#define TEA_PORT1&t;&t;18:18
DECL|macro|TEA_PORT0
mdefine_line|#define TEA_PORT0&t;&t;19:19
DECL|macro|TEA_BAND
mdefine_line|#define TEA_BAND&t;&t;20:21
DECL|macro|TEA_BAND_FM
mdefine_line|#define TEA_BAND_FM&t;&t;0
DECL|macro|TEA_BAND_MW
mdefine_line|#define TEA_BAND_MW&t;&t;1
DECL|macro|TEA_BAND_LW
mdefine_line|#define TEA_BAND_LW&t;&t;2
DECL|macro|TEA_BAND_SW
mdefine_line|#define TEA_BAND_SW&t;&t;3
DECL|macro|TEA_MONO
mdefine_line|#define TEA_MONO&t;&t;22:22
DECL|macro|TEA_ALLOW_STEREO
mdefine_line|#define TEA_ALLOW_STEREO&t;0
DECL|macro|TEA_FORCE_MONO
mdefine_line|#define TEA_FORCE_MONO&t;&t;1
DECL|macro|TEA_SEARCH_DIRECTION
mdefine_line|#define TEA_SEARCH_DIRECTION&t;23:23
DECL|macro|TEA_SEARCH_DOWN
mdefine_line|#define TEA_SEARCH_DOWN&t;&t;0
DECL|macro|TEA_SEARCH_UP
mdefine_line|#define TEA_SEARCH_UP&t;&t;1
DECL|macro|TEA_STATUS
mdefine_line|#define TEA_STATUS&t;&t;24:24
DECL|macro|TEA_STATUS_TUNED
mdefine_line|#define TEA_STATUS_TUNED&t;0
DECL|macro|TEA_STATUS_SEARCHING
mdefine_line|#define TEA_STATUS_SEARCHING&t;1
multiline_comment|/* Low-level stuff */
DECL|function|tea_read
r_static
r_int
id|tea_read
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
r_int
id|value
op_assign
l_int|0
suffix:semicolon
r_int
id|timeout
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* better safe than sorry */
id|btaor
c_func
(paren
(paren
l_int|1
op_lshift
id|TEA_CLK
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_WE
)paren
comma
op_complement
(paren
(paren
l_int|1
op_lshift
id|TEA_CLK
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_DATA
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_WE
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_MOST
)paren
)paren
comma
id|BT848_GPIO_OUT_EN
)paren
suffix:semicolon
id|BUS_LOW
c_func
(paren
id|WE
)paren
suffix:semicolon
id|BUS_LOW
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
r_for
c_loop
(paren
id|timeout
op_assign
id|jiffies
op_plus
l_int|10
op_star
id|HZ
suffix:semicolon
id|BUS_IN
c_func
(paren
id|DATA
)paren
op_eq
l_int|1
op_logical_and
id|time_before
c_func
(paren
id|jiffies
comma
id|timeout
)paren
suffix:semicolon
id|schedule
c_func
(paren
)paren
)paren
(brace
suffix:semicolon
)brace
multiline_comment|/* 10 s */
r_if
c_cond
(paren
id|BUS_IN
c_func
(paren
id|DATA
)paren
op_eq
l_int|1
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;tea5757: read timeout&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
l_int|1
suffix:semicolon
)brace
r_for
c_loop
(paren
id|timeout
op_assign
id|jiffies
op_plus
id|HZ
op_div
l_int|5
suffix:semicolon
id|BUS_IN
c_func
(paren
id|MOST
)paren
op_eq
l_int|1
op_logical_and
id|time_before
c_func
(paren
id|jiffies
comma
id|timeout
)paren
suffix:semicolon
id|schedule
c_func
(paren
)paren
)paren
(brace
suffix:semicolon
)brace
multiline_comment|/* 0.2 s */
r_if
c_cond
(paren
id|bttv_debug
)paren
id|printk
c_func
(paren
l_string|&quot;tea5757:&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|24
suffix:semicolon
id|i
op_increment
)paren
(brace
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|BUS_HIGH
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bttv_debug
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
(paren
id|BUS_IN
c_func
(paren
id|MOST
)paren
op_eq
l_int|0
)paren
ques
c_cond
l_char|&squot;T&squot;
suffix:colon
l_char|&squot;-&squot;
)paren
suffix:semicolon
id|BUS_LOW
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|value
op_lshift_assign
l_int|1
suffix:semicolon
id|value
op_or_assign
(paren
id|BUS_IN
c_func
(paren
id|DATA
)paren
op_eq
l_int|0
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
multiline_comment|/* MSB first */
r_if
c_cond
(paren
id|bttv_debug
)paren
id|printk
c_func
(paren
l_string|&quot;%c&quot;
comma
(paren
id|BUS_IN
c_func
(paren
id|MOST
)paren
op_eq
l_int|0
)paren
ques
c_cond
l_char|&squot;S&squot;
suffix:colon
l_char|&squot;M&squot;
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|bttv_debug
)paren
id|printk
c_func
(paren
l_string|&quot;&bslash;ntea5757: read 0x%X&bslash;n&quot;
comma
id|value
)paren
suffix:semicolon
r_return
id|value
suffix:semicolon
)brace
DECL|function|tea_write
r_static
r_int
id|tea_write
c_func
(paren
r_struct
id|bttv
op_star
id|btv
comma
r_int
id|value
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|reg
op_assign
id|value
suffix:semicolon
id|btaor
c_func
(paren
(paren
l_int|1
op_lshift
id|TEA_CLK
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_WE
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_DATA
)paren
comma
op_complement
(paren
(paren
l_int|1
op_lshift
id|TEA_CLK
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_DATA
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_WE
)paren
op_or
(paren
l_int|1
op_lshift
id|TEA_MOST
)paren
)paren
comma
id|BT848_GPIO_OUT_EN
)paren
suffix:semicolon
r_if
c_cond
(paren
id|bttv_debug
)paren
id|printk
c_func
(paren
l_string|&quot;tea5757: write 0x%X&bslash;n&quot;
comma
id|value
)paren
suffix:semicolon
id|BUS_LOW
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|BUS_HIGH
c_func
(paren
id|WE
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|25
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
id|reg
op_amp
l_int|0x1000000
)paren
id|BUS_HIGH
c_func
(paren
id|DATA
)paren
suffix:semicolon
r_else
id|BUS_LOW
c_func
(paren
id|DATA
)paren
suffix:semicolon
id|reg
op_lshift_assign
l_int|1
suffix:semicolon
id|BUS_HIGH
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|BUS_LOW
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
id|BUS_LOW
c_func
(paren
id|WE
)paren
suffix:semicolon
multiline_comment|/* unmute !!! */
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|tea5757_set_freq
r_void
id|tea5757_set_freq
c_func
(paren
r_struct
id|bttv
op_star
id|btv
comma
r_int
r_int
id|freq
)paren
(brace
id|tea_write
c_func
(paren
id|btv
comma
l_int|5
op_star
id|freq
op_plus
l_int|0x358
)paren
suffix:semicolon
multiline_comment|/* add 10.7MHz (see docs) */
r_if
c_cond
(paren
id|bttv_debug
)paren
id|tea_read
c_func
(paren
id|btv
)paren
suffix:semicolon
)brace
DECL|function|init_tea5757
r_void
id|init_tea5757
c_func
(paren
r_struct
id|bttv
op_star
id|btv
)paren
(brace
id|BUS_LOW
c_func
(paren
id|CLK
)paren
suffix:semicolon
id|BUS_LOW
c_func
(paren
id|WE
)paren
suffix:semicolon
multiline_comment|/* just to be on the safe side... */
multiline_comment|/* software CLK (unused) */
id|btaor
c_func
(paren
l_int|0
comma
id|BT848_GPIO_DMA_CTL_GPCLKMODE
comma
id|BT848_GPIO_DMA_CTL
)paren
suffix:semicolon
multiline_comment|/* normal mode for GPIO */
id|btaor
c_func
(paren
l_int|0
comma
id|BT848_GPIO_DMA_CTL_GPIOMODE
comma
id|BT848_GPIO_DMA_CTL
)paren
suffix:semicolon
)brace
multiline_comment|/* ----------------------------------------------------------------------- */
multiline_comment|/* winview                                                                 */
DECL|function|winview_setvol
r_void
id|winview_setvol
c_func
(paren
r_struct
id|bttv
op_star
id|btv
comma
r_struct
id|video_audio
op_star
id|v
)paren
(brace
multiline_comment|/* PT2254A programming Jon Tombs, jon@gte.esi.us.es */
r_int
id|bits_out
comma
id|loops
comma
id|vol
comma
id|data
suffix:semicolon
multiline_comment|/* 32 levels logarithmic */
id|vol
op_assign
l_int|32
op_minus
(paren
(paren
id|v-&gt;volume
op_rshift
l_int|11
)paren
)paren
suffix:semicolon
multiline_comment|/* units */
id|bits_out
op_assign
(paren
id|PT2254_DBS_IN_2
op_rshift
(paren
id|vol
op_mod
l_int|5
)paren
)paren
suffix:semicolon
multiline_comment|/* tens */
id|bits_out
op_or_assign
(paren
id|PT2254_DBS_IN_10
op_rshift
(paren
id|vol
op_div
l_int|5
)paren
)paren
suffix:semicolon
id|bits_out
op_or_assign
id|PT2254_L_CHANEL
op_or
id|PT2254_R_CHANEL
suffix:semicolon
id|data
op_assign
id|btread
c_func
(paren
id|BT848_GPIO_DATA
)paren
suffix:semicolon
id|data
op_and_assign
op_complement
(paren
id|WINVIEW_PT2254_CLK
op_or
id|WINVIEW_PT2254_DATA
op_or
id|WINVIEW_PT2254_STROBE
)paren
suffix:semicolon
r_for
c_loop
(paren
id|loops
op_assign
l_int|17
suffix:semicolon
id|loops
op_ge
l_int|0
suffix:semicolon
id|loops
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|bits_out
op_amp
(paren
l_int|1
op_lshift
id|loops
)paren
)paren
id|data
op_or_assign
id|WINVIEW_PT2254_DATA
suffix:semicolon
r_else
id|data
op_and_assign
op_complement
id|WINVIEW_PT2254_DATA
suffix:semicolon
id|btwrite
c_func
(paren
id|data
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
id|data
op_or_assign
id|WINVIEW_PT2254_CLK
suffix:semicolon
id|btwrite
c_func
(paren
id|data
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|5
)paren
suffix:semicolon
id|data
op_and_assign
op_complement
id|WINVIEW_PT2254_CLK
suffix:semicolon
id|btwrite
c_func
(paren
id|data
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
)brace
id|data
op_or_assign
id|WINVIEW_PT2254_STROBE
suffix:semicolon
id|data
op_and_assign
op_complement
id|WINVIEW_PT2254_DATA
suffix:semicolon
id|btwrite
c_func
(paren
id|data
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
id|data
op_and_assign
op_complement
id|WINVIEW_PT2254_STROBE
suffix:semicolon
id|btwrite
c_func
(paren
id|data
comma
id|BT848_GPIO_DATA
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Local variables:&n; * c-basic-offset: 8&n; * End:&n; */
eof
