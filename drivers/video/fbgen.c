multiline_comment|/*&n; * linux/drivers/video/fbgen.c -- Generic routines for frame buffer devices&n; *&n; *  Created 3 Jan 1998 by Geert Uytterhoeven&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file COPYING in the main directory of this archive&n; * for more details.&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &lt;linux/slab.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;video/fbcon.h&gt;
DECL|variable|currcon
r_static
r_int
id|currcon
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ---- `Generic&squot; versions of the frame buffer device operations ----------- */
multiline_comment|/*&n;     *  Get the Fixed Part of the Display&n;     */
DECL|function|fbgen_get_fix
r_int
id|fbgen_get_fix
c_func
(paren
r_struct
id|fb_fix_screeninfo
op_star
id|fix
comma
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
r_char
id|par
(braket
id|info2-&gt;parsize
)braket
suffix:semicolon
r_if
c_cond
(paren
id|con
op_eq
op_minus
l_int|1
)paren
id|fbhw
op_member_access_from_pointer
id|get_par
c_func
(paren
op_amp
id|par
comma
id|info2
)paren
suffix:semicolon
r_else
(brace
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fbhw
op_member_access_from_pointer
id|decode_var
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|var
comma
op_amp
id|par
comma
id|info2
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
)brace
id|memset
c_func
(paren
id|fix
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|fb_fix_screeninfo
)paren
)paren
suffix:semicolon
r_return
id|fbhw
op_member_access_from_pointer
id|encode_fix
c_func
(paren
id|fix
comma
op_amp
id|par
comma
id|info2
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Get the User Defined Part of the Display&n;     */
DECL|function|fbgen_get_var
r_int
id|fbgen_get_var
c_func
(paren
r_struct
id|fb_var_screeninfo
op_star
id|var
comma
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
r_char
id|par
(braket
id|info2-&gt;parsize
)braket
suffix:semicolon
r_if
c_cond
(paren
id|con
op_eq
op_minus
l_int|1
)paren
(brace
id|fbhw
op_member_access_from_pointer
id|get_par
c_func
(paren
op_amp
id|par
comma
id|info2
)paren
suffix:semicolon
id|fbhw
op_member_access_from_pointer
id|encode_var
c_func
(paren
id|var
comma
op_amp
id|par
comma
id|info2
)paren
suffix:semicolon
)brace
r_else
op_star
id|var
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Set the User Defined Part of the Display&n;     */
DECL|function|fbgen_set_var
r_int
id|fbgen_set_var
c_func
(paren
r_struct
id|fb_var_screeninfo
op_star
id|var
comma
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_int
id|err
suffix:semicolon
r_int
id|oldxres
comma
id|oldyres
comma
id|oldbpp
comma
id|oldxres_virtual
comma
id|oldyres_virtual
comma
id|oldyoffset
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fbgen_do_set_var
c_func
(paren
id|var
comma
id|con
op_eq
id|currcon
comma
id|info2
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
r_if
c_cond
(paren
(paren
id|var-&gt;activate
op_amp
id|FB_ACTIVATE_MASK
)paren
op_eq
id|FB_ACTIVATE_NOW
)paren
(brace
id|oldxres
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.xres
suffix:semicolon
id|oldyres
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.yres
suffix:semicolon
id|oldxres_virtual
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.xres_virtual
suffix:semicolon
id|oldyres_virtual
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.yres_virtual
suffix:semicolon
id|oldbpp
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.bits_per_pixel
suffix:semicolon
id|oldyoffset
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.yoffset
suffix:semicolon
id|fb_display
(braket
id|con
)braket
dot
id|var
op_assign
op_star
id|var
suffix:semicolon
r_if
c_cond
(paren
id|oldxres
op_ne
id|var-&gt;xres
op_logical_or
id|oldyres
op_ne
id|var-&gt;yres
op_logical_or
id|oldxres_virtual
op_ne
id|var-&gt;xres_virtual
op_logical_or
id|oldyres_virtual
op_ne
id|var-&gt;yres_virtual
op_logical_or
id|oldbpp
op_ne
id|var-&gt;bits_per_pixel
op_logical_or
id|oldyoffset
op_ne
id|var-&gt;yoffset
)paren
(brace
id|fbgen_set_disp
c_func
(paren
id|con
comma
id|info2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|info-&gt;changevar
)paren
(paren
op_star
id|info-&gt;changevar
)paren
(paren
id|con
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fb_alloc_cmap
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|cmap
comma
l_int|0
comma
l_int|0
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
id|fbgen_install_cmap
c_func
(paren
id|con
comma
id|info2
)paren
suffix:semicolon
)brace
)brace
id|var-&gt;activate
op_assign
l_int|0
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Get the Colormap&n;     */
DECL|function|fbgen_get_cmap
r_int
id|fbgen_get_cmap
c_func
(paren
r_struct
id|fb_cmap
op_star
id|cmap
comma
r_int
id|kspc
comma
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
r_if
c_cond
(paren
id|con
op_eq
id|currcon
)paren
multiline_comment|/* current console ? */
r_return
id|fb_get_cmap
c_func
(paren
id|cmap
comma
id|kspc
comma
id|fbhw-&gt;getcolreg
comma
id|info
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|fb_display
(braket
id|con
)braket
dot
id|cmap.len
)paren
multiline_comment|/* non default colormap ? */
id|fb_copy_cmap
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|cmap
comma
id|cmap
comma
id|kspc
ques
c_cond
l_int|0
suffix:colon
l_int|2
)paren
suffix:semicolon
r_else
(brace
r_int
id|size
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.bits_per_pixel
op_eq
l_int|16
ques
c_cond
l_int|64
suffix:colon
l_int|256
suffix:semicolon
id|fb_copy_cmap
c_func
(paren
id|fb_default_cmap
c_func
(paren
id|size
)paren
comma
id|cmap
comma
id|kspc
ques
c_cond
l_int|0
suffix:colon
l_int|2
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Set the Colormap&n;     */
DECL|function|fbgen_set_cmap
r_int
id|fbgen_set_cmap
c_func
(paren
r_struct
id|fb_cmap
op_star
id|cmap
comma
r_int
id|kspc
comma
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|fb_display
(braket
id|con
)braket
dot
id|cmap.len
)paren
(brace
multiline_comment|/* no colormap allocated ? */
r_int
id|size
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.bits_per_pixel
op_eq
l_int|16
ques
c_cond
l_int|64
suffix:colon
l_int|256
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fb_alloc_cmap
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|cmap
comma
id|size
comma
l_int|0
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
)brace
r_if
c_cond
(paren
id|con
op_eq
id|currcon
)paren
multiline_comment|/* current console ? */
r_return
id|fb_set_cmap
c_func
(paren
id|cmap
comma
id|kspc
comma
id|fbhw-&gt;setcolreg
comma
id|info
)paren
suffix:semicolon
r_else
id|fb_copy_cmap
c_func
(paren
id|cmap
comma
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|cmap
comma
id|kspc
ques
c_cond
l_int|0
suffix:colon
l_int|1
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Pan or Wrap the Display&n;     *&n;     *  This call looks only at xoffset, yoffset and the FB_VMODE_YWRAP flag&n;     */
DECL|function|fbgen_pan_display
r_int
id|fbgen_pan_display
c_func
(paren
r_struct
id|fb_var_screeninfo
op_star
id|var
comma
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
r_int
id|xoffset
op_assign
id|var-&gt;xoffset
suffix:semicolon
r_int
id|yoffset
op_assign
id|var-&gt;yoffset
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|xoffset
template_param
id|fb_display
(braket
id|con
)braket
dot
id|var.xres_virtual
op_logical_or
id|yoffset
template_param
id|fb_display
(braket
id|con
)braket
dot
id|var.yres_virtual
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|con
op_eq
id|currcon
)paren
(brace
r_if
c_cond
(paren
id|fbhw-&gt;pan_display
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fbhw
op_member_access_from_pointer
id|pan_display
c_func
(paren
id|var
comma
id|info2
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
)brace
r_else
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
id|fb_display
(braket
id|con
)braket
dot
id|var.xoffset
op_assign
id|var-&gt;xoffset
suffix:semicolon
id|fb_display
(braket
id|con
)braket
dot
id|var.yoffset
op_assign
id|var-&gt;yoffset
suffix:semicolon
r_if
c_cond
(paren
id|var-&gt;vmode
op_amp
id|FB_VMODE_YWRAP
)paren
id|fb_display
(braket
id|con
)braket
dot
id|var.vmode
op_or_assign
id|FB_VMODE_YWRAP
suffix:semicolon
r_else
id|fb_display
(braket
id|con
)braket
dot
id|var.vmode
op_and_assign
op_complement
id|FB_VMODE_YWRAP
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* ---- Helper functions --------------------------------------------------- */
multiline_comment|/*&n;     *  Change the video mode&n;     */
DECL|function|fbgen_do_set_var
r_int
id|fbgen_do_set_var
c_func
(paren
r_struct
id|fb_var_screeninfo
op_star
id|var
comma
r_int
id|isactive
comma
r_struct
id|fb_info_gen
op_star
id|info
)paren
(brace
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info-&gt;fbhw
suffix:semicolon
r_int
id|err
comma
id|activate
suffix:semicolon
r_char
id|par
(braket
id|info-&gt;parsize
)braket
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fbhw
op_member_access_from_pointer
id|decode_var
c_func
(paren
id|var
comma
op_amp
id|par
comma
id|info
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
id|activate
op_assign
id|var-&gt;activate
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|var-&gt;activate
op_amp
id|FB_ACTIVATE_MASK
)paren
op_eq
id|FB_ACTIVATE_NOW
)paren
op_logical_and
id|isactive
)paren
id|fbhw
op_member_access_from_pointer
id|set_par
c_func
(paren
op_amp
id|par
comma
id|info
)paren
suffix:semicolon
id|fbhw
op_member_access_from_pointer
id|encode_var
c_func
(paren
id|var
comma
op_amp
id|par
comma
id|info
)paren
suffix:semicolon
id|var-&gt;activate
op_assign
id|activate
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|fbgen_set_disp
r_void
id|fbgen_set_disp
c_func
(paren
r_int
id|con
comma
r_struct
id|fb_info_gen
op_star
id|info
)paren
(brace
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info-&gt;fbhw
suffix:semicolon
r_struct
id|fb_fix_screeninfo
id|fix
suffix:semicolon
r_char
id|par
(braket
id|info-&gt;parsize
)braket
suffix:semicolon
r_struct
id|display
op_star
id|display
suffix:semicolon
r_if
c_cond
(paren
id|con
op_ge
l_int|0
)paren
id|display
op_assign
op_amp
id|fb_display
(braket
id|con
)braket
suffix:semicolon
r_else
id|display
op_assign
id|info-&gt;info.disp
suffix:semicolon
multiline_comment|/* used during initialization */
r_if
c_cond
(paren
id|con
op_eq
op_minus
l_int|1
)paren
id|fbhw
op_member_access_from_pointer
id|get_par
c_func
(paren
op_amp
id|par
comma
id|info
)paren
suffix:semicolon
r_else
id|fbhw
op_member_access_from_pointer
id|decode_var
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|var
comma
op_amp
id|par
comma
id|info
)paren
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|fix
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|fb_fix_screeninfo
)paren
)paren
suffix:semicolon
id|fbhw
op_member_access_from_pointer
id|encode_fix
c_func
(paren
op_amp
id|fix
comma
op_amp
id|par
comma
id|info
)paren
suffix:semicolon
id|display-&gt;visual
op_assign
id|fix.visual
suffix:semicolon
id|display-&gt;type
op_assign
id|fix.type
suffix:semicolon
id|display-&gt;type_aux
op_assign
id|fix.type_aux
suffix:semicolon
id|display-&gt;ypanstep
op_assign
id|fix.ypanstep
suffix:semicolon
id|display-&gt;ywrapstep
op_assign
id|fix.ywrapstep
suffix:semicolon
id|display-&gt;line_length
op_assign
id|fix.line_length
suffix:semicolon
r_if
c_cond
(paren
id|info-&gt;fbhw-&gt;blank
op_logical_or
id|fix.visual
op_eq
id|FB_VISUAL_PSEUDOCOLOR
op_logical_or
id|fix.visual
op_eq
id|FB_VISUAL_DIRECTCOLOR
)paren
id|display-&gt;can_soft_blank
op_assign
l_int|1
suffix:semicolon
r_else
id|display-&gt;can_soft_blank
op_assign
l_int|0
suffix:semicolon
id|fbhw
op_member_access_from_pointer
id|set_disp
c_func
(paren
op_amp
id|par
comma
id|display
comma
id|info
)paren
suffix:semicolon
macro_line|#if 0 /* FIXME: generic inverse is not supported yet */
id|display-&gt;inverse
op_assign
(paren
id|fix.visual
op_eq
id|FB_VISUAL_MONO01
ques
c_cond
op_logical_neg
id|inverse
suffix:colon
id|inverse
)paren
suffix:semicolon
macro_line|#else
id|display-&gt;inverse
op_assign
id|fix.visual
op_eq
id|FB_VISUAL_MONO01
suffix:semicolon
macro_line|#endif
)brace
multiline_comment|/*&n;     *  Install the current colormap&n;     */
DECL|function|fbgen_install_cmap
r_void
id|fbgen_install_cmap
c_func
(paren
r_int
id|con
comma
r_struct
id|fb_info_gen
op_star
id|info
)paren
(brace
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info-&gt;fbhw
suffix:semicolon
r_if
c_cond
(paren
id|con
op_ne
id|currcon
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|fb_display
(braket
id|con
)braket
dot
id|cmap.len
)paren
id|fb_set_cmap
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|cmap
comma
l_int|1
comma
id|fbhw-&gt;setcolreg
comma
op_amp
id|info-&gt;info
)paren
suffix:semicolon
r_else
(brace
r_int
id|size
op_assign
id|fb_display
(braket
id|con
)braket
dot
id|var.bits_per_pixel
op_eq
l_int|16
ques
c_cond
l_int|64
suffix:colon
l_int|256
suffix:semicolon
id|fb_set_cmap
c_func
(paren
id|fb_default_cmap
c_func
(paren
id|size
)paren
comma
l_int|1
comma
id|fbhw-&gt;setcolreg
comma
op_amp
id|info-&gt;info
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n;     *  Update the `var&squot; structure (called by fbcon.c)&n;     */
DECL|function|fbgen_update_var
r_int
id|fbgen_update_var
c_func
(paren
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
r_int
id|err
suffix:semicolon
r_if
c_cond
(paren
id|fbhw-&gt;pan_display
)paren
(brace
r_if
c_cond
(paren
(paren
id|err
op_assign
id|fbhw
op_member_access_from_pointer
id|pan_display
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|var
comma
id|info2
)paren
)paren
)paren
r_return
id|err
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Switch to a different virtual console&n;     */
DECL|function|fbgen_switch
r_int
id|fbgen_switch
c_func
(paren
r_int
id|con
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
multiline_comment|/* Do we have to save the colormap ? */
r_if
c_cond
(paren
id|fb_display
(braket
id|currcon
)braket
dot
id|cmap.len
)paren
id|fb_get_cmap
c_func
(paren
op_amp
id|fb_display
(braket
id|currcon
)braket
dot
id|cmap
comma
l_int|1
comma
id|fbhw-&gt;getcolreg
comma
op_amp
id|info2-&gt;info
)paren
suffix:semicolon
id|fbgen_do_set_var
c_func
(paren
op_amp
id|fb_display
(braket
id|con
)braket
dot
id|var
comma
l_int|1
comma
id|info2
)paren
suffix:semicolon
id|currcon
op_assign
id|con
suffix:semicolon
multiline_comment|/* Install new colormap */
id|fbgen_install_cmap
c_func
(paren
id|con
comma
id|info2
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n;     *  Blank the screen&n;     */
DECL|function|fbgen_blank
r_void
id|fbgen_blank
c_func
(paren
r_int
id|blank
comma
r_struct
id|fb_info
op_star
id|info
)paren
(brace
r_struct
id|fb_info_gen
op_star
id|info2
op_assign
(paren
r_struct
id|fb_info_gen
op_star
)paren
id|info
suffix:semicolon
r_struct
id|fbgen_hwswitch
op_star
id|fbhw
op_assign
id|info2-&gt;fbhw
suffix:semicolon
id|u16
id|black
(braket
l_int|16
)braket
suffix:semicolon
r_struct
id|fb_cmap
id|cmap
suffix:semicolon
r_if
c_cond
(paren
id|fbhw-&gt;blank
op_logical_and
op_logical_neg
id|fbhw
op_member_access_from_pointer
id|blank
c_func
(paren
id|blank
comma
id|info2
)paren
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|blank
)paren
(brace
id|memset
c_func
(paren
id|black
comma
l_int|0
comma
l_int|16
op_star
r_sizeof
(paren
id|u16
)paren
)paren
suffix:semicolon
id|cmap.red
op_assign
id|black
suffix:semicolon
id|cmap.green
op_assign
id|black
suffix:semicolon
id|cmap.blue
op_assign
id|black
suffix:semicolon
id|cmap.transp
op_assign
l_int|NULL
suffix:semicolon
id|cmap.start
op_assign
l_int|0
suffix:semicolon
id|cmap.len
op_assign
l_int|16
suffix:semicolon
id|fb_set_cmap
c_func
(paren
op_amp
id|cmap
comma
l_int|1
comma
id|fbhw-&gt;setcolreg
comma
id|info
)paren
suffix:semicolon
)brace
r_else
id|fbgen_install_cmap
c_func
(paren
id|currcon
comma
id|info2
)paren
suffix:semicolon
)brace
eof
