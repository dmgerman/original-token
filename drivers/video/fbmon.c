multiline_comment|/*&n; *   linux/drivers/video/fbmon.c&n; *&n; *  Copyright (C) 1999 James Simmons&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file COPYING in the main directory of this archive&n; * for more details.&n; *&n; * Notes:&n; *      This code handles the different types of monitors that are out their. &n; *   Most video cards for example can support a mode like 800x600 but fix&n; *   frequency monitors can&squot;t. So the code here checks if the monitor can&n; *   support the mode as well as the card can. Fbmonospecs takes on &n; *   different meaning with different types of monitors. For multifrequency &n; *   monitors fbmonospecs represents the range of frequencies the monitor &n; *   can support. Only one fbmonospec needs to be allocated. The fbmonospecs &n; *   pointer in fb_info points to this one. If you specific a mode that has &n; *   timing greater than the allowed range then setting the video mode will &n; *   fail. With multifrequency monitors you can set any mode you like as long&n; *   as you have a programmable clock on the video card. &n; *       With fixed frequency monitors you have only a SET of very narrow &n; *   allowed frequency ranges. So for a fixed fequency monitor you have a &n; *   array of fbmonospecs. The fbmonospecs in fb_info represents the &n; *   monitor frequency for the CURRENT mode. If you change the mode and ask&n; *   for fbmonospecs you will NOT get the same values as before. Note this&n; *   is not true for multifrequency monitors where you do get the same &n; *   fbmonospecs each time. Also the values in each fbmonospecs represent the &n; *   very narrow frequency band for range. Well you can&squot;t have exactly the &n; *   same frequencies from fixed monitor. So some tolerance is excepted.&n; *       By DEFAULT all monitors are assumed fixed frequency since they are so&n; *   easy to fry or screw up a mode with. Just try setting a 800x600 mode on&n; *   one. After you boot you can run a simple program the tells what kind of &n; *   monitor you have. If you have a multifrequency monitor then you can set &n; *   any mode size you like as long as your video card has a programmable clock.&n; *   By default also besides assuming you have a fixed frequency monitor it &n; *   assumes the monitor only supports lower modes. This way for example you&n; *   can&squot;t set a 1280x1024 mode on a fixed frequency monitor that can only &n; *   support up to 1024x768.&n; *&n; */
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &lt;linux/module.h&gt;
DECL|function|fbmon_valid_timings
r_int
id|fbmon_valid_timings
c_func
(paren
id|u_int
id|pixclock
comma
id|u_int
id|htotal
comma
id|u_int
id|vtotal
comma
r_const
r_struct
id|fb_info
op_star
id|fb_info
)paren
(brace
macro_line|#if 0
multiline_comment|/*&n;   * long long divisions .... $#%%#$&n;   */
r_int
r_int
r_int
id|hpicos
comma
id|vpicos
suffix:semicolon
r_const
r_int
r_int
r_int
id|_1e12
op_assign
l_int|1000000000000ULL
suffix:semicolon
r_const
r_struct
id|fb_monspecs
op_star
id|monspecs
op_assign
op_amp
id|fb_info-&gt;monspecs
suffix:semicolon
id|hpicos
op_assign
(paren
r_int
r_int
r_int
)paren
id|htotal
op_star
(paren
r_int
r_int
r_int
)paren
id|pixclock
suffix:semicolon
id|vpicos
op_assign
(paren
r_int
r_int
r_int
)paren
id|vtotal
op_star
(paren
r_int
r_int
r_int
)paren
id|hpicos
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|vpicos
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|monspecs-&gt;hfmin
op_eq
l_int|0
)paren
r_return
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|hpicos
op_star
id|monspecs-&gt;hfmin
OG
id|_1e12
op_logical_or
id|hpicos
op_star
id|monspecs-&gt;hfmax
template_param
id|_1e12
op_logical_or
id|vpicos
op_star
id|monspecs-&gt;vfmax
OL
id|_1e12
)paren
r_return
l_int|0
suffix:semicolon
macro_line|#endif
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|fbmon_dpms
r_int
id|fbmon_dpms
c_func
(paren
r_const
r_struct
id|fb_info
op_star
id|fb_info
)paren
(brace
r_return
id|fb_info-&gt;monspecs.dpms
suffix:semicolon
)brace
DECL|variable|fbmon_valid_timings
id|EXPORT_SYMBOL
c_func
(paren
id|fbmon_valid_timings
)paren
suffix:semicolon
eof
