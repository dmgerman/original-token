multiline_comment|/*&n; *&n; * Hardware accelerated Matrox Millennium I, II, Mystique, G100, G200 and G400&n; *&n; * (c) 1998,1999,2000 Petr Vandrovec &lt;vandrove@vc.cvut.cz&gt;&n; *&n; * Version: 1.50 2000/08/10&n; *&n; * MTRR stuff: 1998 Tom Rini &lt;trini@kernel.crashing.org&gt;&n; *&n; * Contributors: &quot;menion?&quot; &lt;menion@mindless.com&gt;&n; *                     Betatesting, fixes, ideas&n; *&n; *               &quot;Kurt Garloff&quot; &lt;garloff@suse.de&gt;&n; *                     Betatesting, fixes, ideas, videomodes, videomodes timmings&n; *&n; *               &quot;Tom Rini&quot; &lt;trini@kernel.crashing.org&gt;&n; *                     MTRR stuff, PPC cleanups, betatesting, fixes, ideas&n; *&n; *               &quot;Bibek Sahu&quot; &lt;scorpio@dodds.net&gt;&n; *                     Access device through readb|w|l and write b|w|l&n; *                     Extensive debugging stuff&n; *&n; *               &quot;Daniel Haun&quot; &lt;haund@usa.net&gt;&n; *                     Testing, hardware cursor fixes&n; *&n; *               &quot;Scott Wood&quot; &lt;sawst46+@pitt.edu&gt;&n; *                     Fixes&n; *&n; *               &quot;Gerd Knorr&quot; &lt;kraxel@goldbach.isdn.cs.tu-berlin.de&gt;&n; *                     Betatesting&n; *&n; *               &quot;Kelly French&quot; &lt;targon@hazmat.com&gt;&n; *               &quot;Fernando Herrera&quot; &lt;fherrera@eurielec.etsit.upm.es&gt;&n; *                     Betatesting, bug reporting&n; *&n; *               &quot;Pablo Bianucci&quot; &lt;pbian@pccp.com.ar&gt;&n; *                     Fixes, ideas, betatesting&n; *&n; *               &quot;Inaky Perez Gonzalez&quot; &lt;inaky@peloncho.fis.ucm.es&gt;&n; *                     Fixes, enhandcements, ideas, betatesting&n; *&n; *               &quot;Ryuichi Oikawa&quot; &lt;roikawa@rr.iiij4u.or.jp&gt;&n; *                     PPC betatesting, PPC support, backward compatibility&n; *&n; *               &quot;Paul Womar&quot; &lt;Paul@pwomar.demon.co.uk&gt;&n; *               &quot;Owen Waller&quot; &lt;O.Waller@ee.qub.ac.uk&gt;&n; *                     PPC betatesting&n; *&n; *               &quot;Thomas Pornin&quot; &lt;pornin@bolet.ens.fr&gt;&n; *                     Alpha betatesting&n; *&n; *               &quot;Pieter van Leuven&quot; &lt;pvl@iae.nl&gt;&n; *               &quot;Ulf Jaenicke-Roessler&quot; &lt;ujr@physik.phy.tu-dresden.de&gt;&n; *                     G100 testing&n; *&n; *               &quot;H. Peter Arvin&quot; &lt;hpa@transmeta.com&gt;&n; *                     Ideas&n; *&n; *               &quot;Cort Dougan&quot; &lt;cort@cs.nmt.edu&gt;&n; *                     CHRP fixes and PReP cleanup&n; *&n; *               &quot;Mark Vojkovich&quot; &lt;mvojkovi@ucsd.edu&gt;&n; *                     G400 support&n; *&n; * (following author is not in any relation with this code, but his code&n; *  is included in this driver)&n; *&n; * Based on framebuffer driver for VBE 2.0 compliant graphic boards&n; *     (c) 1998 Gerd Knorr &lt;kraxel@cs.tu-berlin.de&gt;&n; *&n; * (following author is not in any relation with this code, but his ideas&n; *  were used when writting this driver)&n; *&n; *&t;&t; FreeVBE/AF (Matrox), &quot;Shawn Hargreaves&quot; &lt;shawn@talula.demon.co.uk&gt;&n; *&n; */
multiline_comment|/* make checkconfig does not verify included files... */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &quot;matroxfb_Ti3026.h&quot;
macro_line|#include &quot;matroxfb_misc.h&quot;
macro_line|#include &quot;matroxfb_accel.h&quot;
macro_line|#ifdef CONFIG_FB_MATROX_MILLENIUM
DECL|macro|outTi3026
mdefine_line|#define outTi3026 matroxfb_DAC_out
DECL|macro|inTi3026
mdefine_line|#define inTi3026 matroxfb_DAC_in
DECL|macro|TVP3026_INDEX
mdefine_line|#define TVP3026_INDEX&t;&t;0x00
DECL|macro|TVP3026_PALWRADD
mdefine_line|#define TVP3026_PALWRADD&t;0x00
DECL|macro|TVP3026_PALDATA
mdefine_line|#define TVP3026_PALDATA&t;&t;0x01
DECL|macro|TVP3026_PIXRDMSK
mdefine_line|#define TVP3026_PIXRDMSK&t;0x02
DECL|macro|TVP3026_PALRDADD
mdefine_line|#define TVP3026_PALRDADD&t;0x03
DECL|macro|TVP3026_CURCOLWRADD
mdefine_line|#define TVP3026_CURCOLWRADD&t;0x04
DECL|macro|TVP3026_CLOVERSCAN
mdefine_line|#define     TVP3026_CLOVERSCAN&t;&t;0x00
DECL|macro|TVP3026_CLCOLOR0
mdefine_line|#define     TVP3026_CLCOLOR0&t;&t;0x01
DECL|macro|TVP3026_CLCOLOR1
mdefine_line|#define     TVP3026_CLCOLOR1&t;&t;0x02
DECL|macro|TVP3026_CLCOLOR2
mdefine_line|#define     TVP3026_CLCOLOR2&t;&t;0x03
DECL|macro|TVP3026_CURCOLDATA
mdefine_line|#define TVP3026_CURCOLDATA&t;0x05
DECL|macro|TVP3026_CURCOLRDADD
mdefine_line|#define TVP3026_CURCOLRDADD&t;0x07
DECL|macro|TVP3026_CURCTRL
mdefine_line|#define TVP3026_CURCTRL&t;&t;0x09
DECL|macro|TVP3026_X_DATAREG
mdefine_line|#define TVP3026_X_DATAREG&t;0x0A
DECL|macro|TVP3026_CURRAMDATA
mdefine_line|#define TVP3026_CURRAMDATA&t;0x0B
DECL|macro|TVP3026_CURPOSXL
mdefine_line|#define TVP3026_CURPOSXL&t;0x0C
DECL|macro|TVP3026_CURPOSXH
mdefine_line|#define TVP3026_CURPOSXH&t;0x0D
DECL|macro|TVP3026_CURPOSYL
mdefine_line|#define TVP3026_CURPOSYL&t;0x0E
DECL|macro|TVP3026_CURPOSYH
mdefine_line|#define TVP3026_CURPOSYH&t;0x0F
DECL|macro|TVP3026_XSILICONREV
mdefine_line|#define TVP3026_XSILICONREV&t;0x01
DECL|macro|TVP3026_XCURCTRL
mdefine_line|#define TVP3026_XCURCTRL&t;0x06
DECL|macro|TVP3026_XCURCTRL_DIS
mdefine_line|#define     TVP3026_XCURCTRL_DIS&t;0x00&t;/* transparent, transparent, transparent, transparent */
DECL|macro|TVP3026_XCURCTRL_3COLOR
mdefine_line|#define     TVP3026_XCURCTRL_3COLOR&t;0x01&t;/* transparent, 0, 1, 2 */
DECL|macro|TVP3026_XCURCTRL_XGA
mdefine_line|#define     TVP3026_XCURCTRL_XGA&t;0x02&t;/* 0, 1, transparent, complement */
DECL|macro|TVP3026_XCURCTRL_XWIN
mdefine_line|#define     TVP3026_XCURCTRL_XWIN&t;0x03&t;/* transparent, transparent, 0, 1 */
DECL|macro|TVP3026_XCURCTRL_BLANK2048
mdefine_line|#define     TVP3026_XCURCTRL_BLANK2048&t;0x00
DECL|macro|TVP3026_XCURCTRL_BLANK4096
mdefine_line|#define     TVP3026_XCURCTRL_BLANK4096&t;0x10
DECL|macro|TVP3026_XCURCTRL_INTERLACED
mdefine_line|#define     TVP3026_XCURCTRL_INTERLACED&t;0x20
DECL|macro|TVP3026_XCURCTRL_ODD
mdefine_line|#define     TVP3026_XCURCTRL_ODD&t;0x00 /* ext.signal ODD/&bslash;EVEN */
DECL|macro|TVP3026_XCURCTRL_EVEN
mdefine_line|#define     TVP3026_XCURCTRL_EVEN&t;0x40 /* ext.signal EVEN/&bslash;ODD */
DECL|macro|TVP3026_XCURCTRL_INDIRECT
mdefine_line|#define     TVP3026_XCURCTRL_INDIRECT&t;0x00
DECL|macro|TVP3026_XCURCTRL_DIRECT
mdefine_line|#define     TVP3026_XCURCTRL_DIRECT&t;0x80
DECL|macro|TVP3026_XLATCHCTRL
mdefine_line|#define TVP3026_XLATCHCTRL&t;0x0F
DECL|macro|TVP3026_XLATCHCTRL_1_1
mdefine_line|#define     TVP3026_XLATCHCTRL_1_1&t;0x06
DECL|macro|TVP3026_XLATCHCTRL_2_1
mdefine_line|#define     TVP3026_XLATCHCTRL_2_1&t;0x07
DECL|macro|TVP3026_XLATCHCTRL_4_1
mdefine_line|#define     TVP3026_XLATCHCTRL_4_1&t;0x06
DECL|macro|TVP3026_XLATCHCTRL_8_1
mdefine_line|#define     TVP3026_XLATCHCTRL_8_1&t;0x06
DECL|macro|TVP3026_XLATCHCTRL_16_1
mdefine_line|#define     TVP3026_XLATCHCTRL_16_1&t;0x06
DECL|macro|TVP3026A_XLATCHCTRL_4_3
mdefine_line|#define     TVP3026A_XLATCHCTRL_4_3&t;0x06&t;/* ??? do not understand... but it works... !!! */
DECL|macro|TVP3026A_XLATCHCTRL_8_3
mdefine_line|#define     TVP3026A_XLATCHCTRL_8_3&t;0x07
DECL|macro|TVP3026B_XLATCHCTRL_4_3
mdefine_line|#define     TVP3026B_XLATCHCTRL_4_3&t;0x08
DECL|macro|TVP3026B_XLATCHCTRL_8_3
mdefine_line|#define     TVP3026B_XLATCHCTRL_8_3&t;0x06&t;/* ??? do not understand... but it works... !!! */
DECL|macro|TVP3026_XTRUECOLORCTRL
mdefine_line|#define TVP3026_XTRUECOLORCTRL&t;0x18
DECL|macro|TVP3026_XTRUECOLORCTRL_VRAM_SHIFT_ACCEL
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_VRAM_SHIFT_ACCEL&t;0x00
DECL|macro|TVP3026_XTRUECOLORCTRL_VRAM_SHIFT_TVP
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_VRAM_SHIFT_TVP&t;0x20
DECL|macro|TVP3026_XTRUECOLORCTRL_PSEUDOCOLOR
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_PSEUDOCOLOR&t;&t;0x80
DECL|macro|TVP3026_XTRUECOLORCTRL_TRUECOLOR
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_TRUECOLOR&t;&t;0x40 /* paletized */
DECL|macro|TVP3026_XTRUECOLORCTRL_DIRECTCOLOR
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_DIRECTCOLOR&t;&t;0x00
DECL|macro|TVP3026_XTRUECOLORCTRL_24_ALTERNATE
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_24_ALTERNATE&t;&t;0x08 /* 5:4/5:2 instead of 4:3/8:3 */
DECL|macro|TVP3026_XTRUECOLORCTRL_RGB_888
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_RGB_888&t;&t;0x16 /* 4:3/8:3 (or 5:4/5:2) */
DECL|macro|TVP3026_XTRUECOLORCTRL_BGR_888
mdefine_line|#define&t;    TVP3026_XTRUECOLORCTRL_BGR_888&t;&t;0x17
DECL|macro|TVP3026_XTRUECOLORCTRL_ORGB_8888
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_ORGB_8888&t;&t;0x06
DECL|macro|TVP3026_XTRUECOLORCTRL_BGRO_8888
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_BGRO_8888&t;&t;0x07
DECL|macro|TVP3026_XTRUECOLORCTRL_RGB_565
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_RGB_565&t;&t;0x05
DECL|macro|TVP3026_XTRUECOLORCTRL_ORGB_1555
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_ORGB_1555&t;&t;0x04
DECL|macro|TVP3026_XTRUECOLORCTRL_RGB_664
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_RGB_664&t;&t;0x03
DECL|macro|TVP3026_XTRUECOLORCTRL_RGBO_4444
mdefine_line|#define     TVP3026_XTRUECOLORCTRL_RGBO_4444&t;&t;0x01
DECL|macro|TVP3026_XMUXCTRL
mdefine_line|#define TVP3026_XMUXCTRL&t;0x19
DECL|macro|TVP3026_XMUXCTRL_MEMORY_8BIT
mdefine_line|#define     TVP3026_XMUXCTRL_MEMORY_8BIT&t;&t;&t;0x01 /* - */
DECL|macro|TVP3026_XMUXCTRL_MEMORY_16BIT
mdefine_line|#define     TVP3026_XMUXCTRL_MEMORY_16BIT&t;&t;&t;0x02 /* - */
DECL|macro|TVP3026_XMUXCTRL_MEMORY_32BIT
mdefine_line|#define     TVP3026_XMUXCTRL_MEMORY_32BIT&t;&t;&t;0x03 /* 2MB RAM, 512K * 4 */
DECL|macro|TVP3026_XMUXCTRL_MEMORY_64BIT
mdefine_line|#define     TVP3026_XMUXCTRL_MEMORY_64BIT&t;&t;&t;0x04 /* &gt;2MB RAM, 512K * 8 &amp; more */
DECL|macro|TVP3026_XMUXCTRL_PIXEL_4BIT
mdefine_line|#define     TVP3026_XMUXCTRL_PIXEL_4BIT&t;&t;&t;&t;0x40 /* L0,H0,L1,H1... */
DECL|macro|TVP3026_XMUXCTRL_PIXEL_4BIT_SWAPPED
mdefine_line|#define     TVP3026_XMUXCTRL_PIXEL_4BIT_SWAPPED&t;&t;&t;0x60 /* H0,L0,H1,L1... */
DECL|macro|TVP3026_XMUXCTRL_PIXEL_8BIT
mdefine_line|#define     TVP3026_XMUXCTRL_PIXEL_8BIT&t;&t;&t;&t;0x48
DECL|macro|TVP3026_XMUXCTRL_PIXEL_16BIT
mdefine_line|#define     TVP3026_XMUXCTRL_PIXEL_16BIT&t;&t;&t;0x50
DECL|macro|TVP3026_XMUXCTRL_PIXEL_32BIT
mdefine_line|#define     TVP3026_XMUXCTRL_PIXEL_32BIT&t;&t;&t;0x58
DECL|macro|TVP3026_XMUXCTRL_VGA
mdefine_line|#define     TVP3026_XMUXCTRL_VGA&t;&t;&t;&t;0x98 /* VGA MEMORY, 8BIT PIXEL */
DECL|macro|TVP3026_XCLKCTRL
mdefine_line|#define TVP3026_XCLKCTRL&t;0x1A
DECL|macro|TVP3026_XCLKCTRL_DIV1
mdefine_line|#define     TVP3026_XCLKCTRL_DIV1&t;0x00
DECL|macro|TVP3026_XCLKCTRL_DIV2
mdefine_line|#define     TVP3026_XCLKCTRL_DIV2&t;0x10
DECL|macro|TVP3026_XCLKCTRL_DIV4
mdefine_line|#define     TVP3026_XCLKCTRL_DIV4&t;0x20
DECL|macro|TVP3026_XCLKCTRL_DIV8
mdefine_line|#define     TVP3026_XCLKCTRL_DIV8&t;0x30
DECL|macro|TVP3026_XCLKCTRL_DIV16
mdefine_line|#define     TVP3026_XCLKCTRL_DIV16&t;0x40
DECL|macro|TVP3026_XCLKCTRL_DIV32
mdefine_line|#define     TVP3026_XCLKCTRL_DIV32&t;0x50
DECL|macro|TVP3026_XCLKCTRL_DIV64
mdefine_line|#define     TVP3026_XCLKCTRL_DIV64&t;0x60
DECL|macro|TVP3026_XCLKCTRL_CLKSTOPPED
mdefine_line|#define     TVP3026_XCLKCTRL_CLKSTOPPED&t;0x70
DECL|macro|TVP3026_XCLKCTRL_SRC_CLK0
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_CLK0&t;0x00
DECL|macro|TVP3026_XCLKCTRL_SRC_CLK1
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_CLK1   0x01
DECL|macro|TVP3026_XCLKCTRL_SRC_CLK2
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_CLK2&t;0x02&t;/* CLK2 is TTL source*/
DECL|macro|TVP3026_XCLKCTRL_SRC_NCLK2
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_NCLK2&t;0x03&t;/* not CLK2 is TTL source */
DECL|macro|TVP3026_XCLKCTRL_SRC_ECLK2
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_ECLK2&t;0x04&t;/* CLK2 and not CLK2 is ECL source */
DECL|macro|TVP3026_XCLKCTRL_SRC_PLL
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_PLL&t;0x05
DECL|macro|TVP3026_XCLKCTRL_SRC_DIS
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_DIS&t;0x06&t;/* disable &amp; poweroff internal clock */
DECL|macro|TVP3026_XCLKCTRL_SRC_CLK0VGA
mdefine_line|#define     TVP3026_XCLKCTRL_SRC_CLK0VGA 0x07
DECL|macro|TVP3026_XPALETTEPAGE
mdefine_line|#define TVP3026_XPALETTEPAGE&t;0x1C
DECL|macro|TVP3026_XGENCTRL
mdefine_line|#define TVP3026_XGENCTRL&t;0x1D
DECL|macro|TVP3026_XGENCTRL_HSYNC_POS
mdefine_line|#define     TVP3026_XGENCTRL_HSYNC_POS&t;0x00
DECL|macro|TVP3026_XGENCTRL_HSYNC_NEG
mdefine_line|#define     TVP3026_XGENCTRL_HSYNC_NEG&t;0x01
DECL|macro|TVP3026_XGENCTRL_VSYNC_POS
mdefine_line|#define     TVP3026_XGENCTRL_VSYNC_POS&t;0x00
DECL|macro|TVP3026_XGENCTRL_VSYNC_NEG
mdefine_line|#define     TVP3026_XGENCTRL_VSYNC_NEG&t;0x02
DECL|macro|TVP3026_XGENCTRL_LITTLE_ENDIAN
mdefine_line|#define     TVP3026_XGENCTRL_LITTLE_ENDIAN 0x00
DECL|macro|TVP3026_XGENCTRL_BIG_ENDIAN
mdefine_line|#define     TVP3026_XGENCTRL_BIG_ENDIAN    0x08
DECL|macro|TVP3026_XGENCTRL_BLACK_0IRE
mdefine_line|#define     TVP3026_XGENCTRL_BLACK_0IRE&t;&t;0x00
DECL|macro|TVP3026_XGENCTRL_BLACK_75IRE
mdefine_line|#define     TVP3026_XGENCTRL_BLACK_75IRE&t;0x10
DECL|macro|TVP3026_XGENCTRL_NO_SYNC_ON_GREEN
mdefine_line|#define     TVP3026_XGENCTRL_NO_SYNC_ON_GREEN&t;0x00
DECL|macro|TVP3026_XGENCTRL_SYNC_ON_GREEN
mdefine_line|#define     TVP3026_XGENCTRL_SYNC_ON_GREEN&t;0x20
DECL|macro|TVP3026_XGENCTRL_OVERSCAN_DIS
mdefine_line|#define     TVP3026_XGENCTRL_OVERSCAN_DIS&t;0x00
DECL|macro|TVP3026_XGENCTRL_OVERSCAN_EN
mdefine_line|#define     TVP3026_XGENCTRL_OVERSCAN_EN&t;0x40
DECL|macro|TVP3026_XMISCCTRL
mdefine_line|#define TVP3026_XMISCCTRL&t;0x1E
DECL|macro|TVP3026_XMISCCTRL_DAC_PUP
mdefine_line|#define     TVP3026_XMISCCTRL_DAC_PUP&t;0x00
DECL|macro|TVP3026_XMISCCTRL_DAC_PDOWN
mdefine_line|#define     TVP3026_XMISCCTRL_DAC_PDOWN&t;0x01
DECL|macro|TVP3026_XMISCCTRL_DAC_EXT
mdefine_line|#define     TVP3026_XMISCCTRL_DAC_EXT&t;0x00 /* or 8, bit 3 is ignored */
DECL|macro|TVP3026_XMISCCTRL_DAC_6BIT
mdefine_line|#define     TVP3026_XMISCCTRL_DAC_6BIT&t;0x04
DECL|macro|TVP3026_XMISCCTRL_DAC_8BIT
mdefine_line|#define     TVP3026_XMISCCTRL_DAC_8BIT&t;0x0C
DECL|macro|TVP3026_XMISCCTRL_PSEL_DIS
mdefine_line|#define     TVP3026_XMISCCTRL_PSEL_DIS&t;0x00
DECL|macro|TVP3026_XMISCCTRL_PSEL_EN
mdefine_line|#define     TVP3026_XMISCCTRL_PSEL_EN&t;0x10
DECL|macro|TVP3026_XMISCCTRL_PSEL_LOW
mdefine_line|#define     TVP3026_XMISCCTRL_PSEL_LOW&t;0x00 /* PSEL high selects directcolor */
DECL|macro|TVP3026_XMISCCTRL_PSEL_HIGH
mdefine_line|#define     TVP3026_XMISCCTRL_PSEL_HIGH 0x20 /* PSEL high selects truecolor or pseudocolor */
DECL|macro|TVP3026_XGENIOCTRL
mdefine_line|#define TVP3026_XGENIOCTRL&t;0x2A
DECL|macro|TVP3026_XGENIODATA
mdefine_line|#define TVP3026_XGENIODATA&t;0x2B
DECL|macro|TVP3026_XPLLADDR
mdefine_line|#define TVP3026_XPLLADDR&t;0x2C
DECL|macro|TVP3026_XPLLADDR_X
mdefine_line|#define     TVP3026_XPLLADDR_X(LOOP,MCLK,PIX) (((LOOP)&lt;&lt;4) | ((MCLK)&lt;&lt;2) | (PIX))
DECL|macro|TVP3026_XPLLDATA_N
mdefine_line|#define     TVP3026_XPLLDATA_N&t;&t;0x00
DECL|macro|TVP3026_XPLLDATA_M
mdefine_line|#define     TVP3026_XPLLDATA_M&t;&t;0x01
DECL|macro|TVP3026_XPLLDATA_P
mdefine_line|#define     TVP3026_XPLLDATA_P&t;&t;0x02
DECL|macro|TVP3026_XPLLDATA_STAT
mdefine_line|#define     TVP3026_XPLLDATA_STAT&t;0x03
DECL|macro|TVP3026_XPIXPLLDATA
mdefine_line|#define TVP3026_XPIXPLLDATA&t;0x2D
DECL|macro|TVP3026_XMEMPLLDATA
mdefine_line|#define TVP3026_XMEMPLLDATA&t;0x2E
DECL|macro|TVP3026_XLOOPPLLDATA
mdefine_line|#define TVP3026_XLOOPPLLDATA&t;0x2F
DECL|macro|TVP3026_XCOLKEYOVRMIN
mdefine_line|#define TVP3026_XCOLKEYOVRMIN&t;0x30
DECL|macro|TVP3026_XCOLKEYOVRMAX
mdefine_line|#define TVP3026_XCOLKEYOVRMAX&t;0x31
DECL|macro|TVP3026_XCOLKEYREDMIN
mdefine_line|#define TVP3026_XCOLKEYREDMIN&t;0x32
DECL|macro|TVP3026_XCOLKEYREDMAX
mdefine_line|#define TVP3026_XCOLKEYREDMAX&t;0x33
DECL|macro|TVP3026_XCOLKEYGREENMIN
mdefine_line|#define TVP3026_XCOLKEYGREENMIN&t;0x34
DECL|macro|TVP3026_XCOLKEYGREENMAX
mdefine_line|#define TVP3026_XCOLKEYGREENMAX&t;0x35
DECL|macro|TVP3026_XCOLKEYBLUEMIN
mdefine_line|#define TVP3026_XCOLKEYBLUEMIN&t;0x36
DECL|macro|TVP3026_XCOLKEYBLUEMAX
mdefine_line|#define TVP3026_XCOLKEYBLUEMAX&t;0x37
DECL|macro|TVP3026_XCOLKEYCTRL
mdefine_line|#define TVP3026_XCOLKEYCTRL&t;0x38
DECL|macro|TVP3026_XCOLKEYCTRL_OVR_EN
mdefine_line|#define     TVP3026_XCOLKEYCTRL_OVR_EN&t;0x01
DECL|macro|TVP3026_XCOLKEYCTRL_RED_EN
mdefine_line|#define     TVP3026_XCOLKEYCTRL_RED_EN&t;0x02
DECL|macro|TVP3026_XCOLKEYCTRL_GREEN_EN
mdefine_line|#define     TVP3026_XCOLKEYCTRL_GREEN_EN 0x04
DECL|macro|TVP3026_XCOLKEYCTRL_BLUE_EN
mdefine_line|#define     TVP3026_XCOLKEYCTRL_BLUE_EN&t;0x08
DECL|macro|TVP3026_XCOLKEYCTRL_NEGATE
mdefine_line|#define     TVP3026_XCOLKEYCTRL_NEGATE&t;0x10
DECL|macro|TVP3026_XCOLKEYCTRL_ZOOM1
mdefine_line|#define     TVP3026_XCOLKEYCTRL_ZOOM1&t;0x00
DECL|macro|TVP3026_XCOLKEYCTRL_ZOOM2
mdefine_line|#define     TVP3026_XCOLKEYCTRL_ZOOM2&t;0x20
DECL|macro|TVP3026_XCOLKEYCTRL_ZOOM4
mdefine_line|#define     TVP3026_XCOLKEYCTRL_ZOOM4&t;0x40
DECL|macro|TVP3026_XCOLKEYCTRL_ZOOM8
mdefine_line|#define     TVP3026_XCOLKEYCTRL_ZOOM8&t;0x60
DECL|macro|TVP3026_XCOLKEYCTRL_ZOOM16
mdefine_line|#define     TVP3026_XCOLKEYCTRL_ZOOM16&t;0x80
DECL|macro|TVP3026_XCOLKEYCTRL_ZOOM32
mdefine_line|#define     TVP3026_XCOLKEYCTRL_ZOOM32&t;0xA0
DECL|macro|TVP3026_XMEMPLLCTRL
mdefine_line|#define TVP3026_XMEMPLLCTRL&t;0x39
DECL|macro|TVP3026_XMEMPLLCTRL_DIV
mdefine_line|#define     TVP3026_XMEMPLLCTRL_DIV(X)&t;(((X)-1)&gt;&gt;1)&t;/* 2,4,6,8,10,12,14,16, division applied to LOOP PLL after divide by 2^P */
DECL|macro|TVP3026_XMEMPLLCTRL_STROBEMKC4
mdefine_line|#define     TVP3026_XMEMPLLCTRL_STROBEMKC4&t;0x08
DECL|macro|TVP3026_XMEMPLLCTRL_MCLK_DOTCLOCK
mdefine_line|#define     TVP3026_XMEMPLLCTRL_MCLK_DOTCLOCK&t;0x00&t;/* MKC4 */
DECL|macro|TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL
mdefine_line|#define     TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL&t;0x10&t;/* MKC4 */
DECL|macro|TVP3026_XMEMPLLCTRL_RCLK_PIXPLL
mdefine_line|#define     TVP3026_XMEMPLLCTRL_RCLK_PIXPLL&t;0x00
DECL|macro|TVP3026_XMEMPLLCTRL_RCLK_LOOPPLL
mdefine_line|#define     TVP3026_XMEMPLLCTRL_RCLK_LOOPPLL&t;0x20
DECL|macro|TVP3026_XMEMPLLCTRL_RCLK_DOTDIVN
mdefine_line|#define     TVP3026_XMEMPLLCTRL_RCLK_DOTDIVN&t;0x40&t;/* dot clock divided by loop pclk N prescaler */
DECL|macro|TVP3026_XSENSETEST
mdefine_line|#define TVP3026_XSENSETEST&t;0x3A
DECL|macro|TVP3026_XTESTMODEDATA
mdefine_line|#define TVP3026_XTESTMODEDATA&t;0x3B
DECL|macro|TVP3026_XCRCREML
mdefine_line|#define TVP3026_XCRCREML&t;0x3C
DECL|macro|TVP3026_XCRCREMH
mdefine_line|#define TVP3026_XCRCREMH&t;0x3D
DECL|macro|TVP3026_XCRCBITSEL
mdefine_line|#define TVP3026_XCRCBITSEL&t;0x3E
DECL|macro|TVP3026_XID
mdefine_line|#define TVP3026_XID&t;&t;0x3F
DECL|variable|DACseq
r_static
r_const
r_int
r_char
id|DACseq
(braket
)braket
op_assign
(brace
id|TVP3026_XLATCHCTRL
comma
id|TVP3026_XTRUECOLORCTRL
comma
id|TVP3026_XMUXCTRL
comma
id|TVP3026_XCLKCTRL
comma
id|TVP3026_XPALETTEPAGE
comma
id|TVP3026_XGENCTRL
comma
id|TVP3026_XMISCCTRL
comma
id|TVP3026_XGENIOCTRL
comma
id|TVP3026_XGENIODATA
comma
id|TVP3026_XCOLKEYOVRMIN
comma
id|TVP3026_XCOLKEYOVRMAX
comma
id|TVP3026_XCOLKEYREDMIN
comma
id|TVP3026_XCOLKEYREDMAX
comma
id|TVP3026_XCOLKEYGREENMIN
comma
id|TVP3026_XCOLKEYGREENMAX
comma
id|TVP3026_XCOLKEYBLUEMIN
comma
id|TVP3026_XCOLKEYBLUEMAX
comma
id|TVP3026_XCOLKEYCTRL
comma
id|TVP3026_XMEMPLLCTRL
comma
id|TVP3026_XSENSETEST
comma
id|TVP3026_XCURCTRL
)brace
suffix:semicolon
DECL|macro|POS3026_XLATCHCTRL
mdefine_line|#define POS3026_XLATCHCTRL&t;0
DECL|macro|POS3026_XTRUECOLORCTRL
mdefine_line|#define POS3026_XTRUECOLORCTRL&t;1
DECL|macro|POS3026_XMUXCTRL
mdefine_line|#define POS3026_XMUXCTRL&t;2
DECL|macro|POS3026_XCLKCTRL
mdefine_line|#define POS3026_XCLKCTRL&t;3
DECL|macro|POS3026_XGENCTRL
mdefine_line|#define POS3026_XGENCTRL&t;5
DECL|macro|POS3026_XMISCCTRL
mdefine_line|#define POS3026_XMISCCTRL&t;6
DECL|macro|POS3026_XMEMPLLCTRL
mdefine_line|#define POS3026_XMEMPLLCTRL&t;18
DECL|macro|POS3026_XCURCTRL
mdefine_line|#define POS3026_XCURCTRL&t;20
DECL|variable|MGADACbpp32
r_static
r_const
r_int
r_char
id|MGADACbpp32
(braket
)braket
op_assign
(brace
id|TVP3026_XLATCHCTRL_2_1
comma
id|TVP3026_XTRUECOLORCTRL_DIRECTCOLOR
op_or
id|TVP3026_XTRUECOLORCTRL_ORGB_8888
comma
l_int|0x00
comma
id|TVP3026_XCLKCTRL_DIV1
op_or
id|TVP3026_XCLKCTRL_SRC_PLL
comma
l_int|0x00
comma
id|TVP3026_XGENCTRL_HSYNC_POS
op_or
id|TVP3026_XGENCTRL_VSYNC_POS
op_or
id|TVP3026_XGENCTRL_LITTLE_ENDIAN
op_or
id|TVP3026_XGENCTRL_BLACK_0IRE
op_or
id|TVP3026_XGENCTRL_NO_SYNC_ON_GREEN
op_or
id|TVP3026_XGENCTRL_OVERSCAN_DIS
comma
id|TVP3026_XMISCCTRL_DAC_PUP
op_or
id|TVP3026_XMISCCTRL_DAC_8BIT
op_or
id|TVP3026_XMISCCTRL_PSEL_DIS
op_or
id|TVP3026_XMISCCTRL_PSEL_HIGH
comma
l_int|0x00
comma
l_int|0x1E
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFF
comma
l_int|0xFF
comma
id|TVP3026_XCOLKEYCTRL_ZOOM1
comma
l_int|0x00
comma
l_int|0x00
comma
id|TVP3026_XCURCTRL_DIS
)brace
suffix:semicolon
DECL|function|matroxfb_ti3026_flashcursor
r_static
r_void
id|matroxfb_ti3026_flashcursor
c_func
(paren
r_int
r_int
id|ptr
)paren
(brace
DECL|macro|minfo
mdefine_line|#define minfo ((struct matrox_fb_info*)ptr)
id|matroxfb_DAC_lock
c_func
(paren
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCURCTRL
comma
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCURCTRL
)paren
op_xor
id|TVP3026_XCURCTRL_DIS
op_xor
id|TVP3026_XCURCTRL_XGA
)paren
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|cursor.timer.expires
)paren
op_assign
id|jiffies
op_plus
id|HZ
op_div
l_int|2
suffix:semicolon
id|add_timer
c_func
(paren
op_amp
id|ACCESS_FBINFO
c_func
(paren
id|cursor.timer
)paren
)paren
suffix:semicolon
id|matroxfb_DAC_unlock
c_func
(paren
)paren
suffix:semicolon
DECL|macro|minfo
macro_line|#undef minfo
)brace
DECL|function|matroxfb_ti3026_createcursor
r_static
r_void
id|matroxfb_ti3026_createcursor
c_func
(paren
id|WPMINFO
r_struct
id|display
op_star
id|p
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|u_int32_t
id|xline
suffix:semicolon
r_int
r_int
id|i
suffix:semicolon
r_int
r_int
id|to
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|currcon_display
)paren
op_ne
id|p
)paren
r_return
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;matroxfb_ti3026_createcursor&quot;
)paren
suffix:semicolon
id|matroxfb_createcursorshape
c_func
(paren
id|PMINFO
id|p
comma
id|p-&gt;var.vmode
)paren
suffix:semicolon
id|xline
op_assign
(paren
op_complement
l_int|0
)paren
op_lshift
(paren
l_int|32
op_minus
id|ACCESS_FBINFO
c_func
(paren
id|cursor.w
)paren
)paren
suffix:semicolon
id|matroxfb_DAC_lock_irqsave
c_func
(paren
id|flags
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_INDEX
comma
l_int|0
)paren
suffix:semicolon
id|to
op_assign
id|ACCESS_FBINFO
c_func
(paren
id|cursor.u
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|to
suffix:semicolon
id|i
op_increment
)paren
(brace
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
)brace
id|to
op_assign
id|ACCESS_FBINFO
c_func
(paren
id|cursor.d
)paren
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
id|i
OL
id|to
suffix:semicolon
id|i
op_increment
)paren
(brace
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
id|xline
op_rshift
l_int|24
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
id|xline
op_rshift
l_int|16
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
id|xline
op_rshift
l_int|8
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
id|xline
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|i
OL
l_int|64
suffix:semicolon
id|i
op_increment
)paren
(brace
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|512
suffix:semicolon
id|i
op_increment
)paren
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURRAMDATA
comma
l_int|0xFF
)paren
suffix:semicolon
id|matroxfb_DAC_unlock_irqrestore
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
DECL|function|matroxfb_ti3026_cursor
r_static
r_void
id|matroxfb_ti3026_cursor
c_func
(paren
r_struct
id|display
op_star
id|p
comma
r_int
id|mode
comma
r_int
id|x
comma
r_int
id|y
)paren
(brace
r_int
r_int
id|flags
suffix:semicolon
id|MINFO_FROM_DISP
c_func
(paren
id|p
)paren
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;matroxfb_ti3026_cursor&quot;
)paren
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|currcon_display
)paren
op_ne
id|p
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|mode
op_eq
id|CM_ERASE
)paren
(brace
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|cursor.state
)paren
op_ne
id|CM_ERASE
)paren
(brace
id|del_timer_sync
c_func
(paren
op_amp
id|ACCESS_FBINFO
c_func
(paren
id|cursor.timer
)paren
)paren
suffix:semicolon
id|matroxfb_DAC_lock_irqsave
c_func
(paren
id|flags
)paren
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|cursor.state
)paren
op_assign
id|CM_ERASE
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCURCTRL
comma
id|ACCESS_FBINFO
c_func
(paren
id|currenthw-&gt;DACreg
(braket
id|POS3026_XCURCTRL
)braket
)paren
)paren
suffix:semicolon
id|matroxfb_DAC_unlock_irqrestore
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|p-&gt;conp-&gt;vc_cursor_type
op_amp
id|CUR_HWMASK
)paren
op_ne
id|ACCESS_FBINFO
c_func
(paren
id|cursor.type
)paren
)paren
id|matroxfb_ti3026_createcursor
c_func
(paren
id|PMINFO
id|p
)paren
suffix:semicolon
id|x
op_mul_assign
id|fontwidth
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_mul_assign
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_sub_assign
id|p-&gt;var.yoffset
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;var.vmode
op_amp
id|FB_VMODE_DOUBLE
)paren
id|y
op_mul_assign
l_int|2
suffix:semicolon
id|del_timer_sync
c_func
(paren
op_amp
id|ACCESS_FBINFO
c_func
(paren
id|cursor.timer
)paren
)paren
suffix:semicolon
id|matroxfb_DAC_lock_irqsave
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|x
op_ne
id|ACCESS_FBINFO
c_func
(paren
id|cursor.x
)paren
)paren
op_logical_or
(paren
id|y
op_ne
id|ACCESS_FBINFO
c_func
(paren
id|cursor.y
)paren
)paren
op_logical_or
id|ACCESS_FBINFO
c_func
(paren
id|cursor.redraw
)paren
)paren
(brace
id|ACCESS_FBINFO
c_func
(paren
id|cursor.redraw
)paren
op_assign
l_int|0
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|cursor.x
)paren
op_assign
id|x
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|cursor.y
)paren
op_assign
id|y
suffix:semicolon
id|x
op_add_assign
l_int|64
suffix:semicolon
id|y
op_add_assign
l_int|64
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCURCTRL
comma
id|ACCESS_FBINFO
c_func
(paren
id|currenthw-&gt;DACreg
(braket
id|POS3026_XCURCTRL
)braket
)paren
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURPOSXL
comma
id|x
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURPOSXH
comma
id|x
op_rshift
l_int|8
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURPOSYL
comma
id|y
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_RAMDAC_BASE
op_plus
id|TVP3026_CURPOSYH
comma
id|y
op_rshift
l_int|8
)paren
suffix:semicolon
)brace
id|ACCESS_FBINFO
c_func
(paren
id|cursor.state
)paren
op_assign
id|CM_DRAW
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.blink
)paren
)paren
id|mod_timer
c_func
(paren
op_amp
id|ACCESS_FBINFO
c_func
(paren
id|cursor.timer
)paren
comma
id|jiffies
op_plus
id|HZ
op_div
l_int|2
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCURCTRL
comma
id|ACCESS_FBINFO
c_func
(paren
id|currenthw-&gt;DACreg
(braket
id|POS3026_XCURCTRL
)braket
)paren
op_or
id|TVP3026_XCURCTRL_XGA
)paren
suffix:semicolon
id|matroxfb_DAC_unlock_irqrestore
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
DECL|function|matroxfb_ti3026_setfont
r_static
r_int
id|matroxfb_ti3026_setfont
c_func
(paren
r_struct
id|display
op_star
id|p
comma
r_int
id|width
comma
r_int
id|height
)paren
(brace
id|DBG
c_func
(paren
l_string|&quot;matrox_ti3026_setfont&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
op_logical_and
id|p-&gt;conp
)paren
id|matroxfb_ti3026_createcursor
c_func
(paren
id|PMXINFO
c_func
(paren
id|p
)paren
id|p
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|matroxfb_ti3026_selhwcursor
r_static
r_int
id|matroxfb_ti3026_selhwcursor
c_func
(paren
id|WPMINFO
r_struct
id|display
op_star
id|p
)paren
(brace
id|ACCESS_FBINFO
c_func
(paren
id|dispsw.cursor
)paren
op_assign
id|matroxfb_ti3026_cursor
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|dispsw.set_font
)paren
op_assign
id|matroxfb_ti3026_setfont
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|Ti3026_calcclock
r_static
r_int
id|Ti3026_calcclock
c_func
(paren
id|CPMINFO
r_int
r_int
id|freq
comma
r_int
r_int
id|fmax
comma
r_int
op_star
id|in
comma
r_int
op_star
id|feed
comma
r_int
op_star
id|post
)paren
(brace
r_int
r_int
id|fvco
suffix:semicolon
r_int
r_int
id|lin
comma
id|lfeed
comma
id|lpost
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;Ti3026_calcclock&quot;
)paren
id|fvco
op_assign
id|PLL_calcclock
c_func
(paren
id|PMINFO
id|freq
comma
id|fmax
comma
op_amp
id|lin
comma
op_amp
id|lfeed
comma
op_amp
id|lpost
)paren
suffix:semicolon
id|fvco
op_rshift_assign
(paren
op_star
id|post
op_assign
id|lpost
)paren
suffix:semicolon
op_star
id|in
op_assign
l_int|64
op_minus
id|lin
suffix:semicolon
op_star
id|feed
op_assign
l_int|64
op_minus
id|lfeed
suffix:semicolon
r_return
id|fvco
suffix:semicolon
)brace
DECL|function|Ti3026_setpclk
r_static
r_int
id|Ti3026_setpclk
c_func
(paren
id|CPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
comma
r_int
id|clk
comma
r_struct
id|display
op_star
id|p
)paren
(brace
r_int
r_int
id|f_pll
suffix:semicolon
r_int
r_int
id|pixfeed
comma
id|pixin
comma
id|pixpost
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;Ti3026_setpclk&quot;
)paren
id|f_pll
op_assign
id|Ti3026_calcclock
c_func
(paren
id|PMINFO
id|clk
comma
id|ACCESS_FBINFO
c_func
(paren
id|max_pixel_clock
)paren
comma
op_amp
id|pixin
comma
op_amp
id|pixfeed
comma
op_amp
id|pixpost
)paren
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|0
)braket
op_assign
id|pixin
op_or
l_int|0xC0
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|1
)braket
op_assign
id|pixfeed
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|2
)braket
op_assign
id|pixpost
op_or
l_int|0xB0
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;type
op_eq
id|FB_TYPE_TEXT
)paren
(brace
id|hw-&gt;DACreg
(braket
id|POS3026_XMEMPLLCTRL
)braket
op_assign
id|TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL
op_or
id|TVP3026_XMEMPLLCTRL_RCLK_PIXPLL
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|3
)braket
op_assign
l_int|0xFD
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|4
)braket
op_assign
l_int|0x3D
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|5
)braket
op_assign
l_int|0x70
suffix:semicolon
)brace
r_else
(brace
r_int
r_int
id|loopfeed
comma
id|loopin
comma
id|looppost
comma
id|loopdiv
comma
id|z
suffix:semicolon
r_int
r_int
id|Bpp
suffix:semicolon
id|Bpp
op_assign
id|ACCESS_FBINFO
c_func
(paren
id|curr.final_bppShift
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;var.bits_per_pixel
op_eq
l_int|24
)paren
(brace
id|loopfeed
op_assign
l_int|3
suffix:semicolon
multiline_comment|/* set lm to any possible value */
id|loopin
op_assign
l_int|3
op_star
l_int|32
op_div
id|Bpp
suffix:semicolon
)brace
r_else
(brace
id|loopfeed
op_assign
l_int|4
suffix:semicolon
id|loopin
op_assign
l_int|4
op_star
l_int|32
op_div
id|Bpp
suffix:semicolon
)brace
id|z
op_assign
(paren
l_int|110000
op_star
id|loopin
)paren
op_div
(paren
id|f_pll
op_star
id|loopfeed
)paren
suffix:semicolon
id|loopdiv
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* div 2 */
r_if
c_cond
(paren
id|z
OL
l_int|2
)paren
id|looppost
op_assign
l_int|0
suffix:semicolon
r_else
r_if
c_cond
(paren
id|z
OL
l_int|4
)paren
id|looppost
op_assign
l_int|1
suffix:semicolon
r_else
r_if
c_cond
(paren
id|z
OL
l_int|8
)paren
id|looppost
op_assign
l_int|2
suffix:semicolon
r_else
(brace
id|looppost
op_assign
l_int|3
suffix:semicolon
id|loopdiv
op_assign
id|z
op_div
l_int|16
suffix:semicolon
)brace
r_if
c_cond
(paren
id|p-&gt;var.bits_per_pixel
op_eq
l_int|24
)paren
(brace
id|hw-&gt;DACclk
(braket
l_int|3
)braket
op_assign
(paren
(paren
l_int|65
op_minus
id|loopin
)paren
op_amp
l_int|0x3F
)paren
op_or
l_int|0xC0
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|4
)braket
op_assign
(paren
l_int|65
op_minus
id|loopfeed
)paren
op_or
l_int|0x80
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|accel.ramdac_rev
)paren
OG
l_int|0x20
)paren
(brace
r_if
c_cond
(paren
id|isInterleave
c_func
(paren
id|MINFO
)paren
)paren
id|hw-&gt;DACreg
(braket
id|POS3026_XLATCHCTRL
)braket
op_assign
id|TVP3026B_XLATCHCTRL_8_3
suffix:semicolon
r_else
(brace
id|hw-&gt;DACclk
(braket
l_int|4
)braket
op_and_assign
op_complement
l_int|0xC0
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XLATCHCTRL
)braket
op_assign
id|TVP3026B_XLATCHCTRL_4_3
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|isInterleave
c_func
(paren
id|MINFO
)paren
)paren
suffix:semicolon
multiline_comment|/* default... */
r_else
(brace
id|hw-&gt;DACclk
(braket
l_int|4
)braket
op_xor_assign
l_int|0xC0
suffix:semicolon
multiline_comment|/* change from 0x80 to 0x40 */
id|hw-&gt;DACreg
(braket
id|POS3026_XLATCHCTRL
)braket
op_assign
id|TVP3026A_XLATCHCTRL_4_3
suffix:semicolon
)brace
)brace
id|hw-&gt;DACclk
(braket
l_int|5
)braket
op_assign
id|looppost
op_or
l_int|0xF8
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.mga_24bpp_fix
)paren
)paren
id|hw-&gt;DACclk
(braket
l_int|5
)braket
op_xor_assign
l_int|0x40
suffix:semicolon
)brace
r_else
(brace
id|hw-&gt;DACclk
(braket
l_int|3
)braket
op_assign
(paren
(paren
l_int|65
op_minus
id|loopin
)paren
op_amp
l_int|0x3F
)paren
op_or
l_int|0xC0
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|4
)braket
op_assign
l_int|65
op_minus
id|loopfeed
suffix:semicolon
id|hw-&gt;DACclk
(braket
l_int|5
)braket
op_assign
id|looppost
op_or
l_int|0xF0
suffix:semicolon
)brace
id|hw-&gt;DACreg
(braket
id|POS3026_XMEMPLLCTRL
)braket
op_assign
id|loopdiv
op_or
id|TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL
op_or
id|TVP3026_XMEMPLLCTRL_RCLK_LOOPPLL
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|Ti3026_init
r_static
r_int
id|Ti3026_init
c_func
(paren
id|CPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
comma
r_struct
id|my_timming
op_star
id|m
comma
r_struct
id|display
op_star
id|p
)paren
(brace
id|u_int8_t
id|muxctrl
op_assign
id|isInterleave
c_func
(paren
id|MINFO
)paren
ques
c_cond
id|TVP3026_XMUXCTRL_MEMORY_64BIT
suffix:colon
id|TVP3026_XMUXCTRL_MEMORY_32BIT
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;Ti3026_init&quot;
)paren
id|memcpy
c_func
(paren
id|hw-&gt;DACreg
comma
id|MGADACbpp32
comma
r_sizeof
(paren
id|hw-&gt;DACreg
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;type
op_eq
id|FB_TYPE_TEXT
)paren
(brace
id|hw-&gt;DACreg
(braket
id|POS3026_XLATCHCTRL
)braket
op_assign
id|TVP3026_XLATCHCTRL_8_1
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XTRUECOLORCTRL
)braket
op_assign
id|TVP3026_XTRUECOLORCTRL_PSEUDOCOLOR
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMUXCTRL
)braket
op_assign
id|TVP3026_XMUXCTRL_VGA
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XCLKCTRL
)braket
op_assign
id|TVP3026_XCLKCTRL_SRC_PLL
op_or
id|TVP3026_XCLKCTRL_DIV4
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMISCCTRL
)braket
op_assign
id|TVP3026_XMISCCTRL_DAC_PUP
op_or
id|TVP3026_XMISCCTRL_DAC_6BIT
op_or
id|TVP3026_XMISCCTRL_PSEL_DIS
op_or
id|TVP3026_XMISCCTRL_PSEL_LOW
suffix:semicolon
)brace
r_else
(brace
r_switch
c_cond
(paren
id|p-&gt;var.bits_per_pixel
)paren
(brace
r_case
l_int|4
suffix:colon
id|hw-&gt;DACreg
(braket
id|POS3026_XLATCHCTRL
)braket
op_assign
id|TVP3026_XLATCHCTRL_16_1
suffix:semicolon
multiline_comment|/* or _8_1, they are same */
id|hw-&gt;DACreg
(braket
id|POS3026_XTRUECOLORCTRL
)braket
op_assign
id|TVP3026_XTRUECOLORCTRL_PSEUDOCOLOR
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMUXCTRL
)braket
op_assign
id|muxctrl
op_or
id|TVP3026_XMUXCTRL_PIXEL_4BIT
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XCLKCTRL
)braket
op_assign
id|TVP3026_XCLKCTRL_SRC_PLL
op_or
id|TVP3026_XCLKCTRL_DIV8
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMISCCTRL
)braket
op_assign
id|TVP3026_XMISCCTRL_DAC_PUP
op_or
id|TVP3026_XMISCCTRL_DAC_8BIT
op_or
id|TVP3026_XMISCCTRL_PSEL_DIS
op_or
id|TVP3026_XMISCCTRL_PSEL_LOW
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|8
suffix:colon
id|hw-&gt;DACreg
(braket
id|POS3026_XLATCHCTRL
)braket
op_assign
id|TVP3026_XLATCHCTRL_8_1
suffix:semicolon
multiline_comment|/* or _4_1, they are same */
id|hw-&gt;DACreg
(braket
id|POS3026_XTRUECOLORCTRL
)braket
op_assign
id|TVP3026_XTRUECOLORCTRL_PSEUDOCOLOR
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMUXCTRL
)braket
op_assign
id|muxctrl
op_or
id|TVP3026_XMUXCTRL_PIXEL_8BIT
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XCLKCTRL
)braket
op_assign
id|TVP3026_XCLKCTRL_SRC_PLL
op_or
id|TVP3026_XCLKCTRL_DIV4
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMISCCTRL
)braket
op_assign
id|TVP3026_XMISCCTRL_DAC_PUP
op_or
id|TVP3026_XMISCCTRL_DAC_8BIT
op_or
id|TVP3026_XMISCCTRL_PSEL_DIS
op_or
id|TVP3026_XMISCCTRL_PSEL_LOW
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|16
suffix:colon
multiline_comment|/* XLATCHCTRL should be _4_1 / _2_1... Why is not? (_2_1 is used everytime) */
id|hw-&gt;DACreg
(braket
id|POS3026_XTRUECOLORCTRL
)braket
op_assign
(paren
id|p-&gt;var.green.length
op_eq
l_int|5
)paren
ques
c_cond
(paren
id|TVP3026_XTRUECOLORCTRL_DIRECTCOLOR
op_or
id|TVP3026_XTRUECOLORCTRL_ORGB_1555
)paren
suffix:colon
(paren
id|TVP3026_XTRUECOLORCTRL_DIRECTCOLOR
op_or
id|TVP3026_XTRUECOLORCTRL_RGB_565
)paren
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMUXCTRL
)braket
op_assign
id|muxctrl
op_or
id|TVP3026_XMUXCTRL_PIXEL_16BIT
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XCLKCTRL
)braket
op_assign
id|TVP3026_XCLKCTRL_SRC_PLL
op_or
id|TVP3026_XCLKCTRL_DIV2
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|24
suffix:colon
multiline_comment|/* XLATCHCTRL is: for (A) use _4_3 (?_8_3 is same? TBD), for (B) it is set in setpclk */
id|hw-&gt;DACreg
(braket
id|POS3026_XTRUECOLORCTRL
)braket
op_assign
id|TVP3026_XTRUECOLORCTRL_DIRECTCOLOR
op_or
id|TVP3026_XTRUECOLORCTRL_RGB_888
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XMUXCTRL
)braket
op_assign
id|muxctrl
op_or
id|TVP3026_XMUXCTRL_PIXEL_32BIT
suffix:semicolon
id|hw-&gt;DACreg
(braket
id|POS3026_XCLKCTRL
)braket
op_assign
id|TVP3026_XCLKCTRL_SRC_PLL
op_or
id|TVP3026_XCLKCTRL_DIV4
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|32
suffix:colon
multiline_comment|/* XLATCHCTRL should be _2_1 / _1_1... Why is not? (_2_1 is used everytime) */
id|hw-&gt;DACreg
(braket
id|POS3026_XMUXCTRL
)braket
op_assign
id|muxctrl
op_or
id|TVP3026_XMUXCTRL_PIXEL_32BIT
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
l_int|1
suffix:semicolon
multiline_comment|/* TODO: failed */
)brace
)brace
r_if
c_cond
(paren
id|matroxfb_vgaHWinit
c_func
(paren
id|PMINFO
id|hw
comma
id|m
comma
id|p
)paren
)paren
r_return
l_int|1
suffix:semicolon
multiline_comment|/* set SYNC */
id|hw-&gt;MiscOutReg
op_assign
l_int|0xCB
suffix:semicolon
r_if
c_cond
(paren
id|m-&gt;sync
op_amp
id|FB_SYNC_HOR_HIGH_ACT
)paren
id|hw-&gt;DACreg
(braket
id|POS3026_XGENCTRL
)braket
op_or_assign
id|TVP3026_XGENCTRL_HSYNC_NEG
suffix:semicolon
r_if
c_cond
(paren
id|m-&gt;sync
op_amp
id|FB_SYNC_VERT_HIGH_ACT
)paren
id|hw-&gt;DACreg
(braket
id|POS3026_XGENCTRL
)braket
op_or_assign
id|TVP3026_XGENCTRL_VSYNC_NEG
suffix:semicolon
r_if
c_cond
(paren
id|m-&gt;sync
op_amp
id|FB_SYNC_ON_GREEN
)paren
id|hw-&gt;DACreg
(braket
id|POS3026_XGENCTRL
)braket
op_or_assign
id|TVP3026_XGENCTRL_SYNC_ON_GREEN
suffix:semicolon
multiline_comment|/* set DELAY */
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|video.len
)paren
OL
l_int|0x400000
)paren
id|hw-&gt;CRTCEXT
(braket
l_int|3
)braket
op_or_assign
l_int|0x08
suffix:semicolon
r_else
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|video.len
)paren
OG
l_int|0x400000
)paren
id|hw-&gt;CRTCEXT
(braket
l_int|3
)braket
op_or_assign
l_int|0x10
suffix:semicolon
multiline_comment|/* set HWCURSOR */
r_if
c_cond
(paren
id|m-&gt;interlaced
)paren
(brace
id|hw-&gt;DACreg
(braket
id|POS3026_XCURCTRL
)braket
op_or_assign
id|TVP3026_XCURCTRL_INTERLACED
suffix:semicolon
)brace
r_if
c_cond
(paren
id|m-&gt;HTotal
op_ge
l_int|1536
)paren
id|hw-&gt;DACreg
(braket
id|POS3026_XCURCTRL
)braket
op_or_assign
id|TVP3026_XCURCTRL_BLANK4096
suffix:semicolon
multiline_comment|/* set interleaving */
id|hw-&gt;MXoptionReg
op_and_assign
op_complement
l_int|0x00001000
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p-&gt;type
op_ne
id|FB_TYPE_TEXT
)paren
op_logical_and
id|isInterleave
c_func
(paren
id|MINFO
)paren
)paren
id|hw-&gt;MXoptionReg
op_or_assign
l_int|0x00001000
suffix:semicolon
multiline_comment|/* set DAC */
id|Ti3026_setpclk
c_func
(paren
id|PMINFO
id|hw
comma
id|m-&gt;pixclock
comma
id|p
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|ti3026_setMCLK
r_static
r_void
(def_block
id|ti3026_setMCLK
c_func
(paren
id|CPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
comma
r_int
id|fout
)paren
(brace
r_int
r_int
id|f_pll
suffix:semicolon
r_int
r_int
id|pclk_m
comma
id|pclk_n
comma
id|pclk_p
suffix:semicolon
r_int
r_int
id|mclk_m
comma
id|mclk_n
comma
id|mclk_p
suffix:semicolon
r_int
r_int
id|rfhcnt
comma
id|mclk_ctl
suffix:semicolon
r_int
id|tmout
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;ti3026_setMCLK&quot;
)paren
id|f_pll
op_assign
id|Ti3026_calcclock
c_func
(paren
id|PMINFO
id|fout
comma
id|ACCESS_FBINFO
c_func
(paren
id|max_pixel_clock
)paren
comma
op_amp
id|mclk_n
comma
op_amp
id|mclk_m
comma
op_amp
id|mclk_p
)paren
suffix:semicolon
multiline_comment|/* save pclk */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFC
)paren
suffix:semicolon
id|pclk_n
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFD
)paren
suffix:semicolon
id|pclk_m
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFE
)paren
suffix:semicolon
id|pclk_p
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
suffix:semicolon
multiline_comment|/* stop pclk */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFE
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* set pclk to new mclk */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFC
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|mclk_n
op_or
l_int|0xC0
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|mclk_m
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|mclk_p
op_or
l_int|0xB0
)paren
suffix:semicolon
multiline_comment|/* wait for PLL to lock */
r_for
c_loop
(paren
id|tmout
op_assign
l_int|500000
suffix:semicolon
id|tmout
suffix:semicolon
id|tmout
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
op_amp
l_int|0x40
)paren
r_break
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|tmout
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;matroxfb: Temporary pixel PLL not locked after 5 secs&bslash;n&quot;
)paren
suffix:semicolon
multiline_comment|/* output pclk on mclk pin */
id|mclk_ctl
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
comma
id|mclk_ctl
op_amp
l_int|0xE7
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
comma
(paren
id|mclk_ctl
op_amp
l_int|0xE7
)paren
op_or
id|TVP3026_XMEMPLLCTRL_STROBEMKC4
)paren
suffix:semicolon
multiline_comment|/* stop MCLK */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFB
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLDATA
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* set mclk to new freq */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xF3
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLDATA
comma
id|mclk_n
op_or
l_int|0xC0
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLDATA
comma
id|mclk_m
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLDATA
comma
id|mclk_p
op_or
l_int|0xB0
)paren
suffix:semicolon
multiline_comment|/* wait for PLL to lock */
r_for
c_loop
(paren
id|tmout
op_assign
l_int|500000
suffix:semicolon
id|tmout
suffix:semicolon
id|tmout
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLDATA
)paren
op_amp
l_int|0x40
)paren
r_break
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|tmout
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;matroxfb: Memory PLL not locked after 5 secs&bslash;n&quot;
)paren
suffix:semicolon
id|f_pll
op_assign
id|f_pll
op_star
l_int|333
op_div
(paren
l_int|10000
op_lshift
id|mclk_p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|isMilleniumII
c_func
(paren
id|MINFO
)paren
)paren
(brace
id|rfhcnt
op_assign
(paren
id|f_pll
op_minus
l_int|128
)paren
op_div
l_int|256
suffix:semicolon
r_if
c_cond
(paren
id|rfhcnt
OG
l_int|15
)paren
id|rfhcnt
op_assign
l_int|15
suffix:semicolon
)brace
r_else
(brace
id|rfhcnt
op_assign
(paren
id|f_pll
op_minus
l_int|64
)paren
op_div
l_int|128
suffix:semicolon
r_if
c_cond
(paren
id|rfhcnt
OG
l_int|15
)paren
id|rfhcnt
op_assign
l_int|0
suffix:semicolon
)brace
id|hw-&gt;MXoptionReg
op_assign
(paren
id|hw-&gt;MXoptionReg
op_amp
op_complement
l_int|0x000F0000
)paren
op_or
(paren
id|rfhcnt
op_lshift
l_int|16
)paren
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|ACCESS_FBINFO
c_func
(paren
id|pcidev
)paren
comma
id|PCI_OPTION_REG
comma
id|hw-&gt;MXoptionReg
)paren
suffix:semicolon
multiline_comment|/* output MCLK to MCLK pin */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
comma
(paren
id|mclk_ctl
op_amp
l_int|0xE7
)paren
op_or
id|TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
comma
(paren
id|mclk_ctl
)paren
op_or
id|TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL
op_or
id|TVP3026_XMEMPLLCTRL_STROBEMKC4
)paren
suffix:semicolon
multiline_comment|/* stop PCLK */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFE
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
l_int|0x00
)paren
suffix:semicolon
multiline_comment|/* restore pclk */
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0xFC
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|pclk_n
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|pclk_m
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|pclk_p
)paren
suffix:semicolon
multiline_comment|/* wait for PLL to lock */
r_for
c_loop
(paren
id|tmout
op_assign
l_int|500000
suffix:semicolon
id|tmout
suffix:semicolon
id|tmout
op_decrement
)paren
(brace
r_if
c_cond
(paren
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
op_amp
l_int|0x40
)paren
r_break
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|tmout
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;matroxfb: Pixel PLL not locked after 5 secs&bslash;n&quot;
)paren
suffix:semicolon
)brace
)def_block
DECL|function|ti3026_ramdac_init
r_static
r_void
(def_block
id|ti3026_ramdac_init
c_func
(paren
id|WPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
)paren
(brace
id|DBG
c_func
(paren
l_string|&quot;ti3026_ramdac_init&quot;
)paren
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.vco_freq_min
)paren
op_assign
l_int|110000
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.ref_freq
)paren
op_assign
l_int|114545
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.feed_div_min
)paren
op_assign
l_int|2
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.feed_div_max
)paren
op_assign
l_int|24
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.in_div_min
)paren
op_assign
l_int|2
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.in_div_max
)paren
op_assign
l_int|63
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|features.pll.post_shift_max
)paren
op_assign
l_int|3
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.noinit
)paren
)paren
r_return
suffix:semicolon
id|ti3026_setMCLK
c_func
(paren
id|PMINFO
id|hw
comma
l_int|60000
)paren
suffix:semicolon
)brace
)def_block
DECL|function|Ti3026_restore
r_static
r_void
id|Ti3026_restore
c_func
(paren
id|WPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
comma
r_struct
id|matrox_hw_state
op_star
id|oldhw
comma
r_struct
id|display
op_star
id|p
)paren
(brace
r_int
id|i
suffix:semicolon
id|CRITFLAGS
id|DBG
c_func
(paren
l_string|&quot;Ti3026_restore&quot;
)paren
macro_line|#ifdef DEBUG
id|dprintk
c_func
(paren
id|KERN_INFO
l_string|&quot;EXTVGA regs: &quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
id|dprintk
c_func
(paren
l_string|&quot;%02X:&quot;
comma
id|hw-&gt;CRTCEXT
(braket
id|i
)braket
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
id|CRITBEGIN
id|pci_write_config_dword
c_func
(paren
id|ACCESS_FBINFO
c_func
(paren
id|pcidev
)paren
comma
id|PCI_OPTION_REG
comma
id|hw-&gt;MXoptionReg
)paren
suffix:semicolon
id|CRITEND
id|matroxfb_vgaHWrestore
c_func
(paren
id|PMINFO
id|hw
comma
id|oldhw
)paren
suffix:semicolon
id|CRITBEGIN
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
id|mga_setr
c_func
(paren
id|M_EXTVGA_INDEX
comma
id|i
comma
id|hw-&gt;CRTCEXT
(braket
id|i
)braket
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|21
suffix:semicolon
id|i
op_increment
)paren
(brace
id|outTi3026
c_func
(paren
id|PMINFO
id|DACseq
(braket
id|i
)braket
comma
id|hw-&gt;DACreg
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|oldhw
)paren
(brace
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x00
)paren
suffix:semicolon
id|oldhw-&gt;DACclk
(braket
l_int|0
)braket
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
suffix:semicolon
id|oldhw-&gt;DACclk
(braket
l_int|3
)braket
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x15
)paren
suffix:semicolon
id|oldhw-&gt;DACclk
(braket
l_int|1
)braket
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
suffix:semicolon
id|oldhw-&gt;DACclk
(braket
l_int|4
)braket
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x2A
)paren
suffix:semicolon
id|oldhw-&gt;DACclk
(braket
l_int|2
)braket
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
suffix:semicolon
id|oldhw-&gt;DACclk
(braket
l_int|5
)braket
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
)paren
suffix:semicolon
)brace
id|CRITEND
r_if
c_cond
(paren
op_logical_neg
id|oldhw
op_logical_or
id|memcmp
c_func
(paren
id|hw-&gt;DACclk
comma
id|oldhw-&gt;DACclk
comma
l_int|6
)paren
)paren
(brace
multiline_comment|/* agrhh... setting up PLL is very slow on Millennium... */
multiline_comment|/* Mystique PLL is locked in few ms, but Millennium PLL lock takes about 0.15 s... */
multiline_comment|/* Maybe even we should call schedule() ? */
id|CRITBEGIN
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCLKCTRL
comma
id|hw-&gt;DACreg
(braket
id|POS3026_XCLKCTRL
)braket
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x2A
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
comma
l_int|0
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
l_int|0
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
)paren
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
id|hw-&gt;DACclk
(braket
id|i
)braket
)paren
suffix:semicolon
multiline_comment|/* wait for PLL only if PLL clock requested (always for PowerMode, never for VGA) */
r_if
c_cond
(paren
id|hw-&gt;MiscOutReg
op_amp
l_int|0x08
)paren
(brace
r_int
id|tmout
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x3F
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tmout
op_assign
l_int|500000
suffix:semicolon
id|tmout
suffix:semicolon
op_decrement
id|tmout
)paren
(brace
r_if
c_cond
(paren
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
)paren
op_amp
l_int|0x40
)paren
r_break
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
id|CRITEND
r_if
c_cond
(paren
op_logical_neg
id|tmout
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;matroxfb: Pixel PLL not locked after 5 secs&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|dprintk
c_func
(paren
id|KERN_INFO
l_string|&quot;PixelPLL: %d&bslash;n&quot;
comma
l_int|500000
op_minus
id|tmout
)paren
suffix:semicolon
id|CRITBEGIN
)brace
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
comma
id|hw-&gt;DACreg
(braket
id|POS3026_XMEMPLLCTRL
)braket
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|3
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
comma
id|hw-&gt;DACclk
(braket
id|i
)braket
)paren
suffix:semicolon
id|CRITEND
r_if
c_cond
(paren
(paren
id|hw-&gt;MiscOutReg
op_amp
l_int|0x08
)paren
op_logical_and
(paren
(paren
id|hw-&gt;DACclk
(braket
l_int|5
)braket
op_amp
l_int|0x80
)paren
op_eq
l_int|0x80
)paren
)paren
(brace
r_int
id|tmout
suffix:semicolon
id|CRITBEGIN
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x3F
)paren
suffix:semicolon
r_for
c_loop
(paren
id|tmout
op_assign
l_int|500000
suffix:semicolon
id|tmout
suffix:semicolon
op_decrement
id|tmout
)paren
(brace
r_if
c_cond
(paren
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
)paren
op_amp
l_int|0x40
)paren
r_break
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
)brace
id|CRITEND
r_if
c_cond
(paren
op_logical_neg
id|tmout
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;matroxfb: Loop PLL not locked after 5 secs&bslash;n&quot;
)paren
suffix:semicolon
r_else
id|dprintk
c_func
(paren
id|KERN_INFO
l_string|&quot;LoopPLL: %d&bslash;n&quot;
comma
l_int|500000
op_minus
id|tmout
)paren
suffix:semicolon
)brace
)brace
id|matrox_init_putc
c_func
(paren
id|PMINFO
id|p
comma
id|matroxfb_ti3026_createcursor
)paren
suffix:semicolon
macro_line|#ifdef DEBUG
id|dprintk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;3026DACregs &quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|21
suffix:semicolon
id|i
op_increment
)paren
(brace
id|dprintk
c_func
(paren
l_string|&quot;R%02X=%02X &quot;
comma
id|DACseq
(braket
id|i
)braket
comma
id|hw-&gt;DACreg
(braket
id|i
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|i
op_amp
l_int|0x7
)paren
op_eq
l_int|0x7
)paren
id|dprintk
c_func
(paren
l_string|&quot;&bslash;n&quot;
id|KERN_DEBUG
l_string|&quot;continuing... &quot;
)paren
suffix:semicolon
)brace
id|dprintk
c_func
(paren
l_string|&quot;&bslash;n&quot;
id|KERN_DEBUG
l_string|&quot;DACclk &quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
id|dprintk
c_func
(paren
l_string|&quot;C%02X=%02X &quot;
comma
id|i
comma
id|hw-&gt;DACclk
(braket
id|i
)braket
)paren
suffix:semicolon
id|dprintk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
)brace
DECL|function|Ti3026_reset
r_static
r_void
(def_block
id|Ti3026_reset
c_func
(paren
id|WPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
)paren
(brace
id|DBG
c_func
(paren
l_string|&quot;Ti3026_reset&quot;
)paren
id|matroxfb_fastfont_init
c_func
(paren
id|MINFO
)paren
suffix:semicolon
id|ti3026_ramdac_init
c_func
(paren
id|PMINFO
id|hw
)paren
suffix:semicolon
)brace
)def_block
DECL|function|Ti3026_preinit
r_static
r_int
(def_block
id|Ti3026_preinit
c_func
(paren
id|WPMINFO
r_struct
id|matrox_hw_state
op_star
id|hw
)paren
(brace
r_static
r_const
r_int
id|vxres_mill2
(braket
)braket
op_assign
(brace
l_int|512
comma
l_int|640
comma
l_int|768
comma
l_int|800
comma
l_int|832
comma
l_int|960
comma
l_int|1024
comma
l_int|1152
comma
l_int|1280
comma
l_int|1600
comma
l_int|1664
comma
l_int|1920
comma
l_int|2048
comma
l_int|0
)brace
suffix:semicolon
r_static
r_const
r_int
id|vxres_mill1
(braket
)braket
op_assign
(brace
l_int|640
comma
l_int|768
comma
l_int|800
comma
l_int|960
comma
l_int|1024
comma
l_int|1152
comma
l_int|1280
comma
l_int|1600
comma
l_int|1920
comma
l_int|2048
comma
l_int|0
)brace
suffix:semicolon
id|DBG
c_func
(paren
l_string|&quot;Ti3026_preinit&quot;
)paren
id|ACCESS_FBINFO
c_func
(paren
id|millenium
)paren
op_assign
l_int|1
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|milleniumII
)paren
op_assign
(paren
id|ACCESS_FBINFO
c_func
(paren
id|pcidev
)paren
op_member_access_from_pointer
id|device
op_ne
id|PCI_DEVICE_ID_MATROX_MIL
)paren
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|capable.cfb4
)paren
op_assign
l_int|1
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|capable.text
)paren
op_assign
l_int|1
suffix:semicolon
multiline_comment|/* isMilleniumII(MINFO); */
id|ACCESS_FBINFO
c_func
(paren
id|capable.vxres
)paren
op_assign
id|isMilleniumII
c_func
(paren
id|MINFO
)paren
ques
c_cond
id|vxres_mill2
suffix:colon
id|vxres_mill1
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|cursor.timer.function
)paren
op_assign
id|matroxfb_ti3026_flashcursor
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.noinit
)paren
)paren
r_return
l_int|0
suffix:semicolon
multiline_comment|/* preserve VGA I/O, BIOS and PPC */
id|hw-&gt;MXoptionReg
op_and_assign
l_int|0xC0000100
suffix:semicolon
id|hw-&gt;MXoptionReg
op_or_assign
l_int|0x002C0000
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.novga
)paren
)paren
id|hw-&gt;MXoptionReg
op_and_assign
op_complement
l_int|0x00000100
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.nobios
)paren
)paren
id|hw-&gt;MXoptionReg
op_and_assign
op_complement
l_int|0x40000000
suffix:semicolon
r_if
c_cond
(paren
id|ACCESS_FBINFO
c_func
(paren
id|devflags.nopciretry
)paren
)paren
id|hw-&gt;MXoptionReg
op_or_assign
l_int|0x20000000
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|ACCESS_FBINFO
c_func
(paren
id|pcidev
)paren
comma
id|PCI_OPTION_REG
comma
id|hw-&gt;MXoptionReg
)paren
suffix:semicolon
id|ACCESS_FBINFO
c_func
(paren
id|accel.ramdac_rev
)paren
op_assign
id|inTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XSILICONREV
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XCLKCTRL
comma
id|TVP3026_XCLKCTRL_SRC_CLK0VGA
op_or
id|TVP3026_XCLKCTRL_CLKSTOPPED
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XTRUECOLORCTRL
comma
id|TVP3026_XTRUECOLORCTRL_PSEUDOCOLOR
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMUXCTRL
comma
id|TVP3026_XMUXCTRL_VGA
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPLLADDR
comma
l_int|0x2A
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XLOOPPLLDATA
comma
l_int|0x00
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XPIXPLLDATA
comma
l_int|0x00
)paren
suffix:semicolon
id|mga_outb
c_func
(paren
id|M_MISC_REG
comma
l_int|0x67
)paren
suffix:semicolon
id|outTi3026
c_func
(paren
id|PMINFO
id|TVP3026_XMEMPLLCTRL
comma
id|TVP3026_XMEMPLLCTRL_STROBEMKC4
op_or
id|TVP3026_XMEMPLLCTRL_MCLK_MCLKPLL
)paren
suffix:semicolon
id|mga_outl
c_func
(paren
id|M_RESET
comma
l_int|1
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|250
)paren
suffix:semicolon
id|mga_outl
c_func
(paren
id|M_RESET
comma
l_int|0
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|250
)paren
suffix:semicolon
id|mga_outl
c_func
(paren
id|M_MACCESS
comma
l_int|0x00008000
)paren
suffix:semicolon
id|udelay
c_func
(paren
l_int|10
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)def_block
DECL|variable|matrox_millennium
r_struct
id|matrox_switch
id|matrox_millennium
op_assign
(brace
id|Ti3026_preinit
comma
id|Ti3026_reset
comma
id|Ti3026_init
comma
id|Ti3026_restore
comma
id|matroxfb_ti3026_selhwcursor
)brace
suffix:semicolon
DECL|variable|matrox_millennium
id|EXPORT_SYMBOL
c_func
(paren
id|matrox_millennium
)paren
suffix:semicolon
macro_line|#endif
eof
