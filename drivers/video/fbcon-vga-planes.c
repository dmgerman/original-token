multiline_comment|/*&n; *  linux/drivers/video/fbcon-vga-planes.c -- Low level frame buffer operations&n; *&t;&t;&t;&t;  for VGA 4-plane modes&n; *&n; * Copyright 1999 Ben Pfaff &lt;pfaffben@debian.org&gt; and Petr Vandrovec &lt;VANDROVE@vc.cvut.cz&gt;&n; * Based on code by Michael Schmitz&n; * Based on the old macfb.c 4bpp code by Alan Cox&n; *&n; * This file is subject to the terms and conditions of the GNU General&n; * Public License.  See the file COPYING in the main directory of this&n; * archive for more details.  */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/fb.h&gt;
macro_line|#include &lt;linux/vt_buffer.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;video/fbcon.h&gt;
macro_line|#include &lt;video/fbcon-vga-planes.h&gt;
DECL|macro|GRAPHICS_ADDR_REG
mdefine_line|#define GRAPHICS_ADDR_REG 0x3ce&t;&t;/* Graphics address register. */
DECL|macro|GRAPHICS_DATA_REG
mdefine_line|#define GRAPHICS_DATA_REG 0x3cf&t;&t;/* Graphics data register. */
DECL|macro|SET_RESET_INDEX
mdefine_line|#define SET_RESET_INDEX 0&t;&t;/* Set/Reset Register index. */
DECL|macro|ENABLE_SET_RESET_INDEX
mdefine_line|#define ENABLE_SET_RESET_INDEX 1&t;/* Enable Set/Reset Register index. */
DECL|macro|DATA_ROTATE_INDEX
mdefine_line|#define DATA_ROTATE_INDEX 3&t;&t;/* Data Rotate Register index. */
DECL|macro|GRAPHICS_MODE_INDEX
mdefine_line|#define GRAPHICS_MODE_INDEX 5&t;&t;/* Graphics Mode Register index. */
DECL|macro|BIT_MASK_INDEX
mdefine_line|#define BIT_MASK_INDEX 8&t;&t;/* Bit Mask Register index. */
multiline_comment|/* The VGA&squot;s weird architecture often requires that we read a byte and&n;   write a byte to the same location.  It doesn&squot;t matter *what* byte&n;   we write, however.  This is because all the action goes on behind&n;   the scenes in the VGA&squot;s 32-bit latch register, and reading and writing&n;   video memory just invokes latch behavior.&n;&n;   To avoid race conditions (is this necessary?), reading and writing&n;   the memory byte should be done with a single instruction.  One&n;   suitable instruction is the x86 bitwise OR.  The following&n;   read-modify-write routine should optimize to one such bitwise&n;   OR. */
DECL|function|rmw
r_static
r_inline
r_void
id|rmw
c_func
(paren
r_volatile
r_char
op_star
id|p
)paren
(brace
id|readb
c_func
(paren
id|p
)paren
suffix:semicolon
id|writeb
c_func
(paren
l_int|1
comma
id|p
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the Graphics Mode Register.  Bits 0-1 are write mode, bit 3 is&n;   read mode. */
DECL|function|setmode
r_static
r_inline
r_void
id|setmode
c_func
(paren
r_int
id|mode
)paren
(brace
id|outb
c_func
(paren
id|GRAPHICS_MODE_INDEX
comma
id|GRAPHICS_ADDR_REG
)paren
suffix:semicolon
id|outb
c_func
(paren
id|mode
comma
id|GRAPHICS_DATA_REG
)paren
suffix:semicolon
)brace
multiline_comment|/* Select the Bit Mask Register. */
DECL|function|selectmask
r_static
r_inline
r_void
id|selectmask
c_func
(paren
r_void
)paren
(brace
id|outb
c_func
(paren
id|BIT_MASK_INDEX
comma
id|GRAPHICS_ADDR_REG
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the value of the Bit Mask Register.  It must already have been&n;   selected with selectmask(). */
DECL|function|setmask
r_static
r_inline
r_void
id|setmask
c_func
(paren
r_int
id|mask
)paren
(brace
id|outb
c_func
(paren
id|mask
comma
id|GRAPHICS_DATA_REG
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the Data Rotate Register.  Bits 0-2 are rotate count, bits 3-4&n;   are logical operation (0=NOP, 1=AND, 2=OR, 3=XOR). */
DECL|function|setop
r_static
r_inline
r_void
id|setop
c_func
(paren
r_int
id|op
)paren
(brace
id|outb
c_func
(paren
id|DATA_ROTATE_INDEX
comma
id|GRAPHICS_ADDR_REG
)paren
suffix:semicolon
id|outb
c_func
(paren
id|op
comma
id|GRAPHICS_DATA_REG
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the Enable Set/Reset Register.  The code here always uses value&n;   0xf for this register.  */
DECL|function|setsr
r_static
r_inline
r_void
id|setsr
c_func
(paren
r_int
id|sr
)paren
(brace
id|outb
c_func
(paren
id|ENABLE_SET_RESET_INDEX
comma
id|GRAPHICS_ADDR_REG
)paren
suffix:semicolon
id|outb
c_func
(paren
id|sr
comma
id|GRAPHICS_DATA_REG
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the Set/Reset Register. */
DECL|function|setcolor
r_static
r_inline
r_void
id|setcolor
c_func
(paren
r_int
id|color
)paren
(brace
id|outb
c_func
(paren
id|SET_RESET_INDEX
comma
id|GRAPHICS_ADDR_REG
)paren
suffix:semicolon
id|outb
c_func
(paren
id|color
comma
id|GRAPHICS_DATA_REG
)paren
suffix:semicolon
)brace
multiline_comment|/* Set the value in the Graphics Address Register. */
DECL|function|setindex
r_static
r_inline
r_void
id|setindex
c_func
(paren
r_int
id|index
)paren
(brace
id|outb
c_func
(paren
id|index
comma
id|GRAPHICS_ADDR_REG
)paren
suffix:semicolon
)brace
DECL|function|fbcon_vga_planes_setup
r_void
id|fbcon_vga_planes_setup
c_func
(paren
r_struct
id|display
op_star
id|p
)paren
(brace
)brace
DECL|function|fbcon_vga_planes_bmove
r_void
id|fbcon_vga_planes_bmove
c_func
(paren
r_struct
id|display
op_star
id|p
comma
r_int
id|sy
comma
r_int
id|sx
comma
r_int
id|dy
comma
r_int
id|dx
comma
r_int
id|height
comma
r_int
id|width
)paren
(brace
r_char
op_star
id|src
suffix:semicolon
r_char
op_star
id|dest
suffix:semicolon
r_int
id|line_ofs
suffix:semicolon
r_int
id|x
suffix:semicolon
id|setmode
c_func
(paren
l_int|1
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setsr
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|sy
op_mul_assign
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|dy
op_mul_assign
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|height
op_mul_assign
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|dy
OL
id|sy
op_logical_or
(paren
id|dy
op_eq
id|sy
op_logical_and
id|dx
OL
id|sx
)paren
)paren
(brace
id|line_ofs
op_assign
id|p-&gt;line_length
op_minus
id|width
suffix:semicolon
id|dest
op_assign
id|p-&gt;screen_base
op_plus
id|dx
op_plus
id|dy
op_star
id|p-&gt;line_length
suffix:semicolon
id|src
op_assign
id|p-&gt;screen_base
op_plus
id|sx
op_plus
id|sy
op_star
id|p-&gt;line_length
suffix:semicolon
r_while
c_loop
(paren
id|height
op_decrement
)paren
(brace
r_for
c_loop
(paren
id|x
op_assign
l_int|0
suffix:semicolon
id|x
OL
id|width
suffix:semicolon
id|x
op_increment
)paren
(brace
id|readb
c_func
(paren
id|src
)paren
suffix:semicolon
id|writeb
c_func
(paren
l_int|0
comma
id|dest
)paren
suffix:semicolon
id|dest
op_increment
suffix:semicolon
id|src
op_increment
suffix:semicolon
)brace
id|src
op_add_assign
id|line_ofs
suffix:semicolon
id|dest
op_add_assign
id|line_ofs
suffix:semicolon
)brace
)brace
r_else
(brace
id|line_ofs
op_assign
id|p-&gt;line_length
op_minus
id|width
suffix:semicolon
id|dest
op_assign
id|p-&gt;screen_base
op_plus
id|dx
op_plus
id|width
op_plus
(paren
id|dy
op_plus
id|height
op_minus
l_int|1
)paren
op_star
id|p-&gt;line_length
suffix:semicolon
id|src
op_assign
id|p-&gt;screen_base
op_plus
id|sx
op_plus
id|width
op_plus
(paren
id|sy
op_plus
id|height
op_minus
l_int|1
)paren
op_star
id|p-&gt;line_length
suffix:semicolon
r_while
c_loop
(paren
id|height
op_decrement
)paren
(brace
r_for
c_loop
(paren
id|x
op_assign
l_int|0
suffix:semicolon
id|x
OL
id|width
suffix:semicolon
id|x
op_increment
)paren
(brace
id|dest
op_decrement
suffix:semicolon
id|src
op_decrement
suffix:semicolon
id|readb
c_func
(paren
id|src
)paren
suffix:semicolon
id|writeb
c_func
(paren
l_int|0
comma
id|dest
)paren
suffix:semicolon
)brace
id|src
op_sub_assign
id|line_ofs
suffix:semicolon
id|dest
op_sub_assign
id|line_ofs
suffix:semicolon
)brace
)brace
)brace
DECL|function|fbcon_vga_planes_clear
r_void
id|fbcon_vga_planes_clear
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|display
op_star
id|p
comma
r_int
id|sy
comma
r_int
id|sx
comma
r_int
id|height
comma
r_int
id|width
)paren
(brace
r_int
id|line_ofs
op_assign
id|p-&gt;line_length
op_minus
id|width
suffix:semicolon
r_char
op_star
id|where
suffix:semicolon
r_int
id|x
suffix:semicolon
id|setmode
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setsr
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|setcolor
c_func
(paren
id|attr_bgcol_ec
c_func
(paren
id|p
comma
id|conp
)paren
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
id|setmask
c_func
(paren
l_int|0xff
)paren
suffix:semicolon
id|sy
op_mul_assign
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|height
op_mul_assign
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|where
op_assign
id|p-&gt;screen_base
op_plus
id|sx
op_plus
id|sy
op_star
id|p-&gt;line_length
suffix:semicolon
r_while
c_loop
(paren
id|height
op_decrement
)paren
(brace
r_for
c_loop
(paren
id|x
op_assign
l_int|0
suffix:semicolon
id|x
OL
id|width
suffix:semicolon
id|x
op_increment
)paren
(brace
id|writeb
c_func
(paren
l_int|0
comma
id|where
)paren
suffix:semicolon
id|where
op_increment
suffix:semicolon
)brace
id|where
op_add_assign
id|line_ofs
suffix:semicolon
)brace
)brace
DECL|function|fbcon_ega_planes_putc
r_void
id|fbcon_ega_planes_putc
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|display
op_star
id|p
comma
r_int
id|c
comma
r_int
id|yy
comma
r_int
id|xx
)paren
(brace
r_int
id|fg
op_assign
id|attr_fgcol
c_func
(paren
id|p
comma
id|c
)paren
suffix:semicolon
r_int
id|bg
op_assign
id|attr_bgcol
c_func
(paren
id|p
comma
id|c
)paren
suffix:semicolon
r_int
id|y
suffix:semicolon
id|u8
op_star
id|cdat
op_assign
id|p-&gt;fontdata
op_plus
(paren
id|c
op_amp
id|p-&gt;charmask
)paren
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
r_char
op_star
id|where
op_assign
id|p-&gt;screen_base
op_plus
id|xx
op_plus
id|yy
op_star
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|setmode
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setsr
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|setcolor
c_func
(paren
id|bg
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
id|setmask
c_func
(paren
l_int|0xff
)paren
suffix:semicolon
r_for
c_loop
(paren
id|y
op_assign
l_int|0
suffix:semicolon
id|y
OL
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_increment
comma
id|where
op_add_assign
id|p-&gt;line_length
)paren
id|rmw
c_func
(paren
id|where
)paren
suffix:semicolon
id|where
op_sub_assign
id|p-&gt;line_length
op_star
id|y
suffix:semicolon
id|setcolor
c_func
(paren
id|fg
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|y
op_assign
l_int|0
suffix:semicolon
id|y
OL
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_increment
comma
id|where
op_add_assign
id|p-&gt;line_length
)paren
r_if
c_cond
(paren
id|cdat
(braket
id|y
)braket
)paren
(brace
id|setmask
c_func
(paren
id|cdat
(braket
id|y
)braket
)paren
suffix:semicolon
id|rmw
c_func
(paren
id|where
)paren
suffix:semicolon
)brace
)brace
DECL|function|fbcon_vga_planes_putc
r_void
id|fbcon_vga_planes_putc
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|display
op_star
id|p
comma
r_int
id|c
comma
r_int
id|yy
comma
r_int
id|xx
)paren
(brace
r_int
id|fg
op_assign
id|attr_fgcol
c_func
(paren
id|p
comma
id|c
)paren
suffix:semicolon
r_int
id|bg
op_assign
id|attr_bgcol
c_func
(paren
id|p
comma
id|c
)paren
suffix:semicolon
r_int
id|y
suffix:semicolon
id|u8
op_star
id|cdat
op_assign
id|p-&gt;fontdata
op_plus
(paren
id|c
op_amp
id|p-&gt;charmask
)paren
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
r_char
op_star
id|where
op_assign
id|p-&gt;screen_base
op_plus
id|xx
op_plus
id|yy
op_star
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|setmode
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setsr
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|setcolor
c_func
(paren
id|fg
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
id|setmask
c_func
(paren
l_int|0xff
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|bg
comma
id|where
)paren
suffix:semicolon
id|rmb
c_func
(paren
)paren
suffix:semicolon
id|readb
c_func
(paren
id|where
)paren
suffix:semicolon
multiline_comment|/* fill latches */
id|setmode
c_func
(paren
l_int|3
)paren
suffix:semicolon
id|wmb
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|y
op_assign
l_int|0
suffix:semicolon
id|y
OL
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_increment
comma
id|where
op_add_assign
id|p-&gt;line_length
)paren
id|writeb
c_func
(paren
id|cdat
(braket
id|y
)braket
comma
id|where
)paren
suffix:semicolon
id|wmb
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/* 28.50 in my test */
DECL|function|fbcon_ega_planes_putcs
r_void
id|fbcon_ega_planes_putcs
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|display
op_star
id|p
comma
r_const
r_int
r_int
op_star
id|s
comma
r_int
id|count
comma
r_int
id|yy
comma
r_int
id|xx
)paren
(brace
r_int
id|fg
op_assign
id|attr_fgcol
c_func
(paren
id|p
comma
id|scr_readw
c_func
(paren
id|s
)paren
)paren
suffix:semicolon
r_int
id|bg
op_assign
id|attr_bgcol
c_func
(paren
id|p
comma
id|scr_readw
c_func
(paren
id|s
)paren
)paren
suffix:semicolon
r_char
op_star
id|where
suffix:semicolon
r_int
id|n
suffix:semicolon
id|setmode
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
id|setmask
c_func
(paren
l_int|0xff
)paren
suffix:semicolon
id|where
op_assign
id|p-&gt;screen_base
op_plus
id|xx
op_plus
id|yy
op_star
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|bg
comma
id|where
)paren
suffix:semicolon
id|rmb
c_func
(paren
)paren
suffix:semicolon
id|readb
c_func
(paren
id|where
)paren
suffix:semicolon
multiline_comment|/* fill latches */
id|wmb
c_func
(paren
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
id|count
suffix:semicolon
id|n
op_increment
)paren
(brace
r_int
id|c
op_assign
id|scr_readw
c_func
(paren
id|s
op_increment
)paren
op_amp
id|p-&gt;charmask
suffix:semicolon
id|u8
op_star
id|cdat
op_assign
id|p-&gt;fontdata
op_plus
id|c
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|u8
op_star
id|end
op_assign
id|cdat
op_plus
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
r_while
c_loop
(paren
id|cdat
OL
id|end
)paren
(brace
id|outb
c_func
(paren
op_star
id|cdat
op_increment
comma
id|GRAPHICS_DATA_REG
)paren
suffix:semicolon
id|wmb
c_func
(paren
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|fg
comma
id|where
)paren
suffix:semicolon
id|where
op_add_assign
id|p-&gt;line_length
suffix:semicolon
)brace
id|where
op_add_assign
l_int|1
op_minus
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
id|wmb
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/* 6.96 in my test */
DECL|function|fbcon_vga_planes_putcs
r_void
id|fbcon_vga_planes_putcs
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|display
op_star
id|p
comma
r_const
r_int
r_int
op_star
id|s
comma
r_int
id|count
comma
r_int
id|yy
comma
r_int
id|xx
)paren
(brace
r_int
id|fg
op_assign
id|attr_fgcol
c_func
(paren
id|p
comma
op_star
id|s
)paren
suffix:semicolon
r_int
id|bg
op_assign
id|attr_bgcol
c_func
(paren
id|p
comma
op_star
id|s
)paren
suffix:semicolon
r_char
op_star
id|where
suffix:semicolon
r_int
id|n
suffix:semicolon
id|setmode
c_func
(paren
l_int|2
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setsr
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|setcolor
c_func
(paren
id|fg
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
id|setmask
c_func
(paren
l_int|0xff
)paren
suffix:semicolon
id|where
op_assign
id|p-&gt;screen_base
op_plus
id|xx
op_plus
id|yy
op_star
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|writeb
c_func
(paren
id|bg
comma
id|where
)paren
suffix:semicolon
id|rmb
c_func
(paren
)paren
suffix:semicolon
id|readb
c_func
(paren
id|where
)paren
suffix:semicolon
multiline_comment|/* fill latches */
id|setmode
c_func
(paren
l_int|3
)paren
suffix:semicolon
id|wmb
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
id|count
suffix:semicolon
id|n
op_increment
)paren
(brace
r_int
id|y
suffix:semicolon
r_int
id|c
op_assign
op_star
id|s
op_increment
op_amp
id|p-&gt;charmask
suffix:semicolon
id|u8
op_star
id|cdat
op_assign
id|p-&gt;fontdata
op_plus
(paren
id|c
op_amp
id|p-&gt;charmask
)paren
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
r_for
c_loop
(paren
id|y
op_assign
l_int|0
suffix:semicolon
id|y
OL
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_increment
comma
id|cdat
op_increment
)paren
(brace
id|writeb
(paren
op_star
id|cdat
comma
id|where
)paren
suffix:semicolon
id|where
op_add_assign
id|p-&gt;line_length
suffix:semicolon
)brace
id|where
op_add_assign
l_int|1
op_minus
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
id|wmb
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|fbcon_vga_planes_revc
r_void
id|fbcon_vga_planes_revc
c_func
(paren
r_struct
id|display
op_star
id|p
comma
r_int
id|xx
comma
r_int
id|yy
)paren
(brace
r_char
op_star
id|where
op_assign
id|p-&gt;screen_base
op_plus
id|xx
op_plus
id|yy
op_star
id|p-&gt;line_length
op_star
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
r_int
id|y
suffix:semicolon
id|setmode
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|setop
c_func
(paren
l_int|0x18
)paren
suffix:semicolon
id|setsr
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|setcolor
c_func
(paren
l_int|0xf
)paren
suffix:semicolon
id|selectmask
c_func
(paren
)paren
suffix:semicolon
id|setmask
c_func
(paren
l_int|0xff
)paren
suffix:semicolon
r_for
c_loop
(paren
id|y
op_assign
l_int|0
suffix:semicolon
id|y
OL
id|fontheight
c_func
(paren
id|p
)paren
suffix:semicolon
id|y
op_increment
)paren
(brace
id|rmw
c_func
(paren
id|where
)paren
suffix:semicolon
id|where
op_add_assign
id|p-&gt;line_length
suffix:semicolon
)brace
)brace
DECL|variable|fbcon_vga_planes
r_struct
id|display_switch
id|fbcon_vga_planes
op_assign
(brace
id|setup
suffix:colon
id|fbcon_vga_planes_setup
comma
id|bmove
suffix:colon
id|fbcon_vga_planes_bmove
comma
id|clear
suffix:colon
id|fbcon_vga_planes_clear
comma
id|putc
suffix:colon
id|fbcon_vga_planes_putc
comma
id|putcs
suffix:colon
id|fbcon_vga_planes_putcs
comma
id|revc
suffix:colon
id|fbcon_vga_planes_revc
comma
id|fontwidthmask
suffix:colon
id|FONTWIDTH
c_func
(paren
l_int|8
)paren
)brace
suffix:semicolon
DECL|variable|fbcon_ega_planes
r_struct
id|display_switch
id|fbcon_ega_planes
op_assign
(brace
id|setup
suffix:colon
id|fbcon_vga_planes_setup
comma
id|bmove
suffix:colon
id|fbcon_vga_planes_bmove
comma
id|clear
suffix:colon
id|fbcon_vga_planes_clear
comma
id|putc
suffix:colon
id|fbcon_ega_planes_putc
comma
id|putcs
suffix:colon
id|fbcon_ega_planes_putcs
comma
id|revc
suffix:colon
id|fbcon_vga_planes_revc
comma
id|fontwidthmask
suffix:colon
id|FONTWIDTH
c_func
(paren
l_int|8
)paren
)brace
suffix:semicolon
macro_line|#ifdef MODULE
DECL|function|init_module
r_int
id|init_module
c_func
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|cleanup_module
r_void
id|cleanup_module
c_func
(paren
r_void
)paren
(brace
)brace
macro_line|#endif /* MODULE */
multiline_comment|/*&n;     *  Visible symbols for modules&n;     */
DECL|variable|fbcon_vga_planes
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes
)paren
suffix:semicolon
DECL|variable|fbcon_vga_planes_setup
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes_setup
)paren
suffix:semicolon
DECL|variable|fbcon_vga_planes_bmove
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes_bmove
)paren
suffix:semicolon
DECL|variable|fbcon_vga_planes_clear
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes_clear
)paren
suffix:semicolon
DECL|variable|fbcon_vga_planes_putc
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes_putc
)paren
suffix:semicolon
DECL|variable|fbcon_vga_planes_putcs
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes_putcs
)paren
suffix:semicolon
DECL|variable|fbcon_vga_planes_revc
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_vga_planes_revc
)paren
suffix:semicolon
DECL|variable|fbcon_ega_planes
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_ega_planes
)paren
suffix:semicolon
DECL|variable|fbcon_ega_planes_putc
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_ega_planes_putc
)paren
suffix:semicolon
DECL|variable|fbcon_ega_planes_putcs
id|EXPORT_SYMBOL
c_func
(paren
id|fbcon_ega_planes_putcs
)paren
suffix:semicolon
multiline_comment|/*&n; * Overrides for Emacs so that we follow Linus&squot;s tabbing style.&n; * ---------------------------------------------------------------------------&n; * Local variables:&n; * c-basic-offset: 8&n; * End:&n; */
eof
