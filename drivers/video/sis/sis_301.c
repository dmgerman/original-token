multiline_comment|/* Recently Update by v1.09.50 */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &quot;sis_301.h&quot;
macro_line|#ifndef CONFIG_FB_SIS_LINUXBIOS
DECL|function|SetCRT2Group
id|BOOLEAN
id|SetCRT2Group
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|SetFlag
op_assign
id|SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
id|SearchModeID
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp
op_assign
id|GetRatePtrCRT2
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|temp
op_amp
l_int|0x02
)paren
op_eq
l_int|0
)paren
op_logical_and
(paren
(paren
id|VBInfo
op_amp
id|CRT2DisplayFlag
)paren
op_eq
l_int|0
)paren
)paren
(brace
r_return
id|FALSE
suffix:semicolon
)brace
id|SaveCRT2Info
c_func
(paren
id|ModeNo
)paren
suffix:semicolon
id|DisableBridge
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|UnLockCRT2
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetDefCRT2ExtRegs
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetCRT2ModeRegs
c_func
(paren
id|BaseAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|LockCRT2
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
id|GetCRT2Data
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
singleline_comment|//LVDS
id|GetLVDSDesData
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
id|SetGroup1
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SetGroup2
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
)paren
suffix:semicolon
id|SetGroup3
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetGroup4
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|SetGroup5
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
)paren
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//LVDS
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
id|ModCRT1CRTC
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
id|SetCRT2ECLK
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
id|EnableCRT2
c_func
(paren
)paren
suffix:semicolon
id|EnableBridge
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetLockRegs
c_func
(paren
)paren
suffix:semicolon
id|LockCRT2
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|overwriteregs
id|VOID
id|overwriteregs
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|BaseAddr
)paren
(brace
r_int
id|i
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
singleline_comment|//reg data is for 1024x768 16bit 85hz
r_int
id|p1reg
(braket
l_int|0x29
)braket
op_assign
initialization_block
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|29
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
(paren
id|USHORT
)paren
id|i
comma
(paren
id|USHORT
)paren
id|p1reg
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
)brace
DECL|function|SetDefCRT2ExtRegs
id|VOID
id|SetDefCRT2ExtRegs
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|Part1Port
comma
id|Part2Port
comma
id|Part4Port
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_10
suffix:semicolon
id|Part4Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x02
comma
l_int|0x40
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x10
comma
l_int|0x80
)paren
suffix:semicolon
id|temp
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0xC3
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x35
comma
id|temp
)paren
suffix:semicolon
)brace
DECL|function|GetRatePtrCRT2
id|USHORT
id|GetRatePtrCRT2
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
singleline_comment|//return bit0=&gt;0:standard mode 1:extended mode
id|SHORT
id|index
suffix:semicolon
singleline_comment|//&t;&t; bit1=&gt;0:crt2 no support this mode
id|USHORT
id|temp
suffix:semicolon
singleline_comment|//&t;&t;&t;   1:crt2 support this mode 
id|USHORT
id|ulRefIndexLength
suffix:semicolon
id|USHORT
id|temp1
suffix:semicolon
id|SHORT
id|LCDRefreshIndex
(braket
l_int|4
)braket
op_assign
initialization_block
suffix:semicolon
singleline_comment|// LCDPanel:no lcd,800x600,1024x768,1280x1024
r_if
c_cond
(paren
id|ModeNo
OL
l_int|0x14
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
singleline_comment|// Mode No &lt;= 13h then return
id|index
op_assign
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x33
)paren
suffix:semicolon
singleline_comment|// Get 3d4 CRTC33
id|index
op_assign
id|index
op_rshift
id|SelectCRT2Rate
suffix:semicolon
singleline_comment|//For CRT2,cl=SelectCRT2Rate=4, shr ah,cl&t;&t; 
id|index
op_assign
id|index
op_amp
l_int|0x0F
suffix:semicolon
singleline_comment|// Frame rate index
r_if
c_cond
(paren
id|index
op_ne
l_int|0
)paren
(brace
id|index
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetSimuScanMode
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|SetFlag
op_amp
id|ProgrammingCRT2
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|temp
op_assign
id|LCDResInfo
suffix:semicolon
id|temp1
op_assign
id|LCDRefreshIndex
(braket
id|temp
)braket
suffix:semicolon
r_if
c_cond
(paren
id|index
OG
id|temp1
)paren
(brace
id|index
op_assign
id|temp1
suffix:semicolon
)brace
)brace
r_else
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
id|REFIndex
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+Ext_point
id|ulRefIndexLength
op_assign
id|Ext2StructSize
suffix:semicolon
r_do
(brace
id|temp
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
singleline_comment|// di =&gt; REFIndex
r_if
c_cond
(paren
id|temp
op_eq
l_int|0xFFFF
)paren
(brace
r_break
suffix:semicolon
)brace
id|temp
op_assign
id|temp
op_amp
id|ModeInfoFlag
suffix:semicolon
r_if
c_cond
(paren
id|temp
OL
id|ModeType
)paren
(brace
r_break
suffix:semicolon
)brace
id|REFIndex
op_assign
id|REFIndex
op_plus
id|ulRefIndexLength
suffix:semicolon
singleline_comment|// rate size
id|index
op_decrement
suffix:semicolon
r_if
c_cond
(paren
id|index
OL
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|temp1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0
op_minus
id|Ext2StructSize
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|InterlaceMode
)paren
(brace
id|index
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
r_while
c_loop
(paren
id|index
op_ge
l_int|0
)paren
(brace
suffix:semicolon
)brace
id|REFIndex
op_assign
id|REFIndex
op_minus
id|ulRefIndexLength
suffix:semicolon
singleline_comment|// rate size
r_if
c_cond
(paren
(paren
id|SetFlag
op_amp
id|ProgrammingCRT2
)paren
)paren
(brace
id|temp1
op_assign
id|AjustCRT2Rate
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
)brace
r_else
(brace
id|temp1
op_assign
l_int|0
suffix:semicolon
)brace
r_return
l_int|0x01
op_or
(paren
id|temp1
op_lshift
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|AjustCRT2Rate
id|BOOLEAN
id|AjustCRT2Rate
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempbx
op_assign
l_int|0
comma
id|tempax
comma
id|temp
suffix:semicolon
id|USHORT
id|tempextinfoflag
suffix:semicolon
id|tempax
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportRAMDAC2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportLCD
suffix:semicolon
r_if
c_cond
(paren
id|LCDResInfo
op_ne
id|Panel1280x1024
)paren
(brace
id|temp
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x09
)paren
)paren
suffix:semicolon
singleline_comment|//si+Ext_ResInfo
r_if
c_cond
(paren
id|temp
op_ge
l_int|9
)paren
(brace
id|tempax
op_assign
l_int|0
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
(paren
id|SetCRT2ToAVIDEO
op_or
id|SetCRT2ToSVIDEO
op_or
id|SetCRT2ToSCART
)paren
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportTV
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|tempextinfoflag
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x0
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_InfoFlag
r_if
c_cond
(paren
id|tempextinfoflag
op_amp
id|NoSupportSimuTV
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetNotSimuTVMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
)brace
id|tempbx
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+Ext_point
)brace
r_else
(brace
singleline_comment|//for LVDS
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
id|SupportLCD
suffix:semicolon
id|temp
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x09
)paren
)paren
suffix:semicolon
singleline_comment|//si+Ext_ResInfo
r_if
c_cond
(paren
id|temp
OG
l_int|0x08
)paren
(brace
singleline_comment|//1024x768
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|LCDResInfo
OL
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|temp
OG
l_int|0x07
)paren
(brace
singleline_comment|//800x600
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp
op_eq
l_int|0x04
)paren
(brace
singleline_comment|//512x384
r_return
l_int|0
suffix:semicolon
)brace
)brace
)brace
)brace
r_for
c_loop
(paren
suffix:semicolon
id|REFIndex
OG
id|tempbx
suffix:semicolon
id|REFIndex
op_sub_assign
id|Ext2StructSize
)paren
(brace
id|tempextinfoflag
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x0
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_InfoFlag
r_if
c_cond
(paren
id|tempextinfoflag
op_amp
id|tempax
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_for
c_loop
(paren
id|REFIndex
op_assign
id|tempbx
suffix:semicolon
suffix:semicolon
id|REFIndex
op_add_assign
id|Ext2StructSize
)paren
(brace
id|tempextinfoflag
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x0
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_InfoFlag
r_if
c_cond
(paren
id|tempextinfoflag
op_eq
l_int|0x0FFFF
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempextinfoflag
op_amp
id|tempax
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
id|FALSE
suffix:semicolon
)brace
DECL|function|SaveCRT2Info
id|VOID
(def_block
id|SaveCRT2Info
c_func
(paren
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp1
comma
id|temp2
comma
id|temp3
suffix:semicolon
id|temp1
op_assign
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
op_rshift
l_int|8
suffix:semicolon
id|temp2
op_assign
op_complement
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
suffix:semicolon
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x31
)paren
suffix:semicolon
id|temp3
op_assign
(paren
(paren
id|temp3
op_amp
id|temp2
)paren
op_or
id|temp1
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x31
comma
(paren
id|USHORT
)paren
id|temp3
)paren
suffix:semicolon
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x35
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_amp
l_int|0xF3
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x35
comma
(paren
id|USHORT
)paren
id|temp3
)paren
suffix:semicolon
)brace
)def_block
DECL|function|DisableLockRegs
id|VOID
(def_block
id|DisableLockRegs
c_func
(paren
)paren
(brace
id|UCHAR
id|temp3
suffix:semicolon
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_amp
l_int|0xDF
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x32
comma
(paren
id|USHORT
)paren
id|temp3
)paren
suffix:semicolon
)brace
)def_block
DECL|function|DisableCRT2
id|VOID
(def_block
id|DisableCRT2
c_func
(paren
)paren
(brace
id|UCHAR
id|temp3
suffix:semicolon
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1E
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_amp
l_int|0xDF
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1E
comma
(paren
id|USHORT
)paren
id|temp3
)paren
suffix:semicolon
)brace
)def_block
DECL|function|DisableBridge
r_void
id|DisableBridge
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|Part2Port
comma
id|Part1Port
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_10
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x00
comma
l_int|0xDF
comma
l_int|0x00
)paren
suffix:semicolon
singleline_comment|//Set Part2 Index0 D[5]=0
id|DisableLockRegs
c_func
(paren
)paren
suffix:semicolon
singleline_comment|// SR 32 
id|DisableCRT2
c_func
(paren
)paren
suffix:semicolon
singleline_comment|// SR 1E
)brace
r_else
(brace
id|DisableLockRegs
c_func
(paren
)paren
suffix:semicolon
id|DisableCRT2
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
id|UnLockCRT2
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x02
comma
l_int|0xFF
comma
l_int|0x40
)paren
suffix:semicolon
singleline_comment|//set Part1Port ,index 2, D6=1,
)brace
)brace
)brace
DECL|function|GetCRT2Data
id|VOID
id|GetCRT2Data
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
singleline_comment|//301
id|GetCRT2Data301
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//LVDS
id|GetCRT2DataLVDS
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
DECL|function|GetCRT2DataLVDS
id|VOID
id|GetCRT2DataLVDS
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|OldREFIndex
suffix:semicolon
id|OldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
singleline_comment|//push di
id|GetResInfo
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|GetCRT2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x0FFF
suffix:semicolon
id|VGAHT
op_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|1
)paren
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|4
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x07FF
suffix:semicolon
id|VGAVT
op_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|3
)paren
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x0FFF
suffix:semicolon
id|tempbx
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|4
)paren
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|4
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_amp
l_int|0x07FF
suffix:semicolon
id|HT
op_assign
id|tempax
suffix:semicolon
id|VT
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
id|tempax
op_assign
l_int|800
suffix:semicolon
id|tempbx
op_assign
l_int|600
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
id|tempax
op_assign
l_int|1024
suffix:semicolon
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
id|HDE
op_assign
id|tempax
suffix:semicolon
id|VDE
op_assign
id|tempbx
suffix:semicolon
)brace
)brace
)brace
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
singleline_comment|//pop di
r_return
suffix:semicolon
)brace
DECL|function|GetCRT2Data301
id|VOID
id|GetCRT2Data301
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|modeflag1
comma
id|OldREFIndex
suffix:semicolon
id|USHORT
id|tempal
comma
id|tempah
comma
id|tempbl
suffix:semicolon
id|OldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
singleline_comment|//push di
id|RVBHRS
op_assign
l_int|50
suffix:semicolon
id|NewFlickerMode
op_assign
l_int|0
suffix:semicolon
id|RY1COE
op_assign
l_int|0
suffix:semicolon
id|RY2COE
op_assign
l_int|0
suffix:semicolon
id|RY3COE
op_assign
l_int|0
suffix:semicolon
id|RY4COE
op_assign
l_int|0
suffix:semicolon
id|GetResInfo
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|GetRAMDAC2DATA
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
singleline_comment|//pop di
r_return
suffix:semicolon
)brace
id|GetCRT2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|4
)paren
)paren
suffix:semicolon
id|tempax
op_assign
id|tempal
op_or
(paren
(paren
(paren
id|tempah
op_lshift
l_int|8
)paren
op_rshift
l_int|7
)paren
op_amp
l_int|0xFF00
)paren
suffix:semicolon
id|RVBHCMAX
op_assign
id|tempax
suffix:semicolon
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|1
)paren
)paren
suffix:semicolon
id|RVBHCFACT
op_assign
id|tempal
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|2
)paren
)paren
suffix:semicolon
id|VGAHT
op_assign
(paren
id|tempax
op_amp
l_int|0x0FFF
)paren
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|3
)paren
)paren
suffix:semicolon
id|VGAVT
op_assign
(paren
(paren
id|tempax
op_rshift
l_int|4
)paren
op_amp
l_int|0x07FF
)paren
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|5
)paren
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0x0FFF
)paren
suffix:semicolon
id|tempbx
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|6
)paren
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|tempbx
op_rshift
l_int|4
)paren
op_amp
l_int|0x07FF
)paren
suffix:semicolon
id|tempbl
op_assign
id|tempbx
op_amp
l_int|0x00FF
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|5
)paren
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_amp
l_int|0x0FFF
)paren
suffix:semicolon
id|HDE
op_assign
id|tempax
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|6
)paren
)paren
suffix:semicolon
id|tempax
op_assign
(paren
(paren
id|tempax
op_rshift
l_int|4
)paren
op_amp
l_int|0x07FF
)paren
suffix:semicolon
id|VDE
op_assign
id|tempax
suffix:semicolon
singleline_comment|//skipp something about hivisiontv
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|8
)paren
)paren
suffix:semicolon
id|tempbl
op_assign
(paren
id|tempax
op_rshift
l_int|8
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x0FFF
suffix:semicolon
id|modeflag1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|modeflag1
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|10
)paren
)paren
suffix:semicolon
)brace
id|RVBHRS
op_assign
id|tempax
suffix:semicolon
id|NewFlickerMode
op_assign
(paren
id|tempbl
op_amp
l_int|0x080
)paren
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|12
)paren
)paren
suffix:semicolon
id|RY1COE
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|RY2COE
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|14
)paren
)paren
suffix:semicolon
id|RY3COE
op_assign
(paren
id|tempax
op_amp
l_int|0x00FF
)paren
suffix:semicolon
id|RY4COE
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetPALTV
)paren
)paren
(brace
id|tempax
op_assign
id|NTSCHT
suffix:semicolon
id|tempbx
op_assign
id|NTSCVT
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|PALHT
suffix:semicolon
id|tempbx
op_assign
id|PALVT
suffix:semicolon
)brace
)brace
id|HT
op_assign
id|tempax
suffix:semicolon
id|VT
op_assign
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
singleline_comment|//pop di
r_return
suffix:semicolon
)brace
id|tempax
op_assign
l_int|1024
suffix:semicolon
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|350
)paren
(brace
singleline_comment|//cx-&gt;VGAVDE
id|tempbx
op_assign
l_int|560
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|400
)paren
(brace
id|tempbx
op_assign
l_int|640
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
id|tempax
op_assign
l_int|1280
suffix:semicolon
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|800
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|864
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
)brace
id|HDE
op_assign
id|tempax
suffix:semicolon
id|VDE
op_assign
id|tempbx
suffix:semicolon
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
singleline_comment|//pop di
r_return
suffix:semicolon
)brace
DECL|function|GetResInfo
id|VOID
id|GetResInfo
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp
comma
id|xres
comma
id|yres
comma
id|modeflag1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|temp
op_assign
(paren
id|USHORT
)paren
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x05
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ResInfo
id|xres
op_assign
id|StResInfo
(braket
id|temp
)braket
(braket
l_int|0
)braket
suffix:semicolon
id|yres
op_assign
id|StResInfo
(braket
id|temp
)braket
(braket
l_int|1
)braket
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
(paren
id|USHORT
)paren
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x09
)paren
)paren
suffix:semicolon
singleline_comment|// si+Ext_ResInfo
id|xres
op_assign
id|ModeResInfo
(braket
id|temp
)braket
(braket
l_int|0
)braket
suffix:semicolon
singleline_comment|//xres-&gt;ax
id|yres
op_assign
id|ModeResInfo
(braket
id|temp
)braket
(braket
l_int|1
)braket
suffix:semicolon
singleline_comment|//yres-&gt;bx
id|modeflag1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|modeflag1
op_amp
id|HalfDCLK
)paren
(brace
id|xres
op_assign
id|xres
op_star
l_int|2
suffix:semicolon
)brace
r_if
c_cond
(paren
id|modeflag1
op_amp
id|DoubleScanMode
)paren
(brace
id|yres
op_assign
id|yres
op_star
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|LCDResInfo
op_eq
id|Panel1024x768
)paren
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|400
)paren
(brace
id|yres
op_assign
l_int|405
suffix:semicolon
)brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|350
)paren
(brace
id|yres
op_assign
l_int|360
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SetFlag
op_amp
id|LCDVESATiming
)paren
(brace
r_if
c_cond
(paren
id|yres
op_eq
l_int|360
)paren
(brace
id|yres
op_assign
l_int|375
suffix:semicolon
)brace
)brace
)brace
id|VGAHDE
op_assign
id|xres
suffix:semicolon
id|HDE
op_assign
id|xres
suffix:semicolon
id|VGAVDE
op_assign
id|yres
suffix:semicolon
id|VDE
op_assign
id|yres
suffix:semicolon
)brace
DECL|function|GetLVDSDesData
id|VOID
id|GetLVDSDesData
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|old_REFIndex
comma
id|tempax
suffix:semicolon
id|old_REFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
singleline_comment|//push di
id|REFIndex
op_assign
id|GetLVDSDesPtr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x0FFF
suffix:semicolon
id|LCDHDES
op_assign
id|tempax
suffix:semicolon
r_if
c_cond
(paren
id|LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
singleline_comment|//hw walk-a-round
r_if
c_cond
(paren
id|LCDResInfo
op_ge
id|Panel1024x768
)paren
(brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|LCDHDES
op_assign
l_int|320
suffix:semicolon
)brace
)brace
)brace
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|1
)paren
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|4
suffix:semicolon
id|tempax
op_assign
id|tempax
op_amp
l_int|0x07FF
suffix:semicolon
id|LCDVDES
op_assign
id|tempax
suffix:semicolon
id|REFIndex
op_assign
id|old_REFIndex
suffix:semicolon
singleline_comment|//pop di
r_return
suffix:semicolon
)brace
DECL|function|GetRAMDAC2DATA
id|VOID
id|GetRAMDAC2DATA
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempax
comma
id|tempbx
comma
id|tempbh
comma
id|modeflag1
comma
id|t1
op_assign
l_int|0
comma
id|t2
suffix:semicolon
id|RVBHCMAX
op_assign
l_int|1
suffix:semicolon
id|RVBHCFACT
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempax
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|10
)paren
)paren
suffix:semicolon
id|tempbx
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|16
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|t1
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x2
)paren
)paren
suffix:semicolon
singleline_comment|//Ext_CRT1CRTC=2
id|t1
op_assign
id|t1
op_amp
l_int|0x03F
suffix:semicolon
singleline_comment|//[06/29/2000] fix bug for vbios &gt;=v1.07.00
id|t1
op_assign
id|t1
op_star
id|CRT1Len
suffix:semicolon
id|REFIndex
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x204
)paren
)paren
suffix:semicolon
singleline_comment|// Get CRT1Table
id|REFIndex
op_assign
id|REFIndex
op_plus
id|t1
suffix:semicolon
id|t1
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0
)paren
)paren
suffix:semicolon
id|t2
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|14
)paren
)paren
suffix:semicolon
id|tempax
op_assign
(paren
id|t1
op_amp
l_int|0xFF
)paren
op_or
(paren
(paren
id|t2
op_amp
l_int|0x03
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbx
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|6
)paren
)paren
suffix:semicolon
id|t1
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|13
)paren
)paren
suffix:semicolon
id|t1
op_assign
(paren
id|t1
op_amp
l_int|0x01
)paren
op_lshift
l_int|2
suffix:semicolon
)brace
id|tempbh
op_assign
id|tempbx
op_rshift
l_int|8
suffix:semicolon
id|tempbh
op_assign
(paren
(paren
id|tempbh
op_amp
l_int|0x20
)paren
op_rshift
l_int|4
)paren
op_or
(paren
id|tempbh
op_amp
l_int|0x01
)paren
suffix:semicolon
id|tempbh
op_assign
id|tempbh
op_or
id|t1
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF
)paren
op_or
(paren
id|tempbh
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempax
op_assign
id|tempax
op_plus
l_int|5
suffix:semicolon
id|modeflag1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|modeflag1
op_amp
id|Charx8Dot
)paren
(brace
id|tempax
op_assign
id|tempax
op_star
l_int|8
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|tempax
op_star
l_int|9
suffix:semicolon
)brace
id|VGAHT
op_assign
id|tempax
suffix:semicolon
id|HT
op_assign
id|tempax
suffix:semicolon
id|tempbx
op_increment
suffix:semicolon
id|VGAVT
op_assign
id|tempbx
suffix:semicolon
id|VT
op_assign
id|tempbx
suffix:semicolon
)brace
DECL|function|GetCRT2Ptr
id|VOID
id|GetCRT2Ptr
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempcl
comma
id|tempbx
comma
id|tempal
comma
id|tempax
comma
id|CRT2PtrData
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
singleline_comment|//LCD
id|tempbx
op_assign
l_int|0
suffix:semicolon
singleline_comment|//default tempbx=0 -&gt; ExtLCD1Data
id|tempcl
op_assign
id|LCDDataLen
suffix:semicolon
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SetFlag
op_amp
id|LCDVESATiming
)paren
)paren
(brace
id|tempbx
op_add_assign
l_int|5
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempcl
op_assign
id|TVDataLen
suffix:semicolon
id|tempbx
op_assign
l_int|3
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|4
suffix:semicolon
id|tempcl
op_assign
id|TVDataLen
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SetFlag
op_amp
id|TVSimuMode
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|4
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_CRT2CRTC
)brace
r_else
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|4
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRT2CRTC
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
id|tempax
op_assign
id|tempal
op_star
id|tempcl
suffix:semicolon
id|REFIndex
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|tempbx
op_star
l_int|2
op_plus
l_int|0x20E
)paren
)paren
suffix:semicolon
id|REFIndex
op_add_assign
id|tempax
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//for LVDS
id|tempcl
op_assign
id|LVDSDataLen
suffix:semicolon
id|tempbx
op_assign
id|LCDResInfo
op_minus
id|Panel800x600
suffix:semicolon
r_if
c_cond
(paren
id|LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|3
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_CRT2CRTC
)brace
r_else
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// di+Ext_CRT2CRTC
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
id|tempax
op_assign
id|tempal
op_star
id|tempcl
suffix:semicolon
id|CRT2PtrData
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ADR_CRT2PtrData
)paren
)paren
suffix:semicolon
singleline_comment|//ADR_CRT2PtrData is defined in init.def
id|REFIndex
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|CRT2PtrData
op_plus
id|tempbx
op_star
l_int|2
)paren
)paren
suffix:semicolon
id|REFIndex
op_add_assign
id|tempax
suffix:semicolon
)brace
)brace
DECL|function|UnLockCRT2
id|VOID
id|UnLockCRT2
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|UCHAR
id|temp3
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x24
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_or
l_int|0x01
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x24
comma
(paren
id|USHORT
)paren
id|temp3
)paren
suffix:semicolon
)brace
DECL|function|SetCRT2ModeRegs
id|VOID
id|SetCRT2ModeRegs
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|i
comma
id|j
suffix:semicolon
id|USHORT
id|tempah
op_assign
l_int|0
comma
id|temp3
suffix:semicolon
id|SHORT
id|tempcl
suffix:semicolon
id|USHORT
id|Part4Port
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part4Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|j
op_assign
l_int|4
suffix:semicolon
id|i
OL
l_int|3
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
id|j
comma
l_int|0
)paren
suffix:semicolon
)brace
id|tempcl
op_assign
(paren
id|USHORT
)paren
id|ModeType
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_minus
id|ModeVGA
suffix:semicolon
r_if
c_cond
(paren
id|tempcl
op_ge
l_int|0
)paren
(brace
id|tempah
op_assign
(paren
(paren
l_int|0x010
op_rshift
id|tempcl
)paren
op_or
l_int|0x080
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x0A0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
singleline_comment|//301
id|tempah
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_or
l_int|0x02
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x05
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|tempah
op_assign
(paren
id|tempah
op_xor
l_int|0x01
)paren
suffix:semicolon
)brace
)brace
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_rshift
l_int|5
suffix:semicolon
r_if
c_cond
(paren
(paren
id|ModeType
op_eq
id|ModeVGA
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x010
suffix:semicolon
)brace
r_if
c_cond
(paren
id|LCDResInfo
op_ne
id|Panel1024x768
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x020
suffix:semicolon
)brace
)brace
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0D
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_amp
(paren
op_complement
l_int|0x0BF
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_or
id|tempah
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0D
comma
(paren
id|USHORT
)paren
id|temp3
)paren
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//LVDS
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x02
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|5
)paren
op_amp
l_int|0x0FF
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|CRT2DisplayFlag
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
)brace
)brace
DECL|function|SetGroup1
id|VOID
id|SetGroup1
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
singleline_comment|//301
id|SetGroup1_301
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//LVDS
id|SetGroup1_LVDS
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
)brace
)brace
DECL|function|SetGroup1_LVDS
id|VOID
id|SetGroup1_LVDS
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp1
comma
id|temp2
comma
id|tempcl
comma
id|tempch
comma
id|tempbh
comma
id|tempal
comma
id|tempah
comma
id|tempax
comma
id|tempbx
suffix:semicolon
id|USHORT
id|tempcx
comma
id|OldREFIndex
comma
id|lcdhdee
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|USHORT
id|temppush1
comma
id|temppush2
suffix:semicolon
r_int
r_int
r_int
id|tempeax
comma
id|tempebx
comma
id|tempecx
comma
id|templong
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
id|OldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
singleline_comment|//push di
id|SetCRT2Offset
c_func
(paren
id|Part1Port
comma
id|ROMAddr
)paren
suffix:semicolon
id|SetCRT2FIFO
c_func
(paren
id|Part1Port
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SetCRT2Sync
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp1
op_assign
(paren
id|VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
singleline_comment|//BTVGA2HT 0x08,0x09
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x08
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
(paren
(paren
(paren
id|VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x09
comma
op_complement
l_int|0x0F0
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
(paren
id|VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0x0FF
suffix:semicolon
singleline_comment|//BTVGA2HDEE 0x0A,0x0C
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0A
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
id|VGAHDE
op_plus
l_int|12
suffix:semicolon
singleline_comment|//bx&t;BTVGA@HRS 0x0B,0x0C
id|temp2
op_assign
(paren
id|VGAHT
op_minus
id|VGAHDE
)paren
op_rshift
l_int|2
suffix:semicolon
singleline_comment|//cx
id|temp1
op_assign
id|temp1
op_plus
id|temp2
suffix:semicolon
id|temp2
op_assign
(paren
id|temp2
op_lshift
l_int|1
)paren
op_plus
id|temp1
suffix:semicolon
id|tempcl
op_assign
id|temp2
op_amp
l_int|0x0FF
suffix:semicolon
singleline_comment|//
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0B
comma
(paren
id|USHORT
)paren
(paren
id|temp1
op_amp
l_int|0x0FF
)paren
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|temp1
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempbh
op_assign
(paren
(paren
(paren
(paren
id|VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
)paren
op_amp
l_int|0x0FF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempbh
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0D
comma
id|tempcl
)paren
suffix:semicolon
singleline_comment|//BTVGA2HRE 0x0D
id|tempcx
op_assign
(paren
id|VGAVT
op_minus
l_int|1
)paren
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//BTVGA2TV 0x0E,0x12
id|tempbx
op_assign
id|VGAVDE
op_minus
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//BTVGA2VDEE 0x0F,0x12
id|tempah
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|3
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x12
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|VGAVT
op_plus
id|VGAVDE
)paren
op_rshift
l_int|1
suffix:semicolon
singleline_comment|//BTVGA2VRS&t;&t;0x10,0x11
id|tempcx
op_assign
(paren
(paren
id|VGAVT
op_minus
id|VGAVDE
)paren
op_rshift
l_int|4
)paren
op_plus
id|tempbx
op_plus
l_int|1
suffix:semicolon
singleline_comment|//BTVGA2VRE&t;&t;0x11
singleline_comment|//
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x10
comma
id|tempah
)paren
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
(paren
id|tempbh
op_lshift
l_int|4
)paren
op_amp
l_int|0x0FF
)paren
op_or
(paren
id|tempcx
op_amp
l_int|0x0F
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x03C
comma
id|tempah
)paren
suffix:semicolon
id|tempax
op_assign
id|LCDHDES
suffix:semicolon
id|tempbx
op_assign
id|HDE
suffix:semicolon
id|tempcx
op_assign
id|HT
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
singleline_comment|//HT-HDE
id|tempax
op_assign
id|tempax
op_plus
id|tempbx
suffix:semicolon
singleline_comment|//lcdhdee
id|tempbx
op_assign
id|HT
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_ge
id|tempbx
)paren
(brace
id|tempax
op_assign
id|tempax
op_minus
id|tempbx
suffix:semicolon
)brace
id|lcdhdee
op_assign
id|tempax
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|2
suffix:semicolon
singleline_comment|//temp
id|tempcx
op_assign
id|tempcx
op_plus
id|tempax
suffix:semicolon
singleline_comment|//lcdhrs
r_if
c_cond
(paren
id|tempcx
op_ge
id|tempbx
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
)brace
id|tempax
op_assign
id|tempcx
suffix:semicolon
id|tempax
op_assign
id|tempax
op_rshift
l_int|3
suffix:semicolon
singleline_comment|//BPLHRS
id|tempah
op_assign
id|tempax
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x14
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_14h
id|tempah
op_assign
id|tempah
op_plus
l_int|2
suffix:semicolon
id|tempah
op_assign
id|tempah
op_plus
l_int|0x01F
suffix:semicolon
id|tempcl
op_assign
id|tempcx
op_amp
l_int|0x0FF
suffix:semicolon
id|tempcl
op_assign
id|tempcl
op_amp
l_int|0x07
suffix:semicolon
id|tempcl
op_assign
(paren
id|tempcl
op_lshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//BPHLHSKEW
id|tempah
op_assign
id|tempah
op_or
id|tempcl
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x15
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_15h
id|tempbx
op_assign
id|lcdhdee
suffix:semicolon
singleline_comment|//lcdhdee
id|tempcx
op_assign
id|LCDHDES
suffix:semicolon
singleline_comment|//lcdhdes
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x07
suffix:semicolon
singleline_comment|//BPLHDESKEW
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1A
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Ah
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
singleline_comment|//BPLHDES
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x16
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_16h
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|3
suffix:semicolon
singleline_comment|//BPLHDEE
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x17
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_17h
id|tempcx
op_assign
id|VGAVT
suffix:semicolon
id|tempbx
op_assign
id|VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
id|tempbx
suffix:semicolon
singleline_comment|//VGAVT-VGAVDE
id|tempbx
op_assign
id|LCDVDES
suffix:semicolon
singleline_comment|//VGAVDES
id|temppush1
op_assign
id|tempbx
suffix:semicolon
singleline_comment|//push bx temppush1
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
id|tempax
op_assign
l_int|600
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
l_int|768
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempax
op_assign
id|VGAVDE
suffix:semicolon
)brace
id|tempbx
op_assign
id|tempbx
op_plus
id|tempax
suffix:semicolon
id|tempax
op_assign
id|VT
suffix:semicolon
singleline_comment|//VT
r_if
c_cond
(paren
id|tempbx
op_ge
id|VT
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
)brace
id|temppush2
op_assign
id|tempbx
suffix:semicolon
singleline_comment|//push bx&t;temppush2
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|tempbx
op_increment
suffix:semicolon
singleline_comment|//BPLVRS
r_if
c_cond
(paren
id|tempbx
op_ge
id|tempax
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
)brace
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x18
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_18h
id|tempcx
op_assign
id|tempcx
op_rshift
l_int|3
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
id|tempbx
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
singleline_comment|//BPLVRE
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0F
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x030
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x19
comma
op_complement
l_int|0x03F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_19h
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempbh
op_assign
id|tempbh
op_amp
l_int|0x07
suffix:semicolon
id|tempah
op_assign
id|tempbh
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|3
)paren
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//BPLDESKEW =0
id|tempbx
op_assign
id|VGAVDE
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
op_ne
id|VDE
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x40
suffix:semicolon
)brace
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x1A
comma
l_int|0x07
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Ah
id|tempecx
op_assign
id|VGAVT
suffix:semicolon
id|tempebx
op_assign
id|VDE
suffix:semicolon
id|tempeax
op_assign
id|VGAVDE
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_minus
id|tempeax
suffix:semicolon
singleline_comment|//VGAVT-VGAVDE
id|tempeax
op_assign
id|tempeax
op_star
l_int|64
suffix:semicolon
id|templong
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|templong
op_star
id|tempebx
OL
id|tempeax
)paren
(brace
id|templong
op_increment
suffix:semicolon
)brace
id|tempebx
op_assign
id|templong
suffix:semicolon
singleline_comment|//BPLVCFACT
r_if
c_cond
(paren
id|SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempebx
op_assign
id|tempebx
op_amp
l_int|0x03F
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0x0FF
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1E
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Eh
id|tempbx
op_assign
id|temppush2
suffix:semicolon
singleline_comment|//pop bx temppush2 BPLVDEE
id|tempcx
op_assign
id|temppush1
suffix:semicolon
singleline_comment|//pop cx temppush1 NPLVDES
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x07
suffix:semicolon
id|tempah
op_assign
id|tempbh
suffix:semicolon
id|tempah
op_assign
id|tempah
op_lshift
l_int|3
suffix:semicolon
id|tempch
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempch
op_assign
id|tempah
op_amp
l_int|0x07
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempch
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1D
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Dh
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1C
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Ch
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1B
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Bh
id|tempecx
op_assign
id|VGAHDE
suffix:semicolon
id|tempebx
op_assign
id|HDE
suffix:semicolon
id|tempeax
op_assign
id|tempecx
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|10
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|tempebx
op_eq
id|tempecx
)paren
(brace
id|tempeax
op_assign
l_int|65535
suffix:semicolon
)brace
id|tempecx
op_assign
id|tempeax
suffix:semicolon
id|tempeax
op_assign
id|VGAHT
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|6
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_lshift
l_int|10
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_div
id|tempecx
suffix:semicolon
id|tempecx
op_assign
id|tempecx
op_lshift
l_int|16
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_minus
l_int|1
suffix:semicolon
id|tempax
op_assign
(paren
id|USHORT
)paren
(paren
id|tempeax
op_amp
l_int|0x00FFFF
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempax
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_1Fh
id|tempbx
op_assign
id|VDE
suffix:semicolon
id|tempbx
op_decrement
suffix:semicolon
singleline_comment|//BENPLACCEND
r_if
c_cond
(paren
id|SetFlag
op_amp
id|EnableLVDSDDA
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|3
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempch
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempch
op_assign
id|tempch
op_amp
l_int|0x07
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempch
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x20
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_20h
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x21
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_21h
id|tempecx
op_assign
id|tempecx
op_rshift
l_int|16
suffix:semicolon
singleline_comment|//BPLHCFACT
id|temp1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|temp1
op_amp
id|HalfDCLK
)paren
(brace
id|tempecx
op_assign
id|tempecx
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempcx
op_assign
(paren
id|USHORT
)paren
(paren
id|tempecx
op_amp
l_int|0x0FFFF
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x22
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_22h
id|tempah
op_assign
id|tempcx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x23
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part1_23h
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|1
)paren
(brace
id|tempal
op_assign
(paren
id|USHORT
)paren
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x05
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ResInfo
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
id|GetRatePtrCRT2
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// di+Ext_CRT2CRTC
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0x80
suffix:semicolon
id|tempal
op_assign
id|tempal
op_star
id|tempah
suffix:semicolon
id|REFIndex
op_assign
id|offset_Zurac
suffix:semicolon
singleline_comment|//offset Zurac need added in rompost.asm
id|REFIndex
op_assign
id|REFIndex
op_plus
id|tempal
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
singleline_comment|//this function not implemented yet
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
id|SetTPData
c_func
(paren
)paren
suffix:semicolon
)brace
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
singleline_comment|//pop di
r_return
suffix:semicolon
)brace
DECL|function|SetTPData
id|VOID
id|SetTPData
c_func
(paren
id|VOID
)paren
(brace
r_return
suffix:semicolon
)brace
DECL|function|SetGroup1_301
id|VOID
id|SetGroup1_301
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp1
comma
id|temp2
comma
id|tempcl
comma
id|tempch
comma
id|tempbl
comma
id|tempbh
comma
id|tempal
comma
id|tempah
comma
id|tempax
comma
id|tempbx
suffix:semicolon
id|USHORT
id|tempcx
comma
id|OldREFIndex
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
id|OldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
singleline_comment|//push di
id|SetCRT2Offset
c_func
(paren
id|Part1Port
comma
id|ROMAddr
)paren
suffix:semicolon
id|SetCRT2FIFO
c_func
(paren
id|Part1Port
comma
id|ROMAddr
comma
id|ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|SetCRT2Sync
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|GetCRT1Ptr
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|temp1
op_assign
(paren
id|VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0x0FF
suffix:semicolon
singleline_comment|//BTVGA2HT 0x08,0x09
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x08
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
(paren
(paren
(paren
id|VGAHT
op_minus
l_int|1
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x09
comma
op_complement
l_int|0x0F0
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
(paren
id|VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0x0FF
suffix:semicolon
singleline_comment|//BTVGA2HDEE 0x0A,0x0C
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0A
comma
id|temp1
)paren
suffix:semicolon
id|temp1
op_assign
id|VGAHDE
op_plus
l_int|12
suffix:semicolon
singleline_comment|//bx&t;BTVGA@HRS 0x0B,0x0C
id|temp2
op_assign
(paren
id|VGAHT
op_minus
id|VGAHDE
)paren
op_rshift
l_int|2
suffix:semicolon
singleline_comment|//cx
id|temp1
op_assign
id|temp1
op_plus
id|temp2
suffix:semicolon
id|temp2
op_assign
(paren
id|temp2
op_lshift
l_int|1
)paren
op_plus
id|temp1
suffix:semicolon
id|tempcl
op_assign
id|temp2
op_amp
l_int|0x0FF
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbl
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|4
)paren
)paren
suffix:semicolon
singleline_comment|//di+4
id|tempbh
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|14
)paren
)paren
suffix:semicolon
singleline_comment|//di+14
id|temp1
op_assign
(paren
(paren
id|tempbh
op_rshift
l_int|6
)paren
op_lshift
l_int|8
)paren
op_or
id|tempbl
suffix:semicolon
singleline_comment|//temp1-&gt;bx
id|temp1
op_assign
(paren
id|temp1
op_minus
l_int|1
)paren
op_lshift
l_int|3
suffix:semicolon
id|tempcl
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|5
)paren
)paren
suffix:semicolon
singleline_comment|//di+5
id|tempch
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|15
)paren
)paren
suffix:semicolon
singleline_comment|//di+15
id|tempcl
op_assign
id|tempcl
op_amp
l_int|0x01F
suffix:semicolon
id|tempch
op_assign
(paren
id|tempch
op_amp
l_int|0x04
)paren
op_lshift
(paren
l_int|6
op_minus
l_int|2
)paren
suffix:semicolon
id|tempcl
op_assign
(paren
(paren
id|tempcl
op_or
id|tempch
)paren
op_minus
l_int|1
)paren
op_lshift
l_int|3
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0B
comma
(paren
id|USHORT
)paren
(paren
id|temp1
op_amp
l_int|0x0FF
)paren
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|temp1
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempbh
op_assign
(paren
(paren
(paren
(paren
id|VGAHDE
op_plus
l_int|12
)paren
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
)paren
op_amp
l_int|0x0FF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempbh
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0D
comma
id|tempcl
)paren
suffix:semicolon
singleline_comment|//BTVGA2HRE 0x0D
id|tempcx
op_assign
(paren
id|VGAVT
op_minus
l_int|1
)paren
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//BTVGA2TV 0x0E,0x12
id|tempbx
op_assign
id|VGAVDE
op_minus
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//BTVGA2VDEE 0x0F,0x12
id|tempah
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_lshift
l_int|3
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x12
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
id|VGAVT
op_plus
id|VGAVDE
)paren
op_rshift
l_int|1
suffix:semicolon
singleline_comment|//BTVGA2VRS&t;&t;0x10,0x11
id|tempcx
op_assign
(paren
(paren
id|VGAVT
op_minus
id|VGAVDE
)paren
op_rshift
l_int|4
)paren
op_plus
id|tempbx
op_plus
l_int|1
suffix:semicolon
singleline_comment|//BTVGA2VRE&t;&t;0x11
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbx
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|8
)paren
)paren
suffix:semicolon
singleline_comment|//di+8
id|temp1
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|7
)paren
)paren
suffix:semicolon
singleline_comment|//di+7
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x04
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0100
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x080
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0200
suffix:semicolon
)brace
id|temp1
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|13
)paren
)paren
suffix:semicolon
singleline_comment|//di+13
r_if
c_cond
(paren
id|temp1
op_amp
l_int|0x08
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x0400
suffix:semicolon
)brace
id|tempcl
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|9
)paren
)paren
suffix:semicolon
singleline_comment|//di+9
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
(paren
id|tempcl
op_amp
l_int|0x00FF
)paren
suffix:semicolon
)brace
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x10
comma
id|tempah
)paren
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
(paren
id|tempbh
op_lshift
l_int|4
)paren
op_amp
l_int|0x0FF
)paren
op_or
(paren
id|tempcx
op_amp
l_int|0x0F
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipID
op_eq
id|SIS_Glamour
)paren
(brace
id|tempah
op_assign
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
(paren
id|LCDResInfo
op_ne
id|Panel1024x768
)paren
op_logical_and
(paren
id|LCDResInfo
op_eq
id|Panel1280x1024
)paren
)paren
(brace
id|tempah
op_assign
l_int|0x20
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x20
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_assign
l_int|0x08
suffix:semicolon
)brace
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x13
comma
op_complement
l_int|0x03C
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempax
op_assign
l_int|0xFFFF
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|GetVGAHT2
c_func
(paren
)paren
suffix:semicolon
)brace
id|tempcl
op_assign
l_int|0x08
suffix:semicolon
singleline_comment|//Reg 0x03 Horozontal Total
id|temp1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp1
op_amp
id|Charx8Dot
)paren
)paren
(brace
singleline_comment|//temp1-&gt;St_ModeFlag
id|tempcl
op_assign
l_int|0x09
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempax
op_ge
id|VGAHT
)paren
(brace
id|tempax
op_assign
id|VGAHT
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp1
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcl
)paren
op_minus
l_int|5
suffix:semicolon
id|tempbl
op_assign
id|tempax
suffix:semicolon
id|tempah
op_assign
l_int|0xFF
suffix:semicolon
singleline_comment|//set MAX HT
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x03
comma
id|tempah
)paren
suffix:semicolon
id|tempax
op_assign
id|VGAHDE
suffix:semicolon
singleline_comment|//0x04 Horizontal Display End
r_if
c_cond
(paren
id|temp1
op_amp
id|HalfDCLK
)paren
(brace
id|tempax
op_assign
id|tempax
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempax
op_assign
(paren
id|tempax
op_div
id|tempcl
)paren
op_minus
l_int|1
suffix:semicolon
id|tempbh
op_assign
id|tempax
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x04
comma
id|tempax
)paren
suffix:semicolon
id|tempah
op_assign
id|tempbh
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_assign
id|tempah
op_plus
l_int|2
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x05
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x05 Horizontal Display Start
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x06
comma
l_int|0x03
)paren
suffix:semicolon
singleline_comment|//0x06 Horizontal Blank end
singleline_comment|//0x07 horizontal Retrace Start
id|tempcx
op_assign
(paren
id|tempbl
op_plus
id|tempbh
)paren
op_rshift
l_int|1
suffix:semicolon
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF
)paren
op_plus
l_int|2
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
id|tempah
op_assign
id|tempah
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp1
op_amp
id|HalfDCLK
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|temp1
op_amp
id|Charx8Dot
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_plus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|VGAHDE
op_ge
l_int|800
)paren
(brace
id|tempah
op_assign
id|tempah
op_minus
l_int|6
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp1
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_minus
l_int|4
suffix:semicolon
r_if
c_cond
(paren
id|VGAHDE
op_ge
l_int|800
)paren
(brace
id|tempah
op_assign
id|tempah
op_minus
l_int|7
suffix:semicolon
r_if
c_cond
(paren
id|ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|1024
)paren
(brace
id|tempah
op_assign
id|tempah
op_plus
l_int|15
suffix:semicolon
r_if
c_cond
(paren
id|LCDResInfo
op_ne
id|Panel1280x1024
)paren
(brace
id|tempah
op_assign
id|tempah
op_plus
l_int|7
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
id|VGAHDE
op_ge
l_int|1280
)paren
(brace
id|tempah
op_assign
id|tempah
op_plus
l_int|28
suffix:semicolon
)brace
)brace
)brace
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x07
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x07 Horizontal Retrace Start 
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x08
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//0x08 Horizontal Retrace End
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x18
comma
l_int|0x03
)paren
suffix:semicolon
singleline_comment|//0x18 SR08
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x19
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//0x19 SR0C
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x09
comma
l_int|0xFF
)paren
suffix:semicolon
singleline_comment|//0x09 Set Max VT
id|tempcx
op_assign
l_int|0x121
suffix:semicolon
id|tempcl
op_assign
l_int|0x21
suffix:semicolon
id|tempch
op_assign
l_int|0x01
suffix:semicolon
id|tempbx
op_assign
id|VGAVDE
suffix:semicolon
singleline_comment|//0x0E Virtical Display End
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|350
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|400
suffix:semicolon
)brace
id|tempbx
op_decrement
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x10
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x10 vertical Blank Start
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|tempbh
op_amp
l_int|0x01
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_or
l_int|0x0A
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0
suffix:semicolon
id|tempal
op_assign
l_int|0x0B
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbh
op_amp
l_int|0x02
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_or
l_int|0x040
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
l_int|0x020
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempbh
op_amp
l_int|0x04
)paren
(brace
id|tempch
op_assign
id|tempch
op_or
l_int|0x06
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x11
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//0x11 Vertival Blank End
id|tempax
op_assign
id|VGAVT
op_minus
id|tempbx
suffix:semicolon
singleline_comment|//0x0C Vertical Retrace Start 
id|tempax
op_assign
id|tempax
op_rshift
l_int|2
suffix:semicolon
id|temp2
op_assign
id|tempax
suffix:semicolon
singleline_comment|//push ax
id|tempax
op_assign
id|tempax
op_lshift
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempax
op_plus
id|tempbx
suffix:semicolon
r_if
c_cond
(paren
(paren
id|SetFlag
op_amp
id|TVSimuMode
)paren
op_logical_and
(paren
id|VBInfo
op_amp
id|SetPALTV
)paren
op_logical_and
(paren
id|VGAHDE
op_eq
l_int|800
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|40
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0x0FF
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
r_if
c_cond
(paren
id|tempbh
op_amp
l_int|0x01
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_or
l_int|0x04
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbh
op_amp
l_int|0x02
)paren
(brace
id|tempcl
op_assign
id|tempcl
op_or
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbh
op_amp
l_int|0x04
)paren
(brace
id|tempch
op_assign
id|tempch
op_or
l_int|0x08
suffix:semicolon
)brace
id|tempax
op_assign
id|temp2
suffix:semicolon
singleline_comment|//pop ax
id|tempax
op_assign
(paren
id|tempax
op_rshift
l_int|2
)paren
op_plus
l_int|1
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempax
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0x0FF
)paren
op_amp
l_int|0x0F
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0D
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x0D vertical Retrace End
id|tempbl
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
r_if
c_cond
(paren
id|tempbl
op_amp
l_int|0x10
)paren
(brace
id|tempch
op_assign
id|tempch
op_or
l_int|0x020
suffix:semicolon
)brace
id|tempah
op_assign
id|tempcl
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x0A CR07
id|tempah
op_assign
id|tempch
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x17
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x17 SR0A
id|tempax
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
id|tempah
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_rshift
l_int|1
)paren
op_amp
l_int|0x09
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x16
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//0x16 SR01
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0F
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//0x0F CR14
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x12
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//0x12 CR17
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x1A
comma
l_int|0
)paren
suffix:semicolon
singleline_comment|//0x1A SR0E
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
singleline_comment|//pop di
)brace
DECL|function|SetCRT2Offset
id|VOID
id|SetCRT2Offset
c_func
(paren
id|USHORT
id|Part1Port
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|offset
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_return
suffix:semicolon
)brace
id|offset
op_assign
id|GetOffset
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x07
comma
(paren
id|USHORT
)paren
(paren
id|offset
op_amp
l_int|0xFF
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x09
comma
(paren
id|USHORT
)paren
(paren
(paren
id|offset
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x03
comma
(paren
id|USHORT
)paren
(paren
(paren
(paren
id|offset
op_rshift
l_int|3
)paren
op_amp
l_int|0xFF
)paren
op_plus
l_int|1
)paren
)paren
suffix:semicolon
)brace
DECL|function|GetOffset
id|USHORT
id|GetOffset
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempal
comma
id|temp1
comma
id|colordepth
suffix:semicolon
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x03
)paren
)paren
suffix:semicolon
singleline_comment|// si+Ext_ModeInfo
id|tempal
op_assign
(paren
id|tempal
op_rshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|ScreenOffset
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x206
)paren
)paren
suffix:semicolon
singleline_comment|// Get ScreeOffset table
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ScreenOffset
op_plus
id|tempal
)paren
)paren
suffix:semicolon
singleline_comment|// get ScreenOffset
id|tempal
op_assign
id|tempal
op_amp
l_int|0xFF
suffix:semicolon
id|temp1
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_InfoFlag&t;
r_if
c_cond
(paren
id|temp1
op_amp
id|InterlaceMode
)paren
(brace
id|tempal
op_assign
id|tempal
op_lshift
l_int|1
suffix:semicolon
)brace
id|colordepth
op_assign
id|GetColorDepth
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
r_return
id|tempal
op_star
id|colordepth
suffix:semicolon
)brace
DECL|function|GetColorDepth
id|USHORT
id|GetColorDepth
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|ColorDepth
(braket
l_int|6
)braket
op_assign
initialization_block
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
r_int
id|temp1
suffix:semicolon
id|temp
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
id|temp1
op_assign
(paren
id|temp
op_amp
id|ModeInfoFlag
)paren
op_minus
id|ModeEGA
suffix:semicolon
r_if
c_cond
(paren
id|temp1
OL
l_int|0
)paren
(brace
id|temp1
op_assign
l_int|0
suffix:semicolon
)brace
r_return
id|ColorDepth
(braket
id|temp1
)braket
suffix:semicolon
)brace
DECL|function|SetCRT2FIFO
id|VOID
id|SetCRT2FIFO
c_func
(paren
id|USHORT
id|Part1Port
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|temp
comma
id|temp1
comma
id|temp2
comma
id|temp3
comma
id|flag
suffix:semicolon
id|USHORT
id|vclk2ptr
comma
id|latencyindex
suffix:semicolon
id|USHORT
id|oldREFIndex
comma
id|CRT1ModeNo
comma
id|oldModeIDOffset
suffix:semicolon
r_int
r_int
id|longtemp
suffix:semicolon
id|USHORT
id|LatencyFactor
(braket
l_int|48
)braket
op_assign
initialization_block
suffix:semicolon
singleline_comment|// 128 bit&t; BQ=1
id|oldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
singleline_comment|//push REFIndex(CRT2 now)
id|oldModeIDOffset
op_assign
(paren
id|USHORT
)paren
id|ModeIDOffset
suffix:semicolon
singleline_comment|//push ModeIDOffset
id|CRT1ModeNo
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x34
)paren
suffix:semicolon
singleline_comment|//get CRT1 ModeNo
id|SearchModeID
c_func
(paren
id|ROMAddr
comma
id|CRT1ModeNo
)paren
suffix:semicolon
singleline_comment|//Get ModeID Table
id|GetRatePtr
c_func
(paren
id|ROMAddr
comma
id|CRT1ModeNo
)paren
suffix:semicolon
singleline_comment|//Set REFIndex-&gt; for crt1 refreshrate&t;
id|temp1
op_assign
id|GetVCLK
c_func
(paren
id|ROMAddr
comma
id|CRT1ModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
id|temp2
op_assign
id|GetColorTh
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|temp3
op_assign
id|GetMCLK
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|temp
op_assign
(paren
(paren
id|USHORT
)paren
(paren
id|temp1
op_star
id|temp2
)paren
op_div
id|temp3
)paren
suffix:semicolon
singleline_comment|//temp-&gt;bx
id|temp1
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x14
)paren
suffix:semicolon
singleline_comment|//SR_14
id|temp1
op_assign
id|temp1
op_rshift
l_int|6
suffix:semicolon
id|temp1
op_assign
id|temp1
op_lshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp1
op_eq
l_int|0
)paren
(brace
id|temp1
op_assign
l_int|1
suffix:semicolon
)brace
id|temp1
op_assign
id|temp1
op_lshift
l_int|2
suffix:semicolon
singleline_comment|//temp1-&gt;ax
id|longtemp
op_assign
id|temp1
op_minus
id|temp
suffix:semicolon
id|temp2
op_assign
(paren
id|USHORT
)paren
(paren
(paren
l_int|28
op_star
l_int|16
)paren
op_div
(paren
r_int
)paren
id|longtemp
)paren
suffix:semicolon
singleline_comment|//temp2-&gt;cx
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|temp2
op_star
(paren
r_int
)paren
id|longtemp
)paren
op_eq
(paren
l_int|28
op_star
l_int|16
)paren
)paren
)paren
(brace
id|temp2
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipID
op_eq
id|SIS_Glamour
)paren
(brace
id|temp1
op_assign
id|CalcDelay
c_func
(paren
)paren
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//for Trojan and Spartan
id|flag
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x14
)paren
suffix:semicolon
singleline_comment|//SR_14
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x80
)paren
(brace
id|latencyindex
op_assign
l_int|12
suffix:semicolon
singleline_comment|//128 bit
)brace
r_else
(brace
id|latencyindex
op_assign
l_int|0
suffix:semicolon
singleline_comment|//64 bit
)brace
id|flag
op_assign
id|GetQueueConfig
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag
op_amp
l_int|0x01
)paren
)paren
(brace
id|latencyindex
op_add_assign
l_int|24
suffix:semicolon
singleline_comment|//GUI timing =0
)brace
r_if
c_cond
(paren
id|flag
op_amp
l_int|0x10
)paren
(brace
id|latencyindex
op_add_assign
l_int|6
suffix:semicolon
singleline_comment|//BQ =2
)brace
id|latencyindex
op_assign
id|latencyindex
op_plus
(paren
id|flag
op_rshift
l_int|5
)paren
suffix:semicolon
id|temp1
op_assign
id|LatencyFactor
(braket
id|latencyindex
)braket
suffix:semicolon
id|temp1
op_assign
id|temp1
op_plus
l_int|15
suffix:semicolon
id|flag
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x14
)paren
suffix:semicolon
singleline_comment|//SR_14
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag
op_amp
l_int|0x80
)paren
)paren
(brace
id|temp1
op_assign
id|temp1
op_plus
l_int|5
suffix:semicolon
singleline_comment|//64 bit
)brace
)brace
id|temp2
op_assign
id|temp2
op_plus
id|temp1
suffix:semicolon
id|REFIndex
op_assign
id|oldREFIndex
suffix:semicolon
singleline_comment|//pop REFIndex(CRT2)
id|ModeIDOffset
op_assign
id|oldModeIDOffset
suffix:semicolon
singleline_comment|//pop ModeIDOffset
id|vclk2ptr
op_assign
id|GetVCLK2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|vclk2ptr
op_plus
(paren
id|VCLKLen
op_minus
l_int|2
)paren
)paren
)paren
suffix:semicolon
id|temp3
op_assign
id|GetColorTh
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|longtemp
op_assign
id|temp1
op_star
id|temp2
op_star
id|temp3
suffix:semicolon
id|temp3
op_assign
id|GetMCLK
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|temp3
op_assign
id|temp3
op_lshift
l_int|4
suffix:semicolon
id|temp2
op_assign
(paren
r_int
)paren
(paren
id|longtemp
op_div
id|temp3
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_int
r_int
)paren
id|temp2
op_star
(paren
r_int
r_int
)paren
id|temp3
OL
(paren
r_int
r_int
)paren
id|longtemp
)paren
(brace
id|temp2
op_increment
suffix:semicolon
)brace
singleline_comment|//temp2-&gt;cx
id|temp1
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x01
)paren
suffix:semicolon
singleline_comment|//part1port index 01
r_if
c_cond
(paren
(paren
id|HwDeviceExtension-&gt;jChipID
op_eq
id|SIS_Trojan
)paren
op_logical_and
(paren
(paren
id|HwDeviceExtension-&gt;revision_id
op_amp
l_int|0xf0
)paren
op_eq
l_int|0x30
)paren
)paren
multiline_comment|/* 630s */
(brace
id|temp1
op_assign
(paren
id|temp1
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x19
suffix:semicolon
)brace
r_else
(brace
id|temp1
op_assign
(paren
id|temp1
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
l_int|0x16
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x01
comma
id|temp1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp2
op_le
l_int|6
)paren
(brace
id|temp2
op_assign
l_int|6
suffix:semicolon
)brace
r_if
c_cond
(paren
id|temp2
OG
l_int|0x14
)paren
(brace
id|temp2
op_assign
l_int|0x14
suffix:semicolon
)brace
id|temp1
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x02
)paren
suffix:semicolon
singleline_comment|//part1port index 02
id|temp1
op_assign
(paren
id|temp1
op_amp
(paren
op_complement
l_int|0x1F
)paren
)paren
op_or
id|temp2
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x02
comma
id|temp1
)paren
suffix:semicolon
)brace
DECL|function|GetVCLK
id|USHORT
id|GetVCLK
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempptr
suffix:semicolon
id|USHORT
id|temp1
suffix:semicolon
id|tempptr
op_assign
id|GetVCLKPtr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|temp1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|tempptr
op_plus
(paren
id|VCLKLen
op_minus
l_int|2
)paren
)paren
)paren
suffix:semicolon
r_return
id|temp1
suffix:semicolon
)brace
DECL|function|GetQueueConfig
id|USHORT
id|GetQueueConfig
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|tempal
comma
id|tempbl
suffix:semicolon
id|ULONG
id|tempeax
suffix:semicolon
id|SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x80000050
)paren
suffix:semicolon
id|tempeax
op_assign
id|GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|tempeax
op_assign
(paren
id|tempeax
op_rshift
l_int|24
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|tempbl
op_assign
(paren
id|USHORT
)paren
id|tempeax
suffix:semicolon
id|tempbl
op_assign
id|tempbl
op_lshift
l_int|4
suffix:semicolon
id|SetReg4
c_func
(paren
l_int|0xcf8
comma
l_int|0x800000A0
)paren
suffix:semicolon
id|tempeax
op_assign
id|GetReg3
c_func
(paren
l_int|0xcfc
)paren
suffix:semicolon
id|tempeax
op_assign
(paren
id|tempeax
op_rshift
l_int|24
)paren
op_amp
l_int|0x0f
suffix:semicolon
id|tempal
op_assign
(paren
id|USHORT
)paren
id|tempeax
suffix:semicolon
id|tempbl
op_assign
id|tempbl
op_or
id|tempal
suffix:semicolon
r_return
id|tempbl
suffix:semicolon
)brace
DECL|function|GetVCLKPtr
id|USHORT
id|GetVCLKPtr
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempal
suffix:semicolon
id|tempal
op_assign
(paren
id|UCHAR
)paren
id|GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
singleline_comment|//&t;Port 3cch
id|tempal
op_assign
(paren
(paren
id|tempal
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x03
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRTVCLK
id|tempal
op_assign
id|tempal
op_amp
l_int|0x03F
suffix:semicolon
)brace
id|VCLKLen
op_assign
id|GetVCLKLen
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|tempal
op_assign
id|tempal
op_star
id|VCLKLen
suffix:semicolon
id|tempal
op_assign
id|tempal
op_plus
(paren
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x208
)paren
)paren
)paren
suffix:semicolon
singleline_comment|// VCLKData
r_return
(paren
(paren
id|USHORT
)paren
id|tempal
)paren
suffix:semicolon
)brace
DECL|function|GetColorTh
id|USHORT
id|GetColorTh
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
id|GetColorDepth
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|temp
op_increment
suffix:semicolon
)brace
r_return
id|temp
suffix:semicolon
)brace
DECL|function|GetMCLK
id|USHORT
id|GetMCLK
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempmclkptr
suffix:semicolon
id|USHORT
id|tempmclk
suffix:semicolon
id|tempmclkptr
op_assign
id|GetMCLKPtr
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|tempmclk
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|tempmclkptr
op_plus
l_int|0x03
)paren
)paren
suffix:semicolon
singleline_comment|//di+3
r_return
id|tempmclk
suffix:semicolon
)brace
DECL|function|GetMCLKPtr
id|USHORT
id|GetMCLKPtr
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempdi
suffix:semicolon
id|USHORT
id|tempdramtype
comma
id|tempax
suffix:semicolon
id|tempdi
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x20C
)paren
)paren
suffix:semicolon
singleline_comment|// MCLKData
id|tempdramtype
op_assign
id|GetDRAMType
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|tempax
op_assign
l_int|5
op_star
id|tempdramtype
suffix:semicolon
id|tempdi
op_assign
id|tempdi
op_plus
id|tempax
suffix:semicolon
r_return
(paren
id|tempdi
)paren
suffix:semicolon
)brace
DECL|function|GetDRAMType
id|USHORT
id|GetDRAMType
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tsoftsetting
comma
id|temp3
suffix:semicolon
id|tsoftsetting
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x52
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tsoftsetting
op_amp
id|SoftDramType
)paren
)paren
(brace
id|temp3
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x3A
)paren
suffix:semicolon
id|tsoftsetting
op_assign
id|temp3
suffix:semicolon
)brace
id|tsoftsetting
op_assign
id|tsoftsetting
op_amp
l_int|0x07
suffix:semicolon
r_return
id|tsoftsetting
suffix:semicolon
)brace
DECL|function|CalcDelay
r_static
id|USHORT
id|CalcDelay
c_func
(paren
)paren
(brace
id|USHORT
id|tempal
comma
id|tempah
comma
id|temp1
comma
id|tempbx
suffix:semicolon
id|USHORT
id|ThTiming
(braket
l_int|8
)braket
op_assign
initialization_block
suffix:semicolon
id|USHORT
id|ThLowB
(braket
l_int|24
)braket
op_assign
initialization_block
suffix:semicolon
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x18
)paren
suffix:semicolon
singleline_comment|//SR_18
id|tempah
op_assign
id|tempah
op_amp
l_int|0x62
suffix:semicolon
id|tempah
op_assign
id|tempah
op_rshift
l_int|1
suffix:semicolon
id|tempal
op_assign
id|tempah
suffix:semicolon
id|tempah
op_assign
id|tempah
op_rshift
l_int|3
suffix:semicolon
id|tempal
op_assign
id|tempal
op_or
id|tempah
suffix:semicolon
id|tempal
op_assign
id|tempal
op_amp
l_int|0x07
suffix:semicolon
id|temp1
op_assign
id|ThTiming
(braket
id|tempal
)braket
suffix:semicolon
singleline_comment|//temp1-&gt;cl
id|tempbx
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x16
)paren
suffix:semicolon
singleline_comment|//SR_16
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|6
suffix:semicolon
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x14
)paren
suffix:semicolon
singleline_comment|//SR_14
id|tempah
op_assign
(paren
(paren
id|tempah
op_rshift
l_int|4
)paren
op_amp
l_int|0x0C
)paren
suffix:semicolon
id|tempbx
op_assign
(paren
(paren
id|tempbx
op_or
id|tempah
)paren
op_lshift
l_int|1
)paren
suffix:semicolon
id|tempal
op_assign
id|ThLowB
(braket
id|tempbx
op_plus
l_int|1
)braket
op_star
id|temp1
suffix:semicolon
id|tempbx
op_assign
id|ThLowB
(braket
id|tempbx
)braket
suffix:semicolon
id|tempbx
op_assign
id|tempal
op_plus
id|tempbx
suffix:semicolon
r_return
id|tempbx
suffix:semicolon
)brace
DECL|function|GetVCLK2Ptr
id|USHORT
id|GetVCLK2Ptr
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempal
suffix:semicolon
id|USHORT
id|LCDXlat1VCLK
(braket
l_int|4
)braket
op_assign
initialization_block
suffix:semicolon
id|USHORT
id|LCDXlat2VCLK
(braket
l_int|4
)braket
op_assign
initialization_block
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_CRT2CRTC
)brace
r_else
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// di+Ext_CRT2CRTC
)brace
id|tempal
op_assign
id|tempal
op_rshift
l_int|6
suffix:semicolon
r_if
c_cond
(paren
id|LCDResInfo
op_ne
id|Panel1024x768
)paren
(brace
id|tempal
op_assign
id|LCDXlat2VCLK
(braket
id|tempal
)braket
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|LCDXlat1VCLK
(braket
id|tempal
)braket
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempal
op_assign
id|tempal
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|SetFlag
op_amp
id|RPLLDIV2XO
)paren
(brace
id|tempal
op_assign
id|TVVCLKDIV2
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|TVVCLK
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempal
op_assign
(paren
id|UCHAR
)paren
id|GetReg2
c_func
(paren
(paren
id|USHORT
)paren
(paren
id|P3ca
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
singleline_comment|//&t;Port 3cch
id|tempal
op_assign
(paren
(paren
id|tempal
op_rshift
l_int|2
)paren
op_amp
l_int|0x03
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ModeNo
OG
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x03
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRTVCLK
id|tempal
op_assign
id|tempal
op_amp
l_int|0x03F
suffix:semicolon
)brace
)brace
id|VCLKLen
op_assign
id|GetVCLKLen
c_func
(paren
id|ROMAddr
)paren
suffix:semicolon
id|tempal
op_assign
id|tempal
op_star
id|VCLKLen
suffix:semicolon
id|tempal
op_assign
id|tempal
op_plus
(paren
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x208
)paren
)paren
)paren
suffix:semicolon
singleline_comment|// VCLKData
r_return
(paren
(paren
id|USHORT
)paren
id|tempal
)paren
suffix:semicolon
)brace
DECL|function|GetVCLKLen
id|USHORT
id|GetVCLKLen
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|VCLKDataStart
comma
id|vclklabel
comma
id|temp
suffix:semicolon
id|VCLKDataStart
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x208
)paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|temp
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
id|temp
op_increment
)paren
(brace
id|vclklabel
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|VCLKDataStart
op_plus
id|temp
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|vclklabel
op_eq
id|VCLKStartFreq
)paren
(brace
id|temp
op_assign
id|temp
op_plus
l_int|2
suffix:semicolon
r_return
id|temp
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|SetCRT2Sync
id|VOID
id|SetCRT2Sync
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|temp1
comma
id|tempah
op_assign
l_int|0
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
singleline_comment|//LVDS
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempah
op_assign
id|LCDInfo
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|LCDSync
)paren
)paren
(brace
id|temp
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_InfoFlag
id|tempah
op_assign
(paren
id|temp
op_rshift
l_int|8
)paren
op_amp
l_int|0x0C0
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0C0
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_InfoFlag
id|tempah
op_assign
(paren
id|temp
op_rshift
l_int|8
)paren
op_amp
l_int|0x0C0
suffix:semicolon
)brace
id|temp1
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x19
)paren
suffix:semicolon
singleline_comment|//part1port index 02
id|temp1
op_assign
(paren
id|temp1
op_amp
(paren
op_complement
l_int|0x0C0
)paren
)paren
op_or
id|tempah
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x19
comma
id|temp1
)paren
suffix:semicolon
)brace
DECL|function|GetCRT1Ptr
id|VOID
id|GetCRT1Ptr
c_func
(paren
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|temprefcrt1
suffix:semicolon
id|USHORT
id|temp
suffix:semicolon
id|temp
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x02
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRT1CRTC
id|temp
op_assign
id|temp
op_amp
l_int|0x03F
suffix:semicolon
id|temp
op_assign
id|temp
op_star
id|CRT1Len
suffix:semicolon
id|temprefcrt1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x204
)paren
)paren
suffix:semicolon
singleline_comment|// Get CRT1Table
id|REFIndex
op_assign
id|temprefcrt1
op_plus
id|temp
suffix:semicolon
singleline_comment|// di-&gt;CRT1Table+Ext_CRT1CRTC*CRT1Len
)brace
DECL|function|GetVGAHT2
id|USHORT
id|GetVGAHT2
c_func
(paren
)paren
(brace
r_int
r_int
id|temp1
comma
id|temp2
suffix:semicolon
id|temp1
op_assign
(paren
id|VGAVT
op_minus
id|VGAVDE
)paren
op_star
id|RVBHCMAX
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0x0FFFF
suffix:semicolon
id|temp2
op_assign
(paren
id|VT
op_minus
id|VDE
)paren
op_star
id|RVBHCFACT
suffix:semicolon
id|temp2
op_assign
id|temp2
op_amp
l_int|0x0FFFF
suffix:semicolon
id|temp2
op_assign
id|temp2
op_star
id|HT
suffix:semicolon
id|temp2
op_assign
id|temp2
op_div
id|temp1
suffix:semicolon
r_return
(paren
id|USHORT
)paren
id|temp2
suffix:semicolon
)brace
DECL|function|SetGroup2
id|VOID
id|SetGroup2
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempah
comma
id|tempbl
comma
id|tempbh
comma
id|tempcl
comma
id|i
comma
id|j
comma
id|tempcx
comma
id|pushcx
comma
id|tempbx
comma
id|tempax
suffix:semicolon
id|USHORT
id|tempmodeflag
comma
id|tempflowflag
suffix:semicolon
id|UCHAR
op_star
id|temp1
suffix:semicolon
id|USHORT
op_star
id|temp2
suffix:semicolon
id|USHORT
id|pushbx
suffix:semicolon
id|USHORT
id|Part2Port
suffix:semicolon
r_int
r_int
id|longtemp
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_10
suffix:semicolon
id|tempcx
op_assign
id|VBInfo
suffix:semicolon
id|tempah
op_assign
id|VBInfo
op_amp
l_int|0x0FF
suffix:semicolon
id|tempbl
op_assign
id|VBInfo
op_amp
l_int|0x0FF
suffix:semicolon
id|tempbh
op_assign
id|VBInfo
op_amp
l_int|0x0FF
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbl
op_amp
l_int|0xFF
)paren
op_or
(paren
id|tempbh
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempbl
op_assign
id|tempbl
op_amp
l_int|0x10
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbh
op_amp
l_int|0x04
)paren
op_lshift
l_int|1
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_amp
l_int|0x08
)paren
op_rshift
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempbh
suffix:semicolon
id|tempbl
op_assign
id|tempbl
op_rshift
l_int|3
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempbl
suffix:semicolon
id|tempah
op_assign
id|tempah
op_xor
l_int|0x0C
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|temp1
op_assign
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x0F1
)paren
suffix:semicolon
singleline_comment|//PALPhase
id|temp2
op_assign
id|PALTiming
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x10
suffix:semicolon
id|temp1
op_assign
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x0ED
)paren
suffix:semicolon
singleline_comment|//NTSCPhase
id|temp2
op_assign
id|NTSCTiming
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x0
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x31
suffix:semicolon
id|i
op_le
l_int|0x34
suffix:semicolon
id|i
op_increment
comma
id|temp1
op_increment
)paren
(brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
id|i
comma
op_star
(paren
id|UCHAR
op_star
)paren
id|temp1
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x01
comma
id|j
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x2D
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
id|i
comma
id|temp2
(braket
id|j
)braket
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x39
suffix:semicolon
id|i
op_le
l_int|0x45
suffix:semicolon
id|i
op_increment
comma
id|j
op_increment
)paren
(brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
id|i
comma
id|temp2
(braket
id|j
)braket
)paren
suffix:semicolon
singleline_comment|//di-&gt;temp2[j]
)brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x0A
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|NewFlickerMode
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x35
comma
id|RY1COE
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x36
comma
id|RY2COE
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x37
comma
id|RY3COE
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x38
comma
id|RY4COE
)paren
suffix:semicolon
id|tempcx
op_assign
id|HT
op_minus
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x1B
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x1D
comma
op_complement
l_int|0x0F
comma
(paren
id|UCHAR
)paren
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|HT
op_rshift
l_int|1
suffix:semicolon
id|pushcx
op_assign
id|tempcx
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
l_int|7
suffix:semicolon
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x22
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|temp2
(braket
id|j
)braket
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x24
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x25
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF
)paren
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x29
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
id|temp2
(braket
op_increment
id|j
)braket
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x27
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x28
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_plus
l_int|8
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x2A
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|pushcx
suffix:semicolon
singleline_comment|//pop cx
id|tempcx
op_assign
id|tempcx
op_minus
id|temp2
(braket
op_increment
id|j
)braket
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x2D
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_minus
l_int|11
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempax
op_assign
id|GetVGAHT2
c_func
(paren
)paren
suffix:semicolon
id|tempcx
op_assign
id|tempax
op_minus
l_int|1
suffix:semicolon
)brace
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x2E
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|VDE
suffix:semicolon
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|360
)paren
(brace
id|tempbx
op_assign
l_int|746
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|375
)paren
(brace
id|tempbx
op_assign
l_int|746
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VGAVDE
op_eq
l_int|405
)paren
(brace
id|tempbx
op_assign
l_int|853
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempbx
op_assign
id|tempbx
op_minus
l_int|2
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x2F
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempbh
op_assign
(paren
id|tempbh
op_lshift
l_int|6
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempbh
suffix:semicolon
singleline_comment|//assuming &lt;&lt;ifndef&gt;&gt; hivisiontv
id|tempah
op_assign
id|tempah
op_or
l_int|0x10
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToSVIDEO
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x20
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x30
comma
id|tempah
)paren
suffix:semicolon
id|tempbh
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|tempmodeflag
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
id|tempflowflag
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempmodeflag
op_amp
id|HalfDCLK
)paren
)paren
(brace
id|tempcx
op_assign
id|VGAHDE
suffix:semicolon
r_if
c_cond
(paren
id|tempcx
op_ge
id|HDE
)paren
(brace
id|tempbh
op_assign
id|tempbh
op_or
l_int|0x20
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempbh
op_lshift
l_int|8
)paren
op_or
(paren
id|tempbx
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0
suffix:semicolon
)brace
)brace
id|tempcx
op_assign
l_int|0x0101
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbh
op_amp
l_int|0x20
)paren
)paren
(brace
r_if
c_cond
(paren
id|tempmodeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempcl
op_assign
(paren
(paren
id|tempcx
op_amp
l_int|0xFF
)paren
op_lshift
l_int|1
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempcx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_or
id|tempcl
suffix:semicolon
)brace
id|pushbx
op_assign
id|tempbx
suffix:semicolon
id|tempax
op_assign
id|VGAHDE
suffix:semicolon
id|tempbx
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|longtemp
op_assign
id|tempax
op_star
id|tempbx
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|longtemp
op_assign
id|longtemp
op_div
id|tempcx
suffix:semicolon
id|longtemp
op_assign
id|longtemp
op_star
l_int|8
op_star
l_int|1024
suffix:semicolon
id|tempax
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|longtemp
)paren
op_div
id|HDE
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempax
op_star
id|HDE
OL
id|longtemp
)paren
(brace
id|tempax
op_assign
id|tempax
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|tempax
suffix:semicolon
)brace
id|tempbx
op_assign
id|pushbx
suffix:semicolon
id|tempah
op_assign
(paren
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x01F
suffix:semicolon
id|tempbh
op_assign
id|tempbh
op_or
id|tempah
suffix:semicolon
id|tempah
op_assign
id|tempax
op_amp
l_int|0xFF
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x44
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|tempbh
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x45
comma
op_complement
l_int|0x03F
comma
id|tempah
)paren
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_return
suffix:semicolon
)brace
id|tempah
op_assign
l_int|0x01
suffix:semicolon
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1280x1024
)paren
(brace
r_if
c_cond
(paren
id|ModeType
op_eq
id|ModeEGA
)paren
(brace
r_if
c_cond
(paren
id|VGAHDE
op_ge
l_int|1024
)paren
(brace
id|tempah
op_assign
l_int|0x02
suffix:semicolon
)brace
)brace
)brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|HDE
op_minus
l_int|1
suffix:semicolon
singleline_comment|//RHACTE=HDE-1
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x2C
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x2B
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|VDE
op_minus
l_int|1
suffix:semicolon
singleline_comment|//RTVACTEO=(VDE-1)&amp;0xFF
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x03
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_amp
l_int|0x07
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x0C
comma
op_complement
l_int|0x07
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|VT
op_minus
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RVTVT=VT-1
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x19
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|5
)paren
op_amp
l_int|0xFF
suffix:semicolon
r_if
c_cond
(paren
id|LCDInfo
op_amp
id|LCDRGB18Bit
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x10
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x1A
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
id|tempbx
op_assign
l_int|768
suffix:semicolon
)brace
r_else
(brace
id|tempbx
op_assign
l_int|1024
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempbx
op_eq
id|VDE
)paren
(brace
id|tempax
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempax
op_assign
id|tempbx
suffix:semicolon
id|tempax
op_assign
(paren
id|tempax
op_minus
id|VDE
)paren
op_rshift
l_int|1
suffix:semicolon
)brace
id|tempcx
op_assign
id|tempcx
op_minus
id|tempax
suffix:semicolon
singleline_comment|//lcdvdes
id|tempbx
op_assign
id|tempbx
op_minus
id|tempax
suffix:semicolon
singleline_comment|//lcdvdee
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RVEQ1EQ=lcdvdes
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x05
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RVEQ2EQ=lcdvdee
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x06
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|3
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
singleline_comment|//RTVACTSE=(lcdvdes&amp;0x700&gt;&gt;8)+(lcdvdee&amp;0x700&gt;&gt;5);
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x02
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
id|VT
op_minus
id|VDE
)paren
op_rshift
l_int|4
suffix:semicolon
singleline_comment|//(VT-VDE)&gt;&gt;4
id|tempbx
op_assign
(paren
id|VT
op_plus
id|VDE
)paren
op_rshift
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RTVACTEE=lcdvrs
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x04
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
op_plus
l_int|1
suffix:semicolon
id|tempbl
op_assign
(paren
id|tempbx
op_amp
l_int|0x0F
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempbl
suffix:semicolon
singleline_comment|//RTVACTSO=lcdvrs&amp;0x700&gt;&gt;4+lcdvre
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x09
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0xF0
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x09
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x0A
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0xF0
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
(paren
id|HT
op_minus
id|HDE
)paren
op_rshift
l_int|2
suffix:semicolon
singleline_comment|//(HT-HDE)&gt;&gt;2
id|tempbx
op_assign
(paren
id|HDE
op_plus
l_int|7
)paren
suffix:semicolon
singleline_comment|//lcdhdee
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RHEQPLE=lcdhdee
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x23
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x25
comma
op_complement
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x1F
comma
l_int|0x07
)paren
suffix:semicolon
singleline_comment|//RHBLKE=lcdhdes
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x20
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0F
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x20
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RHBURSTS=lcdhrs
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x1C
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x1D
comma
op_complement
l_int|0x0F0
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_plus
id|tempcx
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
singleline_comment|//RHSYEXP2S=lcdhre
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x21
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x17
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0xFB
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x17
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x18
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0xDF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x18
comma
id|tempah
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
DECL|function|SetGroup3
id|VOID
id|SetGroup3
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|i
suffix:semicolon
id|USHORT
op_star
id|tempdi
suffix:semicolon
id|USHORT
id|Part3Port
suffix:semicolon
id|Part3Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_12
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetPALTV
)paren
(brace
id|tempdi
op_assign
id|PALGroup3Data
suffix:semicolon
)brace
r_else
(brace
id|tempdi
op_assign
id|NTSCGroup3Data
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|0x3E
suffix:semicolon
id|i
op_increment
)paren
(brace
id|SetReg1
c_func
(paren
id|Part3Port
comma
id|i
comma
id|tempdi
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
DECL|function|SetGroup4
id|VOID
id|SetGroup4
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|Part4Port
suffix:semicolon
id|USHORT
id|tempax
comma
id|tempah
comma
id|tempcx
comma
id|tempbx
comma
id|tempbh
comma
id|tempch
comma
id|tempmodeflag
suffix:semicolon
r_int
r_int
id|tempebx
comma
id|tempeax
comma
id|templong
suffix:semicolon
id|Part4Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
suffix:semicolon
id|tempax
op_assign
l_int|0x0c
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|SetFlag
op_amp
id|TVSimuMode
)paren
)paren
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|RPLLDIV2XO
suffix:semicolon
id|tempax
op_assign
id|tempax
op_or
l_int|0x04000
suffix:semicolon
)brace
)brace
r_else
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|RPLLDIV2XO
suffix:semicolon
id|tempax
op_assign
id|tempax
op_or
l_int|0x04000
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|LCDResInfo
op_ne
id|Panel1024x768
)paren
(brace
id|tempax
op_assign
id|tempax
op_or
l_int|0x08000
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|tempax
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0C
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
id|RVBHCFACT
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x13
comma
id|tempah
)paren
suffix:semicolon
id|tempbx
op_assign
id|RVBHCMAX
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x14
comma
id|tempah
)paren
suffix:semicolon
id|tempbh
op_assign
(paren
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|7
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempcx
op_assign
id|VGAHT
op_minus
l_int|1
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x16
comma
id|tempah
)paren
suffix:semicolon
id|tempch
op_assign
(paren
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
op_lshift
l_int|3
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempbh
op_assign
id|tempbh
op_or
id|tempch
suffix:semicolon
id|tempcx
op_assign
id|VGAVT
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_minus
l_int|5
suffix:semicolon
)brace
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x17
comma
id|tempah
)paren
suffix:semicolon
id|tempbh
op_assign
id|tempbh
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|tempah
op_assign
id|tempbh
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x15
comma
id|tempah
)paren
suffix:semicolon
id|tempcx
op_assign
id|VBInfo
suffix:semicolon
id|tempbx
op_assign
id|VGAHDE
suffix:semicolon
id|tempmodeflag
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|tempmodeflag
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_rshift
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempah
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tempbx
OG
l_int|800
)paren
(brace
id|tempah
op_assign
l_int|0x60
suffix:semicolon
)brace
)brace
r_else
(brace
id|tempah
op_assign
l_int|0x080
suffix:semicolon
)brace
r_if
c_cond
(paren
id|LCDResInfo
op_ne
id|Panel1280x1024
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x0A
suffix:semicolon
)brace
id|SetRegANDOR
c_func
(paren
id|Part4Port
comma
l_int|0x0E
comma
op_complement
l_int|0xEF
comma
id|tempah
)paren
suffix:semicolon
id|tempebx
op_assign
id|VDE
suffix:semicolon
id|tempcx
op_assign
id|RVBHRS
suffix:semicolon
id|tempah
op_assign
id|tempcx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x18
comma
id|tempah
)paren
suffix:semicolon
id|tempeax
op_assign
id|VGAVDE
suffix:semicolon
id|tempcx
op_assign
id|tempcx
op_or
l_int|0x04000
suffix:semicolon
id|tempeax
op_assign
id|tempeax
op_minus
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|tempeax
OL
l_int|0
)paren
(brace
id|tempcx
op_assign
id|tempcx
op_xor
(paren
l_int|0x04000
)paren
suffix:semicolon
id|tempeax
op_assign
id|VGAVDE
suffix:semicolon
)brace
id|templong
op_assign
(paren
id|tempeax
op_star
l_int|256
op_star
l_int|1024
)paren
op_div
id|tempebx
suffix:semicolon
r_if
c_cond
(paren
id|tempeax
op_star
l_int|256
op_star
l_int|1024
op_minus
id|templong
op_star
id|tempebx
OG
l_int|0
)paren
(brace
id|tempebx
op_assign
id|templong
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|tempebx
op_assign
id|templong
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x1B
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|USHORT
)paren
(paren
(paren
id|tempebx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x1A
comma
id|tempah
)paren
suffix:semicolon
id|tempebx
op_assign
id|tempebx
op_rshift
l_int|16
suffix:semicolon
id|tempah
op_assign
(paren
id|USHORT
)paren
(paren
id|tempebx
op_amp
l_int|0xFF
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempah
op_lshift
l_int|4
)paren
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
(paren
(paren
id|tempcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x19
comma
id|tempah
)paren
suffix:semicolon
id|SetCRT2VCLK
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
DECL|function|SetCRT2VCLK
id|VOID
id|SetCRT2VCLK
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|vclk2ptr
suffix:semicolon
id|USHORT
id|tempah
comma
id|temp1
suffix:semicolon
id|USHORT
id|Part4Port
suffix:semicolon
id|Part4Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
suffix:semicolon
id|vclk2ptr
op_assign
id|GetVCLK2Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0A
comma
l_int|0x01
)paren
suffix:semicolon
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|vclk2ptr
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|//di+1
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0B
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|vclk2ptr
op_plus
l_int|0x00
)paren
)paren
suffix:semicolon
singleline_comment|//di
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0A
comma
id|tempah
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x12
comma
l_int|0x00
)paren
suffix:semicolon
id|tempah
op_assign
l_int|0x08
suffix:semicolon
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x020
suffix:semicolon
)brace
id|temp1
op_assign
id|GetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x12
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|temp1
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x12
comma
id|tempah
)paren
suffix:semicolon
)brace
DECL|function|SetGroup5
id|VOID
id|SetGroup5
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|Part5Port
suffix:semicolon
id|USHORT
id|Pindex
comma
id|Pdata
suffix:semicolon
id|Part5Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
op_plus
l_int|2
suffix:semicolon
id|Pindex
op_assign
id|Part5Port
suffix:semicolon
id|Pdata
op_assign
id|Part5Port
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ModeType
op_eq
id|ModeVGA
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
(paren
id|SetInSlaveMode
op_or
id|LoadDACFlag
op_or
id|CRT2DisplayFlag
)paren
)paren
)paren
(brace
id|EnableCRT2
c_func
(paren
)paren
suffix:semicolon
id|LoadDAC2
c_func
(paren
id|ROMAddr
comma
id|Part5Port
)paren
suffix:semicolon
)brace
)brace
r_return
suffix:semicolon
)brace
DECL|function|EnableCRT2
id|VOID
id|EnableCRT2
c_func
(paren
)paren
(brace
id|USHORT
id|temp1
suffix:semicolon
id|temp1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1E
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_or
l_int|0x20
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1E
comma
id|temp1
)paren
suffix:semicolon
singleline_comment|//SR 1E
)brace
DECL|function|LoadDAC2
id|VOID
id|LoadDAC2
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|Part5Port
)paren
(brace
id|USHORT
id|data
comma
id|data2
suffix:semicolon
id|USHORT
id|time
comma
id|i
comma
id|j
comma
id|k
suffix:semicolon
id|USHORT
id|m
comma
id|n
comma
id|o
suffix:semicolon
id|USHORT
id|si
comma
id|di
comma
id|bx
comma
id|dl
suffix:semicolon
id|USHORT
id|al
comma
id|ah
comma
id|dh
suffix:semicolon
id|USHORT
op_star
id|table
op_assign
id|VGA_DAC
suffix:semicolon
id|USHORT
id|Pindex
comma
id|Pdata
suffix:semicolon
id|Pindex
op_assign
id|Part5Port
suffix:semicolon
id|Pdata
op_assign
id|Part5Port
op_plus
l_int|1
suffix:semicolon
id|data
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
id|data
op_assign
id|data
op_amp
id|DACInfoFlag
suffix:semicolon
id|time
op_assign
l_int|64
suffix:semicolon
r_if
c_cond
(paren
id|data
op_eq
l_int|0x00
)paren
(brace
id|table
op_assign
id|MDA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x08
)paren
(brace
id|table
op_assign
id|CGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x10
)paren
(brace
id|table
op_assign
id|EGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_eq
l_int|0x18
)paren
(brace
id|time
op_assign
l_int|256
suffix:semicolon
id|table
op_assign
id|VGA_DAC
suffix:semicolon
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
id|j
op_assign
l_int|16
suffix:semicolon
)brace
r_else
id|j
op_assign
id|time
suffix:semicolon
singleline_comment|//SetReg3(P3c6,0xFF);
id|SetReg3
c_func
(paren
id|Pindex
comma
l_int|0x00
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|j
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|data2
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|data
op_amp
l_int|0x01
)paren
(brace
id|data2
op_assign
l_int|0x2A
suffix:semicolon
)brace
r_if
c_cond
(paren
id|data
op_amp
l_int|0x02
)paren
(brace
id|data2
op_assign
id|data2
op_plus
l_int|0x15
suffix:semicolon
)brace
id|SetReg3
c_func
(paren
id|Pdata
comma
id|data2
)paren
suffix:semicolon
id|data
op_assign
id|data
op_rshift
l_int|2
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|time
op_eq
l_int|256
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|16
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|data
op_assign
id|table
(braket
id|i
)braket
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|3
suffix:semicolon
id|k
op_increment
)paren
(brace
id|SetReg3
c_func
(paren
id|Pdata
comma
id|data
)paren
suffix:semicolon
)brace
)brace
id|si
op_assign
l_int|32
suffix:semicolon
r_for
c_loop
(paren
id|m
op_assign
l_int|0
suffix:semicolon
id|m
OL
l_int|9
suffix:semicolon
id|m
op_increment
)paren
(brace
id|di
op_assign
id|si
suffix:semicolon
id|bx
op_assign
id|si
op_plus
l_int|0x04
suffix:semicolon
id|dl
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|n
op_assign
l_int|0
suffix:semicolon
id|n
OL
l_int|3
suffix:semicolon
id|n
op_increment
)paren
(brace
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|5
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|si
op_increment
suffix:semicolon
id|WriteDAC2
c_func
(paren
id|Pdata
comma
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
singleline_comment|// for 5
id|si
op_assign
id|si
op_minus
l_int|2
suffix:semicolon
r_for
c_loop
(paren
id|o
op_assign
l_int|0
suffix:semicolon
id|o
OL
l_int|3
suffix:semicolon
id|o
op_increment
)paren
(brace
id|dh
op_assign
id|table
(braket
id|bx
)braket
suffix:semicolon
id|ah
op_assign
id|table
(braket
id|di
)braket
suffix:semicolon
id|al
op_assign
id|table
(braket
id|si
)braket
suffix:semicolon
id|si
op_decrement
suffix:semicolon
id|WriteDAC2
c_func
(paren
id|Pdata
comma
id|dl
comma
id|ah
comma
id|al
comma
id|dh
)paren
suffix:semicolon
)brace
singleline_comment|// for 3
id|dl
op_increment
suffix:semicolon
)brace
singleline_comment|// for 3
id|si
op_assign
id|si
op_plus
l_int|5
suffix:semicolon
)brace
singleline_comment|// for 9
)brace
)brace
DECL|function|WriteDAC2
id|VOID
id|WriteDAC2
c_func
(paren
id|USHORT
id|Pdata
comma
id|USHORT
id|dl
comma
id|USHORT
id|ah
comma
id|USHORT
id|al
comma
id|USHORT
id|dh
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|bh
comma
id|bl
suffix:semicolon
id|bh
op_assign
id|ah
suffix:semicolon
id|bl
op_assign
id|al
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_ne
l_int|0
)paren
(brace
id|temp
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|dl
op_eq
l_int|1
)paren
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|dh
suffix:semicolon
id|dh
op_assign
id|temp
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
id|bl
suffix:semicolon
id|bl
op_assign
id|bh
suffix:semicolon
id|bh
op_assign
id|temp
suffix:semicolon
)brace
)brace
id|SetReg3
c_func
(paren
id|Pdata
comma
(paren
id|USHORT
)paren
id|dh
)paren
suffix:semicolon
id|SetReg3
c_func
(paren
id|Pdata
comma
(paren
id|USHORT
)paren
id|bh
)paren
suffix:semicolon
id|SetReg3
c_func
(paren
id|Pdata
comma
(paren
id|USHORT
)paren
id|bl
)paren
suffix:semicolon
)brace
DECL|function|LockCRT2
id|VOID
id|LockCRT2
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|Part1Port
suffix:semicolon
id|USHORT
id|Part4Port
suffix:semicolon
id|USHORT
id|temp1
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
id|Part4Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
suffix:semicolon
id|temp1
op_assign
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x24
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_amp
l_int|0xFE
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x24
comma
id|temp1
)paren
suffix:semicolon
)brace
DECL|function|SetLockRegs
id|VOID
id|SetLockRegs
c_func
(paren
)paren
(brace
id|USHORT
id|temp1
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToRAMDAC
)paren
)paren
)paren
(brace
id|VBLongWait
c_func
(paren
)paren
suffix:semicolon
id|temp1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x32
)paren
suffix:semicolon
id|temp1
op_assign
id|temp1
op_or
l_int|0x20
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x32
comma
id|temp1
)paren
suffix:semicolon
id|VBLongWait
c_func
(paren
)paren
suffix:semicolon
)brace
)brace
DECL|function|EnableBridge
id|VOID
id|EnableBridge
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|part2_02
comma
id|part2_05
suffix:semicolon
id|USHORT
id|Part2Port
comma
id|Part1Port
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_10
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
id|part2_02
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x02
)paren
suffix:semicolon
id|part2_05
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x05
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x02
comma
l_int|0x38
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x05
comma
l_int|0xFF
)paren
suffix:semicolon
id|LongWait
c_func
(paren
)paren
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part2Port
comma
l_int|0x00
comma
op_complement
l_int|0x0E0
comma
l_int|0x020
)paren
suffix:semicolon
id|WaitVBRetrace
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x02
comma
id|part2_02
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x05
comma
id|part2_05
)paren
suffix:semicolon
)brace
r_else
(brace
id|EnableCRT2
c_func
(paren
)paren
suffix:semicolon
id|UnLockCRT2
c_func
(paren
id|BaseAddr
)paren
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part1Port
comma
l_int|0x02
comma
op_complement
l_int|0x040
comma
l_int|0x0
)paren
suffix:semicolon
)brace
)brace
DECL|function|GetLockInfo
id|USHORT
id|GetLockInfo
c_func
(paren
id|USHORT
id|pattern
)paren
(brace
id|USHORT
id|temp1
suffix:semicolon
id|temp1
op_assign
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x36
)paren
suffix:semicolon
r_return
id|temp1
op_amp
id|pattern
suffix:semicolon
)brace
DECL|function|GetVBInfo
id|VOID
id|GetVBInfo
c_func
(paren
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|flag1
comma
id|tempbx
comma
id|tempbl
comma
id|tempbh
comma
id|tempah
suffix:semicolon
id|SetFlag
op_assign
l_int|0
suffix:semicolon
id|tempbx
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
id|tempbl
op_assign
id|tempbx
op_amp
id|ModeInfoFlag
suffix:semicolon
id|ModeType
op_assign
id|tempbl
suffix:semicolon
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//call BridgeisOn
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag1
op_amp
l_int|0x20
)paren
)paren
(brace
id|VBInfo
op_assign
id|CRT2DisplayFlag
suffix:semicolon
r_return
suffix:semicolon
)brace
id|tempbl
op_assign
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x30
)paren
suffix:semicolon
id|tempbh
op_assign
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x31
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbl
op_amp
l_int|0x07C
)paren
)paren
(brace
id|VBInfo
op_assign
id|CRT2DisplayFlag
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
singleline_comment|//for LVDS
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbl
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
id|VBInfo
op_assign
id|CRT2DisplayFlag
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
singleline_comment|//for 301
r_if
c_cond
(paren
id|tempbl
op_amp
id|SetCRT2ToRAMDAC
)paren
(brace
id|tempbl
op_assign
id|tempbl
op_amp
(paren
id|SetCRT2ToRAMDAC
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbl
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbl
op_assign
id|tempbl
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbl
op_amp
id|SetCRT2ToSCART
)paren
(brace
id|tempbl
op_assign
id|tempbl
op_amp
(paren
id|SetCRT2ToSCART
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|tempbl
op_amp
id|SetCRT2ToHiVisionTV
)paren
(brace
id|tempbl
op_assign
id|tempbl
op_amp
(paren
id|SetCRT2ToHiVisionTV
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
singleline_comment|//for LVDS
r_if
c_cond
(paren
id|tempbl
op_amp
id|SetCRT2ToLCD
)paren
(brace
id|tempbl
op_assign
id|tempbl
op_amp
(paren
id|SetCRT2ToLCD
op_or
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
suffix:semicolon
)brace
)brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x31
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
(paren
id|CRT2DisplayFlag
op_rshift
l_int|8
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbl
op_amp
(paren
id|SwitchToCRT2
op_or
id|SetSimuScanMode
)paren
)paren
)paren
(brace
id|tempbx
op_assign
id|SetSimuScanMode
op_or
id|CRT2DisplayFlag
suffix:semicolon
id|tempbh
op_assign
(paren
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
)paren
suffix:semicolon
id|tempbl
op_assign
id|tempbx
op_amp
l_int|0xFF
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempbh
op_amp
(paren
id|DriverMode
op_rshift
l_int|8
)paren
)paren
)paren
(brace
id|tempbl
op_assign
id|tempbl
op_or
id|SetSimuScanMode
suffix:semicolon
)brace
id|VBInfo
op_assign
id|tempbl
op_or
(paren
id|tempbh
op_lshift
l_int|8
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetSimuScanMode
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SwitchToCRT2
)paren
)paren
(brace
r_if
c_cond
(paren
id|BridgeIsEnable
c_func
(paren
id|BaseAddr
)paren
)paren
(brace
r_if
c_cond
(paren
id|BridgeInSlave
c_func
(paren
)paren
)paren
(brace
id|VBInfo
op_assign
id|VBInfo
op_or
id|SetSimuScanMode
suffix:semicolon
)brace
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
)paren
)paren
)paren
)paren
(brace
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|DriverMode
)paren
)paren
(brace
id|VBInfo
op_assign
id|VBInfo
op_or
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetNotSimuTVMode
)paren
)paren
)paren
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|TVSimuMode
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
id|flag1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag1
op_amp
(paren
id|CRT2Mode
op_or
id|CRT2DisplayFlag
)paren
)paren
)paren
(brace
id|VBInfo
op_assign
id|VBInfo
op_or
id|SetInSlaveMode
suffix:semicolon
r_if
c_cond
(paren
(paren
id|VBInfo
op_amp
id|SetCRT2ToTV
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetNotSimuTVMode
)paren
)paren
)paren
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|TVSimuMode
suffix:semicolon
)brace
)brace
)brace
DECL|function|BridgeIsEnable
id|BOOLEAN
id|BridgeIsEnable
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|flag1
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//call BridgeisOn
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag1
op_amp
l_int|0x20
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag1
op_amp
l_int|0x0a0
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|BridgeInSlave
id|BOOLEAN
id|BridgeInSlave
c_func
(paren
)paren
(brace
id|USHORT
id|flag1
suffix:semicolon
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x31
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag1
op_amp
(paren
id|SetInSlaveMode
op_rshift
l_int|8
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
DECL|function|GetLCDResInfo
id|BOOLEAN
id|GetLCDResInfo
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|P3d4
)paren
(brace
id|USHORT
id|tempah
comma
id|tempbh
comma
id|tempflag
suffix:semicolon
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x36
)paren
suffix:semicolon
id|tempbh
op_assign
id|tempah
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|tempah
OG
id|Panel1280x1024
)paren
(brace
id|tempah
op_assign
id|Panel1024x768
suffix:semicolon
)brace
id|LCDResInfo
op_assign
id|tempah
suffix:semicolon
id|tempbh
op_assign
id|tempbh
op_rshift
l_int|4
suffix:semicolon
id|LCDTypeInfo
op_assign
id|tempbh
suffix:semicolon
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x37
)paren
suffix:semicolon
id|LCDInfo
op_assign
id|tempah
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
)paren
(brace
id|LCDInfo
op_assign
id|LCDInfo
op_amp
(paren
op_complement
id|LCDNonExpanding
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempflag
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|tempflag
op_amp
id|HalfDCLK
)paren
(brace
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|LCDInfo
op_amp
id|LCDNonExpanding
)paren
)paren
(brace
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel1024x768
)paren
(brace
id|tempflag
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x09
)paren
)paren
suffix:semicolon
singleline_comment|//si+Ext_ResInfo
r_if
c_cond
(paren
id|tempflag
op_eq
l_int|4
)paren
(brace
singleline_comment|//512x384
id|SetFlag
op_assign
id|SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|LCDResInfo
op_eq
id|Panel800x600
)paren
(brace
id|tempflag
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x09
)paren
)paren
suffix:semicolon
singleline_comment|//si+Ext_ResInfo&t;
r_if
c_cond
(paren
id|tempflag
op_eq
l_int|3
)paren
(brace
singleline_comment|//400x300
id|SetFlag
op_assign
id|SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
)brace
r_else
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
r_else
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|EnableLVDSDDA
suffix:semicolon
)brace
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetCRT2ToLCD
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
(paren
id|SetSimuScanMode
op_or
id|SwitchToCRT2
)paren
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
(brace
r_if
c_cond
(paren
id|VBInfo
op_amp
id|SetNotSimuTVMode
)paren
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|LCDVESATiming
suffix:semicolon
)brace
)brace
r_else
(brace
id|SetFlag
op_assign
id|SetFlag
op_or
id|LCDVESATiming
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|PresetScratchregister
id|VOID
id|PresetScratchregister
c_func
(paren
id|USHORT
id|P3d4
comma
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x37
comma
l_int|0x00
)paren
suffix:semicolon
)brace
DECL|function|GetLCDDDCInfo
id|BOOLEAN
id|GetLCDDDCInfo
c_func
(paren
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|tempah
suffix:semicolon
id|tempah
op_assign
(paren
id|HwDeviceExtension-&gt;usLCDType
)paren
suffix:semicolon
singleline_comment|// set in sisv.c
singleline_comment|//0:no lcd 1:1024x768 2:1280x1024
r_if
c_cond
(paren
id|tempah
OG
l_int|0
)paren
(brace
id|tempah
op_increment
suffix:semicolon
)brace
singleline_comment|// usLCDType: 
singleline_comment|// 0:no lcd 1:800x600 2:1024x768 3:1280x1024
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x36
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//cr 36 0:no LCD 1:800x600 2:1024x768 3:1280x1024
r_if
c_cond
(paren
id|tempah
OG
l_int|0
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|SetTVSystem
id|VOID
id|SetTVSystem
c_func
(paren
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|tempah
comma
id|temp
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|0
)paren
(brace
singleline_comment|//301
r_if
c_cond
(paren
id|PRIMARY_VGA
op_eq
l_int|1
)paren
(brace
singleline_comment|//primary vga
r_if
c_cond
(paren
id|HwDeviceExtension-&gt;jChipID
op_ge
id|SIS_Trojan
)paren
(brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x17
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
id|ModeSwitchStatus
)paren
(brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x16
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
id|ActivePAL
suffix:semicolon
id|tempah
op_assign
id|tempah
op_rshift
id|ActivePALShift
suffix:semicolon
)brace
r_else
(brace
id|temp
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|SoftSettingAddr
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|SoftTVType
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeSettingAddr
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//SR 38
)brace
)brace
)brace
r_else
(brace
id|temp
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|SoftSettingAddr
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
id|SoftTVType
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeSettingAddr
)paren
)paren
suffix:semicolon
)brace
r_else
(brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//SR 38
)brace
)brace
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
singleline_comment|//get SR 38 D0 TV Type Selection
singleline_comment|//0:NTSC 1:PAL
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x31
comma
op_complement
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//set CR 31 D0= SR 38 D0
)brace
r_else
(brace
singleline_comment|//Secondary 
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//SR 38
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
singleline_comment|//get SR 38 D0 TV Type Selection
singleline_comment|//0:NTSC 1:PAL
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x31
comma
op_complement
l_int|0x01
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//set CR 31 D0= SR 38 D0
)brace
r_return
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//LVDS
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x16
)paren
suffix:semicolon
singleline_comment|//SR 16
id|tempah
op_assign
id|tempah
op_amp
id|ActiveNonExpanding
suffix:semicolon
id|tempah
op_assign
id|tempah
op_rshift
id|ActiveNonExpandingShift
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
id|tempah
op_assign
id|tempah
op_lshift
id|LCDNonExpandingShift
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x37
comma
op_complement
id|LCDNonExpanding
comma
id|tempah
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
)brace
DECL|function|GetSenseStatus
id|BOOLEAN
id|GetSenseStatus
c_func
(paren
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
comma
id|USHORT
id|BaseAddr
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|flag1
comma
id|tempbx
comma
id|tempal
comma
id|tempah
comma
id|tempcx
comma
id|i
suffix:semicolon
id|USHORT
id|Part2Port
comma
id|Part4Port
suffix:semicolon
id|USHORT
id|RGBSenseData
comma
id|YCSenseData
comma
id|VideoSenseData
suffix:semicolon
id|USHORT
id|P2reg0
comma
id|SenseModeNo
comma
id|OutputSelect
suffix:semicolon
id|Part2Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_10
suffix:semicolon
id|Part4Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_14
suffix:semicolon
id|RGBSenseData
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0xF8
)paren
)paren
suffix:semicolon
singleline_comment|//0:F8 in rompost.asm
id|YCSenseData
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0xFA
)paren
)paren
suffix:semicolon
singleline_comment|//0:FA in rompost.asm
id|VideoSenseData
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0xFC
)paren
)paren
suffix:semicolon
singleline_comment|//0:FC in rompost.asm
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|GetPanelID
c_func
(paren
)paren
suffix:semicolon
id|tempah
op_assign
id|LCDSense
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x32
comma
op_complement
l_int|0x5F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Set CR 32
r_return
l_int|0
suffix:semicolon
)brace
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//call BridgeisOn
r_if
c_cond
(paren
op_logical_neg
(paren
id|flag1
op_amp
l_int|0x20
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|P2reg0
op_assign
id|GetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x00
)paren
suffix:semicolon
singleline_comment|//save Part2 Reg index 0
r_if
c_cond
(paren
op_logical_neg
(paren
id|BridgeIsEnable
c_func
(paren
id|BaseAddr
)paren
)paren
)paren
(brace
id|SenseModeNo
op_assign
l_int|0x2E
suffix:semicolon
id|ModeType
op_assign
id|ModeVGA
suffix:semicolon
id|VBInfo
op_assign
id|SetCRT2ToRAMDAC
suffix:semicolon
id|SetFlag
op_assign
l_int|0
suffix:semicolon
id|SetCRT2Group
c_func
(paren
id|BaseAddr
comma
id|ROMAddr
comma
id|SenseModeNo
comma
id|HwDeviceExtension
)paren
suffix:semicolon
singleline_comment|//here perform I/O delay ,read SR 05&t;&t;&t;
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|0x7FFF
suffix:semicolon
id|i
op_increment
)paren
(brace
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x05
)paren
suffix:semicolon
)brace
)brace
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x00
comma
l_int|0x1C
)paren
suffix:semicolon
singleline_comment|//Set part2 index 0= 0x1C
id|tempah
op_assign
l_int|0
suffix:semicolon
id|OutputSelect
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0xFE
)paren
)paren
suffix:semicolon
singleline_comment|//OutputSelect 0:FE in Rompost.asm
r_if
c_cond
(paren
id|OutputSelect
op_amp
id|SetSCARTOutput
)paren
(brace
id|tempal
op_assign
id|SCARTSense
suffix:semicolon
)brace
r_else
(brace
id|tempal
op_assign
id|Monitor2Sense
suffix:semicolon
)brace
id|tempbx
op_assign
id|RGBSenseData
suffix:semicolon
id|tempcx
op_assign
l_int|0x0E08
suffix:semicolon
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
id|tempal
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
id|YCSenseData
suffix:semicolon
id|tempcx
op_assign
l_int|0x0604
suffix:semicolon
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
id|SVIDEOSense
suffix:semicolon
singleline_comment|//Skipped lines about HiTVSense, assuming not HiTV&t;
)brace
)brace
singleline_comment|//Assuming not HiTV ,below is of ifndef HiVisionTV
r_if
c_cond
(paren
id|OutputSelect
op_amp
id|BoardTVType
)paren
(brace
id|tempbx
op_assign
id|VideoSenseData
suffix:semicolon
id|tempcx
op_assign
l_int|0x0804
suffix:semicolon
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
id|AVIDEOSense
suffix:semicolon
)brace
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|tempah
op_amp
id|SVIDEOSense
)paren
)paren
(brace
id|tempbx
op_assign
id|VideoSenseData
suffix:semicolon
id|tempcx
op_assign
l_int|0x0804
suffix:semicolon
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
id|AVIDEOSense
suffix:semicolon
)brace
)brace
)brace
)brace
singleline_comment|//end of ifndef HivisionTv
r_if
c_cond
(paren
id|SenseLCD
c_func
(paren
id|HwDeviceExtension
comma
id|Part4Port
comma
id|ROMAddr
)paren
)paren
(brace
r_if
c_cond
(paren
id|SenseLCD
c_func
(paren
id|HwDeviceExtension
comma
id|Part4Port
comma
id|ROMAddr
)paren
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
id|LCDSense
suffix:semicolon
)brace
)brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|tempcx
op_assign
l_int|0
suffix:semicolon
id|Sense
c_func
(paren
id|Part4Port
comma
id|tempbx
comma
id|tempcx
)paren
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x32
comma
op_complement
l_int|0x5F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Set CR 32
id|SetReg1
c_func
(paren
id|Part2Port
comma
l_int|0x00
comma
id|P2reg0
)paren
suffix:semicolon
singleline_comment|//recover Part2 reg index 0
singleline_comment|//here skipped lines about DisableCRT2Display 
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|Sense
id|BOOLEAN
id|Sense
c_func
(paren
id|USHORT
id|Part4Port
comma
id|USHORT
id|inputbx
comma
id|USHORT
id|inputcx
)paren
(brace
id|USHORT
id|tempah
comma
id|tempcl
comma
id|tempch
suffix:semicolon
id|tempah
op_assign
id|inputbx
op_amp
l_int|0xFF
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part4 index 11
id|tempah
op_assign
(paren
id|inputbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempcl
op_assign
id|inputcx
op_amp
l_int|0xFF
suffix:semicolon
id|tempah
op_assign
id|tempah
op_or
id|tempcl
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|Part4Port
comma
l_int|0x10
comma
op_complement
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part4 index 10
id|tempch
op_assign
(paren
id|inputcx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|tempch
op_assign
id|tempch
op_amp
l_int|0x7F
suffix:semicolon
singleline_comment|//here skipped lines about call Delay
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x03
)paren
suffix:semicolon
singleline_comment|//Part4 index 03
id|tempah
op_assign
id|tempah
op_xor
(paren
l_int|0x0E
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
id|tempch
suffix:semicolon
r_if
c_cond
(paren
id|tempah
OG
l_int|0
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|SenseLCD
id|BOOLEAN
id|SenseLCD
c_func
(paren
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
comma
id|USHORT
id|Part4Port
comma
id|ULONG
id|ROMAddr
)paren
(brace
id|USHORT
id|SoftSetting
suffix:semicolon
id|USHORT
id|tempah
suffix:semicolon
id|SoftSetting
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
l_int|0x52
)paren
)paren
suffix:semicolon
singleline_comment|//0:52 in rompost.asm
r_if
c_cond
(paren
id|GetLCDDDCInfo
c_func
(paren
id|HwDeviceExtension
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|SoftSetting
op_amp
id|HotPlugFunction
)paren
(brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0F
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x3F
suffix:semicolon
id|SetReg1
c_func
(paren
id|Part4Port
comma
l_int|0x0F
comma
id|tempah
)paren
suffix:semicolon
singleline_comment|//Part4 index 0F
r_if
c_cond
(paren
id|Sense
c_func
(paren
id|Part4Port
comma
l_int|0x0
comma
l_int|0x9010
)paren
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
macro_line|#endif
DECL|function|SetRegANDOR
id|VOID
id|SetRegANDOR
c_func
(paren
id|USHORT
id|Port
comma
id|USHORT
id|Index
comma
id|USHORT
id|DataAND
comma
id|USHORT
id|DataOR
)paren
(brace
id|USHORT
id|temp1
suffix:semicolon
id|temp1
op_assign
id|GetReg1
c_func
(paren
id|Port
comma
id|Index
)paren
suffix:semicolon
singleline_comment|//part1port index 02
id|temp1
op_assign
(paren
id|temp1
op_amp
(paren
id|DataAND
)paren
)paren
op_or
id|DataOR
suffix:semicolon
id|SetReg1
c_func
(paren
id|Port
comma
id|Index
comma
id|temp1
)paren
suffix:semicolon
)brace
DECL|function|DetectMonitor
id|BOOLEAN
id|DetectMonitor
c_func
(paren
id|PHW_DEVICE_EXTENSION
id|HwDeviceExtension
)paren
(brace
id|USHORT
id|flag1
suffix:semicolon
id|USHORT
id|DAC_TEST_PARMS
(braket
l_int|3
)braket
op_assign
initialization_block
suffix:semicolon
id|USHORT
id|DAC_CLR_PARMS
(braket
l_int|3
)braket
op_assign
initialization_block
suffix:semicolon
id|flag1
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
singleline_comment|//call BridgeisOn
r_if
c_cond
(paren
(paren
id|flag1
op_amp
l_int|0x20
)paren
)paren
(brace
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x30
comma
l_int|0x41
)paren
suffix:semicolon
)brace
id|SiSSetMode
c_func
(paren
id|HwDeviceExtension
comma
l_int|0x2E
)paren
suffix:semicolon
singleline_comment|//set mode to 0x2E instead of 0x3
id|ClearDAC
c_func
(paren
id|P3c8
)paren
suffix:semicolon
id|ClearALLBuffer
c_func
(paren
id|HwDeviceExtension
)paren
suffix:semicolon
id|LongWait
c_func
(paren
)paren
suffix:semicolon
singleline_comment|//wait vertical retrace
id|LongWait
c_func
(paren
)paren
suffix:semicolon
id|flag1
op_assign
id|TestMonitorType
c_func
(paren
id|DAC_TEST_PARMS
(braket
l_int|0
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|1
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|2
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|flag1
op_eq
l_int|0
)paren
(brace
id|flag1
op_assign
id|TestMonitorType
c_func
(paren
id|DAC_TEST_PARMS
(braket
l_int|0
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|1
)braket
comma
id|DAC_TEST_PARMS
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|flag1
op_eq
l_int|1
)paren
(brace
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x32
comma
op_complement
id|Monitor1Sense
comma
id|Monitor1Sense
)paren
suffix:semicolon
)brace
r_else
(brace
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x32
comma
op_complement
id|Monitor1Sense
comma
l_int|0x0
)paren
suffix:semicolon
)brace
id|TestMonitorType
c_func
(paren
id|DAC_CLR_PARMS
(braket
l_int|0
)braket
comma
id|DAC_CLR_PARMS
(braket
l_int|1
)braket
comma
id|DAC_CLR_PARMS
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x34
comma
l_int|0x4A
)paren
suffix:semicolon
singleline_comment|//Preset default CRT1 ModeNo =0x4A
singleline_comment|//which is used in SetCRT2FIFO()
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|TestMonitorType
id|BOOLEAN
id|TestMonitorType
c_func
(paren
id|USHORT
id|d1
comma
id|USHORT
id|d2
comma
id|USHORT
id|d3
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|SetReg3
c_func
(paren
id|P3c6
comma
l_int|0xFF
)paren
suffix:semicolon
id|SetReg3
c_func
(paren
id|P3c8
comma
l_int|0x00
)paren
suffix:semicolon
id|SetReg3
c_func
(paren
id|P3c9
comma
id|d1
)paren
suffix:semicolon
id|SetReg3
c_func
(paren
id|P3c9
comma
id|d2
)paren
suffix:semicolon
id|SetReg3
c_func
(paren
id|P3c9
comma
id|d3
)paren
suffix:semicolon
id|WaitDisplay
c_func
(paren
)paren
suffix:semicolon
singleline_comment|//wait horizontal retrace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3c2
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_amp
l_int|0x10
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
r_else
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|WaitDisplay
id|VOID
id|WaitDisplay
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_for
c_loop
(paren
id|temp
op_assign
l_int|0
suffix:semicolon
id|temp
op_eq
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3da
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|temp
op_eq
l_int|1
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3da
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
)brace
)brace
DECL|function|LongWait
id|VOID
id|LongWait
c_func
(paren
r_void
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
r_for
c_loop
(paren
id|temp
op_assign
l_int|1
suffix:semicolon
id|temp
OG
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3da
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x08
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|temp
op_eq
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3da
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x08
suffix:semicolon
)brace
)brace
macro_line|#ifndef CONFIG_FB_SIS_LINUXBIOS
DECL|function|VBLongWait
id|VOID
id|VBLongWait
c_func
(paren
id|VOID
)paren
(brace
id|USHORT
id|regsr1f
comma
id|tempah
comma
id|temp
suffix:semicolon
id|regsr1f
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1F
)paren
suffix:semicolon
id|tempah
op_assign
id|regsr1f
op_amp
(paren
op_complement
l_int|0xC0
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1F
comma
id|tempah
)paren
suffix:semicolon
r_for
c_loop
(paren
id|temp
op_assign
l_int|1
suffix:semicolon
id|temp
OG
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3da
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x08
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|temp
op_eq
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg2
c_func
(paren
id|P3da
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x08
suffix:semicolon
)brace
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x1F
comma
id|regsr1f
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
DECL|function|WaitVBRetrace
id|BOOLEAN
id|WaitVBRetrace
c_func
(paren
id|USHORT
id|BaseAddr
)paren
(brace
id|USHORT
id|temp
suffix:semicolon
id|USHORT
id|Part1Port
suffix:semicolon
id|Part1Port
op_assign
id|BaseAddr
op_plus
id|IND_SIS_CRT2_PORT_04
suffix:semicolon
id|temp
op_assign
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x00
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|temp
op_amp
l_int|0x80
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_for
c_loop
(paren
id|temp
op_assign
l_int|0
suffix:semicolon
id|temp
op_eq
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x25
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
)brace
r_for
c_loop
(paren
suffix:semicolon
id|temp
OG
l_int|0
suffix:semicolon
)paren
(brace
id|temp
op_assign
id|GetReg1
c_func
(paren
id|Part1Port
comma
l_int|0x25
)paren
suffix:semicolon
id|temp
op_assign
id|temp
op_amp
l_int|0x01
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|GetPanelID
id|BOOLEAN
id|GetPanelID
c_func
(paren
id|VOID
)paren
(brace
id|USHORT
id|PanelTypeTable
(braket
l_int|16
)braket
op_assign
initialization_block
suffix:semicolon
singleline_comment|// Bit 15 BPLVSPLTY
singleline_comment|// Bit 14 BPLHSPLTY
singleline_comment|// Bit 6-3 Panel Type
singleline_comment|// Bit 2-0 Display Resolution(001:800x600 010:1024x768 011:1280x1024)
id|USHORT
id|tempah
comma
id|tempbx
suffix:semicolon
id|USHORT
id|return_flag
suffix:semicolon
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x18
)paren
suffix:semicolon
id|tempbx
op_assign
id|tempah
op_amp
l_int|0x0F
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
l_int|0x10
)paren
(brace
id|return_flag
op_assign
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|return_flag
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|return_flag
op_eq
l_int|0
)paren
(brace
r_if
c_cond
(paren
id|IF_DEF_LVDS
op_eq
l_int|1
)paren
(brace
id|tempbx
op_assign
l_int|0
suffix:semicolon
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x38
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
l_int|0x40
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x08
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempah
op_amp
l_int|0x20
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x02
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tempah
op_amp
l_int|0x01
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x01
suffix:semicolon
)brace
id|tempah
op_assign
id|GetReg1
c_func
(paren
id|P3c4
comma
l_int|0x39
)paren
suffix:semicolon
r_if
c_cond
(paren
id|tempah
op_amp
l_int|0x80
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_or
l_int|0x04
suffix:semicolon
)brace
)brace
r_else
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|1
)paren
(brace
id|tempbx
op_assign
l_int|1
suffix:semicolon
)brace
id|tempbx
op_assign
id|PanelTypeTable
(braket
id|tempbx
)braket
suffix:semicolon
singleline_comment|//LVDS table entry
id|tempbx
op_assign
id|tempbx
op_or
(paren
id|USHORT
)paren
(paren
id|LCDSync
op_lshift
l_int|8
)paren
suffix:semicolon
id|tempah
op_assign
id|tempbx
op_amp
l_int|0x0FF
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x36
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
(paren
id|tempbx
op_amp
l_int|0xFF00
)paren
op_rshift
l_int|8
suffix:semicolon
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x37
comma
op_complement
id|LCDSyncBit
comma
id|tempah
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|ModCRT1CRTC
id|VOID
id|ModCRT1CRTC
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|OldREFIndex
comma
id|temp
comma
id|tempah
comma
id|i
comma
id|modeflag1
suffix:semicolon
id|OldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
id|temp
op_assign
id|GetLVDSCRT1Ptr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
r_if
c_cond
(paren
id|temp
op_eq
l_int|0
)paren
(brace
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
r_return
suffix:semicolon
)brace
id|tempah
op_assign
(paren
id|UCHAR
)paren
id|GetReg1
c_func
(paren
id|P3d4
comma
l_int|0x11
)paren
suffix:semicolon
singleline_comment|//unlock cr0-7
id|tempah
op_assign
id|tempah
op_amp
l_int|0x7F
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x11
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
l_int|0x0
comma
id|tempah
)paren
suffix:semicolon
id|REFIndex
op_increment
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0x02
suffix:semicolon
id|i
op_le
l_int|0x05
suffix:semicolon
id|REFIndex
op_increment
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x06
suffix:semicolon
id|i
op_le
l_int|0x07
suffix:semicolon
id|REFIndex
op_increment
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x10
suffix:semicolon
id|i
op_le
l_int|0x11
suffix:semicolon
id|REFIndex
op_increment
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x15
suffix:semicolon
id|i
op_le
l_int|0x16
suffix:semicolon
id|REFIndex
op_increment
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3d4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0x0A
suffix:semicolon
id|i
op_le
l_int|0x0C
suffix:semicolon
id|REFIndex
op_increment
)paren
(brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
id|i
comma
id|tempah
)paren
suffix:semicolon
)brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x0E0
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
l_int|0x0E
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|tempah
op_assign
id|tempah
op_amp
l_int|0x01
suffix:semicolon
id|tempah
op_assign
id|tempah
op_lshift
l_int|5
suffix:semicolon
id|modeflag1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|modeflag1
op_amp
id|DoubleScanMode
)paren
(brace
id|tempah
op_assign
id|tempah
op_or
l_int|0x080
suffix:semicolon
)brace
id|SetRegANDOR
c_func
(paren
id|P3d4
comma
l_int|0x09
comma
op_complement
l_int|0x020
comma
id|tempah
)paren
suffix:semicolon
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
r_return
suffix:semicolon
)brace
DECL|function|SetCRT2ECLK
id|VOID
id|SetCRT2ECLK
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|OldREFIndex
comma
id|tempah
comma
id|tempal
suffix:semicolon
id|USHORT
id|P3cc
op_assign
id|P3c9
op_plus
l_int|3
suffix:semicolon
id|OldREFIndex
op_assign
(paren
id|USHORT
)paren
id|REFIndex
suffix:semicolon
r_if
c_cond
(paren
id|IF_DEF_TRUMPION
op_eq
l_int|0
)paren
(brace
singleline_comment|//no trumpion
id|tempal
op_assign
id|GetReg2
c_func
(paren
id|P3cc
)paren
suffix:semicolon
id|tempal
op_assign
id|tempal
op_amp
l_int|0x0C
suffix:semicolon
id|SetReg3
c_func
(paren
id|P3c2
comma
id|tempal
)paren
suffix:semicolon
id|REFIndex
op_assign
id|GetVCLKPtr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
)brace
r_else
(brace
singleline_comment|//trumpion
id|SetFlag
op_assign
id|SetFlag
op_amp
(paren
op_complement
id|ProgrammingCRT2
)paren
suffix:semicolon
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|0x03
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRTVCLK
id|tempal
op_assign
id|tempal
op_amp
l_int|0x03F
suffix:semicolon
r_if
c_cond
(paren
id|tempal
op_eq
l_int|0x02
)paren
(brace
singleline_comment|//31.5MHz
id|REFIndex
op_assign
id|REFIndex
op_minus
id|Ext2StructSize
suffix:semicolon
)brace
id|REFIndex
op_assign
id|GetVCLKPtr
c_func
(paren
id|ROMAddr
comma
id|ModeNo
)paren
suffix:semicolon
id|SetFlag
op_assign
id|SetFlag
op_or
id|ProgrammingCRT2
suffix:semicolon
)brace
id|tempal
op_assign
l_int|0x02B
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
id|tempal
op_assign
id|tempal
op_plus
l_int|3
suffix:semicolon
)brace
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
)paren
)paren
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|tempah
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|1
)paren
)paren
suffix:semicolon
id|tempal
op_increment
suffix:semicolon
id|SetReg1
c_func
(paren
id|P3c4
comma
id|tempal
comma
id|tempah
)paren
suffix:semicolon
id|REFIndex
op_assign
id|OldREFIndex
suffix:semicolon
r_return
suffix:semicolon
)brace
DECL|function|GetLVDSDesPtr
id|USHORT
id|GetLVDSDesPtr
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempcl
comma
id|tempbx
comma
id|tempal
comma
id|tempptr
comma
id|LVDSDesPtrData
suffix:semicolon
id|tempcl
op_assign
id|LVDSDesDataLen
suffix:semicolon
id|tempbx
op_assign
id|LCDTypeInfo
suffix:semicolon
r_if
c_cond
(paren
id|LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|16
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_CRT2CRTC
)brace
r_else
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|4
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRT2CRTC
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x1F
suffix:semicolon
id|tempal
op_assign
id|tempal
op_star
id|tempcl
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_lshift
l_int|1
suffix:semicolon
id|LVDSDesPtrData
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ADR_LVDSDesPtrData
)paren
)paren
suffix:semicolon
id|tempptr
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|LVDSDesPtrData
op_plus
id|tempbx
)paren
)paren
suffix:semicolon
id|tempptr
op_assign
id|tempptr
op_plus
id|tempal
suffix:semicolon
r_return
id|tempptr
suffix:semicolon
)brace
DECL|function|GetLVDSCRT1Ptr
id|BOOLEAN
id|GetLVDSCRT1Ptr
c_func
(paren
id|ULONG
id|ROMAddr
comma
id|USHORT
id|ModeNo
)paren
(brace
id|USHORT
id|tempal
comma
id|tempbx
comma
id|modeflag1
suffix:semicolon
id|USHORT
id|LVDSCRT1DataPtr
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|VBInfo
op_amp
id|SetInSlaveMode
)paren
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|ModeNo
op_le
l_int|0x13
)paren
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x04
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_CRT2CRTC
)brace
r_else
(brace
id|tempal
op_assign
op_star
(paren
(paren
id|UCHAR
op_star
)paren
(paren
id|ROMAddr
op_plus
id|REFIndex
op_plus
l_int|4
)paren
)paren
suffix:semicolon
singleline_comment|//di+Ext_CRT2CRTC
)brace
id|tempal
op_assign
id|tempal
op_amp
l_int|0x3F
suffix:semicolon
id|tempbx
op_assign
id|LCDResInfo
suffix:semicolon
id|tempbx
op_assign
id|tempbx
op_minus
id|Panel800x600
suffix:semicolon
r_if
c_cond
(paren
id|LCDInfo
op_amp
id|LCDNonExpanding
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|6
suffix:semicolon
)brace
id|modeflag1
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ModeIDOffset
op_plus
l_int|0x01
)paren
)paren
suffix:semicolon
singleline_comment|// si+St_ModeFlag
r_if
c_cond
(paren
id|modeflag1
op_amp
id|HalfDCLK
)paren
(brace
id|tempbx
op_assign
id|tempbx
op_plus
l_int|3
suffix:semicolon
)brace
id|tempbx
op_assign
id|tempbx
op_lshift
l_int|1
suffix:semicolon
id|LVDSCRT1DataPtr
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|ADR_LVDSCRT1DataPtr
)paren
)paren
suffix:semicolon
id|REFIndex
op_assign
op_star
(paren
(paren
id|USHORT
op_star
)paren
(paren
id|ROMAddr
op_plus
id|LVDSCRT1DataPtr
op_plus
id|tempbx
)paren
)paren
suffix:semicolon
id|tempal
op_assign
id|tempal
op_star
id|LVDSCRT1Len
suffix:semicolon
id|REFIndex
op_assign
id|REFIndex
op_plus
id|tempal
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
macro_line|#endif
eof
