multiline_comment|/*&n; * controlfb_hw.h: Constants of all sorts for controlfb&n; *&n; * Copyright (C) 1998 Daniel Jacobowitz &lt;dan@debian.org&gt;&n; *&n; * This program is free software; you can redistribute it and/or&n; * modify it under the terms of the GNU General Public License&n; * as published by the Free Software Foundation; either version&n; * 2 of the License, or (at your option) any later version.&n; *&n; * Based on an awful lot of code, including:&n; *&n; * control.c: Console support for PowerMac &quot;control&quot; display adaptor.&n; * Copyright (C) 1996 Paul Mackerras.&n; *&n; * The so far unpublished platinumfb.c&n; * Copyright (C) 1998 Jon Howell&n; */
multiline_comment|/*&n; * Structure of the registers for the RADACAL colormap device.&n; */
DECL|struct|cmap_regs
r_struct
id|cmap_regs
(brace
DECL|member|addr
r_int
r_char
id|addr
suffix:semicolon
DECL|member|pad1
r_char
id|pad1
(braket
l_int|15
)braket
suffix:semicolon
DECL|member|d1
r_int
r_char
id|d1
suffix:semicolon
DECL|member|pad2
r_char
id|pad2
(braket
l_int|15
)braket
suffix:semicolon
DECL|member|d2
r_int
r_char
id|d2
suffix:semicolon
DECL|member|pad3
r_char
id|pad3
(braket
l_int|15
)braket
suffix:semicolon
DECL|member|lut
r_int
r_char
id|lut
suffix:semicolon
DECL|member|pad4
r_char
id|pad4
(braket
l_int|15
)braket
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/*&n; * Structure of the registers for the &quot;control&quot; display adaptor.&n; */
DECL|macro|PAD
mdefine_line|#define PAD(x)&t;char x[12]
DECL|struct|preg
r_struct
id|preg
(brace
multiline_comment|/* padded register */
DECL|member|r
r_int
id|r
suffix:semicolon
DECL|member|pad
r_char
id|pad
(braket
l_int|12
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|control_regs
r_struct
id|control_regs
(brace
DECL|member|vcount
r_struct
id|preg
id|vcount
suffix:semicolon
multiline_comment|/* vertical counter */
multiline_comment|/* Vertical parameters are in units of 1/2 scan line */
DECL|member|vswin
r_struct
id|preg
id|vswin
suffix:semicolon
multiline_comment|/* between vsblank and vssync */
DECL|member|vsblank
r_struct
id|preg
id|vsblank
suffix:semicolon
multiline_comment|/* vert start blank */
DECL|member|veblank
r_struct
id|preg
id|veblank
suffix:semicolon
multiline_comment|/* vert end blank (display start) */
DECL|member|vewin
r_struct
id|preg
id|vewin
suffix:semicolon
multiline_comment|/* between vesync and veblank */
DECL|member|vesync
r_struct
id|preg
id|vesync
suffix:semicolon
multiline_comment|/* vert end sync */
DECL|member|vssync
r_struct
id|preg
id|vssync
suffix:semicolon
multiline_comment|/* vert start sync */
DECL|member|vperiod
r_struct
id|preg
id|vperiod
suffix:semicolon
multiline_comment|/* vert period */
DECL|member|reg8
r_struct
id|preg
id|reg8
suffix:semicolon
multiline_comment|/* Horizontal params are in units of 2 pixels */
DECL|member|hperiod
r_struct
id|preg
id|hperiod
suffix:semicolon
multiline_comment|/* horiz period - 2 */
DECL|member|hsblank
r_struct
id|preg
id|hsblank
suffix:semicolon
multiline_comment|/* horiz start blank */
DECL|member|heblank
r_struct
id|preg
id|heblank
suffix:semicolon
multiline_comment|/* horiz end blank */
DECL|member|hesync
r_struct
id|preg
id|hesync
suffix:semicolon
multiline_comment|/* horiz end sync */
DECL|member|hssync
r_struct
id|preg
id|hssync
suffix:semicolon
multiline_comment|/* horiz start sync */
DECL|member|rege
r_struct
id|preg
id|rege
suffix:semicolon
DECL|member|regf
r_struct
id|preg
id|regf
suffix:semicolon
DECL|member|reg10
r_struct
id|preg
id|reg10
suffix:semicolon
DECL|member|reg11
r_struct
id|preg
id|reg11
suffix:semicolon
DECL|member|ctrl
r_struct
id|preg
id|ctrl
suffix:semicolon
multiline_comment|/* display control */
DECL|member|start_addr
r_struct
id|preg
id|start_addr
suffix:semicolon
multiline_comment|/* start address: 5 lsbs zero */
DECL|member|pitch
r_struct
id|preg
id|pitch
suffix:semicolon
multiline_comment|/* addrs diff between scan lines */
DECL|member|mon_sense
r_struct
id|preg
id|mon_sense
suffix:semicolon
multiline_comment|/* monitor sense bits */
DECL|member|flags
r_struct
id|preg
id|flags
suffix:semicolon
DECL|member|mode
r_struct
id|preg
id|mode
suffix:semicolon
DECL|member|reg18
r_struct
id|preg
id|reg18
suffix:semicolon
DECL|member|reg19
r_struct
id|preg
id|reg19
suffix:semicolon
DECL|member|res
r_struct
id|preg
id|res
(braket
l_int|6
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|control_regints
r_struct
id|control_regints
(brace
multiline_comment|/* Vertical parameters are in units of 1/2 scan line */
DECL|member|vswin
r_int
id|vswin
suffix:semicolon
multiline_comment|/* between vsblank and vssync */
DECL|member|vsblank
r_int
id|vsblank
suffix:semicolon
multiline_comment|/* vert start blank */
DECL|member|veblank
r_int
id|veblank
suffix:semicolon
multiline_comment|/* vert end blank (display start) */
DECL|member|vewin
r_int
id|vewin
suffix:semicolon
multiline_comment|/* between vesync and veblank */
DECL|member|vesync
r_int
id|vesync
suffix:semicolon
multiline_comment|/* vert end sync */
DECL|member|vssync
r_int
id|vssync
suffix:semicolon
multiline_comment|/* vert start sync */
DECL|member|vperiod
r_int
id|vperiod
suffix:semicolon
multiline_comment|/* vert period */
DECL|member|reg8
r_int
id|reg8
suffix:semicolon
multiline_comment|/* Horizontal params are in units of 2 pixels */
multiline_comment|/* Except, apparently, for hres &gt; 1024 (or == 1280?) */
DECL|member|hperiod
r_int
id|hperiod
suffix:semicolon
multiline_comment|/* horiz period - 2 */
DECL|member|hsblank
r_int
id|hsblank
suffix:semicolon
multiline_comment|/* horiz start blank */
DECL|member|heblank
r_int
id|heblank
suffix:semicolon
multiline_comment|/* horiz end blank */
DECL|member|hesync
r_int
id|hesync
suffix:semicolon
multiline_comment|/* horiz end sync */
DECL|member|hssync
r_int
id|hssync
suffix:semicolon
multiline_comment|/* horiz start sync */
DECL|member|rege
r_int
id|rege
suffix:semicolon
DECL|member|regf
r_int
id|regf
suffix:semicolon
DECL|member|reg10
r_int
id|reg10
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/*&n; * Register initialization tables for the control display.&n; *&n; * Dot clock rate is&n; * 3.9064MHz * 2**clock_params[2] * clock_params[1] / clock_params[0].&n; *&n; * The values for vertical frequency (V) in the comments below&n; * are the values measured using the modes under MacOS.&n; *&n; * Pitch is always the same as bytes per line (for these video modes at least).&n; */
DECL|struct|control_regvals
r_struct
id|control_regvals
(brace
DECL|member|offset
r_int
id|offset
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* first pixel address */
DECL|member|regs
r_int
id|regs
(braket
l_int|16
)braket
suffix:semicolon
multiline_comment|/* for vswin .. reg10 */
DECL|member|mode
r_int
r_char
id|mode
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* indexed by color_mode */
DECL|member|radacal_ctrl
r_int
r_char
id|radacal_ctrl
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|clock_params
r_int
r_char
id|clock_params
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|hres
r_int
id|hres
suffix:semicolon
DECL|member|vres
r_int
id|vres
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* Register values for 1280x1024, 75Hz mode (20) */
DECL|variable|control_reg_init_20
r_static
r_struct
id|control_regvals
id|control_reg_init_20
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x20
comma
l_int|0
)brace
comma
(brace
l_int|2129
comma
l_int|2128
comma
l_int|80
comma
l_int|42
comma
l_int|4
comma
l_int|2130
comma
l_int|2132
comma
l_int|88
comma
l_int|420
comma
l_int|411
comma
l_int|91
comma
l_int|35
comma
l_int|421
comma
l_int|18
comma
l_int|211
comma
l_int|386
comma
)brace
comma
(brace
l_int|1
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x50
comma
l_int|0x64
comma
l_int|0x64
)brace
comma
(brace
l_int|13
comma
l_int|56
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 134.61MHz for V=74.81Hz */
l_int|1280
comma
l_int|1024
)brace
suffix:semicolon
multiline_comment|/* Register values for 1280x960, 75Hz mode (19) */
DECL|variable|control_reg_init_19
r_static
r_struct
id|control_regvals
id|control_reg_init_19
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x20
comma
l_int|0
)brace
comma
(brace
l_int|1997
comma
l_int|1996
comma
l_int|76
comma
l_int|40
comma
l_int|4
comma
l_int|1998
comma
l_int|2000
comma
l_int|86
comma
l_int|418
comma
l_int|409
comma
l_int|89
comma
l_int|35
comma
l_int|419
comma
l_int|18
comma
l_int|210
comma
l_int|384
comma
)brace
comma
(brace
l_int|1
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x50
comma
l_int|0x64
comma
l_int|0x64
)brace
comma
(brace
l_int|31
comma
l_int|125
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 126.01MHz for V=75.01 Hz */
l_int|1280
comma
l_int|960
)brace
suffix:semicolon
multiline_comment|/* Register values for 1152x870, 75Hz mode (18) */
DECL|variable|control_reg_init_18
r_static
r_struct
id|control_regvals
id|control_reg_init_18
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1825
comma
l_int|1822
comma
l_int|82
comma
l_int|43
comma
l_int|4
comma
l_int|1828
comma
l_int|1830
comma
l_int|120
comma
l_int|726
comma
l_int|705
comma
l_int|129
comma
l_int|63
comma
l_int|727
comma
l_int|32
comma
l_int|364
comma
l_int|664
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x28
)brace
comma
(brace
l_int|19
comma
l_int|61
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 100.33MHz for V=75.31Hz */
l_int|1152
comma
l_int|870
)brace
suffix:semicolon
multiline_comment|/* Register values for 1024x768, 75Hz mode (17) */
DECL|variable|control_reg_init_17
r_static
r_struct
id|control_regvals
id|control_reg_init_17
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1603
comma
l_int|1600
comma
l_int|64
comma
l_int|34
comma
l_int|4
comma
l_int|1606
comma
l_int|1608
comma
l_int|120
comma
l_int|662
comma
l_int|641
comma
l_int|129
comma
l_int|47
comma
l_int|663
comma
l_int|24
comma
l_int|332
comma
l_int|616
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x28
)brace
comma
(brace
l_int|11
comma
l_int|28
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 79.55MHz for V=74.50Hz */
l_int|1024
comma
l_int|768
)brace
suffix:semicolon
multiline_comment|/* Register values for 1024x768, 72Hz mode 16 (15?) */
DECL|variable|control_reg_init_15
r_static
r_struct
id|control_regvals
id|control_reg_init_15
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1607
comma
l_int|1604
comma
l_int|68
comma
l_int|39
comma
l_int|10
comma
l_int|1610
comma
l_int|1612
comma
l_int|132
comma
l_int|670
comma
l_int|653
comma
l_int|141
comma
l_int|67
comma
l_int|671
comma
l_int|34
comma
l_int|336
comma
l_int|604
comma
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x28
)brace
comma
(brace
l_int|12
comma
l_int|30
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 78.12MHz for V=72.12Hz */
l_int|1024
comma
l_int|768
)brace
suffix:semicolon
multiline_comment|/* Register values for 1024x768, 60Hz mode (14) */
DECL|variable|control_reg_init_14
r_static
r_struct
id|control_regvals
id|control_reg_init_14
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1607
comma
l_int|1604
comma
l_int|68
comma
l_int|39
comma
l_int|10
comma
l_int|1610
comma
l_int|1612
comma
l_int|132
comma
l_int|670
comma
l_int|653
comma
l_int|141
comma
l_int|67
comma
l_int|671
comma
l_int|34
comma
l_int|336
comma
l_int|604
comma
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|1
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x28
)brace
comma
(brace
l_int|15
comma
l_int|31
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 64.58MHz for V=59.62Hz */
l_int|1024
comma
l_int|768
)brace
suffix:semicolon
multiline_comment|/* Register values for 832x624, 75Hz mode (13) */
DECL|variable|control_reg_init_13
r_static
r_struct
id|control_regvals
id|control_reg_init_13
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1331
comma
l_int|1330
comma
l_int|82
comma
l_int|43
comma
l_int|4
comma
l_int|1332
comma
l_int|1334
comma
l_int|128
comma
l_int|574
comma
l_int|553
comma
l_int|137
comma
l_int|31
comma
l_int|575
comma
l_int|16
comma
l_int|288
comma
l_int|544
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|23
comma
l_int|42
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 57.07MHz for V=74.27Hz */
l_int|832
comma
l_int|624
)brace
suffix:semicolon
multiline_comment|/* Register values for 800x600, 75Hz mode (12) */
DECL|variable|control_reg_init_12
r_static
r_struct
id|control_regvals
id|control_reg_init_12
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1247
comma
l_int|1246
comma
l_int|46
comma
l_int|25
comma
l_int|4
comma
l_int|1248
comma
l_int|1250
comma
l_int|104
comma
l_int|526
comma
l_int|513
comma
l_int|113
comma
l_int|39
comma
l_int|527
comma
l_int|20
comma
l_int|264
comma
l_int|488
comma
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|7
comma
l_int|11
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 49.11MHz for V=74.40Hz */
l_int|800
comma
l_int|600
)brace
suffix:semicolon
multiline_comment|/* Register values for 800x600, 72Hz mode (11) */
DECL|variable|control_reg_init_11
r_static
r_struct
id|control_regvals
id|control_reg_init_11
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1293
comma
l_int|1256
comma
l_int|56
comma
l_int|33
comma
l_int|10
comma
l_int|1330
comma
l_int|1332
comma
l_int|76
comma
l_int|518
comma
l_int|485
comma
l_int|85
comma
l_int|59
comma
l_int|519
comma
l_int|30
comma
l_int|260
comma
l_int|460
comma
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|17
comma
l_int|27
comma
l_int|3
)brace
comma
multiline_comment|/* pixel clock = 49.63MHz for V=71.66Hz */
l_int|800
comma
l_int|600
)brace
suffix:semicolon
multiline_comment|/* Register values for 800x600, 60Hz mode (10) */
DECL|variable|control_reg_init_10
r_static
r_struct
id|control_regvals
id|control_reg_init_10
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1293
comma
l_int|1256
comma
l_int|56
comma
l_int|33
comma
l_int|10
comma
l_int|1330
comma
l_int|1332
comma
l_int|76
comma
l_int|518
comma
l_int|485
comma
l_int|85
comma
l_int|59
comma
l_int|519
comma
l_int|30
comma
l_int|260
comma
l_int|460
comma
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|20
comma
l_int|53
comma
l_int|2
)brace
comma
multiline_comment|/* pixel clock = 41.41MHz for V=59.78Hz */
l_int|800
comma
l_int|600
)brace
suffix:semicolon
multiline_comment|/* Register values for 640x870, 75Hz Full Page Display (7) */
DECL|variable|control_reg_init_7
r_static
r_struct
id|control_regvals
id|control_reg_init_7
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x30
comma
l_int|0x68
)brace
comma
(brace
l_int|0x727
comma
l_int|0x724
comma
l_int|0x58
comma
l_int|0x2e
comma
l_int|0x4
comma
l_int|0x72a
comma
l_int|0x72c
comma
l_int|0x40
comma
l_int|0x19e
comma
l_int|0x18c
comma
l_int|0x4c
comma
l_int|0x27
comma
l_int|0x19f
comma
l_int|0x14
comma
l_int|0xd0
comma
l_int|0x178
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|9
comma
l_int|33
comma
l_int|2
)brace
comma
multiline_comment|/* pixel clock = 57.29MHz for V=75.01Hz */
l_int|640
comma
l_int|870
)brace
suffix:semicolon
multiline_comment|/* Register values for 640x480, 67Hz mode (6) */
DECL|variable|control_reg_init_6
r_static
r_struct
id|control_regvals
id|control_reg_init_6
op_assign
(brace
(brace
l_int|0
comma
l_int|8
comma
l_int|0x10
)brace
comma
(brace
l_int|1045
comma
l_int|1042
comma
l_int|82
comma
l_int|43
comma
l_int|4
comma
l_int|1048
comma
l_int|1050
comma
l_int|72
comma
l_int|430
comma
l_int|393
comma
l_int|73
comma
l_int|31
comma
l_int|431
comma
l_int|16
comma
l_int|216
comma
l_int|400
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|14
comma
l_int|27
comma
l_int|2
)brace
comma
multiline_comment|/* pixel clock = 30.13MHz for V=66.43Hz */
l_int|640
comma
l_int|480
)brace
suffix:semicolon
multiline_comment|/* Register values for 640x480, 60Hz mode (5) */
DECL|variable|control_reg_init_5
r_static
r_struct
id|control_regvals
id|control_reg_init_5
op_assign
(brace
(brace
l_int|0x10
comma
l_int|0x28
comma
l_int|0x50
)brace
comma
(brace
l_int|1037
comma
l_int|1026
comma
l_int|66
comma
l_int|34
comma
l_int|2
comma
l_int|1048
comma
l_int|1050
comma
l_int|56
comma
l_int|398
comma
l_int|385
comma
l_int|65
comma
l_int|47
comma
l_int|399
comma
l_int|24
comma
l_int|200
comma
l_int|352
comma
)brace
comma
(brace
l_int|2
comma
l_int|1
comma
l_int|0
)brace
comma
(brace
l_int|0x10
comma
l_int|0x14
comma
l_int|0x18
)brace
comma
(brace
l_int|23
comma
l_int|37
comma
l_int|2
)brace
comma
multiline_comment|/* pixel clock = 25.14MHz for V=59.85Hz */
l_int|640
comma
l_int|480
)brace
suffix:semicolon
DECL|variable|control_reg_init
r_static
r_struct
id|control_regvals
op_star
id|control_reg_init
(braket
id|VMODE_MAX
)braket
op_assign
(brace
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
op_amp
id|control_reg_init_5
comma
op_amp
id|control_reg_init_6
comma
op_amp
id|control_reg_init_7
comma
l_int|NULL
comma
l_int|NULL
comma
op_amp
id|control_reg_init_10
comma
op_amp
id|control_reg_init_11
comma
op_amp
id|control_reg_init_12
comma
op_amp
id|control_reg_init_13
comma
op_amp
id|control_reg_init_14
comma
op_amp
id|control_reg_init_15
comma
op_amp
id|control_reg_init_15
comma
op_amp
id|control_reg_init_17
comma
op_amp
id|control_reg_init_18
comma
op_amp
id|control_reg_init_19
comma
op_amp
id|control_reg_init_20
)brace
suffix:semicolon
eof
