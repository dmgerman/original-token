multiline_comment|/*&n; * consolemap.c&n; *&n; * Mapping from internal code (such as Latin-1 or Unicode or IBM PC code)&n; * to font positions.&n; *&n; * aeb, 950210&n; *&n; * Support for multiple unimaps by Jakub Jelinek &lt;jj@ultra.linux.cz&gt;, July 1998&n; *&n; * Fix bug in inverse translation. Stanislav Voronyi &lt;stas@cnti.uanet.kharkov.ua&gt;, Dec 1998&n; */
macro_line|#include &lt;linux/kd.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;linux/consolemap.h&gt;
macro_line|#include &lt;linux/console_struct.h&gt;
macro_line|#include &lt;linux/vt_kern.h&gt;
DECL|variable|translations
r_static
r_int
r_int
id|translations
(braket
)braket
(braket
l_int|256
)braket
op_assign
(brace
multiline_comment|/* 8-bit Latin-1 mapped to Unicode -- trivial mapping */
(brace
l_int|0x0000
comma
l_int|0x0001
comma
l_int|0x0002
comma
l_int|0x0003
comma
l_int|0x0004
comma
l_int|0x0005
comma
l_int|0x0006
comma
l_int|0x0007
comma
l_int|0x0008
comma
l_int|0x0009
comma
l_int|0x000a
comma
l_int|0x000b
comma
l_int|0x000c
comma
l_int|0x000d
comma
l_int|0x000e
comma
l_int|0x000f
comma
l_int|0x0010
comma
l_int|0x0011
comma
l_int|0x0012
comma
l_int|0x0013
comma
l_int|0x0014
comma
l_int|0x0015
comma
l_int|0x0016
comma
l_int|0x0017
comma
l_int|0x0018
comma
l_int|0x0019
comma
l_int|0x001a
comma
l_int|0x001b
comma
l_int|0x001c
comma
l_int|0x001d
comma
l_int|0x001e
comma
l_int|0x001f
comma
l_int|0x0020
comma
l_int|0x0021
comma
l_int|0x0022
comma
l_int|0x0023
comma
l_int|0x0024
comma
l_int|0x0025
comma
l_int|0x0026
comma
l_int|0x0027
comma
l_int|0x0028
comma
l_int|0x0029
comma
l_int|0x002a
comma
l_int|0x002b
comma
l_int|0x002c
comma
l_int|0x002d
comma
l_int|0x002e
comma
l_int|0x002f
comma
l_int|0x0030
comma
l_int|0x0031
comma
l_int|0x0032
comma
l_int|0x0033
comma
l_int|0x0034
comma
l_int|0x0035
comma
l_int|0x0036
comma
l_int|0x0037
comma
l_int|0x0038
comma
l_int|0x0039
comma
l_int|0x003a
comma
l_int|0x003b
comma
l_int|0x003c
comma
l_int|0x003d
comma
l_int|0x003e
comma
l_int|0x003f
comma
l_int|0x0040
comma
l_int|0x0041
comma
l_int|0x0042
comma
l_int|0x0043
comma
l_int|0x0044
comma
l_int|0x0045
comma
l_int|0x0046
comma
l_int|0x0047
comma
l_int|0x0048
comma
l_int|0x0049
comma
l_int|0x004a
comma
l_int|0x004b
comma
l_int|0x004c
comma
l_int|0x004d
comma
l_int|0x004e
comma
l_int|0x004f
comma
l_int|0x0050
comma
l_int|0x0051
comma
l_int|0x0052
comma
l_int|0x0053
comma
l_int|0x0054
comma
l_int|0x0055
comma
l_int|0x0056
comma
l_int|0x0057
comma
l_int|0x0058
comma
l_int|0x0059
comma
l_int|0x005a
comma
l_int|0x005b
comma
l_int|0x005c
comma
l_int|0x005d
comma
l_int|0x005e
comma
l_int|0x005f
comma
l_int|0x0060
comma
l_int|0x0061
comma
l_int|0x0062
comma
l_int|0x0063
comma
l_int|0x0064
comma
l_int|0x0065
comma
l_int|0x0066
comma
l_int|0x0067
comma
l_int|0x0068
comma
l_int|0x0069
comma
l_int|0x006a
comma
l_int|0x006b
comma
l_int|0x006c
comma
l_int|0x006d
comma
l_int|0x006e
comma
l_int|0x006f
comma
l_int|0x0070
comma
l_int|0x0071
comma
l_int|0x0072
comma
l_int|0x0073
comma
l_int|0x0074
comma
l_int|0x0075
comma
l_int|0x0076
comma
l_int|0x0077
comma
l_int|0x0078
comma
l_int|0x0079
comma
l_int|0x007a
comma
l_int|0x007b
comma
l_int|0x007c
comma
l_int|0x007d
comma
l_int|0x007e
comma
l_int|0x007f
comma
l_int|0x0080
comma
l_int|0x0081
comma
l_int|0x0082
comma
l_int|0x0083
comma
l_int|0x0084
comma
l_int|0x0085
comma
l_int|0x0086
comma
l_int|0x0087
comma
l_int|0x0088
comma
l_int|0x0089
comma
l_int|0x008a
comma
l_int|0x008b
comma
l_int|0x008c
comma
l_int|0x008d
comma
l_int|0x008e
comma
l_int|0x008f
comma
l_int|0x0090
comma
l_int|0x0091
comma
l_int|0x0092
comma
l_int|0x0093
comma
l_int|0x0094
comma
l_int|0x0095
comma
l_int|0x0096
comma
l_int|0x0097
comma
l_int|0x0098
comma
l_int|0x0099
comma
l_int|0x009a
comma
l_int|0x009b
comma
l_int|0x009c
comma
l_int|0x009d
comma
l_int|0x009e
comma
l_int|0x009f
comma
l_int|0x00a0
comma
l_int|0x00a1
comma
l_int|0x00a2
comma
l_int|0x00a3
comma
l_int|0x00a4
comma
l_int|0x00a5
comma
l_int|0x00a6
comma
l_int|0x00a7
comma
l_int|0x00a8
comma
l_int|0x00a9
comma
l_int|0x00aa
comma
l_int|0x00ab
comma
l_int|0x00ac
comma
l_int|0x00ad
comma
l_int|0x00ae
comma
l_int|0x00af
comma
l_int|0x00b0
comma
l_int|0x00b1
comma
l_int|0x00b2
comma
l_int|0x00b3
comma
l_int|0x00b4
comma
l_int|0x00b5
comma
l_int|0x00b6
comma
l_int|0x00b7
comma
l_int|0x00b8
comma
l_int|0x00b9
comma
l_int|0x00ba
comma
l_int|0x00bb
comma
l_int|0x00bc
comma
l_int|0x00bd
comma
l_int|0x00be
comma
l_int|0x00bf
comma
l_int|0x00c0
comma
l_int|0x00c1
comma
l_int|0x00c2
comma
l_int|0x00c3
comma
l_int|0x00c4
comma
l_int|0x00c5
comma
l_int|0x00c6
comma
l_int|0x00c7
comma
l_int|0x00c8
comma
l_int|0x00c9
comma
l_int|0x00ca
comma
l_int|0x00cb
comma
l_int|0x00cc
comma
l_int|0x00cd
comma
l_int|0x00ce
comma
l_int|0x00cf
comma
l_int|0x00d0
comma
l_int|0x00d1
comma
l_int|0x00d2
comma
l_int|0x00d3
comma
l_int|0x00d4
comma
l_int|0x00d5
comma
l_int|0x00d6
comma
l_int|0x00d7
comma
l_int|0x00d8
comma
l_int|0x00d9
comma
l_int|0x00da
comma
l_int|0x00db
comma
l_int|0x00dc
comma
l_int|0x00dd
comma
l_int|0x00de
comma
l_int|0x00df
comma
l_int|0x00e0
comma
l_int|0x00e1
comma
l_int|0x00e2
comma
l_int|0x00e3
comma
l_int|0x00e4
comma
l_int|0x00e5
comma
l_int|0x00e6
comma
l_int|0x00e7
comma
l_int|0x00e8
comma
l_int|0x00e9
comma
l_int|0x00ea
comma
l_int|0x00eb
comma
l_int|0x00ec
comma
l_int|0x00ed
comma
l_int|0x00ee
comma
l_int|0x00ef
comma
l_int|0x00f0
comma
l_int|0x00f1
comma
l_int|0x00f2
comma
l_int|0x00f3
comma
l_int|0x00f4
comma
l_int|0x00f5
comma
l_int|0x00f6
comma
l_int|0x00f7
comma
l_int|0x00f8
comma
l_int|0x00f9
comma
l_int|0x00fa
comma
l_int|0x00fb
comma
l_int|0x00fc
comma
l_int|0x00fd
comma
l_int|0x00fe
comma
l_int|0x00ff
)brace
comma
multiline_comment|/* VT100 graphics mapped to Unicode */
(brace
l_int|0x0000
comma
l_int|0x0001
comma
l_int|0x0002
comma
l_int|0x0003
comma
l_int|0x0004
comma
l_int|0x0005
comma
l_int|0x0006
comma
l_int|0x0007
comma
l_int|0x0008
comma
l_int|0x0009
comma
l_int|0x000a
comma
l_int|0x000b
comma
l_int|0x000c
comma
l_int|0x000d
comma
l_int|0x000e
comma
l_int|0x000f
comma
l_int|0x0010
comma
l_int|0x0011
comma
l_int|0x0012
comma
l_int|0x0013
comma
l_int|0x0014
comma
l_int|0x0015
comma
l_int|0x0016
comma
l_int|0x0017
comma
l_int|0x0018
comma
l_int|0x0019
comma
l_int|0x001a
comma
l_int|0x001b
comma
l_int|0x001c
comma
l_int|0x001d
comma
l_int|0x001e
comma
l_int|0x001f
comma
l_int|0x0020
comma
l_int|0x0021
comma
l_int|0x0022
comma
l_int|0x0023
comma
l_int|0x0024
comma
l_int|0x0025
comma
l_int|0x0026
comma
l_int|0x0027
comma
l_int|0x0028
comma
l_int|0x0029
comma
l_int|0x002a
comma
l_int|0x2192
comma
l_int|0x2190
comma
l_int|0x2191
comma
l_int|0x2193
comma
l_int|0x002f
comma
l_int|0x2588
comma
l_int|0x0031
comma
l_int|0x0032
comma
l_int|0x0033
comma
l_int|0x0034
comma
l_int|0x0035
comma
l_int|0x0036
comma
l_int|0x0037
comma
l_int|0x0038
comma
l_int|0x0039
comma
l_int|0x003a
comma
l_int|0x003b
comma
l_int|0x003c
comma
l_int|0x003d
comma
l_int|0x003e
comma
l_int|0x003f
comma
l_int|0x0040
comma
l_int|0x0041
comma
l_int|0x0042
comma
l_int|0x0043
comma
l_int|0x0044
comma
l_int|0x0045
comma
l_int|0x0046
comma
l_int|0x0047
comma
l_int|0x0048
comma
l_int|0x0049
comma
l_int|0x004a
comma
l_int|0x004b
comma
l_int|0x004c
comma
l_int|0x004d
comma
l_int|0x004e
comma
l_int|0x004f
comma
l_int|0x0050
comma
l_int|0x0051
comma
l_int|0x0052
comma
l_int|0x0053
comma
l_int|0x0054
comma
l_int|0x0055
comma
l_int|0x0056
comma
l_int|0x0057
comma
l_int|0x0058
comma
l_int|0x0059
comma
l_int|0x005a
comma
l_int|0x005b
comma
l_int|0x005c
comma
l_int|0x005d
comma
l_int|0x005e
comma
l_int|0x00a0
comma
l_int|0x25c6
comma
l_int|0x2592
comma
l_int|0x2409
comma
l_int|0x240c
comma
l_int|0x240d
comma
l_int|0x240a
comma
l_int|0x00b0
comma
l_int|0x00b1
comma
l_int|0x2591
comma
l_int|0x240b
comma
l_int|0x2518
comma
l_int|0x2510
comma
l_int|0x250c
comma
l_int|0x2514
comma
l_int|0x253c
comma
l_int|0xf800
comma
l_int|0xf801
comma
l_int|0x2500
comma
l_int|0xf803
comma
l_int|0xf804
comma
l_int|0x251c
comma
l_int|0x2524
comma
l_int|0x2534
comma
l_int|0x252c
comma
l_int|0x2502
comma
l_int|0x2264
comma
l_int|0x2265
comma
l_int|0x03c0
comma
l_int|0x2260
comma
l_int|0x00a3
comma
l_int|0x00b7
comma
l_int|0x007f
comma
l_int|0x0080
comma
l_int|0x0081
comma
l_int|0x0082
comma
l_int|0x0083
comma
l_int|0x0084
comma
l_int|0x0085
comma
l_int|0x0086
comma
l_int|0x0087
comma
l_int|0x0088
comma
l_int|0x0089
comma
l_int|0x008a
comma
l_int|0x008b
comma
l_int|0x008c
comma
l_int|0x008d
comma
l_int|0x008e
comma
l_int|0x008f
comma
l_int|0x0090
comma
l_int|0x0091
comma
l_int|0x0092
comma
l_int|0x0093
comma
l_int|0x0094
comma
l_int|0x0095
comma
l_int|0x0096
comma
l_int|0x0097
comma
l_int|0x0098
comma
l_int|0x0099
comma
l_int|0x009a
comma
l_int|0x009b
comma
l_int|0x009c
comma
l_int|0x009d
comma
l_int|0x009e
comma
l_int|0x009f
comma
l_int|0x00a0
comma
l_int|0x00a1
comma
l_int|0x00a2
comma
l_int|0x00a3
comma
l_int|0x00a4
comma
l_int|0x00a5
comma
l_int|0x00a6
comma
l_int|0x00a7
comma
l_int|0x00a8
comma
l_int|0x00a9
comma
l_int|0x00aa
comma
l_int|0x00ab
comma
l_int|0x00ac
comma
l_int|0x00ad
comma
l_int|0x00ae
comma
l_int|0x00af
comma
l_int|0x00b0
comma
l_int|0x00b1
comma
l_int|0x00b2
comma
l_int|0x00b3
comma
l_int|0x00b4
comma
l_int|0x00b5
comma
l_int|0x00b6
comma
l_int|0x00b7
comma
l_int|0x00b8
comma
l_int|0x00b9
comma
l_int|0x00ba
comma
l_int|0x00bb
comma
l_int|0x00bc
comma
l_int|0x00bd
comma
l_int|0x00be
comma
l_int|0x00bf
comma
l_int|0x00c0
comma
l_int|0x00c1
comma
l_int|0x00c2
comma
l_int|0x00c3
comma
l_int|0x00c4
comma
l_int|0x00c5
comma
l_int|0x00c6
comma
l_int|0x00c7
comma
l_int|0x00c8
comma
l_int|0x00c9
comma
l_int|0x00ca
comma
l_int|0x00cb
comma
l_int|0x00cc
comma
l_int|0x00cd
comma
l_int|0x00ce
comma
l_int|0x00cf
comma
l_int|0x00d0
comma
l_int|0x00d1
comma
l_int|0x00d2
comma
l_int|0x00d3
comma
l_int|0x00d4
comma
l_int|0x00d5
comma
l_int|0x00d6
comma
l_int|0x00d7
comma
l_int|0x00d8
comma
l_int|0x00d9
comma
l_int|0x00da
comma
l_int|0x00db
comma
l_int|0x00dc
comma
l_int|0x00dd
comma
l_int|0x00de
comma
l_int|0x00df
comma
l_int|0x00e0
comma
l_int|0x00e1
comma
l_int|0x00e2
comma
l_int|0x00e3
comma
l_int|0x00e4
comma
l_int|0x00e5
comma
l_int|0x00e6
comma
l_int|0x00e7
comma
l_int|0x00e8
comma
l_int|0x00e9
comma
l_int|0x00ea
comma
l_int|0x00eb
comma
l_int|0x00ec
comma
l_int|0x00ed
comma
l_int|0x00ee
comma
l_int|0x00ef
comma
l_int|0x00f0
comma
l_int|0x00f1
comma
l_int|0x00f2
comma
l_int|0x00f3
comma
l_int|0x00f4
comma
l_int|0x00f5
comma
l_int|0x00f6
comma
l_int|0x00f7
comma
l_int|0x00f8
comma
l_int|0x00f9
comma
l_int|0x00fa
comma
l_int|0x00fb
comma
l_int|0x00fc
comma
l_int|0x00fd
comma
l_int|0x00fe
comma
l_int|0x00ff
)brace
comma
multiline_comment|/* IBM Codepage 437 mapped to Unicode */
(brace
l_int|0x0000
comma
l_int|0x263a
comma
l_int|0x263b
comma
l_int|0x2665
comma
l_int|0x2666
comma
l_int|0x2663
comma
l_int|0x2660
comma
l_int|0x2022
comma
l_int|0x25d8
comma
l_int|0x25cb
comma
l_int|0x25d9
comma
l_int|0x2642
comma
l_int|0x2640
comma
l_int|0x266a
comma
l_int|0x266b
comma
l_int|0x263c
comma
l_int|0x25b6
comma
l_int|0x25c0
comma
l_int|0x2195
comma
l_int|0x203c
comma
l_int|0x00b6
comma
l_int|0x00a7
comma
l_int|0x25ac
comma
l_int|0x21a8
comma
l_int|0x2191
comma
l_int|0x2193
comma
l_int|0x2192
comma
l_int|0x2190
comma
l_int|0x221f
comma
l_int|0x2194
comma
l_int|0x25b2
comma
l_int|0x25bc
comma
l_int|0x0020
comma
l_int|0x0021
comma
l_int|0x0022
comma
l_int|0x0023
comma
l_int|0x0024
comma
l_int|0x0025
comma
l_int|0x0026
comma
l_int|0x0027
comma
l_int|0x0028
comma
l_int|0x0029
comma
l_int|0x002a
comma
l_int|0x002b
comma
l_int|0x002c
comma
l_int|0x002d
comma
l_int|0x002e
comma
l_int|0x002f
comma
l_int|0x0030
comma
l_int|0x0031
comma
l_int|0x0032
comma
l_int|0x0033
comma
l_int|0x0034
comma
l_int|0x0035
comma
l_int|0x0036
comma
l_int|0x0037
comma
l_int|0x0038
comma
l_int|0x0039
comma
l_int|0x003a
comma
l_int|0x003b
comma
l_int|0x003c
comma
l_int|0x003d
comma
l_int|0x003e
comma
l_int|0x003f
comma
l_int|0x0040
comma
l_int|0x0041
comma
l_int|0x0042
comma
l_int|0x0043
comma
l_int|0x0044
comma
l_int|0x0045
comma
l_int|0x0046
comma
l_int|0x0047
comma
l_int|0x0048
comma
l_int|0x0049
comma
l_int|0x004a
comma
l_int|0x004b
comma
l_int|0x004c
comma
l_int|0x004d
comma
l_int|0x004e
comma
l_int|0x004f
comma
l_int|0x0050
comma
l_int|0x0051
comma
l_int|0x0052
comma
l_int|0x0053
comma
l_int|0x0054
comma
l_int|0x0055
comma
l_int|0x0056
comma
l_int|0x0057
comma
l_int|0x0058
comma
l_int|0x0059
comma
l_int|0x005a
comma
l_int|0x005b
comma
l_int|0x005c
comma
l_int|0x005d
comma
l_int|0x005e
comma
l_int|0x005f
comma
l_int|0x0060
comma
l_int|0x0061
comma
l_int|0x0062
comma
l_int|0x0063
comma
l_int|0x0064
comma
l_int|0x0065
comma
l_int|0x0066
comma
l_int|0x0067
comma
l_int|0x0068
comma
l_int|0x0069
comma
l_int|0x006a
comma
l_int|0x006b
comma
l_int|0x006c
comma
l_int|0x006d
comma
l_int|0x006e
comma
l_int|0x006f
comma
l_int|0x0070
comma
l_int|0x0071
comma
l_int|0x0072
comma
l_int|0x0073
comma
l_int|0x0074
comma
l_int|0x0075
comma
l_int|0x0076
comma
l_int|0x0077
comma
l_int|0x0078
comma
l_int|0x0079
comma
l_int|0x007a
comma
l_int|0x007b
comma
l_int|0x007c
comma
l_int|0x007d
comma
l_int|0x007e
comma
l_int|0x2302
comma
l_int|0x00c7
comma
l_int|0x00fc
comma
l_int|0x00e9
comma
l_int|0x00e2
comma
l_int|0x00e4
comma
l_int|0x00e0
comma
l_int|0x00e5
comma
l_int|0x00e7
comma
l_int|0x00ea
comma
l_int|0x00eb
comma
l_int|0x00e8
comma
l_int|0x00ef
comma
l_int|0x00ee
comma
l_int|0x00ec
comma
l_int|0x00c4
comma
l_int|0x00c5
comma
l_int|0x00c9
comma
l_int|0x00e6
comma
l_int|0x00c6
comma
l_int|0x00f4
comma
l_int|0x00f6
comma
l_int|0x00f2
comma
l_int|0x00fb
comma
l_int|0x00f9
comma
l_int|0x00ff
comma
l_int|0x00d6
comma
l_int|0x00dc
comma
l_int|0x00a2
comma
l_int|0x00a3
comma
l_int|0x00a5
comma
l_int|0x20a7
comma
l_int|0x0192
comma
l_int|0x00e1
comma
l_int|0x00ed
comma
l_int|0x00f3
comma
l_int|0x00fa
comma
l_int|0x00f1
comma
l_int|0x00d1
comma
l_int|0x00aa
comma
l_int|0x00ba
comma
l_int|0x00bf
comma
l_int|0x2310
comma
l_int|0x00ac
comma
l_int|0x00bd
comma
l_int|0x00bc
comma
l_int|0x00a1
comma
l_int|0x00ab
comma
l_int|0x00bb
comma
l_int|0x2591
comma
l_int|0x2592
comma
l_int|0x2593
comma
l_int|0x2502
comma
l_int|0x2524
comma
l_int|0x2561
comma
l_int|0x2562
comma
l_int|0x2556
comma
l_int|0x2555
comma
l_int|0x2563
comma
l_int|0x2551
comma
l_int|0x2557
comma
l_int|0x255d
comma
l_int|0x255c
comma
l_int|0x255b
comma
l_int|0x2510
comma
l_int|0x2514
comma
l_int|0x2534
comma
l_int|0x252c
comma
l_int|0x251c
comma
l_int|0x2500
comma
l_int|0x253c
comma
l_int|0x255e
comma
l_int|0x255f
comma
l_int|0x255a
comma
l_int|0x2554
comma
l_int|0x2569
comma
l_int|0x2566
comma
l_int|0x2560
comma
l_int|0x2550
comma
l_int|0x256c
comma
l_int|0x2567
comma
l_int|0x2568
comma
l_int|0x2564
comma
l_int|0x2565
comma
l_int|0x2559
comma
l_int|0x2558
comma
l_int|0x2552
comma
l_int|0x2553
comma
l_int|0x256b
comma
l_int|0x256a
comma
l_int|0x2518
comma
l_int|0x250c
comma
l_int|0x2588
comma
l_int|0x2584
comma
l_int|0x258c
comma
l_int|0x2590
comma
l_int|0x2580
comma
l_int|0x03b1
comma
l_int|0x00df
comma
l_int|0x0393
comma
l_int|0x03c0
comma
l_int|0x03a3
comma
l_int|0x03c3
comma
l_int|0x00b5
comma
l_int|0x03c4
comma
l_int|0x03a6
comma
l_int|0x0398
comma
l_int|0x03a9
comma
l_int|0x03b4
comma
l_int|0x221e
comma
l_int|0x03c6
comma
l_int|0x03b5
comma
l_int|0x2229
comma
l_int|0x2261
comma
l_int|0x00b1
comma
l_int|0x2265
comma
l_int|0x2264
comma
l_int|0x2320
comma
l_int|0x2321
comma
l_int|0x00f7
comma
l_int|0x2248
comma
l_int|0x00b0
comma
l_int|0x2219
comma
l_int|0x00b7
comma
l_int|0x221a
comma
l_int|0x207f
comma
l_int|0x00b2
comma
l_int|0x25a0
comma
l_int|0x00a0
)brace
comma
multiline_comment|/* User mapping -- default to codes for direct font mapping */
(brace
l_int|0xf000
comma
l_int|0xf001
comma
l_int|0xf002
comma
l_int|0xf003
comma
l_int|0xf004
comma
l_int|0xf005
comma
l_int|0xf006
comma
l_int|0xf007
comma
l_int|0xf008
comma
l_int|0xf009
comma
l_int|0xf00a
comma
l_int|0xf00b
comma
l_int|0xf00c
comma
l_int|0xf00d
comma
l_int|0xf00e
comma
l_int|0xf00f
comma
l_int|0xf010
comma
l_int|0xf011
comma
l_int|0xf012
comma
l_int|0xf013
comma
l_int|0xf014
comma
l_int|0xf015
comma
l_int|0xf016
comma
l_int|0xf017
comma
l_int|0xf018
comma
l_int|0xf019
comma
l_int|0xf01a
comma
l_int|0xf01b
comma
l_int|0xf01c
comma
l_int|0xf01d
comma
l_int|0xf01e
comma
l_int|0xf01f
comma
l_int|0xf020
comma
l_int|0xf021
comma
l_int|0xf022
comma
l_int|0xf023
comma
l_int|0xf024
comma
l_int|0xf025
comma
l_int|0xf026
comma
l_int|0xf027
comma
l_int|0xf028
comma
l_int|0xf029
comma
l_int|0xf02a
comma
l_int|0xf02b
comma
l_int|0xf02c
comma
l_int|0xf02d
comma
l_int|0xf02e
comma
l_int|0xf02f
comma
l_int|0xf030
comma
l_int|0xf031
comma
l_int|0xf032
comma
l_int|0xf033
comma
l_int|0xf034
comma
l_int|0xf035
comma
l_int|0xf036
comma
l_int|0xf037
comma
l_int|0xf038
comma
l_int|0xf039
comma
l_int|0xf03a
comma
l_int|0xf03b
comma
l_int|0xf03c
comma
l_int|0xf03d
comma
l_int|0xf03e
comma
l_int|0xf03f
comma
l_int|0xf040
comma
l_int|0xf041
comma
l_int|0xf042
comma
l_int|0xf043
comma
l_int|0xf044
comma
l_int|0xf045
comma
l_int|0xf046
comma
l_int|0xf047
comma
l_int|0xf048
comma
l_int|0xf049
comma
l_int|0xf04a
comma
l_int|0xf04b
comma
l_int|0xf04c
comma
l_int|0xf04d
comma
l_int|0xf04e
comma
l_int|0xf04f
comma
l_int|0xf050
comma
l_int|0xf051
comma
l_int|0xf052
comma
l_int|0xf053
comma
l_int|0xf054
comma
l_int|0xf055
comma
l_int|0xf056
comma
l_int|0xf057
comma
l_int|0xf058
comma
l_int|0xf059
comma
l_int|0xf05a
comma
l_int|0xf05b
comma
l_int|0xf05c
comma
l_int|0xf05d
comma
l_int|0xf05e
comma
l_int|0xf05f
comma
l_int|0xf060
comma
l_int|0xf061
comma
l_int|0xf062
comma
l_int|0xf063
comma
l_int|0xf064
comma
l_int|0xf065
comma
l_int|0xf066
comma
l_int|0xf067
comma
l_int|0xf068
comma
l_int|0xf069
comma
l_int|0xf06a
comma
l_int|0xf06b
comma
l_int|0xf06c
comma
l_int|0xf06d
comma
l_int|0xf06e
comma
l_int|0xf06f
comma
l_int|0xf070
comma
l_int|0xf071
comma
l_int|0xf072
comma
l_int|0xf073
comma
l_int|0xf074
comma
l_int|0xf075
comma
l_int|0xf076
comma
l_int|0xf077
comma
l_int|0xf078
comma
l_int|0xf079
comma
l_int|0xf07a
comma
l_int|0xf07b
comma
l_int|0xf07c
comma
l_int|0xf07d
comma
l_int|0xf07e
comma
l_int|0xf07f
comma
l_int|0xf080
comma
l_int|0xf081
comma
l_int|0xf082
comma
l_int|0xf083
comma
l_int|0xf084
comma
l_int|0xf085
comma
l_int|0xf086
comma
l_int|0xf087
comma
l_int|0xf088
comma
l_int|0xf089
comma
l_int|0xf08a
comma
l_int|0xf08b
comma
l_int|0xf08c
comma
l_int|0xf08d
comma
l_int|0xf08e
comma
l_int|0xf08f
comma
l_int|0xf090
comma
l_int|0xf091
comma
l_int|0xf092
comma
l_int|0xf093
comma
l_int|0xf094
comma
l_int|0xf095
comma
l_int|0xf096
comma
l_int|0xf097
comma
l_int|0xf098
comma
l_int|0xf099
comma
l_int|0xf09a
comma
l_int|0xf09b
comma
l_int|0xf09c
comma
l_int|0xf09d
comma
l_int|0xf09e
comma
l_int|0xf09f
comma
l_int|0xf0a0
comma
l_int|0xf0a1
comma
l_int|0xf0a2
comma
l_int|0xf0a3
comma
l_int|0xf0a4
comma
l_int|0xf0a5
comma
l_int|0xf0a6
comma
l_int|0xf0a7
comma
l_int|0xf0a8
comma
l_int|0xf0a9
comma
l_int|0xf0aa
comma
l_int|0xf0ab
comma
l_int|0xf0ac
comma
l_int|0xf0ad
comma
l_int|0xf0ae
comma
l_int|0xf0af
comma
l_int|0xf0b0
comma
l_int|0xf0b1
comma
l_int|0xf0b2
comma
l_int|0xf0b3
comma
l_int|0xf0b4
comma
l_int|0xf0b5
comma
l_int|0xf0b6
comma
l_int|0xf0b7
comma
l_int|0xf0b8
comma
l_int|0xf0b9
comma
l_int|0xf0ba
comma
l_int|0xf0bb
comma
l_int|0xf0bc
comma
l_int|0xf0bd
comma
l_int|0xf0be
comma
l_int|0xf0bf
comma
l_int|0xf0c0
comma
l_int|0xf0c1
comma
l_int|0xf0c2
comma
l_int|0xf0c3
comma
l_int|0xf0c4
comma
l_int|0xf0c5
comma
l_int|0xf0c6
comma
l_int|0xf0c7
comma
l_int|0xf0c8
comma
l_int|0xf0c9
comma
l_int|0xf0ca
comma
l_int|0xf0cb
comma
l_int|0xf0cc
comma
l_int|0xf0cd
comma
l_int|0xf0ce
comma
l_int|0xf0cf
comma
l_int|0xf0d0
comma
l_int|0xf0d1
comma
l_int|0xf0d2
comma
l_int|0xf0d3
comma
l_int|0xf0d4
comma
l_int|0xf0d5
comma
l_int|0xf0d6
comma
l_int|0xf0d7
comma
l_int|0xf0d8
comma
l_int|0xf0d9
comma
l_int|0xf0da
comma
l_int|0xf0db
comma
l_int|0xf0dc
comma
l_int|0xf0dd
comma
l_int|0xf0de
comma
l_int|0xf0df
comma
l_int|0xf0e0
comma
l_int|0xf0e1
comma
l_int|0xf0e2
comma
l_int|0xf0e3
comma
l_int|0xf0e4
comma
l_int|0xf0e5
comma
l_int|0xf0e6
comma
l_int|0xf0e7
comma
l_int|0xf0e8
comma
l_int|0xf0e9
comma
l_int|0xf0ea
comma
l_int|0xf0eb
comma
l_int|0xf0ec
comma
l_int|0xf0ed
comma
l_int|0xf0ee
comma
l_int|0xf0ef
comma
l_int|0xf0f0
comma
l_int|0xf0f1
comma
l_int|0xf0f2
comma
l_int|0xf0f3
comma
l_int|0xf0f4
comma
l_int|0xf0f5
comma
l_int|0xf0f6
comma
l_int|0xf0f7
comma
l_int|0xf0f8
comma
l_int|0xf0f9
comma
l_int|0xf0fa
comma
l_int|0xf0fb
comma
l_int|0xf0fc
comma
l_int|0xf0fd
comma
l_int|0xf0fe
comma
l_int|0xf0ff
)brace
)brace
suffix:semicolon
multiline_comment|/* The standard kernel character-to-font mappings are not invertible&n;   -- this is just a best effort. */
DECL|macro|MAX_GLYPH
mdefine_line|#define MAX_GLYPH 512&t;&t;/* Max possible glyph value */
DECL|variable|inv_translate
r_static
r_int
id|inv_translate
(braket
id|MAX_NR_CONSOLES
)braket
suffix:semicolon
DECL|struct|uni_pagedir
r_struct
id|uni_pagedir
(brace
DECL|member|uni_pgdir
id|u16
op_star
op_star
id|uni_pgdir
(braket
l_int|32
)braket
suffix:semicolon
DECL|member|refcount
r_int
r_int
id|refcount
suffix:semicolon
DECL|member|sum
r_int
r_int
id|sum
suffix:semicolon
DECL|member|inverse_translations
r_int
r_char
op_star
id|inverse_translations
(braket
l_int|4
)braket
suffix:semicolon
DECL|member|readonly
r_int
id|readonly
suffix:semicolon
)brace
suffix:semicolon
DECL|variable|dflt
r_static
r_struct
id|uni_pagedir
op_star
id|dflt
suffix:semicolon
DECL|function|set_inverse_transl
r_static
r_void
id|set_inverse_transl
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|uni_pagedir
op_star
id|p
comma
r_int
id|i
)paren
(brace
r_int
id|j
comma
id|glyph
suffix:semicolon
r_int
r_int
op_star
id|t
op_assign
id|translations
(braket
id|i
)braket
suffix:semicolon
r_int
r_char
op_star
id|q
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p
)paren
r_return
suffix:semicolon
id|q
op_assign
id|p-&gt;inverse_translations
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|q
)paren
(brace
id|q
op_assign
id|p-&gt;inverse_translations
(braket
id|i
)braket
op_assign
(paren
r_int
r_char
op_star
)paren
id|kmalloc
c_func
(paren
id|MAX_GLYPH
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|q
)paren
r_return
suffix:semicolon
)brace
id|memset
c_func
(paren
id|q
comma
l_int|0
comma
id|MAX_GLYPH
)paren
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|E_TABSZ
suffix:semicolon
id|j
op_increment
)paren
(brace
id|glyph
op_assign
id|conv_uni_to_pc
c_func
(paren
id|conp
comma
id|t
(braket
id|j
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|glyph
op_ge
l_int|0
op_logical_and
id|glyph
OL
id|MAX_GLYPH
op_logical_and
id|q
(braket
id|glyph
)braket
OL
l_int|32
)paren
(brace
multiline_comment|/* prefer &squot;-&squot; above SHY etc. */
id|q
(braket
id|glyph
)braket
op_assign
id|j
suffix:semicolon
)brace
)brace
)brace
DECL|function|set_translate
r_int
r_int
op_star
id|set_translate
c_func
(paren
r_int
id|m
comma
r_int
id|currcons
)paren
(brace
id|inv_translate
(braket
id|currcons
)braket
op_assign
id|m
suffix:semicolon
r_return
id|translations
(braket
id|m
)braket
suffix:semicolon
)brace
multiline_comment|/*&n; * Inverse translation is impossible for several reasons:&n; * 1. The font&lt;-&gt;character maps are not 1-1.&n; * 2. The text may have been written while a different translation map&n; *    was active, or using Unicode.&n; * Still, it is now possible to a certain extent to cut and paste non-ASCII.&n; */
DECL|function|inverse_translate
r_int
r_char
id|inverse_translate
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_int
id|glyph
)paren
(brace
r_struct
id|uni_pagedir
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
id|glyph
OL
l_int|0
op_logical_or
id|glyph
op_ge
id|MAX_GLYPH
)paren
r_return
l_int|0
suffix:semicolon
r_else
r_if
c_cond
(paren
op_logical_neg
(paren
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
)paren
op_logical_or
op_logical_neg
id|p-&gt;inverse_translations
(braket
id|inv_translate
(braket
id|conp-&gt;vc_num
)braket
)braket
)paren
r_return
id|glyph
suffix:semicolon
r_else
r_return
id|p-&gt;inverse_translations
(braket
id|inv_translate
(braket
id|conp-&gt;vc_num
)braket
)braket
(braket
id|glyph
)braket
suffix:semicolon
)brace
DECL|function|update_user_maps
r_static
r_void
id|update_user_maps
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|p
comma
op_star
id|q
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_NR_CONSOLES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|vc_cons_allocated
c_func
(paren
id|i
)paren
)paren
r_continue
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|vc_cons
(braket
id|i
)braket
dot
id|d-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
id|p
op_logical_and
id|p
op_ne
id|q
)paren
(brace
id|set_inverse_transl
c_func
(paren
id|vc_cons
(braket
id|i
)braket
dot
id|d
comma
id|p
comma
id|USER_MAP
)paren
suffix:semicolon
id|q
op_assign
id|p
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Load customizable translation table&n; * arg points to a 256 byte translation table.&n; *&n; * The &quot;old&quot; variants are for translation directly to font (using the&n; * 0xf000-0xf0ff &quot;transparent&quot; Unicodes) whereas the &quot;new&quot; variants set&n; * Unicodes explicitly.&n; */
DECL|function|con_set_trans_old
r_int
id|con_set_trans_old
c_func
(paren
r_int
r_char
op_star
id|arg
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
r_int
op_star
id|p
op_assign
id|translations
(braket
id|USER_MAP
)braket
suffix:semicolon
id|i
op_assign
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
(paren
r_void
op_star
)paren
id|arg
comma
id|E_TABSZ
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
)paren
r_return
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E_TABSZ
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
r_char
id|uc
suffix:semicolon
id|__get_user
c_func
(paren
id|uc
comma
id|arg
op_plus
id|i
)paren
suffix:semicolon
id|p
(braket
id|i
)braket
op_assign
id|UNI_DIRECT_BASE
op_or
id|uc
suffix:semicolon
)brace
id|update_user_maps
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|con_get_trans_old
r_int
id|con_get_trans_old
c_func
(paren
r_int
r_char
op_star
id|arg
)paren
(brace
r_int
id|i
comma
id|ch
suffix:semicolon
r_int
r_int
op_star
id|p
op_assign
id|translations
(braket
id|USER_MAP
)braket
suffix:semicolon
id|i
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
(paren
r_void
op_star
)paren
id|arg
comma
id|E_TABSZ
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
)paren
r_return
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E_TABSZ
suffix:semicolon
id|i
op_increment
)paren
(brace
id|ch
op_assign
id|conv_uni_to_pc
c_func
(paren
id|vc_cons
(braket
id|fg_console
)braket
dot
id|d
comma
id|p
(braket
id|i
)braket
)paren
suffix:semicolon
id|__put_user
c_func
(paren
(paren
id|ch
op_amp
op_complement
l_int|0xff
)paren
ques
c_cond
l_int|0
suffix:colon
id|ch
comma
id|arg
op_plus
id|i
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|con_set_trans_new
r_int
id|con_set_trans_new
c_func
(paren
id|ushort
op_star
id|arg
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
r_int
op_star
id|p
op_assign
id|translations
(braket
id|USER_MAP
)braket
suffix:semicolon
id|i
op_assign
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
(paren
r_void
op_star
)paren
id|arg
comma
id|E_TABSZ
op_star
r_sizeof
(paren
r_int
r_int
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
)paren
r_return
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E_TABSZ
suffix:semicolon
id|i
op_increment
)paren
(brace
r_int
r_int
id|us
suffix:semicolon
id|__get_user
c_func
(paren
id|us
comma
id|arg
op_plus
id|i
)paren
suffix:semicolon
id|p
(braket
id|i
)braket
op_assign
id|us
suffix:semicolon
)brace
id|update_user_maps
c_func
(paren
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|con_get_trans_new
r_int
id|con_get_trans_new
c_func
(paren
id|ushort
op_star
id|arg
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
r_int
op_star
id|p
op_assign
id|translations
(braket
id|USER_MAP
)braket
suffix:semicolon
id|i
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
(paren
r_void
op_star
)paren
id|arg
comma
id|E_TABSZ
op_star
r_sizeof
(paren
r_int
r_int
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
)paren
r_return
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|E_TABSZ
suffix:semicolon
id|i
op_increment
)paren
id|__put_user
c_func
(paren
id|p
(braket
id|i
)braket
comma
id|arg
op_plus
id|i
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Unicode -&gt; current font conversion &n; *&n; * A font has at most 512 chars, usually 256.&n; * But one font position may represent several Unicode chars.&n; * A hashtable is somewhat of a pain to deal with, so use a&n; * &quot;paged table&quot; instead.  Simulation has shown the memory cost of&n; * this 3-level paged table scheme to be comparable to a hash table.&n; */
r_extern
id|u8
id|dfont_unicount
(braket
)braket
suffix:semicolon
multiline_comment|/* Defined in console_defmap.c */
r_extern
id|u16
id|dfont_unitable
(braket
)braket
suffix:semicolon
DECL|function|con_release_unimap
r_static
r_void
id|con_release_unimap
c_func
(paren
r_struct
id|uni_pagedir
op_star
id|p
)paren
(brace
id|u16
op_star
op_star
id|p1
suffix:semicolon
r_int
id|i
comma
id|j
suffix:semicolon
r_if
c_cond
(paren
id|p
op_eq
id|dflt
)paren
id|dflt
op_assign
l_int|NULL
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|i
)braket
)paren
op_ne
l_int|NULL
)paren
(brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|32
suffix:semicolon
id|j
op_increment
)paren
r_if
c_cond
(paren
id|p1
(braket
id|j
)braket
)paren
id|kfree
c_func
(paren
id|p1
(braket
id|j
)braket
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|p1
)paren
suffix:semicolon
)brace
id|p-&gt;uni_pgdir
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|4
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|p-&gt;inverse_translations
(braket
id|i
)braket
)paren
(brace
id|kfree
c_func
(paren
id|p-&gt;inverse_translations
(braket
id|i
)braket
)paren
suffix:semicolon
id|p-&gt;inverse_translations
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
)brace
DECL|function|con_free_unimap
r_void
id|con_free_unimap
c_func
(paren
r_int
id|con
)paren
(brace
r_struct
id|uni_pagedir
op_star
id|p
suffix:semicolon
r_struct
id|vc_data
op_star
id|conp
op_assign
id|vc_cons
(braket
id|con
)braket
dot
id|d
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p
)paren
r_return
suffix:semicolon
op_star
id|conp-&gt;vc_uni_pagedir_loc
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_decrement
id|p-&gt;refcount
)paren
r_return
suffix:semicolon
id|con_release_unimap
c_func
(paren
id|p
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
DECL|function|con_unify_unimap
r_static
r_int
id|con_unify_unimap
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_struct
id|uni_pagedir
op_star
id|p
)paren
(brace
r_int
id|i
comma
id|j
comma
id|k
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|q
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_NR_CONSOLES
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|vc_cons_allocated
c_func
(paren
id|i
)paren
)paren
r_continue
suffix:semicolon
id|q
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|vc_cons
(braket
id|i
)braket
dot
id|d-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|q
op_logical_or
id|q
op_eq
id|p
op_logical_or
id|q-&gt;sum
op_ne
id|p-&gt;sum
)paren
r_continue
suffix:semicolon
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|32
suffix:semicolon
id|j
op_increment
)paren
(brace
id|u16
op_star
op_star
id|p1
comma
op_star
op_star
id|q1
suffix:semicolon
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|j
)braket
suffix:semicolon
id|q1
op_assign
id|q-&gt;uni_pgdir
(braket
id|j
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p1
op_logical_and
op_logical_neg
id|q1
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p1
op_logical_or
op_logical_neg
id|q1
)paren
r_break
suffix:semicolon
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|32
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|p1
(braket
id|k
)braket
op_logical_and
op_logical_neg
id|q1
(braket
id|k
)braket
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p1
(braket
id|k
)braket
op_logical_or
op_logical_neg
id|q1
(braket
id|k
)braket
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|memcmp
c_func
(paren
id|p1
(braket
id|k
)braket
comma
id|q1
(braket
id|k
)braket
comma
l_int|64
op_star
r_sizeof
(paren
id|u16
)paren
)paren
)paren
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|k
OL
l_int|32
)paren
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|j
op_eq
l_int|32
)paren
(brace
id|q-&gt;refcount
op_increment
suffix:semicolon
op_star
id|conp-&gt;vc_uni_pagedir_loc
op_assign
(paren
r_int
r_int
)paren
id|q
suffix:semicolon
id|con_release_unimap
c_func
(paren
id|p
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|p
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|con_insert_unipair
id|con_insert_unipair
c_func
(paren
r_struct
id|uni_pagedir
op_star
id|p
comma
id|u_short
id|unicode
comma
id|u_short
id|fontpos
)paren
(brace
r_int
id|i
comma
id|n
suffix:semicolon
id|u16
op_star
op_star
id|p1
comma
op_star
id|p2
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|n
op_assign
id|unicode
op_rshift
l_int|11
)braket
)paren
)paren
(brace
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|n
)braket
op_assign
id|kmalloc
c_func
(paren
l_int|32
op_star
r_sizeof
(paren
id|u16
op_star
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p1
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
id|p1
(braket
id|i
)braket
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|p2
op_assign
id|p1
(braket
id|n
op_assign
(paren
id|unicode
op_rshift
l_int|6
)paren
op_amp
l_int|0x1f
)braket
)paren
)paren
(brace
id|p2
op_assign
id|p1
(braket
id|n
)braket
op_assign
id|kmalloc
c_func
(paren
l_int|64
op_star
r_sizeof
(paren
id|u16
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p2
)paren
r_return
op_minus
id|ENOMEM
suffix:semicolon
id|memset
c_func
(paren
id|p2
comma
l_int|0xff
comma
l_int|64
op_star
r_sizeof
(paren
id|u16
)paren
)paren
suffix:semicolon
multiline_comment|/* No glyphs for the characters (yet) */
)brace
id|p2
(braket
id|unicode
op_amp
l_int|0x3f
)braket
op_assign
id|fontpos
suffix:semicolon
id|p-&gt;sum
op_add_assign
(paren
id|fontpos
op_lshift
l_int|20
)paren
op_plus
id|unicode
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* ui is a leftover from using a hashtable, but might be used again */
DECL|function|con_clear_unimap
r_int
id|con_clear_unimap
c_func
(paren
r_int
id|con
comma
r_struct
id|unimapinit
op_star
id|ui
)paren
(brace
r_struct
id|uni_pagedir
op_star
id|p
comma
op_star
id|q
suffix:semicolon
r_struct
id|vc_data
op_star
id|conp
op_assign
id|vc_cons
(braket
id|con
)braket
dot
id|d
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
id|p
op_logical_and
id|p-&gt;readonly
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p
op_logical_or
op_decrement
id|p-&gt;refcount
)paren
(brace
id|q
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
id|kmalloc
c_func
(paren
r_sizeof
(paren
op_star
id|p
)paren
comma
id|GFP_KERNEL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|q
)paren
(brace
r_if
c_cond
(paren
id|p
)paren
id|p-&gt;refcount
op_increment
suffix:semicolon
r_return
op_minus
id|ENOMEM
suffix:semicolon
)brace
id|memset
c_func
(paren
id|q
comma
l_int|0
comma
r_sizeof
(paren
op_star
id|q
)paren
)paren
suffix:semicolon
id|q-&gt;refcount
op_assign
l_int|1
suffix:semicolon
op_star
id|conp-&gt;vc_uni_pagedir_loc
op_assign
(paren
r_int
r_int
)paren
id|q
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|p
op_eq
id|dflt
)paren
id|dflt
op_assign
l_int|NULL
suffix:semicolon
id|p-&gt;refcount
op_increment
suffix:semicolon
id|p-&gt;sum
op_assign
l_int|0
suffix:semicolon
id|con_release_unimap
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|con_set_unimap
id|con_set_unimap
c_func
(paren
r_int
id|con
comma
id|ushort
id|ct
comma
r_struct
id|unipair
op_star
id|list
)paren
(brace
r_int
id|err
op_assign
l_int|0
comma
id|err1
comma
id|i
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|p
comma
op_star
id|q
suffix:semicolon
r_struct
id|vc_data
op_star
id|conp
op_assign
id|vc_cons
(braket
id|con
)braket
dot
id|d
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;readonly
)paren
r_return
op_minus
id|EIO
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|ct
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|p-&gt;refcount
OG
l_int|1
)paren
(brace
r_int
id|j
comma
id|k
suffix:semicolon
id|u16
op_star
op_star
id|p1
comma
op_star
id|p2
comma
id|l
suffix:semicolon
id|err1
op_assign
id|con_clear_unimap
c_func
(paren
id|con
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err1
)paren
r_return
id|err1
suffix:semicolon
id|q
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|l
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
(paren
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|i
)braket
)paren
)paren
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|32
suffix:semicolon
id|j
op_increment
)paren
r_if
c_cond
(paren
(paren
id|p2
op_assign
id|p1
(braket
id|j
)braket
)paren
)paren
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|64
suffix:semicolon
id|k
op_increment
comma
id|l
op_increment
)paren
r_if
c_cond
(paren
id|p2
(braket
id|k
)braket
op_ne
l_int|0xffff
)paren
(brace
id|err1
op_assign
id|con_insert_unipair
c_func
(paren
id|q
comma
id|l
comma
id|p2
(braket
id|k
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err1
)paren
(brace
id|p-&gt;refcount
op_increment
suffix:semicolon
op_star
id|conp-&gt;vc_uni_pagedir_loc
op_assign
(paren
r_int
r_int
)paren
id|p
suffix:semicolon
id|con_release_unimap
c_func
(paren
id|q
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|q
)paren
suffix:semicolon
r_return
id|err1
suffix:semicolon
)brace
)brace
id|p
op_assign
id|q
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|p
op_eq
id|dflt
)paren
id|dflt
op_assign
l_int|NULL
suffix:semicolon
r_while
c_loop
(paren
id|ct
op_decrement
)paren
(brace
r_int
r_int
id|unicode
comma
id|fontpos
suffix:semicolon
id|__get_user
c_func
(paren
id|unicode
comma
op_amp
id|list-&gt;unicode
)paren
suffix:semicolon
id|__get_user
c_func
(paren
id|fontpos
comma
op_amp
id|list-&gt;fontpos
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|err1
op_assign
id|con_insert_unipair
c_func
(paren
id|p
comma
id|unicode
comma
id|fontpos
)paren
)paren
op_ne
l_int|0
)paren
id|err
op_assign
id|err1
suffix:semicolon
id|list
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|con_unify_unimap
c_func
(paren
id|conp
comma
id|p
)paren
)paren
r_return
id|err
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|3
suffix:semicolon
id|i
op_increment
)paren
id|set_inverse_transl
c_func
(paren
id|conp
comma
id|p
comma
id|i
)paren
suffix:semicolon
multiline_comment|/* Update all inverse translations */
r_return
id|err
suffix:semicolon
)brace
multiline_comment|/* Loads the unimap for the hardware font, as defined in uni_hash.tbl.&n;   The representation used was the most compact I could come up&n;   with.  This routine is executed at sys_setup time, and when the&n;   PIO_FONTRESET ioctl is called. */
r_int
DECL|function|con_set_default_unimap
id|con_set_default_unimap
c_func
(paren
r_int
id|con
)paren
(brace
r_int
id|i
comma
id|j
comma
id|err
op_assign
l_int|0
comma
id|err1
suffix:semicolon
id|u16
op_star
id|q
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|p
suffix:semicolon
r_struct
id|vc_data
op_star
id|conp
op_assign
id|vc_cons
(braket
id|con
)braket
dot
id|d
suffix:semicolon
r_if
c_cond
(paren
id|dflt
)paren
(brace
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
id|p
op_eq
id|dflt
)paren
r_return
l_int|0
suffix:semicolon
id|dflt-&gt;refcount
op_increment
suffix:semicolon
op_star
id|conp-&gt;vc_uni_pagedir_loc
op_assign
(paren
r_int
r_int
)paren
id|dflt
suffix:semicolon
r_if
c_cond
(paren
id|p
op_logical_and
op_decrement
id|p-&gt;refcount
)paren
(brace
id|con_release_unimap
c_func
(paren
id|p
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|p
)paren
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* The default font is always 256 characters */
id|err
op_assign
id|con_clear_unimap
c_func
(paren
id|con
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
r_return
id|err
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
id|q
op_assign
id|dfont_unitable
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|256
suffix:semicolon
id|i
op_increment
)paren
r_for
c_loop
(paren
id|j
op_assign
id|dfont_unicount
(braket
id|i
)braket
suffix:semicolon
id|j
suffix:semicolon
id|j
op_decrement
)paren
(brace
id|err1
op_assign
id|con_insert_unipair
c_func
(paren
id|p
comma
op_star
(paren
id|q
op_increment
)paren
comma
id|i
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err1
)paren
id|err
op_assign
id|err1
suffix:semicolon
)brace
r_if
c_cond
(paren
id|con_unify_unimap
c_func
(paren
id|conp
comma
id|p
)paren
)paren
(brace
id|dflt
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|3
suffix:semicolon
id|i
op_increment
)paren
id|set_inverse_transl
c_func
(paren
id|conp
comma
id|p
comma
id|i
)paren
suffix:semicolon
multiline_comment|/* Update all inverse translations */
id|dflt
op_assign
id|p
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
r_int
DECL|function|con_copy_unimap
id|con_copy_unimap
c_func
(paren
r_int
id|dstcon
comma
r_int
id|srccon
)paren
(brace
r_struct
id|vc_data
op_star
id|sconp
op_assign
id|vc_cons
(braket
id|srccon
)braket
dot
id|d
suffix:semicolon
r_struct
id|vc_data
op_star
id|dconp
op_assign
id|vc_cons
(braket
id|dstcon
)braket
dot
id|d
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|q
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|vc_cons_allocated
c_func
(paren
id|srccon
)paren
op_logical_or
op_logical_neg
op_star
id|sconp-&gt;vc_uni_pagedir_loc
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
op_star
id|dconp-&gt;vc_uni_pagedir_loc
op_eq
op_star
id|sconp-&gt;vc_uni_pagedir_loc
)paren
r_return
l_int|0
suffix:semicolon
id|con_free_unimap
c_func
(paren
id|dstcon
)paren
suffix:semicolon
id|q
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|sconp-&gt;vc_uni_pagedir_loc
suffix:semicolon
id|q-&gt;refcount
op_increment
suffix:semicolon
op_star
id|dconp-&gt;vc_uni_pagedir_loc
op_assign
(paren
r_int
)paren
id|q
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_int
DECL|function|con_get_unimap
id|con_get_unimap
c_func
(paren
r_int
id|con
comma
id|ushort
id|ct
comma
id|ushort
op_star
id|uct
comma
r_struct
id|unipair
op_star
id|list
)paren
(brace
r_int
id|i
comma
id|j
comma
id|k
comma
id|ect
suffix:semicolon
id|u16
op_star
op_star
id|p1
comma
op_star
id|p2
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|p
suffix:semicolon
r_struct
id|vc_data
op_star
id|conp
op_assign
id|vc_cons
(braket
id|con
)braket
dot
id|d
suffix:semicolon
id|ect
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
)paren
(brace
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
(paren
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|i
)braket
)paren
)paren
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|32
suffix:semicolon
id|j
op_increment
)paren
r_if
c_cond
(paren
(paren
id|p2
op_assign
op_star
(paren
id|p1
op_increment
)paren
)paren
)paren
r_for
c_loop
(paren
id|k
op_assign
l_int|0
suffix:semicolon
id|k
OL
l_int|64
suffix:semicolon
id|k
op_increment
)paren
(brace
r_if
c_cond
(paren
op_star
id|p2
OL
id|MAX_GLYPH
op_logical_and
id|ect
op_increment
OL
id|ct
)paren
(brace
id|__put_user
c_func
(paren
(paren
id|u_short
)paren
(paren
(paren
id|i
op_lshift
l_int|11
)paren
op_plus
(paren
id|j
op_lshift
l_int|6
)paren
op_plus
id|k
)paren
comma
op_amp
id|list-&gt;unicode
)paren
suffix:semicolon
id|__put_user
c_func
(paren
(paren
id|u_short
)paren
op_star
id|p2
comma
op_amp
id|list-&gt;fontpos
)paren
suffix:semicolon
id|list
op_increment
suffix:semicolon
)brace
id|p2
op_increment
suffix:semicolon
)brace
)brace
id|__put_user
c_func
(paren
id|ect
comma
id|uct
)paren
suffix:semicolon
r_return
(paren
(paren
id|ect
op_le
id|ct
)paren
ques
c_cond
l_int|0
suffix:colon
op_minus
id|ENOMEM
)paren
suffix:semicolon
)brace
DECL|function|con_protect_unimap
r_void
id|con_protect_unimap
c_func
(paren
r_int
id|con
comma
r_int
id|rdonly
)paren
(brace
r_struct
id|uni_pagedir
op_star
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|vc_cons
(braket
id|con
)braket
dot
id|d-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
id|p
)paren
id|p-&gt;readonly
op_assign
id|rdonly
suffix:semicolon
)brace
r_int
DECL|function|conv_uni_to_pc
id|conv_uni_to_pc
c_func
(paren
r_struct
id|vc_data
op_star
id|conp
comma
r_int
id|ucs
)paren
(brace
r_int
id|h
suffix:semicolon
id|u16
op_star
op_star
id|p1
comma
op_star
id|p2
suffix:semicolon
r_struct
id|uni_pagedir
op_star
id|p
suffix:semicolon
multiline_comment|/* Only 16-bit codes supported at this time */
r_if
c_cond
(paren
id|ucs
OG
l_int|0xffff
)paren
id|ucs
op_assign
l_int|0xfffd
suffix:semicolon
multiline_comment|/* U+FFFD: REPLACEMENT CHARACTER */
r_else
r_if
c_cond
(paren
id|ucs
OL
l_int|0x20
op_logical_or
id|ucs
op_ge
l_int|0xfffe
)paren
r_return
op_minus
l_int|1
suffix:semicolon
multiline_comment|/* Not a printable character */
r_else
r_if
c_cond
(paren
id|ucs
op_eq
l_int|0xfeff
op_logical_or
(paren
id|ucs
op_ge
l_int|0x200a
op_logical_and
id|ucs
op_le
l_int|0x200f
)paren
)paren
r_return
op_minus
l_int|2
suffix:semicolon
multiline_comment|/* Zero-width space */
multiline_comment|/*&n;&t; * UNI_DIRECT_BASE indicates the start of the region in the User Zone&n;&t; * which always has a 1:1 mapping to the currently loaded font.  The&n;&t; * UNI_DIRECT_MASK indicates the bit span of the region.&n;&t; */
r_else
r_if
c_cond
(paren
(paren
id|ucs
op_amp
op_complement
id|UNI_DIRECT_MASK
)paren
op_eq
id|UNI_DIRECT_BASE
)paren
r_return
id|ucs
op_amp
id|UNI_DIRECT_MASK
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
op_star
id|conp-&gt;vc_uni_pagedir_loc
)paren
r_return
op_minus
l_int|3
suffix:semicolon
id|p
op_assign
(paren
r_struct
id|uni_pagedir
op_star
)paren
op_star
id|conp-&gt;vc_uni_pagedir_loc
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p1
op_assign
id|p-&gt;uni_pgdir
(braket
id|ucs
op_rshift
l_int|11
)braket
)paren
op_logical_and
(paren
id|p2
op_assign
id|p1
(braket
(paren
id|ucs
op_rshift
l_int|6
)paren
op_amp
l_int|0x1f
)braket
)paren
op_logical_and
(paren
id|h
op_assign
id|p2
(braket
id|ucs
op_amp
l_int|0x3f
)braket
)paren
OL
id|MAX_GLYPH
)paren
r_return
id|h
suffix:semicolon
r_return
op_minus
l_int|4
suffix:semicolon
multiline_comment|/* not found */
)brace
multiline_comment|/*&n; * This is called at sys_setup time, after memory and the console are&n; * initialized.  It must be possible to call kmalloc(..., GFP_KERNEL)&n; * from this function, hence the call from sys_setup.&n; */
r_void
id|__init
DECL|function|console_map_init
id|console_map_init
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|MAX_NR_CONSOLES
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|vc_cons_allocated
c_func
(paren
id|i
)paren
op_logical_and
op_logical_neg
op_star
id|vc_cons
(braket
id|i
)braket
dot
id|d-&gt;vc_uni_pagedir_loc
)paren
id|con_set_default_unimap
c_func
(paren
id|i
)paren
suffix:semicolon
)brace
eof
