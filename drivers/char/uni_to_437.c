multiline_comment|/*&n; * non-Latin-1 (&gt;0x00ff) Unicode -&gt; IBM CP437 conversion hash table&n; * Markus Kuhn&n; */
DECL|macro|IBM_HASHSIZE
mdefine_line|#define IBM_HASHSIZE   146
DECL|macro|IBM_HASHSTEP
mdefine_line|#define IBM_HASHSTEP    19
DECL|macro|IBM_HASHLEVEL
mdefine_line|#define IBM_HASHLEVEL    4
r_static
r_struct
(brace
DECL|member|ucs
r_int
r_int
id|ucs
suffix:semicolon
multiline_comment|/* a Unicode code */
DECL|member|ibm437
r_int
r_char
id|ibm437
suffix:semicolon
multiline_comment|/* the corresponding IBM code */
DECL|variable|ibm_hash
)brace
id|ibm_hash
(braket
id|IBM_HASHSIZE
)braket
op_assign
(brace
(brace
l_int|0x221a
comma
l_int|0xfb
)brace
comma
(brace
l_int|0x2580
comma
l_int|0xdf
)brace
comma
(brace
l_int|0x2524
comma
l_int|0xb4
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x221e
comma
l_int|0xec
)brace
comma
(brace
l_int|0x20a7
comma
l_int|0x9e
)brace
comma
(brace
l_int|0x2126
comma
l_int|0xea
)brace
comma
(brace
l_int|0x253c
comma
l_int|0xc5
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2588
comma
l_int|0xdb
)brace
comma
(brace
l_int|0x2666
comma
l_int|0x04
)brace
comma
(brace
l_int|0x2190
comma
l_int|0x1b
)brace
comma
(brace
l_int|0x2193
comma
l_int|0x19
)brace
comma
(brace
l_int|0x2665
comma
l_int|0x03
)brace
comma
(brace
l_int|0x2195
comma
l_int|0x12
)brace
comma
(brace
l_int|0x2663
comma
l_int|0x05
)brace
comma
(brace
l_int|0x2660
comma
l_int|0x06
)brace
comma
(brace
l_int|0x2590
comma
l_int|0xde
)brace
comma
(brace
l_int|0x2022
comma
l_int|0x07
)brace
comma
(brace
l_int|0x2592
comma
l_int|0xb1
)brace
comma
(brace
l_int|0x266c
comma
l_int|0x0e
)brace
comma
(brace
l_int|0x2502
comma
l_int|0xb3
)brace
comma
(brace
l_int|0x266a
comma
l_int|0x0d
)brace
comma
(brace
l_int|0x250c
comma
l_int|0xda
)brace
comma
(brace
l_int|0x258c
comma
l_int|0xdd
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2191
comma
l_int|0x18
)brace
comma
(brace
l_int|0x2261
comma
l_int|0xf0
)brace
comma
(brace
l_int|0x2514
comma
l_int|0xc0
)brace
comma
(brace
l_int|0x2192
comma
l_int|0x1a
)brace
comma
(brace
l_int|0x2264
comma
l_int|0xf3
)brace
comma
(brace
l_int|0x2194
comma
l_int|0x1d
)brace
comma
(brace
l_int|0x2591
comma
l_int|0xb0
)brace
comma
(brace
l_int|0x0393
comma
l_int|0xe2
)brace
comma
(brace
l_int|0x2593
comma
l_int|0xb2
)brace
comma
(brace
l_int|0x2500
comma
l_int|0xc4
)brace
comma
(brace
l_int|0x251c
comma
l_int|0xc3
)brace
comma
(brace
l_int|0x2205
comma
l_int|0xed
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x266b
comma
l_int|0x0e
)brace
comma
(brace
l_int|0x2518
comma
l_int|0xd9
)brace
comma
(brace
l_int|0x203c
comma
l_int|0x13
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2642
comma
l_int|0x0b
)brace
comma
(brace
l_int|0x2564
comma
l_int|0xd1
)brace
comma
(brace
l_int|0x2640
comma
l_int|0x0c
)brace
comma
(brace
l_int|0x2566
comma
l_int|0xcb
)brace
comma
(brace
l_int|0x2561
comma
l_int|0xb5
)brace
comma
(brace
l_int|0x2560
comma
l_int|0xcc
)brace
comma
(brace
l_int|0x2563
comma
l_int|0xb9
)brace
comma
(brace
l_int|0x2562
comma
l_int|0xb6
)brace
comma
(brace
l_int|0x2510
comma
l_int|0xbf
)brace
comma
(brace
l_int|0x256c
comma
l_int|0xce
)brace
comma
(brace
l_int|0x2008
comma
l_int|0x00
)brace
comma
(brace
l_int|0x03a6
comma
l_int|0xe8
)brace
comma
(brace
l_int|0x2569
comma
l_int|0xca
)brace
comma
(brace
l_int|0x2568
comma
l_int|0xd0
)brace
comma
(brace
l_int|0x256b
comma
l_int|0xd7
)brace
comma
(brace
l_int|0x256a
comma
l_int|0xd8
)brace
comma
(brace
l_int|0x03a9
comma
l_int|0xea
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x25c0
comma
l_int|0x11
)brace
comma
(brace
l_int|0x0398
comma
l_int|0xe9
)brace
comma
(brace
l_int|0x2567
comma
l_int|0xcf
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2248
comma
l_int|0xf7
)brace
comma
(brace
l_int|0x03b1
comma
l_int|0xe0
)brace
comma
(brace
l_int|0x03a3
comma
l_int|0xe4
)brace
comma
(brace
l_int|0x2265
comma
l_int|0xf2
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x25cb
comma
l_int|0x09
)brace
comma
(brace
l_int|0x03b4
comma
l_int|0xeb
)brace
comma
(brace
l_int|0x2320
comma
l_int|0xf4
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x25c4
comma
l_int|0x11
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x03bc
comma
l_int|0xe6
)brace
comma
(brace
l_int|0x2565
comma
l_int|0xd2
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x22c5
comma
l_int|0xf9
)brace
comma
(brace
l_int|0x2302
comma
l_int|0x7f
)brace
comma
(brace
l_int|0x25d9
comma
l_int|0x0a
)brace
comma
(brace
l_int|0x25d8
comma
l_int|0x08
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x03c4
comma
l_int|0xe7
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2555
comma
l_int|0xb8
)brace
comma
(brace
l_int|0x2554
comma
l_int|0xc9
)brace
comma
(brace
l_int|0x2557
comma
l_int|0xbb
)brace
comma
(brace
l_int|0x2556
comma
l_int|0xb7
)brace
comma
(brace
l_int|0x2551
comma
l_int|0xba
)brace
comma
(brace
l_int|0x2550
comma
l_int|0xcd
)brace
comma
(brace
l_int|0x2553
comma
l_int|0xd6
)brace
comma
(brace
l_int|0x2552
comma
l_int|0xd5
)brace
comma
(brace
l_int|0x255d
comma
l_int|0xbc
)brace
comma
(brace
l_int|0x255c
comma
l_int|0xbd
)brace
comma
(brace
l_int|0x255f
comma
l_int|0xc7
)brace
comma
(brace
l_int|0x2310
comma
l_int|0xa9
)brace
comma
(brace
l_int|0x2559
comma
l_int|0xd3
)brace
comma
(brace
l_int|0x2558
comma
l_int|0xd4
)brace
comma
(brace
l_int|0x255b
comma
l_int|0xbe
)brace
comma
(brace
l_int|0x255a
comma
l_int|0xc8
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x0192
comma
l_int|0x9f
)brace
comma
(brace
l_int|0x2319
comma
l_int|0x1c
)brace
comma
(brace
l_int|0x2321
comma
l_int|0xf5
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x25a0
comma
l_int|0xfe
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x21a8
comma
l_int|0x17
)brace
comma
(brace
l_int|0x263c
comma
l_int|0x0f
)brace
comma
(brace
l_int|0x25ac
comma
l_int|0x16
)brace
comma
(brace
l_int|0x263a
comma
l_int|0x01
)brace
comma
(brace
l_int|0x263b
comma
l_int|0x02
)brace
comma
(brace
l_int|0x03c3
comma
l_int|0xe5
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x255e
comma
l_int|0xc6
)brace
comma
(brace
l_int|0x03c0
comma
l_int|0xe3
)brace
comma
(brace
l_int|0x03b2
comma
l_int|0xe1
)brace
comma
(brace
l_int|0x2300
comma
l_int|0xed
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x25b6
comma
l_int|0x10
)brace
comma
(brace
l_int|0x207f
comma
l_int|0xfc
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2208
comma
l_int|0xee
)brace
comma
(brace
l_int|0x25b2
comma
l_int|0x1e
)brace
comma
(brace
l_int|0x220e
comma
l_int|0xfe
)brace
comma
(brace
l_int|0x25bc
comma
l_int|0x1f
)brace
comma
(brace
l_int|0x212b
comma
l_int|0x8f
)brace
comma
(brace
l_int|0x252c
comma
l_int|0xc2
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2229
comma
l_int|0xef
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x25ba
comma
l_int|0x10
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2584
comma
l_int|0xdc
)brace
comma
(brace
l_int|0xffff
comma
l_int|0x00
)brace
comma
(brace
l_int|0x2534
comma
l_int|0xc1
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Find the correct PC character set (CP437) code for a &n; * UCS character outside Latin-1 by hash lookup in ibm_hash[].&n; * Return -1 if character not available, return -2 for zero-width&n; * space characters.&n; */
r_int
DECL|function|conv_uni_to_pc
id|conv_uni_to_pc
c_func
(paren
r_int
r_int
id|ucs
)paren
(brace
r_int
id|c
op_assign
op_minus
l_int|1
suffix:semicolon
r_int
id|i
comma
id|h
suffix:semicolon
r_if
c_cond
(paren
id|ucs
op_eq
l_int|0xffff
op_logical_or
id|ucs
op_eq
l_int|0xfffe
)paren
r_return
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|ucs
op_eq
l_int|0xfeff
op_logical_or
(paren
id|ucs
op_ge
l_int|0x200a
op_logical_and
id|ucs
op_le
l_int|0x200f
)paren
)paren
r_return
op_minus
l_int|2
suffix:semicolon
id|h
op_assign
(paren
id|ucs
op_xor
(paren
id|ucs
op_rshift
l_int|8
)paren
)paren
op_mod
id|IBM_HASHSIZE
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|IBM_HASHLEVEL
op_logical_and
id|c
op_eq
op_minus
l_int|1
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|ibm_hash
(braket
id|h
)braket
dot
id|ucs
op_eq
id|ucs
)paren
id|c
op_assign
id|ibm_hash
(braket
id|h
)braket
dot
id|ibm437
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|h
op_add_assign
id|IBM_HASHSTEP
)paren
op_ge
id|IBM_HASHSIZE
)paren
id|h
op_sub_assign
id|IBM_HASHSIZE
suffix:semicolon
r_return
id|c
suffix:semicolon
)brace
macro_line|#if 0
multiline_comment|/* &n; * Conversion from unicode to ibm pc character set (code page 437)&n; *&n; * aeb@cwi.nl, Dec 1993&n; */
mdefine_line|#define NOTFOUND&t;254&t;/* small square */
r_static
r_struct
id|unipc
(brace
r_int
id|unicode
suffix:semicolon
r_int
r_char
id|pc
suffix:semicolon
)brace
id|uni_to_pc
(braket
l_int|255
)braket
op_assign
(brace
(brace
l_int|0x0020
comma
l_int|0x20
)brace
comma
(brace
l_int|0x0021
comma
l_int|0x21
)brace
comma
(brace
l_int|0x0022
comma
l_int|0x22
)brace
comma
(brace
l_int|0x0023
comma
l_int|0x23
)brace
comma
(brace
l_int|0x0024
comma
l_int|0x24
)brace
comma
(brace
l_int|0x0025
comma
l_int|0x25
)brace
comma
(brace
l_int|0x0026
comma
l_int|0x26
)brace
comma
(brace
l_int|0x0027
comma
l_int|0x27
)brace
comma
(brace
l_int|0x0028
comma
l_int|0x28
)brace
comma
(brace
l_int|0x0029
comma
l_int|0x29
)brace
comma
(brace
l_int|0x002A
comma
l_int|0x2A
)brace
comma
(brace
l_int|0x002B
comma
l_int|0x2B
)brace
comma
(brace
l_int|0x002C
comma
l_int|0x2C
)brace
comma
(brace
l_int|0x002D
comma
l_int|0x2D
)brace
comma
(brace
l_int|0x002E
comma
l_int|0x2E
)brace
comma
(brace
l_int|0x002F
comma
l_int|0x2F
)brace
comma
(brace
l_int|0x0030
comma
l_int|0x30
)brace
comma
(brace
l_int|0x0031
comma
l_int|0x31
)brace
comma
(brace
l_int|0x0032
comma
l_int|0x32
)brace
comma
(brace
l_int|0x0033
comma
l_int|0x33
)brace
comma
(brace
l_int|0x0034
comma
l_int|0x34
)brace
comma
(brace
l_int|0x0035
comma
l_int|0x35
)brace
comma
(brace
l_int|0x0036
comma
l_int|0x36
)brace
comma
(brace
l_int|0x0037
comma
l_int|0x37
)brace
comma
(brace
l_int|0x0038
comma
l_int|0x38
)brace
comma
(brace
l_int|0x0039
comma
l_int|0x39
)brace
comma
(brace
l_int|0x003A
comma
l_int|0x3A
)brace
comma
(brace
l_int|0x003B
comma
l_int|0x3B
)brace
comma
(brace
l_int|0x003C
comma
l_int|0x3C
)brace
comma
(brace
l_int|0x003D
comma
l_int|0x3D
)brace
comma
(brace
l_int|0x003E
comma
l_int|0x3E
)brace
comma
(brace
l_int|0x003F
comma
l_int|0x3F
)brace
comma
(brace
l_int|0x0040
comma
l_int|0x40
)brace
comma
(brace
l_int|0x0041
comma
l_int|0x41
)brace
comma
(brace
l_int|0x0042
comma
l_int|0x42
)brace
comma
(brace
l_int|0x0043
comma
l_int|0x43
)brace
comma
(brace
l_int|0x0044
comma
l_int|0x44
)brace
comma
(brace
l_int|0x0045
comma
l_int|0x45
)brace
comma
(brace
l_int|0x0046
comma
l_int|0x46
)brace
comma
(brace
l_int|0x0047
comma
l_int|0x47
)brace
comma
(brace
l_int|0x0048
comma
l_int|0x48
)brace
comma
(brace
l_int|0x0049
comma
l_int|0x49
)brace
comma
(brace
l_int|0x004A
comma
l_int|0x4A
)brace
comma
(brace
l_int|0x004B
comma
l_int|0x4B
)brace
comma
(brace
l_int|0x004C
comma
l_int|0x4C
)brace
comma
(brace
l_int|0x004D
comma
l_int|0x4D
)brace
comma
(brace
l_int|0x004E
comma
l_int|0x4E
)brace
comma
(brace
l_int|0x004F
comma
l_int|0x4F
)brace
comma
(brace
l_int|0x0050
comma
l_int|0x50
)brace
comma
(brace
l_int|0x0051
comma
l_int|0x51
)brace
comma
(brace
l_int|0x0052
comma
l_int|0x52
)brace
comma
(brace
l_int|0x0053
comma
l_int|0x53
)brace
comma
(brace
l_int|0x0054
comma
l_int|0x54
)brace
comma
(brace
l_int|0x0055
comma
l_int|0x55
)brace
comma
(brace
l_int|0x0056
comma
l_int|0x56
)brace
comma
(brace
l_int|0x0057
comma
l_int|0x57
)brace
comma
(brace
l_int|0x0058
comma
l_int|0x58
)brace
comma
(brace
l_int|0x0059
comma
l_int|0x59
)brace
comma
(brace
l_int|0x005A
comma
l_int|0x5A
)brace
comma
(brace
l_int|0x005B
comma
l_int|0x5B
)brace
comma
(brace
l_int|0x005C
comma
l_int|0x5C
)brace
comma
(brace
l_int|0x005D
comma
l_int|0x5D
)brace
comma
(brace
l_int|0x005E
comma
l_int|0x5E
)brace
comma
(brace
l_int|0x005F
comma
l_int|0x5F
)brace
comma
(brace
l_int|0x0060
comma
l_int|0x60
)brace
comma
(brace
l_int|0x0061
comma
l_int|0x61
)brace
comma
(brace
l_int|0x0062
comma
l_int|0x62
)brace
comma
(brace
l_int|0x0063
comma
l_int|0x63
)brace
comma
(brace
l_int|0x0064
comma
l_int|0x64
)brace
comma
(brace
l_int|0x0065
comma
l_int|0x65
)brace
comma
(brace
l_int|0x0066
comma
l_int|0x66
)brace
comma
(brace
l_int|0x0067
comma
l_int|0x67
)brace
comma
(brace
l_int|0x0068
comma
l_int|0x68
)brace
comma
(brace
l_int|0x0069
comma
l_int|0x69
)brace
comma
(brace
l_int|0x006A
comma
l_int|0x6A
)brace
comma
(brace
l_int|0x006B
comma
l_int|0x6B
)brace
comma
(brace
l_int|0x006C
comma
l_int|0x6C
)brace
comma
(brace
l_int|0x006D
comma
l_int|0x6D
)brace
comma
(brace
l_int|0x006E
comma
l_int|0x6E
)brace
comma
(brace
l_int|0x006F
comma
l_int|0x6F
)brace
comma
(brace
l_int|0x0070
comma
l_int|0x70
)brace
comma
(brace
l_int|0x0071
comma
l_int|0x71
)brace
comma
(brace
l_int|0x0072
comma
l_int|0x72
)brace
comma
(brace
l_int|0x0073
comma
l_int|0x73
)brace
comma
(brace
l_int|0x0074
comma
l_int|0x74
)brace
comma
(brace
l_int|0x0075
comma
l_int|0x75
)brace
comma
(brace
l_int|0x0076
comma
l_int|0x76
)brace
comma
(brace
l_int|0x0077
comma
l_int|0x77
)brace
comma
(brace
l_int|0x0078
comma
l_int|0x78
)brace
comma
(brace
l_int|0x0079
comma
l_int|0x79
)brace
comma
(brace
l_int|0x007A
comma
l_int|0x7A
)brace
comma
(brace
l_int|0x007B
comma
l_int|0x7B
)brace
comma
(brace
l_int|0x007C
comma
l_int|0x7C
)brace
comma
(brace
l_int|0x007D
comma
l_int|0x7D
)brace
comma
(brace
l_int|0x007E
comma
l_int|0x7E
)brace
comma
(brace
l_int|0x00A0
comma
l_int|0xFF
)brace
comma
(brace
l_int|0x00A1
comma
l_int|0xAD
)brace
comma
(brace
l_int|0x00A2
comma
l_int|0x9B
)brace
comma
(brace
l_int|0x00A3
comma
l_int|0x9C
)brace
comma
(brace
l_int|0x00A5
comma
l_int|0x9D
)brace
comma
(brace
l_int|0x00A7
comma
l_int|0x15
)brace
comma
(brace
l_int|0x00AA
comma
l_int|0xA6
)brace
comma
(brace
l_int|0x00AB
comma
l_int|0xAE
)brace
comma
(brace
l_int|0x00AC
comma
l_int|0xAA
)brace
comma
(brace
l_int|0x00B0
comma
l_int|0xF8
)brace
comma
(brace
l_int|0x00B1
comma
l_int|0xF1
)brace
comma
(brace
l_int|0x00B2
comma
l_int|0xFD
)brace
comma
(brace
l_int|0x00B5
comma
l_int|0xE6
)brace
comma
(brace
l_int|0x00B6
comma
l_int|0x14
)brace
comma
(brace
l_int|0x00B7
comma
l_int|0xFA
)brace
comma
(brace
l_int|0x00BA
comma
l_int|0xA7
)brace
comma
(brace
l_int|0x00BB
comma
l_int|0xAF
)brace
comma
(brace
l_int|0x00BC
comma
l_int|0xAC
)brace
comma
(brace
l_int|0x00BD
comma
l_int|0xAB
)brace
comma
(brace
l_int|0x00BF
comma
l_int|0xA8
)brace
comma
(brace
l_int|0x00C4
comma
l_int|0x8E
)brace
comma
(brace
l_int|0x00C5
comma
l_int|0x8F
)brace
comma
(brace
l_int|0x00C6
comma
l_int|0x92
)brace
comma
(brace
l_int|0x00C7
comma
l_int|0x80
)brace
comma
(brace
l_int|0x00C9
comma
l_int|0x90
)brace
comma
(brace
l_int|0x00D1
comma
l_int|0xA5
)brace
comma
(brace
l_int|0x00D6
comma
l_int|0x99
)brace
comma
(brace
l_int|0x00DC
comma
l_int|0x9A
)brace
comma
(brace
l_int|0x00DF
comma
l_int|0xE1
)brace
comma
(brace
l_int|0x00E0
comma
l_int|0x85
)brace
comma
(brace
l_int|0x00E1
comma
l_int|0xA0
)brace
comma
(brace
l_int|0x00E2
comma
l_int|0x83
)brace
comma
(brace
l_int|0x00E4
comma
l_int|0x84
)brace
comma
(brace
l_int|0x00E5
comma
l_int|0x86
)brace
comma
(brace
l_int|0x00E6
comma
l_int|0x91
)brace
comma
(brace
l_int|0x00E7
comma
l_int|0x87
)brace
comma
(brace
l_int|0x00E8
comma
l_int|0x8A
)brace
comma
(brace
l_int|0x00E9
comma
l_int|0x82
)brace
comma
(brace
l_int|0x00EA
comma
l_int|0x88
)brace
comma
(brace
l_int|0x00EB
comma
l_int|0x89
)brace
comma
(brace
l_int|0x00EC
comma
l_int|0x8D
)brace
comma
(brace
l_int|0x00ED
comma
l_int|0xA1
)brace
comma
(brace
l_int|0x00EE
comma
l_int|0x8C
)brace
comma
(brace
l_int|0x00EF
comma
l_int|0x8B
)brace
comma
(brace
l_int|0x00F1
comma
l_int|0xA4
)brace
comma
(brace
l_int|0x00F2
comma
l_int|0x95
)brace
comma
(brace
l_int|0x00F3
comma
l_int|0xA2
)brace
comma
(brace
l_int|0x00F4
comma
l_int|0x93
)brace
comma
(brace
l_int|0x00F6
comma
l_int|0x94
)brace
comma
(brace
l_int|0x00F7
comma
l_int|0xF6
)brace
comma
(brace
l_int|0x00F9
comma
l_int|0x97
)brace
comma
(brace
l_int|0x00FA
comma
l_int|0xA3
)brace
comma
(brace
l_int|0x00FB
comma
l_int|0x96
)brace
comma
(brace
l_int|0x00FC
comma
l_int|0x81
)brace
comma
(brace
l_int|0x00FF
comma
l_int|0x98
)brace
comma
(brace
l_int|0x0192
comma
l_int|0x9F
)brace
comma
(brace
l_int|0x0393
comma
l_int|0xE2
)brace
comma
(brace
l_int|0x0398
comma
l_int|0xE9
)brace
comma
(brace
l_int|0x03A3
comma
l_int|0xE4
)brace
comma
(brace
l_int|0x03A6
comma
l_int|0xE8
)brace
comma
(brace
l_int|0x03A9
comma
l_int|0xEA
)brace
comma
(brace
l_int|0x03B1
comma
l_int|0xE0
)brace
comma
(brace
l_int|0x03B4
comma
l_int|0xEB
)brace
comma
(brace
l_int|0x03B5
comma
l_int|0xEE
)brace
comma
(brace
l_int|0x03C0
comma
l_int|0xE3
)brace
comma
(brace
l_int|0x03C3
comma
l_int|0xE5
)brace
comma
(brace
l_int|0x03C4
comma
l_int|0xE7
)brace
comma
(brace
l_int|0x03C6
comma
l_int|0xED
)brace
comma
(brace
l_int|0x2022
comma
l_int|0x07
)brace
comma
(brace
l_int|0x203C
comma
l_int|0x13
)brace
comma
(brace
l_int|0x207F
comma
l_int|0xFC
)brace
comma
(brace
l_int|0x20A7
comma
l_int|0x9E
)brace
comma
(brace
l_int|0x2190
comma
l_int|0x1B
)brace
comma
(brace
l_int|0x2191
comma
l_int|0x18
)brace
comma
(brace
l_int|0x2192
comma
l_int|0x1A
)brace
comma
(brace
l_int|0x2193
comma
l_int|0x19
)brace
comma
(brace
l_int|0x2194
comma
l_int|0x1D
)brace
comma
(brace
l_int|0x2195
comma
l_int|0x12
)brace
comma
(brace
l_int|0x21A8
comma
l_int|0x17
)brace
comma
(brace
l_int|0x2219
comma
l_int|0xF9
)brace
comma
(brace
l_int|0x221A
comma
l_int|0xFB
)brace
comma
(brace
l_int|0x221E
comma
l_int|0xEC
)brace
comma
(brace
l_int|0x221F
comma
l_int|0x1C
)brace
comma
(brace
l_int|0x2229
comma
l_int|0xEF
)brace
comma
(brace
l_int|0x2248
comma
l_int|0xF7
)brace
comma
(brace
l_int|0x2261
comma
l_int|0xF0
)brace
comma
(brace
l_int|0x2264
comma
l_int|0xF3
)brace
comma
(brace
l_int|0x2265
comma
l_int|0xF2
)brace
comma
(brace
l_int|0x2302
comma
l_int|0x7F
)brace
comma
(brace
l_int|0x2310
comma
l_int|0xA9
)brace
comma
(brace
l_int|0x2320
comma
l_int|0xF4
)brace
comma
(brace
l_int|0x2321
comma
l_int|0xF5
)brace
comma
(brace
l_int|0x2500
comma
l_int|0xC4
)brace
comma
(brace
l_int|0x2502
comma
l_int|0xB3
)brace
comma
(brace
l_int|0x250C
comma
l_int|0xDA
)brace
comma
(brace
l_int|0x2510
comma
l_int|0xBF
)brace
comma
(brace
l_int|0x2514
comma
l_int|0xC0
)brace
comma
(brace
l_int|0x2518
comma
l_int|0xD9
)brace
comma
(brace
l_int|0x251C
comma
l_int|0xC3
)brace
comma
(brace
l_int|0x2524
comma
l_int|0xB4
)brace
comma
(brace
l_int|0x252C
comma
l_int|0xC2
)brace
comma
(brace
l_int|0x2534
comma
l_int|0xC1
)brace
comma
(brace
l_int|0x253C
comma
l_int|0xC5
)brace
comma
(brace
l_int|0x2550
comma
l_int|0xCD
)brace
comma
(brace
l_int|0x2551
comma
l_int|0xBA
)brace
comma
(brace
l_int|0x2552
comma
l_int|0xD5
)brace
comma
(brace
l_int|0x2553
comma
l_int|0xD6
)brace
comma
(brace
l_int|0x2554
comma
l_int|0xC9
)brace
comma
(brace
l_int|0x2555
comma
l_int|0xB8
)brace
comma
(brace
l_int|0x2556
comma
l_int|0xB7
)brace
comma
(brace
l_int|0x2557
comma
l_int|0xBB
)brace
comma
(brace
l_int|0x2558
comma
l_int|0xD4
)brace
comma
(brace
l_int|0x2559
comma
l_int|0xD3
)brace
comma
(brace
l_int|0x255A
comma
l_int|0xC8
)brace
comma
(brace
l_int|0x255B
comma
l_int|0xBE
)brace
comma
(brace
l_int|0x255C
comma
l_int|0xBD
)brace
comma
(brace
l_int|0x255D
comma
l_int|0xBC
)brace
comma
(brace
l_int|0x255E
comma
l_int|0xC6
)brace
comma
(brace
l_int|0x255F
comma
l_int|0xC7
)brace
comma
(brace
l_int|0x2560
comma
l_int|0xCC
)brace
comma
(brace
l_int|0x2561
comma
l_int|0xB5
)brace
comma
(brace
l_int|0x2562
comma
l_int|0xB6
)brace
comma
(brace
l_int|0x2563
comma
l_int|0xB9
)brace
comma
(brace
l_int|0x2564
comma
l_int|0xD1
)brace
comma
(brace
l_int|0x2565
comma
l_int|0xD2
)brace
comma
(brace
l_int|0x2566
comma
l_int|0xCB
)brace
comma
(brace
l_int|0x2567
comma
l_int|0xCF
)brace
comma
(brace
l_int|0x2568
comma
l_int|0xD0
)brace
comma
(brace
l_int|0x2569
comma
l_int|0xCA
)brace
comma
(brace
l_int|0x256A
comma
l_int|0xD8
)brace
comma
(brace
l_int|0x256B
comma
l_int|0xD7
)brace
comma
(brace
l_int|0x256C
comma
l_int|0xCE
)brace
comma
(brace
l_int|0x2580
comma
l_int|0xDF
)brace
comma
(brace
l_int|0x2584
comma
l_int|0xDC
)brace
comma
(brace
l_int|0x2588
comma
l_int|0xDB
)brace
comma
(brace
l_int|0x258C
comma
l_int|0xDD
)brace
comma
(brace
l_int|0x2590
comma
l_int|0xDE
)brace
comma
(brace
l_int|0x2591
comma
l_int|0xB0
)brace
comma
(brace
l_int|0x2592
comma
l_int|0xB1
)brace
comma
(brace
l_int|0x2593
comma
l_int|0xB2
)brace
comma
(brace
l_int|0x25A0
comma
l_int|0xFE
)brace
comma
(brace
l_int|0x25AC
comma
l_int|0x16
)brace
comma
(brace
l_int|0x25B2
comma
l_int|0x1E
)brace
comma
(brace
l_int|0x25BA
comma
l_int|0x10
)brace
comma
(brace
l_int|0x25BC
comma
l_int|0x1F
)brace
comma
(brace
l_int|0x25C4
comma
l_int|0x11
)brace
comma
(brace
l_int|0x25CB
comma
l_int|0x09
)brace
comma
(brace
l_int|0x25D8
comma
l_int|0x08
)brace
comma
(brace
l_int|0x25D9
comma
l_int|0x0A
)brace
comma
(brace
l_int|0x263A
comma
l_int|0x01
)brace
comma
(brace
l_int|0x263B
comma
l_int|0x02
)brace
comma
(brace
l_int|0x263C
comma
l_int|0x0F
)brace
comma
(brace
l_int|0x2640
comma
l_int|0x0C
)brace
comma
(brace
l_int|0x2642
comma
l_int|0x0B
)brace
comma
(brace
l_int|0x2660
comma
l_int|0x06
)brace
comma
(brace
l_int|0x2663
comma
l_int|0x05
)brace
comma
(brace
l_int|0x2665
comma
l_int|0x03
)brace
comma
(brace
l_int|0x2666
comma
l_int|0x04
)brace
comma
(brace
l_int|0x266A
comma
l_int|0x0D
)brace
comma
(brace
l_int|0x266B
comma
l_int|0x0E
)brace
)brace
suffix:semicolon
r_int
r_char
id|conv_uni_to_pc
c_func
(paren
r_int
r_int
id|u
)paren
(brace
multiline_comment|/* Binary search - no doubt this can be sped up using hash codes */
multiline_comment|/* (or by table lookup if we are in the first half) */
r_int
id|step
op_assign
l_int|128
suffix:semicolon
r_struct
id|unipc
op_star
id|up
op_assign
id|uni_to_pc
op_plus
id|step
op_minus
l_int|1
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
(brace
r_if
c_cond
(paren
id|up-&gt;unicode
op_eq
id|u
)paren
(brace
r_return
id|up-&gt;pc
suffix:semicolon
)brace
id|step
op_rshift_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|step
)paren
(brace
r_return
id|NOTFOUND
suffix:semicolon
)brace
r_if
c_cond
(paren
id|up-&gt;unicode
OL
id|u
)paren
(brace
id|up
op_add_assign
id|step
suffix:semicolon
)brace
r_else
id|up
op_sub_assign
id|step
suffix:semicolon
)brace
)brace
macro_line|#endif
eof
