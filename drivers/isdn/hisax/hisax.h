multiline_comment|/* $Id: hisax.h,v 1.13 1997/04/06 22:54:12 keil Exp $&n;&n; *   Basic declarations, defines and prototypes&n; *&n; * $Log: hisax.h,v $&n; * Revision 1.13  1997/04/06 22:54:12  keil&n; * Using SKB&squot;s&n; *&n; * Revision 1.12  1997/03/23 21:45:45  keil&n; * Add support for ELSA PCMCIA&n; *&n; * Revision 1.11  1997/02/11 01:36:02  keil&n; * New Param structure&n; *&n; * Revision 1.10  1997/02/09 00:23:52  keil&n; * new interface handling, one interface per card&n; *&n; * Revision 1.9  1997/01/27 23:18:44  keil&n; * prototype for releasestack_isdnl3&n; *&n; * Revision 1.8  1997/01/27 16:02:37  keil&n; * new cards, callc timers, HZDELAY macro, HiSax_getrev prototype&n; *&n; * Revision 1.7  1997/01/21 22:22:14  keil&n; * changes for 2.0; Elsa Quickstep support&n; *&n; * Revision 1.6  1997/01/04 13:48:28  keil&n; * primitiv for MDL_REMOVE added&n; *&n; * Revision 1.5  1996/12/08 19:49:19  keil&n; * Monitor channel support&n; *&n; * Revision 1.4  1996/11/18 15:35:39  keil&n; * some changes for ELSA cards&n; *&n; * Revision 1.3  1996/11/05 19:37:23  keil&n; * using config.h&n; *&n; * Revision 1.2  1996/10/27 22:21:52  keil&n; * CallFlags for broadcast messages&n; *&n; * Revision 1.1  1996/10/13 20:03:46  keil&n; * Initial revision&n; *&n; *&n; *&n; */
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/version.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/major.h&gt;
macro_line|#include &lt;asm/segment.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/signal.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/mman.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;linux/wait.h&gt;
macro_line|#include &lt;linux/isdnif.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
DECL|macro|PH_ACTIVATE
mdefine_line|#define PH_ACTIVATE   1
DECL|macro|PH_DATA
mdefine_line|#define PH_DATA       2
DECL|macro|PH_DEACTIVATE
mdefine_line|#define PH_DEACTIVATE 3
DECL|macro|MDL_ASSIGN
mdefine_line|#define MDL_ASSIGN       4
DECL|macro|DL_UNIT_DATA
mdefine_line|#define DL_UNIT_DATA     5
DECL|macro|SC_STARTUP
mdefine_line|#define SC_STARTUP       6
DECL|macro|CC_ESTABLISH
mdefine_line|#define CC_ESTABLISH     7
DECL|macro|DL_ESTABLISH
mdefine_line|#define DL_ESTABLISH     8
DECL|macro|DL_DATA
mdefine_line|#define DL_DATA          9
DECL|macro|CC_S_STATUS_ENQ
mdefine_line|#define CC_S_STATUS_ENQ  10
DECL|macro|CC_CONNECT
mdefine_line|#define CC_CONNECT       15
DECL|macro|CC_CONNECT_ACKNOWLEDGE
mdefine_line|#define CC_CONNECT_ACKNOWLEDGE 16
DECL|macro|CO_EOF
mdefine_line|#define CO_EOF                 17
DECL|macro|SC_DISCONNECT
mdefine_line|#define SC_DISCONNECT          18
DECL|macro|CO_DTMF
mdefine_line|#define CO_DTMF                19
DECL|macro|DL_RELEASE
mdefine_line|#define DL_RELEASE             20
DECL|macro|DL_FLUSH
mdefine_line|#define DL_FLUSH               21
DECL|macro|CO_ALARM
mdefine_line|#define CO_ALARM               22
DECL|macro|CC_REJECT
mdefine_line|#define CC_REJECT              23
DECL|macro|CC_SETUP_REQ
mdefine_line|#define CC_SETUP_REQ           24
DECL|macro|CC_SETUP_CNF
mdefine_line|#define CC_SETUP_CNF           25
DECL|macro|CC_SETUP_IND
mdefine_line|#define CC_SETUP_IND           26
DECL|macro|CC_SETUP_RSP
mdefine_line|#define CC_SETUP_RSP           27
DECL|macro|CC_SETUP_COMPLETE_IND
mdefine_line|#define CC_SETUP_COMPLETE_IND  28
DECL|macro|CC_DISCONNECT_REQ
mdefine_line|#define CC_DISCONNECT_REQ      29
DECL|macro|CC_DISCONNECT_IND
mdefine_line|#define CC_DISCONNECT_IND      30
DECL|macro|CC_RELEASE_CNF
mdefine_line|#define CC_RELEASE_CNF         31
DECL|macro|CC_RELEASE_IND
mdefine_line|#define CC_RELEASE_IND         32
DECL|macro|CC_RELEASE_REQ
mdefine_line|#define CC_RELEASE_REQ         33
DECL|macro|CC_REJECT_REQ
mdefine_line|#define CC_REJECT_REQ          34
DECL|macro|CC_PROCEEDING_IND
mdefine_line|#define CC_PROCEEDING_IND      35
DECL|macro|CC_DLRL
mdefine_line|#define CC_DLRL                36
DECL|macro|CC_DLEST
mdefine_line|#define CC_DLEST               37
DECL|macro|CC_ALERTING_REQ
mdefine_line|#define CC_ALERTING_REQ        38
DECL|macro|CC_ALERTING_IND
mdefine_line|#define CC_ALERTING_IND        39
DECL|macro|DL_STOP
mdefine_line|#define DL_STOP                40
DECL|macro|DL_START
mdefine_line|#define DL_START               41
DECL|macro|MDL_NOTEIPROC
mdefine_line|#define MDL_NOTEIPROC          46
DECL|macro|LC_ESTABLISH
mdefine_line|#define LC_ESTABLISH           47
DECL|macro|LC_RELEASE
mdefine_line|#define LC_RELEASE             48
DECL|macro|PH_REQUEST_PULL
mdefine_line|#define PH_REQUEST_PULL        49
DECL|macro|PH_PULL_ACK
mdefine_line|#define PH_PULL_ACK            50
DECL|macro|PH_DATA_PULLED
mdefine_line|#define&t;PH_DATA_PULLED&t;       51
DECL|macro|CC_INFO_CHARGE
mdefine_line|#define CC_INFO_CHARGE         52
DECL|macro|CC_MORE_INFO
mdefine_line|#define CC_MORE_INFO           53
DECL|macro|CC_IGNORE
mdefine_line|#define CC_IGNORE              54
DECL|macro|MDL_REMOVE
mdefine_line|#define MDL_REMOVE             56
DECL|macro|MDL_VERIFY
mdefine_line|#define MDL_VERIFY             57
DECL|macro|CC_T303
mdefine_line|#define CC_T303                60
DECL|macro|CC_T304
mdefine_line|#define CC_T304                61
DECL|macro|CC_T305
mdefine_line|#define CC_T305                62
DECL|macro|CC_T308_1
mdefine_line|#define CC_T308_1              64
DECL|macro|CC_T308_2
mdefine_line|#define CC_T308_2              65
DECL|macro|CC_T310
mdefine_line|#define CC_T310                66
DECL|macro|CC_T313
mdefine_line|#define CC_T313                67
DECL|macro|CC_T318
mdefine_line|#define CC_T318                68
DECL|macro|CC_T319
mdefine_line|#define CC_T319                69
DECL|macro|CC_NOSETUP_RSP_ERR
mdefine_line|#define CC_NOSETUP_RSP_ERR     70
DECL|macro|CC_SETUP_ERR
mdefine_line|#define CC_SETUP_ERR           71
DECL|macro|CC_CONNECT_ERR
mdefine_line|#define CC_CONNECT_ERR         72
DECL|macro|CC_RELEASE_ERR
mdefine_line|#define CC_RELEASE_ERR         73
multiline_comment|/*&n; * Message-Types&n; */
DECL|macro|MT_ALERTING
mdefine_line|#define MT_ALERTING            0x01
DECL|macro|MT_CALL_PROCEEDING
mdefine_line|#define MT_CALL_PROCEEDING     0x02
DECL|macro|MT_CONNECT
mdefine_line|#define MT_CONNECT             0x07
DECL|macro|MT_CONNECT_ACKNOWLEDGE
mdefine_line|#define MT_CONNECT_ACKNOWLEDGE 0x0f
DECL|macro|MT_PROGRESS
mdefine_line|#define MT_PROGRESS            0x03
DECL|macro|MT_SETUP
mdefine_line|#define MT_SETUP               0x05
DECL|macro|MT_SETUP_ACKNOWLEDGE
mdefine_line|#define MT_SETUP_ACKNOWLEDGE   0x0d
DECL|macro|MT_RESUME
mdefine_line|#define MT_RESUME              0x26
DECL|macro|MT_RESUME_ACKNOWLEDGE
mdefine_line|#define MT_RESUME_ACKNOWLEDGE  0x2e
DECL|macro|MT_RESUME_REJECT
mdefine_line|#define MT_RESUME_REJECT       0x22
DECL|macro|MT_SUSPEND
mdefine_line|#define MT_SUSPEND             0x25
DECL|macro|MT_SUSPEND_ACKNOWLEDGE
mdefine_line|#define MT_SUSPEND_ACKNOWLEDGE 0x2d
DECL|macro|MT_SUSPEND_REJECT
mdefine_line|#define MT_SUSPEND_REJECT      0x21
DECL|macro|MT_USER_INFORMATION
mdefine_line|#define MT_USER_INFORMATION    0x20
DECL|macro|MT_DISCONNECT
mdefine_line|#define MT_DISCONNECT          0x45
DECL|macro|MT_RELEASE
mdefine_line|#define MT_RELEASE             0x4d
DECL|macro|MT_RELEASE_COMPLETE
mdefine_line|#define MT_RELEASE_COMPLETE    0x5a
DECL|macro|MT_RESTART
mdefine_line|#define MT_RESTART             0x46
DECL|macro|MT_RESTART_ACKNOWLEDGE
mdefine_line|#define MT_RESTART_ACKNOWLEDGE 0x4e
DECL|macro|MT_SEGMENT
mdefine_line|#define MT_SEGMENT             0x60
DECL|macro|MT_CONGESTION_CONTROL
mdefine_line|#define MT_CONGESTION_CONTROL  0x79
DECL|macro|MT_INFORMATION
mdefine_line|#define MT_INFORMATION         0x7b
DECL|macro|MT_FACILITY
mdefine_line|#define MT_FACILITY            0x62
DECL|macro|MT_NOTIFY
mdefine_line|#define MT_NOTIFY              0x6e
DECL|macro|MT_STATUS
mdefine_line|#define MT_STATUS              0x7d
DECL|macro|MT_STATUS_ENQUIRY
mdefine_line|#define MT_STATUS_ENQUIRY      0x75
DECL|macro|IE_CAUSE
mdefine_line|#define IE_CAUSE               0x08
DECL|struct|HscxIoctlArg
r_struct
id|HscxIoctlArg
(brace
DECL|member|channel
r_int
id|channel
suffix:semicolon
DECL|member|mode
r_int
id|mode
suffix:semicolon
DECL|member|transbufsize
r_int
id|transbufsize
suffix:semicolon
)brace
suffix:semicolon
macro_line|#ifdef __KERNEL__
DECL|macro|DEBUG_MAGIC
macro_line|#undef DEBUG_MAGIC
DECL|macro|MAX_DFRAME_LEN
mdefine_line|#define MAX_DFRAME_LEN&t;3072
DECL|macro|HSCX_BUFMAX
mdefine_line|#define HSCX_BUFMAX&t;4096
DECL|macro|MAX_DATA_SIZE
mdefine_line|#define MAX_DATA_SIZE&t;(HSCX_BUFMAX - 4)
DECL|macro|MAX_DATA_MEM
mdefine_line|#define MAX_DATA_MEM    (HSCX_BUFMAX * 2)
DECL|macro|MAX_HEADER_LEN
mdefine_line|#define MAX_HEADER_LEN&t;4
DECL|macro|MAX_WINDOW
mdefine_line|#define MAX_WINDOW&t;8
multiline_comment|/*&n; * Statemachine&n; */
DECL|struct|Fsm
r_struct
id|Fsm
(brace
DECL|member|jumpmatrix
r_int
op_star
id|jumpmatrix
suffix:semicolon
DECL|member|state_count
DECL|member|event_count
r_int
id|state_count
comma
id|event_count
suffix:semicolon
DECL|member|strEvent
DECL|member|strState
r_char
op_star
op_star
id|strEvent
comma
op_star
op_star
id|strState
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|FsmInst
r_struct
id|FsmInst
(brace
DECL|member|fsm
r_struct
id|Fsm
op_star
id|fsm
suffix:semicolon
DECL|member|state
r_int
id|state
suffix:semicolon
DECL|member|debug
r_int
id|debug
suffix:semicolon
DECL|member|userdata
r_void
op_star
id|userdata
suffix:semicolon
DECL|member|userint
r_int
id|userint
suffix:semicolon
DECL|member|printdebug
r_void
(paren
op_star
id|printdebug
)paren
(paren
r_struct
id|FsmInst
op_star
comma
r_char
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|FsmNode
r_struct
id|FsmNode
(brace
DECL|member|state
DECL|member|event
r_int
id|state
comma
id|event
suffix:semicolon
DECL|member|routine
r_void
(paren
op_star
id|routine
)paren
(paren
r_struct
id|FsmInst
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|FsmTimer
r_struct
id|FsmTimer
(brace
DECL|member|fi
r_struct
id|FsmInst
op_star
id|fi
suffix:semicolon
DECL|member|tl
r_struct
id|timer_list
id|tl
suffix:semicolon
DECL|member|event
r_int
id|event
suffix:semicolon
DECL|member|arg
r_void
op_star
id|arg
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|L3Timer
r_struct
id|L3Timer
(brace
DECL|member|st
r_struct
id|PStack
op_star
id|st
suffix:semicolon
DECL|member|tl
r_struct
id|timer_list
id|tl
suffix:semicolon
DECL|member|event
r_int
id|event
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Layer1
r_struct
id|Layer1
(brace
DECL|member|hardware
r_void
op_star
id|hardware
suffix:semicolon
DECL|member|hscx
r_int
id|hscx
suffix:semicolon
DECL|member|stlistp
r_struct
id|PStack
op_star
op_star
id|stlistp
suffix:semicolon
DECL|member|act_state
r_int
id|act_state
suffix:semicolon
DECL|member|l1l2
r_void
(paren
op_star
id|l1l2
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|l1man
r_void
(paren
op_star
id|l1man
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|hscxmode
DECL|member|hscxchannel
DECL|member|requestpull
r_int
id|hscxmode
comma
id|hscxchannel
comma
id|requestpull
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Layer2
r_struct
id|Layer2
(brace
DECL|member|sap
DECL|member|tei
DECL|member|ces
r_int
id|sap
comma
id|tei
comma
id|ces
suffix:semicolon
DECL|member|extended
DECL|member|laptype
r_int
id|extended
comma
id|laptype
suffix:semicolon
DECL|member|uihsize
DECL|member|ihsize
r_int
id|uihsize
comma
id|ihsize
suffix:semicolon
DECL|member|vs
DECL|member|va
DECL|member|vr
r_int
id|vs
comma
id|va
comma
id|vr
suffix:semicolon
DECL|member|i_queue
r_struct
id|sk_buff_head
id|i_queue
suffix:semicolon
DECL|member|window
DECL|member|orig
r_int
id|window
comma
id|orig
suffix:semicolon
DECL|member|rejexp
r_int
id|rejexp
suffix:semicolon
DECL|member|debug
r_int
id|debug
suffix:semicolon
DECL|member|windowar
r_struct
id|sk_buff
op_star
id|windowar
(braket
id|MAX_WINDOW
)braket
suffix:semicolon
DECL|member|sow
r_int
id|sow
suffix:semicolon
DECL|member|l2m
r_struct
id|FsmInst
id|l2m
suffix:semicolon
DECL|member|l2l1
r_void
(paren
op_star
id|l2l1
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|l2l1discardq
r_void
(paren
op_star
id|l2l1discardq
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|l2man
r_void
(paren
op_star
id|l2man
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|l2l3
r_void
(paren
op_star
id|l2l3
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|l2tei
r_void
(paren
op_star
id|l2tei
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|t200_timer
DECL|member|t203_timer
r_struct
id|FsmTimer
id|t200_timer
comma
id|t203_timer
suffix:semicolon
DECL|member|t200
DECL|member|n200
DECL|member|t203
r_int
id|t200
comma
id|n200
comma
id|t203
suffix:semicolon
DECL|member|rc
DECL|member|t200_running
r_int
id|rc
comma
id|t200_running
suffix:semicolon
DECL|member|debug_id
r_char
id|debug_id
(braket
l_int|32
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Layer3
r_struct
id|Layer3
(brace
DECL|member|l3l4
r_void
(paren
op_star
id|l3l4
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|l3l2
r_void
(paren
op_star
id|l3l2
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|state
DECL|member|callref
r_int
id|state
comma
id|callref
suffix:semicolon
DECL|member|timer
r_struct
id|L3Timer
id|timer
suffix:semicolon
DECL|member|t303
DECL|member|t304
DECL|member|t305
DECL|member|t308
DECL|member|t310
DECL|member|t313
DECL|member|t318
DECL|member|t319
r_int
id|t303
comma
id|t304
comma
id|t305
comma
id|t308
comma
id|t310
comma
id|t313
comma
id|t318
comma
id|t319
suffix:semicolon
DECL|member|n_t303
r_int
id|n_t303
suffix:semicolon
DECL|member|debug
r_int
id|debug
suffix:semicolon
DECL|member|channr
r_int
id|channr
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Layer4
r_struct
id|Layer4
(brace
DECL|member|l4l3
r_void
(paren
op_star
id|l4l3
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|userdata
r_void
op_star
id|userdata
suffix:semicolon
DECL|member|l1writewakeup
r_void
(paren
op_star
id|l1writewakeup
)paren
(paren
r_struct
id|PStack
op_star
)paren
suffix:semicolon
DECL|member|l2writewakeup
r_void
(paren
op_star
id|l2writewakeup
)paren
(paren
r_struct
id|PStack
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Management
r_struct
id|Management
(brace
DECL|member|manl1
r_void
(paren
op_star
id|manl1
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|manl2
r_void
(paren
op_star
id|manl2
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|teil2
r_void
(paren
op_star
id|teil2
)paren
(paren
r_struct
id|PStack
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Param
r_struct
id|Param
(brace
DECL|member|cause
r_int
id|cause
suffix:semicolon
DECL|member|loc
r_int
id|loc
suffix:semicolon
DECL|member|bchannel
r_int
id|bchannel
suffix:semicolon
DECL|member|callref
r_int
id|callref
suffix:semicolon
multiline_comment|/* Callreferenz Number */
DECL|member|setup
id|setup_parm
id|setup
suffix:semicolon
multiline_comment|/* from isdnif.h numbers and Serviceindicator */
DECL|member|chargeinfo
r_int
id|chargeinfo
suffix:semicolon
multiline_comment|/* Charge Info - only for 1tr6 in&n;&t;&t;&t;&t; * the moment&n;&t;&t;&t;&t; */
DECL|member|spv
r_int
id|spv
suffix:semicolon
multiline_comment|/* SPV Flag */
)brace
suffix:semicolon
DECL|struct|PStack
r_struct
id|PStack
(brace
DECL|member|next
r_struct
id|PStack
op_star
id|next
suffix:semicolon
DECL|member|l1
r_struct
id|Layer1
id|l1
suffix:semicolon
DECL|member|l2
r_struct
id|Layer2
id|l2
suffix:semicolon
DECL|member|l3
r_struct
id|Layer3
id|l3
suffix:semicolon
DECL|member|l4
r_struct
id|Layer4
id|l4
suffix:semicolon
DECL|member|ma
r_struct
id|Management
id|ma
suffix:semicolon
DECL|member|pa
r_struct
id|Param
op_star
id|pa
suffix:semicolon
DECL|member|protocol
r_int
id|protocol
suffix:semicolon
multiline_comment|/* EDSS1 or 1TR6 */
)brace
suffix:semicolon
DECL|struct|HscxState
r_struct
id|HscxState
(brace
DECL|member|inuse
DECL|member|init
DECL|member|active
r_int
id|inuse
comma
id|init
comma
id|active
suffix:semicolon
DECL|member|sp
r_struct
id|IsdnCardState
op_star
id|sp
suffix:semicolon
DECL|member|hscx
DECL|member|mode
r_int
id|hscx
comma
id|mode
suffix:semicolon
DECL|member|rcvbuf
id|u_char
op_star
id|rcvbuf
suffix:semicolon
multiline_comment|/* B-Channel receive Buffer */
DECL|member|rcvidx
r_int
id|rcvidx
suffix:semicolon
multiline_comment|/* B-Channel receive Buffer Index */
DECL|member|tx_skb
r_struct
id|sk_buff
op_star
id|tx_skb
suffix:semicolon
multiline_comment|/* B-Channel transmit Buffer */
DECL|member|tx_cnt
r_int
id|tx_cnt
suffix:semicolon
multiline_comment|/* B-Channel transmit counter */
DECL|member|count
r_int
id|count
suffix:semicolon
multiline_comment|/* Current skb sent count */
DECL|member|rqueue
r_struct
id|sk_buff_head
id|rqueue
suffix:semicolon
multiline_comment|/* B-Channel receive Queue */
DECL|member|squeue
r_struct
id|sk_buff_head
id|squeue
suffix:semicolon
multiline_comment|/* B-Channel receive Queue */
DECL|member|st
r_struct
id|PStack
op_star
id|st
suffix:semicolon
DECL|member|tqueue
r_struct
id|tq_struct
id|tqueue
suffix:semicolon
DECL|member|event
r_int
id|event
suffix:semicolon
macro_line|#ifdef DEBUG_MAGIC
DECL|member|magic
r_int
id|magic
suffix:semicolon
multiline_comment|/* 301270 */
macro_line|#endif
)brace
suffix:semicolon
DECL|struct|LcFsm
r_struct
id|LcFsm
(brace
DECL|member|lcfi
r_struct
id|FsmInst
id|lcfi
suffix:semicolon
DECL|member|type
r_int
id|type
suffix:semicolon
DECL|member|ch
r_struct
id|Channel
op_star
id|ch
suffix:semicolon
DECL|member|lccall
r_void
(paren
op_star
id|lccall
)paren
(paren
r_struct
id|LcFsm
op_star
comma
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|member|st
r_struct
id|PStack
op_star
id|st
suffix:semicolon
DECL|member|l2_establish
r_int
id|l2_establish
suffix:semicolon
DECL|member|l2_start
r_int
id|l2_start
suffix:semicolon
DECL|member|act_timer
r_struct
id|FsmTimer
id|act_timer
suffix:semicolon
DECL|member|debug_id
r_char
id|debug_id
(braket
l_int|32
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|Channel
r_struct
id|Channel
(brace
DECL|member|ds
DECL|member|is
r_struct
id|PStack
id|ds
comma
id|is
suffix:semicolon
DECL|member|sp
r_struct
id|IsdnCardState
op_star
id|sp
suffix:semicolon
DECL|member|hscx
r_int
id|hscx
suffix:semicolon
DECL|member|chan
r_int
id|chan
suffix:semicolon
DECL|member|incoming
r_int
id|incoming
suffix:semicolon
DECL|member|fi
r_struct
id|FsmInst
id|fi
suffix:semicolon
DECL|member|lc_d
DECL|member|lc_b
r_struct
id|LcFsm
id|lc_d
comma
id|lc_b
suffix:semicolon
DECL|member|para
r_struct
id|Param
id|para
suffix:semicolon
DECL|member|drel_timer
DECL|member|dial_timer
r_struct
id|FsmTimer
id|drel_timer
comma
id|dial_timer
suffix:semicolon
DECL|member|debug
r_int
id|debug
suffix:semicolon
macro_line|#ifdef DEBUG_MAGIC
DECL|member|magic
r_int
id|magic
suffix:semicolon
multiline_comment|/* 301272 */
macro_line|#endif
DECL|member|l2_protocol
DECL|member|l2_active_protocol
r_int
id|l2_protocol
comma
id|l2_active_protocol
suffix:semicolon
DECL|member|l2_primitive
DECL|member|l2_headersize
r_int
id|l2_primitive
comma
id|l2_headersize
suffix:semicolon
DECL|member|data_open
r_int
id|data_open
suffix:semicolon
DECL|member|outcallref
r_int
id|outcallref
suffix:semicolon
DECL|member|impair
r_int
id|impair
suffix:semicolon
DECL|member|Flags
r_int
id|Flags
suffix:semicolon
multiline_comment|/* for remembering action done in l4 */
DECL|member|leased
r_int
id|leased
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|IsdnCardState
r_struct
id|IsdnCardState
(brace
macro_line|#ifdef DEBUG_MAGIC
DECL|member|magic
r_int
id|magic
suffix:semicolon
macro_line|#endif
DECL|member|typ
r_int
r_char
id|typ
suffix:semicolon
DECL|member|subtyp
r_int
r_char
id|subtyp
suffix:semicolon
DECL|member|protocol
r_int
id|protocol
suffix:semicolon
DECL|member|irq
r_int
r_int
id|irq
suffix:semicolon
DECL|member|cfg_reg
r_int
r_int
id|cfg_reg
suffix:semicolon
DECL|member|membase
r_int
r_int
id|membase
suffix:semicolon
DECL|member|isac
r_int
r_int
id|isac
suffix:semicolon
DECL|member|hscx
r_int
r_int
id|hscx
(braket
l_int|2
)braket
suffix:semicolon
DECL|member|counter
r_int
r_int
id|counter
suffix:semicolon
DECL|member|myid
r_int
id|myid
suffix:semicolon
DECL|member|iif
id|isdn_if
id|iif
suffix:semicolon
DECL|member|status_buf
id|u_char
op_star
id|status_buf
suffix:semicolon
DECL|member|status_read
id|u_char
op_star
id|status_read
suffix:semicolon
DECL|member|status_write
id|u_char
op_star
id|status_write
suffix:semicolon
DECL|member|status_end
id|u_char
op_star
id|status_end
suffix:semicolon
DECL|member|ph_command
r_void
(paren
op_star
id|ph_command
)paren
(paren
r_struct
id|IsdnCardState
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|member|modehscx
r_void
(paren
op_star
id|modehscx
)paren
(paren
r_struct
id|HscxState
op_star
comma
r_int
comma
r_int
)paren
suffix:semicolon
DECL|member|hscx_fill_fifo
r_void
(paren
op_star
id|hscx_fill_fifo
)paren
(paren
r_struct
id|HscxState
op_star
)paren
suffix:semicolon
DECL|member|isac_fill_fifo
r_void
(paren
op_star
id|isac_fill_fifo
)paren
(paren
r_struct
id|IsdnCardState
op_star
)paren
suffix:semicolon
DECL|member|channel
r_struct
id|Channel
id|channel
(braket
l_int|2
)braket
suffix:semicolon
DECL|member|stlist
r_struct
id|PStack
op_star
id|stlist
suffix:semicolon
DECL|member|rcvbuf
id|u_char
op_star
id|rcvbuf
suffix:semicolon
DECL|member|rcvidx
r_int
id|rcvidx
suffix:semicolon
DECL|member|tx_skb
r_struct
id|sk_buff
op_star
id|tx_skb
suffix:semicolon
DECL|member|tx_cnt
r_int
id|tx_cnt
suffix:semicolon
DECL|member|event
r_int
id|event
suffix:semicolon
DECL|member|tqueue
r_struct
id|tq_struct
id|tqueue
suffix:semicolon
DECL|member|ph_active
r_int
id|ph_active
suffix:semicolon
DECL|member|rq
DECL|member|sq
r_struct
id|sk_buff_head
id|rq
comma
id|sq
suffix:semicolon
multiline_comment|/* D-channel queues */
DECL|member|cardnr
r_int
id|cardnr
suffix:semicolon
DECL|member|ph_state
r_int
id|ph_state
suffix:semicolon
DECL|member|teistack
r_struct
id|PStack
op_star
id|teistack
suffix:semicolon
DECL|member|hs
r_struct
id|HscxState
id|hs
(braket
l_int|2
)braket
suffix:semicolon
DECL|member|dlogflag
r_int
id|dlogflag
suffix:semicolon
DECL|member|dlogspace
r_char
op_star
id|dlogspace
suffix:semicolon
DECL|member|debug
r_int
id|debug
suffix:semicolon
DECL|member|CallFlags
r_int
r_int
id|CallFlags
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|MON0_RX
mdefine_line|#define  MON0_RX&t;1
DECL|macro|MON1_RX
mdefine_line|#define  MON1_RX&t;2
DECL|macro|MON0_TX
mdefine_line|#define  MON0_TX&t;4
DECL|macro|MON1_TX
mdefine_line|#define  MON1_TX&t;8
DECL|macro|ISDN_CTYPE_16_0
mdefine_line|#define  ISDN_CTYPE_16_0&t;1
DECL|macro|ISDN_CTYPE_8_0
mdefine_line|#define  ISDN_CTYPE_8_0&t;&t;2
DECL|macro|ISDN_CTYPE_16_3
mdefine_line|#define  ISDN_CTYPE_16_3&t;3
DECL|macro|ISDN_CTYPE_PNP
mdefine_line|#define  ISDN_CTYPE_PNP&t;&t;4
DECL|macro|ISDN_CTYPE_A1
mdefine_line|#define  ISDN_CTYPE_A1&t;&t;5
DECL|macro|ISDN_CTYPE_ELSA
mdefine_line|#define  ISDN_CTYPE_ELSA&t;6
DECL|macro|ISDN_CTYPE_ELSA_QS1000
mdefine_line|#define  ISDN_CTYPE_ELSA_QS1000&t;7
DECL|macro|ISDN_CTYPE_TELESPCMCIA
mdefine_line|#define  ISDN_CTYPE_TELESPCMCIA&t;8
DECL|macro|ISDN_CTYPE_IX1MICROR2
mdefine_line|#define  ISDN_CTYPE_IX1MICROR2&t;9
DECL|macro|ISDN_CTYPE_COUNT
mdefine_line|#define  ISDN_CTYPE_COUNT&t;9
macro_line|#ifdef&t;CONFIG_HISAX_16_0
DECL|macro|CARD_TELES0
mdefine_line|#define  CARD_TELES0 (1&lt;&lt; ISDN_CTYPE_16_0) | (1&lt;&lt; ISDN_CTYPE_8_0)
macro_line|#else
DECL|macro|CARD_TELES0
mdefine_line|#define  CARD_TELES0  0
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_16_3
DECL|macro|CARD_TELES3
mdefine_line|#define  CARD_TELES3 (1&lt;&lt; ISDN_CTYPE_16_3) | (1&lt;&lt; ISDN_CTYPE_PNP) | &bslash;&n;&t;&t;     (1&lt;&lt; ISDN_CTYPE_TELESPCMCIA)
macro_line|#else
DECL|macro|CARD_TELES3
mdefine_line|#define  CARD_TELES3  0
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_AVM_A1
DECL|macro|CARD_AVM_A1
mdefine_line|#define  CARD_AVM_A1 (1&lt;&lt; ISDN_CTYPE_A1)
macro_line|#else
DECL|macro|CARD_AVM_A1
mdefine_line|#define  CARD_AVM_A1  0
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_ELSA_PCC
DECL|macro|CARD_ELSA
mdefine_line|#define  CARD_ELSA (1&lt;&lt; ISDN_CTYPE_ELSA) | (1&lt;&lt; ISDN_CTYPE_ELSA_QS1000)
macro_line|#else
DECL|macro|CARD_ELSA
mdefine_line|#define  CARD_ELSA  0
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_ELSA_PCMCIA
macro_line|#if CARD_ELSA
macro_line|#error &quot;You can&squot;t use a ELSA ISA card and a ELSA PCMCIA card with the same driver&quot;
macro_line|#else
DECL|macro|CARD_ELSA
macro_line|#undef CARD_ELSA
DECL|macro|CARD_ELSA
mdefine_line|#define CARD_ELSA (1&lt;&lt; ISDN_CTYPE_ELSA_QS1000)
macro_line|#endif
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_IX1MICROR2
DECL|macro|CARD_IX1MICROR2
mdefine_line|#define&t;CARD_IX1MICROR2 (1 &lt;&lt; ISDN_CTYPE_IX1MICROR2)
macro_line|#else
DECL|macro|CARD_IX1MICROR2
mdefine_line|#define CARD_IX1MICROR2 0
macro_line|#endif
DECL|macro|SUPORTED_CARDS
mdefine_line|#define  SUPORTED_CARDS  (CARD_TELES0 | CARD_TELES3 | CARD_AVM_A1 | CARD_ELSA &bslash;&n;&t;&t;&t; | CARD_IX1MICROR2)
DECL|struct|IsdnCard
r_struct
id|IsdnCard
(brace
DECL|member|typ
r_int
id|typ
suffix:semicolon
DECL|member|protocol
r_int
id|protocol
suffix:semicolon
multiline_comment|/* EDSS1 or 1TR6 */
DECL|member|para
r_int
r_int
id|para
(braket
l_int|3
)braket
suffix:semicolon
DECL|member|sp
r_struct
id|IsdnCardState
op_star
id|sp
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|LAPD
mdefine_line|#define LAPD 0
DECL|macro|LAPB
mdefine_line|#define LAPB 1
r_void
id|l2down
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|u_char
id|pr
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
r_void
id|l2up
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|u_char
id|pr
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
r_void
id|acceptph
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
r_void
id|setstack_isdnl2
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_char
op_star
id|debug_id
)paren
suffix:semicolon
r_int
id|HiSax_inithardware
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|HiSax_closehardware
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|setstack_HiSax
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_struct
id|IsdnCardState
op_star
id|sp
)paren
suffix:semicolon
r_int
r_int
id|randomces
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|setstack_isdnl3
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_struct
id|Channel
op_star
id|chanp
)paren
suffix:semicolon
r_void
id|HiSax_addlist
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|sp
comma
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_void
id|releasestack_isdnl2
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_void
id|releasestack_isdnl3
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_void
id|HiSax_rmlist
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|sp
comma
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_void
id|newcallref
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_int
id|setstack_hscx
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_struct
id|HscxState
op_star
id|hs
)paren
suffix:semicolon
id|u_char
op_star
id|findie
c_func
(paren
id|u_char
op_star
id|p
comma
r_int
id|size
comma
id|u_char
id|ie
comma
r_int
id|wanted_set
)paren
suffix:semicolon
r_int
id|getcallref
c_func
(paren
id|u_char
op_star
id|p
)paren
suffix:semicolon
r_void
id|FsmNew
c_func
(paren
r_struct
id|Fsm
op_star
id|fsm
comma
r_struct
id|FsmNode
op_star
id|fnlist
comma
r_int
id|fncount
)paren
suffix:semicolon
r_void
id|FsmFree
c_func
(paren
r_struct
id|Fsm
op_star
id|fsm
)paren
suffix:semicolon
r_int
id|FsmEvent
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
suffix:semicolon
r_void
id|FsmChangeState
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|newstate
)paren
suffix:semicolon
r_void
id|FsmInitTimer
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_struct
id|FsmTimer
op_star
id|ft
)paren
suffix:semicolon
r_int
id|FsmAddTimer
c_func
(paren
r_struct
id|FsmTimer
op_star
id|ft
comma
r_int
id|millisec
comma
r_int
id|event
comma
r_void
op_star
id|arg
comma
r_int
id|where
)paren
suffix:semicolon
r_void
id|FsmDelTimer
c_func
(paren
r_struct
id|FsmTimer
op_star
id|ft
comma
r_int
id|where
)paren
suffix:semicolon
r_int
id|FsmTimerRunning
c_func
(paren
r_struct
id|FsmTimer
op_star
id|ft
)paren
suffix:semicolon
r_void
id|jiftime
c_func
(paren
r_char
op_star
id|s
comma
r_int
id|mark
)paren
suffix:semicolon
r_int
id|HiSax_command
c_func
(paren
id|isdn_ctrl
op_star
id|ic
)paren
suffix:semicolon
r_int
id|HiSax_writebuf_skb
c_func
(paren
r_int
id|id
comma
r_int
id|chan
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
r_void
id|HiSax_putstatus
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
comma
r_char
op_star
id|buf
)paren
suffix:semicolon
r_void
id|HiSax_reportcard
c_func
(paren
r_int
id|cardnr
)paren
suffix:semicolon
r_int
id|QuickHex
c_func
(paren
r_char
op_star
id|txt
comma
id|u_char
op_star
id|p
comma
r_int
id|cnt
)paren
suffix:semicolon
r_void
id|LogFrame
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|sp
comma
id|u_char
op_star
id|p
comma
r_int
id|size
)paren
suffix:semicolon
r_void
id|dlogframe
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|sp
comma
id|u_char
op_star
id|p
comma
r_int
id|size
comma
r_char
op_star
id|comment
)paren
suffix:semicolon
r_void
id|iecpy
c_func
(paren
id|u_char
op_star
id|dest
comma
id|u_char
op_star
id|iestart
comma
r_int
id|ieoffset
)paren
suffix:semicolon
r_void
id|setstack_transl2
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_void
id|releasestack_transl2
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
r_void
id|close_hscxstate
c_func
(paren
r_struct
id|HscxState
op_star
)paren
suffix:semicolon
r_void
id|setstack_tei
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
suffix:semicolon
macro_line|#endif&t;&t;&t;&t;/* __KERNEL__ */
DECL|macro|HZDELAY
mdefine_line|#define HZDELAY(jiffs) {int tout = jiffs; while (tout--) udelay(1000000/HZ);}
r_int
id|ll_run
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
suffix:semicolon
r_void
id|ll_stop
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
suffix:semicolon
r_void
id|CallcNew
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|CallcFree
c_func
(paren
r_void
)paren
suffix:semicolon
r_int
id|CallcNewChan
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
suffix:semicolon
r_void
id|CallcFreeChan
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
suffix:semicolon
r_void
id|Isdnl2New
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|Isdnl2Free
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|init_tei
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|sp
comma
r_int
id|protocol
)paren
suffix:semicolon
r_void
id|release_tei
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|sp
)paren
suffix:semicolon
r_char
op_star
id|HiSax_getrev
c_func
(paren
r_const
r_char
op_star
id|revision
)paren
suffix:semicolon
eof
