multiline_comment|/* $Id: arcofi.c,v 1.6 1998/09/30 22:21:56 keil Exp $&n;&n; * arcofi.c   Ansteuerung ARCOFI 2165&n; *&n; * Author     Karsten Keil (keil@temic-ech.spacenet.de)&n; *&n; *&n; *&n; * $Log: arcofi.c,v $&n; * Revision 1.6  1998/09/30 22:21:56  keil&n; * cosmetics&n; *&n; * Revision 1.5  1998/09/27 12:52:57  keil&n; * cosmetics&n; *&n; * Revision 1.4  1998/08/20 13:50:24  keil&n; * More support for hybrid modem (not working yet)&n; *&n; * Revision 1.3  1998/05/25 12:57:38  keil&n; * HiSax golden code from certification, Don&squot;t use !!!&n; * No leased lines, no X75, but many changes.&n; *&n; * Revision 1.2  1998/04/15 16:47:16  keil&n; * new interface&n; *&n; * Revision 1.1  1997/10/29 18:51:20  keil&n; * New files&n; *&n; */
DECL|macro|__NO_VERSION__
mdefine_line|#define __NO_VERSION__
macro_line|#include &quot;hisax.h&quot;
macro_line|#include &quot;isdnl1.h&quot;
macro_line|#include &quot;isac.h&quot;
r_int
DECL|function|send_arcofi
id|send_arcofi
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_const
id|u_char
op_star
id|msg
comma
r_int
id|bc
comma
r_int
id|receive
)paren
(brace
id|u_char
id|val
suffix:semicolon
r_int
id|flags
suffix:semicolon
r_int
id|cnt
op_assign
l_int|30
suffix:semicolon
id|cs-&gt;mon_txp
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;mon_txc
op_assign
id|msg
(braket
l_int|0
)braket
suffix:semicolon
id|memcpy
c_func
(paren
id|cs-&gt;mon_tx
comma
op_amp
id|msg
(braket
l_int|1
)braket
comma
id|cs-&gt;mon_txc
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|bc
)paren
(brace
r_case
l_int|0
suffix:colon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|cs-&gt;mon_tx
(braket
l_int|1
)braket
op_or_assign
l_int|0x40
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
id|cs-&gt;mocr
op_and_assign
l_int|0x0f
suffix:semicolon
id|cs-&gt;mocr
op_or_assign
l_int|0xa0
suffix:semicolon
id|test_and_clear_bit
c_func
(paren
id|HW_MON1_TX_END
comma
op_amp
id|cs-&gt;HW_Flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|receive
)paren
id|test_and_clear_bit
c_func
(paren
id|HW_MON1_RX_END
comma
op_amp
id|cs-&gt;HW_Flags
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|writeisac
c_func
(paren
id|cs
comma
id|ISAC_MOCR
comma
id|cs-&gt;mocr
)paren
suffix:semicolon
id|val
op_assign
id|cs
op_member_access_from_pointer
id|readisac
c_func
(paren
id|cs
comma
id|ISAC_MOSR
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|writeisac
c_func
(paren
id|cs
comma
id|ISAC_MOX1
comma
id|cs-&gt;mon_tx
(braket
id|cs-&gt;mon_txp
op_increment
)braket
)paren
suffix:semicolon
id|cs-&gt;mocr
op_or_assign
l_int|0x10
suffix:semicolon
id|cs
op_member_access_from_pointer
id|writeisac
c_func
(paren
id|cs
comma
id|ISAC_MOCR
comma
id|cs-&gt;mocr
)paren
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|sti
c_func
(paren
)paren
suffix:semicolon
r_while
c_loop
(paren
id|cnt
op_logical_and
op_logical_neg
id|test_bit
c_func
(paren
id|HW_MON1_TX_END
comma
op_amp
id|cs-&gt;HW_Flags
)paren
)paren
(brace
id|cnt
op_decrement
suffix:semicolon
id|udelay
c_func
(paren
l_int|500
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|receive
)paren
(brace
r_while
c_loop
(paren
id|cnt
op_logical_and
op_logical_neg
id|test_bit
c_func
(paren
id|HW_MON1_RX_END
comma
op_amp
id|cs-&gt;HW_Flags
)paren
)paren
(brace
id|cnt
op_decrement
suffix:semicolon
id|udelay
c_func
(paren
l_int|500
)paren
suffix:semicolon
)brace
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cnt
op_le
l_int|0
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax arcofi monitor timed out&bslash;n&quot;
)paren
suffix:semicolon
id|debugl1
c_func
(paren
id|cs
comma
l_string|&quot;HiSax arcofi monitor timed out&quot;
)paren
suffix:semicolon
)brace
r_return
id|cnt
suffix:semicolon
)brace
eof
