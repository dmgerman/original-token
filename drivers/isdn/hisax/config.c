multiline_comment|/* $Id: config.c,v 2.12 1998/02/11 17:28:02 keil Exp $&n;&n; * Author       Karsten Keil (keil@temic-ech.spacenet.de)&n; *              based on the teles driver from Jan den Ouden&n; *&n; *&n; * $Log: config.c,v $&n; * Revision 2.12  1998/02/11 17:28:02  keil&n; * Niccy PnP/PCI support&n; *&n; * Revision 2.11  1998/02/09 21:26:13  keil&n; * fix export module for 2.1&n; *&n; * Revision 2.10  1998/02/09 18:46:05  keil&n; * Support for Sedlbauer PCMCIA (Marcus Niemann)&n; *&n; * Revision 2.9  1998/02/03 23:31:28  keil&n; * add AMD7930 support&n; *&n; * Revision 2.8  1998/02/02 13:32:59  keil&n; * New card support&n; *&n; * Revision 2.7  1998/01/31 21:41:44  keil&n; * changes for newer 2.1 kernels&n; *&n; * Revision 2.6  1997/11/08 21:35:43  keil&n; * new l1 init&n; *&n; * Revision 2.5  1997/11/06 17:15:08  keil&n; * New 2.1 init; PCMCIA wrapper changes&n; *&n; * Revision 2.4  1997/10/29 19:07:52  keil&n; * changes for 2.1&n; *&n; * Revision 2.3  1997/10/01 09:21:33  fritz&n; * Removed old compatibility stuff for 2.0.X kernels.&n; * From now on, this code is for 2.1.X ONLY!&n; * Old stuff is still in the separate branch.&n; *&n; * Revision 2.2  1997/09/11 17:24:46  keil&n; * Add new cards&n; *&n; * Revision 2.1  1997/07/27 21:41:35  keil&n; * version change&n; *&n; * Revision 2.0  1997/06/26 11:06:28  keil&n; * New card and L1 interface.&n; * Eicon.Diehl Diva and Dynalink IS64PH support&n; *&n; * old changes removed /KKe&n; *&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/stddef.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &quot;hisax.h&quot;
multiline_comment|/*&n; * This structure array contains one entry per card. An entry looks&n; * like this:&n; *&n; * { type, protocol, p0, p1, p2, NULL }&n; *&n; * type&n; *    1 Teles 16.0       p0=irq p1=membase p2=iobase&n; *    2 Teles  8.0       p0=irq p1=membase&n; *    3 Teles 16.3       p0=irq p1=iobase&n; *    4 Creatix PNP      p0=irq p1=IO0 (ISAC)  p2=IO1 (HSCX)&n; *    5 AVM A1 (Fritz)   p0=irq p1=iobase&n; *    6 ELSA PC          [p0=iobase] or nothing (autodetect)&n; *    7 ELSA Quickstep   p0=irq p1=iobase&n; *    8 Teles PCMCIA     p0=irq p1=iobase&n; *    9 ITK ix1-micro    p0=irq p1=iobase&n; *   10 ELSA PCMCIA      p0=irq p1=iobase&n; *   11 Eicon.Diehl Diva p0=irq p1=iobase&n; *   12 Asuscom ISDNLink p0=irq p1=iobase&n; *   13 Teleint          p0=irq p1=iobase&n; *   14 Teles 16.3c      p0=irq p1=iobase&n; *   15 Sedlbauer speed  p0=irq p1=iobase&n; *   16 USR Sportster internal  p0=irq  p1=iobase&n; *   17 MIC card                p0=irq  p1=iobase&n; *   18 ELSA Quickstep 1000PCI  no parameter&n; *   19 Compaq ISDN S0 ISA card p0=irq  p1=IO0 (HSCX)  p2=IO1 (ISAC) p3=IO2&n; *   20 Travers Technologies NETjet PCI card&n; *   21 reserved TELES PCI&n; *   22 Sedlbauer Speed Star    p0=irq p1=iobase&n; *   23 reserved&n; *   24 Dr Neuhaus Niccy PnP/PCI card p0=irq p1=IO0 p2=IO1 (PnP only)&n; *&n; *&n; * protocol can be either ISDN_PTYPE_EURO or ISDN_PTYPE_1TR6 or ISDN_PTYPE_NI1&n; *&n; *&n; */
macro_line|#ifdef CONFIG_HISAX_ELSA
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_ELSA
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
r_int
id|elsa_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
comma
r_int
op_star
comma
r_int
)paren
suffix:semicolon
DECL|variable|elsa_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|elsa_init_pcmcia
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_AVM_A1
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_A1
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {10,0x340,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_16_3
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_16_3
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {15,0x180,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_16_0
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_16_0
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {15,0xd0000,0xd80,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_IX1MICROR2
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_IX1MICROR2
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x390,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_DIEHLDIVA
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_DIEHLDIVA
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0x0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_ASUSCOM
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_ASUSCOM
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x200,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_TELEINT
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_TELEINT
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x300,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_SEDLBAUER
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {11,0x270,0,0}
r_int
id|sedl_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
comma
r_int
op_star
comma
r_int
)paren
suffix:semicolon
DECL|variable|sedl_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|sedl_init_pcmcia
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SPORTSTER
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_SPORTSTER
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {7,0x268,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_MIC
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_MIC
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {12,0x3e0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NETJET
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_NETJET
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_TELES3C
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_TELES3C
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x500,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_AMD7930
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_AMD7930
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {12,0x3e0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NICCY
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_NICCY
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0x0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_1TR6
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_1TR6
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;1TR6&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_EURO
DECL|macro|DEFAULT_PROTO
macro_line|#undef DEFAULT_PROTO
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_EURO
DECL|macro|DEFAULT_PROTO_NAME
macro_line|#undef DEFAULT_PROTO_NAME
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;EURO&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NI1
DECL|macro|DEFAULT_PROTO
macro_line|#undef DEFAULT_PROTO
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_NI1
DECL|macro|DEFAULT_PROTO_NAME
macro_line|#undef DEFAULT_PROTO_NAME
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;NI1&quot;
macro_line|#endif
macro_line|#ifndef DEFAULT_PROTO
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_UNKNOWN
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;UNKNOWN&quot;
macro_line|#endif
macro_line|#ifndef DEFAULT_CARD
macro_line|#error &quot;HiSax: No cards configured&quot;
macro_line|#endif
DECL|macro|FIRST_CARD
mdefine_line|#define FIRST_CARD { &bslash;&n;  DEFAULT_CARD, &bslash;&n;  DEFAULT_PROTO, &bslash;&n;  DEFAULT_CFG, &bslash;&n;  NULL, &bslash;&n;}
DECL|macro|EMPTY_CARD
mdefine_line|#define EMPTY_CARD&t;{0, DEFAULT_PROTO, {0, 0, 0, 0}, NULL}
DECL|variable|cards
r_struct
id|IsdnCard
id|cards
(braket
)braket
op_assign
(brace
id|FIRST_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
)brace
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_static
r_char
id|HiSaxID
(braket
l_int|96
)braket
id|HISAX_INITDATA
op_assign
l_string|&quot;&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&quot;
"&bslash;"
l_string|&quot;&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&quot;
"&bslash;"
l_string|&quot;&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&quot;
"&bslash;"
l_string|&quot;&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&bslash;0&quot;
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_char
op_star
id|HiSax_id
id|HISAX_INITDATA
op_assign
id|HiSaxID
suffix:semicolon
macro_line|#ifdef MODULE
multiline_comment|/* Variables for insmod */
DECL|variable|HISAX_INITDATA
r_static
r_int
id|type
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_static
r_int
id|protocol
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_static
r_int
id|io
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|macro|IO0_IO1
macro_line|#undef IO0_IO1
macro_line|#ifdef CONFIG_HISAX_16_3
DECL|macro|IO0_IO1
mdefine_line|#define IO0_IO1
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NICCY
DECL|macro|IO0_IO1
macro_line|#undef IO0_IO1
DECL|macro|IO0_IO1
mdefine_line|#define IO0_IO1
macro_line|#endif
macro_line|#ifdef IO0_IO1
DECL|variable|HISAX_INITDATA
r_static
r_int
id|io0
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_static
r_int
id|io1
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|HISAX_INITDATA
r_static
r_int
id|irq
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_static
r_int
id|mem
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
DECL|variable|HISAX_INITDATA
r_static
r_char
op_star
id|id
id|HISAX_INITDATA
op_assign
id|HiSaxID
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Karsten Keil&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|type
comma
l_string|&quot;1-3i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|protocol
comma
l_string|&quot;1-2i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|io
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|irq
comma
l_string|&quot;1-2i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|mem
comma
l_string|&quot;1-12i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|id
comma
l_string|&quot;s&quot;
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_HISAX_16_3&t;/* For Creatix/Teles PnP */
id|MODULE_PARM
c_func
(paren
id|io0
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|io1
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
DECL|variable|nrcards
r_int
id|nrcards
suffix:semicolon
r_extern
r_char
op_star
id|l1_revision
suffix:semicolon
r_extern
r_char
op_star
id|l2_revision
suffix:semicolon
r_extern
r_char
op_star
id|l3_revision
suffix:semicolon
r_extern
r_char
op_star
id|lli_revision
suffix:semicolon
r_extern
r_char
op_star
id|tei_revision
suffix:semicolon
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_char
op_star
id|HiSax_getrev
c_func
(paren
r_const
r_char
op_star
id|revision
)paren
)paren
(brace
r_char
op_star
id|rev
suffix:semicolon
r_char
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|strchr
c_func
(paren
id|revision
comma
l_char|&squot;:&squot;
)paren
)paren
)paren
(brace
id|rev
op_assign
id|p
op_plus
l_int|2
suffix:semicolon
id|p
op_assign
id|strchr
c_func
(paren
id|rev
comma
l_char|&squot;$&squot;
)paren
suffix:semicolon
op_star
op_decrement
id|p
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|rev
op_assign
l_string|&quot;???&quot;
suffix:semicolon
r_return
id|rev
suffix:semicolon
)brace
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_void
id|HiSaxVersion
c_func
(paren
r_void
)paren
)paren
(brace
r_char
id|tmp
(braket
l_int|64
)braket
comma
id|rev
(braket
l_int|64
)braket
suffix:semicolon
r_char
op_star
id|r
op_assign
id|rev
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|l1_revision
)paren
suffix:semicolon
id|r
op_add_assign
id|sprintf
c_func
(paren
id|r
comma
l_string|&quot;%s/&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|l2_revision
)paren
suffix:semicolon
id|r
op_add_assign
id|sprintf
c_func
(paren
id|r
comma
l_string|&quot;%s/&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|l3_revision
)paren
suffix:semicolon
id|r
op_add_assign
id|sprintf
c_func
(paren
id|r
comma
l_string|&quot;%s/&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|lli_revision
)paren
suffix:semicolon
id|r
op_add_assign
id|sprintf
c_func
(paren
id|r
comma
l_string|&quot;%s/&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|tei_revision
)paren
suffix:semicolon
id|r
op_add_assign
id|sprintf
c_func
(paren
id|r
comma
l_string|&quot;%s&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Driver for Siemens chip set ISDN cards&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Version 2.8&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Revisions %s&bslash;n&quot;
comma
id|rev
)paren
suffix:semicolon
)brace
r_void
DECL|function|HiSax_mod_dec_use_count
id|HiSax_mod_dec_use_count
c_func
(paren
r_void
)paren
(brace
id|MOD_DEC_USE_COUNT
suffix:semicolon
)brace
r_void
DECL|function|HiSax_mod_inc_use_count
id|HiSax_mod_inc_use_count
c_func
(paren
r_void
)paren
(brace
id|MOD_INC_USE_COUNT
suffix:semicolon
)brace
macro_line|#ifdef MODULE
DECL|macro|HiSax_init
mdefine_line|#define HiSax_init init_module
macro_line|#else
DECL|function|__initfunc
id|__initfunc
c_func
(paren
r_void
id|HiSax_setup
c_func
(paren
r_char
op_star
id|str
comma
r_int
op_star
id|ints
)paren
)paren
(brace
r_int
id|i
comma
id|j
comma
id|argc
suffix:semicolon
id|argc
op_assign
id|ints
(braket
l_int|0
)braket
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
id|j
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|argc
op_logical_and
(paren
id|i
OL
l_int|16
)paren
)paren
(brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|strlen
c_func
(paren
id|str
)paren
)paren
(brace
id|strcpy
c_func
(paren
id|HiSaxID
comma
id|str
)paren
suffix:semicolon
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
)brace
r_else
(brace
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
)brace
)brace
macro_line|#endif
DECL|function|__initfunc
id|__initfunc
c_func
(paren
r_int
id|HiSax_init
c_func
(paren
r_void
)paren
)paren
(brace
r_int
id|i
suffix:semicolon
macro_line|#ifdef MODULE
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef CONFIG_HISAX_ELSA
r_if
c_cond
(paren
id|type
(braket
l_int|0
)braket
op_eq
id|ISDN_CTYPE_ELSA_PCMCIA
)paren
(brace
multiline_comment|/* we have exported  and return in this case */
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
r_if
c_cond
(paren
id|type
(braket
l_int|0
)braket
op_eq
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
)paren
(brace
multiline_comment|/* we have to export  and return in this case */
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
id|HiSaxVersion
c_func
(paren
)paren
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef MODULE
r_if
c_cond
(paren
id|id
)paren
multiline_comment|/* If id= string used */
id|HiSax_id
op_assign
id|id
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|type
(braket
id|i
)braket
)paren
(brace
r_case
id|ISDN_CTYPE_16_0
suffix:colon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|mem
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_8_0
suffix:colon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|mem
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
macro_line|#ifdef IO0_IO1
r_case
id|ISDN_CTYPE_PNP
suffix:colon
r_case
id|ISDN_CTYPE_NICCY
suffix:colon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io0
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|io1
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_COMPAQ_ISA
suffix:colon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io0
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|io1
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|3
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_case
id|ISDN_CTYPE_ELSA
suffix:colon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_16_3
suffix:colon
r_case
id|ISDN_CTYPE_TELESPCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_A1
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PNP
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_IX1MICROR2
suffix:colon
r_case
id|ISDN_CTYPE_DIEHLDIVA
suffix:colon
r_case
id|ISDN_CTYPE_ASUSCOM
suffix:colon
r_case
id|ISDN_CTYPE_TELEINT
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_SPORTSTER
suffix:colon
r_case
id|ISDN_CTYPE_MIC
suffix:colon
r_case
id|ISDN_CTYPE_TELES3C
suffix:colon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_ELSA_PCI
suffix:colon
r_case
id|ISDN_CTYPE_NETJET
suffix:colon
r_case
id|ISDN_CTYPE_AMD7930
suffix:colon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
id|nzproto
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Warning - no protocol specified&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Note! module load syntax has changed.&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: using protocol %s&bslash;n&quot;
comma
id|DEFAULT_PROTO_NAME
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|CallcNew
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2New
c_func
(paren
)paren
suffix:semicolon
id|TeiNew
c_func
(paren
)paren
suffix:semicolon
id|Isdnl1New
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HiSax_inithardware
c_func
(paren
l_int|NULL
)paren
)paren
(brace
multiline_comment|/* Install only, if at least one card found */
multiline_comment|/* No symbols to export, hide all symbols */
macro_line|#ifdef MODULE
id|EXPORT_NO_SYMBOLS
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|Isdnl1Free
c_func
(paren
)paren
suffix:semicolon
id|TeiFree
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2Free
c_func
(paren
)paren
suffix:semicolon
id|CallcFree
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
)brace
macro_line|#ifdef MODULE
r_void
DECL|function|cleanup_module
id|cleanup_module
c_func
(paren
r_void
)paren
(brace
id|HiSax_closehardware
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax module removed&bslash;n&quot;
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_HISAX_ELSA
DECL|function|elsa_init_pcmcia
r_int
id|elsa_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
id|pcm_irq
comma
r_int
op_star
id|busy_flag
comma
r_int
id|prot
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
id|HiSaxVersion
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|id
)paren
multiline_comment|/* If id= string used */
id|HiSax_id
op_assign
id|id
suffix:semicolon
multiline_comment|/* Initialize all 16 structs, even though we only accept&n;&t;   two pcmcia cards&n;&t;   */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
)brace
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|pcm_irq
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
(paren
r_int
)paren
id|pcm_iob
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|protocol
op_assign
id|prot
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|typ
op_assign
l_int|10
suffix:semicolon
id|nzproto
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|Isdnl1New
c_func
(paren
)paren
suffix:semicolon
id|CallcNew
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2New
c_func
(paren
)paren
suffix:semicolon
id|TeiNew
c_func
(paren
)paren
suffix:semicolon
id|HiSax_inithardware
c_func
(paren
id|busy_flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
DECL|function|sedl_init_pcmcia
r_int
id|sedl_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
id|pcm_irq
comma
r_int
op_star
id|busy_flag
comma
r_int
id|prot
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
id|HiSaxVersion
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|id
)paren
multiline_comment|/* If id= string used */
id|HiSax_id
op_assign
id|id
suffix:semicolon
multiline_comment|/* Initialize all 16 structs, even though we only accept&n;&t;   two pcmcia cards&n;&t;   */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
)brace
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|pcm_irq
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
(paren
r_int
)paren
id|pcm_iob
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|protocol
op_assign
id|prot
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
suffix:semicolon
id|nzproto
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|Isdnl1New
c_func
(paren
)paren
suffix:semicolon
id|CallcNew
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2New
c_func
(paren
)paren
suffix:semicolon
id|TeiNew
c_func
(paren
)paren
suffix:semicolon
id|HiSax_inithardware
c_func
(paren
id|busy_flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif 
eof
