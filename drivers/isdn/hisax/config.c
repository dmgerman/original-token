multiline_comment|/* $Id: config.c,v 2.57.6.6 2000/12/10 23:39:19 kai Exp $&n; *&n; * Author       Karsten Keil (keil@isdn4linux.de)&n; *              based on the teles driver from Jan den Ouden&n; *&n; * This file is (c) under GNU PUBLIC LICENSE&n; *&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/stddef.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &quot;hisax.h&quot;
macro_line|#include &lt;linux/module.h&gt;
macro_line|#include &lt;linux/kernel_stat.h&gt;
macro_line|#include &lt;linux/tqueue.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
DECL|macro|HISAX_STATUS_BUFSIZE
mdefine_line|#define HISAX_STATUS_BUFSIZE 4096
DECL|macro|INCLUDE_INLINE_FUNCS
mdefine_line|#define INCLUDE_INLINE_FUNCS
multiline_comment|/*&n; * This structure array contains one entry per card. An entry looks&n; * like this:&n; *&n; * { type, protocol, p0, p1, p2, NULL }&n; *&n; * type&n; *    1 Teles 16.0       p0=irq p1=membase p2=iobase&n; *    2 Teles  8.0       p0=irq p1=membase&n; *    3 Teles 16.3       p0=irq p1=iobase&n; *    4 Creatix PNP      p0=irq p1=IO0 (ISAC)  p2=IO1 (HSCX)&n; *    5 AVM A1 (Fritz)   p0=irq p1=iobase&n; *    6 ELSA PC          [p0=iobase] or nothing (autodetect)&n; *    7 ELSA Quickstep   p0=irq p1=iobase&n; *    8 Teles PCMCIA     p0=irq p1=iobase&n; *    9 ITK ix1-micro    p0=irq p1=iobase&n; *   10 ELSA PCMCIA      p0=irq p1=iobase&n; *   11 Eicon.Diehl Diva p0=irq p1=iobase&n; *   12 Asuscom ISDNLink p0=irq p1=iobase&n; *   13 Teleint          p0=irq p1=iobase&n; *   14 Teles 16.3c      p0=irq p1=iobase&n; *   15 Sedlbauer speed  p0=irq p1=iobase&n; *   15 Sedlbauer PC/104&t;p0=irq p1=iobase&n; *   15 Sedlbauer speed pci&t;no parameter&n; *   16 USR Sportster internal  p0=irq  p1=iobase&n; *   17 MIC card                p0=irq  p1=iobase&n; *   18 ELSA Quickstep 1000PCI  no parameter&n; *   19 Compaq ISDN S0 ISA card p0=irq  p1=IO0 (HSCX)  p2=IO1 (ISAC) p3=IO2&n; *   20 Travers Technologies NETjet-S PCI card&n; *   21 TELES PCI               no parameter&n; *   22 Sedlbauer Speed Star    p0=irq p1=iobase&n; *   23 reserved&n; *   24 Dr Neuhaus Niccy PnP/PCI card p0=irq p1=IO0 p2=IO1 (PnP only)&n; *   25 Teles S0Box             p0=irq p1=iobase (from isapnp setup)&n; *   26 AVM A1 PCMCIA (Fritz)   p0=irq p1=iobase&n; *   27 AVM PnP/PCI &t;&t;p0=irq p1=iobase (PCI no parameter)&n; *   28 Sedlbauer Speed Fax+ &t;p0=irq p1=iobase (from isapnp setup)&n; *   29 Siemens I-Surf          p0=irq p1=iobase p2=memory (from isapnp setup)   &n; *   30 ACER P10                p0=irq p1=iobase (from isapnp setup)   &n; *   31 HST Saphir              p0=irq  p1=iobase&n; *   32 Telekom A4T             none&n; *   33 Scitel Quadro&t;&t;p0=subcontroller (4*S0, subctrl 1...4)&n; *   34&t;Gazel ISDN cards&n; *   35 HFC 2BDS0 PCI           none&n; *   36 Winbond 6692 PCI        none&n; *   37 HFC 2BDS0 S+/SP         p0=irq p1=iobase&n; *   38 Travers Technologies NETspider-U PCI card&n; *   39 HFC 2BDS0-SP PCMCIA     p0=irq p1=iobase&n; *&n; * protocol can be either ISDN_PTYPE_EURO or ISDN_PTYPE_1TR6 or ISDN_PTYPE_NI1&n; *&n; *&n; */
DECL|variable|CardType
r_const
r_char
op_star
id|CardType
(braket
)braket
op_assign
(brace
l_string|&quot;No Card&quot;
comma
l_string|&quot;Teles 16.0&quot;
comma
l_string|&quot;Teles 8.0&quot;
comma
l_string|&quot;Teles 16.3&quot;
comma
l_string|&quot;Creatix/Teles PnP&quot;
comma
l_string|&quot;AVM A1&quot;
comma
l_string|&quot;Elsa ML&quot;
comma
l_string|&quot;Elsa Quickstep&quot;
comma
l_string|&quot;Teles PCMCIA&quot;
comma
l_string|&quot;ITK ix1-micro Rev.2&quot;
comma
l_string|&quot;Elsa PCMCIA&quot;
comma
l_string|&quot;Eicon.Diehl Diva&quot;
comma
l_string|&quot;ISDNLink&quot;
comma
l_string|&quot;TeleInt&quot;
comma
l_string|&quot;Teles 16.3c&quot;
comma
l_string|&quot;Sedlbauer Speed Card&quot;
comma
l_string|&quot;USR Sportster&quot;
comma
l_string|&quot;ith mic Linux&quot;
comma
l_string|&quot;Elsa PCI&quot;
comma
l_string|&quot;Compaq ISA&quot;
comma
l_string|&quot;NETjet-S&quot;
comma
l_string|&quot;Teles PCI&quot;
comma
l_string|&quot;Sedlbauer Speed Star (PCMCIA)&quot;
comma
l_string|&quot;AMD 7930&quot;
comma
l_string|&quot;NICCY&quot;
comma
l_string|&quot;S0Box&quot;
comma
l_string|&quot;AVM A1 (PCMCIA)&quot;
comma
l_string|&quot;AVM Fritz PnP/PCI&quot;
comma
l_string|&quot;Sedlbauer Speed Fax +&quot;
comma
l_string|&quot;Siemens I-Surf&quot;
comma
l_string|&quot;Acer P10&quot;
comma
l_string|&quot;HST Saphir&quot;
comma
l_string|&quot;Telekom A4T&quot;
comma
l_string|&quot;Scitel Quadro&quot;
comma
l_string|&quot;Gazel&quot;
comma
l_string|&quot;HFC 2BDS0 PCI&quot;
comma
l_string|&quot;Winbond 6692&quot;
comma
l_string|&quot;HFC 2BDS0 SX&quot;
comma
l_string|&quot;NETspider-U&quot;
comma
l_string|&quot;HFC-2BDS0-SP PCMCIA&quot;
comma
)brace
suffix:semicolon
r_void
id|HiSax_closecard
c_func
(paren
r_int
id|cardnr
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_HISAX_ELSA
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_ELSA
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
r_int
id|elsa_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
comma
r_int
op_star
comma
r_int
)paren
suffix:semicolon
DECL|variable|elsa_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|elsa_init_pcmcia
)paren
suffix:semicolon
macro_line|#endif /* CONFIG_HISAX_ELSA */
macro_line|#ifdef CONFIG_HISAX_AVM_A1
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_A1
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {10,0x340,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_AVM_A1_PCMCIA
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_A1_PCMCIA
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {11,0x170,0,0}
r_int
id|avm_a1_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
comma
r_int
op_star
comma
r_int
)paren
suffix:semicolon
DECL|variable|avm_a1_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|avm_a1_init_pcmcia
)paren
suffix:semicolon
macro_line|#endif /* CONFIG_HISAX_AVM_A1_PCMCIA */
macro_line|#ifdef CONFIG_HISAX_FRITZPCI
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_FRITZPCI
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_16_3
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_16_3
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {15,0x180,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_S0BOX
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_S0BOX
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {7,0x378,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_16_0
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_16_0
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {15,0xd0000,0xd80,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_TELESPCI
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_TELESPCI
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_IX1MICROR2
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_IX1MICROR2
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x390,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_DIEHLDIVA
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_DIEHLDIVA
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0x0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_ASUSCOM
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_ASUSCOM
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x200,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_TELEINT
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_TELEINT
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x300,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_SEDLBAUER
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {11,0x270,0,0}
r_int
id|sedl_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
comma
r_int
op_star
comma
r_int
)paren
suffix:semicolon
DECL|variable|sedl_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|sedl_init_pcmcia
)paren
suffix:semicolon
macro_line|#endif /* CONFIG_HISAX_SEDLBAUER */
macro_line|#ifdef CONFIG_HISAX_SPORTSTER
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_SPORTSTER
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {7,0x268,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_MIC
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_MIC
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {12,0x3e0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NETJET
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_NETJET_S
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HFCS
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_TELES3C
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x500,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HFC_PCI
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_HFC_PCI
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HFC_SX
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_HFC_SX
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x2E0,0,0}
r_int
id|hfc_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
comma
r_int
op_star
comma
r_int
)paren
suffix:semicolon
DECL|variable|hfc_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|hfc_init_pcmcia
)paren
suffix:semicolon
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_AMD7930
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_AMD7930
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {12,0x3e0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NICCY
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_NICCY
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0x0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_ISURF
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_ISURF
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x100,0xc8000,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HSTSAPHIR
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_HSTSAPHIR
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {5,0x250,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_BKM_A4T            
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_BKM_A4T
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0x0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SCT_QUADRO
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_SCT_QUADRO
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {1,0x0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_GAZEL
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_GAZEL
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {15,0x180,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_W6692
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_W6692
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NETJET_U
DECL|macro|DEFAULT_CARD
macro_line|#undef DEFAULT_CARD
DECL|macro|DEFAULT_CFG
macro_line|#undef DEFAULT_CFG
DECL|macro|DEFAULT_CARD
mdefine_line|#define DEFAULT_CARD ISDN_CTYPE_NETJET_U
DECL|macro|DEFAULT_CFG
mdefine_line|#define DEFAULT_CFG {0,0,0,0}
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_1TR6
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_1TR6
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;1TR6&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NI1
DECL|macro|DEFAULT_PROTO
macro_line|#undef DEFAULT_PROTO
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_NI1
DECL|macro|DEFAULT_PROTO_NAME
macro_line|#undef DEFAULT_PROTO_NAME
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;NI1&quot;
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_EURO
DECL|macro|DEFAULT_PROTO
macro_line|#undef DEFAULT_PROTO
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_EURO
DECL|macro|DEFAULT_PROTO_NAME
macro_line|#undef DEFAULT_PROTO_NAME
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;EURO&quot;
macro_line|#endif
macro_line|#ifndef DEFAULT_PROTO
DECL|macro|DEFAULT_PROTO
mdefine_line|#define DEFAULT_PROTO ISDN_PTYPE_UNKNOWN
DECL|macro|DEFAULT_PROTO_NAME
mdefine_line|#define DEFAULT_PROTO_NAME &quot;UNKNOWN&quot;
macro_line|#endif
macro_line|#ifndef DEFAULT_CARD
macro_line|#error &quot;HiSax: No cards configured&quot;
macro_line|#endif
r_int
id|hisax_init_pcmcia
c_func
(paren
r_void
op_star
comma
r_int
op_star
comma
r_struct
id|IsdnCard
op_star
)paren
suffix:semicolon
DECL|variable|hisax_init_pcmcia
id|EXPORT_SYMBOL
c_func
(paren
id|hisax_init_pcmcia
)paren
suffix:semicolon
DECL|variable|HiSax_closecard
id|EXPORT_SYMBOL
c_func
(paren
id|HiSax_closecard
)paren
suffix:semicolon
DECL|macro|FIRST_CARD
mdefine_line|#define FIRST_CARD { &bslash;&n;&t;DEFAULT_CARD, &bslash;&n;&t;DEFAULT_PROTO, &bslash;&n;&t;DEFAULT_CFG, &bslash;&n;&t;NULL, &bslash;&n;}
DECL|macro|EMPTY_CARD
mdefine_line|#define EMPTY_CARD&t;{0, DEFAULT_PROTO, {0, 0, 0, 0}, NULL}
DECL|variable|cards
r_struct
id|IsdnCard
id|cards
(braket
)braket
op_assign
(brace
id|FIRST_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
id|EMPTY_CARD
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_char
id|HiSaxID
(braket
l_int|64
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_char
op_star
id|HiSax_id
id|__devinitdata
op_assign
id|HiSaxID
suffix:semicolon
macro_line|#ifdef MODULE
multiline_comment|/* Variables for insmod */
DECL|variable|__devinitdata
r_static
r_int
id|type
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_int
id|protocol
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_int
id|io
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|macro|IO0_IO1
macro_line|#undef IO0_IO1
macro_line|#ifdef CONFIG_HISAX_16_3
DECL|macro|IO0_IO1
mdefine_line|#define IO0_IO1
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NICCY
DECL|macro|IO0_IO1
macro_line|#undef IO0_IO1
DECL|macro|IO0_IO1
mdefine_line|#define IO0_IO1
macro_line|#endif
macro_line|#ifdef IO0_IO1
DECL|variable|__devinitdata
r_static
r_int
id|io0
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_int
id|io1
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
macro_line|#endif
DECL|variable|__devinitdata
r_static
r_int
id|irq
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_int
id|mem
(braket
l_int|8
)braket
id|__devinitdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|__devinitdata
r_static
r_char
op_star
id|id
id|__devinitdata
op_assign
id|HiSaxID
suffix:semicolon
id|MODULE_AUTHOR
c_func
(paren
l_string|&quot;Karsten Keil&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|type
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|protocol
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|io
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|irq
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|mem
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|id
comma
l_string|&quot;s&quot;
)paren
suffix:semicolon
macro_line|#ifdef IO0_IO1
id|MODULE_PARM
c_func
(paren
id|io0
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
id|MODULE_PARM
c_func
(paren
id|io1
comma
l_string|&quot;1-8i&quot;
)paren
suffix:semicolon
macro_line|#endif /* IO0_IO1 */
macro_line|#endif /* MODULE */
DECL|variable|nrcards
r_int
id|nrcards
suffix:semicolon
r_extern
r_char
op_star
id|l1_revision
suffix:semicolon
r_extern
r_char
op_star
id|l2_revision
suffix:semicolon
r_extern
r_char
op_star
id|l3_revision
suffix:semicolon
r_extern
r_char
op_star
id|lli_revision
suffix:semicolon
r_extern
r_char
op_star
id|tei_revision
suffix:semicolon
r_char
op_star
DECL|function|HiSax_getrev
id|HiSax_getrev
c_func
(paren
r_const
r_char
op_star
id|revision
)paren
(brace
r_char
op_star
id|rev
suffix:semicolon
r_char
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|strchr
c_func
(paren
id|revision
comma
l_char|&squot;:&squot;
)paren
)paren
)paren
(brace
id|rev
op_assign
id|p
op_plus
l_int|2
suffix:semicolon
id|p
op_assign
id|strchr
c_func
(paren
id|rev
comma
l_char|&squot;$&squot;
)paren
suffix:semicolon
op_star
op_decrement
id|p
op_assign
l_int|0
suffix:semicolon
)brace
r_else
id|rev
op_assign
l_string|&quot;???&quot;
suffix:semicolon
r_return
id|rev
suffix:semicolon
)brace
r_void
id|__init
DECL|function|HiSaxVersion
id|HiSaxVersion
c_func
(paren
r_void
)paren
(brace
r_char
id|tmp
(braket
l_int|64
)braket
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Linux Driver for passive ISDN cards&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#ifdef MODULE
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Version 3.5 (module)&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#else
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Version 3.5 (kernel)&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
id|strcpy
c_func
(paren
id|tmp
comma
id|l1_revision
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Layer1 Revision %s&bslash;n&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|l2_revision
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Layer2 Revision %s&bslash;n&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|tei_revision
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: TeiMgr Revision %s&bslash;n&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|l3_revision
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Layer3 Revision %s&bslash;n&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|strcpy
c_func
(paren
id|tmp
comma
id|lli_revision
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: LinkLayer Revision %s&bslash;n&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|certification_check
c_func
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_void
DECL|function|HiSax_mod_dec_use_count
id|HiSax_mod_dec_use_count
c_func
(paren
r_void
)paren
(brace
id|MOD_DEC_USE_COUNT
suffix:semicolon
)brace
r_void
DECL|function|HiSax_mod_inc_use_count
id|HiSax_mod_inc_use_count
c_func
(paren
r_void
)paren
(brace
id|MOD_INC_USE_COUNT
suffix:semicolon
)brace
macro_line|#ifndef MODULE
DECL|macro|MAX_ARG
mdefine_line|#define MAX_ARG&t;(HISAX_MAX_CARDS*5)
r_static
r_int
id|__init
DECL|function|HiSax_setup
id|HiSax_setup
c_func
(paren
r_char
op_star
id|line
)paren
(brace
r_int
id|i
comma
id|j
comma
id|argc
suffix:semicolon
r_int
id|ints
(braket
id|MAX_ARG
op_plus
l_int|1
)braket
suffix:semicolon
r_char
op_star
id|str
suffix:semicolon
id|str
op_assign
id|get_options
c_func
(paren
id|line
comma
id|MAX_ARG
comma
id|ints
)paren
suffix:semicolon
id|argc
op_assign
id|ints
(braket
l_int|0
)braket
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax_setup: argc(%d) str(%s)&bslash;n&quot;
comma
id|argc
comma
id|str
)paren
suffix:semicolon
id|i
op_assign
l_int|0
suffix:semicolon
id|j
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|argc
op_logical_and
(paren
id|i
OL
id|HISAX_MAX_CARDS
)paren
)paren
(brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
r_if
c_cond
(paren
id|argc
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|ints
(braket
id|j
)braket
suffix:semicolon
id|j
op_increment
suffix:semicolon
id|argc
op_decrement
suffix:semicolon
)brace
id|i
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
id|str
op_logical_and
op_star
id|str
)paren
(brace
id|strcpy
c_func
(paren
id|HiSaxID
comma
id|str
)paren
suffix:semicolon
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
)brace
r_else
(brace
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
id|__setup
c_func
(paren
l_string|&quot;hisax=&quot;
comma
id|HiSax_setup
)paren
suffix:semicolon
macro_line|#endif /* MODULES */
macro_line|#if CARD_TELES0
r_extern
r_int
id|setup_teles0
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELES3
r_extern
r_int
id|setup_teles3
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_S0BOX
r_extern
r_int
id|setup_s0box
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELESPCI
r_extern
r_int
id|setup_telespci
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AVM_A1
r_extern
r_int
id|setup_avm_a1
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AVM_A1_PCMCIA
r_extern
r_int
id|setup_avm_a1_pcmcia
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_FRITZPCI
r_extern
r_int
id|setup_avm_pcipnp
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ELSA
r_extern
r_int
id|setup_elsa
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_IX1MICROR2
r_extern
r_int
id|setup_ix1micro
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_DIEHLDIVA
r_extern
r_int
id|setup_diva
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ASUSCOM
r_extern
r_int
id|setup_asuscom
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELEINT
r_extern
r_int
id|setup_TeleInt
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SEDLBAUER
r_extern
r_int
id|setup_sedlbauer
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SPORTSTER
r_extern
r_int
id|setup_sportster
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_MIC
r_extern
r_int
id|setup_mic
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NETJET_S
r_extern
r_int
id|setup_netjet_s
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HFCS
r_extern
r_int
id|setup_hfcs
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HFC_PCI
r_extern
r_int
id|setup_hfcpci
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HFC_SX
r_extern
r_int
id|setup_hfcsx
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AMD7930
r_extern
r_int
id|setup_amd7930
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NICCY
r_extern
r_int
id|setup_niccy
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ISURF
r_extern
r_int
id|setup_isurf
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HSTSAPHIR
r_extern
r_int
id|setup_saphir
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TESTEMU
r_extern
r_int
id|setup_testemu
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_BKM_A4T
r_extern
r_int
id|setup_bkm_a4t
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SCT_QUADRO
r_extern
r_int
id|setup_sct_quadro
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_GAZEL
r_extern
r_int
id|setup_gazel
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_W6692
r_extern
r_int
id|setup_w6692
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NETJET_U
r_extern
r_int
id|setup_netjet_u
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/*&n; * Find card with given driverId&n; */
r_static
r_inline
r_struct
id|IsdnCardState
DECL|function|hisax_findcard
op_star
id|hisax_findcard
c_func
(paren
r_int
id|driverid
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|nrcards
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs-&gt;myid
op_eq
id|driverid
)paren
r_return
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Find card with given card number&n; */
r_struct
id|IsdnCardState
DECL|function|hisax_get_card
op_star
id|hisax_get_card
c_func
(paren
r_int
id|cardnr
)paren
(brace
r_if
c_cond
(paren
(paren
id|cardnr
op_le
id|nrcards
)paren
op_logical_and
(paren
id|cardnr
OG
l_int|0
)paren
)paren
r_if
c_cond
(paren
id|cards
(braket
id|cardnr
op_minus
l_int|1
)braket
dot
id|cs
)paren
r_return
(paren
id|cards
(braket
id|cardnr
op_minus
l_int|1
)braket
dot
id|cs
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_int
DECL|function|HiSax_readstatus
id|HiSax_readstatus
c_func
(paren
id|u_char
op_star
id|buf
comma
r_int
id|len
comma
r_int
id|user
comma
r_int
id|id
comma
r_int
id|channel
)paren
(brace
r_int
id|count
comma
id|cnt
suffix:semicolon
id|u_char
op_star
id|p
op_assign
id|buf
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|hisax_findcard
c_func
(paren
id|id
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cs
)paren
(brace
r_if
c_cond
(paren
id|len
OG
id|HISAX_STATUS_BUFSIZE
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: status overflow readstat %d/%d&bslash;n&quot;
comma
id|len
comma
id|HISAX_STATUS_BUFSIZE
)paren
suffix:semicolon
)brace
id|count
op_assign
id|cs-&gt;status_end
op_minus
id|cs-&gt;status_read
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|count
op_ge
id|len
)paren
id|count
op_assign
id|len
suffix:semicolon
r_if
c_cond
(paren
id|user
)paren
id|copy_to_user
c_func
(paren
id|p
comma
id|cs-&gt;status_read
comma
id|count
)paren
suffix:semicolon
r_else
id|memcpy
c_func
(paren
id|p
comma
id|cs-&gt;status_read
comma
id|count
)paren
suffix:semicolon
id|cs-&gt;status_read
op_add_assign
id|count
suffix:semicolon
r_if
c_cond
(paren
id|cs-&gt;status_read
OG
id|cs-&gt;status_end
)paren
id|cs-&gt;status_read
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|p
op_add_assign
id|count
suffix:semicolon
id|count
op_assign
id|len
op_minus
id|count
suffix:semicolon
r_while
c_loop
(paren
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
OG
id|HISAX_STATUS_BUFSIZE
)paren
id|cnt
op_assign
id|HISAX_STATUS_BUFSIZE
suffix:semicolon
r_else
id|cnt
op_assign
id|count
suffix:semicolon
r_if
c_cond
(paren
id|user
)paren
id|copy_to_user
c_func
(paren
id|p
comma
id|cs-&gt;status_read
comma
id|cnt
)paren
suffix:semicolon
r_else
id|memcpy
c_func
(paren
id|p
comma
id|cs-&gt;status_read
comma
id|cnt
)paren
suffix:semicolon
id|p
op_add_assign
id|cnt
suffix:semicolon
id|cs-&gt;status_read
op_add_assign
id|cnt
op_mod
id|HISAX_STATUS_BUFSIZE
suffix:semicolon
id|count
op_sub_assign
id|cnt
suffix:semicolon
)brace
r_return
id|len
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;HiSax: if_readstatus called with invalid driverId!&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
)brace
r_inline
r_int
DECL|function|jiftime
id|jiftime
c_func
(paren
r_char
op_star
id|s
comma
r_int
id|mark
)paren
(brace
id|s
op_add_assign
l_int|8
suffix:semicolon
op_star
id|s
op_decrement
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
op_star
id|s
op_decrement
op_assign
id|mark
op_mod
l_int|10
op_plus
l_char|&squot;0&squot;
suffix:semicolon
id|mark
op_div_assign
l_int|10
suffix:semicolon
op_star
id|s
op_decrement
op_assign
id|mark
op_mod
l_int|10
op_plus
l_char|&squot;0&squot;
suffix:semicolon
id|mark
op_div_assign
l_int|10
suffix:semicolon
op_star
id|s
op_decrement
op_assign
l_char|&squot;.&squot;
suffix:semicolon
op_star
id|s
op_decrement
op_assign
id|mark
op_mod
l_int|10
op_plus
l_char|&squot;0&squot;
suffix:semicolon
id|mark
op_div_assign
l_int|10
suffix:semicolon
op_star
id|s
op_decrement
op_assign
id|mark
op_mod
l_int|6
op_plus
l_char|&squot;0&squot;
suffix:semicolon
id|mark
op_div_assign
l_int|6
suffix:semicolon
op_star
id|s
op_decrement
op_assign
l_char|&squot;:&squot;
suffix:semicolon
op_star
id|s
op_decrement
op_assign
id|mark
op_mod
l_int|10
op_plus
l_char|&squot;0&squot;
suffix:semicolon
id|mark
op_div_assign
l_int|10
suffix:semicolon
op_star
id|s
op_decrement
op_assign
id|mark
op_mod
l_int|10
op_plus
l_char|&squot;0&squot;
suffix:semicolon
r_return
l_int|8
suffix:semicolon
)brace
DECL|variable|tmpbuf
r_static
id|u_char
id|tmpbuf
(braket
id|HISAX_STATUS_BUFSIZE
)braket
suffix:semicolon
r_void
DECL|function|VHiSax_putstatus
id|VHiSax_putstatus
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_char
op_star
id|head
comma
r_char
op_star
id|fmt
comma
id|va_list
id|args
)paren
(brace
multiline_comment|/* if head == NULL the fmt contains the full info */
r_int
id|flags
suffix:semicolon
r_int
id|count
comma
id|i
suffix:semicolon
id|u_char
op_star
id|p
suffix:semicolon
id|isdn_ctrl
id|ic
suffix:semicolon
r_int
id|len
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
id|p
op_assign
id|tmpbuf
suffix:semicolon
r_if
c_cond
(paren
id|head
)paren
(brace
id|p
op_add_assign
id|jiftime
c_func
(paren
id|p
comma
id|jiffies
)paren
suffix:semicolon
id|p
op_add_assign
id|sprintf
c_func
(paren
id|p
comma
l_string|&quot; %s&quot;
comma
id|head
)paren
suffix:semicolon
id|p
op_add_assign
id|vsprintf
c_func
(paren
id|p
comma
id|fmt
comma
id|args
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_char|&squot;&bslash;n&squot;
suffix:semicolon
op_star
id|p
op_assign
l_int|0
suffix:semicolon
id|len
op_assign
id|p
op_minus
id|tmpbuf
suffix:semicolon
id|p
op_assign
id|tmpbuf
suffix:semicolon
)brace
r_else
(brace
id|p
op_assign
id|fmt
suffix:semicolon
id|len
op_assign
id|strlen
c_func
(paren
id|fmt
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|cs
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No CardStatus for message %s&quot;
comma
id|p
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|len
OG
id|HISAX_STATUS_BUFSIZE
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: status overflow %d/%d&bslash;n&quot;
comma
id|len
comma
id|HISAX_STATUS_BUFSIZE
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|count
op_assign
id|len
suffix:semicolon
id|i
op_assign
id|cs-&gt;status_end
op_minus
id|cs-&gt;status_write
op_plus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|i
op_ge
id|len
)paren
id|i
op_assign
id|len
suffix:semicolon
id|len
op_sub_assign
id|i
suffix:semicolon
id|memcpy
c_func
(paren
id|cs-&gt;status_write
comma
id|p
comma
id|i
)paren
suffix:semicolon
id|cs-&gt;status_write
op_add_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
id|cs-&gt;status_write
OG
id|cs-&gt;status_end
)paren
id|cs-&gt;status_write
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|p
op_add_assign
id|i
suffix:semicolon
r_if
c_cond
(paren
id|len
)paren
(brace
id|memcpy
c_func
(paren
id|cs-&gt;status_write
comma
id|p
comma
id|len
)paren
suffix:semicolon
id|cs-&gt;status_write
op_add_assign
id|len
suffix:semicolon
)brace
macro_line|#ifdef KERNELSTACK_DEBUG
id|i
op_assign
(paren
id|ulong
)paren
op_amp
id|len
op_minus
id|current-&gt;kernel_stack_page
suffix:semicolon
id|sprintf
c_func
(paren
id|tmpbuf
comma
l_string|&quot;kstack %s %lx use %ld&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;kernel_stack_page
comma
id|i
)paren
suffix:semicolon
id|len
op_assign
id|strlen
c_func
(paren
id|tmpbuf
)paren
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
id|tmpbuf
comma
id|i
op_assign
id|len
suffix:semicolon
id|i
OG
l_int|0
suffix:semicolon
id|i
op_decrement
comma
id|p
op_increment
)paren
(brace
op_star
id|cs-&gt;status_write
op_increment
op_assign
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
id|cs-&gt;status_write
OG
id|cs-&gt;status_end
)paren
id|cs-&gt;status_write
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
macro_line|#endif
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
)paren
(brace
id|ic.command
op_assign
id|ISDN_STAT_STAVAIL
suffix:semicolon
id|ic.driver
op_assign
id|cs-&gt;myid
suffix:semicolon
id|ic.arg
op_assign
id|count
suffix:semicolon
id|cs-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|HiSax_putstatus
id|HiSax_putstatus
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_char
op_star
id|head
comma
r_char
op_star
id|fmt
comma
dot
dot
dot
)paren
(brace
id|va_list
id|args
suffix:semicolon
id|va_start
c_func
(paren
id|args
comma
id|fmt
)paren
suffix:semicolon
id|VHiSax_putstatus
c_func
(paren
id|cs
comma
id|head
comma
id|fmt
comma
id|args
)paren
suffix:semicolon
id|va_end
c_func
(paren
id|args
)paren
suffix:semicolon
)brace
r_int
DECL|function|ll_run
id|ll_run
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_int
id|addfeatures
)paren
(brace
r_int
id|flags
suffix:semicolon
id|isdn_ctrl
id|ic
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
id|ic.driver
op_assign
id|cs-&gt;myid
suffix:semicolon
id|ic.command
op_assign
id|ISDN_STAT_RUN
suffix:semicolon
id|cs-&gt;iif.features
op_or_assign
id|addfeatures
suffix:semicolon
id|cs-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|ll_stop
id|ll_stop
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
id|isdn_ctrl
id|ic
suffix:semicolon
id|ic.command
op_assign
id|ISDN_STAT_STOP
suffix:semicolon
id|ic.driver
op_assign
id|cs-&gt;myid
suffix:semicolon
id|cs-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
singleline_comment|//&t;CallcFreeChan(cs);
)brace
r_static
r_void
DECL|function|ll_unload
id|ll_unload
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
id|isdn_ctrl
id|ic
suffix:semicolon
id|ic.command
op_assign
id|ISDN_STAT_UNLOAD
suffix:semicolon
id|ic.driver
op_assign
id|cs-&gt;myid
suffix:semicolon
id|cs-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cs-&gt;status_buf
)paren
id|kfree
c_func
(paren
id|cs-&gt;status_buf
)paren
suffix:semicolon
id|cs-&gt;status_read
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;status_write
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;status_end
op_assign
l_int|NULL
suffix:semicolon
id|kfree
c_func
(paren
id|cs-&gt;dlog
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|closecard
id|closecard
c_func
(paren
r_int
id|cardnr
)paren
(brace
r_struct
id|IsdnCardState
op_star
id|csta
op_assign
id|cards
(braket
id|cardnr
)braket
dot
id|cs
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;bcs-&gt;BC_Close
op_ne
l_int|NULL
)paren
(brace
id|csta-&gt;bcs
op_member_access_from_pointer
id|BC_Close
c_func
(paren
id|csta-&gt;bcs
op_plus
l_int|1
)paren
suffix:semicolon
id|csta-&gt;bcs
op_member_access_from_pointer
id|BC_Close
c_func
(paren
id|csta-&gt;bcs
)paren
suffix:semicolon
)brace
id|discard_queue
c_func
(paren
op_amp
id|csta-&gt;rq
)paren
suffix:semicolon
id|discard_queue
c_func
(paren
op_amp
id|csta-&gt;sq
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;rcvbuf
)paren
(brace
id|kfree
c_func
(paren
id|csta-&gt;rcvbuf
)paren
suffix:semicolon
id|csta-&gt;rcvbuf
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csta-&gt;tx_skb
)paren
(brace
id|dev_kfree_skb
c_func
(paren
id|csta-&gt;tx_skb
)paren
suffix:semicolon
id|csta-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csta-&gt;DC_Close
op_ne
l_int|NULL
)paren
(brace
id|csta
op_member_access_from_pointer
id|DC_Close
c_func
(paren
id|csta
)paren
suffix:semicolon
)brace
id|csta
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|csta
comma
id|CARD_RELEASE
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;dbusytimer.function
op_ne
l_int|NULL
)paren
id|del_timer
c_func
(paren
op_amp
id|csta-&gt;dbusytimer
)paren
suffix:semicolon
id|ll_unload
c_func
(paren
id|csta
)paren
suffix:semicolon
)brace
r_static
r_int
id|__devinit
DECL|function|init_card
id|init_card
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
r_int
id|irq_cnt
comma
id|cnt
op_assign
l_int|3
suffix:semicolon
r_int
id|flags
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|cs-&gt;irq
)paren
r_return
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_INIT
comma
l_int|NULL
)paren
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
id|irq_cnt
op_assign
id|kstat_irqs
c_func
(paren
id|cs-&gt;irq
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: IRQ %d count %d&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
comma
id|cs-&gt;irq
comma
id|irq_cnt
)paren
suffix:semicolon
r_if
c_cond
(paren
id|request_irq
c_func
(paren
id|cs-&gt;irq
comma
id|cs-&gt;irq_func
comma
id|cs-&gt;irq_flags
comma
l_string|&quot;HiSax&quot;
comma
id|cs
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: couldn&squot;t get interrupt %d&bslash;n&quot;
comma
id|cs-&gt;irq
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_while
c_loop
(paren
id|cnt
)paren
(brace
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_INIT
comma
l_int|NULL
)paren
suffix:semicolon
id|sti
c_func
(paren
)paren
suffix:semicolon
id|set_current_state
c_func
(paren
id|TASK_UNINTERRUPTIBLE
)paren
suffix:semicolon
multiline_comment|/* Timeout 10ms */
id|schedule_timeout
c_func
(paren
(paren
l_int|10
op_star
id|HZ
)paren
op_div
l_int|1000
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: IRQ %d count %d&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
comma
id|cs-&gt;irq
comma
id|kstat_irqs
c_func
(paren
id|cs-&gt;irq
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kstat_irqs
c_func
(paren
id|cs-&gt;irq
)paren
op_eq
id|irq_cnt
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;%s: IRQ(%d) getting no interrupts during init %d&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
comma
id|cs-&gt;irq
comma
l_int|4
op_minus
id|cnt
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cnt
op_eq
l_int|1
)paren
(brace
id|free_irq
c_func
(paren
id|cs-&gt;irq
comma
id|cs
)paren
suffix:semicolon
r_return
(paren
l_int|2
)paren
suffix:semicolon
)brace
r_else
(brace
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_RESET
comma
l_int|NULL
)paren
suffix:semicolon
id|cnt
op_decrement
suffix:semicolon
)brace
)brace
r_else
(brace
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_TEST
comma
l_int|NULL
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
l_int|3
suffix:semicolon
)brace
r_static
r_int
id|__devinit
DECL|function|checkcard
id|checkcard
c_func
(paren
r_int
id|cardnr
comma
r_char
op_star
id|id
comma
r_int
op_star
id|busy_flag
)paren
(brace
r_int
id|flags
suffix:semicolon
r_int
id|ret
op_assign
l_int|0
suffix:semicolon
r_struct
id|IsdnCard
op_star
id|card
op_assign
id|cards
op_plus
id|cardnr
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs
op_assign
(paren
r_struct
id|IsdnCardState
op_star
)paren
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|IsdnCardState
)paren
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for IsdnCardState(card %d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|memset
c_func
(paren
id|cs
comma
l_int|0
comma
r_sizeof
(paren
r_struct
id|IsdnCardState
)paren
)paren
suffix:semicolon
id|card-&gt;cs
op_assign
id|cs
suffix:semicolon
id|cs-&gt;chanlimit
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* maximum B-channel number */
id|cs-&gt;logecho
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* No echo logging */
id|cs-&gt;cardnr
op_assign
id|cardnr
suffix:semicolon
id|cs-&gt;debug
op_assign
id|L1_DEB_WARN
suffix:semicolon
id|cs-&gt;HW_Flags
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;busy_flag
op_assign
id|busy_flag
suffix:semicolon
id|cs-&gt;irq_flags
op_assign
id|I4L_IRQ_FLAG
suffix:semicolon
macro_line|#if TEI_PER_CARD
r_if
c_cond
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_NI1
)paren
id|test_and_set_bit
c_func
(paren
id|FLG_TWO_DCHAN
comma
op_amp
id|cs-&gt;HW_Flags
)paren
suffix:semicolon
macro_line|#else
id|test_and_set_bit
c_func
(paren
id|FLG_TWO_DCHAN
comma
op_amp
id|cs-&gt;HW_Flags
)paren
suffix:semicolon
macro_line|#endif
id|cs-&gt;protocol
op_assign
id|card-&gt;protocol
suffix:semicolon
r_if
c_cond
(paren
(paren
id|card-&gt;typ
OG
l_int|0
)paren
op_logical_and
(paren
id|card-&gt;typ
op_le
id|ISDN_CTYPE_COUNT
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs-&gt;dlog
op_assign
id|kmalloc
c_func
(paren
id|MAX_DLOG_SPACE
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for dlog(card %d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs-&gt;status_buf
op_assign
id|kmalloc
c_func
(paren
id|HISAX_STATUS_BUFSIZE
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for status_buf(card %d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|cs-&gt;dlog
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|cs-&gt;stlist
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;status_read
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|cs-&gt;status_write
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|cs-&gt;status_end
op_assign
id|cs-&gt;status_buf
op_plus
id|HISAX_STATUS_BUFSIZE
op_minus
l_int|1
suffix:semicolon
id|cs-&gt;typ
op_assign
id|card-&gt;typ
suffix:semicolon
id|strcpy
c_func
(paren
id|cs-&gt;iif.id
comma
id|id
)paren
suffix:semicolon
id|cs-&gt;iif.channels
op_assign
l_int|2
suffix:semicolon
id|cs-&gt;iif.maxbufsize
op_assign
id|MAX_DATA_SIZE
suffix:semicolon
id|cs-&gt;iif.hl_hdrlen
op_assign
id|MAX_HEADER_LEN
suffix:semicolon
id|cs-&gt;iif.features
op_assign
id|ISDN_FEATURE_L2_X75I
op_or
id|ISDN_FEATURE_L2_HDLC
op_or
id|ISDN_FEATURE_L2_HDLC_56K
op_or
id|ISDN_FEATURE_L2_TRANS
op_or
id|ISDN_FEATURE_L3_TRANS
op_or
macro_line|#ifdef&t;CONFIG_HISAX_1TR6
id|ISDN_FEATURE_P_1TR6
op_or
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_EURO
id|ISDN_FEATURE_P_EURO
op_or
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_NI1
id|ISDN_FEATURE_P_NI1
op_or
macro_line|#endif
l_int|0
suffix:semicolon
id|cs-&gt;iif.command
op_assign
id|HiSax_command
suffix:semicolon
id|cs-&gt;iif.writecmd
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;iif.writebuf_skb
op_assign
id|HiSax_writebuf_skb
suffix:semicolon
id|cs-&gt;iif.readstat
op_assign
id|HiSax_readstatus
suffix:semicolon
id|register_isdn
c_func
(paren
op_amp
id|cs-&gt;iif
)paren
suffix:semicolon
id|cs-&gt;myid
op_assign
id|cs-&gt;iif.channels
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Card %d Protocol %s Id=%s (%d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
comma
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_1TR6
)paren
ques
c_cond
l_string|&quot;1TR6&quot;
suffix:colon
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_EURO
)paren
ques
c_cond
l_string|&quot;EDSS1&quot;
suffix:colon
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_LEASED
)paren
ques
c_cond
l_string|&quot;LEASED&quot;
suffix:colon
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_NI1
)paren
ques
c_cond
l_string|&quot;NI1&quot;
suffix:colon
l_string|&quot;NONE&quot;
comma
id|cs-&gt;iif.id
comma
id|cs-&gt;myid
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|card-&gt;typ
)paren
(brace
macro_line|#if CARD_TELES0
r_case
id|ISDN_CTYPE_16_0
suffix:colon
r_case
id|ISDN_CTYPE_8_0
suffix:colon
id|ret
op_assign
id|setup_teles0
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELES3
r_case
id|ISDN_CTYPE_16_3
suffix:colon
r_case
id|ISDN_CTYPE_PNP
suffix:colon
r_case
id|ISDN_CTYPE_TELESPCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_COMPAQ_ISA
suffix:colon
id|ret
op_assign
id|setup_teles3
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_S0BOX
r_case
id|ISDN_CTYPE_S0BOX
suffix:colon
id|ret
op_assign
id|setup_s0box
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELESPCI
r_case
id|ISDN_CTYPE_TELESPCI
suffix:colon
id|ret
op_assign
id|setup_telespci
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AVM_A1
r_case
id|ISDN_CTYPE_A1
suffix:colon
id|ret
op_assign
id|setup_avm_a1
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AVM_A1_PCMCIA
r_case
id|ISDN_CTYPE_A1_PCMCIA
suffix:colon
id|ret
op_assign
id|setup_avm_a1_pcmcia
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_FRITZPCI
r_case
id|ISDN_CTYPE_FRITZPCI
suffix:colon
id|ret
op_assign
id|setup_avm_pcipnp
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ELSA
r_case
id|ISDN_CTYPE_ELSA
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PNP
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PCI
suffix:colon
id|ret
op_assign
id|setup_elsa
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_IX1MICROR2
r_case
id|ISDN_CTYPE_IX1MICROR2
suffix:colon
id|ret
op_assign
id|setup_ix1micro
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_DIEHLDIVA
r_case
id|ISDN_CTYPE_DIEHLDIVA
suffix:colon
id|ret
op_assign
id|setup_diva
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ASUSCOM
r_case
id|ISDN_CTYPE_ASUSCOM
suffix:colon
id|ret
op_assign
id|setup_asuscom
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELEINT
r_case
id|ISDN_CTYPE_TELEINT
suffix:colon
id|ret
op_assign
id|setup_TeleInt
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SEDLBAUER
r_case
id|ISDN_CTYPE_SEDLBAUER
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER_FAX
suffix:colon
id|ret
op_assign
id|setup_sedlbauer
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SPORTSTER
r_case
id|ISDN_CTYPE_SPORTSTER
suffix:colon
id|ret
op_assign
id|setup_sportster
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_MIC
r_case
id|ISDN_CTYPE_MIC
suffix:colon
id|ret
op_assign
id|setup_mic
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NETJET_S
r_case
id|ISDN_CTYPE_NETJET_S
suffix:colon
id|ret
op_assign
id|setup_netjet_s
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HFCS
r_case
id|ISDN_CTYPE_TELES3C
suffix:colon
r_case
id|ISDN_CTYPE_ACERP10
suffix:colon
id|ret
op_assign
id|setup_hfcs
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HFC_PCI
r_case
id|ISDN_CTYPE_HFC_PCI
suffix:colon
id|ret
op_assign
id|setup_hfcpci
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HFC_SX
r_case
id|ISDN_CTYPE_HFC_SX
suffix:colon
id|ret
op_assign
id|setup_hfcsx
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NICCY
r_case
id|ISDN_CTYPE_NICCY
suffix:colon
id|ret
op_assign
id|setup_niccy
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AMD7930
r_case
id|ISDN_CTYPE_AMD7930
suffix:colon
id|ret
op_assign
id|setup_amd7930
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ISURF
r_case
id|ISDN_CTYPE_ISURF
suffix:colon
id|ret
op_assign
id|setup_isurf
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_HSTSAPHIR
r_case
id|ISDN_CTYPE_HSTSAPHIR
suffix:colon
id|ret
op_assign
id|setup_saphir
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TESTEMU
r_case
id|ISDN_CTYPE_TESTEMU
suffix:colon
id|ret
op_assign
id|setup_testemu
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if&t;CARD_BKM_A4T       
r_case
id|ISDN_CTYPE_BKM_A4T
suffix:colon
id|ret
op_assign
id|setup_bkm_a4t
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if&t;CARD_SCT_QUADRO
r_case
id|ISDN_CTYPE_SCT_QUADRO
suffix:colon
id|ret
op_assign
id|setup_sct_quadro
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_GAZEL
r_case
id|ISDN_CTYPE_GAZEL
suffix:colon
id|ret
op_assign
id|setup_gazel
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_W6692
r_case
id|ISDN_CTYPE_W6692
suffix:colon
id|ret
op_assign
id|setup_w6692
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NETJET_U
r_case
id|ISDN_CTYPE_NETJET_U
suffix:colon
id|ret
op_assign
id|setup_netjet_u
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Support for %s Card not selected&bslash;n&quot;
comma
id|CardType
(braket
id|card-&gt;typ
)braket
)paren
suffix:semicolon
id|ll_unload
c_func
(paren
id|cs
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Card Type %d out of range&bslash;n&quot;
comma
id|card-&gt;typ
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|ret
)paren
(brace
id|ll_unload
c_func
(paren
id|cs
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs-&gt;rcvbuf
op_assign
id|kmalloc
c_func
(paren
id|MAX_DFRAME_LEN_L1
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for isac rcvbuf&bslash;n&quot;
)paren
suffix:semicolon
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|cs-&gt;rcvidx
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;tx_cnt
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;event
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tqueue.sync
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tqueue.data
op_assign
id|cs
suffix:semicolon
id|skb_queue_head_init
c_func
(paren
op_amp
id|cs-&gt;rq
)paren
suffix:semicolon
id|skb_queue_head_init
c_func
(paren
op_amp
id|cs-&gt;sq
)paren
suffix:semicolon
id|init_bcstate
c_func
(paren
id|cs
comma
l_int|0
)paren
suffix:semicolon
id|init_bcstate
c_func
(paren
id|cs
comma
l_int|1
)paren
suffix:semicolon
id|ret
op_assign
id|init_card
c_func
(paren
id|cs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
(brace
id|closecard
c_func
(paren
id|cardnr
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|init_tei
c_func
(paren
id|cs
comma
id|cs-&gt;protocol
)paren
suffix:semicolon
id|CallcNewChan
c_func
(paren
id|cs
)paren
suffix:semicolon
multiline_comment|/* ISAR needs firmware download first */
r_if
c_cond
(paren
op_logical_neg
id|test_bit
c_func
(paren
id|HW_ISAR
comma
op_amp
id|cs-&gt;HW_Flags
)paren
)paren
id|ll_run
c_func
(paren
id|cs
comma
l_int|0
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
r_void
id|__devinit
DECL|function|HiSax_shiftcards
id|HiSax_shiftcards
c_func
(paren
r_int
id|idx
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|idx
suffix:semicolon
id|i
OL
(paren
id|HISAX_MAX_CARDS
op_minus
l_int|1
)paren
suffix:semicolon
id|i
op_increment
)paren
id|memcpy
c_func
(paren
op_amp
id|cards
(braket
id|i
)braket
comma
op_amp
id|cards
(braket
id|i
op_plus
l_int|1
)braket
comma
r_sizeof
(paren
id|cards
(braket
id|i
)braket
)paren
)paren
suffix:semicolon
)brace
r_int
id|__devinit
DECL|function|HiSax_inithardware
id|HiSax_inithardware
c_func
(paren
r_int
op_star
id|busy_flag
)paren
(brace
r_int
id|foundcards
op_assign
l_int|0
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
r_int
id|t
op_assign
l_char|&squot;,&squot;
suffix:semicolon
r_int
id|flg
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|id
suffix:semicolon
r_char
op_star
id|next_id
op_assign
id|HiSax_id
suffix:semicolon
r_char
id|ids
(braket
l_int|20
)braket
suffix:semicolon
r_if
c_cond
(paren
id|strchr
c_func
(paren
id|HiSax_id
comma
l_char|&squot;,&squot;
)paren
)paren
id|t
op_assign
l_char|&squot;,&squot;
suffix:semicolon
r_else
r_if
c_cond
(paren
id|strchr
c_func
(paren
id|HiSax_id
comma
l_char|&squot;%&squot;
)paren
)paren
id|t
op_assign
l_char|&squot;%&squot;
suffix:semicolon
r_while
c_loop
(paren
id|i
OL
id|nrcards
)paren
(brace
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OL
l_int|1
)paren
r_break
suffix:semicolon
id|id
op_assign
id|next_id
suffix:semicolon
r_if
c_cond
(paren
(paren
id|next_id
op_assign
id|strchr
c_func
(paren
id|id
comma
id|t
)paren
)paren
)paren
(brace
op_star
id|next_id
op_increment
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|ids
comma
id|id
)paren
suffix:semicolon
id|flg
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|next_id
op_assign
id|id
suffix:semicolon
r_if
c_cond
(paren
id|flg
op_ge
id|i
)paren
id|strcpy
c_func
(paren
id|ids
comma
id|id
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|ids
comma
l_string|&quot;%s%d&quot;
comma
id|id
comma
id|i
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|checkcard
c_func
(paren
id|i
comma
id|ids
comma
id|busy_flag
)paren
)paren
(brace
id|foundcards
op_increment
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Card %s not installed !&bslash;n&quot;
comma
id|CardType
(braket
id|cards
(braket
id|i
)braket
dot
id|typ
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
id|kfree
c_func
(paren
(paren
r_void
op_star
)paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|cs
op_assign
l_int|NULL
suffix:semicolon
id|HiSax_shiftcards
c_func
(paren
id|i
)paren
suffix:semicolon
id|nrcards
op_decrement
suffix:semicolon
)brace
)brace
r_return
id|foundcards
suffix:semicolon
)brace
r_void
DECL|function|HiSax_closecard
id|HiSax_closecard
c_func
(paren
r_int
id|cardnr
)paren
(brace
r_int
id|i
comma
id|last
op_assign
id|nrcards
op_minus
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|cardnr
OG
id|last
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs
)paren
(brace
id|ll_stop
c_func
(paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs
)paren
suffix:semicolon
id|release_tei
c_func
(paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs
)paren
suffix:semicolon
id|CallcFreeChan
c_func
(paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs
)paren
suffix:semicolon
id|closecard
c_func
(paren
id|cardnr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs-&gt;irq
)paren
id|free_irq
c_func
(paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs-&gt;irq
comma
id|cards
(braket
id|cardnr
)braket
dot
id|cs
)paren
suffix:semicolon
id|kfree
c_func
(paren
(paren
r_void
op_star
)paren
id|cards
(braket
id|cardnr
)braket
dot
id|cs
)paren
suffix:semicolon
id|cards
(braket
id|cardnr
)braket
dot
id|cs
op_assign
l_int|NULL
suffix:semicolon
)brace
id|i
op_assign
id|cardnr
suffix:semicolon
r_while
c_loop
(paren
id|i
op_ne
id|last
)paren
(brace
id|cards
(braket
id|i
)braket
op_assign
id|cards
(braket
id|i
op_plus
l_int|1
)braket
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
id|nrcards
op_decrement
suffix:semicolon
)brace
r_void
DECL|function|HiSax_reportcard
id|HiSax_reportcard
c_func
(paren
r_int
id|cardnr
comma
r_int
id|sel
)paren
(brace
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|cards
(braket
id|cardnr
)braket
dot
id|cs
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: reportcard No %d&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Type %s&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: debuglevel %x&bslash;n&quot;
comma
id|cs-&gt;debug
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: HiSax_reportcard address 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
op_amp
id|HiSax_reportcard
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: cs 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
id|cs
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: HW_Flags %lx bc0 flg %lx bc1 flg %lx&bslash;n&quot;
comma
id|cs-&gt;HW_Flags
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|Flag
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|Flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: bcs 0 mode %d ch%d&bslash;n&quot;
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|mode
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|channel
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: bcs 1 mode %d ch%d&bslash;n&quot;
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|mode
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|channel
)paren
suffix:semicolon
macro_line|#ifdef ERROR_STATISTIC
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: dc errors(rx,crc,tx) %d,%d,%d&bslash;n&quot;
comma
id|cs-&gt;err_rx
comma
id|cs-&gt;err_crc
comma
id|cs-&gt;err_tx
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: bc0 errors(inv,rdo,crc,tx) %d,%d,%d,%d&bslash;n&quot;
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_inv
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_rdo
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_crc
comma
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_tx
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: bc1 errors(inv,rdo,crc,tx) %d,%d,%d,%d&bslash;n&quot;
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_inv
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_rdo
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_crc
comma
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_tx
)paren
suffix:semicolon
r_if
c_cond
(paren
id|sel
op_eq
l_int|99
)paren
(brace
id|cs-&gt;err_rx
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;err_crc
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;err_tx
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_inv
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_rdo
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_crc
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|0
)braket
dot
id|err_tx
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_inv
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_rdo
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_crc
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;bcs
(braket
l_int|1
)braket
dot
id|err_tx
op_assign
l_int|0
suffix:semicolon
)brace
macro_line|#endif
)brace
r_int
id|__init
DECL|function|HiSax_init
id|HiSax_init
c_func
(paren
r_void
)paren
(brace
r_int
id|i
comma
id|j
suffix:semicolon
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
id|HiSaxVersion
c_func
(paren
)paren
suffix:semicolon
id|CallcNew
c_func
(paren
)paren
suffix:semicolon
id|Isdnl3New
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2New
c_func
(paren
)paren
suffix:semicolon
id|TeiNew
c_func
(paren
)paren
suffix:semicolon
id|Isdnl1New
c_func
(paren
)paren
suffix:semicolon
macro_line|#ifdef MODULE
r_if
c_cond
(paren
op_logical_neg
id|type
(braket
l_int|0
)braket
)paren
(brace
multiline_comment|/* We &squot;ll register drivers later, but init basic functions*/
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_HISAX_ELSA
r_if
c_cond
(paren
id|type
(braket
l_int|0
)braket
op_eq
id|ISDN_CTYPE_ELSA_PCMCIA
)paren
(brace
multiline_comment|/* we have exported  and return in this case */
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
r_if
c_cond
(paren
id|type
(braket
l_int|0
)braket
op_eq
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
)paren
(brace
multiline_comment|/* we have to export  and return in this case */
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_AVM_A1_PCMCIA
r_if
c_cond
(paren
id|type
(braket
l_int|0
)braket
op_eq
id|ISDN_CTYPE_A1_PCMCIA
)paren
(brace
multiline_comment|/* we have to export  and return in this case */
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HFC_SX
r_if
c_cond
(paren
id|type
(braket
l_int|0
)braket
op_eq
id|ISDN_CTYPE_HFC_SP_PCMCIA
)paren
(brace
multiline_comment|/* we have to export  and return in this case */
r_return
l_int|0
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
id|nrcards
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef MODULE
r_if
c_cond
(paren
id|id
)paren
multiline_comment|/* If id= string used */
id|HiSax_id
op_assign
id|id
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|j
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|j
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
r_switch
c_cond
(paren
id|type
(braket
id|i
)braket
)paren
(brace
r_case
id|ISDN_CTYPE_16_0
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|mem
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_8_0
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|mem
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
macro_line|#ifdef IO0_IO1
r_case
id|ISDN_CTYPE_PNP
suffix:colon
r_case
id|ISDN_CTYPE_NICCY
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io0
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|io1
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_COMPAQ_ISA
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io0
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|io1
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|3
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_case
id|ISDN_CTYPE_ELSA
suffix:colon
r_case
id|ISDN_CTYPE_HFC_PCI
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_16_3
suffix:colon
r_case
id|ISDN_CTYPE_TELESPCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_A1
suffix:colon
r_case
id|ISDN_CTYPE_A1_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PNP
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_IX1MICROR2
suffix:colon
r_case
id|ISDN_CTYPE_DIEHLDIVA
suffix:colon
r_case
id|ISDN_CTYPE_ASUSCOM
suffix:colon
r_case
id|ISDN_CTYPE_TELEINT
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER_FAX
suffix:colon
r_case
id|ISDN_CTYPE_SPORTSTER
suffix:colon
r_case
id|ISDN_CTYPE_MIC
suffix:colon
r_case
id|ISDN_CTYPE_TELES3C
suffix:colon
r_case
id|ISDN_CTYPE_ACERP10
suffix:colon
r_case
id|ISDN_CTYPE_S0BOX
suffix:colon
r_case
id|ISDN_CTYPE_FRITZPCI
suffix:colon
r_case
id|ISDN_CTYPE_HSTSAPHIR
suffix:colon
r_case
id|ISDN_CTYPE_GAZEL
suffix:colon
r_case
id|ISDN_CTYPE_HFC_SX
suffix:colon
r_case
id|ISDN_CTYPE_HFC_SP_PCMCIA
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_ISURF
suffix:colon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|2
)braket
op_assign
id|mem
(braket
id|i
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_ELSA_PCI
suffix:colon
r_case
id|ISDN_CTYPE_NETJET_S
suffix:colon
r_case
id|ISDN_CTYPE_AMD7930
suffix:colon
r_case
id|ISDN_CTYPE_TELESPCI
suffix:colon
r_case
id|ISDN_CTYPE_W6692
suffix:colon
r_case
id|ISDN_CTYPE_NETJET_U
suffix:colon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_BKM_A4T
suffix:colon
r_break
suffix:semicolon
r_case
id|ISDN_CTYPE_SCT_QUADRO
suffix:colon
r_if
c_cond
(paren
id|irq
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* QUADRO is a 4 BRI card */
id|cards
(braket
id|j
op_increment
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
l_int|1
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_SCT_QUADRO
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
op_increment
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
l_int|2
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_SCT_QUADRO
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
op_increment
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
l_int|3
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_SCT_QUADRO
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|j
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
l_int|4
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
id|j
op_increment
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|nzproto
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Warning - no protocol specified&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: using protocol %s&bslash;n&quot;
comma
id|DEFAULT_PROTO_NAME
)paren
suffix:semicolon
)brace
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|HiSax_inithardware
c_func
(paren
l_int|NULL
)paren
)paren
(brace
multiline_comment|/* Install only, if at least one card found */
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_else
(brace
id|Isdnl1Free
c_func
(paren
)paren
suffix:semicolon
id|TeiFree
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2Free
c_func
(paren
)paren
suffix:semicolon
id|Isdnl3Free
c_func
(paren
)paren
suffix:semicolon
id|CallcFree
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
)brace
macro_line|#ifdef MODULE
DECL|function|init_module
r_int
id|init_module
c_func
(paren
r_void
)paren
(brace
r_return
id|HiSax_init
c_func
(paren
)paren
suffix:semicolon
)brace
r_void
DECL|function|cleanup_module
id|cleanup_module
c_func
(paren
r_void
)paren
(brace
r_int
id|cardnr
op_assign
id|nrcards
op_minus
l_int|1
suffix:semicolon
r_int
id|flags
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
r_while
c_loop
(paren
id|cardnr
op_ge
l_int|0
)paren
(brace
id|HiSax_closecard
c_func
(paren
id|cardnr
op_decrement
)paren
suffix:semicolon
)brace
id|Isdnl1Free
c_func
(paren
)paren
suffix:semicolon
id|TeiFree
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2Free
c_func
(paren
)paren
suffix:semicolon
id|Isdnl3Free
c_func
(paren
)paren
suffix:semicolon
id|CallcFree
c_func
(paren
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax module removed&bslash;n&quot;
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_ELSA
DECL|function|elsa_init_pcmcia
r_int
id|elsa_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
id|pcm_irq
comma
r_int
op_star
id|busy_flag
comma
r_int
id|prot
)paren
(brace
macro_line|#ifdef MODULE
r_int
id|i
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Initialize all structs, even though we only accept&n;&t;   two pcmcia cards&n;&t;   */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
)brace
)brace
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|pcm_irq
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
(paren
r_int
)paren
id|pcm_iob
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|protocol
op_assign
id|prot
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_ELSA_PCMCIA
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|HiSax_inithardware
c_func
(paren
id|busy_flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HFC_SX
DECL|function|hfc_init_pcmcia
r_int
id|hfc_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
id|pcm_irq
comma
r_int
op_star
id|busy_flag
comma
r_int
id|prot
)paren
(brace
macro_line|#ifdef MODULE
r_int
id|i
suffix:semicolon
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Initialize all structs, even though we only accept&n;&t;   two pcmcia cards&n;&t;   */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
)brace
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|pcm_irq
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
(paren
r_int
)paren
id|pcm_iob
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|protocol
op_assign
id|prot
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_HFC_SP_PCMCIA
suffix:semicolon
id|nzproto
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|HiSax_inithardware
c_func
(paren
id|busy_flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
DECL|function|sedl_init_pcmcia
r_int
id|sedl_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
id|pcm_irq
comma
r_int
op_star
id|busy_flag
comma
r_int
id|prot
)paren
(brace
macro_line|#ifdef MODULE
r_int
id|i
suffix:semicolon
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Initialize all structs, even though we only accept&n;&t;   two pcmcia cards&n;&t;   */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
)brace
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|pcm_irq
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
(paren
r_int
)paren
id|pcm_iob
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|protocol
op_assign
id|prot
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
suffix:semicolon
id|nzproto
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|HiSax_inithardware
c_func
(paren
id|busy_flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_AVM_A1_PCMCIA
DECL|function|avm_a1_init_pcmcia
r_int
id|avm_a1_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
id|pcm_irq
comma
r_int
op_star
id|busy_flag
comma
r_int
id|prot
)paren
(brace
macro_line|#ifdef MODULE
r_int
id|i
suffix:semicolon
r_int
id|nzproto
op_assign
l_int|0
suffix:semicolon
id|nrcards
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Initialize all structs, even though we only accept&n;&t;   two pcmcia cards&n;&t;   */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|irq
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
id|io
(braket
id|i
)braket
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|typ
op_assign
id|type
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|protocol
(braket
id|i
)braket
)paren
(brace
id|cards
(braket
id|i
)braket
dot
id|protocol
op_assign
id|protocol
(braket
id|i
)braket
suffix:semicolon
id|nzproto
op_increment
suffix:semicolon
)brace
)brace
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|0
)braket
op_assign
id|pcm_irq
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|para
(braket
l_int|1
)braket
op_assign
(paren
r_int
)paren
id|pcm_iob
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|protocol
op_assign
id|prot
suffix:semicolon
id|cards
(braket
l_int|0
)braket
dot
id|typ
op_assign
id|ISDN_CTYPE_A1_PCMCIA
suffix:semicolon
id|nzproto
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSax_id
)paren
id|HiSax_id
op_assign
id|HiSaxID
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|HiSaxID
(braket
l_int|0
)braket
)paren
id|strcpy
c_func
(paren
id|HiSaxID
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|HISAX_MAX_CARDS
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OG
l_int|0
)paren
id|nrcards
op_increment
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Total %d card%s defined&bslash;n&quot;
comma
id|nrcards
comma
(paren
id|nrcards
OG
l_int|1
)paren
ques
c_cond
l_string|&quot;s&quot;
suffix:colon
l_string|&quot;&quot;
)paren
suffix:semicolon
id|HiSax_inithardware
c_func
(paren
id|busy_flag
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: module installed&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
macro_line|#endif
DECL|function|hisax_init_pcmcia
r_int
id|__devinit
id|hisax_init_pcmcia
c_func
(paren
r_void
op_star
id|pcm_iob
comma
r_int
op_star
id|busy_flag
comma
r_struct
id|IsdnCard
op_star
id|card
)paren
(brace
id|u_char
id|ids
(braket
l_int|16
)braket
suffix:semicolon
r_int
id|ret
op_assign
op_minus
l_int|1
suffix:semicolon
id|cards
(braket
id|nrcards
)braket
op_assign
op_star
id|card
suffix:semicolon
r_if
c_cond
(paren
id|nrcards
)paren
id|sprintf
c_func
(paren
id|ids
comma
l_string|&quot;HiSax%d&quot;
comma
id|nrcards
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|ids
comma
l_string|&quot;HiSax&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|checkcard
c_func
(paren
id|nrcards
comma
id|ids
comma
id|busy_flag
)paren
)paren
(brace
r_return
op_minus
l_int|1
suffix:semicolon
)brace
id|ret
op_assign
id|nrcards
suffix:semicolon
id|nrcards
op_increment
suffix:semicolon
r_return
(paren
id|ret
)paren
suffix:semicolon
)brace
DECL|variable|__initdata
r_static
r_struct
id|pci_device_id
id|hisax_pci_tbl
(braket
)braket
id|__initdata
op_assign
(brace
macro_line|#ifdef CONFIG_HISAX_FRTIZPCI
(brace
id|PCI_VENDOR_ID_AVM
comma
id|PCI_DEVICE_ID_AVM_FRITZ
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_DIEHLDIVA
(brace
id|PCI_VENDOR_ID_EICON
comma
id|PCI_DEVICE_ID_EICON_DIVA20
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_EICON
comma
id|PCI_DEVICE_ID_EICON_DIVA20_U
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_EICON
comma
id|PCI_DEVICE_ID_EICON_DIVA201
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_ELSA
(brace
id|PCI_VENDOR_ID_ELSA
comma
id|PCI_DEVICE_ID_ELSA_MICROLINK
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_ELSA
comma
id|PCI_DEVICE_ID_ELSA_QS3000
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_GAZEL
(brace
id|PCI_VENDOR_ID_PLX
comma
id|PCI_DEVICE_ID_PLX_R685
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_PLX
comma
id|PCI_DEVICE_ID_PLX_R753
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_PLX
comma
id|PCI_DEVICE_ID_PLX_DJINN_ITOO
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_QUADRO
(brace
id|PCI_VENDOR_ID_PLX
comma
id|PCI_DEVICE_ID_PLX_9050
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_NICCY
(brace
id|PCI_VENDOR_ID_SATSAGEM
comma
id|PCI_DEVICE_ID_SATSAGEM_NICCY
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_SEDLBAUER
(brace
id|PCI_VENDOR_ID_TIGERJET
comma
id|PCI_DEVICE_ID_TIGERJET_100
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_HISAX_NETJET) || defined(CONFIG_HISAX_NETJET_U)
(brace
id|PCI_VENDOR_ID_TIGERJET
comma
id|PCI_DEVICE_ID_TIGERJET_300
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#if defined(CONFIG_HISAX_TELESPCI) || defined(CONFIG_HISAX_SCT_QUADRO)
(brace
id|PCI_VENDOR_ID_ZORAN
comma
id|PCI_DEVICE_ID_ZORAN_36120
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_W6692
(brace
id|PCI_VENDOR_ID_DYNALINK
comma
id|PCI_DEVICE_ID_DYNALINK_IS64PH
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_WINBOND2
comma
id|PCI_DEVICE_ID_WINBOND2_6692
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
macro_line|#ifdef CONFIG_HISAX_HFC_PCI
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_2BD0
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B000
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B006
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B007
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B008
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B009
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B00A
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B00B
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B00C
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_CCD
comma
id|PCI_DEVICE_ID_CCD_B100
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_ABOCOM
comma
id|PCI_DEVICE_ID_ABOCOM_2BD1
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_ASUSTEK
comma
id|PCI_DEVICE_ID_ASUSTEK_0675
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_BERKOM
comma
id|PCI_DEVICE_ID_BERKOM_T_CONCEPT
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_BERKOM
comma
id|PCI_DEVICE_ID_BERKOM_A1T
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_ANIGMA
comma
id|PCI_DEVICE_ID_ANIGMA_MC145575
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_ZOLTRIX
comma
id|PCI_DEVICE_ID_ZOLTRIX_2BD0
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_DIGI
comma
id|PCI_DEVICE_ID_DIGI_DF_M_IOM2_E
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_DIGI
comma
id|PCI_DEVICE_ID_DIGI_DF_M_E
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_DIGI
comma
id|PCI_DEVICE_ID_DIGI_DF_M_IOM2_A
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
(brace
id|PCI_VENDOR_ID_DIGI
comma
id|PCI_DEVICE_ID_DIGI_DF_M_A
comma
id|PCI_ANY_ID
comma
id|PCI_ANY_ID
)brace
comma
macro_line|#endif
(brace
)brace
multiline_comment|/* Terminating entry */
)brace
suffix:semicolon
id|MODULE_DEVICE_TABLE
c_func
(paren
id|pci
comma
id|hisax_pci_tbl
)paren
suffix:semicolon
eof
