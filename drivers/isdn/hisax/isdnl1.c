multiline_comment|/* $Id: isdnl1.c,v 2.18 1998/02/12 23:07:42 keil Exp $&n;&n; * isdnl1.c     common low level stuff for Siemens Chipsetbased isdn cards&n; *              based on the teles driver from Jan den Ouden&n; *&n; * Author       Karsten Keil (keil@temic-ech.spacenet.de)&n; *&n; * Thanks to    Jan den Ouden&n; *              Fritz Elfert&n; *              Beat Doebeli&n; *&n; *&n; * $Log: isdnl1.c,v $&n; * Revision 2.18  1998/02/12 23:07:42  keil&n; * change for 2.1.86 (removing FREE_READ/FREE_WRITE from [dev]_kfree_skb()&n; *&n; * Revision 2.17  1998/02/11 17:28:07  keil&n; * Niccy PnP/PCI support&n; *&n; * Revision 2.16  1998/02/09 18:46:08  keil&n; * Support for Sedlbauer PCMCIA (Marcus Niemann)&n; *&n; * Revision 2.15  1998/02/09 10:54:51  keil&n; * fixes for leased mode&n; *&n; * Revision 2.14  1998/02/03 23:31:31  keil&n; * add AMD7930 support&n; *&n; * Revision 2.13  1998/02/02 13:33:02  keil&n; * New card support&n; *&n; * Revision 2.12  1998/01/31 21:41:48  keil&n; * changes for newer 2.1 kernels&n; *&n; * Revision 2.11  1997/11/12 15:01:23  keil&n; * COMPAQ_ISA changes&n; *&n; * Revision 2.10  1997/11/08 21:35:48  keil&n; * new l1 init&n; *&n; * Revision 2.9  1997/11/06 17:09:18  keil&n; * New 2.1 init code&n; *&n; * Revision 2.8  1997/10/29 19:00:05  keil&n; * new layer1,changes for 2.1&n; *&n; * Revision 2.7  1997/10/10 20:56:50  fritz&n; * New HL interface.&n; *&n; * Revision 2.6  1997/09/12 10:05:16  keil&n; * ISDN_CTRL_DEBUG define&n; *&n; * Revision 2.5  1997/09/11 17:24:45  keil&n; * Add new cards&n; *&n; * Revision 2.4  1997/08/15 17:47:09  keil&n; * avoid oops because a uninitialised timer&n; *&n; * Revision 2.3  1997/08/01 11:16:40  keil&n; * cosmetics&n; *&n; * Revision 2.2  1997/07/30 17:11:08  keil&n; * L1deactivated exported&n; *&n; * Revision 2.1  1997/07/27 21:35:38  keil&n; * new layer1 interface&n; *&n; * Revision 2.0  1997/06/26 11:02:53  keil&n; * New Layer and card interface&n; *&n; * Revision 1.15  1997/05/27 15:17:55  fritz&n; * Added changes for recent 2.1.x kernels:&n; *   changed return type of isdn_close&n; *   queue_task_* -&gt; queue_task&n; *   clear/set_bit -&gt; test_and_... where apropriate.&n; *   changed type of hard_header_cache parameter.&n; *&n; * old changes removed KKe&n; *&n; */
DECL|variable|l1_revision
r_const
r_char
op_star
id|l1_revision
op_assign
l_string|&quot;$Revision: 2.18 $&quot;
suffix:semicolon
DECL|macro|__NO_VERSION__
mdefine_line|#define __NO_VERSION__
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &quot;hisax.h&quot;
macro_line|#include &quot;isdnl1.h&quot;
macro_line|#include &lt;linux/kernel_stat.h&gt;
macro_line|#if (LINUX_VERSION_CODE &lt; 0x020150) /* 2.1.80 */
DECL|macro|kstat_irqs
mdefine_line|#define kstat_irqs( PAR ) kstat.interrupts( (PAR) )
macro_line|#endif
macro_line|#if CARD_TELES0
r_extern
r_int
id|setup_teles0
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELES3
r_extern
r_int
id|setup_teles3
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AVM_A1
r_extern
r_int
id|setup_avm_a1
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ELSA
r_extern
r_int
id|setup_elsa
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_IX1MICROR2
r_extern
r_int
id|setup_ix1micro
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_DIEHLDIVA
r_extern
r_int
id|setup_diva
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ASUSCOM
r_extern
r_int
id|setup_asuscom
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELEINT
r_extern
r_int
id|setup_TeleInt
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SEDLBAUER
r_extern
r_int
id|setup_sedlbauer
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SPORTSTER
r_extern
r_int
id|setup_sportster
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_MIC
r_extern
r_int
id|setup_mic
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NETJET
r_extern
r_int
id|setup_netjet
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELES3C
r_extern
r_int
id|setup_t163c
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AMD7930 || CARD_DBRI
r_extern
r_int
id|setup_foreign
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NICCY
r_extern
r_int
id|setup_niccy
c_func
(paren
r_struct
id|IsdnCard
op_star
id|card
)paren
suffix:semicolon
macro_line|#endif
DECL|macro|HISAX_STATUS_BUFSIZE
mdefine_line|#define HISAX_STATUS_BUFSIZE 4096
DECL|macro|ISDN_CTRL_DEBUG
mdefine_line|#define ISDN_CTRL_DEBUG 1
DECL|macro|INCLUDE_INLINE_FUNCS
mdefine_line|#define INCLUDE_INLINE_FUNCS
macro_line|#include &lt;linux/tqueue.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
DECL|variable|CardType
r_const
r_char
op_star
id|CardType
(braket
)braket
op_assign
(brace
l_string|&quot;No Card&quot;
comma
l_string|&quot;Teles 16.0&quot;
comma
l_string|&quot;Teles 8.0&quot;
comma
l_string|&quot;Teles 16.3&quot;
comma
l_string|&quot;Creatix/Teles PnP&quot;
comma
l_string|&quot;AVM A1&quot;
comma
l_string|&quot;Elsa ML&quot;
comma
l_string|&quot;Elsa Quickstep&quot;
comma
l_string|&quot;Teles PCMCIA&quot;
comma
l_string|&quot;ITK ix1-micro Rev.2&quot;
comma
l_string|&quot;Elsa PCMCIA&quot;
comma
l_string|&quot;Eicon.Diehl Diva&quot;
comma
l_string|&quot;ISDNLink&quot;
comma
l_string|&quot;TeleInt&quot;
comma
l_string|&quot;Teles 16.3c&quot;
comma
l_string|&quot;Sedlbauer Speed Card&quot;
comma
l_string|&quot;USR Sportster&quot;
comma
l_string|&quot;ith mic Linux&quot;
comma
l_string|&quot;Elsa PCI&quot;
comma
l_string|&quot;Compaq ISA&quot;
comma
l_string|&quot;NETjet&quot;
comma
l_string|&quot;Teles PCI&quot;
comma
l_string|&quot;Sedlbauer Speed Star (PCMCIA)&quot;
comma
l_string|&quot;AMD 7930&quot;
comma
l_string|&quot;NICCY&quot;
comma
l_string|&quot;DBRI&quot;
)brace
suffix:semicolon
r_extern
r_struct
id|IsdnCard
id|cards
(braket
)braket
suffix:semicolon
r_extern
r_int
id|nrcards
suffix:semicolon
r_extern
r_char
op_star
id|HiSax_id
suffix:semicolon
r_extern
r_struct
id|IsdnBuffers
op_star
id|tracebuf
suffix:semicolon
DECL|macro|TIMER3_VALUE
mdefine_line|#define TIMER3_VALUE 7
r_static
DECL|variable|l1fsm
r_struct
id|Fsm
id|l1fsm
op_assign
(brace
l_int|NULL
comma
l_int|0
comma
l_int|0
comma
l_int|NULL
comma
l_int|NULL
)brace
suffix:semicolon
r_enum
(brace
DECL|enumerator|ST_L1_F2
id|ST_L1_F2
comma
DECL|enumerator|ST_L1_F3
id|ST_L1_F3
comma
DECL|enumerator|ST_L1_F4
id|ST_L1_F4
comma
DECL|enumerator|ST_L1_F5
id|ST_L1_F5
comma
DECL|enumerator|ST_L1_F6
id|ST_L1_F6
comma
DECL|enumerator|ST_L1_F7
id|ST_L1_F7
comma
DECL|enumerator|ST_L1_F8
id|ST_L1_F8
comma
)brace
suffix:semicolon
DECL|macro|L1_STATE_COUNT
mdefine_line|#define L1_STATE_COUNT (ST_L1_F8+1)
DECL|variable|strL1State
r_static
r_char
op_star
id|strL1State
(braket
)braket
op_assign
(brace
l_string|&quot;ST_L1_F2&quot;
comma
l_string|&quot;ST_L1_F3&quot;
comma
l_string|&quot;ST_L1_F4&quot;
comma
l_string|&quot;ST_L1_F5&quot;
comma
l_string|&quot;ST_L1_F6&quot;
comma
l_string|&quot;ST_L1_F7&quot;
comma
l_string|&quot;ST_L1_F8&quot;
comma
)brace
suffix:semicolon
r_enum
(brace
DECL|enumerator|EV_PH_ACTIVATE
id|EV_PH_ACTIVATE
comma
DECL|enumerator|EV_RESET_IND
id|EV_RESET_IND
comma
DECL|enumerator|EV_DEACT_CNF
id|EV_DEACT_CNF
comma
DECL|enumerator|EV_DEACT_IND
id|EV_DEACT_IND
comma
DECL|enumerator|EV_POWER_UP
id|EV_POWER_UP
comma
DECL|enumerator|EV_RSYNC_IND
id|EV_RSYNC_IND
comma
DECL|enumerator|EV_INFO2_IND
id|EV_INFO2_IND
comma
DECL|enumerator|EV_INFO4_IND
id|EV_INFO4_IND
comma
DECL|enumerator|EV_TIMER_DEACT
id|EV_TIMER_DEACT
comma
DECL|enumerator|EV_TIMER_ACT
id|EV_TIMER_ACT
comma
DECL|enumerator|EV_TIMER3
id|EV_TIMER3
comma
)brace
suffix:semicolon
DECL|macro|L1_EVENT_COUNT
mdefine_line|#define L1_EVENT_COUNT (EV_TIMER3 + 1)
DECL|variable|strL1Event
r_static
r_char
op_star
id|strL1Event
(braket
)braket
op_assign
(brace
l_string|&quot;EV_PH_ACTIVATE&quot;
comma
l_string|&quot;EV_RESET_IND&quot;
comma
l_string|&quot;EV_DEACT_CNF&quot;
comma
l_string|&quot;EV_DEACT_IND&quot;
comma
l_string|&quot;EV_POWER_UP&quot;
comma
l_string|&quot;EV_RSYNC_IND&quot;
comma
l_string|&quot;EV_INFO2_IND&quot;
comma
l_string|&quot;EV_INFO4_IND&quot;
comma
l_string|&quot;EV_TIMER_DEACT&quot;
comma
l_string|&quot;EV_TIMER_ACT&quot;
comma
l_string|&quot;EV_TIMER3&quot;
comma
)brace
suffix:semicolon
multiline_comment|/*&n; * Find card with given driverId&n; */
r_static
r_inline
r_struct
id|IsdnCardState
DECL|function|hisax_findcard
op_star
id|hisax_findcard
c_func
(paren
r_int
id|driverid
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|nrcards
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs-&gt;myid
op_eq
id|driverid
)paren
r_return
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
r_return
(paren
l_int|NULL
)paren
suffix:semicolon
)brace
r_int
DECL|function|HiSax_readstatus
id|HiSax_readstatus
c_func
(paren
id|u_char
op_star
id|buf
comma
r_int
id|len
comma
r_int
id|user
comma
r_int
id|id
comma
r_int
id|channel
)paren
(brace
r_int
id|count
suffix:semicolon
id|u_char
op_star
id|p
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|csta
op_assign
id|hisax_findcard
c_func
(paren
id|id
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csta
)paren
(brace
r_for
c_loop
(paren
id|p
op_assign
id|buf
comma
id|count
op_assign
l_int|0
suffix:semicolon
id|count
OL
id|len
suffix:semicolon
id|p
op_increment
comma
id|count
op_increment
)paren
(brace
r_if
c_cond
(paren
id|user
)paren
id|put_user
c_func
(paren
op_star
id|csta-&gt;status_read
op_increment
comma
id|p
)paren
suffix:semicolon
r_else
op_star
id|p
op_increment
op_assign
op_star
id|csta-&gt;status_read
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;status_read
OG
id|csta-&gt;status_end
)paren
id|csta-&gt;status_read
op_assign
id|csta-&gt;status_buf
suffix:semicolon
)brace
r_return
id|count
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;HiSax: if_readstatus called with invalid driverId!&bslash;n&quot;
)paren
suffix:semicolon
r_return
op_minus
id|ENODEV
suffix:semicolon
)brace
)brace
macro_line|#if ISDN_CTRL_DEBUG
r_void
DECL|function|HiSax_putstatus
id|HiSax_putstatus
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
comma
r_char
op_star
id|buf
)paren
(brace
r_int
id|flags
suffix:semicolon
r_int
id|len
comma
id|count
comma
id|i
suffix:semicolon
id|u_char
op_star
id|p
suffix:semicolon
id|isdn_ctrl
id|ic
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
id|count
op_assign
l_int|0
suffix:semicolon
id|len
op_assign
id|strlen
c_func
(paren
id|buf
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|csta
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No CardStatus for message %s&quot;
comma
id|buf
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_for
c_loop
(paren
id|p
op_assign
id|buf
comma
id|i
op_assign
id|len
suffix:semicolon
id|i
OG
l_int|0
suffix:semicolon
id|i
op_decrement
comma
id|p
op_increment
)paren
(brace
op_star
id|csta-&gt;status_write
op_increment
op_assign
op_star
id|p
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;status_write
OG
id|csta-&gt;status_end
)paren
id|csta-&gt;status_write
op_assign
id|csta-&gt;status_buf
suffix:semicolon
id|count
op_increment
suffix:semicolon
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|count
)paren
(brace
id|ic.command
op_assign
id|ISDN_STAT_STAVAIL
suffix:semicolon
id|ic.driver
op_assign
id|csta-&gt;myid
suffix:semicolon
id|ic.arg
op_assign
id|count
suffix:semicolon
id|csta-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
)brace
)brace
macro_line|#else
DECL|macro|KDEBUG_DEF
mdefine_line|#define KDEBUG_DEF
macro_line|#include &quot;../kdebug.h&quot;
DECL|variable|DbgLineNr
DECL|variable|DbgSequenzNr
r_static
r_int
id|DbgLineNr
op_assign
l_int|0
comma
id|DbgSequenzNr
op_assign
l_int|1
suffix:semicolon
r_void
DECL|function|HiSax_putstatus
id|HiSax_putstatus
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
comma
r_char
op_star
id|buf
)paren
(brace
r_char
id|tmp
(braket
l_int|512
)braket
suffix:semicolon
r_if
c_cond
(paren
id|DbgLineNr
op_eq
l_int|23
)paren
id|DbgLineNr
op_assign
l_int|0
suffix:semicolon
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;%5d %s&quot;
comma
id|DbgSequenzNr
op_increment
comma
id|buf
)paren
suffix:semicolon
id|gput_str
c_func
(paren
id|tmp
comma
l_int|0
comma
id|DbgLineNr
op_increment
)paren
suffix:semicolon
)brace
macro_line|#endif
r_int
DECL|function|ll_run
id|ll_run
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
(brace
r_int
id|flags
suffix:semicolon
id|isdn_ctrl
id|ic
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
id|ic.driver
op_assign
id|csta-&gt;myid
suffix:semicolon
id|ic.command
op_assign
id|ISDN_STAT_RUN
suffix:semicolon
id|csta-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_void
DECL|function|ll_stop
id|ll_stop
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
(brace
id|isdn_ctrl
id|ic
suffix:semicolon
id|ic.command
op_assign
id|ISDN_STAT_STOP
suffix:semicolon
id|ic.driver
op_assign
id|csta-&gt;myid
suffix:semicolon
id|csta-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
id|CallcFreeChan
c_func
(paren
id|csta
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|ll_unload
id|ll_unload
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|csta
)paren
(brace
id|isdn_ctrl
id|ic
suffix:semicolon
id|ic.command
op_assign
id|ISDN_STAT_UNLOAD
suffix:semicolon
id|ic.driver
op_assign
id|csta-&gt;myid
suffix:semicolon
id|csta-&gt;iif
dot
id|statcallb
c_func
(paren
op_amp
id|ic
)paren
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;status_buf
)paren
id|kfree
c_func
(paren
id|csta-&gt;status_buf
)paren
suffix:semicolon
id|csta-&gt;status_read
op_assign
l_int|NULL
suffix:semicolon
id|csta-&gt;status_write
op_assign
l_int|NULL
suffix:semicolon
id|csta-&gt;status_end
op_assign
l_int|NULL
suffix:semicolon
id|kfree
c_func
(paren
id|csta-&gt;dlogspace
)paren
suffix:semicolon
)brace
r_void
DECL|function|debugl1
id|debugl1
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_char
op_star
id|msg
)paren
(brace
r_char
id|tmp
(braket
l_int|1024
)braket
comma
id|tm
(braket
l_int|32
)braket
suffix:semicolon
id|jiftime
c_func
(paren
id|tm
comma
id|jiffies
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;%s Card %d %s&bslash;n&quot;
comma
id|tm
comma
id|cs-&gt;cardnr
op_plus
l_int|1
comma
id|msg
)paren
suffix:semicolon
id|HiSax_putstatus
c_func
(paren
id|cs
comma
id|tmp
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1m_debug
id|l1m_debug
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_char
op_star
id|s
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|debugl1
c_func
(paren
id|st-&gt;l1.hardware
comma
id|s
)paren
suffix:semicolon
)brace
r_void
DECL|function|L1activated
id|L1activated
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
r_struct
id|PStack
op_star
id|st
suffix:semicolon
id|st
op_assign
id|cs-&gt;stlist
suffix:semicolon
r_while
c_loop
(paren
id|st
)paren
(brace
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_ACTIVATING
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|st-&gt;l1
dot
id|l1man
c_func
(paren
id|st
comma
id|PH_ACTIVATE_CNF
comma
l_int|NULL
)paren
suffix:semicolon
r_else
id|st-&gt;l1
dot
id|l1man
c_func
(paren
id|st
comma
id|PH_ACTIVATE_IND
comma
l_int|NULL
)paren
suffix:semicolon
id|st
op_assign
id|st-&gt;next
suffix:semicolon
)brace
)brace
r_void
DECL|function|L1deactivated
id|L1deactivated
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
r_struct
id|PStack
op_star
id|st
suffix:semicolon
id|st
op_assign
id|cs-&gt;stlist
suffix:semicolon
r_while
c_loop
(paren
id|st
)paren
(brace
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|FLG_L1_DBUSY
comma
op_amp
id|cs-&gt;HW_Flags
)paren
)paren
id|st-&gt;l1
dot
id|l1l2
c_func
(paren
id|st
comma
id|PH_PAUSE_CNF
comma
l_int|NULL
)paren
suffix:semicolon
id|st-&gt;l1
dot
id|l1man
c_func
(paren
id|st
comma
id|PH_DEACTIVATE_IND
comma
l_int|NULL
)paren
suffix:semicolon
id|st
op_assign
id|st-&gt;next
suffix:semicolon
)brace
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_DBUSY
comma
op_amp
id|cs-&gt;HW_Flags
)paren
suffix:semicolon
)brace
r_void
DECL|function|DChannel_proc_xmt
id|DChannel_proc_xmt
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
r_struct
id|PStack
op_star
id|stptr
suffix:semicolon
r_if
c_cond
(paren
id|cs-&gt;tx_skb
)paren
r_return
suffix:semicolon
id|stptr
op_assign
id|cs-&gt;stlist
suffix:semicolon
r_while
c_loop
(paren
id|stptr
op_ne
l_int|NULL
)paren
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_PULL_REQ
comma
op_amp
id|stptr-&gt;l1.Flags
)paren
)paren
(brace
id|stptr-&gt;l1
dot
id|l1l2
c_func
(paren
id|stptr
comma
id|PH_PULL_CNF
comma
l_int|NULL
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
id|stptr
op_assign
id|stptr-&gt;next
suffix:semicolon
)brace
r_void
DECL|function|DChannel_proc_rcv
id|DChannel_proc_rcv
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
r_struct
id|sk_buff
op_star
id|skb
comma
op_star
id|nskb
suffix:semicolon
r_struct
id|PStack
op_star
id|stptr
op_assign
id|cs-&gt;stlist
suffix:semicolon
r_int
id|found
comma
id|tei
comma
id|sapi
suffix:semicolon
r_char
id|tmp
(braket
l_int|64
)braket
suffix:semicolon
r_if
c_cond
(paren
id|stptr
)paren
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|FLG_L1_ACTTIMER
comma
op_amp
id|stptr-&gt;l1.Flags
)paren
)paren
id|FsmEvent
c_func
(paren
op_amp
id|stptr-&gt;l1.l1m
comma
id|EV_TIMER_ACT
comma
l_int|NULL
)paren
suffix:semicolon
r_while
c_loop
(paren
(paren
id|skb
op_assign
id|skb_dequeue
c_func
(paren
op_amp
id|cs-&gt;rq
)paren
)paren
)paren
(brace
macro_line|#ifdef L2FRAME_DEBUG&t;&t;/* psa */
r_if
c_cond
(paren
id|cs-&gt;debug
op_amp
id|L1_DEB_LAPD
)paren
id|Logl2Frame
c_func
(paren
id|cs
comma
id|skb
comma
l_string|&quot;PH_DATA&quot;
comma
l_int|1
)paren
suffix:semicolon
macro_line|#endif
id|stptr
op_assign
id|cs-&gt;stlist
suffix:semicolon
id|sapi
op_assign
id|skb-&gt;data
(braket
l_int|0
)braket
op_rshift
l_int|2
suffix:semicolon
id|tei
op_assign
id|skb-&gt;data
(braket
l_int|1
)braket
op_rshift
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|tei
op_eq
id|GROUP_TEI
)paren
(brace
r_if
c_cond
(paren
id|sapi
op_eq
id|CTRL_SAPI
)paren
(brace
multiline_comment|/* sapi 0 */
r_if
c_cond
(paren
id|cs-&gt;dlogflag
)paren
(brace
id|LogFrame
c_func
(paren
id|cs
comma
id|skb-&gt;data
comma
id|skb-&gt;len
)paren
suffix:semicolon
id|dlogframe
c_func
(paren
id|cs
comma
id|skb-&gt;data
op_plus
l_int|3
comma
id|skb-&gt;len
op_minus
l_int|3
comma
l_string|&quot;Q.931 frame network-&gt;user broadcast&quot;
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
id|stptr
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
(paren
id|nskb
op_assign
id|skb_clone
c_func
(paren
id|skb
comma
id|GFP_ATOMIC
)paren
)paren
)paren
id|stptr-&gt;l1
dot
id|l1l2
c_func
(paren
id|stptr
comma
id|PH_DATA_IND
comma
id|nskb
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: isdn broadcast buffer shortage&bslash;n&quot;
)paren
suffix:semicolon
id|stptr
op_assign
id|stptr-&gt;next
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|sapi
op_eq
id|TEI_SAPI
)paren
(brace
r_while
c_loop
(paren
id|stptr
op_ne
l_int|NULL
)paren
(brace
r_if
c_cond
(paren
(paren
id|nskb
op_assign
id|skb_clone
c_func
(paren
id|skb
comma
id|GFP_ATOMIC
)paren
)paren
)paren
id|stptr-&gt;l1
dot
id|l1tei
c_func
(paren
id|stptr
comma
id|PH_DATA_IND
comma
id|nskb
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: tei broadcast buffer shortage&bslash;n&quot;
)paren
suffix:semicolon
id|stptr
op_assign
id|stptr-&gt;next
suffix:semicolon
)brace
)brace
id|dev_kfree_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|sapi
op_eq
id|CTRL_SAPI
)paren
(brace
id|found
op_assign
l_int|0
suffix:semicolon
r_while
c_loop
(paren
id|stptr
op_ne
l_int|NULL
)paren
r_if
c_cond
(paren
id|tei
op_eq
id|stptr-&gt;l2.tei
)paren
(brace
id|stptr-&gt;l1
dot
id|l1l2
c_func
(paren
id|stptr
comma
id|PH_DATA_IND
comma
id|skb
)paren
suffix:semicolon
id|found
op_assign
op_logical_neg
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
id|stptr
op_assign
id|stptr-&gt;next
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|found
)paren
(brace
multiline_comment|/* BD 10.10.95&n;&t;&t;&t;&t; * Print out D-Channel msg not processed&n;&t;&t;&t;&t; * by isdn4linux&n;&t;&t;&t;&t; */
r_if
c_cond
(paren
(paren
op_logical_neg
(paren
id|skb-&gt;data
(braket
l_int|0
)braket
op_rshift
l_int|2
)paren
)paren
op_logical_and
(paren
op_logical_neg
(paren
id|skb-&gt;data
(braket
l_int|2
)braket
op_amp
l_int|0x01
)paren
)paren
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;Q.931 frame network-&gt;user with tei %d (not for us)&quot;
comma
id|skb-&gt;data
(braket
l_int|1
)braket
op_rshift
l_int|1
)paren
suffix:semicolon
id|LogFrame
c_func
(paren
id|cs
comma
id|skb-&gt;data
comma
id|skb-&gt;len
)paren
suffix:semicolon
id|dlogframe
c_func
(paren
id|cs
comma
id|skb-&gt;data
op_plus
l_int|4
comma
id|skb-&gt;len
op_minus
l_int|4
comma
id|tmp
)paren
suffix:semicolon
)brace
id|dev_kfree_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
)brace
)brace
)brace
r_static
r_void
DECL|function|BChannel_proc_xmt
id|BChannel_proc_xmt
c_func
(paren
r_struct
id|BCState
op_star
id|bcs
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|bcs-&gt;st
suffix:semicolon
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|BC_FLG_BUSY
comma
op_amp
id|bcs-&gt;Flag
)paren
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_PULL_REQ
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|st-&gt;l1
dot
id|l1l2
c_func
(paren
id|st
comma
id|PH_PULL_CNF
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|test_bit
c_func
(paren
id|BC_FLG_ACTIV
comma
op_amp
id|bcs-&gt;Flag
)paren
)paren
r_if
c_cond
(paren
op_logical_neg
id|test_bit
c_func
(paren
id|BC_FLG_BUSY
comma
op_amp
id|bcs-&gt;Flag
)paren
op_logical_and
(paren
op_logical_neg
id|skb_queue_len
c_func
(paren
op_amp
id|bcs-&gt;squeue
)paren
)paren
)paren
id|st-&gt;ma
dot
id|manl1
c_func
(paren
id|st
comma
id|PH_DEACTIVATE_CNF
comma
l_int|0
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|BChannel_proc_rcv
id|BChannel_proc_rcv
c_func
(paren
r_struct
id|BCState
op_star
id|bcs
)paren
(brace
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
r_while
c_loop
(paren
(paren
id|skb
op_assign
id|skb_dequeue
c_func
(paren
op_amp
id|bcs-&gt;rqueue
)paren
)paren
)paren
(brace
id|bcs-&gt;st-&gt;l1
dot
id|l1l2
c_func
(paren
id|bcs-&gt;st
comma
id|PH_DATA_IND
comma
id|skb
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|BChannel_bh
id|BChannel_bh
c_func
(paren
r_struct
id|BCState
op_star
id|bcs
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|bcs
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|B_RCVBUFREADY
comma
op_amp
id|bcs-&gt;event
)paren
)paren
id|BChannel_proc_rcv
c_func
(paren
id|bcs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|B_XMTBUFREADY
comma
op_amp
id|bcs-&gt;event
)paren
)paren
id|BChannel_proc_xmt
c_func
(paren
id|bcs
)paren
suffix:semicolon
)brace
r_void
DECL|function|HiSax_addlist
id|HiSax_addlist
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_struct
id|PStack
op_star
id|st
)paren
(brace
id|st-&gt;next
op_assign
id|cs-&gt;stlist
suffix:semicolon
id|cs-&gt;stlist
op_assign
id|st
suffix:semicolon
)brace
r_void
DECL|function|HiSax_rmlist
id|HiSax_rmlist
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_struct
id|PStack
op_star
id|st
)paren
(brace
r_struct
id|PStack
op_star
id|p
suffix:semicolon
id|FsmDelTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cs-&gt;stlist
op_eq
id|st
)paren
id|cs-&gt;stlist
op_assign
id|st-&gt;next
suffix:semicolon
r_else
(brace
id|p
op_assign
id|cs-&gt;stlist
suffix:semicolon
r_while
c_loop
(paren
id|p
)paren
r_if
c_cond
(paren
id|p-&gt;next
op_eq
id|st
)paren
(brace
id|p-&gt;next
op_assign
id|st-&gt;next
suffix:semicolon
r_return
suffix:semicolon
)brace
r_else
id|p
op_assign
id|p-&gt;next
suffix:semicolon
)brace
)brace
r_void
DECL|function|init_bcstate
id|init_bcstate
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_int
id|bc
)paren
(brace
r_struct
id|BCState
op_star
id|bcs
op_assign
id|cs-&gt;bcs
op_plus
id|bc
suffix:semicolon
id|bcs-&gt;cs
op_assign
id|cs
suffix:semicolon
id|bcs-&gt;channel
op_assign
id|bc
suffix:semicolon
id|bcs-&gt;tqueue.next
op_assign
l_int|0
suffix:semicolon
id|bcs-&gt;tqueue.sync
op_assign
l_int|0
suffix:semicolon
id|bcs-&gt;tqueue.routine
op_assign
(paren
r_void
op_star
)paren
(paren
r_void
op_star
)paren
id|BChannel_bh
suffix:semicolon
id|bcs-&gt;tqueue.data
op_assign
id|bcs
suffix:semicolon
id|bcs-&gt;BC_SetStack
op_assign
l_int|NULL
suffix:semicolon
id|bcs-&gt;BC_Close
op_assign
l_int|NULL
suffix:semicolon
id|bcs-&gt;Flag
op_assign
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|closecard
id|closecard
c_func
(paren
r_int
id|cardnr
)paren
(brace
r_struct
id|IsdnCardState
op_star
id|csta
op_assign
id|cards
(braket
id|cardnr
)braket
dot
id|cs
suffix:semicolon
r_struct
id|sk_buff
op_star
id|skb
suffix:semicolon
r_if
c_cond
(paren
id|csta-&gt;bcs-&gt;BC_Close
op_ne
l_int|NULL
)paren
(brace
id|csta-&gt;bcs
op_member_access_from_pointer
id|BC_Close
c_func
(paren
id|csta-&gt;bcs
op_plus
l_int|1
)paren
suffix:semicolon
id|csta-&gt;bcs
op_member_access_from_pointer
id|BC_Close
c_func
(paren
id|csta-&gt;bcs
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csta-&gt;rcvbuf
)paren
(brace
id|kfree
c_func
(paren
id|csta-&gt;rcvbuf
)paren
suffix:semicolon
id|csta-&gt;rcvbuf
op_assign
l_int|NULL
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|skb
op_assign
id|skb_dequeue
c_func
(paren
op_amp
id|csta-&gt;rq
)paren
)paren
)paren
(brace
id|dev_kfree_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
r_while
c_loop
(paren
(paren
id|skb
op_assign
id|skb_dequeue
c_func
(paren
op_amp
id|csta-&gt;sq
)paren
)paren
)paren
(brace
id|dev_kfree_skb
c_func
(paren
id|skb
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csta-&gt;tx_skb
)paren
(brace
id|dev_kfree_skb
c_func
(paren
id|csta-&gt;tx_skb
)paren
suffix:semicolon
id|csta-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csta-&gt;mon_rx
)paren
(brace
id|kfree
c_func
(paren
id|csta-&gt;mon_rx
)paren
suffix:semicolon
id|csta-&gt;mon_rx
op_assign
l_int|NULL
suffix:semicolon
)brace
r_if
c_cond
(paren
id|csta-&gt;mon_tx
)paren
(brace
id|kfree
c_func
(paren
id|csta-&gt;mon_tx
)paren
suffix:semicolon
id|csta-&gt;mon_tx
op_assign
l_int|NULL
suffix:semicolon
)brace
id|csta
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|csta
comma
id|CARD_RELEASE
comma
l_int|NULL
)paren
suffix:semicolon
id|del_timer
c_func
(paren
op_amp
id|csta-&gt;dbusytimer
)paren
suffix:semicolon
id|ll_unload
c_func
(paren
id|csta
)paren
suffix:semicolon
)brace
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_static
r_int
id|init_card
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
)paren
)paren
(brace
r_int
id|irq_cnt
comma
id|cnt
op_assign
l_int|3
suffix:semicolon
r_int
id|flags
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
id|irq_cnt
op_assign
id|kstat_irqs
c_func
(paren
id|cs-&gt;irq
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: IRQ %d count %d&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
comma
id|cs-&gt;irq
comma
id|irq_cnt
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_SETIRQ
comma
l_int|NULL
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: couldn&squot;t get interrupt %d&bslash;n&quot;
comma
id|cs-&gt;irq
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
r_while
c_loop
(paren
id|cnt
)paren
(brace
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_INIT
comma
l_int|NULL
)paren
suffix:semicolon
id|sti
c_func
(paren
)paren
suffix:semicolon
id|current-&gt;state
op_assign
id|TASK_INTERRUPTIBLE
suffix:semicolon
multiline_comment|/* Timeout 10ms */
id|schedule_timeout
c_func
(paren
(paren
l_int|10
op_star
id|HZ
)paren
op_div
l_int|1000
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;%s: IRQ %d count %d&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
comma
id|cs-&gt;irq
comma
id|kstat_irqs
c_func
(paren
id|cs-&gt;irq
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|kstat_irqs
c_func
(paren
id|cs-&gt;irq
)paren
op_eq
id|irq_cnt
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;%s: IRQ(%d) getting no interrupts during init %d&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
comma
id|cs-&gt;irq
comma
l_int|4
op_minus
id|cnt
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cnt
op_eq
l_int|1
)paren
(brace
id|free_irq
c_func
(paren
id|cs-&gt;irq
comma
id|cs
)paren
suffix:semicolon
r_return
(paren
l_int|2
)paren
suffix:semicolon
)brace
r_else
(brace
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_RESET
comma
l_int|NULL
)paren
suffix:semicolon
id|cnt
op_decrement
suffix:semicolon
)brace
)brace
r_else
(brace
id|cs
op_member_access_from_pointer
id|cardmsg
c_func
(paren
id|cs
comma
id|CARD_TEST
comma
l_int|NULL
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
)brace
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
l_int|3
suffix:semicolon
)brace
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_static
r_int
id|checkcard
c_func
(paren
r_int
id|cardnr
comma
r_char
op_star
id|id
comma
r_int
op_star
id|busy_flag
)paren
)paren
(brace
r_int
id|flags
suffix:semicolon
r_int
id|ret
op_assign
l_int|0
suffix:semicolon
r_struct
id|IsdnCard
op_star
id|card
op_assign
id|cards
op_plus
id|cardnr
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs
op_assign
(paren
r_struct
id|IsdnCardState
op_star
)paren
id|kmalloc
c_func
(paren
r_sizeof
(paren
r_struct
id|IsdnCardState
)paren
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for IsdnCardState(card %d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|card-&gt;cs
op_assign
id|cs
suffix:semicolon
id|cs-&gt;cardnr
op_assign
id|cardnr
suffix:semicolon
id|cs-&gt;debug
op_assign
id|L1_DEB_WARN
suffix:semicolon
id|cs-&gt;HW_Flags
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;busy_flag
op_assign
id|busy_flag
suffix:semicolon
macro_line|#if TEI_PER_CARD
macro_line|#else
id|test_and_set_bit
c_func
(paren
id|FLG_TWO_DCHAN
comma
op_amp
id|cs-&gt;HW_Flags
)paren
suffix:semicolon
macro_line|#endif
id|cs-&gt;protocol
op_assign
id|card-&gt;protocol
suffix:semicolon
r_if
c_cond
(paren
(paren
id|card-&gt;typ
OG
l_int|0
)paren
op_logical_and
(paren
id|card-&gt;typ
OL
l_int|31
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
l_int|1
op_lshift
id|card-&gt;typ
)paren
op_amp
id|SUPORTED_CARDS
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Support for %s Card not selected&bslash;n&quot;
comma
id|CardType
(braket
id|card-&gt;typ
)braket
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Card Type %d out of range&bslash;n&quot;
comma
id|card-&gt;typ
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs-&gt;dlogspace
op_assign
id|kmalloc
c_func
(paren
l_int|4096
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for dlogspace(card %d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs-&gt;status_buf
op_assign
id|kmalloc
c_func
(paren
id|HISAX_STATUS_BUFSIZE
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for status_buf(card %d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|kfree
c_func
(paren
id|cs-&gt;dlogspace
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|cs-&gt;stlist
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;dlogflag
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;mon_tx
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;mon_rx
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;status_read
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|cs-&gt;status_write
op_assign
id|cs-&gt;status_buf
suffix:semicolon
id|cs-&gt;status_end
op_assign
id|cs-&gt;status_buf
op_plus
id|HISAX_STATUS_BUFSIZE
op_minus
l_int|1
suffix:semicolon
id|cs-&gt;typ
op_assign
id|card-&gt;typ
suffix:semicolon
id|strcpy
c_func
(paren
id|cs-&gt;iif.id
comma
id|id
)paren
suffix:semicolon
id|cs-&gt;iif.channels
op_assign
l_int|2
suffix:semicolon
id|cs-&gt;iif.maxbufsize
op_assign
id|MAX_DATA_SIZE
suffix:semicolon
id|cs-&gt;iif.hl_hdrlen
op_assign
id|MAX_HEADER_LEN
suffix:semicolon
id|cs-&gt;iif.features
op_assign
id|ISDN_FEATURE_L2_X75I
op_or
id|ISDN_FEATURE_L2_HDLC
op_or
id|ISDN_FEATURE_L2_TRANS
op_or
id|ISDN_FEATURE_L3_TRANS
op_or
macro_line|#ifdef&t;CONFIG_HISAX_1TR6
id|ISDN_FEATURE_P_1TR6
op_or
macro_line|#endif
macro_line|#ifdef&t;CONFIG_HISAX_EURO
id|ISDN_FEATURE_P_EURO
op_or
macro_line|#endif
macro_line|#ifdef        CONFIG_HISAX_NI1
id|ISDN_FEATURE_P_NI1
op_or
macro_line|#endif
l_int|0
suffix:semicolon
id|cs-&gt;iif.command
op_assign
id|HiSax_command
suffix:semicolon
id|cs-&gt;iif.writecmd
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;iif.writebuf_skb
op_assign
id|HiSax_writebuf_skb
suffix:semicolon
id|cs-&gt;iif.readstat
op_assign
id|HiSax_readstatus
suffix:semicolon
id|register_isdn
c_func
(paren
op_amp
id|cs-&gt;iif
)paren
suffix:semicolon
id|cs-&gt;myid
op_assign
id|cs-&gt;iif.channels
suffix:semicolon
id|printk
c_func
(paren
id|KERN_INFO
l_string|&quot;HiSax: Card %d Protocol %s Id=%s (%d)&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
comma
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_1TR6
)paren
ques
c_cond
l_string|&quot;1TR6&quot;
suffix:colon
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_EURO
)paren
ques
c_cond
l_string|&quot;EDSS1&quot;
suffix:colon
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_LEASED
)paren
ques
c_cond
l_string|&quot;LEASED&quot;
suffix:colon
(paren
id|card-&gt;protocol
op_eq
id|ISDN_PTYPE_NI1
)paren
ques
c_cond
l_string|&quot;NI1&quot;
suffix:colon
l_string|&quot;NONE&quot;
comma
id|cs-&gt;iif.id
comma
id|cs-&gt;myid
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|card-&gt;typ
)paren
(brace
macro_line|#if CARD_TELES0
r_case
id|ISDN_CTYPE_16_0
suffix:colon
r_case
id|ISDN_CTYPE_8_0
suffix:colon
id|ret
op_assign
id|setup_teles0
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELES3
r_case
id|ISDN_CTYPE_16_3
suffix:colon
r_case
id|ISDN_CTYPE_PNP
suffix:colon
r_case
id|ISDN_CTYPE_TELESPCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_COMPAQ_ISA
suffix:colon
id|ret
op_assign
id|setup_teles3
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AVM_A1
r_case
id|ISDN_CTYPE_A1
suffix:colon
id|ret
op_assign
id|setup_avm_a1
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ELSA
r_case
id|ISDN_CTYPE_ELSA
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PNP
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PCMCIA
suffix:colon
r_case
id|ISDN_CTYPE_ELSA_PCI
suffix:colon
id|ret
op_assign
id|setup_elsa
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_IX1MICROR2
r_case
id|ISDN_CTYPE_IX1MICROR2
suffix:colon
id|ret
op_assign
id|setup_ix1micro
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_DIEHLDIVA
r_case
id|ISDN_CTYPE_DIEHLDIVA
suffix:colon
id|ret
op_assign
id|setup_diva
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_ASUSCOM
r_case
id|ISDN_CTYPE_ASUSCOM
suffix:colon
id|ret
op_assign
id|setup_asuscom
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELEINT
r_case
id|ISDN_CTYPE_TELEINT
suffix:colon
id|ret
op_assign
id|setup_TeleInt
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SEDLBAUER
r_case
id|ISDN_CTYPE_SEDLBAUER
suffix:colon
r_case
id|ISDN_CTYPE_SEDLBAUER_PCMCIA
suffix:colon
id|ret
op_assign
id|setup_sedlbauer
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_SPORTSTER
r_case
id|ISDN_CTYPE_SPORTSTER
suffix:colon
id|ret
op_assign
id|setup_sportster
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_MIC
r_case
id|ISDN_CTYPE_MIC
suffix:colon
id|ret
op_assign
id|setup_mic
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NETJET
r_case
id|ISDN_CTYPE_NETJET
suffix:colon
id|ret
op_assign
id|setup_netjet
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_TELES3C
r_case
id|ISDN_CTYPE_TELES3C
suffix:colon
id|ret
op_assign
id|setup_t163c
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_NICCY
r_case
id|ISDN_CTYPE_NICCY
suffix:colon
id|ret
op_assign
id|setup_niccy
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
macro_line|#if CARD_AMD7930 || CARD_DBRI
r_case
id|ISDN_CTYPE_AMD7930
suffix:colon
r_case
id|ISDN_CTYPE_DBRI
suffix:colon
id|ret
op_assign
id|setup_foreign
c_func
(paren
id|card
)paren
suffix:semicolon
r_break
suffix:semicolon
macro_line|#endif
r_default
suffix:colon
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Unknown Card Typ %d&bslash;n&quot;
comma
id|card-&gt;typ
)paren
suffix:semicolon
id|ll_unload
c_func
(paren
id|cs
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|ret
)paren
(brace
id|ll_unload
c_func
(paren
id|cs
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cs-&gt;rcvbuf
op_assign
id|kmalloc
c_func
(paren
id|MAX_DFRAME_LEN
comma
id|GFP_ATOMIC
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: No memory for isac rcvbuf&bslash;n&quot;
)paren
suffix:semicolon
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|cs-&gt;rcvidx
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tx_skb
op_assign
l_int|NULL
suffix:semicolon
id|cs-&gt;tx_cnt
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;event
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tqueue.next
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tqueue.sync
op_assign
l_int|0
suffix:semicolon
id|cs-&gt;tqueue.data
op_assign
id|cs
suffix:semicolon
id|skb_queue_head_init
c_func
(paren
op_amp
id|cs-&gt;rq
)paren
suffix:semicolon
id|skb_queue_head_init
c_func
(paren
op_amp
id|cs-&gt;sq
)paren
suffix:semicolon
id|init_bcstate
c_func
(paren
id|cs
comma
l_int|0
)paren
suffix:semicolon
id|init_bcstate
c_func
(paren
id|cs
comma
l_int|1
)paren
suffix:semicolon
id|ret
op_assign
id|init_card
c_func
(paren
id|cs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ret
)paren
(brace
id|closecard
c_func
(paren
id|cardnr
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|0
)paren
suffix:semicolon
)brace
id|init_tei
c_func
(paren
id|cs
comma
id|cs-&gt;protocol
)paren
suffix:semicolon
id|CallcNewChan
c_func
(paren
id|cs
)paren
suffix:semicolon
id|ll_run
c_func
(paren
id|cs
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_RESET_REQ
comma
l_int|NULL
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
r_return
(paren
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_void
id|HiSax_shiftcards
c_func
(paren
r_int
id|idx
)paren
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|idx
suffix:semicolon
id|i
OL
l_int|15
suffix:semicolon
id|i
op_increment
)paren
id|memcpy
c_func
(paren
op_amp
id|cards
(braket
id|i
)braket
comma
op_amp
id|cards
(braket
id|i
op_plus
l_int|1
)braket
comma
r_sizeof
(paren
id|cards
(braket
id|i
)braket
)paren
)paren
suffix:semicolon
)brace
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_int
id|HiSax_inithardware
c_func
(paren
r_int
op_star
id|busy_flag
)paren
)paren
(brace
r_int
id|foundcards
op_assign
l_int|0
suffix:semicolon
r_int
id|i
op_assign
l_int|0
suffix:semicolon
r_int
id|t
op_assign
l_char|&squot;,&squot;
suffix:semicolon
r_int
id|flg
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|id
suffix:semicolon
r_char
op_star
id|next_id
op_assign
id|HiSax_id
suffix:semicolon
r_char
id|ids
(braket
l_int|20
)braket
suffix:semicolon
r_if
c_cond
(paren
id|strchr
c_func
(paren
id|HiSax_id
comma
l_char|&squot;,&squot;
)paren
)paren
id|t
op_assign
l_char|&squot;,&squot;
suffix:semicolon
r_else
r_if
c_cond
(paren
id|strchr
c_func
(paren
id|HiSax_id
comma
l_char|&squot;%&squot;
)paren
)paren
id|t
op_assign
l_char|&squot;%&squot;
suffix:semicolon
r_while
c_loop
(paren
id|i
OL
id|nrcards
)paren
(brace
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|typ
OL
l_int|1
)paren
r_break
suffix:semicolon
id|id
op_assign
id|next_id
suffix:semicolon
r_if
c_cond
(paren
(paren
id|next_id
op_assign
id|strchr
c_func
(paren
id|id
comma
id|t
)paren
)paren
)paren
(brace
op_star
id|next_id
op_increment
op_assign
l_int|0
suffix:semicolon
id|strcpy
c_func
(paren
id|ids
comma
id|id
)paren
suffix:semicolon
id|flg
op_assign
id|i
op_plus
l_int|1
suffix:semicolon
)brace
r_else
(brace
id|next_id
op_assign
id|id
suffix:semicolon
r_if
c_cond
(paren
id|flg
op_ge
id|i
)paren
id|strcpy
c_func
(paren
id|ids
comma
id|id
)paren
suffix:semicolon
r_else
id|sprintf
c_func
(paren
id|ids
comma
l_string|&quot;%s%d&quot;
comma
id|id
comma
id|i
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|checkcard
c_func
(paren
id|i
comma
id|ids
comma
id|busy_flag
)paren
)paren
(brace
id|foundcards
op_increment
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
r_else
(brace
id|printk
c_func
(paren
id|KERN_WARNING
l_string|&quot;HiSax: Card %s not installed !&bslash;n&quot;
comma
id|CardType
(braket
id|cards
(braket
id|i
)braket
dot
id|typ
)braket
)paren
suffix:semicolon
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
id|kfree
c_func
(paren
(paren
r_void
op_star
)paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|cs
op_assign
l_int|NULL
suffix:semicolon
id|HiSax_shiftcards
c_func
(paren
id|i
)paren
suffix:semicolon
)brace
)brace
r_return
id|foundcards
suffix:semicolon
)brace
r_void
DECL|function|HiSax_closehardware
id|HiSax_closehardware
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
id|flags
suffix:semicolon
id|save_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
id|cli
c_func
(paren
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|nrcards
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
(brace
id|ll_stop
c_func
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
id|release_tei
c_func
(paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
id|closecard
c_func
(paren
id|i
)paren
suffix:semicolon
id|free_irq
c_func
(paren
id|cards
(braket
id|i
)braket
dot
id|cs-&gt;irq
comma
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
id|kfree
c_func
(paren
(paren
r_void
op_star
)paren
id|cards
(braket
id|i
)braket
dot
id|cs
)paren
suffix:semicolon
id|cards
(braket
id|i
)braket
dot
id|cs
op_assign
l_int|NULL
suffix:semicolon
)brace
id|Isdnl1Free
c_func
(paren
)paren
suffix:semicolon
id|TeiFree
c_func
(paren
)paren
suffix:semicolon
id|Isdnl2Free
c_func
(paren
)paren
suffix:semicolon
id|CallcFree
c_func
(paren
)paren
suffix:semicolon
id|restore_flags
c_func
(paren
id|flags
)paren
suffix:semicolon
)brace
r_void
DECL|function|HiSax_reportcard
id|HiSax_reportcard
c_func
(paren
r_int
id|cardnr
)paren
(brace
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|cards
(braket
id|cardnr
)braket
dot
id|cs
suffix:semicolon
r_struct
id|PStack
op_star
id|stptr
suffix:semicolon
r_struct
id|l3_process
op_star
id|pc
suffix:semicolon
r_int
id|j
comma
id|i
op_assign
l_int|1
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: reportcard No %d&bslash;n&quot;
comma
id|cardnr
op_plus
l_int|1
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: Type %s&bslash;n&quot;
comma
id|CardType
(braket
id|cs-&gt;typ
)braket
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: debuglevel %x&bslash;n&quot;
comma
id|cs-&gt;debug
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: HiSax_reportcard address 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
op_amp
id|HiSax_reportcard
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: cs 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
id|cs
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: cs stl 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
op_amp
(paren
id|cs-&gt;stlist
)paren
)paren
suffix:semicolon
id|stptr
op_assign
id|cs-&gt;stlist
suffix:semicolon
r_while
c_loop
(paren
id|stptr
op_ne
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: dst%d 0x%lX&bslash;n&quot;
comma
id|i
comma
(paren
id|ulong
)paren
id|stptr
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: dst%d stp 0x%lX&bslash;n&quot;
comma
id|i
comma
(paren
id|ulong
)paren
id|stptr-&gt;l1.stlistp
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax:   tei %d sapi %d&bslash;n&quot;
comma
id|stptr-&gt;l2.tei
comma
id|stptr-&gt;l2.sap
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax:      man 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
id|stptr-&gt;ma.layer
)paren
suffix:semicolon
id|pc
op_assign
id|stptr-&gt;l3.proc
suffix:semicolon
r_while
c_loop
(paren
id|pc
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: l3proc %x 0x%lX&bslash;n&quot;
comma
id|pc-&gt;callref
comma
(paren
id|ulong
)paren
id|pc
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax:    state %d  st 0x%lX chan 0x%lX&bslash;n&quot;
comma
id|pc-&gt;state
comma
(paren
id|ulong
)paren
id|pc-&gt;st
comma
(paren
id|ulong
)paren
id|pc-&gt;chan
)paren
suffix:semicolon
id|pc
op_assign
id|pc-&gt;next
suffix:semicolon
)brace
id|stptr
op_assign
id|stptr-&gt;next
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
r_for
c_loop
(paren
id|j
op_assign
l_int|0
suffix:semicolon
id|j
OL
l_int|2
suffix:semicolon
id|j
op_increment
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax: ch%d 0x%lX&bslash;n&quot;
comma
id|j
comma
(paren
id|ulong
)paren
op_amp
id|cs-&gt;channel
(braket
id|j
)braket
)paren
suffix:semicolon
id|stptr
op_assign
id|cs-&gt;channel
(braket
id|j
)braket
dot
id|b_st
suffix:semicolon
id|i
op_assign
l_int|1
suffix:semicolon
r_while
c_loop
(paren
id|stptr
op_ne
l_int|NULL
)paren
(brace
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax:  b_st%d 0x%lX&bslash;n&quot;
comma
id|i
comma
(paren
id|ulong
)paren
id|stptr
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;HiSax:    man 0x%lX&bslash;n&quot;
comma
(paren
id|ulong
)paren
id|stptr-&gt;ma.layer
)paren
suffix:semicolon
id|stptr
op_assign
id|stptr-&gt;next
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
)brace
)brace
macro_line|#ifdef L2FRAME_DEBUG&t;&t;/* psa */
r_char
op_star
DECL|function|l2cmd
id|l2cmd
c_func
(paren
id|u_char
id|cmd
)paren
(brace
r_switch
c_cond
(paren
id|cmd
op_amp
op_complement
l_int|0x10
)paren
(brace
r_case
l_int|1
suffix:colon
r_return
l_string|&quot;RR&quot;
suffix:semicolon
r_case
l_int|5
suffix:colon
r_return
l_string|&quot;RNR&quot;
suffix:semicolon
r_case
l_int|9
suffix:colon
r_return
l_string|&quot;REJ&quot;
suffix:semicolon
r_case
l_int|0x6f
suffix:colon
r_return
l_string|&quot;SABME&quot;
suffix:semicolon
r_case
l_int|0x0f
suffix:colon
r_return
l_string|&quot;DM&quot;
suffix:semicolon
r_case
l_int|3
suffix:colon
r_return
l_string|&quot;UI&quot;
suffix:semicolon
r_case
l_int|0x43
suffix:colon
r_return
l_string|&quot;DISC&quot;
suffix:semicolon
r_case
l_int|0x63
suffix:colon
r_return
l_string|&quot;UA&quot;
suffix:semicolon
r_case
l_int|0x87
suffix:colon
r_return
l_string|&quot;FRMR&quot;
suffix:semicolon
r_case
l_int|0xaf
suffix:colon
r_return
l_string|&quot;XID&quot;
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|cmd
op_amp
l_int|1
)paren
)paren
r_return
l_string|&quot;I&quot;
suffix:semicolon
r_else
r_return
l_string|&quot;invalid command&quot;
suffix:semicolon
)brace
)brace
DECL|variable|tmp
r_static
r_char
id|tmp
(braket
l_int|20
)braket
suffix:semicolon
r_char
op_star
DECL|function|l2frames
id|l2frames
c_func
(paren
id|u_char
op_star
id|ptr
)paren
(brace
r_switch
c_cond
(paren
id|ptr
(braket
l_int|2
)braket
op_amp
op_complement
l_int|0x10
)paren
(brace
r_case
l_int|1
suffix:colon
r_case
l_int|5
suffix:colon
r_case
l_int|9
suffix:colon
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;%s[%d](nr %d)&quot;
comma
id|l2cmd
c_func
(paren
id|ptr
(braket
l_int|2
)braket
)paren
comma
id|ptr
(braket
l_int|3
)braket
op_amp
l_int|1
comma
id|ptr
(braket
l_int|3
)braket
op_rshift
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x6f
suffix:colon
r_case
l_int|0x0f
suffix:colon
r_case
l_int|3
suffix:colon
r_case
l_int|0x43
suffix:colon
r_case
l_int|0x63
suffix:colon
r_case
l_int|0x87
suffix:colon
r_case
l_int|0xaf
suffix:colon
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;%s[%d]&quot;
comma
id|l2cmd
c_func
(paren
id|ptr
(braket
l_int|2
)braket
)paren
comma
(paren
id|ptr
(braket
l_int|2
)braket
op_amp
l_int|0x10
)paren
op_rshift
l_int|4
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|ptr
(braket
l_int|2
)braket
op_amp
l_int|1
)paren
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;I[%d](ns %d, nr %d)&quot;
comma
id|ptr
(braket
l_int|3
)braket
op_amp
l_int|1
comma
id|ptr
(braket
l_int|2
)braket
op_rshift
l_int|1
comma
id|ptr
(braket
l_int|3
)braket
op_rshift
l_int|1
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
r_return
l_string|&quot;invalid command&quot;
suffix:semicolon
)brace
r_return
id|tmp
suffix:semicolon
)brace
r_void
DECL|function|Logl2Frame
id|Logl2Frame
c_func
(paren
r_struct
id|IsdnCardState
op_star
id|cs
comma
r_struct
id|sk_buff
op_star
id|skb
comma
r_char
op_star
id|buf
comma
r_int
id|dir
)paren
(brace
r_char
id|tmp
(braket
l_int|132
)braket
suffix:semicolon
id|u_char
op_star
id|ptr
suffix:semicolon
id|ptr
op_assign
id|skb-&gt;data
suffix:semicolon
r_if
c_cond
(paren
id|ptr
(braket
l_int|0
)braket
op_amp
l_int|1
op_logical_or
op_logical_neg
(paren
id|ptr
(braket
l_int|1
)braket
op_amp
l_int|1
)paren
)paren
id|debugl1
c_func
(paren
id|cs
comma
l_string|&quot;Addres not LAPD&quot;
)paren
suffix:semicolon
r_else
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;%s %s: %s%c (sapi %d, tei %d)&quot;
comma
(paren
id|dir
ques
c_cond
l_string|&quot;&lt;-&quot;
suffix:colon
l_string|&quot;-&gt;&quot;
)paren
comma
id|buf
comma
id|l2frames
c_func
(paren
id|ptr
)paren
comma
(paren
(paren
id|ptr
(braket
l_int|0
)braket
op_amp
l_int|2
)paren
op_rshift
l_int|1
)paren
op_eq
id|dir
ques
c_cond
l_char|&squot;C&squot;
suffix:colon
l_char|&squot;R&squot;
comma
id|ptr
(braket
l_int|0
)braket
op_rshift
l_int|2
comma
id|ptr
(braket
l_int|1
)braket
op_rshift
l_int|1
)paren
suffix:semicolon
id|debugl1
c_func
(paren
id|cs
comma
id|tmp
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
r_static
r_void
DECL|function|l1_reset
id|l1_reset
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_deact_cnf
id|l1_deact_cnf
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3
)paren
suffix:semicolon
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|FLG_L1_ACTIVATING
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_ENABLE_REQ
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_deact_req
id|l1_deact_req
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|test_bit
c_func
(paren
id|FLG_L1_T3RUN
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
(brace
id|FsmDelTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|1
)paren
suffix:semicolon
id|FsmAddTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|550
comma
id|EV_TIMER_DEACT
comma
l_int|NULL
comma
l_int|2
)paren
suffix:semicolon
id|test_and_set_bit
c_func
(paren
id|FLG_L1_DEACTTIMER
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|l1_power_up
id|l1_power_up
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|FLG_L1_ACTIVATING
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F4
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_INFO3_REQ
comma
l_int|NULL
)paren
suffix:semicolon
id|FsmDelTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|1
)paren
suffix:semicolon
id|FsmAddTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
id|TIMER3_VALUE
op_star
id|HZ
comma
id|EV_TIMER3
comma
l_int|NULL
comma
l_int|2
)paren
suffix:semicolon
id|test_and_set_bit
c_func
(paren
id|FLG_L1_T3RUN
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
)brace
r_else
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_go_F5
id|l1_go_F5
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F5
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_go_F8
id|l1_go_F8
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F8
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_info2_ind
id|l1_info2_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F6
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_INFO3_REQ
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_info4_ind
id|l1_info4_ind
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F7
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_INFO3_REQ
comma
l_int|NULL
)paren
suffix:semicolon
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_DEACTTIMER
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|FsmDelTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|4
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|test_bit
c_func
(paren
id|FLG_L1_ACTIVATED
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
(brace
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_T3RUN
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|FsmDelTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|3
)paren
suffix:semicolon
id|FsmAddTimer
c_func
(paren
op_amp
id|st-&gt;l1.timer
comma
l_int|110
comma
id|EV_TIMER_ACT
comma
l_int|NULL
comma
l_int|2
)paren
suffix:semicolon
id|test_and_set_bit
c_func
(paren
id|FLG_L1_ACTTIMER
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|l1_timer3
id|l1_timer3
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_T3RUN
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
r_if
c_cond
(paren
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_ACTIVATING
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|L1deactivated
c_func
(paren
id|cs
)paren
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;l1.l1m.state
op_ne
id|ST_L1_F6
)paren
id|FsmChangeState
c_func
(paren
id|fi
comma
id|ST_L1_F3
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_timer_act
id|l1_timer_act
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_ACTTIMER
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
id|test_and_set_bit
c_func
(paren
id|FLG_L1_ACTIVATED
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
id|L1activated
c_func
(paren
id|cs
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_timer_deact
id|l1_timer_deact
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_DEACTTIMER
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
id|test_and_clear_bit
c_func
(paren
id|FLG_L1_ACTIVATED
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
id|L1deactivated
c_func
(paren
id|cs
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_DEACT_ACK
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l1_activate
id|l1_activate
c_func
(paren
r_struct
id|FsmInst
op_star
id|fi
comma
r_int
id|event
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|PStack
op_star
id|st
op_assign
id|fi-&gt;userdata
suffix:semicolon
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
id|st-&gt;l1.hardware
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_RESET_REQ
comma
l_int|NULL
)paren
suffix:semicolon
)brace
DECL|variable|HISAX_INITDATA
r_static
r_struct
id|FsmNode
id|L1FnList
(braket
)braket
id|HISAX_INITDATA
op_assign
(brace
(brace
id|ST_L1_F3
comma
id|EV_PH_ACTIVATE
comma
id|l1_activate
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_RESET_IND
comma
id|l1_reset
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_RESET_IND
comma
id|l1_reset
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_RESET_IND
comma
id|l1_reset
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_RESET_IND
comma
id|l1_reset
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_RESET_IND
comma
id|l1_reset
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_RESET_IND
comma
id|l1_reset
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_DEACT_CNF
comma
id|l1_deact_cnf
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_DEACT_CNF
comma
id|l1_deact_cnf
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_DEACT_CNF
comma
id|l1_deact_cnf
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_DEACT_CNF
comma
id|l1_deact_cnf
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_DEACT_CNF
comma
id|l1_deact_cnf
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_DEACT_CNF
comma
id|l1_deact_cnf
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_DEACT_IND
comma
id|l1_deact_req
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_DEACT_IND
comma
id|l1_deact_req
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_DEACT_IND
comma
id|l1_deact_req
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_POWER_UP
comma
id|l1_power_up
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_RSYNC_IND
comma
id|l1_go_F5
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_RSYNC_IND
comma
id|l1_go_F8
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_RSYNC_IND
comma
id|l1_go_F8
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_INFO2_IND
comma
id|l1_info2_ind
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_INFO2_IND
comma
id|l1_info2_ind
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_INFO2_IND
comma
id|l1_info2_ind
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_INFO2_IND
comma
id|l1_info2_ind
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_INFO2_IND
comma
id|l1_info2_ind
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_INFO4_IND
comma
id|l1_info4_ind
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_INFO4_IND
comma
id|l1_info4_ind
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_INFO4_IND
comma
id|l1_info4_ind
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_INFO4_IND
comma
id|l1_info4_ind
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_INFO4_IND
comma
id|l1_info4_ind
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_TIMER3
comma
id|l1_timer3
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_TIMER_ACT
comma
id|l1_timer_act
)brace
comma
(brace
id|ST_L1_F3
comma
id|EV_TIMER_DEACT
comma
id|l1_timer_deact
)brace
comma
(brace
id|ST_L1_F4
comma
id|EV_TIMER_DEACT
comma
id|l1_timer_deact
)brace
comma
(brace
id|ST_L1_F5
comma
id|EV_TIMER_DEACT
comma
id|l1_timer_deact
)brace
comma
(brace
id|ST_L1_F6
comma
id|EV_TIMER_DEACT
comma
id|l1_timer_deact
)brace
comma
(brace
id|ST_L1_F7
comma
id|EV_TIMER_DEACT
comma
id|l1_timer_deact
)brace
comma
(brace
id|ST_L1_F8
comma
id|EV_TIMER_DEACT
comma
id|l1_timer_deact
)brace
comma
)brace
suffix:semicolon
DECL|macro|L1_FN_COUNT
mdefine_line|#define L1_FN_COUNT (sizeof(L1FnList)/sizeof(struct FsmNode))
DECL|function|HISAX_INITFUNC
id|HISAX_INITFUNC
c_func
(paren
r_void
id|Isdnl1New
c_func
(paren
r_void
)paren
)paren
(brace
id|l1fsm.state_count
op_assign
id|L1_STATE_COUNT
suffix:semicolon
id|l1fsm.event_count
op_assign
id|L1_EVENT_COUNT
suffix:semicolon
id|l1fsm.strEvent
op_assign
id|strL1Event
suffix:semicolon
id|l1fsm.strState
op_assign
id|strL1State
suffix:semicolon
id|FsmNew
c_func
(paren
op_amp
id|l1fsm
comma
id|L1FnList
comma
id|L1_FN_COUNT
)paren
suffix:semicolon
)brace
DECL|function|Isdnl1Free
r_void
id|Isdnl1Free
c_func
(paren
r_void
)paren
(brace
id|FsmFree
c_func
(paren
op_amp
id|l1fsm
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|dch_manl1
id|dch_manl1
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_int
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|IsdnCardState
op_star
id|cs
op_assign
(paren
r_struct
id|IsdnCardState
op_star
)paren
id|st-&gt;l1.hardware
suffix:semicolon
r_char
id|tmp
(braket
l_int|32
)braket
suffix:semicolon
r_switch
c_cond
(paren
id|pr
)paren
(brace
r_case
id|PH_ACTIVATE_REQ
suffix:colon
r_if
c_cond
(paren
id|cs-&gt;debug
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;PH_ACTIVATE_REQ %s&quot;
comma
id|strL1State
(braket
id|st-&gt;l1.l1m.state
)braket
)paren
suffix:semicolon
id|debugl1
c_func
(paren
id|cs
comma
id|tmp
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|test_bit
c_func
(paren
id|FLG_L1_ACTIVATED
comma
op_amp
id|st-&gt;l1.Flags
)paren
)paren
id|st-&gt;l1
dot
id|l1man
c_func
(paren
id|st
comma
id|PH_ACTIVATE_CNF
comma
l_int|NULL
)paren
suffix:semicolon
r_else
(brace
id|test_and_set_bit
c_func
(paren
id|FLG_L1_ACTIVATING
comma
op_amp
id|st-&gt;l1.Flags
)paren
suffix:semicolon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_PH_ACTIVATE
comma
id|arg
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|PH_DEACTIVATE_REQ
suffix:colon
r_if
c_cond
(paren
id|cs-&gt;debug
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;PH_DEACTIVATE_REQ %s&quot;
comma
id|strL1State
(braket
id|st-&gt;l1.l1m.state
)braket
)paren
suffix:semicolon
id|debugl1
c_func
(paren
id|cs
comma
id|tmp
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
r_case
id|PH_TESTLOOP_REQ
suffix:colon
r_if
c_cond
(paren
l_int|1
op_amp
(paren
r_int
)paren
id|arg
)paren
id|debugl1
c_func
(paren
id|cs
comma
l_string|&quot;PH_TEST_LOOP B1&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
l_int|2
op_amp
(paren
r_int
)paren
id|arg
)paren
id|debugl1
c_func
(paren
id|cs
comma
l_string|&quot;PH_TEST_LOOP B2&quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
l_int|3
op_amp
(paren
r_int
)paren
id|arg
)paren
)paren
id|debugl1
c_func
(paren
id|cs
comma
l_string|&quot;PH_TEST_LOOP DISABLED&quot;
)paren
suffix:semicolon
id|cs
op_member_access_from_pointer
id|l1cmd
c_func
(paren
id|cs
comma
id|PH_TESTLOOP_REQ
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_RESET_IND
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_RESET_IND
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_DEACT_CNF
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_DEACT_CNF
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_DEACT_IND
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_DEACT_IND
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_POWERUP_CNF
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_POWER_UP
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_RSYNC_IND
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_RSYNC_IND
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_INFO2_IND
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_INFO2_IND
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PH_I4_P8_IND
suffix:colon
r_case
id|PH_I4_P10_IND
suffix:colon
id|FsmEvent
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
id|EV_INFO4_IND
comma
id|arg
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
(brace
)brace
r_if
c_cond
(paren
id|cs-&gt;debug
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;dch_manl1 msg %04X unhandled&quot;
comma
id|pr
)paren
suffix:semicolon
id|debugl1
c_func
(paren
id|cs
comma
id|tmp
)paren
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
)brace
r_void
DECL|function|setstack_HiSax
id|setstack_HiSax
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_struct
id|IsdnCardState
op_star
id|cs
)paren
(brace
id|st-&gt;l1.hardware
op_assign
id|cs
suffix:semicolon
id|st-&gt;protocol
op_assign
id|cs-&gt;protocol
suffix:semicolon
id|st-&gt;l1.l1m.fsm
op_assign
op_amp
id|l1fsm
suffix:semicolon
id|st-&gt;l1.l1m.state
op_assign
id|ST_L1_F3
suffix:semicolon
id|st-&gt;l1.l1m.debug
op_assign
id|cs-&gt;debug
suffix:semicolon
id|st-&gt;l1.l1m.userdata
op_assign
id|st
suffix:semicolon
id|st-&gt;l1.l1m.userint
op_assign
l_int|0
suffix:semicolon
id|st-&gt;l1.l1m.printdebug
op_assign
id|l1m_debug
suffix:semicolon
id|FsmInitTimer
c_func
(paren
op_amp
id|st-&gt;l1.l1m
comma
op_amp
id|st-&gt;l1.timer
)paren
suffix:semicolon
id|setstack_tei
c_func
(paren
id|st
)paren
suffix:semicolon
id|setstack_manager
c_func
(paren
id|st
)paren
suffix:semicolon
id|st-&gt;l1.stlistp
op_assign
op_amp
(paren
id|cs-&gt;stlist
)paren
suffix:semicolon
id|st-&gt;ma.manl1
op_assign
id|dch_manl1
suffix:semicolon
id|st-&gt;l1.Flags
op_assign
l_int|0
suffix:semicolon
id|cs
op_member_access_from_pointer
id|setstack_d
c_func
(paren
id|st
comma
id|cs
)paren
suffix:semicolon
)brace
eof
