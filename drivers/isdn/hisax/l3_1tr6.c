multiline_comment|/* $Id: l3_1tr6.c,v 1.9 1997/02/11 01:37:40 keil Exp $&n;&n; *  German 1TR6 D-channel protocol&n; *&n; * Author       Karsten Keil (keil@temic-ech.spacenet.de)&n; *&n; *&n; * $Log: l3_1tr6.c,v $&n; * Revision 1.9  1997/02/11 01:37:40  keil&n; * Changed setup-interface (incoming and outgoing)&n; *&n; * Revision 1.8  1997/01/27 23:20:21  keil&n; * report revision only ones&n; *&n; * Revision 1.7  1997/01/21 22:30:07  keil&n; * new statemachine; L3 timers&n; *&n; * Revision 1.6  1996/12/14 21:07:20  keil&n; * additional states for CC_REJECT&n; *&n; * Revision 1.5  1996/12/08 19:55:17  keil&n; * change CC_REJECT_REQ routine&n; *&n; * Revision 1.4  1996/10/30 10:18:01  keil&n; * bugfixes in debugging output&n; *&n; * Revision 1.3  1996/10/27 22:15:37  keil&n; * bugfix reject handling&n; *&n; * Revision 1.2  1996/10/13 23:08:56  keil&n; * added missing state for callback reject&n; *&n; * Revision 1.1  1996/10/13 20:04:55  keil&n; * Initial revision&n; *&n; *&n; */
DECL|macro|__NO_VERSION__
mdefine_line|#define __NO_VERSION__
macro_line|#include &quot;hisax.h&quot;
macro_line|#include &quot;l3_1tr6.h&quot;
macro_line|#include &quot;isdnl3.h&quot;
r_extern
r_char
op_star
id|HiSax_getrev
c_func
(paren
r_const
r_char
op_star
id|revision
)paren
suffix:semicolon
DECL|variable|l3_1tr6_revision
r_const
r_char
op_star
id|l3_1tr6_revision
op_assign
l_string|&quot;$Revision: 1.9 $&quot;
suffix:semicolon
DECL|macro|MsgHead
mdefine_line|#define MsgHead(ptr, cref, mty, dis) &bslash;&n;&t;*ptr++ = dis; &bslash;&n;&t;*ptr++ = 0x1; &bslash;&n;&t;*ptr++ = cref; &bslash;&n;&t;*ptr++ = mty
r_static
r_void
DECL|function|l3_1TR6_message
id|l3_1TR6_message
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|mt
comma
id|byte
id|pd
)paren
(brace
r_struct
id|BufHeader
op_star
id|dibh
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|BufPoolGet
c_func
(paren
op_amp
id|dibh
comma
id|st-&gt;l1.sbufpool
comma
id|GFP_ATOMIC
comma
(paren
r_void
op_star
)paren
id|st
comma
l_int|18
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|p
op_add_assign
id|st-&gt;l2.ihsize
suffix:semicolon
id|MsgHead
c_func
(paren
id|p
comma
id|st-&gt;l3.callref
comma
id|mt
comma
id|pd
)paren
suffix:semicolon
id|dibh-&gt;datasize
op_assign
id|p
op_minus
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l2
c_func
(paren
id|st
comma
id|DL_DATA
comma
id|dibh
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_setup_req
id|l3_1tr6_setup_req
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|dibh
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
r_char
op_star
id|teln
suffix:semicolon
id|st-&gt;l3.callref
op_assign
id|st-&gt;pa-&gt;callref
suffix:semicolon
id|BufPoolGet
c_func
(paren
op_amp
id|dibh
comma
id|st-&gt;l1.sbufpool
comma
id|GFP_ATOMIC
comma
(paren
r_void
op_star
)paren
id|st
comma
l_int|19
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|p
op_add_assign
id|st-&gt;l2.ihsize
suffix:semicolon
id|MsgHead
c_func
(paren
id|p
comma
id|st-&gt;l3.callref
comma
id|MT_N1_SETUP
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
r_if
c_cond
(paren
l_char|&squot;S&squot;
op_eq
(paren
id|st-&gt;pa-&gt;setup.phone
(braket
l_int|0
)braket
op_amp
l_int|0x5f
)paren
)paren
(brace
multiline_comment|/* SPV ? */
multiline_comment|/* NSF SPV */
op_star
id|p
op_increment
op_assign
id|WE0_netSpecFac
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|4
suffix:semicolon
multiline_comment|/* Laenge */
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|FAC_SPV
suffix:semicolon
multiline_comment|/* SPV */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si1
suffix:semicolon
multiline_comment|/* 0 for all Services */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si2
suffix:semicolon
multiline_comment|/* 0 for all Services */
op_star
id|p
op_increment
op_assign
id|WE0_netSpecFac
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|4
suffix:semicolon
multiline_comment|/* Laenge */
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|FAC_Activate
suffix:semicolon
multiline_comment|/* aktiviere SPV (default) */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si1
suffix:semicolon
multiline_comment|/* 0 for all Services */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si2
suffix:semicolon
multiline_comment|/* 0 for all Services */
)brace
r_if
c_cond
(paren
id|st-&gt;pa-&gt;setup.eazmsn
(braket
l_int|0
)braket
op_ne
l_char|&squot;&bslash;0&squot;
)paren
(brace
op_star
id|p
op_increment
op_assign
id|WE0_origAddr
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|strlen
c_func
(paren
id|st-&gt;pa-&gt;setup.eazmsn
)paren
op_plus
l_int|1
suffix:semicolon
multiline_comment|/* Classify as AnyPref. */
op_star
id|p
op_increment
op_assign
l_int|0x81
suffix:semicolon
multiline_comment|/* Ext = &squot;1&squot;B, Type = &squot;000&squot;B, Plan = &squot;0001&squot;B. */
id|teln
op_assign
id|st-&gt;pa-&gt;setup.eazmsn
suffix:semicolon
r_while
c_loop
(paren
op_star
id|teln
)paren
op_star
id|p
op_increment
op_assign
op_star
id|teln
op_increment
op_amp
l_int|0x7f
suffix:semicolon
)brace
op_star
id|p
op_increment
op_assign
id|WE0_destAddr
suffix:semicolon
id|teln
op_assign
id|st-&gt;pa-&gt;setup.phone
suffix:semicolon
r_if
c_cond
(paren
l_char|&squot;S&squot;
op_ne
(paren
id|st-&gt;pa-&gt;setup.phone
(braket
l_int|0
)braket
op_amp
l_int|0x5f
)paren
)paren
(brace
multiline_comment|/* Keine SPV */
op_star
id|p
op_increment
op_assign
id|strlen
c_func
(paren
id|st-&gt;pa-&gt;setup.phone
)paren
op_plus
l_int|1
suffix:semicolon
id|st-&gt;pa-&gt;spv
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* SPV */
op_star
id|p
op_increment
op_assign
id|strlen
c_func
(paren
id|st-&gt;pa-&gt;setup.phone
)paren
suffix:semicolon
id|teln
op_increment
suffix:semicolon
multiline_comment|/* skip S */
id|st-&gt;pa-&gt;spv
op_assign
l_int|1
suffix:semicolon
)brace
multiline_comment|/* Classify as AnyPref. */
op_star
id|p
op_increment
op_assign
l_int|0x81
suffix:semicolon
multiline_comment|/* Ext = &squot;1&squot;B, Type = &squot;000&squot;B, Plan = &squot;0001&squot;B. */
r_while
c_loop
(paren
op_star
id|teln
)paren
op_star
id|p
op_increment
op_assign
op_star
id|teln
op_increment
op_amp
l_int|0x7f
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|WE_Shift_F6
suffix:semicolon
multiline_comment|/* Codesatz 6 fuer Service */
op_star
id|p
op_increment
op_assign
id|WE6_serviceInd
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|2
suffix:semicolon
multiline_comment|/* len=2 info,info2 */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si1
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si2
suffix:semicolon
id|dibh-&gt;datasize
op_assign
id|p
op_minus
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t303
comma
id|CC_T303
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|1
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l2
c_func
(paren
id|st
comma
id|DL_DATA
comma
id|dibh
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_setup
id|l3_1tr6_setup
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|byte
op_star
id|p
suffix:semicolon
r_int
id|bcfound
op_assign
l_int|0
suffix:semicolon
r_char
id|tmp
(braket
l_int|80
)braket
suffix:semicolon
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|p
op_add_assign
id|st-&gt;l2.uihsize
suffix:semicolon
id|st-&gt;pa-&gt;callref
op_assign
id|getcallref
c_func
(paren
id|p
)paren
suffix:semicolon
id|st-&gt;l3.callref
op_assign
l_int|0x80
op_plus
id|st-&gt;pa-&gt;callref
suffix:semicolon
multiline_comment|/* Channel Identification */
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.uihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.uihsize
comma
id|WE0_chanID
comma
l_int|0
)paren
)paren
)paren
(brace
id|st-&gt;pa-&gt;bchannel
op_assign
id|p
(braket
l_int|2
)braket
op_amp
l_int|0x3
suffix:semicolon
id|bcfound
op_increment
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;setup without bchannel&quot;
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.uihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.uihsize
comma
id|WE6_serviceInd
comma
l_int|6
)paren
)paren
)paren
(brace
id|st-&gt;pa-&gt;setup.si1
op_assign
id|p
(braket
l_int|2
)braket
suffix:semicolon
id|st-&gt;pa-&gt;setup.si2
op_assign
id|p
(braket
l_int|3
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;setup without service indicator&quot;
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.uihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.uihsize
comma
id|WE0_destAddr
comma
l_int|0
)paren
)paren
)paren
id|iecpy
c_func
(paren
id|st-&gt;pa-&gt;setup.eazmsn
comma
id|p
comma
l_int|1
)paren
suffix:semicolon
r_else
id|st-&gt;pa-&gt;setup.eazmsn
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.uihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.uihsize
comma
id|WE0_origAddr
comma
l_int|0
)paren
)paren
)paren
(brace
id|iecpy
c_func
(paren
id|st-&gt;pa-&gt;setup.phone
comma
id|p
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
id|st-&gt;pa-&gt;setup.phone
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|st-&gt;pa-&gt;spv
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.uihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.uihsize
comma
id|WE0_netSpecFac
comma
l_int|0
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
(paren
id|FAC_SPV
op_eq
id|p
(braket
l_int|3
)braket
)paren
op_logical_or
(paren
id|FAC_Activate
op_eq
id|p
(braket
l_int|3
)braket
)paren
)paren
id|st-&gt;pa-&gt;spv
op_assign
l_int|1
suffix:semicolon
)brace
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
multiline_comment|/* Signal all services, linklevel takes care of Service-Indicator */
r_if
c_cond
(paren
id|bcfound
)paren
(brace
r_if
c_cond
(paren
(paren
id|st-&gt;pa-&gt;setup.si1
op_ne
l_int|7
)paren
op_logical_and
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;non-digital call: %s -&gt; %s&quot;
comma
id|st-&gt;pa-&gt;setup.phone
comma
id|st-&gt;pa-&gt;setup.eazmsn
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
id|newl3state
c_func
(paren
id|st
comma
l_int|6
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_SETUP_IND
comma
l_int|NULL
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|l3_1tr6_setup_ack
id|l3_1tr6_setup_ack
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|byte
op_star
id|p
suffix:semicolon
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|2
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.ihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
comma
id|WE0_chanID
comma
l_int|0
)paren
)paren
)paren
(brace
id|st-&gt;pa-&gt;bchannel
op_assign
id|p
(braket
l_int|2
)braket
op_amp
l_int|0x3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;setup answer without bchannel&quot;
)paren
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t304
comma
id|CC_T304
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_MORE_INFO
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_call_sent
id|l3_1tr6_call_sent
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|byte
op_star
id|p
suffix:semicolon
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.ihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
comma
id|WE0_chanID
comma
l_int|0
)paren
)paren
)paren
(brace
id|st-&gt;pa-&gt;bchannel
op_assign
id|p
(braket
l_int|2
)braket
op_amp
l_int|0x3
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;setup answer without bchannel&quot;
)paren
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t310
comma
id|CC_T310
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|3
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_PROCEEDING_IND
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_alert
id|l3_1tr6_alert
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
multiline_comment|/* T304 */
id|newl3state
c_func
(paren
id|st
comma
l_int|4
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_ALERTING_IND
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_info
id|l3_1tr6_info
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|byte
op_star
id|p
suffix:semicolon
r_int
id|i
comma
id|tmpcharge
op_assign
l_int|0
suffix:semicolon
r_char
id|a_charge
(braket
l_int|8
)braket
comma
id|tmp
(braket
l_int|32
)braket
suffix:semicolon
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.ihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
comma
id|WE6_chargingInfo
comma
l_int|6
)paren
)paren
)paren
(brace
id|iecpy
c_func
(paren
id|a_charge
comma
id|p
comma
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|strlen
c_func
(paren
id|a_charge
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|tmpcharge
op_mul_assign
l_int|10
suffix:semicolon
id|tmpcharge
op_add_assign
id|a_charge
(braket
id|i
)braket
op_amp
l_int|0xf
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tmpcharge
OG
id|st-&gt;pa-&gt;chargeinfo
)paren
(brace
id|st-&gt;pa-&gt;chargeinfo
op_assign
id|tmpcharge
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_INFO_CHARGE
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_CHARGE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;charging info %d&quot;
comma
id|st-&gt;pa-&gt;chargeinfo
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_CHARGE
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;charging info not found&quot;
)paren
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_info_s2
id|l3_1tr6_info_s2
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_connect
id|l3_1tr6_connect
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
multiline_comment|/* T310 */
id|newl3state
c_func
(paren
id|st
comma
l_int|10
)paren
suffix:semicolon
id|st-&gt;pa-&gt;chargeinfo
op_assign
l_int|0
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_SETUP_CNF
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_rel
id|l3_1tr6_rel
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.ihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
comma
id|WE0_cause
comma
l_int|0
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|p
(braket
l_int|1
)braket
OG
l_int|0
)paren
(brace
id|st-&gt;pa-&gt;cause
op_assign
id|p
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|p
(braket
l_int|1
)braket
OG
l_int|1
)paren
id|st-&gt;pa-&gt;loc
op_assign
id|p
(braket
l_int|3
)braket
suffix:semicolon
r_else
id|st-&gt;pa-&gt;loc
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|st-&gt;pa-&gt;cause
op_assign
l_int|0
suffix:semicolon
id|st-&gt;pa-&gt;loc
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
id|st-&gt;pa-&gt;cause
op_assign
op_minus
l_int|1
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|StopAllL3Timer
c_func
(paren
id|st
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|0
)paren
suffix:semicolon
id|l3_1TR6_message
c_func
(paren
id|st
comma
id|MT_N1_REL_ACK
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_RELEASE_IND
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_rel_ack
id|l3_1tr6_rel_ack
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|StopAllL3Timer
c_func
(paren
id|st
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|0
)paren
suffix:semicolon
id|st-&gt;pa-&gt;cause
op_assign
op_minus
l_int|1
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_RELEASE_CNF
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_disc
id|l3_1tr6_disc
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
r_int
id|i
comma
id|tmpcharge
op_assign
l_int|0
suffix:semicolon
r_char
id|a_charge
(braket
l_int|8
)braket
comma
id|tmp
(braket
l_int|32
)braket
suffix:semicolon
id|StopAllL3Timer
c_func
(paren
id|st
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.ihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
comma
id|WE6_chargingInfo
comma
l_int|6
)paren
)paren
)paren
(brace
id|iecpy
c_func
(paren
id|a_charge
comma
id|p
comma
l_int|1
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|strlen
c_func
(paren
id|a_charge
)paren
suffix:semicolon
id|i
op_increment
)paren
(brace
id|tmpcharge
op_mul_assign
l_int|10
suffix:semicolon
id|tmpcharge
op_add_assign
id|a_charge
(braket
id|i
)braket
op_amp
l_int|0xf
suffix:semicolon
)brace
r_if
c_cond
(paren
id|tmpcharge
OG
id|st-&gt;pa-&gt;chargeinfo
)paren
(brace
id|st-&gt;pa-&gt;chargeinfo
op_assign
id|tmpcharge
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_INFO_CHARGE
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_CHARGE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;charging info %d&quot;
comma
id|st-&gt;pa-&gt;chargeinfo
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_CHARGE
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;charging info not found&quot;
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|p
op_assign
id|findie
c_func
(paren
id|p
op_plus
id|st-&gt;l2.ihsize
comma
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
comma
id|WE0_cause
comma
l_int|0
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|p
(braket
l_int|1
)braket
OG
l_int|0
)paren
(brace
id|st-&gt;pa-&gt;cause
op_assign
id|p
(braket
l_int|2
)braket
suffix:semicolon
r_if
c_cond
(paren
id|p
(braket
l_int|1
)braket
OG
l_int|1
)paren
id|st-&gt;pa-&gt;loc
op_assign
id|p
(braket
l_int|3
)braket
suffix:semicolon
r_else
id|st-&gt;pa-&gt;loc
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|st-&gt;pa-&gt;cause
op_assign
l_int|0
suffix:semicolon
id|st-&gt;pa-&gt;loc
op_assign
l_int|0
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
id|l3_debug
c_func
(paren
id|st
comma
l_string|&quot;cause not found&quot;
)paren
suffix:semicolon
id|st-&gt;pa-&gt;cause
op_assign
op_minus
l_int|1
suffix:semicolon
)brace
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|12
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_DISCONNECT_IND
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_connect_ack
id|l3_1tr6_connect_ack
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|10
)paren
suffix:semicolon
id|st-&gt;pa-&gt;chargeinfo
op_assign
l_int|0
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_SETUP_COMPLETE_IND
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_alert_req
id|l3_1tr6_alert_req
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|newl3state
c_func
(paren
id|st
comma
l_int|7
)paren
suffix:semicolon
id|l3_1TR6_message
c_func
(paren
id|st
comma
id|MT_N1_ALERT
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_setup_rsp
id|l3_1tr6_setup_rsp
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|dibh
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|BufPoolGet
c_func
(paren
op_amp
id|dibh
comma
id|st-&gt;l1.sbufpool
comma
id|GFP_ATOMIC
comma
(paren
r_void
op_star
)paren
id|st
comma
l_int|20
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|p
op_add_assign
id|st-&gt;l2.ihsize
suffix:semicolon
id|MsgHead
c_func
(paren
id|p
comma
id|st-&gt;l3.callref
comma
id|MT_N1_CONN
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;pa-&gt;spv
)paren
(brace
multiline_comment|/* SPV ? */
multiline_comment|/* NSF SPV */
op_star
id|p
op_increment
op_assign
id|WE0_netSpecFac
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|4
suffix:semicolon
multiline_comment|/* Laenge */
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|FAC_SPV
suffix:semicolon
multiline_comment|/* SPV */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si1
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si2
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|WE0_netSpecFac
suffix:semicolon
op_star
id|p
op_increment
op_assign
l_int|4
suffix:semicolon
multiline_comment|/* Laenge */
op_star
id|p
op_increment
op_assign
l_int|0
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|FAC_Activate
suffix:semicolon
multiline_comment|/* aktiviere SPV */
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si1
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|st-&gt;pa-&gt;setup.si2
suffix:semicolon
)brace
id|newl3state
c_func
(paren
id|st
comma
l_int|8
)paren
suffix:semicolon
id|dibh-&gt;datasize
op_assign
id|p
op_minus
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l2
c_func
(paren
id|st
comma
id|DL_DATA
comma
id|dibh
)paren
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t313
comma
id|CC_T313
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_reset
id|l3_1tr6_reset
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|newl3state
c_func
(paren
id|st
comma
l_int|0
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_disconnect_req
id|l3_1tr6_disconnect_req
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|dibh
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|byte
id|cause
op_assign
l_int|0x10
suffix:semicolon
id|byte
id|clen
op_assign
l_int|1
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;pa-&gt;cause
OG
l_int|0
)paren
id|cause
op_assign
id|st-&gt;pa-&gt;cause
suffix:semicolon
multiline_comment|/* Map DSS1 causes */
r_switch
c_cond
(paren
id|cause
op_amp
l_int|0x7f
)paren
(brace
r_case
l_int|0x10
suffix:colon
id|clen
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x15
suffix:colon
id|cause
op_assign
id|CAUSE_CallRejected
suffix:semicolon
r_break
suffix:semicolon
)brace
id|StopAllL3Timer
c_func
(paren
id|st
)paren
suffix:semicolon
id|BufPoolGet
c_func
(paren
op_amp
id|dibh
comma
id|st-&gt;l1.sbufpool
comma
id|GFP_ATOMIC
comma
(paren
r_void
op_star
)paren
id|st
comma
l_int|21
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|p
op_add_assign
id|st-&gt;l2.ihsize
suffix:semicolon
id|MsgHead
c_func
(paren
id|p
comma
id|st-&gt;l3.callref
comma
id|MT_N1_DISC
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|WE0_cause
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|clen
suffix:semicolon
multiline_comment|/* Laenge */
r_if
c_cond
(paren
id|clen
)paren
op_star
id|p
op_increment
op_assign
id|cause
op_or
l_int|0x80
suffix:semicolon
id|dibh-&gt;datasize
op_assign
id|p
op_minus
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|11
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l2
c_func
(paren
id|st
comma
id|DL_DATA
comma
id|dibh
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t305
comma
id|CC_T305
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_release_req
id|l3_1tr6_release_req
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|StopAllL3Timer
c_func
(paren
id|st
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|19
)paren
suffix:semicolon
id|l3_1TR6_message
c_func
(paren
id|st
comma
id|MT_N1_REL
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t308
comma
id|CC_T308_1
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_t303
id|l3_1tr6_t303
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_if
c_cond
(paren
id|st-&gt;l3.n_t303
OG
l_int|0
)paren
(brace
id|st-&gt;l3.n_t303
op_decrement
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|l3_1tr6_setup_req
c_func
(paren
id|st
comma
id|pr
comma
id|arg
)paren
suffix:semicolon
)brace
r_else
(brace
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_NOSETUP_RSP_ERR
comma
l_int|NULL
)paren
suffix:semicolon
id|st-&gt;l3.n_t303
op_assign
l_int|1
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
r_static
r_void
DECL|function|l3_1tr6_t304
id|l3_1tr6_t304
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|st-&gt;pa-&gt;cause
op_assign
l_int|0xE6
suffix:semicolon
id|l3_1tr6_disconnect_req
c_func
(paren
id|st
comma
id|pr
comma
l_int|NULL
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_SETUP_ERR
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_t305
id|l3_1tr6_t305
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_struct
id|BufHeader
op_star
id|dibh
suffix:semicolon
id|byte
op_star
id|p
suffix:semicolon
id|byte
id|cause
op_assign
l_int|0x90
suffix:semicolon
id|byte
id|clen
op_assign
l_int|1
suffix:semicolon
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;pa-&gt;cause
OG
l_int|0
)paren
id|cause
op_assign
id|st-&gt;pa-&gt;cause
suffix:semicolon
multiline_comment|/* Map DSS1 causes */
r_switch
c_cond
(paren
id|cause
op_amp
l_int|0x7f
)paren
(brace
r_case
l_int|0x10
suffix:colon
id|clen
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x15
suffix:colon
id|cause
op_assign
id|CAUSE_CallRejected
suffix:semicolon
r_break
suffix:semicolon
)brace
id|BufPoolGet
c_func
(paren
op_amp
id|dibh
comma
id|st-&gt;l1.sbufpool
comma
id|GFP_ATOMIC
comma
(paren
r_void
op_star
)paren
id|st
comma
l_int|20
)paren
suffix:semicolon
id|p
op_assign
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|p
op_add_assign
id|st-&gt;l2.ihsize
suffix:semicolon
id|MsgHead
c_func
(paren
id|p
comma
id|st-&gt;l3.callref
comma
id|MT_N1_REL
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|WE0_cause
suffix:semicolon
op_star
id|p
op_increment
op_assign
id|clen
suffix:semicolon
multiline_comment|/* Laenge */
r_if
c_cond
(paren
id|clen
)paren
op_star
id|p
op_increment
op_assign
id|cause
suffix:semicolon
id|dibh-&gt;datasize
op_assign
id|p
op_minus
id|DATAPTR
c_func
(paren
id|dibh
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|19
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l2
c_func
(paren
id|st
comma
id|DL_DATA
comma
id|dibh
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t308
comma
id|CC_T308_1
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_t310
id|l3_1tr6_t310
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|st-&gt;pa-&gt;cause
op_assign
l_int|0xE6
suffix:semicolon
id|l3_1tr6_disconnect_req
c_func
(paren
id|st
comma
id|pr
comma
l_int|NULL
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_SETUP_ERR
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_t313
id|l3_1tr6_t313
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|st-&gt;pa-&gt;cause
op_assign
l_int|0xE6
suffix:semicolon
id|l3_1tr6_disconnect_req
c_func
(paren
id|st
comma
id|pr
comma
l_int|NULL
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_CONNECT_ERR
comma
l_int|NULL
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_t308_1
id|l3_1tr6_t308_1
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|l3_1TR6_message
c_func
(paren
id|st
comma
id|MT_N1_REL
comma
id|PROTO_DIS_N1
)paren
suffix:semicolon
id|L3AddTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
comma
id|st-&gt;l3.t308
comma
id|CC_T308_2
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|19
)paren
suffix:semicolon
)brace
r_static
r_void
DECL|function|l3_1tr6_t308_2
id|l3_1tr6_t308_2
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
id|byte
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
id|L3DelTimer
c_func
(paren
op_amp
id|st-&gt;l3.timer
)paren
suffix:semicolon
id|st-&gt;l3
dot
id|l3l4
c_func
(paren
id|st
comma
id|CC_RELEASE_ERR
comma
l_int|NULL
)paren
suffix:semicolon
id|newl3state
c_func
(paren
id|st
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|variable|downstl
r_static
r_struct
id|stateentry
id|downstl
(braket
)braket
op_assign
(brace
(brace
id|SBIT
c_func
(paren
l_int|0
)paren
comma
id|CC_SETUP_REQ
comma
id|l3_1tr6_setup_req
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|1
)paren
op_or
id|SBIT
c_func
(paren
l_int|2
)paren
op_or
id|SBIT
c_func
(paren
l_int|3
)paren
op_or
id|SBIT
c_func
(paren
l_int|4
)paren
op_or
id|SBIT
c_func
(paren
l_int|6
)paren
op_or
id|SBIT
c_func
(paren
l_int|7
)paren
op_or
id|SBIT
c_func
(paren
l_int|8
)paren
op_or
id|SBIT
c_func
(paren
l_int|10
)paren
comma
id|CC_DISCONNECT_REQ
comma
id|l3_1tr6_disconnect_req
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|12
)paren
comma
id|CC_RELEASE_REQ
comma
id|l3_1tr6_release_req
)brace
comma
(brace
id|ALL_STATES
comma
id|CC_DLRL
comma
id|l3_1tr6_reset
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|6
)paren
comma
id|CC_IGNORE
comma
id|l3_1tr6_reset
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|6
)paren
comma
id|CC_REJECT_REQ
comma
id|l3_1tr6_disconnect_req
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|6
)paren
comma
id|CC_ALERTING_REQ
comma
id|l3_1tr6_alert_req
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|6
)paren
op_or
id|SBIT
c_func
(paren
l_int|7
)paren
comma
id|CC_SETUP_RSP
comma
id|l3_1tr6_setup_rsp
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|1
)paren
comma
id|CC_T303
comma
id|l3_1tr6_t303
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|2
)paren
comma
id|CC_T304
comma
id|l3_1tr6_t304
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|3
)paren
comma
id|CC_T310
comma
id|l3_1tr6_t310
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|8
)paren
comma
id|CC_T313
comma
id|l3_1tr6_t313
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|11
)paren
comma
id|CC_T305
comma
id|l3_1tr6_t305
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|19
)paren
comma
id|CC_T308_1
comma
id|l3_1tr6_t308_1
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|19
)paren
comma
id|CC_T308_2
comma
id|l3_1tr6_t308_2
)brace
comma
)brace
suffix:semicolon
DECL|variable|downstl_len
r_static
r_int
id|downstl_len
op_assign
r_sizeof
(paren
id|downstl
)paren
op_div
r_sizeof
(paren
r_struct
id|stateentry
)paren
suffix:semicolon
DECL|variable|datastln1
r_static
r_struct
id|stateentry
id|datastln1
(braket
)braket
op_assign
(brace
(brace
id|SBIT
c_func
(paren
l_int|0
)paren
comma
id|MT_N1_SETUP
comma
id|l3_1tr6_setup
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|1
)paren
comma
id|MT_N1_SETUP_ACK
comma
id|l3_1tr6_setup_ack
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|1
)paren
op_or
id|SBIT
c_func
(paren
l_int|2
)paren
comma
id|MT_N1_CALL_SENT
comma
id|l3_1tr6_call_sent
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|1
)paren
op_or
id|SBIT
c_func
(paren
l_int|2
)paren
op_or
id|SBIT
c_func
(paren
l_int|3
)paren
op_or
id|SBIT
c_func
(paren
l_int|4
)paren
op_or
id|SBIT
c_func
(paren
l_int|7
)paren
op_or
id|SBIT
c_func
(paren
l_int|8
)paren
op_or
id|SBIT
c_func
(paren
l_int|10
)paren
comma
id|MT_N1_DISC
comma
id|l3_1tr6_disc
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|2
)paren
op_or
id|SBIT
c_func
(paren
l_int|3
)paren
op_or
id|SBIT
c_func
(paren
l_int|4
)paren
comma
id|MT_N1_ALERT
comma
id|l3_1tr6_alert
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|2
)paren
op_or
id|SBIT
c_func
(paren
l_int|3
)paren
op_or
id|SBIT
c_func
(paren
l_int|4
)paren
comma
id|MT_N1_CONN
comma
id|l3_1tr6_connect
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|2
)paren
comma
id|MT_N1_INFO
comma
id|l3_1tr6_info_s2
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|8
)paren
comma
id|MT_N1_CONN_ACK
comma
id|l3_1tr6_connect_ack
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|10
)paren
comma
id|MT_N1_INFO
comma
id|l3_1tr6_info
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|0
)paren
op_or
id|SBIT
c_func
(paren
l_int|1
)paren
op_or
id|SBIT
c_func
(paren
l_int|2
)paren
op_or
id|SBIT
c_func
(paren
l_int|3
)paren
op_or
id|SBIT
c_func
(paren
l_int|4
)paren
op_or
id|SBIT
c_func
(paren
l_int|7
)paren
op_or
id|SBIT
c_func
(paren
l_int|8
)paren
op_or
id|SBIT
c_func
(paren
l_int|10
)paren
op_or
id|SBIT
c_func
(paren
l_int|11
)paren
op_or
id|SBIT
c_func
(paren
l_int|12
)paren
op_or
id|SBIT
c_func
(paren
l_int|15
)paren
op_or
id|SBIT
c_func
(paren
l_int|17
)paren
op_or
id|SBIT
c_func
(paren
l_int|19
)paren
comma
id|MT_N1_REL
comma
id|l3_1tr6_rel
)brace
comma
(brace
id|SBIT
c_func
(paren
l_int|19
)paren
comma
id|MT_N1_REL_ACK
comma
id|l3_1tr6_rel_ack
)brace
)brace
suffix:semicolon
DECL|variable|datastln1_len
r_static
r_int
id|datastln1_len
op_assign
r_sizeof
(paren
id|datastln1
)paren
op_div
r_sizeof
(paren
r_struct
id|stateentry
)paren
suffix:semicolon
r_static
r_void
DECL|function|up1tr6
id|up1tr6
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_int
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_int
id|i
comma
id|mt
comma
id|size
suffix:semicolon
id|byte
op_star
id|ptr
suffix:semicolon
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
r_char
id|tmp
(braket
l_int|80
)braket
suffix:semicolon
r_if
c_cond
(paren
id|pr
op_eq
id|DL_DATA
)paren
(brace
id|ptr
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|ptr
op_add_assign
id|st-&gt;l2.ihsize
suffix:semicolon
id|size
op_assign
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.ihsize
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pr
op_eq
id|DL_UNIT_DATA
)paren
(brace
id|ptr
op_assign
id|DATAPTR
c_func
(paren
id|ibh
)paren
suffix:semicolon
id|ptr
op_add_assign
id|st-&gt;l2.uihsize
suffix:semicolon
id|size
op_assign
id|ibh-&gt;datasize
op_minus
id|st-&gt;l2.uihsize
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_WARN
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;up1tr6 unknown data typ %d state %d&quot;
comma
id|pr
comma
id|st-&gt;l3.state
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
(paren
id|ptr
(braket
l_int|0
)braket
op_amp
l_int|0xfe
)paren
op_ne
id|PROTO_DIS_N0
)paren
(brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_PROTERR
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;up1tr6%sunexpected discriminator %x message len %d state %d&quot;
comma
(paren
id|pr
op_eq
id|DL_DATA
)paren
ques
c_cond
l_string|&quot; &quot;
suffix:colon
l_string|&quot;(broadcast) &quot;
comma
id|ptr
(braket
l_int|0
)braket
comma
id|size
comma
id|st-&gt;l3.state
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|mt
op_assign
id|ptr
(braket
l_int|3
)braket
suffix:semicolon
r_if
c_cond
(paren
id|ptr
(braket
l_int|0
)braket
op_eq
id|PROTO_DIS_N0
)paren
(brace
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_STATE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;up1tr6%s N0 state %d mt %x unhandled&quot;
comma
(paren
id|pr
op_eq
id|DL_DATA
)paren
ques
c_cond
l_string|&quot; &quot;
suffix:colon
l_string|&quot;(broadcast) &quot;
comma
id|st-&gt;l3.state
comma
id|mt
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
)brace
r_else
r_if
c_cond
(paren
id|ptr
(braket
l_int|0
)braket
op_eq
id|PROTO_DIS_N1
)paren
(brace
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|datastln1_len
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
(paren
id|mt
op_eq
id|datastln1
(braket
id|i
)braket
dot
id|primitive
)paren
op_logical_and
(paren
(paren
l_int|1
op_lshift
id|st-&gt;l3.state
)paren
op_amp
id|datastln1
(braket
id|i
)braket
dot
id|state
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|i
op_eq
id|datastln1_len
)paren
(brace
id|BufPoolRelease
c_func
(paren
id|ibh
)paren
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_STATE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;up1tr6%sstate %d mt %x unhandled&quot;
comma
(paren
id|pr
op_eq
id|DL_DATA
)paren
ques
c_cond
l_string|&quot; &quot;
suffix:colon
l_string|&quot;(broadcast) &quot;
comma
id|st-&gt;l3.state
comma
id|mt
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_STATE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;up1tr6%sstate %d mt %x&quot;
comma
(paren
id|pr
op_eq
id|DL_DATA
)paren
ques
c_cond
l_string|&quot; &quot;
suffix:colon
l_string|&quot;(broadcast) &quot;
comma
id|st-&gt;l3.state
comma
id|mt
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
id|datastln1
(braket
id|i
)braket
dot
id|rout
c_func
(paren
id|st
comma
id|pr
comma
id|ibh
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
r_void
DECL|function|down1tr6
id|down1tr6
c_func
(paren
r_struct
id|PStack
op_star
id|st
comma
r_int
id|pr
comma
r_void
op_star
id|arg
)paren
(brace
r_int
id|i
suffix:semicolon
r_struct
id|BufHeader
op_star
id|ibh
op_assign
id|arg
suffix:semicolon
r_char
id|tmp
(braket
l_int|80
)braket
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|downstl_len
suffix:semicolon
id|i
op_increment
)paren
r_if
c_cond
(paren
(paren
id|pr
op_eq
id|downstl
(braket
id|i
)braket
dot
id|primitive
)paren
op_logical_and
(paren
(paren
l_int|1
op_lshift
id|st-&gt;l3.state
)paren
op_amp
id|downstl
(braket
id|i
)braket
dot
id|state
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|i
op_eq
id|downstl_len
)paren
(brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_STATE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;down1tr6 state %d prim %d unhandled&quot;
comma
id|st-&gt;l3.state
comma
id|pr
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
r_if
c_cond
(paren
id|st-&gt;l3.debug
op_amp
id|L3_DEB_STATE
)paren
(brace
id|sprintf
c_func
(paren
id|tmp
comma
l_string|&quot;down1tr6 state %d prim %d&quot;
comma
id|st-&gt;l3.state
comma
id|pr
)paren
suffix:semicolon
id|l3_debug
c_func
(paren
id|st
comma
id|tmp
)paren
suffix:semicolon
)brace
id|downstl
(braket
id|i
)braket
dot
id|rout
c_func
(paren
id|st
comma
id|pr
comma
id|ibh
)paren
suffix:semicolon
)brace
)brace
r_void
DECL|function|setstack_1tr6
id|setstack_1tr6
c_func
(paren
r_struct
id|PStack
op_star
id|st
)paren
(brace
r_char
id|tmp
(braket
l_int|64
)braket
suffix:semicolon
id|st-&gt;l4.l4l3
op_assign
id|down1tr6
suffix:semicolon
id|st-&gt;l2.l2l3
op_assign
id|up1tr6
suffix:semicolon
id|st-&gt;l3.t303
op_assign
l_int|4000
suffix:semicolon
id|st-&gt;l3.t304
op_assign
l_int|20000
suffix:semicolon
id|st-&gt;l3.t305
op_assign
l_int|4000
suffix:semicolon
id|st-&gt;l3.t308
op_assign
l_int|4000
suffix:semicolon
id|st-&gt;l3.t310
op_assign
l_int|120000
suffix:semicolon
id|st-&gt;l3.t313
op_assign
l_int|4000
suffix:semicolon
id|st-&gt;l3.t318
op_assign
l_int|4000
suffix:semicolon
id|st-&gt;l3.t319
op_assign
l_int|4000
suffix:semicolon
id|st-&gt;l3.n_t303
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|st-&gt;l3.channr
op_amp
l_int|1
)paren
(brace
id|strcpy
c_func
(paren
id|tmp
comma
id|l3_1tr6_revision
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_NOTICE
l_string|&quot;HiSax: 1TR6 Rev. %s&bslash;n&quot;
comma
id|HiSax_getrev
c_func
(paren
id|tmp
)paren
)paren
suffix:semicolon
)brace
)brace
eof
