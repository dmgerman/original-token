multiline_comment|/* $Id$&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Branch and jump emulation.&n; *&n; * Copyright (C) 1996, 1997, 1998, 1999 by Ralf Baechle&n; */
macro_line|#include &lt;asm/ptrace.h&gt;
DECL|function|delay_slot
r_extern
r_inline
r_int
id|delay_slot
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_return
id|regs-&gt;cp0_cause
op_amp
id|CAUSEF_BD
suffix:semicolon
)brace
r_extern
r_int
id|__compute_return_epc
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
DECL|function|compute_return_epc
r_extern
r_inline
r_int
id|compute_return_epc
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|delay_slot
c_func
(paren
id|regs
)paren
)paren
(brace
id|regs-&gt;cp0_epc
op_add_assign
l_int|4
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_return
id|__compute_return_epc
c_func
(paren
id|regs
)paren
suffix:semicolon
)brace
eof
