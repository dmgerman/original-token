macro_line|#ifdef __KERNEL__
macro_line|#ifndef _ASM_PCI_BRIDGE_H
DECL|macro|_ASM_PCI_BRIDGE_H
mdefine_line|#define _ASM_PCI_BRIDGE_H
r_void
id|pmac_find_bridges
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/*&n; * pci_io_base returns the memory address at which you can access&n; * the I/O space for PCI bus number `bus&squot; (or NULL on error).&n; * &n; * NOTE: This doesn&squot;t handle the new Uni-N chip which requires&n; *       per-device io_base. &n; */
r_void
op_star
id|pci_io_base
c_func
(paren
r_int
r_int
id|bus
)paren
suffix:semicolon
multiline_comment|/* This version handles the new Uni-N host bridge, the iobase is now&n; * a per-device thing. I also added the memory base so PReP can&n; * be fixed to return 0xc0000000 (I didn&squot;t actually implement it)&n; *&n; * pci_dev_io_base() returns either a virtual (ioremap&squot;ed) address or&n; * a physical address. In-kernel clients will use logical while the&n; * sys_pciconfig_iobase syscall returns a physical one to userland.&n; */
r_void
op_star
id|pci_dev_io_base
c_func
(paren
r_int
r_char
id|bus
comma
r_int
r_char
id|devfn
comma
r_int
id|physical
)paren
suffix:semicolon
r_void
op_star
id|pci_dev_mem_base
c_func
(paren
r_int
r_char
id|bus
comma
r_int
r_char
id|devfn
)paren
suffix:semicolon
multiline_comment|/* Returns the root-bridge number (Uni-N number) of a device */
r_int
id|pci_dev_root_bridge
c_func
(paren
r_int
r_char
id|bus
comma
r_int
r_char
id|devfn
)paren
suffix:semicolon
multiline_comment|/*&n; * pci_device_loc returns the bus number and device/function number&n; * for a device on a PCI bus, given its device_node struct.&n; * It returns 0 if OK, -1 on error.&n; */
r_int
id|pci_device_loc
c_func
(paren
r_struct
id|device_node
op_star
id|dev
comma
r_int
r_char
op_star
id|bus_ptr
comma
r_int
r_char
op_star
id|devfn_ptr
)paren
suffix:semicolon
DECL|struct|bridge_data
r_struct
id|bridge_data
(brace
DECL|member|cfg_addr
r_volatile
r_int
r_int
op_star
id|cfg_addr
suffix:semicolon
DECL|member|cfg_data
r_volatile
r_int
r_char
op_star
id|cfg_data
suffix:semicolon
DECL|member|io_base
r_void
op_star
id|io_base
suffix:semicolon
multiline_comment|/* virtual */
DECL|member|io_base_phys
r_int
r_int
id|io_base_phys
suffix:semicolon
DECL|member|bus_number
r_int
id|bus_number
suffix:semicolon
DECL|member|max_bus
r_int
id|max_bus
suffix:semicolon
DECL|member|next
r_struct
id|bridge_data
op_star
id|next
suffix:semicolon
DECL|member|node
r_struct
id|device_node
op_star
id|node
suffix:semicolon
)brace
suffix:semicolon
macro_line|#endif
macro_line|#endif /* __KERNEL__ */
eof
