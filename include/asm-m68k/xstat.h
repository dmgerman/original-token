multiline_comment|/* $Id: xstat.h,v 1.1 1998/02/06 12:51:30 jj Exp $&n; * xstat.h: sys_xstat/xmknod architecture dependent stuff.&n; *&n; * Copyright (C) 1998  Jakub Jelinek  (jj@sunsite.mff.cuni.cz)&n; */
DECL|function|cp_xstat
r_extern
id|__inline__
r_int
id|cp_xstat
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|stat64
op_star
id|s
comma
r_int
r_int
id|blocks
comma
r_int
id|blksize
)paren
(brace
r_struct
id|stat64
id|tmp
suffix:semicolon
id|memset
(paren
op_amp
id|tmp
comma
l_int|0
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|tmp.st_dev.major
op_assign
id|MAJOR
c_func
(paren
id|inode-&gt;i_dev
)paren
suffix:semicolon
id|tmp.st_dev.minor
op_assign
id|MINOR
c_func
(paren
id|inode-&gt;i_dev
)paren
suffix:semicolon
id|tmp.st_ino
op_assign
id|inode-&gt;i_ino
suffix:semicolon
id|tmp.st_mode
op_assign
id|inode-&gt;i_mode
suffix:semicolon
id|tmp.st_nlink
op_assign
id|inode-&gt;i_nlink
suffix:semicolon
id|tmp.st_uid
op_assign
id|inode-&gt;i_uid
suffix:semicolon
id|tmp.st_gid
op_assign
id|inode-&gt;i_gid
suffix:semicolon
id|tmp.st_rdev.major
op_assign
id|MAJOR
c_func
(paren
id|inode-&gt;i_rdev
)paren
suffix:semicolon
id|tmp.st_rdev.minor
op_assign
id|MINOR
c_func
(paren
id|inode-&gt;i_rdev
)paren
suffix:semicolon
id|tmp.st_size
op_assign
id|inode-&gt;i_size
suffix:semicolon
id|tmp.st_blksize
op_assign
id|blksize
suffix:semicolon
id|tmp.st_blocks
op_assign
id|blocks
suffix:semicolon
id|tmp.st_atime
op_assign
id|inode-&gt;i_atime
suffix:semicolon
id|tmp.st_mtime
op_assign
id|inode-&gt;i_mtime
suffix:semicolon
id|tmp.st_ctime
op_assign
id|inode-&gt;i_ctime
suffix:semicolon
r_return
id|copy_to_user
c_func
(paren
id|s
comma
op_amp
id|tmp
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
)brace
DECL|function|get_user_new_dev_t
r_extern
id|__inline__
r_int
id|get_user_new_dev_t
c_func
(paren
id|kdev_t
op_star
id|kdev
comma
id|__new_dev_t
op_star
id|udev
)paren
(brace
id|__new_dev_t
id|ndev
suffix:semicolon
r_if
c_cond
(paren
id|copy_from_user
(paren
op_amp
id|ndev
comma
id|udev
comma
r_sizeof
(paren
id|__new_dev_t
)paren
)paren
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
op_star
id|kdev
op_assign
id|MKDEV
c_func
(paren
id|ndev.major
comma
id|ndev.minor
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
eof
