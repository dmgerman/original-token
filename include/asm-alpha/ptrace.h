macro_line|#ifndef _ASMAXP_PTRACE_H
DECL|macro|_ASMAXP_PTRACE_H
mdefine_line|#define _ASMAXP_PTRACE_H
multiline_comment|/*&n; * This struct defines the way the registers are stored on the&n; * kernel stack during a system call or other kernel entry&n; *&n; * NOTE! I want to minimize the overhead of system calls, so this&n; * struct has as little information as possible.  I does not have&n; *&n; *  - floating point regs: the kernel doesn&squot;t change those&n; *  - r9-15: saved by the C compiler&n; *&n; * This makes &quot;fork()&quot; and &quot;exec()&quot; a bit more complex, but should&n; * give us low system call latency.&n; */
DECL|struct|pt_regs
r_struct
id|pt_regs
(brace
DECL|member|r0
r_int
r_int
id|r0
suffix:semicolon
DECL|member|r1
r_int
r_int
id|r1
suffix:semicolon
DECL|member|r2
r_int
r_int
id|r2
suffix:semicolon
DECL|member|r3
r_int
r_int
id|r3
suffix:semicolon
DECL|member|r4
r_int
r_int
id|r4
suffix:semicolon
DECL|member|r5
r_int
r_int
id|r5
suffix:semicolon
DECL|member|r6
r_int
r_int
id|r6
suffix:semicolon
DECL|member|r7
r_int
r_int
id|r7
suffix:semicolon
DECL|member|r8
r_int
r_int
id|r8
suffix:semicolon
DECL|member|r19
r_int
r_int
id|r19
suffix:semicolon
DECL|member|r20
r_int
r_int
id|r20
suffix:semicolon
DECL|member|r21
r_int
r_int
id|r21
suffix:semicolon
DECL|member|r22
r_int
r_int
id|r22
suffix:semicolon
DECL|member|r23
r_int
r_int
id|r23
suffix:semicolon
DECL|member|r24
r_int
r_int
id|r24
suffix:semicolon
DECL|member|r25
r_int
r_int
id|r25
suffix:semicolon
DECL|member|r26
r_int
r_int
id|r26
suffix:semicolon
DECL|member|r27
r_int
r_int
id|r27
suffix:semicolon
DECL|member|r28
r_int
r_int
id|r28
suffix:semicolon
DECL|member|hae
r_int
r_int
id|hae
suffix:semicolon
multiline_comment|/* JRP - These are the values provided to a0-a2 by PALcode */
DECL|member|trap_a0
r_int
r_int
id|trap_a0
suffix:semicolon
DECL|member|trap_a1
r_int
r_int
id|trap_a1
suffix:semicolon
DECL|member|trap_a2
r_int
r_int
id|trap_a2
suffix:semicolon
multiline_comment|/* These are saved by PAL-code: */
DECL|member|ps
r_int
r_int
id|ps
suffix:semicolon
DECL|member|pc
r_int
r_int
id|pc
suffix:semicolon
DECL|member|gp
r_int
r_int
id|gp
suffix:semicolon
DECL|member|r16
r_int
r_int
id|r16
suffix:semicolon
DECL|member|r17
r_int
r_int
id|r17
suffix:semicolon
DECL|member|r18
r_int
r_int
id|r18
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/*&n; * This is the extended stack used by signal handlers and the context&n; * switcher: it&squot;s pushed after the normal &quot;struct pt_regs&quot;.&n; */
DECL|struct|switch_stack
r_struct
id|switch_stack
(brace
DECL|member|r9
r_int
r_int
id|r9
suffix:semicolon
DECL|member|r10
r_int
r_int
id|r10
suffix:semicolon
DECL|member|r11
r_int
r_int
id|r11
suffix:semicolon
DECL|member|r12
r_int
r_int
id|r12
suffix:semicolon
DECL|member|r13
r_int
r_int
id|r13
suffix:semicolon
DECL|member|r14
r_int
r_int
id|r14
suffix:semicolon
DECL|member|r15
r_int
r_int
id|r15
suffix:semicolon
DECL|member|r26
r_int
r_int
id|r26
suffix:semicolon
DECL|member|fp
r_int
r_int
id|fp
(braket
l_int|32
)braket
suffix:semicolon
multiline_comment|/* fp[31] is fpcr */
)brace
suffix:semicolon
macro_line|#ifdef __KERNEL__
DECL|macro|user_mode
mdefine_line|#define user_mode(regs) (((regs)-&gt;ps &amp; 8) != 0)
DECL|macro|instruction_pointer
mdefine_line|#define instruction_pointer(regs) ((regs)-&gt;pc)
r_extern
r_void
id|show_regs
c_func
(paren
r_struct
id|pt_regs
op_star
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
eof
