macro_line|#ifndef __ALPHA_MCPCIA__H__
DECL|macro|__ALPHA_MCPCIA__H__
mdefine_line|#define __ALPHA_MCPCIA__H__
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
multiline_comment|/*&n; * MCPCIA is the internal name for a core logic chipset which provides&n; * PCI access for the RAWHIDE family of systems.&n; *&n; * This file is based on:&n; *&n; * RAWHIDE System Programmer&squot;s Manual&n; * 16-May-96&n; * Rev. 1.4&n; *&n; */
multiline_comment|/*------------------------------------------------------------------------**&n;**                                                                        **&n;**  I/O procedures                                                   **&n;**                                                                        **&n;**      inport[b|w|t|l], outport[b|w|t|l] 8:16:24:32 IO xfers             **&n;**&t;inportbxt: 8 bits only                                            **&n;**      inport:    alias of inportw                                       **&n;**      outport:   alias of outportw                                      **&n;**                                                                        **&n;**      inmem[b|w|t|l], outmem[b|w|t|l] 8:16:24:32 ISA memory xfers       **&n;**&t;inmembxt: 8 bits only                                             **&n;**      inmem:    alias of inmemw                                         **&n;**      outmem:   alias of outmemw                                        **&n;**                                                                        **&n;**------------------------------------------------------------------------*/
multiline_comment|/* MCPCIA ADDRESS BIT DEFINITIONS&n; *&n; *  3 3 3 3|3 3 3 3|3 3 2 2|2 2 2 2|2 2 2 2|1 1 1 1|1 1 1 1|1 1 &n; *  9 8 7 6|5 4 3 2|1 0 9 8|7 6 5 4|3 2 1 0|9 8 7 6|5 4 3 2|1 0 9 8|7 6 5 4|3 2 1 0&n; * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+&n; * |1| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |0|0|0|&n; * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ &n; *  |                                                                        &bslash;_/ &bslash;_/&n; *  |                                                                         |   |&n; *  +-- IO space, not cached.                                   Byte Enable --+   |&n; *                                                              Transfer Length --+&n; *&n; *&n; *&n; *   Byte      Transfer&n; *   Enable    Length    Transfer  Byte    Address&n; *   adr&lt;6:5&gt;  adr&lt;4:3&gt;  Length    Enable  Adder&n; *   ---------------------------------------------&n; *      00        00      Byte      1110   0x000&n; *      01        00      Byte      1101   0x020&n; *      10        00      Byte      1011   0x040&n; *      11        00      Byte      0111   0x060&n; *&n; *      00        01      Word      1100   0x008&n; *      01        01      Word      1001   0x028 &lt;= Not supported in this code.&n; *      10        01      Word      0011   0x048&n; *&n; *      00        10      Tribyte   1000   0x010&n; *      01        10      Tribyte   0001   0x030&n; *&n; *      10        11      Longword  0000   0x058&n; *&n; *      Note that byte enables are asserted low.&n; *&n; */
DECL|macro|BYTE_ENABLE_SHIFT
mdefine_line|#define BYTE_ENABLE_SHIFT 5
DECL|macro|TRANSFER_LENGTH_SHIFT
mdefine_line|#define TRANSFER_LENGTH_SHIFT 3
DECL|macro|MEM_R1_MASK
mdefine_line|#define MEM_R1_MASK 0x1fffffff  /* SPARSE Mem region 1 mask is 29 bits */
DECL|macro|MEM_R2_MASK
mdefine_line|#define MEM_R2_MASK 0x07ffffff  /* SPARSE Mem region 2 mask is 27 bits */
DECL|macro|MEM_R3_MASK
mdefine_line|#define MEM_R3_MASK 0x03ffffff  /* SPARSE Mem region 3 mask is 26 bits */
macro_line|#ifdef CONFIG_ALPHA_SRM_SETUP
multiline_comment|/* if we are using the SRM PCI setup, we&squot;ll need to use variables instead */
DECL|macro|MCPCIA_DMA_WIN_BASE_DEFAULT
mdefine_line|#define MCPCIA_DMA_WIN_BASE_DEFAULT    (2*1024*1024*1024U)
DECL|macro|MCPCIA_DMA_WIN_SIZE_DEFAULT
mdefine_line|#define MCPCIA_DMA_WIN_SIZE_DEFAULT    (2*1024*1024*1024U)
r_extern
r_int
r_int
id|MCPCIA_DMA_WIN_BASE
suffix:semicolon
r_extern
r_int
r_int
id|MCPCIA_DMA_WIN_SIZE
suffix:semicolon
macro_line|#else /* SRM_SETUP */
DECL|macro|MCPCIA_DMA_WIN_BASE
mdefine_line|#define MCPCIA_DMA_WIN_BASE&t;(2*1024*1024*1024UL)
DECL|macro|MCPCIA_DMA_WIN_SIZE
mdefine_line|#define MCPCIA_DMA_WIN_SIZE&t;(2*1024*1024*1024UL)
macro_line|#endif /* SRM_SETUP */
DECL|macro|HOSE
mdefine_line|#define HOSE(h) (((unsigned long)(h)) &lt;&lt; 33)
multiline_comment|/*&n; *  General Registers&n; */
DECL|macro|MCPCIA_REV
mdefine_line|#define MCPCIA_REV(h)&t;&t;(IDENT_ADDR + 0xf9e0000000UL + HOSE(h))
DECL|macro|MCPCIA_WHOAMI
mdefine_line|#define MCPCIA_WHOAMI(h)&t;(IDENT_ADDR + 0xf9e0000040UL + HOSE(h))
DECL|macro|MCPCIA_PCI_LAT
mdefine_line|#define MCPCIA_PCI_LAT(h)&t;(IDENT_ADDR + 0xf9e0000080UL + HOSE(h))
DECL|macro|MCPCIA_CAP_CTRL
mdefine_line|#define MCPCIA_CAP_CTRL(h)&t;(IDENT_ADDR + 0xf9e0000100UL + HOSE(h))
DECL|macro|MCPCIA_HAE_MEM
mdefine_line|#define MCPCIA_HAE_MEM(h)&t;(IDENT_ADDR + 0xf9e0000400UL + HOSE(h))
DECL|macro|MCPCIA_HAE_IO
mdefine_line|#define MCPCIA_HAE_IO(h)&t;(IDENT_ADDR + 0xf9e0000440UL + HOSE(h))
macro_line|#if 0
mdefine_line|#define MCPCIA_IACK_SC(h)&t;(IDENT_ADDR + 0xf9e0000480UL + HOSE(h))
macro_line|#endif
DECL|macro|MCPCIA_HAE_DENSE
mdefine_line|#define MCPCIA_HAE_DENSE(h)&t;(IDENT_ADDR + 0xf9e00004c0UL + HOSE(h))
multiline_comment|/*&n; * Interrupt Control registers&n; */
DECL|macro|MCPCIA_INT_CTL
mdefine_line|#define MCPCIA_INT_CTL(h)&t;(IDENT_ADDR + 0xf9e0000500UL + HOSE(h))
DECL|macro|MCPCIA_INT_REQ
mdefine_line|#define MCPCIA_INT_REQ(h)&t;(IDENT_ADDR + 0xf9e0000540UL + HOSE(h))
DECL|macro|MCPCIA_INT_TARG
mdefine_line|#define MCPCIA_INT_TARG(h)&t;(IDENT_ADDR + 0xf9e0000580UL + HOSE(h))
DECL|macro|MCPCIA_INT_ADR
mdefine_line|#define MCPCIA_INT_ADR(h)&t;(IDENT_ADDR + 0xf9e00005c0UL + HOSE(h))
DECL|macro|MCPCIA_INT_ADR_EXT
mdefine_line|#define MCPCIA_INT_ADR_EXT(h)&t;(IDENT_ADDR + 0xf9e0000600UL + HOSE(h))
DECL|macro|MCPCIA_INT_MASK0
mdefine_line|#define MCPCIA_INT_MASK0(h)&t;(IDENT_ADDR + 0xf9e0000640UL + HOSE(h))
DECL|macro|MCPCIA_INT_MASK1
mdefine_line|#define MCPCIA_INT_MASK1(h)&t;(IDENT_ADDR + 0xf9e0000680UL + HOSE(h))
DECL|macro|MCPCIA_INT_ACK0
mdefine_line|#define MCPCIA_INT_ACK0(h)&t;(IDENT_ADDR + 0xf9f0003f00UL + HOSE(h))
DECL|macro|MCPCIA_INT_ACK1
mdefine_line|#define MCPCIA_INT_ACK1(h)&t;(IDENT_ADDR + 0xf9e0003f40UL + HOSE(h))
multiline_comment|/*&n; * Performance Monitor registers&n; */
DECL|macro|MCPCIA_PERF_MONITOR
mdefine_line|#define MCPCIA_PERF_MONITOR(h)&t;(IDENT_ADDR + 0xf9e0000300UL + HOSE(h))
DECL|macro|MCPCIA_PERF_CONTROL
mdefine_line|#define MCPCIA_PERF_CONTROL(h)&t;(IDENT_ADDR + 0xf9e0000340UL + HOSE(h))
multiline_comment|/*&n; * Diagnostic Registers&n; */
DECL|macro|MCPCIA_CAP_DIAG
mdefine_line|#define MCPCIA_CAP_DIAG(h)&t;(IDENT_ADDR + 0xf9e0000700UL + HOSE(h))
DECL|macro|MCPCIA_TOP_OF_MEM
mdefine_line|#define MCPCIA_TOP_OF_MEM(h)&t;(IDENT_ADDR + 0xf9e00007c0UL + HOSE(h))
multiline_comment|/*&n; * Error registers&n; */
DECL|macro|MCPCIA_CAP_ERR
mdefine_line|#define MCPCIA_CAP_ERR(h)&t;(IDENT_ADDR + 0xf9e0000880UL + HOSE(h))
DECL|macro|MCPCIA_PCI_ERR1
mdefine_line|#define MCPCIA_PCI_ERR1(h)&t;(IDENT_ADDR + 0xf9e0001040UL + HOSE(h))
multiline_comment|/*&n; * PCI Address Translation Registers.&n; */
DECL|macro|MCPCIA_SG_TBIA
mdefine_line|#define MCPCIA_SG_TBIA(h)&t;(IDENT_ADDR + 0xf9e0001300UL + HOSE(h))
DECL|macro|MCPCIA_HBASE
mdefine_line|#define MCPCIA_HBASE(h)&t;&t;(IDENT_ADDR + 0xf9e0001340UL + HOSE(h))
DECL|macro|MCPCIA_W0_BASE
mdefine_line|#define MCPCIA_W0_BASE(h)&t;(IDENT_ADDR + 0xf9e0001400UL + HOSE(h))
DECL|macro|MCPCIA_W0_MASK
mdefine_line|#define MCPCIA_W0_MASK(h)&t;(IDENT_ADDR + 0xf9e0001440UL + HOSE(h))
DECL|macro|MCPCIA_T0_BASE
mdefine_line|#define MCPCIA_T0_BASE(h)&t;(IDENT_ADDR + 0xf9e0001480UL + HOSE(h))
DECL|macro|MCPCIA_W1_BASE
mdefine_line|#define MCPCIA_W1_BASE(h)&t;(IDENT_ADDR + 0xf9e0001500UL + HOSE(h))
DECL|macro|MCPCIA_W1_MASK
mdefine_line|#define MCPCIA_W1_MASK(h)&t;(IDENT_ADDR + 0xf9e0001540UL + HOSE(h))
DECL|macro|MCPCIA_T1_BASE
mdefine_line|#define MCPCIA_T1_BASE(h)&t;(IDENT_ADDR + 0xf9e0001580UL + HOSE(h))
DECL|macro|MCPCIA_W2_BASE
mdefine_line|#define MCPCIA_W2_BASE(h)&t;(IDENT_ADDR + 0xf9e0001600UL + HOSE(h))
DECL|macro|MCPCIA_W2_MASK
mdefine_line|#define MCPCIA_W2_MASK(h)&t;(IDENT_ADDR + 0xf9e0001640UL + HOSE(h))
DECL|macro|MCPCIA_T2_BASE
mdefine_line|#define MCPCIA_T2_BASE(h)&t;(IDENT_ADDR + 0xf9e0001680UL + HOSE(h))
DECL|macro|MCPCIA_W3_BASE
mdefine_line|#define MCPCIA_W3_BASE(h)&t;(IDENT_ADDR + 0xf9e0001700UL + HOSE(h))
DECL|macro|MCPCIA_W3_MASK
mdefine_line|#define MCPCIA_W3_MASK(h)&t;(IDENT_ADDR + 0xf9e0001740UL + HOSE(h))
DECL|macro|MCPCIA_T3_BASE
mdefine_line|#define MCPCIA_T3_BASE(h)&t;(IDENT_ADDR + 0xf9e0001780UL + HOSE(h))
multiline_comment|/*&n; * Memory spaces:&n; */
DECL|macro|MCPCIA_CONF
mdefine_line|#define MCPCIA_CONF(h)&t;&t;(IDENT_ADDR + 0xf9c0000000UL + HOSE(h))
DECL|macro|MCPCIA_IO
mdefine_line|#define MCPCIA_IO(h)&t;&t;(IDENT_ADDR + 0xf980000000UL + HOSE(h))
DECL|macro|MCPCIA_SPARSE
mdefine_line|#define MCPCIA_SPARSE(h)&t;(IDENT_ADDR + 0xf800000000UL + HOSE(h))
DECL|macro|MCPCIA_DENSE
mdefine_line|#define MCPCIA_DENSE(h)&t;&t;(IDENT_ADDR + 0xf900000000UL + HOSE(h))
DECL|macro|MCPCIA_IACK_SC
mdefine_line|#define MCPCIA_IACK_SC(h)&t;(IDENT_ADDR + 0xf9f0003f00UL + HOSE(h))
DECL|macro|HAE_ADDRESS
mdefine_line|#define HAE_ADDRESS&t;&t;MCPCIA_HAE_MEM(0)
macro_line|#ifdef __KERNEL__
multiline_comment|/*&n; * Translate physical memory address as seen on (PCI) bus into&n; * a kernel virtual address and vv.&n; */
DECL|function|virt_to_bus
r_extern
r_inline
r_int
r_int
id|virt_to_bus
c_func
(paren
r_void
op_star
id|address
)paren
(brace
r_return
id|virt_to_phys
c_func
(paren
id|address
)paren
op_plus
id|MCPCIA_DMA_WIN_BASE
suffix:semicolon
)brace
DECL|function|bus_to_virt
r_extern
r_inline
r_void
op_star
id|bus_to_virt
c_func
(paren
r_int
r_int
id|address
)paren
(brace
r_return
id|phys_to_virt
c_func
(paren
id|address
op_minus
id|MCPCIA_DMA_WIN_BASE
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * I/O functions:&n; *&n; * MCPCIA, the RAWHIDE family PCI/memory support chipset for the EV5 (21164)&n; * and EV56 (21164a) processors, can use either a sparse address mapping&n; * scheme, or the so-called byte-word PCI address space, to get at PCI memory&n; * and I/O.&n; *&n; * Unfortunately, we can&squot;t use BWIO with EV5, so for now, we always use SPARSE.&n; */
DECL|macro|vuip
mdefine_line|#define vuip&t;volatile unsigned int *
macro_line|#ifdef DISABLE_BWIO_ENABLED
DECL|function|__inb
r_extern
r_inline
r_int
r_int
id|__inb
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_register
r_int
r_int
id|result
suffix:semicolon
id|__asm__
id|__volatile__
(paren
l_string|&quot;ldbu %0,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|result
)paren
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_char
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_IO
)paren
)paren
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|__outb
r_extern
r_inline
r_void
id|__outb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|addr
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;stb %1,%0&bslash;n&bslash;t&quot;
l_string|&quot;mb&quot;
suffix:colon
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_char
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_IO
)paren
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
DECL|function|__inw
r_extern
r_inline
r_int
r_int
id|__inw
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_register
r_int
r_int
id|result
suffix:semicolon
id|__asm__
id|__volatile__
(paren
l_string|&quot;ldwu %0,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|result
)paren
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_IO
)paren
)paren
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|__outw
r_extern
r_inline
r_void
id|__outw
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|addr
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;stw %1,%0&bslash;n&bslash;t&quot;
l_string|&quot;mb&quot;
suffix:colon
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_IO
)paren
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
DECL|function|__inl
r_extern
r_inline
r_int
r_int
id|__inl
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_register
r_int
r_int
id|result
suffix:semicolon
id|__asm__
id|__volatile__
(paren
l_string|&quot;ldl %0,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|result
)paren
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_IO
)paren
)paren
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|__outl
r_extern
r_inline
r_void
id|__outl
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|addr
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;stl %1,%0&bslash;n&bslash;t&quot;
l_string|&quot;mb&quot;
suffix:colon
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_IO
)paren
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
DECL|macro|inb
mdefine_line|#define inb(port) __inb((port))
DECL|macro|inw
mdefine_line|#define inw(port) __inw((port))
DECL|macro|inl
mdefine_line|#define inl(port) __inl((port))
DECL|macro|outb
mdefine_line|#define outb(x, port) __outb((x),(port))
DECL|macro|outw
mdefine_line|#define outw(x, port) __outw((x),(port))
DECL|macro|outl
mdefine_line|#define outl(x, port) __outl((x),(port))
macro_line|#else /* BWIO_ENABLED */
DECL|function|__inb
r_extern
r_inline
r_int
r_int
id|__inb
c_func
(paren
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
id|result
op_assign
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_IO
c_func
(paren
id|hose
)paren
op_plus
l_int|0x00
)paren
suffix:semicolon
id|result
op_rshift_assign
(paren
id|addr
op_amp
l_int|3
)paren
op_star
l_int|8
suffix:semicolon
r_return
l_int|0xffUL
op_amp
id|result
suffix:semicolon
)brace
DECL|function|__outb
r_extern
r_inline
r_void
id|__outb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|w
suffix:semicolon
id|asm
(paren
l_string|&quot;insbl %2,%1,%0&quot;
suffix:colon
l_string|&quot;r=&quot;
(paren
id|w
)paren
suffix:colon
l_string|&quot;ri&quot;
(paren
id|addr
op_amp
l_int|0x3
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_IO
c_func
(paren
id|hose
)paren
op_plus
l_int|0x00
)paren
op_assign
id|w
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|__inw
r_extern
r_inline
r_int
r_int
id|__inw
c_func
(paren
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
id|result
op_assign
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_IO
c_func
(paren
id|hose
)paren
op_plus
l_int|0x08
)paren
suffix:semicolon
id|result
op_rshift_assign
(paren
id|addr
op_amp
l_int|3
)paren
op_star
l_int|8
suffix:semicolon
r_return
l_int|0xffffUL
op_amp
id|result
suffix:semicolon
)brace
DECL|function|__outw
r_extern
r_inline
r_void
id|__outw
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|w
suffix:semicolon
id|asm
(paren
l_string|&quot;inswl %2,%1,%0&quot;
suffix:colon
l_string|&quot;r=&quot;
(paren
id|w
)paren
suffix:colon
l_string|&quot;ri&quot;
(paren
id|addr
op_amp
l_int|0x3
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_IO
c_func
(paren
id|hose
)paren
op_plus
l_int|0x08
)paren
op_assign
id|w
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|__inl
r_extern
r_inline
r_int
r_int
id|__inl
c_func
(paren
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_return
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_IO
c_func
(paren
id|hose
)paren
op_plus
l_int|0x18
)paren
suffix:semicolon
)brace
DECL|function|__outl
r_extern
r_inline
r_void
id|__outl
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_IO
c_func
(paren
id|hose
)paren
op_plus
l_int|0x18
)paren
op_assign
id|b
suffix:semicolon
id|mb
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|macro|inb
mdefine_line|#define inb(port) &bslash;&n;(__builtin_constant_p((port))?__inb(port):_inb(port))
DECL|macro|outb
mdefine_line|#define outb(x, port) &bslash;&n;(__builtin_constant_p((port))?__outb((x),(port)):_outb((x),(port)))
macro_line|#endif /* BWIO_ENABLED */
multiline_comment|/*&n; * Memory functions.  64-bit and 32-bit accesses are done through&n; * dense memory space, everything else through sparse space.&n; * &n; * For reading and writing 8 and 16 bit quantities we need to &n; * go through one of the three sparse address mapping regions&n; * and use the HAE_MEM CSR to provide some bits of the address.&n; * The following few routines use only sparse address region 1&n; * which gives 1Gbyte of accessible space which relates exactly&n; * to the amount of PCI memory mapping *into* system address space.&n; * See p 6-17 of the specification but it looks something like this:&n; *&n; * 21164 Address:&n; * &n; *          3         2         1&n; * 9876543210987654321098765432109876543210&n; * 1ZZZZ0.PCI.QW.Address............BBLL                 &n; *&n; * ZZ = SBZ&n; * BB = Byte offset&n; * LL = Transfer length&n; *&n; * PCI Address:&n; *&n; * 3         2         1&n; * 10987654321098765432109876543210&n; * HHH....PCI.QW.Address........ 00&n; *&n; * HHH = 31:29 HAE_MEM CSR&n; * &n; */
macro_line|#ifdef DISABLE_BWIO_ENABLED
DECL|function|__readb
r_extern
r_inline
r_int
r_int
id|__readb
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_register
r_int
r_int
id|result
suffix:semicolon
id|__asm__
id|__volatile__
(paren
l_string|&quot;ldbu %0,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|result
)paren
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_char
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_MEM
)paren
)paren
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|__readw
r_extern
r_inline
r_int
r_int
id|__readw
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_register
r_int
r_int
id|result
suffix:semicolon
id|__asm__
id|__volatile__
(paren
l_string|&quot;ldwu %0,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|result
)paren
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_MEM
)paren
)paren
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|__readl
r_extern
r_inline
r_int
r_int
id|__readl
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_register
r_int
r_int
id|result
suffix:semicolon
id|__asm__
id|__volatile__
(paren
l_string|&quot;ldl %0,%1&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|result
)paren
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_MEM
)paren
)paren
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
DECL|function|__writeb
r_extern
r_inline
r_void
id|__writeb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|addr
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;stb %1,%0&bslash;n&bslash;t&quot;
l_string|&quot;mb&quot;
suffix:colon
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_char
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_MEM
)paren
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
DECL|function|__writew
r_extern
r_inline
r_void
id|__writew
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|addr
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;stw %1,%0&bslash;n&bslash;t&quot;
l_string|&quot;mb&quot;
suffix:colon
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_MEM
)paren
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
DECL|function|__writel
r_extern
r_inline
r_void
id|__writel
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|addr
)paren
(brace
id|__asm__
id|__volatile__
(paren
l_string|&quot;stl %1,%0&bslash;n&bslash;t&quot;
l_string|&quot;mb&quot;
suffix:colon
suffix:colon
l_string|&quot;m&quot;
(paren
op_star
(paren
r_int
r_int
op_star
)paren
(paren
id|addr
op_plus
id|MCPCIA_BW_MEM
)paren
)paren
comma
l_string|&quot;r&quot;
(paren
id|b
)paren
)paren
suffix:semicolon
)brace
DECL|macro|readb
mdefine_line|#define readb(addr) __readb((addr))
DECL|macro|readw
mdefine_line|#define readw(addr) __readw((addr))
DECL|macro|writeb
mdefine_line|#define writeb(b, addr) __writeb((b),(addr))
DECL|macro|writew
mdefine_line|#define writew(b, addr) __writew((b),(addr))
macro_line|#else /* BWIO_ENABLED */
macro_line|#ifdef CONFIG_ALPHA_SRM_SETUP
r_extern
r_int
r_int
id|mcpcia_sm_base_r1
comma
id|mcpcia_sm_base_r2
comma
id|mcpcia_sm_base_r3
suffix:semicolon
DECL|function|__readb
r_extern
r_inline
r_int
r_int
id|__readb
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_int
r_int
id|result
comma
id|shift
comma
id|work
suffix:semicolon
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r1
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r1
op_plus
id|MEM_R1_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R1_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r2
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r2
op_plus
id|MEM_R2_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R2_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R2
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r3
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r3
op_plus
id|MEM_R3_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R3_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R3
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
(brace
macro_line|#if 0
id|printk
c_func
(paren
l_string|&quot;__readb: address 0x%lx not covered by HAE&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0x0ffUL
suffix:semicolon
)brace
id|shift
op_assign
(paren
id|addr
op_amp
l_int|0x3
)paren
op_lshift
l_int|3
suffix:semicolon
id|result
op_assign
op_star
(paren
id|vuip
)paren
id|work
suffix:semicolon
id|result
op_rshift_assign
id|shift
suffix:semicolon
r_return
l_int|0x0ffUL
op_amp
id|result
suffix:semicolon
)brace
DECL|function|__readw
r_extern
r_inline
r_int
r_int
id|__readw
c_func
(paren
r_int
r_int
id|addr
)paren
(brace
r_int
r_int
id|result
comma
id|shift
comma
id|work
suffix:semicolon
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r1
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r1
op_plus
id|MEM_R1_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R1_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM
op_plus
l_int|0x08
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r2
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r2
op_plus
id|MEM_R2_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R2_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R2
op_plus
l_int|0x08
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r3
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r3
op_plus
id|MEM_R3_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R3_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R3
op_plus
l_int|0x08
)paren
suffix:semicolon
r_else
(brace
macro_line|#if 0
id|printk
c_func
(paren
l_string|&quot;__readw: address 0x%lx not covered by HAE&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
macro_line|#endif
r_return
l_int|0x0ffffUL
suffix:semicolon
)brace
id|shift
op_assign
(paren
id|addr
op_amp
l_int|0x3
)paren
op_lshift
l_int|3
suffix:semicolon
id|result
op_assign
op_star
(paren
id|vuip
)paren
id|work
suffix:semicolon
id|result
op_rshift_assign
id|shift
suffix:semicolon
r_return
l_int|0x0ffffUL
op_amp
id|result
suffix:semicolon
)brace
DECL|function|__writeb
r_extern
r_inline
r_void
id|__writeb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|addr
)paren
(brace
r_int
r_int
id|work
suffix:semicolon
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r1
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r1
op_plus
id|MEM_R1_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R1_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r2
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r2
op_plus
id|MEM_R2_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R2_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R2
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r3
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r3
op_plus
id|MEM_R3_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R3_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R3
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
(brace
macro_line|#if 0
id|printk
c_func
(paren
l_string|&quot;__writeb: address 0x%lx not covered by HAE&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
macro_line|#endif
r_return
suffix:semicolon
)brace
op_star
(paren
id|vuip
)paren
id|work
op_assign
id|b
op_star
l_int|0x01010101
suffix:semicolon
)brace
DECL|function|__writew
r_extern
r_inline
r_void
id|__writew
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|addr
)paren
(brace
r_int
r_int
id|work
suffix:semicolon
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r1
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r1
op_plus
id|MEM_R1_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R1_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r2
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r2
op_plus
id|MEM_R2_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R2_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R2
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
(paren
id|addr
op_ge
id|mcpcia_sm_base_r3
)paren
op_logical_and
(paren
id|addr
op_le
(paren
id|mcpcia_sm_base_r3
op_plus
id|MEM_R3_MASK
)paren
)paren
)paren
id|work
op_assign
(paren
(paren
(paren
id|addr
op_amp
id|MEM_R3_MASK
)paren
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE_MEM_R3
op_plus
l_int|0x00
)paren
suffix:semicolon
r_else
(brace
macro_line|#if 0
id|printk
c_func
(paren
l_string|&quot;__writew: address 0x%lx not covered by HAE&bslash;n&quot;
comma
id|addr
)paren
suffix:semicolon
macro_line|#endif
r_return
suffix:semicolon
)brace
op_star
(paren
id|vuip
)paren
id|work
op_assign
id|b
op_star
l_int|0x00010001
suffix:semicolon
)brace
macro_line|#else /* SRM_SETUP */
DECL|function|__readb
r_extern
r_inline
r_int
r_int
id|__readb
c_func
(paren
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|result
comma
id|shift
comma
id|msb
comma
id|work
comma
id|temp
suffix:semicolon
id|shift
op_assign
(paren
id|addr
op_amp
l_int|0x3
)paren
op_lshift
l_int|3
suffix:semicolon
id|msb
op_assign
id|addr
op_amp
l_int|0xE0000000UL
suffix:semicolon
id|temp
op_assign
id|addr
op_amp
id|MEM_R1_MASK
suffix:semicolon
r_if
c_cond
(paren
id|msb
op_ne
id|hae.cache
)paren
(brace
id|set_hae
c_func
(paren
id|msb
)paren
suffix:semicolon
)brace
id|work
op_assign
(paren
(paren
id|temp
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE
c_func
(paren
id|hose
)paren
op_plus
l_int|0x00
)paren
suffix:semicolon
id|result
op_assign
op_star
(paren
id|vuip
)paren
id|work
suffix:semicolon
id|result
op_rshift_assign
id|shift
suffix:semicolon
r_return
l_int|0x0ffUL
op_amp
id|result
suffix:semicolon
)brace
DECL|function|__readw
r_extern
r_inline
r_int
r_int
id|__readw
c_func
(paren
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|result
comma
id|shift
comma
id|msb
comma
id|work
comma
id|temp
suffix:semicolon
id|shift
op_assign
(paren
id|addr
op_amp
l_int|0x3
)paren
op_lshift
l_int|3
suffix:semicolon
id|msb
op_assign
id|addr
op_amp
l_int|0xE0000000UL
suffix:semicolon
id|temp
op_assign
id|addr
op_amp
id|MEM_R1_MASK
suffix:semicolon
r_if
c_cond
(paren
id|msb
op_ne
id|hae.cache
)paren
(brace
id|set_hae
c_func
(paren
id|msb
)paren
suffix:semicolon
)brace
id|work
op_assign
(paren
(paren
id|temp
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE
c_func
(paren
id|hose
)paren
op_plus
l_int|0x08
)paren
suffix:semicolon
id|result
op_assign
op_star
(paren
id|vuip
)paren
id|work
suffix:semicolon
id|result
op_rshift_assign
id|shift
suffix:semicolon
r_return
l_int|0x0ffffUL
op_amp
id|result
suffix:semicolon
)brace
DECL|function|__writeb
r_extern
r_inline
r_void
id|__writeb
c_func
(paren
r_int
r_char
id|b
comma
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|msb
suffix:semicolon
id|msb
op_assign
id|addr
op_amp
l_int|0xE0000000
suffix:semicolon
id|addr
op_and_assign
id|MEM_R1_MASK
suffix:semicolon
r_if
c_cond
(paren
id|msb
op_ne
id|hae.cache
)paren
(brace
id|set_hae
c_func
(paren
id|msb
)paren
suffix:semicolon
)brace
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE
c_func
(paren
id|hose
)paren
op_plus
l_int|0x00
)paren
op_assign
id|b
op_star
l_int|0x01010101
suffix:semicolon
)brace
DECL|function|__writew
r_extern
r_inline
r_void
id|__writew
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_int
r_int
id|msb
suffix:semicolon
id|msb
op_assign
id|addr
op_amp
l_int|0xE0000000
suffix:semicolon
id|addr
op_and_assign
id|MEM_R1_MASK
suffix:semicolon
r_if
c_cond
(paren
id|msb
op_ne
id|hae.cache
)paren
(brace
id|set_hae
c_func
(paren
id|msb
)paren
suffix:semicolon
)brace
op_star
(paren
id|vuip
)paren
(paren
(paren
id|addr
op_lshift
l_int|5
)paren
op_plus
id|MCPCIA_SPARSE
c_func
(paren
id|hose
)paren
op_plus
l_int|0x08
)paren
op_assign
id|b
op_star
l_int|0x00010001
suffix:semicolon
)brace
macro_line|#endif /* SRM_SETUP */
DECL|function|__readl
r_extern
r_inline
r_int
r_int
id|__readl
c_func
(paren
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
r_return
op_star
(paren
id|vuip
)paren
(paren
id|addr
op_plus
id|MCPCIA_DENSE
c_func
(paren
id|hose
)paren
)paren
suffix:semicolon
)brace
DECL|function|__writel
r_extern
r_inline
r_void
id|__writel
c_func
(paren
r_int
r_int
id|b
comma
r_int
r_int
id|in_addr
)paren
(brace
r_int
r_int
id|addr
op_assign
id|in_addr
op_amp
l_int|0xffffffffUL
suffix:semicolon
r_int
r_int
id|hose
op_assign
(paren
id|in_addr
op_rshift
l_int|32
)paren
op_amp
l_int|3
suffix:semicolon
op_star
(paren
id|vuip
)paren
(paren
id|addr
op_plus
id|MCPCIA_DENSE
c_func
(paren
id|hose
)paren
)paren
op_assign
id|b
suffix:semicolon
)brace
macro_line|#endif /* BWIO_ENABLED */
DECL|macro|readl
mdefine_line|#define readl(a)&t;__readl((unsigned long)(a))
DECL|macro|writel
mdefine_line|#define writel(v,a)&t;__writel((v),(unsigned long)(a))
DECL|macro|vuip
macro_line|#undef vuip
DECL|struct|linux_hose_info
r_struct
id|linux_hose_info
(brace
DECL|member|pci_bus
r_struct
id|pci_bus
id|pci_bus
suffix:semicolon
DECL|member|next
r_struct
id|linux_hose_info
op_star
id|next
suffix:semicolon
DECL|member|pci_io_space
r_int
r_int
id|pci_io_space
suffix:semicolon
DECL|member|pci_mem_space
r_int
r_int
id|pci_mem_space
suffix:semicolon
DECL|member|pci_config_space
r_int
r_int
id|pci_config_space
suffix:semicolon
DECL|member|pci_sparse_space
r_int
r_int
id|pci_sparse_space
suffix:semicolon
DECL|member|pci_first_busno
r_int
r_int
id|pci_first_busno
suffix:semicolon
DECL|member|pci_last_busno
r_int
r_int
id|pci_last_busno
suffix:semicolon
DECL|member|pci_hose_index
r_int
r_int
id|pci_hose_index
suffix:semicolon
)brace
suffix:semicolon
r_extern
r_int
r_int
id|mcpcia_init
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
suffix:semicolon
r_extern
r_int
r_int
id|mcpcia_fixup
(paren
r_int
r_int
id|mem_start
comma
r_int
r_int
id|mem_end
)paren
suffix:semicolon
macro_line|#endif /* __KERNEL__ */
multiline_comment|/*&n; * Data structure for handling MCPCIA machine checks:&n; */
DECL|struct|el_MCPCIA_uncorrected_frame_mcheck
r_struct
id|el_MCPCIA_uncorrected_frame_mcheck
(brace
DECL|member|header
r_struct
id|el_common
id|header
suffix:semicolon
DECL|member|procdata
r_struct
id|el_common_EV5_uncorrectable_mcheck
id|procdata
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|RTC_PORT
mdefine_line|#define RTC_PORT(x)&t;(0x70 + (x))
DECL|macro|RTC_ADDR
mdefine_line|#define RTC_ADDR(x)&t;(0x80 | (x))
DECL|macro|RTC_ALWAYS_BCD
mdefine_line|#define RTC_ALWAYS_BCD&t;0
macro_line|#endif /* __ALPHA_MCPCIA__H__ */
eof
