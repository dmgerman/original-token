multiline_comment|/* Defines for NAND Flash Translation Layer  */
multiline_comment|/* (c) 1999 Machine Vision Holdings, Inc.    */
multiline_comment|/* Author: David Woodhouse &lt;dwmw2@mvhi.com&gt;  */
multiline_comment|/* $Id: nftl.h,v 1.6 2000/03/31 15:12:20 dwmw2 Exp $ */
macro_line|#ifndef __MTD_NFTL_H__
DECL|macro|__MTD_NFTL_H__
mdefine_line|#define __MTD_NFTL_H__
macro_line|#include &lt;linux/mtd/mtd.h&gt;
multiline_comment|/* Block Control Information */
DECL|struct|nftl_bci
r_struct
id|nftl_bci
(brace
DECL|member|ECCSig
r_int
r_char
id|ECCSig
(braket
l_int|6
)braket
suffix:semicolon
DECL|member|Status
id|__u16
id|Status
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
multiline_comment|/* Unit Control Information */
DECL|struct|nftl_uci0
r_struct
id|nftl_uci0
(brace
DECL|member|VirtUnitNum
id|__u16
id|VirtUnitNum
suffix:semicolon
DECL|member|ReplUnitNum
id|__u16
id|ReplUnitNum
suffix:semicolon
DECL|member|SpareVirtUnitNum
id|__u16
id|SpareVirtUnitNum
suffix:semicolon
DECL|member|SpareReplUnitNum
id|__u16
id|SpareReplUnitNum
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|nftl_uci1
r_struct
id|nftl_uci1
(brace
DECL|member|WearInfo
id|__u32
id|WearInfo
suffix:semicolon
DECL|member|EraseMark
id|__u16
id|EraseMark
suffix:semicolon
DECL|member|EraseMark1
id|__u16
id|EraseMark1
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|struct|nftl_uci2
r_struct
id|nftl_uci2
(brace
DECL|member|WriteInh
id|__u32
id|WriteInh
suffix:semicolon
DECL|member|unused
id|__u32
id|unused
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|union|nftl_uci
r_union
id|nftl_uci
(brace
DECL|member|a
r_struct
id|nftl_uci0
id|a
suffix:semicolon
DECL|member|b
r_struct
id|nftl_uci1
id|b
suffix:semicolon
DECL|member|c
r_struct
id|nftl_uci2
id|c
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|nftl_oob
r_struct
id|nftl_oob
(brace
DECL|member|b
r_struct
id|nftl_bci
id|b
suffix:semicolon
DECL|member|u
r_union
id|nftl_uci
id|u
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* NFTL Media Header */
DECL|struct|NFTLMediaHeader
r_struct
id|NFTLMediaHeader
(brace
DECL|member|DataOrgID
r_char
id|DataOrgID
(braket
l_int|6
)braket
suffix:semicolon
DECL|member|NumEraseUnits
id|__u16
id|NumEraseUnits
suffix:semicolon
DECL|member|FirstPhysicalEUN
id|__u16
id|FirstPhysicalEUN
suffix:semicolon
DECL|member|FormattedSize
id|__u32
id|FormattedSize
suffix:semicolon
DECL|member|UnitSizeFactor
r_int
r_char
id|UnitSizeFactor
suffix:semicolon
)brace
id|__attribute__
c_func
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|macro|MAX_ERASE_ZONES
mdefine_line|#define MAX_ERASE_ZONES (8192 - 512)
DECL|macro|ERASE_MARK
mdefine_line|#define ERASE_MARK 0x3c69
DECL|macro|BLOCK_FREE
mdefine_line|#define BLOCK_FREE 0xffff
DECL|macro|BLOCK_USED
mdefine_line|#define BLOCK_USED 0x5555
DECL|macro|BLOCK_IGNORE
mdefine_line|#define BLOCK_IGNORE 0x1111
DECL|macro|BLOCK_DELETED
mdefine_line|#define BLOCK_DELETED 0x0000
DECL|macro|ZONE_GOOD
mdefine_line|#define ZONE_GOOD 0xff
DECL|macro|ZONE_BAD_ORIGINAL
mdefine_line|#define ZONE_BAD_ORIGINAL 0
DECL|macro|ZONE_BAD_MARKED
mdefine_line|#define ZONE_BAD_MARKED 7
macro_line|#ifdef __KERNEL__
DECL|struct|NFTLrecord
r_struct
id|NFTLrecord
(brace
DECL|member|mtd
r_struct
id|mtd_info
op_star
id|mtd
suffix:semicolon
DECL|member|mutex
r_struct
id|semaphore
id|mutex
suffix:semicolon
DECL|member|MediaUnit
DECL|member|SpareMediaUnit
id|__u16
id|MediaUnit
comma
id|SpareMediaUnit
suffix:semicolon
DECL|member|EraseSize
id|__u32
id|EraseSize
suffix:semicolon
DECL|member|MediaHdr
r_struct
id|NFTLMediaHeader
id|MediaHdr
suffix:semicolon
DECL|member|usecount
r_int
id|usecount
suffix:semicolon
DECL|member|heads
r_int
r_char
id|heads
suffix:semicolon
DECL|member|sectors
r_int
r_char
id|sectors
suffix:semicolon
DECL|member|cylinders
r_int
r_int
id|cylinders
suffix:semicolon
DECL|member|numvunits
id|__u16
id|numvunits
suffix:semicolon
DECL|member|lastEUN
id|__u16
id|lastEUN
suffix:semicolon
DECL|member|numfreeEUNs
id|__u16
id|numfreeEUNs
suffix:semicolon
DECL|member|LastFreeEUN
id|__u16
id|LastFreeEUN
suffix:semicolon
multiline_comment|/* To speed up finding a free EUN */
DECL|member|nr_sects
id|__u32
r_int
id|nr_sects
suffix:semicolon
DECL|member|head
DECL|member|sect
DECL|member|cyl
r_int
id|head
comma
id|sect
comma
id|cyl
suffix:semicolon
DECL|member|EUNtable
id|__u16
op_star
id|EUNtable
suffix:semicolon
multiline_comment|/* [numvunits]: First EUN for each virtual unit  */
DECL|member|VirtualUnitTable
id|__u16
op_star
id|VirtualUnitTable
suffix:semicolon
multiline_comment|/* [numEUNs]: VirtualUnitNumber for each */
DECL|member|ReplUnitTable
id|__u16
op_star
id|ReplUnitTable
suffix:semicolon
multiline_comment|/* [numEUNs]: ReplUnitNumber for each */
)brace
suffix:semicolon
DECL|macro|NFTL_MAJOR
mdefine_line|#define NFTL_MAJOR 93
DECL|macro|MAX_NFTLS
mdefine_line|#define MAX_NFTLS 16
macro_line|#endif /* __KERNEL__ */
macro_line|#endif /* __MTD_NFTL_H__ */
eof
