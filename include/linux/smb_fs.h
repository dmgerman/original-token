multiline_comment|/*&n; *  smb_fs.h&n; *&n; *  Copyright (C) 1995 by Paal-Kr. Engstad and Volker Lendecke&n; *&n; */
macro_line|#ifndef _LINUX_SMB_FS_H
DECL|macro|_LINUX_SMB_FS_H
mdefine_line|#define _LINUX_SMB_FS_H
macro_line|#include &lt;linux/smb.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/in.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/smb_mount.h&gt;
macro_line|#include &lt;linux/smb_fs_sb.h&gt;
macro_line|#include &lt;linux/smb_fs_i.h&gt;
multiline_comment|/*&n; * ioctl commands&n; */
DECL|macro|SMB_IOC_GETMOUNTUID
mdefine_line|#define&t;SMB_IOC_GETMOUNTUID&t;&t;_IOR(&squot;u&squot;, 1, uid_t)
macro_line|#ifdef __KERNEL__
multiline_comment|/*&n; * The readdir cache size controls how many directory entries are cached.&n; */
DECL|macro|SMB_READDIR_CACHE_SIZE
mdefine_line|#define SMB_READDIR_CACHE_SIZE        64
multiline_comment|/*&n; * This defines the number of filenames cached in memory to avoid &n; * constructing filenames from &bslash;&n; */
DECL|macro|SMB_CACHE_TABLE_SIZE
mdefine_line|#define SMB_CACHE_TABLE_SIZE          64
DECL|macro|SMB_SUPER_MAGIC
mdefine_line|#define SMB_SUPER_MAGIC               0x517B
DECL|macro|SMB_SBP
mdefine_line|#define SMB_SBP(sb)          ((struct smb_sb_info *)(sb-&gt;u.generic_sbp))
DECL|macro|SMB_INOP
mdefine_line|#define SMB_INOP(inode)      ((struct smb_inode_info *)(inode-&gt;u.generic_ip))
DECL|macro|SMB_SERVER
mdefine_line|#define SMB_SERVER(inode)    (&amp;(SMB_SBP(inode-&gt;i_sb)-&gt;s_server))
DECL|macro|SMB_SERVATTR
mdefine_line|#define SMB_SERVATTR(inode)  (&amp;(SMB_SBP(inode-&gt;i_sb)-&gt;s_attr))
DECL|macro|SMB_FINFO
mdefine_line|#define SMB_FINFO(inode)     (&amp;(SMB_INOP(inode)-&gt;finfo))
DECL|macro|SMB_HEADER_LEN
mdefine_line|#define SMB_HEADER_LEN   37     /* includes everything up to, but not&n;                                 * including smb_bcc */
macro_line|#ifdef DEBUG_SMB_MALLOC
macro_line|#include &lt;linux/malloc.h&gt;
r_extern
r_int
id|smb_malloced
suffix:semicolon
r_extern
r_int
id|smb_current_malloced
suffix:semicolon
r_static
r_inline
r_void
op_star
DECL|function|smb_kmalloc
id|smb_kmalloc
c_func
(paren
r_int
r_int
id|size
comma
r_int
id|priority
)paren
(brace
id|smb_malloced
op_add_assign
l_int|1
suffix:semicolon
id|smb_current_malloced
op_add_assign
l_int|1
suffix:semicolon
r_return
id|kmalloc
c_func
(paren
id|size
comma
id|priority
)paren
suffix:semicolon
)brace
r_static
r_inline
r_void
DECL|function|smb_kfree_s
id|smb_kfree_s
c_func
(paren
r_void
op_star
id|obj
comma
r_int
id|size
)paren
(brace
id|smb_current_malloced
op_sub_assign
l_int|1
suffix:semicolon
id|kfree_s
c_func
(paren
id|obj
comma
id|size
)paren
suffix:semicolon
)brace
macro_line|#else /* DEBUG_SMB_MALLOC */
DECL|macro|smb_kmalloc
mdefine_line|#define smb_kmalloc(s,p) kmalloc(s,p)
DECL|macro|smb_kfree_s
mdefine_line|#define smb_kfree_s(o,s) kfree_s(o,s)
macro_line|#endif /* DEBUG_SMB_MALLOC */
macro_line|#if DEBUG_SMB &gt; 0
DECL|macro|DPRINTK
mdefine_line|#define DPRINTK(format, args...) printk(format , ## args)
macro_line|#else
DECL|macro|DPRINTK
mdefine_line|#define DPRINTK(format, args...)
macro_line|#endif
macro_line|#if DEBUG_SMB &gt; 1
DECL|macro|DDPRINTK
mdefine_line|#define DDPRINTK(format, args...) printk(format , ## args)
macro_line|#else
DECL|macro|DDPRINTK
mdefine_line|#define DDPRINTK(format, args...)
macro_line|#endif
multiline_comment|/* linux/fs/smbfs/file.c */
r_extern
r_struct
id|inode_operations
id|smb_file_inode_operations
suffix:semicolon
r_int
id|smb_make_open
c_func
(paren
r_struct
id|inode
op_star
id|i
comma
r_int
id|right
)paren
suffix:semicolon
multiline_comment|/* linux/fs/smbfs/dir.c */
r_extern
r_struct
id|inode_operations
id|smb_dir_inode_operations
suffix:semicolon
r_void
id|smb_free_inode_info
c_func
(paren
r_struct
id|smb_inode_info
op_star
id|i
)paren
suffix:semicolon
r_void
id|smb_free_all_inodes
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_void
id|smb_init_root
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_stat_root
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_void
id|smb_init_dir_cache
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|smb_invalid_dir_cache
c_func
(paren
r_int
r_int
id|ino
)paren
suffix:semicolon
r_void
id|smb_invalidate_all_inodes
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_void
id|smb_free_dir_cache
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/* linux/fs/smbfs/ioctl.c */
r_int
id|smb_ioctl
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|filp
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
suffix:semicolon
multiline_comment|/* linux/fs/smbfs/inode.c */
r_struct
id|super_block
op_star
id|smb_read_super
c_func
(paren
r_struct
id|super_block
op_star
id|sb
comma
r_void
op_star
id|raw_data
comma
r_int
id|silent
)paren
suffix:semicolon
r_extern
r_int
id|init_smb_fs
c_func
(paren
r_void
)paren
suffix:semicolon
r_int
id|smb_notify_change
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|iattr
op_star
id|attr
)paren
suffix:semicolon
r_void
id|smb_invalidate_connection
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_conn_is_valid
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
multiline_comment|/* linux/fs/smbfs/proc.c */
id|dword
id|smb_len
c_func
(paren
r_int
r_char
op_star
id|packet
)paren
suffix:semicolon
id|byte
op_star
id|smb_encode_smb_length
c_func
(paren
id|byte
op_star
id|p
comma
id|dword
id|len
)paren
suffix:semicolon
r_int
id|smb_proc_open
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|pathname
comma
r_int
id|len
comma
r_struct
id|smb_dirent
op_star
id|entry
)paren
suffix:semicolon
r_int
id|smb_proc_close
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
id|__u16
id|fileid
comma
id|__u32
id|mtime
)paren
suffix:semicolon
r_int
id|smb_proc_read
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_struct
id|smb_dirent
op_star
id|finfo
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_char
op_star
id|data
comma
r_int
id|fs
)paren
suffix:semicolon
r_int
id|smb_proc_read_raw
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_struct
id|smb_dirent
op_star
id|finfo
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_char
op_star
id|data
)paren
suffix:semicolon
r_int
id|smb_proc_write
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_struct
id|smb_dirent
op_star
id|finfo
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_const
r_char
op_star
id|data
)paren
suffix:semicolon
r_int
id|smb_proc_write_raw
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_struct
id|smb_dirent
op_star
id|finfo
comma
id|off_t
id|offset
comma
r_int
id|count
comma
r_const
r_char
op_star
id|data
)paren
suffix:semicolon
r_int
id|smb_proc_create
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|path
comma
r_int
id|len
comma
r_struct
id|smb_dirent
op_star
id|entry
)paren
suffix:semicolon
r_int
id|smb_proc_mv
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|opath
comma
r_const
r_int
id|olen
comma
r_const
r_char
op_star
id|npath
comma
r_const
r_int
id|nlen
)paren
suffix:semicolon
r_int
id|smb_proc_mkdir
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|path
comma
r_const
r_int
id|len
)paren
suffix:semicolon
r_int
id|smb_proc_rmdir
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|path
comma
r_const
r_int
id|len
)paren
suffix:semicolon
r_int
id|smb_proc_unlink
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|path
comma
r_const
r_int
id|len
)paren
suffix:semicolon
r_int
id|smb_proc_readdir
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_struct
id|inode
op_star
id|dir
comma
r_int
id|fpos
comma
r_int
id|cache_size
comma
r_struct
id|smb_dirent
op_star
id|entry
)paren
suffix:semicolon
r_int
id|smb_proc_getattr
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_const
r_char
op_star
id|path
comma
r_int
id|len
comma
r_struct
id|smb_dirent
op_star
id|entry
)paren
suffix:semicolon
r_int
id|smb_proc_setattr
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_struct
id|inode
op_star
id|ino
comma
r_struct
id|smb_dirent
op_star
id|new_finfo
)paren
suffix:semicolon
r_int
id|smb_proc_chkpath
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_char
op_star
id|path
comma
r_int
id|len
comma
r_int
op_star
id|result
)paren
suffix:semicolon
r_int
id|smb_proc_dskattr
c_func
(paren
r_struct
id|super_block
op_star
id|super
comma
r_struct
id|smb_dskattr
op_star
id|attr
)paren
suffix:semicolon
r_int
id|smb_proc_reconnect
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_proc_connect
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_proc_disconnect
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_proc_trunc
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
id|word
id|fid
comma
id|dword
id|length
)paren
suffix:semicolon
multiline_comment|/* linux/fs/smbfs/sock.c */
r_int
id|smb_release
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_connect
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_request
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_request_read_raw
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_int
r_char
op_star
id|target
comma
r_int
id|max_len
)paren
suffix:semicolon
r_int
id|smb_request_write_raw
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_int
r_const
r_char
op_star
id|source
comma
r_int
id|length
)paren
suffix:semicolon
r_int
id|smb_catch_keepalive
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_dont_catch_keepalive
c_func
(paren
r_struct
id|smb_server
op_star
id|server
)paren
suffix:semicolon
r_int
id|smb_trans2_request
c_func
(paren
r_struct
id|smb_server
op_star
id|server
comma
r_int
op_star
id|data_len
comma
r_int
op_star
id|param_len
comma
r_char
op_star
op_star
id|data
comma
r_char
op_star
op_star
id|param
)paren
suffix:semicolon
multiline_comment|/* linux/fs/smbfs/mmap.c */
r_int
id|smb_mmap
c_func
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|file
op_star
id|file
comma
r_struct
id|vm_area_struct
op_star
id|vma
)paren
suffix:semicolon
macro_line|#endif /* __KERNEL__ */
macro_line|#endif /* _LINUX_SMB_FS_H */
eof
