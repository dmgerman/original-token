multiline_comment|/*&n; *&t;include/linux/vt_buffer.h -- Access to VT screen buffer&n; *&n; *&t;(c) 1998 Martin Mares &lt;mj@ucw.cz&gt;&n; *&n; *&t;This is a set of macros and functions which are used in the&n; *&t;console driver and related code to access the screen buffer.&n; *&t;In most cases the console works with simple in-memory buffer,&n; *&t;but when handling hardware text mode consoles, we store&n; *&t;the foreground console directly in video memory.&n; */
macro_line|#ifndef _LINUX_VT_BUFFER_H_
DECL|macro|_LINUX_VT_BUFFER_H_
mdefine_line|#define _LINUX_VT_BUFFER_H_
macro_line|#include &lt;linux/config.h&gt;
macro_line|#if defined(CONFIG_VGA_CONSOLE) || defined(CONFIG_MDA_CONSOLE)
macro_line|#include &lt;asm/vga.h&gt;
macro_line|#endif
macro_line|#ifndef VT_BUF_HAVE_RW
DECL|macro|scr_writew
mdefine_line|#define scr_writew(val, addr) (*(addr) = (val))
DECL|macro|scr_readw
mdefine_line|#define scr_readw(addr) (*(addr))
DECL|macro|scr_memcpyw
mdefine_line|#define scr_memcpyw(d, s, c) memcpy(d, s, c)
DECL|macro|scr_memmovew
mdefine_line|#define scr_memmovew(d, s, c) memmove(d, s, c)
DECL|macro|VT_BUF_HAVE_MEMCPYW
mdefine_line|#define VT_BUF_HAVE_MEMCPYW
DECL|macro|VT_BUF_HAVE_MEMMOVEW
mdefine_line|#define VT_BUF_HAVE_MEMMOVEW
DECL|macro|scr_memcpyw_from
mdefine_line|#define scr_memcpyw_from(d, s, c) memcpy(d, s, c)
DECL|macro|scr_memcpyw_to
mdefine_line|#define scr_memcpyw_to(d, s, c) memcpy(d, s, c)
DECL|macro|VT_BUF_HAVE_MEMCPYF
mdefine_line|#define VT_BUF_HAVE_MEMCPYF
macro_line|#endif
macro_line|#ifndef VT_BUF_HAVE_MEMSETW
DECL|function|scr_memsetw
r_static
r_inline
r_void
id|scr_memsetw
c_func
(paren
id|u16
op_star
id|s
comma
id|u16
id|c
comma
r_int
r_int
id|count
)paren
(brace
id|count
op_div_assign
l_int|2
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
id|scr_writew
c_func
(paren
id|c
comma
id|s
op_increment
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifndef VT_BUF_HAVE_MEMCPYW
DECL|function|scr_memcpyw
r_static
r_inline
r_void
id|scr_memcpyw
c_func
(paren
id|u16
op_star
id|d
comma
r_const
id|u16
op_star
id|s
comma
r_int
r_int
id|count
)paren
(brace
id|count
op_div_assign
l_int|2
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
id|scr_writew
c_func
(paren
id|scr_readw
c_func
(paren
id|s
op_increment
)paren
comma
id|d
op_increment
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifndef VT_BUF_HAVE_MEMMOVEW
DECL|function|scr_memmovew
r_static
r_inline
r_void
id|scr_memmovew
c_func
(paren
id|u16
op_star
id|d
comma
r_const
id|u16
op_star
id|s
comma
r_int
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|d
OL
id|s
)paren
id|scr_memcpyw
c_func
(paren
id|d
comma
id|s
comma
id|count
)paren
suffix:semicolon
r_else
(brace
id|count
op_div_assign
l_int|2
suffix:semicolon
id|d
op_add_assign
id|count
suffix:semicolon
id|s
op_add_assign
id|count
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
id|scr_writew
c_func
(paren
id|scr_readw
c_func
(paren
op_decrement
id|s
)paren
comma
op_decrement
id|d
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif
macro_line|#ifndef VT_BUF_HAVE_MEMCPYF
DECL|function|scr_memcpyw_from
r_static
r_inline
r_void
id|scr_memcpyw_from
c_func
(paren
id|u16
op_star
id|d
comma
r_const
id|u16
op_star
id|s
comma
r_int
r_int
id|count
)paren
(brace
id|count
op_div_assign
l_int|2
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
op_star
id|d
op_increment
op_assign
id|scr_readw
c_func
(paren
id|s
op_increment
)paren
suffix:semicolon
)brace
DECL|function|scr_memcpyw_to
r_static
r_inline
r_void
id|scr_memcpyw_to
c_func
(paren
id|u16
op_star
id|d
comma
r_const
id|u16
op_star
id|s
comma
r_int
r_int
id|count
)paren
(brace
id|count
op_div_assign
l_int|2
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
id|scr_writew
c_func
(paren
op_star
id|s
op_increment
comma
id|d
op_increment
)paren
suffix:semicolon
)brace
macro_line|#endif
macro_line|#endif
eof
