multiline_comment|/*&n; * $Id: b1lli.h,v 1.6 1999/04/15 19:49:36 calle Exp $&n; *&n; * ISDN lowlevel-module for AVM B1-card.&n; *&n; * Copyright 1996 by Carsten Paeth (calle@calle.in-berlin.de)&n; *&n; * $Log: b1lli.h,v $&n; * Revision 1.6  1999/04/15 19:49:36  calle&n; * fix fuer die B1-PCI. Jetzt geht z.B. auch IRQ 17 ...&n; *&n; * Revision 1.5  1998/10/25 14:50:28  fritz&n; * Backported from MIPS (Cobalt).&n; *&n; * Revision 1.4  1998/03/29 16:05:02  calle&n; * changes from 2.0 tree merged.&n; *&n; * Revision 1.1.2.9  1998/03/20 14:30:02  calle&n; * added cardnr to detect if you try to add same T1 to different io address.&n; * change number of nccis depending on number of channels.&n; *&n; * Revision 1.1.2.8  1998/03/04 17:32:33  calle&n; * Changes for T1.&n; *&n; * Revision 1.1.2.7  1998/02/27 15:38:29  calle&n; * T1 running with slow link.&n; *&n; * Revision 1.1.2.6  1998/02/24 17:57:36  calle&n; * changes for T1.&n; *&n; * Revision 1.3  1998/01/31 10:54:37  calle&n; * include changes for PCMCIA cards from 2.0 version&n; *&n; * Revision 1.2  1997/12/10 19:38:42  calle&n; * get changes from 2.0 tree&n; *&n; * Revision 1.1.2.2  1997/11/26 16:57:26  calle&n; * more changes for B1/M1/T1.&n; *&n; * Revision 1.1.2.1  1997/11/26 10:47:01  calle&n; * prepared for M1 (Mobile) and T1 (PMX) cards.&n; * prepared to set configuration after load to support other D-channel&n; * protocols, point-to-point and leased lines.&n; *&n; * Revision 1.1  1997/03/04 21:27:32  calle&n; * First version in isdn4linux&n; *&n; * Revision 2.2  1997/02/12 09:31:39  calle&n; * new version&n; *&n; * Revision 1.1  1997/01/31 10:32:20  calle&n; * Initial revision&n; *&n; */
macro_line|#ifndef _B1LLI_H_
DECL|macro|_B1LLI_H_
mdefine_line|#define _B1LLI_H_
multiline_comment|/*&n; * struct for loading t4 file &n; */
DECL|struct|avmb1_t4file
r_typedef
r_struct
id|avmb1_t4file
(brace
DECL|member|len
r_int
id|len
suffix:semicolon
DECL|member|data
r_int
r_char
op_star
id|data
suffix:semicolon
DECL|typedef|avmb1_t4file
)brace
id|avmb1_t4file
suffix:semicolon
DECL|struct|avmb1_loaddef
r_typedef
r_struct
id|avmb1_loaddef
(brace
DECL|member|contr
r_int
id|contr
suffix:semicolon
DECL|member|t4file
id|avmb1_t4file
id|t4file
suffix:semicolon
DECL|typedef|avmb1_loaddef
)brace
id|avmb1_loaddef
suffix:semicolon
DECL|struct|avmb1_loadandconfigdef
r_typedef
r_struct
id|avmb1_loadandconfigdef
(brace
DECL|member|contr
r_int
id|contr
suffix:semicolon
DECL|member|t4file
id|avmb1_t4file
id|t4file
suffix:semicolon
DECL|member|t4config
id|avmb1_t4file
id|t4config
suffix:semicolon
DECL|typedef|avmb1_loadandconfigdef
)brace
id|avmb1_loadandconfigdef
suffix:semicolon
DECL|struct|avmb1_resetdef
r_typedef
r_struct
id|avmb1_resetdef
(brace
DECL|member|contr
r_int
id|contr
suffix:semicolon
DECL|typedef|avmb1_resetdef
)brace
id|avmb1_resetdef
suffix:semicolon
DECL|struct|avmb1_getdef
r_typedef
r_struct
id|avmb1_getdef
(brace
DECL|member|contr
r_int
id|contr
suffix:semicolon
DECL|member|cardtype
r_int
id|cardtype
suffix:semicolon
DECL|member|cardstate
r_int
id|cardstate
suffix:semicolon
DECL|typedef|avmb1_getdef
)brace
id|avmb1_getdef
suffix:semicolon
multiline_comment|/*&n; * struct for adding new cards &n; */
DECL|struct|avmb1_carddef
r_typedef
r_struct
id|avmb1_carddef
(brace
DECL|member|port
r_int
id|port
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|typedef|avmb1_carddef
)brace
id|avmb1_carddef
suffix:semicolon
DECL|macro|AVM_CARDTYPE_B1
mdefine_line|#define AVM_CARDTYPE_B1&t;&t;0
DECL|macro|AVM_CARDTYPE_T1
mdefine_line|#define AVM_CARDTYPE_T1&t;&t;1
DECL|macro|AVM_CARDTYPE_M1
mdefine_line|#define AVM_CARDTYPE_M1&t;&t;2
DECL|macro|AVM_CARDTYPE_M2
mdefine_line|#define AVM_CARDTYPE_M2&t;&t;3
DECL|macro|AVM_CARDTYPE_B1PCI
mdefine_line|#define AVM_CARDTYPE_B1PCI&t;4
DECL|struct|avmb1_extcarddef
r_typedef
r_struct
id|avmb1_extcarddef
(brace
DECL|member|port
r_int
id|port
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|member|cardtype
r_int
id|cardtype
suffix:semicolon
DECL|member|cardnr
r_int
id|cardnr
suffix:semicolon
multiline_comment|/* for HEMA/T1 */
DECL|typedef|avmb1_extcarddef
)brace
id|avmb1_extcarddef
suffix:semicolon
DECL|macro|AVMB1_LOAD
mdefine_line|#define&t;AVMB1_LOAD&t;&t;0&t;/* load image to card */
DECL|macro|AVMB1_ADDCARD
mdefine_line|#define AVMB1_ADDCARD&t;&t;1&t;/* add a new card */
DECL|macro|AVMB1_RESETCARD
mdefine_line|#define AVMB1_RESETCARD&t;&t;2&t;/* reset a card */
DECL|macro|AVMB1_LOAD_AND_CONFIG
mdefine_line|#define&t;AVMB1_LOAD_AND_CONFIG&t;3&t;/* load image and config to card */
DECL|macro|AVMB1_ADDCARD_WITH_TYPE
mdefine_line|#define&t;AVMB1_ADDCARD_WITH_TYPE&t;4&t;/* add a new card, with cardtype */
DECL|macro|AVMB1_GET_CARDINFO
mdefine_line|#define AVMB1_GET_CARDINFO&t;5&t;/* get cardtype */
DECL|macro|AVMB1_REMOVECARD
mdefine_line|#define AVMB1_REMOVECARD&t;6&t;/* remove a card (usefull for T1) */
multiline_comment|/*&n; * card states for startup&n; */
DECL|macro|CARD_FREE
mdefine_line|#define CARD_FREE&t;0
DECL|macro|CARD_DETECTED
mdefine_line|#define CARD_DETECTED&t;1
DECL|macro|CARD_LOADING
mdefine_line|#define CARD_LOADING&t;2
DECL|macro|CARD_INITSTATE
mdefine_line|#define CARD_INITSTATE&t;4
DECL|macro|CARD_RUNNING
mdefine_line|#define CARD_RUNNING&t;5
DECL|macro|CARD_ACTIVE
mdefine_line|#define CARD_ACTIVE&t;6
macro_line|#ifdef __KERNEL__
DECL|macro|AVMB1_PORTLEN
mdefine_line|#define&t;AVMB1_PORTLEN&t;&t;0x1f
DECL|macro|AVM_MAXVERSION
mdefine_line|#define AVM_MAXVERSION&t;&t;8
DECL|macro|AVM_NAPPS
mdefine_line|#define AVM_NAPPS&t;&t;30
DECL|macro|AVM_NNCCI_PER_CHANNEL
mdefine_line|#define AVM_NNCCI_PER_CHANNEL&t;4
multiline_comment|/*&n; * Main driver data&n; */
DECL|struct|avmb1_card
r_typedef
r_struct
id|avmb1_card
(brace
DECL|member|next
r_struct
id|avmb1_card
op_star
id|next
suffix:semicolon
DECL|member|cnr
r_int
id|cnr
suffix:semicolon
DECL|member|port
r_int
r_int
id|port
suffix:semicolon
DECL|member|irq
r_int
id|irq
suffix:semicolon
DECL|member|cardtype
r_int
id|cardtype
suffix:semicolon
DECL|member|cardnr
r_int
id|cardnr
suffix:semicolon
multiline_comment|/* for T1-HEMA */
DECL|member|cardstate
r_volatile
r_int
r_int
id|cardstate
suffix:semicolon
DECL|member|interrupt
r_int
id|interrupt
suffix:semicolon
DECL|member|blocked
r_int
id|blocked
suffix:semicolon
DECL|member|versionlen
r_int
id|versionlen
suffix:semicolon
DECL|member|versionbuf
r_char
id|versionbuf
(braket
l_int|1024
)braket
suffix:semicolon
DECL|member|version
r_char
op_star
id|version
(braket
id|AVM_MAXVERSION
)braket
suffix:semicolon
DECL|member|msgbuf
r_char
id|msgbuf
(braket
l_int|128
)braket
suffix:semicolon
multiline_comment|/* capimsg msg part */
DECL|member|databuf
r_char
id|databuf
(braket
l_int|2048
)braket
suffix:semicolon
multiline_comment|/* capimsg data part */
DECL|member|cversion
id|capi_version
id|cversion
suffix:semicolon
DECL|member|name
r_char
id|name
(braket
l_int|10
)braket
suffix:semicolon
DECL|typedef|avmb1_card
)brace
id|avmb1_card
suffix:semicolon
multiline_comment|/*&n; * Versions&n; */
DECL|macro|VER_DRIVER
mdefine_line|#define&t;VER_DRIVER&t;0
DECL|macro|VER_CARDTYPE
mdefine_line|#define&t;VER_CARDTYPE&t;1
DECL|macro|VER_HWID
mdefine_line|#define&t;VER_HWID&t;2
DECL|macro|VER_SERIAL
mdefine_line|#define&t;VER_SERIAL&t;3
DECL|macro|VER_OPTION
mdefine_line|#define&t;VER_OPTION&t;4
DECL|macro|VER_PROTO
mdefine_line|#define&t;VER_PROTO&t;5
DECL|macro|VER_PROFILE
mdefine_line|#define&t;VER_PROFILE&t;6
DECL|macro|VER_CAPI
mdefine_line|#define&t;VER_CAPI&t;7
multiline_comment|/* b1lli.c */
r_int
id|B1_detect
c_func
(paren
r_int
r_int
id|base
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_int
id|T1_detectandinit
c_func
(paren
r_int
r_int
id|base
comma
r_int
id|irq
comma
r_int
id|cardnr
)paren
suffix:semicolon
r_void
id|B1_reset
c_func
(paren
r_int
r_int
id|base
)paren
suffix:semicolon
r_void
id|T1_reset
c_func
(paren
r_int
r_int
id|base
)paren
suffix:semicolon
r_int
id|B1_load_t4file
c_func
(paren
r_int
r_int
id|base
comma
id|avmb1_t4file
op_star
id|t4file
)paren
suffix:semicolon
r_int
id|B1_load_config
c_func
(paren
r_int
r_int
id|base
comma
id|avmb1_t4file
op_star
id|config
)paren
suffix:semicolon
r_int
id|B1_loaded
c_func
(paren
r_int
r_int
id|base
)paren
suffix:semicolon
r_void
id|B1_setinterrupt
c_func
(paren
r_int
r_int
id|base
comma
r_int
id|irq
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_int
r_char
id|B1_disable_irq
c_func
(paren
r_int
r_int
id|base
)paren
suffix:semicolon
r_void
id|T1_disable_irq
c_func
(paren
r_int
r_int
id|base
)paren
suffix:semicolon
r_int
id|B1_valid_irq
c_func
(paren
r_int
id|irq
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_int
id|B1_valid_port
c_func
(paren
r_int
id|port
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_void
id|B1_handle_interrupt
c_func
(paren
id|avmb1_card
op_star
id|card
)paren
suffix:semicolon
r_void
id|B1_send_init
c_func
(paren
r_int
r_int
id|port
comma
r_int
r_int
id|napps
comma
r_int
r_int
id|nncci
comma
r_int
r_int
id|cardnr
)paren
suffix:semicolon
r_void
id|B1_send_register
c_func
(paren
r_int
r_int
id|port
comma
id|__u16
id|appid
comma
id|__u32
id|nmsg
comma
id|__u32
id|nb3conn
comma
id|__u32
id|nb3blocks
comma
id|__u32
id|b3bsize
)paren
suffix:semicolon
r_void
id|B1_send_release
c_func
(paren
r_int
r_int
id|port
comma
id|__u16
id|appid
)paren
suffix:semicolon
r_void
id|B1_send_message
c_func
(paren
r_int
r_int
id|port
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
multiline_comment|/* b1capi.c */
r_void
id|avmb1_handle_new_ncci
c_func
(paren
id|avmb1_card
op_star
id|card
comma
id|__u16
id|appl
comma
id|__u32
id|ncci
comma
id|__u32
id|winsize
)paren
suffix:semicolon
r_void
id|avmb1_handle_free_ncci
c_func
(paren
id|avmb1_card
op_star
id|card
comma
id|__u16
id|appl
comma
id|__u32
id|ncci
)paren
suffix:semicolon
r_void
id|avmb1_handle_capimsg
c_func
(paren
id|avmb1_card
op_star
id|card
comma
id|__u16
id|appl
comma
r_struct
id|sk_buff
op_star
id|skb
)paren
suffix:semicolon
r_void
id|avmb1_card_ready
c_func
(paren
id|avmb1_card
op_star
id|card
)paren
suffix:semicolon
multiline_comment|/* standard calls, with check and allocation of resources */
r_int
id|avmb1_addcard
c_func
(paren
r_int
id|port
comma
r_int
id|irq
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_int
id|avmb1_probecard
c_func
(paren
r_int
id|port
comma
r_int
id|irq
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_int
id|avmb1_resetcard
c_func
(paren
r_int
id|cardnr
)paren
suffix:semicolon
multiline_comment|/* calls for pcmcia driver */
r_int
id|avmb1_detectcard
c_func
(paren
r_int
id|port
comma
r_int
id|irq
comma
r_int
id|cardtype
)paren
suffix:semicolon
r_int
id|avmb1_registercard
c_func
(paren
r_int
id|port
comma
r_int
id|irq
comma
r_int
id|cardtype
comma
r_int
id|allocio
)paren
suffix:semicolon
r_int
id|avmb1_unregistercard
c_func
(paren
r_int
id|cnr
comma
r_int
id|freeio
)paren
suffix:semicolon
macro_line|#endif&t;&t;&t;&t;/* __KERNEL__ */
macro_line|#endif&t;&t;&t;&t;/* _B1LLI_H_ */
eof
