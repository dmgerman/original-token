macro_line|#ifndef _LINUX_SWAPCTL_H
DECL|macro|_LINUX_SWAPCTL_H
mdefine_line|#define _LINUX_SWAPCTL_H
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
multiline_comment|/* Swap tuning control */
DECL|struct|swap_control_v6
r_typedef
r_struct
id|swap_control_v6
(brace
DECL|member|sc_max_page_age
r_int
r_int
id|sc_max_page_age
suffix:semicolon
DECL|member|sc_page_advance
r_int
r_int
id|sc_page_advance
suffix:semicolon
DECL|member|sc_page_decline
r_int
r_int
id|sc_page_decline
suffix:semicolon
DECL|member|sc_page_initial_age
r_int
r_int
id|sc_page_initial_age
suffix:semicolon
DECL|member|sc_age_cluster_fract
r_int
r_int
id|sc_age_cluster_fract
suffix:semicolon
DECL|member|sc_age_cluster_min
r_int
r_int
id|sc_age_cluster_min
suffix:semicolon
DECL|member|sc_pageout_weight
r_int
r_int
id|sc_pageout_weight
suffix:semicolon
DECL|member|sc_bufferout_weight
r_int
r_int
id|sc_bufferout_weight
suffix:semicolon
DECL|typedef|swap_control_v6
)brace
id|swap_control_v6
suffix:semicolon
DECL|typedef|swap_control_t
r_typedef
r_struct
id|swap_control_v6
id|swap_control_t
suffix:semicolon
r_extern
id|swap_control_t
id|swap_control
suffix:semicolon
DECL|struct|swapstat_v1
r_typedef
r_struct
id|swapstat_v1
(brace
DECL|member|wakeups
r_int
r_int
id|wakeups
suffix:semicolon
DECL|member|pages_reclaimed
r_int
r_int
id|pages_reclaimed
suffix:semicolon
DECL|member|pages_shm
r_int
r_int
id|pages_shm
suffix:semicolon
DECL|member|pages_mmap
r_int
r_int
id|pages_mmap
suffix:semicolon
DECL|member|pages_swap
r_int
r_int
id|pages_swap
suffix:semicolon
DECL|member|gfp_freepage_attempts
r_int
r_int
id|gfp_freepage_attempts
suffix:semicolon
DECL|member|gfp_freepage_successes
r_int
r_int
id|gfp_freepage_successes
suffix:semicolon
DECL|member|gfp_shrink_attempts
r_int
r_int
id|gfp_shrink_attempts
suffix:semicolon
DECL|member|gfp_shrink_successes
r_int
r_int
id|gfp_shrink_successes
suffix:semicolon
DECL|member|kswap_freepage_attempts
r_int
r_int
id|kswap_freepage_attempts
suffix:semicolon
DECL|member|kswap_freepage_successes
r_int
r_int
id|kswap_freepage_successes
suffix:semicolon
DECL|member|kswap_wakeups
r_int
r_int
id|kswap_wakeups
(braket
l_int|4
)braket
suffix:semicolon
DECL|typedef|swapstat_v1
)brace
id|swapstat_v1
suffix:semicolon
DECL|typedef|swapstat_t
r_typedef
id|swapstat_v1
id|swapstat_t
suffix:semicolon
r_extern
id|swapstat_t
id|swapstats
suffix:semicolon
DECL|struct|buffer_mem_v1
r_typedef
r_struct
id|buffer_mem_v1
(brace
DECL|member|min_percent
r_int
r_int
id|min_percent
suffix:semicolon
DECL|member|borrow_percent
r_int
r_int
id|borrow_percent
suffix:semicolon
DECL|member|max_percent
r_int
r_int
id|max_percent
suffix:semicolon
DECL|typedef|buffer_mem_v1
)brace
id|buffer_mem_v1
suffix:semicolon
DECL|typedef|buffer_mem_t
r_typedef
id|buffer_mem_v1
id|buffer_mem_t
suffix:semicolon
r_extern
id|buffer_mem_t
id|buffer_mem
suffix:semicolon
r_extern
id|buffer_mem_t
id|page_cache
suffix:semicolon
DECL|struct|freepages_v1
r_typedef
r_struct
id|freepages_v1
(brace
DECL|member|min
r_int
r_int
id|min
suffix:semicolon
DECL|member|low
r_int
r_int
id|low
suffix:semicolon
DECL|member|high
r_int
r_int
id|high
suffix:semicolon
DECL|typedef|freepages_v1
)brace
id|freepages_v1
suffix:semicolon
DECL|typedef|freepages_t
r_typedef
id|freepages_v1
id|freepages_t
suffix:semicolon
r_extern
id|freepages_t
id|freepages
suffix:semicolon
DECL|struct|pager_daemon_v1
r_typedef
r_struct
id|pager_daemon_v1
(brace
DECL|member|tries_base
r_int
r_int
id|tries_base
suffix:semicolon
DECL|member|tries_min
r_int
r_int
id|tries_min
suffix:semicolon
DECL|member|swap_cluster
r_int
r_int
id|swap_cluster
suffix:semicolon
DECL|typedef|pager_daemon_v1
)brace
id|pager_daemon_v1
suffix:semicolon
DECL|typedef|pager_daemon_t
r_typedef
id|pager_daemon_v1
id|pager_daemon_t
suffix:semicolon
r_extern
id|pager_daemon_t
id|pager_daemon
suffix:semicolon
DECL|macro|SC_VERSION
mdefine_line|#define SC_VERSION&t;1
DECL|macro|SC_MAX_VERSION
mdefine_line|#define SC_MAX_VERSION&t;1
macro_line|#ifdef __KERNEL__
multiline_comment|/* Define the maximum (least urgent) priority for the page reclaim code */
DECL|macro|RCL_MAXPRI
mdefine_line|#define RCL_MAXPRI 6
multiline_comment|/* We use an extra priority in the swap accounting code to represent&n;   failure to free a resource at any priority */
DECL|macro|RCL_FAILURE
mdefine_line|#define RCL_FAILURE (RCL_MAXPRI + 1)
DECL|macro|AGE_CLUSTER_FRACT
mdefine_line|#define AGE_CLUSTER_FRACT&t;(swap_control.sc_age_cluster_fract)
DECL|macro|AGE_CLUSTER_MIN
mdefine_line|#define AGE_CLUSTER_MIN&t;&t;(swap_control.sc_age_cluster_min)
DECL|macro|PAGEOUT_WEIGHT
mdefine_line|#define PAGEOUT_WEIGHT&t;&t;(swap_control.sc_pageout_weight)
DECL|macro|BUFFEROUT_WEIGHT
mdefine_line|#define BUFFEROUT_WEIGHT&t;(swap_control.sc_bufferout_weight)
multiline_comment|/* Page aging (see mm/swap.c) */
DECL|macro|MAX_PAGE_AGE
mdefine_line|#define MAX_PAGE_AGE&t;&t;(swap_control.sc_max_page_age)
DECL|macro|PAGE_ADVANCE
mdefine_line|#define PAGE_ADVANCE&t;&t;(swap_control.sc_page_advance)
DECL|macro|PAGE_DECLINE
mdefine_line|#define PAGE_DECLINE&t;&t;(swap_control.sc_page_decline)
DECL|macro|PAGE_INITIAL_AGE
mdefine_line|#define PAGE_INITIAL_AGE&t;(swap_control.sc_page_initial_age)
multiline_comment|/* Given a resource of N units (pages or buffers etc), we only try to&n; * age and reclaim AGE_CLUSTER_FRACT per 1024 resources each time we&n; * scan the resource list. */
DECL|function|AGE_CLUSTER_SIZE
r_static
r_inline
r_int
id|AGE_CLUSTER_SIZE
c_func
(paren
r_int
id|resources
)paren
(brace
r_int
r_int
id|n
op_assign
(paren
id|resources
op_star
id|AGE_CLUSTER_FRACT
)paren
op_rshift
l_int|10
suffix:semicolon
r_if
c_cond
(paren
id|n
OL
id|AGE_CLUSTER_MIN
)paren
r_return
id|AGE_CLUSTER_MIN
suffix:semicolon
r_else
r_return
id|n
suffix:semicolon
)brace
macro_line|#endif /* __KERNEL */
macro_line|#endif /* _LINUX_SWAPCTL_H */
eof
