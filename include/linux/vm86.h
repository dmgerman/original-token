macro_line|#ifndef _LINUX_VM86_H
DECL|macro|_LINUX_VM86_H
mdefine_line|#define _LINUX_VM86_H
DECL|macro|VM_MASK
mdefine_line|#define VM_MASK 0x00020000
multiline_comment|/*&n; * This is the stack-layout when we have done a &quot;SAVE_ALL&quot; from vm86&n; * mode - the main change is that the old segment descriptors aren&squot;t&n; * useful any more and are forced to be zero by the kernel (and the&n; * hardware when a trap occurs), and the real segment descriptors are&n; * at the end of the structure. Look at ptrace.h to see the &quot;normal&quot;&n; * setup.&n; */
DECL|struct|vm86_regs
r_struct
id|vm86_regs
(brace
multiline_comment|/*&n; * normal regs, with special meaning for the segment descriptors..&n; */
DECL|member|ebx
r_int
id|ebx
suffix:semicolon
DECL|member|ecx
r_int
id|ecx
suffix:semicolon
DECL|member|edx
r_int
id|edx
suffix:semicolon
DECL|member|esi
r_int
id|esi
suffix:semicolon
DECL|member|edi
r_int
id|edi
suffix:semicolon
DECL|member|ebp
r_int
id|ebp
suffix:semicolon
DECL|member|eax
r_int
id|eax
suffix:semicolon
DECL|member|__null_ds
r_int
id|__null_ds
suffix:semicolon
DECL|member|__null_es
r_int
id|__null_es
suffix:semicolon
DECL|member|__null_fs
r_int
id|__null_fs
suffix:semicolon
DECL|member|__null_gs
r_int
id|__null_gs
suffix:semicolon
DECL|member|orig_eax
r_int
id|orig_eax
suffix:semicolon
DECL|member|eip
r_int
id|eip
suffix:semicolon
DECL|member|cs
r_int
id|cs
suffix:semicolon
DECL|member|eflags
r_int
id|eflags
suffix:semicolon
DECL|member|esp
r_int
id|esp
suffix:semicolon
DECL|member|ss
r_int
id|ss
suffix:semicolon
multiline_comment|/*&n; * these are specific to v86 mode:&n; */
DECL|member|es
r_int
id|es
suffix:semicolon
DECL|member|ds
r_int
id|ds
suffix:semicolon
DECL|member|fs
r_int
id|fs
suffix:semicolon
DECL|member|gs
r_int
id|gs
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/*&n; * flags isn&squot;t even used yet: it&squot;s just there as an example of&n; * what kind of information we might want to give sys_vm86() (or&n; * want it to return to us).&n; */
DECL|struct|vm86_struct
r_struct
id|vm86_struct
(brace
DECL|member|regs
r_struct
id|vm86_regs
id|regs
suffix:semicolon
DECL|member|flags
r_int
r_int
id|flags
suffix:semicolon
)brace
suffix:semicolon
macro_line|#endif
eof
