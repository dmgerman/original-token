multiline_comment|/*&n; *&t;AppleTalk networking structures&n; *&n; *&t;The following are directly referenced from the University Of Michigan&n; *&t;netatalk for compatibility reasons.&n; */
macro_line|#ifndef __LINUX_ATALK_H__
DECL|macro|__LINUX_ATALK_H__
mdefine_line|#define __LINUX_ATALK_H__
DECL|macro|ATPORT_FIRST
mdefine_line|#define ATPORT_FIRST&t;1
DECL|macro|ATPORT_RESERVED
mdefine_line|#define ATPORT_RESERVED&t;128
DECL|macro|ATPORT_LAST
mdefine_line|#define ATPORT_LAST&t;254 /* 254 is only legal on localtalk */ 
DECL|macro|ATADDR_ANYNET
mdefine_line|#define ATADDR_ANYNET&t;(__u16)0
DECL|macro|ATADDR_ANYNODE
mdefine_line|#define ATADDR_ANYNODE&t;(__u8)0
DECL|macro|ATADDR_ANYPORT
mdefine_line|#define ATADDR_ANYPORT  (__u8)0
DECL|macro|ATADDR_BCAST
mdefine_line|#define ATADDR_BCAST&t;(__u8)255
DECL|macro|DDP_MAXSZ
mdefine_line|#define DDP_MAXSZ&t;587
DECL|macro|DDP_MAXHOPS
mdefine_line|#define DDP_MAXHOPS     15      /* 4 bits of hop counter */
DECL|macro|SIOCATALKDIFADDR
mdefine_line|#define SIOCATALKDIFADDR       (SIOCPROTOPRIVATE + 0)
DECL|struct|at_addr
r_struct
id|at_addr
(brace
DECL|member|s_net
id|__u16
id|s_net
suffix:semicolon
DECL|member|s_node
id|__u8
id|s_node
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|sockaddr_at
r_struct
id|sockaddr_at
(brace
DECL|member|sat_family
id|sa_family_t
id|sat_family
suffix:semicolon
DECL|member|sat_port
id|__u8
id|sat_port
suffix:semicolon
DECL|member|sat_addr
r_struct
id|at_addr
id|sat_addr
suffix:semicolon
DECL|member|sat_zero
r_char
id|sat_zero
(braket
l_int|8
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|netrange
r_struct
id|netrange
(brace
DECL|member|nr_phase
id|__u8
id|nr_phase
suffix:semicolon
DECL|member|nr_firstnet
id|__u16
id|nr_firstnet
suffix:semicolon
DECL|member|nr_lastnet
id|__u16
id|nr_lastnet
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|atalk_route
r_struct
id|atalk_route
(brace
DECL|member|dev
r_struct
id|net_device
op_star
id|dev
suffix:semicolon
DECL|member|target
r_struct
id|at_addr
id|target
suffix:semicolon
DECL|member|gateway
r_struct
id|at_addr
id|gateway
suffix:semicolon
DECL|member|flags
r_int
id|flags
suffix:semicolon
DECL|member|next
r_struct
id|atalk_route
op_star
id|next
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|atalk_iface
r_struct
id|atalk_iface
(brace
DECL|member|dev
r_struct
id|net_device
op_star
id|dev
suffix:semicolon
DECL|member|address
r_struct
id|at_addr
id|address
suffix:semicolon
multiline_comment|/* Our address */
DECL|member|status
r_int
id|status
suffix:semicolon
multiline_comment|/* What are we doing? */
DECL|macro|ATIF_PROBE
mdefine_line|#define ATIF_PROBE&t;1&t;&t;/* Probing for an address */
DECL|macro|ATIF_PROBE_FAIL
mdefine_line|#define ATIF_PROBE_FAIL&t;2&t;&t;/* Probe collided */
DECL|member|nets
r_struct
id|netrange
id|nets
suffix:semicolon
multiline_comment|/* Associated direct netrange */
DECL|member|next
r_struct
id|atalk_iface
op_star
id|next
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|atalk_sock
r_struct
id|atalk_sock
(brace
DECL|member|dest_net
r_int
r_int
id|dest_net
suffix:semicolon
DECL|member|src_net
r_int
r_int
id|src_net
suffix:semicolon
DECL|member|dest_node
r_int
r_char
id|dest_node
suffix:semicolon
DECL|member|src_node
r_int
r_char
id|src_node
suffix:semicolon
DECL|member|dest_port
r_int
r_char
id|dest_port
suffix:semicolon
DECL|member|src_port
r_int
r_char
id|src_port
suffix:semicolon
)brace
suffix:semicolon
macro_line|#ifdef __KERNEL__
macro_line|#include &lt;asm/byteorder.h&gt;
DECL|struct|ddpehdr
r_struct
id|ddpehdr
(brace
macro_line|#ifdef __LITTLE_ENDIAN_BITFIELD
DECL|member|deh_len
DECL|member|deh_hops
DECL|member|deh_pad
id|__u16
id|deh_len
suffix:colon
l_int|10
comma
id|deh_hops
suffix:colon
l_int|4
comma
id|deh_pad
suffix:colon
l_int|2
suffix:semicolon
macro_line|#else
id|__u16
id|deh_pad
suffix:colon
l_int|2
comma
id|deh_hops
suffix:colon
l_int|4
comma
id|deh_len
suffix:colon
l_int|10
suffix:semicolon
macro_line|#endif
DECL|member|deh_sum
id|__u16
id|deh_sum
suffix:semicolon
DECL|member|deh_dnet
id|__u16
id|deh_dnet
suffix:semicolon
DECL|member|deh_snet
id|__u16
id|deh_snet
suffix:semicolon
DECL|member|deh_dnode
id|__u8
id|deh_dnode
suffix:semicolon
DECL|member|deh_snode
id|__u8
id|deh_snode
suffix:semicolon
DECL|member|deh_dport
id|__u8
id|deh_dport
suffix:semicolon
DECL|member|deh_sport
id|__u8
id|deh_sport
suffix:semicolon
multiline_comment|/* And netatalk apps expect to stick the type in themselves */
)brace
suffix:semicolon
multiline_comment|/*&n; *&t;Don&squot;t drop the struct into the struct above.  You&squot;ll get some&n; *&t;surprise padding.&n; */
DECL|struct|ddpebits
r_struct
id|ddpebits
(brace
macro_line|#ifdef __LITTLE_ENDIAN_BITFIELD
DECL|member|deh_len
DECL|member|deh_hops
DECL|member|deh_pad
id|__u16
id|deh_len
suffix:colon
l_int|10
comma
id|deh_hops
suffix:colon
l_int|4
comma
id|deh_pad
suffix:colon
l_int|2
suffix:semicolon
macro_line|#else
id|__u16
id|deh_pad
suffix:colon
l_int|2
comma
id|deh_hops
suffix:colon
l_int|4
comma
id|deh_len
suffix:colon
l_int|10
suffix:semicolon
macro_line|#endif
)brace
suffix:semicolon
multiline_comment|/*&n; *&t;Short form header&n; */
DECL|struct|ddpshdr
r_struct
id|ddpshdr
(brace
macro_line|#ifdef __LITTLE_ENDIAN_BITFIELD
DECL|member|dsh_len
DECL|member|dsh_pad
id|__u16
id|dsh_len
suffix:colon
l_int|10
comma
id|dsh_pad
suffix:colon
l_int|6
suffix:semicolon
macro_line|#else
id|__u16
id|dsh_pad
suffix:colon
l_int|6
comma
id|dsh_len
suffix:colon
l_int|10
suffix:semicolon
macro_line|#endif
DECL|member|dsh_dport
id|__u8
id|dsh_dport
suffix:semicolon
DECL|member|dsh_sport
id|__u8
id|dsh_sport
suffix:semicolon
multiline_comment|/* And netatalk apps expect to stick the type in themselves */
)brace
suffix:semicolon
multiline_comment|/* AppleTalk AARP headers */
DECL|struct|elapaarp
r_struct
id|elapaarp
(brace
DECL|member|hw_type
id|__u16
id|hw_type
suffix:semicolon
DECL|macro|AARP_HW_TYPE_ETHERNET
mdefine_line|#define AARP_HW_TYPE_ETHERNET&t;&t;1
DECL|macro|AARP_HW_TYPE_TOKENRING
mdefine_line|#define AARP_HW_TYPE_TOKENRING&t;&t;2
DECL|member|pa_type
id|__u16
id|pa_type
suffix:semicolon
DECL|member|hw_len
id|__u8
id|hw_len
suffix:semicolon
DECL|member|pa_len
id|__u8
id|pa_len
suffix:semicolon
DECL|macro|AARP_PA_ALEN
mdefine_line|#define AARP_PA_ALEN&t;&t;&t;4
DECL|member|function
id|__u16
id|function
suffix:semicolon
DECL|macro|AARP_REQUEST
mdefine_line|#define AARP_REQUEST&t;&t;&t;1
DECL|macro|AARP_REPLY
mdefine_line|#define AARP_REPLY&t;&t;&t;2
DECL|macro|AARP_PROBE
mdefine_line|#define AARP_PROBE&t;&t;&t;3
DECL|member|hw_src
id|__u8
id|hw_src
(braket
id|ETH_ALEN
)braket
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|pa_src_zero
id|__u8
id|pa_src_zero
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|pa_src_net
id|__u16
id|pa_src_net
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|pa_src_node
id|__u8
id|pa_src_node
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|hw_dst
id|__u8
id|hw_dst
(braket
id|ETH_ALEN
)braket
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|pa_dst_zero
id|__u8
id|pa_dst_zero
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|pa_dst_net
id|__u16
id|pa_dst_net
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
DECL|member|pa_dst_node
id|__u8
id|pa_dst_node
id|__attribute__
(paren
(paren
id|packed
)paren
)paren
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|AARP_EXPIRY_TIME
mdefine_line|#define AARP_EXPIRY_TIME&t;(5*60*HZ)&t;/* Not specified - how long till we drop a resolved entry */
DECL|macro|AARP_HASH_SIZE
mdefine_line|#define AARP_HASH_SIZE&t;&t;16&t;&t;/* Size of hash table */
DECL|macro|AARP_TICK_TIME
mdefine_line|#define AARP_TICK_TIME&t;&t;(HZ/5)&t;&t;/* Fast retransmission timer when resolving */
DECL|macro|AARP_RETRANSMIT_LIMIT
mdefine_line|#define AARP_RETRANSMIT_LIMIT&t;10&t;&t;/* Send 10 requests then give up (2 seconds) */
DECL|macro|AARP_RESOLVE_TIME
mdefine_line|#define AARP_RESOLVE_TIME&t;(10*HZ)&t;&t;/* Some value bigger than total retransmit time + a bit for last reply to appear and to stop continual requests */
r_extern
r_struct
id|datalink_proto
op_star
id|ddp_dl
comma
op_star
id|aarp_dl
suffix:semicolon
r_extern
r_void
id|aarp_proto_init
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/* Inter module exports */
multiline_comment|/*&n; *&t;Give a device find its atif control structure&n; */
DECL|function|atalk_find_dev
r_static
r_inline
r_struct
id|atalk_iface
op_star
id|atalk_find_dev
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
(brace
r_return
id|dev-&gt;atalk_ptr
suffix:semicolon
)brace
r_extern
r_struct
id|at_addr
op_star
id|atalk_find_dev_addr
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
suffix:semicolon
r_extern
r_struct
id|net_device
op_star
id|atrtr_get_dev
c_func
(paren
r_struct
id|at_addr
op_star
id|sa
)paren
suffix:semicolon
r_extern
r_int
id|aarp_send_ddp
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_struct
id|sk_buff
op_star
id|skb
comma
r_struct
id|at_addr
op_star
id|sa
comma
r_void
op_star
id|hwaddr
)paren
suffix:semicolon
r_extern
r_void
id|aarp_send_probe
c_func
(paren
r_struct
id|net_device
op_star
id|dev
comma
r_struct
id|at_addr
op_star
id|addr
)paren
suffix:semicolon
r_extern
r_void
id|aarp_device_down
c_func
(paren
r_struct
id|net_device
op_star
id|dev
)paren
suffix:semicolon
macro_line|#ifdef MODULE
r_extern
r_void
id|aarp_cleanup_module
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif /* MODULE */
macro_line|#endif /* __KERNEL__ */
macro_line|#endif /* __LINUX_ATALK_H__ */
eof
