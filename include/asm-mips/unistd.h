macro_line|#ifndef __ASM_MIPS_UNISTD_H
DECL|macro|__ASM_MIPS_UNISTD_H
mdefine_line|#define __ASM_MIPS_UNISTD_H
macro_line|#ifdef __KERNEL__
macro_line|#include &lt;asm/mipsconfig.h&gt;
multiline_comment|/*&n; * Ugly kludge to enforce 32bit mode proof code.&n; * Access errno via USEG, not KSEGx for internal kernel syscalls&n; */
DECL|macro|errno
mdefine_line|#define errno (*(int *)((unsigned long)&amp;errno - KERNELBASE))
macro_line|#endif /* __KERNEL__ */
multiline_comment|/* XXX - _foo needs to be __foo, while __NR_bar could be _NR_bar. */
DECL|macro|_syscall0
mdefine_line|#define _syscall0(type,name) &bslash;&n;type name(void) &bslash;&n;{ &bslash;&n;register long __res __asm__ (&quot;$2&quot;); &bslash;&n;__asm__ volatile (&quot;syscall&quot; &bslash;&n;                  : &quot;=r&quot; (__res) &bslash;&n;                  : &quot;0&quot; (__NR_##name)); &bslash;&n;if (__res &gt;= 0) &bslash;&n;&t;return (type) __res; &bslash;&n;errno = -__res; &bslash;&n;return -1; &bslash;&n;}
DECL|macro|_syscall1
mdefine_line|#define _syscall1(type,name,atype,a) &bslash;&n;type name(atype a) &bslash;&n;{ &bslash;&n;register long __res __asm__ (&quot;$2&quot;); &bslash;&n;__asm__ volatile (&quot;move&bslash;t$4,%2&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;syscall&quot; &bslash;&n;                  : &quot;=r&quot; (__res) &bslash;&n;                  : &quot;0&quot; (__NR_##name),&quot;r&quot; ((long)(a)) &bslash;&n;                  : &quot;$4&quot;); &bslash;&n;if (__res &gt;= 0) &bslash;&n;&t;return (type) __res; &bslash;&n;errno = -__res; &bslash;&n;return -1; &bslash;&n;}
DECL|macro|_syscall2
mdefine_line|#define _syscall2(type,name,atype,a,btype,b) &bslash;&n;type name(atype a,btype b) &bslash;&n;{ &bslash;&n;register long __res __asm__ (&quot;$2&quot;); &bslash;&n;__asm__ volatile (&quot;move&bslash;t$4,%2&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$5,%3&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;syscall&quot; &bslash;&n;                  : &quot;=r&quot; (__res) &bslash;&n;                  : &quot;0&quot; (__NR_##name),&quot;r&quot; ((long)(a)), &bslash;&n;                                      &quot;r&quot; ((long)(b))); &bslash;&n;                  : &quot;$4&quot;,&quot;$5&quot;); &bslash;&n;if (__res &gt;= 0) &bslash;&n;&t;return (type) __res; &bslash;&n;errno = -__res; &bslash;&n;return -1; &bslash;&n;}
DECL|macro|_syscall3
mdefine_line|#define _syscall3(type,name,atype,a,btype,b,ctype,c) &bslash;&n;type name (atype a, btype b, ctype c) &bslash;&n;{ &bslash;&n;register long __res __asm__ (&quot;$2&quot;); &bslash;&n;__asm__ volatile (&quot;move&bslash;t$4,%2&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$5,%3&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$6,%4&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;syscall&quot; &bslash;&n;                  : &quot;=r&quot; (__res) &bslash;&n;                  : &quot;0&quot; (__NR_##name),&quot;r&quot; ((long)(a)), &bslash;&n;                                      &quot;r&quot; ((long)(b)), &bslash;&n;                                      &quot;r&quot; ((long)(c)) &bslash;&n;                  : &quot;$4&quot;,&quot;$5&quot;,&quot;$6&quot;); &bslash;&n;if (__res&gt;=0) &bslash;&n;&t;return (type) __res; &bslash;&n;errno=-__res; &bslash;&n;return -1; &bslash;&n;}
DECL|macro|_syscall4
mdefine_line|#define _syscall4(type,name,atype,a,btype,b,ctype,c,dtype,d) &bslash;&n;type name (atype a, btype b, ctype c, dtype d) &bslash;&n;{ &bslash;&n;register long __res __asm__ (&quot;$2&quot;); &bslash;&n;__asm__ volatile (&quot;.set&bslash;tnoat&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$4,%2&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$5,%3&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$6,%4&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$7,%5&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;syscall&quot; &bslash;&n;                  : &quot;=r&quot; (__res) &bslash;&n;                  : &quot;0&quot; (__NR_##name),&quot;r&quot; ((long)(a)), &bslash;&n;                                      &quot;r&quot; ((long)(b)), &bslash;&n;                                      &quot;r&quot; ((long)(c)), &bslash;&n;                                      &quot;r&quot; ((long)(d)) &bslash;&n;                  : &quot;$4&quot;,&quot;$5&quot;,&quot;$6&quot;,&quot;$7&quot;); &bslash;&n;if (__res&gt;=0) &bslash;&n;&t;return (type) __res; &bslash;&n;errno=-__res; &bslash;&n;return -1; &bslash;&n;}
DECL|macro|_syscall5
mdefine_line|#define _syscall5(type,name,atype,a,btype,b,ctype,c,dtype,d,etype,e) &bslash;&n;type name (atype a,btype b,ctype c,dtype d,etype e) &bslash;&n;{ &bslash;&n;register long __res __asm__ (&quot;$2&quot;); &bslash;&n;__asm__ volatile (&quot;.set&bslash;tnoat&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$4,%2&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$5,%3&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$6,%4&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$7,%5&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;move&bslash;t$3,%6&bslash;n&bslash;t&quot; &bslash;&n;                  &quot;syscall&quot; &bslash;&n;                  : &quot;=r&quot; (__res) &bslash;&n;                  : &quot;0&quot; (__NR_##name),&quot;r&quot; ((long)(a)), &bslash;&n;                                      &quot;r&quot; ((long)(b)), &bslash;&n;                                      &quot;r&quot; ((long)(c)), &bslash;&n;                                      &quot;r&quot; ((long)(d)), &bslash;&n;                                      &quot;r&quot; ((long)(e)) &bslash;&n;                  : &quot;$3&quot;,&quot;$4&quot;,&quot;$5&quot;,&quot;$6&quot;,&quot;$7&quot;); &bslash;&n;if (__res&gt;=0) &bslash;&n;&t;return (type) __res; &bslash;&n;errno=-__res; &bslash;&n;return -1; &bslash;&n;}
macro_line|#endif /* __ASM_MIPS_UNISTD_H */
eof
