macro_line|#ifndef __ASM_APIC_H
DECL|macro|__ASM_APIC_H
mdefine_line|#define __ASM_APIC_H
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;asm/apicdef.h&gt;
macro_line|#include &lt;asm/system.h&gt;
DECL|macro|APIC_DEBUG
mdefine_line|#define APIC_DEBUG 1
macro_line|#ifdef CONFIG_X86_LOCAL_APIC
macro_line|#if APIC_DEBUG
DECL|macro|Dprintk
mdefine_line|#define Dprintk(x...) printk(x)
macro_line|#else
DECL|macro|Dprintk
mdefine_line|#define Dprintk(x...)
macro_line|#endif
multiline_comment|/*&n; * Basic functions accessing APICs.&n; */
DECL|function|apic_write
r_extern
id|__inline
r_void
id|apic_write
c_func
(paren
r_int
r_int
id|reg
comma
r_int
r_int
id|v
)paren
(brace
op_star
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
(paren
id|APIC_BASE
op_plus
id|reg
)paren
)paren
op_assign
id|v
suffix:semicolon
)brace
DECL|function|apic_write_atomic
r_extern
id|__inline
r_void
id|apic_write_atomic
c_func
(paren
r_int
r_int
id|reg
comma
r_int
r_int
id|v
)paren
(brace
id|xchg
c_func
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
(paren
id|APIC_BASE
op_plus
id|reg
)paren
comma
id|v
)paren
suffix:semicolon
)brace
DECL|function|apic_read
r_extern
id|__inline
r_int
r_int
id|apic_read
c_func
(paren
r_int
r_int
id|reg
)paren
(brace
r_return
op_star
(paren
(paren
r_volatile
r_int
r_int
op_star
)paren
(paren
id|APIC_BASE
op_plus
id|reg
)paren
)paren
suffix:semicolon
)brace
DECL|function|apic_wait_icr_idle
r_static
id|__inline__
r_void
id|apic_wait_icr_idle
c_func
(paren
r_void
)paren
(brace
r_do
(brace
)brace
r_while
c_loop
(paren
id|apic_read
c_func
(paren
id|APIC_ICR
)paren
op_amp
id|APIC_ICR_BUSY
)paren
suffix:semicolon
)brace
r_extern
r_int
r_int
id|apic_timer_irqs
(braket
id|NR_CPUS
)braket
suffix:semicolon
macro_line|#ifdef CONFIG_X86_GOOD_APIC
DECL|macro|FORCE_READ_AROUND_WRITE
macro_line|# define FORCE_READ_AROUND_WRITE 0
DECL|macro|apic_read_around
macro_line|# define apic_read_around(x)
DECL|macro|apic_write_around
macro_line|# define apic_write_around(x,y) apic_write((x),(y))
macro_line|#else
DECL|macro|FORCE_READ_AROUND_WRITE
macro_line|# define FORCE_READ_AROUND_WRITE 1
DECL|macro|apic_read_around
macro_line|# define apic_read_around(x) apic_read(x)
DECL|macro|apic_write_around
macro_line|# define apic_write_around(x,y) apic_write_atomic((x),(y))
macro_line|#endif
DECL|function|ack_APIC_irq
r_extern
r_inline
r_void
id|ack_APIC_irq
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;&t; * ack_APIC_irq() actually gets compiled as a single instruction:&n;&t; * - a single rmw on Pentium/82489DX&n;&t; * - a single write on P6+ cores (CONFIG_X86_GOOD_APIC)&n;&t; * ... yummie.&n;&t; */
multiline_comment|/* Docs say use 0 for future compatibility */
id|apic_write_around
c_func
(paren
id|APIC_EOI
comma
l_int|0
)paren
suffix:semicolon
)brace
r_extern
r_int
id|get_maxlvt
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|connect_bsp_APIC
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|disconnect_bsp_APIC
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|disable_local_APIC
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|verify_local_APIC
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|cache_APIC_registers
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|sync_Arb_IDs
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|setup_local_APIC
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|init_apic_mappings
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|smp_local_timer_interrupt
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
suffix:semicolon
r_extern
r_void
id|setup_APIC_clocks
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
macro_line|#endif
eof
