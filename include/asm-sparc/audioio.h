multiline_comment|/*&n; * include/asm-sparc/audioio.h&n; *&n; * Sparc Audio Midlayer&n; * Copyright (C) 1996 Thomas K. Dyas (tdyas@noc.rutgers.edu)&n; */
macro_line|#ifndef _AUDIOIO_H_
DECL|macro|_AUDIOIO_H_
mdefine_line|#define _AUDIOIO_H_
multiline_comment|/*&n; *&t;SunOS/Solaris /dev/audio interface&n; */
macro_line|#if defined(__KERNEL__) || !defined(__GLIBC__) || (__GLIBC__ &lt; 2)
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/time.h&gt;
macro_line|#include &lt;linux/ioctl.h&gt;
macro_line|#endif
multiline_comment|/*&n; * This structure contains state information for audio device IO streams.&n; */
DECL|struct|audio_prinfo
r_typedef
r_struct
id|audio_prinfo
(brace
multiline_comment|/*&n;&t; * The following values describe the audio data encoding.&n;&t; */
DECL|member|sample_rate
r_int
r_int
id|sample_rate
suffix:semicolon
multiline_comment|/* samples per second */
DECL|member|channels
r_int
r_int
id|channels
suffix:semicolon
multiline_comment|/* number of interleaved channels */
DECL|member|precision
r_int
r_int
id|precision
suffix:semicolon
multiline_comment|/* bit-width of each sample */
DECL|member|encoding
r_int
r_int
id|encoding
suffix:semicolon
multiline_comment|/* data encoding method */
multiline_comment|/*&n;&t; * The following values control audio device configuration&n;&t; */
DECL|member|gain
r_int
r_int
id|gain
suffix:semicolon
multiline_comment|/* gain level: 0 - 255 */
DECL|member|port
r_int
r_int
id|port
suffix:semicolon
multiline_comment|/* selected I/O port (see below) */
DECL|member|avail_ports
r_int
r_int
id|avail_ports
suffix:semicolon
multiline_comment|/* available I/O ports (see below) */
DECL|member|_xxx
r_int
r_int
id|_xxx
(braket
l_int|2
)braket
suffix:semicolon
multiline_comment|/* Reserved for future use */
DECL|member|buffer_size
r_int
r_int
id|buffer_size
suffix:semicolon
multiline_comment|/* I/O buffer size */
multiline_comment|/*&n;&t; * The following values describe driver state&n;&t; */
DECL|member|samples
r_int
r_int
id|samples
suffix:semicolon
multiline_comment|/* number of samples converted */
DECL|member|eof
r_int
r_int
id|eof
suffix:semicolon
multiline_comment|/* End Of File counter (play only) */
DECL|member|pause
r_int
r_char
id|pause
suffix:semicolon
multiline_comment|/* non-zero for pause, zero to resume */
DECL|member|error
r_int
r_char
id|error
suffix:semicolon
multiline_comment|/* non-zero if overflow/underflow */
DECL|member|waiting
r_int
r_char
id|waiting
suffix:semicolon
multiline_comment|/* non-zero if a process wants access */
DECL|member|balance
r_int
r_char
id|balance
suffix:semicolon
multiline_comment|/* stereo channel balance */
DECL|member|minordev
r_int
r_int
id|minordev
suffix:semicolon
multiline_comment|/*&n;&t; * The following values are read-only state flags&n;&t; */
DECL|member|open
r_int
r_char
id|open
suffix:semicolon
multiline_comment|/* non-zero if open access permitted */
DECL|member|active
r_int
r_char
id|active
suffix:semicolon
multiline_comment|/* non-zero if I/O is active */
DECL|typedef|audio_prinfo_t
)brace
id|audio_prinfo_t
suffix:semicolon
multiline_comment|/*&n; * This structure describes the current state of the audio device.&n; */
DECL|struct|audio_info
r_typedef
r_struct
id|audio_info
(brace
multiline_comment|/*&n;&t; * Per-stream information&n;&t; */
DECL|member|play
id|audio_prinfo_t
id|play
suffix:semicolon
multiline_comment|/* output status information */
DECL|member|record
id|audio_prinfo_t
id|record
suffix:semicolon
multiline_comment|/* input status information */
multiline_comment|/*&n;&t; * Per-unit/channel information&n;&t; */
DECL|member|monitor_gain
r_int
r_int
id|monitor_gain
suffix:semicolon
multiline_comment|/* input to output mix: 0 - 255 */
DECL|member|output_muted
r_int
r_char
id|output_muted
suffix:semicolon
multiline_comment|/* non-zero if output is muted */
DECL|member|_xxx
r_int
r_char
id|_xxx
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* Reserved for future use */
DECL|member|_yyy
r_int
r_int
id|_yyy
(braket
l_int|3
)braket
suffix:semicolon
multiline_comment|/* Reserved for future use */
DECL|typedef|audio_info_t
)brace
id|audio_info_t
suffix:semicolon
multiline_comment|/*&n; * Audio encoding types&n; */
DECL|macro|AUDIO_ENCODING_NONE
mdefine_line|#define&t;AUDIO_ENCODING_NONE&t;(0)&t;/* no encoding assigned&t;  */
DECL|macro|AUDIO_ENCODING_ULAW
mdefine_line|#define&t;AUDIO_ENCODING_ULAW&t;(1)&t;/* u-law encoding&t;  */
DECL|macro|AUDIO_ENCODING_ALAW
mdefine_line|#define&t;AUDIO_ENCODING_ALAW&t;(2)&t;/* A-law encoding&t;  */
DECL|macro|AUDIO_ENCODING_LINEAR
mdefine_line|#define&t;AUDIO_ENCODING_LINEAR&t;(3)&t;/* Linear PCM encoding&t;  */
DECL|macro|AUDIO_ENCODING_FLOAT
mdefine_line|#define AUDIO_ENCODING_FLOAT    (4)     /* IEEE float (-1. &lt;-&gt; +1.) */
DECL|macro|AUDIO_ENCODING_DVI
mdefine_line|#define&t;AUDIO_ENCODING_DVI&t;(104)&t;/* DVI ADPCM&t;&t;  */
DECL|macro|AUDIO_ENCODING_LINEAR8
mdefine_line|#define&t;AUDIO_ENCODING_LINEAR8&t;(105)&t;/* 8 bit UNSIGNED&t;  */
DECL|macro|AUDIO_ENCODING_LINEARLE
mdefine_line|#define&t;AUDIO_ENCODING_LINEARLE&t;(106)&t;/* Linear PCM LE encoding */
multiline_comment|/*&n; * These ranges apply to record, play, and monitor gain values&n; */
DECL|macro|AUDIO_MIN_GAIN
mdefine_line|#define&t;AUDIO_MIN_GAIN&t;(0)&t;/* minimum gain value */
DECL|macro|AUDIO_MAX_GAIN
mdefine_line|#define&t;AUDIO_MAX_GAIN&t;(255)&t;/* maximum gain value */
multiline_comment|/*&n; * These values apply to the balance field to adjust channel gain values&n; */
DECL|macro|AUDIO_LEFT_BALANCE
mdefine_line|#define&t;AUDIO_LEFT_BALANCE&t;(0)&t;/* left channel only&t;*/
DECL|macro|AUDIO_MID_BALANCE
mdefine_line|#define&t;AUDIO_MID_BALANCE&t;(32)&t;/* equal left/right channel */
DECL|macro|AUDIO_RIGHT_BALANCE
mdefine_line|#define&t;AUDIO_RIGHT_BALANCE&t;(64)&t;/* right channel only&t;*/
DECL|macro|AUDIO_BALANCE_SHIFT
mdefine_line|#define&t;AUDIO_BALANCE_SHIFT&t;(3)
multiline_comment|/*&n; * Generic minimum/maximum limits for number of channels, both modes&n; */
DECL|macro|AUDIO_MIN_PLAY_CHANNELS
mdefine_line|#define&t;AUDIO_MIN_PLAY_CHANNELS&t;(1)
DECL|macro|AUDIO_MAX_PLAY_CHANNELS
mdefine_line|#define&t;AUDIO_MAX_PLAY_CHANNELS&t;(4)
DECL|macro|AUDIO_MIN_REC_CHANNELS
mdefine_line|#define&t;AUDIO_MIN_REC_CHANNELS&t;(1)
DECL|macro|AUDIO_MAX_REC_CHANNELS
mdefine_line|#define&t;AUDIO_MAX_REC_CHANNELS&t;(4)
multiline_comment|/*&n; * Generic minimum/maximum limits for sample precision&n; */
DECL|macro|AUDIO_MIN_PLAY_PRECISION
mdefine_line|#define&t;AUDIO_MIN_PLAY_PRECISION&t;(8)
DECL|macro|AUDIO_MAX_PLAY_PRECISION
mdefine_line|#define&t;AUDIO_MAX_PLAY_PRECISION&t;(32)
DECL|macro|AUDIO_MIN_REC_PRECISION
mdefine_line|#define&t;AUDIO_MIN_REC_PRECISION&t;&t;(8)
DECL|macro|AUDIO_MAX_REC_PRECISION
mdefine_line|#define&t;AUDIO_MAX_REC_PRECISION&t;&t;(32)
multiline_comment|/*&n; * Define some convenient names for typical audio ports&n; */
multiline_comment|/*&n; * output ports (several may be enabled simultaneously)&n; */
DECL|macro|AUDIO_SPEAKER
mdefine_line|#define&t;AUDIO_SPEAKER&t;&t;0x01&t;/* output to built-in speaker */
DECL|macro|AUDIO_HEADPHONE
mdefine_line|#define&t;AUDIO_HEADPHONE&t;&t;0x02&t;/* output to headphone jack */
DECL|macro|AUDIO_LINE_OUT
mdefine_line|#define&t;AUDIO_LINE_OUT&t;&t;0x04&t;/* output to line out&t; */
multiline_comment|/*&n; * input ports (usually only one at a time)&n; */
DECL|macro|AUDIO_MICROPHONE
mdefine_line|#define&t;AUDIO_MICROPHONE&t;0x01&t;/* input from microphone */
DECL|macro|AUDIO_LINE_IN
mdefine_line|#define&t;AUDIO_LINE_IN&t;&t;0x02&t;/* input from line in&t; */
DECL|macro|AUDIO_CD
mdefine_line|#define&t;AUDIO_CD&t;&t;0x04&t;/* input from on-board CD inputs */
DECL|macro|AUDIO_INTERNAL_CD_IN
mdefine_line|#define&t;AUDIO_INTERNAL_CD_IN&t;AUDIO_CD&t;/* input from internal CDROM */
DECL|macro|AUDIO_ANALOG_LOOPBACK
mdefine_line|#define AUDIO_ANALOG_LOOPBACK   0x40    /* input from output */
multiline_comment|/*&n; * This macro initializes an audio_info structure to &squot;harmless&squot; values.&n; * Note that (~0) might not be a harmless value for a flag that was&n; * a signed int.&n; */
DECL|macro|AUDIO_INITINFO
mdefine_line|#define&t;AUDIO_INITINFO(i)&t;{&t;&t;&t;&t;&t;&bslash;&n;&t;unsigned int&t;*__x__;&t;&t;&t;&t;&t;&t;&bslash;&n;&t;for (__x__ = (unsigned int *)(i);&t;&t;&t;&t;&bslash;&n;&t;    (char *) __x__ &lt; (((char *)(i)) + sizeof (audio_info_t));&t;&bslash;&n;&t;    *__x__++ = ~0);&t;&t;&t;&t;&t;&t;&bslash;&n;}
multiline_comment|/*&n; * These allow testing for what the user wants to set &n; */
DECL|macro|AUD_INITVALUE
mdefine_line|#define AUD_INITVALUE   (~0)
DECL|macro|Modify
mdefine_line|#define Modify(X)       ((unsigned int)(X) != AUD_INITVALUE)
DECL|macro|Modifys
mdefine_line|#define Modifys(X)      ((X) != (unsigned short)AUD_INITVALUE)
DECL|macro|Modifyc
mdefine_line|#define Modifyc(X)      ((X) != (unsigned char)AUD_INITVALUE)
multiline_comment|/*&n; * Parameter for the AUDIO_GETDEV ioctl to determine current&n; * audio devices.&n; */
DECL|macro|MAX_AUDIO_DEV_LEN
mdefine_line|#define&t;MAX_AUDIO_DEV_LEN&t;(16)
DECL|struct|audio_device
r_typedef
r_struct
id|audio_device
(brace
DECL|member|name
r_char
id|name
(braket
id|MAX_AUDIO_DEV_LEN
)braket
suffix:semicolon
DECL|member|version
r_char
id|version
(braket
id|MAX_AUDIO_DEV_LEN
)braket
suffix:semicolon
DECL|member|config
r_char
id|config
(braket
id|MAX_AUDIO_DEV_LEN
)braket
suffix:semicolon
DECL|typedef|audio_device_t
)brace
id|audio_device_t
suffix:semicolon
multiline_comment|/*&n; * Ioctl calls for the audio device.&n; */
multiline_comment|/*&n; * AUDIO_GETINFO retrieves the current state of the audio device.&n; *&n; * AUDIO_SETINFO copies all fields of the audio_info structure whose&n; * values are not set to the initialized value (-1) to the device state.&n; * It performs an implicit AUDIO_GETINFO to return the new state of the&n; * device.  Note that the record.samples and play.samples fields are set&n; * to the last value before the AUDIO_SETINFO took effect.  This allows&n; * an application to reset the counters while atomically retrieving the&n; * last value.&n; *&n; * AUDIO_DRAIN suspends the calling process until the write buffers are&n; * empty.&n; *&n; * AUDIO_GETDEV returns a structure of type audio_device_t which contains&n; * three strings.  The string &quot;name&quot; is a short identifying string (for&n; * example, the SBus Fcode name string), the string &quot;version&quot; identifies&n; * the current version of the device, and the &quot;config&quot; string identifies&n; * the specific configuration of the audio stream.  All fields are&n; * device-dependent -- see the device specific manual pages for details.&n; *&n; * AUDIO_GETDEV_SUNOS returns a number which is an audio device defined &n; * herein (making it not too portable)&n; *&n; * AUDIO_FLUSH stops all playback and recording, clears all queued buffers, &n; * resets error counters, and restarts recording and playback as appropriate&n; * for the current sampling mode.&n; */
DECL|macro|AUDIO_GETINFO
mdefine_line|#define&t;AUDIO_GETINFO&t;_IOR(&squot;A&squot;, 1, audio_info_t)
DECL|macro|AUDIO_SETINFO
mdefine_line|#define&t;AUDIO_SETINFO&t;_IOWR(&squot;A&squot;, 2, audio_info_t)
DECL|macro|AUDIO_DRAIN
mdefine_line|#define&t;AUDIO_DRAIN&t;_IO(&squot;A&squot;, 3)
DECL|macro|AUDIO_GETDEV
mdefine_line|#define&t;AUDIO_GETDEV&t;_IOR(&squot;A&squot;, 4, audio_device_t)
DECL|macro|AUDIO_GETDEV_SUNOS
mdefine_line|#define&t;AUDIO_GETDEV_SUNOS&t;_IOR(&squot;A&squot;, 4, int)
DECL|macro|AUDIO_FLUSH
mdefine_line|#define AUDIO_FLUSH     _IO(&squot;A&squot;, 5)
multiline_comment|/* Define possible audio hardware configurations for &n; * old SunOS-style AUDIO_GETDEV ioctl */
DECL|macro|AUDIO_DEV_UNKNOWN
mdefine_line|#define AUDIO_DEV_UNKNOWN       (0)     /* not defined */
DECL|macro|AUDIO_DEV_AMD
mdefine_line|#define AUDIO_DEV_AMD           (1)     /* audioamd device */
DECL|macro|AUDIO_DEV_SPEAKERBOX
mdefine_line|#define AUDIO_DEV_SPEAKERBOX    (2)     /* dbri device with speakerbox */
DECL|macro|AUDIO_DEV_CODEC
mdefine_line|#define AUDIO_DEV_CODEC         (3)     /* dbri device (internal speaker) */
DECL|macro|AUDIO_DEV_CS4231
mdefine_line|#define AUDIO_DEV_CS4231        (5)     /* cs4231 device */
multiline_comment|/*&n; * The following ioctl sets the audio device into an internal loopback mode,&n; * if the hardware supports this.  The argument is TRUE to set loopback,&n; * FALSE to reset to normal operation.  If the hardware does not support&n; * internal loopback, the ioctl should fail with EINVAL.&n; * Causes ADC data to be digitally mixed in and sent to the DAC.&n; */
DECL|macro|AUDIO_DIAG_LOOPBACK
mdefine_line|#define&t;AUDIO_DIAG_LOOPBACK&t;_IOW(&squot;A&squot;, 101, int)
multiline_comment|/*&n; *&t;Linux kernel internal implementation.&n; */
macro_line|#ifdef __KERNEL__
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/tqueue.h&gt;
macro_line|#include &lt;linux/wait.h&gt;
DECL|macro|SDF_OPEN_WRITE
mdefine_line|#define&t;SDF_OPEN_WRITE&t;0x00000001
DECL|macro|SDF_OPEN_READ
mdefine_line|#define&t;SDF_OPEN_READ&t;0x00000002
DECL|struct|sparcaudio_ringbuffer
r_struct
id|sparcaudio_ringbuffer
(brace
DECL|member|rb_start
DECL|member|rb_end
id|__u8
op_star
id|rb_start
comma
op_star
id|rb_end
suffix:semicolon
multiline_comment|/* start, end of this memory buffer */
DECL|member|rb_in
DECL|member|rb_out
id|__u8
op_star
id|rb_in
comma
op_star
id|rb_out
suffix:semicolon
multiline_comment|/* input, output pointers */
DECL|member|rb_fragsize
r_int
id|rb_fragsize
suffix:semicolon
multiline_comment|/* size of an audio frag */
DECL|member|rb_numfrags
r_int
id|rb_numfrags
suffix:semicolon
multiline_comment|/* number of frags */
DECL|member|rb_count
DECL|member|rb_hiwat
DECL|member|rb_lowat
r_int
id|rb_count
comma
id|rb_hiwat
comma
id|rb_lowat
suffix:semicolon
multiline_comment|/* bytes in use, hi/lo wat points */
DECL|member|rb_bufsize
r_int
id|rb_bufsize
suffix:semicolon
multiline_comment|/* total size of buffer */
)brace
suffix:semicolon
DECL|struct|sparcaudio_driver
r_struct
id|sparcaudio_driver
(brace
DECL|member|name
r_const
r_char
op_star
id|name
suffix:semicolon
DECL|member|ops
r_struct
id|sparcaudio_operations
op_star
id|ops
suffix:semicolon
DECL|member|private
r_void
op_star
r_private
suffix:semicolon
DECL|member|flags
r_int
r_int
id|flags
suffix:semicolon
DECL|member|sd_siglist
r_struct
id|strevent
op_star
id|sd_siglist
suffix:semicolon
multiline_comment|/* duplex: 0=simplex, 1=duplex, 2=loop */
DECL|member|sd_sigflags
DECL|member|duplex
r_int
id|sd_sigflags
comma
id|duplex
suffix:semicolon
multiline_comment|/* Which audio device are we? */
DECL|member|index
r_int
id|index
suffix:semicolon
multiline_comment|/* This device */
DECL|member|dev
r_struct
id|sbus_dev
op_star
id|dev
suffix:semicolon
multiline_comment|/* Processes blocked on open() sit here. */
DECL|member|open_wait
id|wait_queue_head_t
id|open_wait
suffix:semicolon
multiline_comment|/* Task queue for this driver&squot;s bottom half. */
DECL|member|tqueue
r_struct
id|tq_struct
id|tqueue
suffix:semicolon
multiline_comment|/* Start of ring buffer support */
DECL|member|input_buffer
DECL|member|output_buffer
id|__u8
op_star
id|input_buffer
comma
op_star
id|output_buffer
suffix:semicolon
multiline_comment|/* Support for a circular queue of output buffers. */
DECL|member|output_buffers
id|__u8
op_star
op_star
id|output_buffers
suffix:semicolon
DECL|member|output_sizes
DECL|member|output_size
DECL|member|output_buffer_size
r_int
op_star
id|output_sizes
comma
id|output_size
comma
id|output_buffer_size
suffix:semicolon
DECL|member|num_output_buffers
DECL|member|output_front
DECL|member|output_rear
DECL|member|output_offset
r_int
id|num_output_buffers
comma
id|output_front
comma
id|output_rear
comma
id|output_offset
suffix:semicolon
DECL|member|output_count
DECL|member|output_active
DECL|member|playing_count
DECL|member|output_eof
r_int
id|output_count
comma
id|output_active
comma
id|playing_count
comma
id|output_eof
suffix:semicolon
DECL|member|output_write_wait
DECL|member|output_drain_wait
id|wait_queue_head_t
id|output_write_wait
comma
id|output_drain_wait
suffix:semicolon
DECL|member|output_notify
r_char
op_star
id|output_notify
suffix:semicolon
multiline_comment|/* Support for a circular queue of input buffers. */
DECL|member|input_buffers
id|__u8
op_star
op_star
id|input_buffers
suffix:semicolon
DECL|member|input_sizes
DECL|member|input_size
DECL|member|input_buffer_size
r_int
op_star
id|input_sizes
comma
id|input_size
comma
id|input_buffer_size
suffix:semicolon
DECL|member|num_input_buffers
DECL|member|input_front
DECL|member|input_rear
DECL|member|input_offset
r_int
id|num_input_buffers
comma
id|input_front
comma
id|input_rear
comma
id|input_offset
suffix:semicolon
DECL|member|input_count
DECL|member|input_active
DECL|member|recording_count
r_int
id|input_count
comma
id|input_active
comma
id|recording_count
suffix:semicolon
DECL|member|input_read_wait
id|wait_queue_head_t
id|input_read_wait
suffix:semicolon
multiline_comment|/* Hack to make it look like we support variable size buffers. */
DECL|member|buffer_size
r_int
id|buffer_size
suffix:semicolon
DECL|member|mixer_modify_counter
r_int
id|mixer_modify_counter
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|sparcaudio_operations
r_struct
id|sparcaudio_operations
(brace
DECL|member|open
r_int
(paren
op_star
id|open
)paren
(paren
r_struct
id|inode
op_star
comma
r_struct
id|file
op_star
comma
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
DECL|member|release
r_void
(paren
op_star
id|release
)paren
(paren
r_struct
id|inode
op_star
comma
r_struct
id|file
op_star
comma
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
DECL|member|ioctl
r_int
(paren
op_star
id|ioctl
)paren
(paren
r_struct
id|inode
op_star
comma
r_struct
id|file
op_star
comma
r_int
r_int
comma
r_int
r_int
comma
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Ask driver to begin playing a buffer. */
DECL|member|start_output
r_void
(paren
op_star
id|start_output
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
id|__u8
op_star
comma
r_int
r_int
)paren
suffix:semicolon
multiline_comment|/* Ask driver to stop playing a buffer. */
DECL|member|stop_output
r_void
(paren
op_star
id|stop_output
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Ask driver to begin recording into a buffer. */
DECL|member|start_input
r_void
(paren
op_star
id|start_input
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
id|__u8
op_star
comma
r_int
r_int
)paren
suffix:semicolon
multiline_comment|/* Ask driver to stop recording. */
DECL|member|stop_input
r_void
(paren
op_star
id|stop_input
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Return driver name/version to caller. (/dev/audio specific) */
DECL|member|sunaudio_getdev
r_void
(paren
op_star
id|sunaudio_getdev
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
id|audio_device_t
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output volume. (0-255) */
DECL|member|set_output_volume
r_int
(paren
op_star
id|set_output_volume
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_volume
r_int
(paren
op_star
id|get_output_volume
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input volume. (0-255) */
DECL|member|set_input_volume
r_int
(paren
op_star
id|set_input_volume
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_volume
r_int
(paren
op_star
id|get_input_volume
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the monitor volume. (0-255) */
DECL|member|set_monitor_volume
r_int
(paren
op_star
id|set_monitor_volume
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_monitor_volume
r_int
(paren
op_star
id|get_monitor_volume
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output balance. (0-64) */
DECL|member|set_output_balance
r_int
(paren
op_star
id|set_output_balance
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_balance
r_int
(paren
op_star
id|get_output_balance
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input balance. (0-64) */
DECL|member|set_input_balance
r_int
(paren
op_star
id|set_input_balance
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_balance
r_int
(paren
op_star
id|get_input_balance
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output channels. (1-4) */
DECL|member|set_output_channels
r_int
(paren
op_star
id|set_output_channels
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_channels
r_int
(paren
op_star
id|get_output_channels
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input channels. (1-4) */
DECL|member|set_input_channels
r_int
(paren
op_star
id|set_input_channels
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_channels
r_int
(paren
op_star
id|get_input_channels
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output precision. (8-32) */
DECL|member|set_output_precision
r_int
(paren
op_star
id|set_output_precision
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_precision
r_int
(paren
op_star
id|get_output_precision
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input precision. (8-32) */
DECL|member|set_input_precision
r_int
(paren
op_star
id|set_input_precision
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_precision
r_int
(paren
op_star
id|get_input_precision
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output port. () */
DECL|member|set_output_port
r_int
(paren
op_star
id|set_output_port
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_port
r_int
(paren
op_star
id|get_output_port
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input port. () */
DECL|member|set_input_port
r_int
(paren
op_star
id|set_input_port
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_port
r_int
(paren
op_star
id|get_input_port
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output encoding. () */
DECL|member|set_output_encoding
r_int
(paren
op_star
id|set_output_encoding
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_encoding
r_int
(paren
op_star
id|get_output_encoding
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input encoding. () */
DECL|member|set_input_encoding
r_int
(paren
op_star
id|set_input_encoding
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_encoding
r_int
(paren
op_star
id|get_input_encoding
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the output rate. () */
DECL|member|set_output_rate
r_int
(paren
op_star
id|set_output_rate
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_rate
r_int
(paren
op_star
id|get_output_rate
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set the input rate. () */
DECL|member|set_input_rate
r_int
(paren
op_star
id|set_input_rate
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_rate
r_int
(paren
op_star
id|get_input_rate
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Return driver number to caller. (SunOS /dev/audio specific) */
DECL|member|sunaudio_getdev_sunos
r_int
(paren
op_star
id|sunaudio_getdev_sunos
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get available ports */
DECL|member|get_output_ports
r_int
(paren
op_star
id|get_output_ports
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
DECL|member|get_input_ports
r_int
(paren
op_star
id|get_input_ports
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set output mute */
DECL|member|set_output_muted
r_int
(paren
op_star
id|set_output_muted
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_muted
r_int
(paren
op_star
id|get_output_muted
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set output pause */
DECL|member|set_output_pause
r_int
(paren
op_star
id|set_output_pause
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_pause
r_int
(paren
op_star
id|get_output_pause
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set input pause */
DECL|member|set_input_pause
r_int
(paren
op_star
id|set_input_pause
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_pause
r_int
(paren
op_star
id|get_input_pause
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set output samples */
DECL|member|set_output_samples
r_int
(paren
op_star
id|set_output_samples
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_samples
r_int
(paren
op_star
id|get_output_samples
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set input samples */
DECL|member|set_input_samples
r_int
(paren
op_star
id|set_input_samples
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_samples
r_int
(paren
op_star
id|get_input_samples
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set output error */
DECL|member|set_output_error
r_int
(paren
op_star
id|set_output_error
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_output_error
r_int
(paren
op_star
id|get_output_error
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get and set input error */
DECL|member|set_input_error
r_int
(paren
op_star
id|set_input_error
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
DECL|member|get_input_error
r_int
(paren
op_star
id|get_input_error
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
multiline_comment|/* Get supported encodings */
DECL|member|get_formats
r_int
(paren
op_star
id|get_formats
)paren
(paren
r_struct
id|sparcaudio_driver
op_star
)paren
suffix:semicolon
)brace
suffix:semicolon
r_extern
r_int
id|register_sparcaudio_driver
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
r_extern
r_int
id|unregister_sparcaudio_driver
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
r_extern
r_void
id|sparcaudio_output_done
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
r_extern
r_void
id|sparcaudio_input_done
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
comma
r_int
)paren
suffix:semicolon
r_extern
r_int
id|amd7930_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|cs4231_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|dbri_init
c_func
(paren
r_void
)paren
suffix:semicolon
macro_line|#endif
multiline_comment|/* Device minor numbers */
DECL|macro|SPARCAUDIO_MIXER_MINOR
mdefine_line|#define SPARCAUDIO_MIXER_MINOR 0
multiline_comment|/* No sequencer (1) */
multiline_comment|/* No midi (2) */
DECL|macro|SPARCAUDIO_DSP_MINOR
mdefine_line|#define SPARCAUDIO_DSP_MINOR   3
DECL|macro|SPARCAUDIO_AUDIO_MINOR
mdefine_line|#define SPARCAUDIO_AUDIO_MINOR 4
DECL|macro|SPARCAUDIO_DSP16_MINOR
mdefine_line|#define SPARCAUDIO_DSP16_MINOR 5
DECL|macro|SPARCAUDIO_STATUS_MINOR
mdefine_line|#define SPARCAUDIO_STATUS_MINOR 6
DECL|macro|SPARCAUDIO_AUDIOCTL_MINOR
mdefine_line|#define SPARCAUDIO_AUDIOCTL_MINOR 7
multiline_comment|/* No sequencer l2 (8) */
multiline_comment|/* No sound processor (9) */
multiline_comment|/* allocate 2^SPARCAUDIO_DEVICE_SHIFT minors per audio device */
DECL|macro|SPARCAUDIO_DEVICE_SHIFT
mdefine_line|#define SPARCAUDIO_DEVICE_SHIFT 4
multiline_comment|/* With the coming of dummy devices this should perhaps be as high as 5? */
DECL|macro|SPARCAUDIO_MAX_DEVICES
mdefine_line|#define SPARCAUDIO_MAX_DEVICES 3
multiline_comment|/* Streams crap for realaudio */
r_typedef
DECL|struct|strevent
r_struct
id|strevent
(brace
DECL|member|se_next
r_struct
id|strevent
op_star
id|se_next
suffix:semicolon
multiline_comment|/* next event for this stream or NULL*/
DECL|member|se_prev
r_struct
id|strevent
op_star
id|se_prev
suffix:semicolon
multiline_comment|/* previous event for this stream or last&n;                                 * event if this is the first one*/
DECL|member|se_pid
id|pid_t
id|se_pid
suffix:semicolon
multiline_comment|/* process to be signaled */
DECL|member|se_evs
r_int
id|se_evs
suffix:semicolon
multiline_comment|/* events wanted */
DECL|typedef|strevent_t
)brace
id|strevent_t
suffix:semicolon
r_typedef
DECL|struct|stdata
r_struct
id|stdata
(brace
DECL|member|sd_next
r_struct
id|stdata
op_star
id|sd_next
suffix:semicolon
multiline_comment|/* all stdatas are linked together */
DECL|member|sd_prev
r_struct
id|stdata
op_star
id|sd_prev
suffix:semicolon
DECL|member|sd_siglist
r_struct
id|strevent
op_star
id|sd_siglist
suffix:semicolon
multiline_comment|/* processes to be sent SIGPOLL */
DECL|member|sd_sigflags
r_int
id|sd_sigflags
suffix:semicolon
multiline_comment|/* logical OR of all siglist events */
DECL|typedef|stdata_t
)brace
id|stdata_t
suffix:semicolon
DECL|macro|I_NREAD
mdefine_line|#define I_NREAD _IOR(&squot;S&squot;,01, int)
DECL|macro|I_NREAD_SOLARIS
mdefine_line|#define I_NREAD_SOLARIS ((&squot;S&squot;&lt;&lt;8)|1)
DECL|macro|I_FLUSH
mdefine_line|#define I_FLUSH _IO(&squot;S&squot;,05)
DECL|macro|I_FLUSH_SOLARIS
mdefine_line|#define I_FLUSH_SOLARIS ((&squot;S&squot;&lt;&lt;8)|5)
DECL|macro|FLUSHR
mdefine_line|#define FLUSHR  1                       /* flush read queue */
DECL|macro|FLUSHW
mdefine_line|#define FLUSHW  2                       /* flush write queue */
DECL|macro|FLUSHRW
mdefine_line|#define FLUSHRW 3                       /* flush both queues */
DECL|macro|I_SETSIG
mdefine_line|#define I_SETSIG _IO(&squot;S&squot;,011)
DECL|macro|I_SETSIG_SOLARIS
mdefine_line|#define I_SETSIG_SOLARIS ((&squot;S&squot;&lt;&lt;8)|11)
DECL|macro|S_INPUT
mdefine_line|#define S_INPUT         0x01
DECL|macro|S_HIPRI
mdefine_line|#define S_HIPRI         0x02           
DECL|macro|S_OUTPUT
mdefine_line|#define S_OUTPUT        0x04           
DECL|macro|S_MSG
mdefine_line|#define S_MSG           0x08           
DECL|macro|S_ERROR
mdefine_line|#define S_ERROR         0x0010         
DECL|macro|S_HANGUP
mdefine_line|#define S_HANGUP        0x0020         
DECL|macro|S_RDNORM
mdefine_line|#define S_RDNORM        0x0040         
DECL|macro|S_WRNORM
mdefine_line|#define S_WRNORM        S_OUTPUT
DECL|macro|S_RDBAND
mdefine_line|#define S_RDBAND        0x0080         
DECL|macro|S_WRBAND
mdefine_line|#define S_WRBAND        0x0100         
DECL|macro|S_BANDURG
mdefine_line|#define S_BANDURG       0x0200         
DECL|macro|S_ALL
mdefine_line|#define S_ALL           0x03FF
DECL|macro|I_GETSIG
mdefine_line|#define I_GETSIG _IOR(&squot;S&squot;,012,int)
DECL|macro|I_GETSIG_SOLARIS
mdefine_line|#define I_GETSIG_SOLARIS ((&squot;S&squot;&lt;&lt;8)|12)
multiline_comment|/* Conversion between Sun and OSS volume settings */
r_static
id|__inline__
DECL|function|OSS_LEFT
r_int
id|OSS_LEFT
c_func
(paren
r_int
id|value
)paren
(brace
r_return
(paren
(paren
id|value
op_amp
l_int|0xff
)paren
op_mod
l_int|101
)paren
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|OSS_RIGHT
r_int
id|OSS_RIGHT
c_func
(paren
r_int
id|value
)paren
(brace
r_return
(paren
(paren
(paren
id|value
op_rshift
l_int|8
)paren
op_amp
l_int|0xff
)paren
op_mod
l_int|101
)paren
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|O_TO_S
r_int
id|O_TO_S
c_func
(paren
r_int
id|value
)paren
(brace
r_return
id|value
op_star
l_int|255
op_div
l_int|100
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|S_TO_O
r_int
id|S_TO_O
c_func
(paren
r_int
id|value
)paren
(brace
r_return
id|value
op_star
l_int|100
op_div
l_int|255
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|OSS_TO_GAIN
r_int
id|OSS_TO_GAIN
c_func
(paren
r_int
id|value
)paren
(brace
r_int
id|l
op_assign
id|O_TO_S
c_func
(paren
id|OSS_LEFT
c_func
(paren
id|value
)paren
)paren
suffix:semicolon
r_int
id|r
op_assign
id|O_TO_S
c_func
(paren
id|OSS_RIGHT
c_func
(paren
id|value
)paren
)paren
suffix:semicolon
r_return
(paren
(paren
id|l
OG
id|r
)paren
ques
c_cond
id|l
suffix:colon
id|r
)paren
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|OSS_TO_LGAIN
r_int
id|OSS_TO_LGAIN
c_func
(paren
r_int
id|value
)paren
(brace
r_int
id|l
op_assign
id|O_TO_S
c_func
(paren
id|OSS_LEFT
c_func
(paren
id|value
)paren
)paren
suffix:semicolon
r_int
id|r
op_assign
id|O_TO_S
c_func
(paren
id|OSS_RIGHT
c_func
(paren
id|value
)paren
)paren
suffix:semicolon
r_return
(paren
(paren
id|l
OL
id|r
)paren
ques
c_cond
id|l
suffix:colon
id|r
)paren
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|OSS_TO_BAL
r_int
id|OSS_TO_BAL
c_func
(paren
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|OSS_TO_GAIN
c_func
(paren
id|value
)paren
)paren
r_return
id|AUDIO_MID_BALANCE
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|OSS_TO_LGAIN
c_func
(paren
id|value
)paren
)paren
(brace
r_if
c_cond
(paren
id|OSS_TO_GAIN
c_func
(paren
id|value
)paren
op_eq
id|OSS_TO_GAIN
c_func
(paren
id|OSS_RIGHT
c_func
(paren
id|value
)paren
)paren
)paren
r_return
id|AUDIO_RIGHT_BALANCE
suffix:semicolon
r_else
r_return
id|AUDIO_LEFT_BALANCE
suffix:semicolon
)brace
r_if
c_cond
(paren
id|OSS_TO_GAIN
c_func
(paren
id|value
)paren
op_eq
id|OSS_TO_GAIN
c_func
(paren
id|OSS_RIGHT
c_func
(paren
id|value
)paren
)paren
)paren
r_return
(paren
(paren
id|OSS_TO_GAIN
c_func
(paren
id|value
)paren
op_minus
id|OSS_TO_LGAIN
c_func
(paren
id|value
)paren
)paren
op_rshift
id|AUDIO_BALANCE_SHIFT
)paren
op_plus
id|AUDIO_MID_BALANCE
suffix:semicolon
r_else
r_return
id|AUDIO_MID_BALANCE
op_minus
(paren
(paren
id|OSS_TO_GAIN
c_func
(paren
id|value
)paren
op_minus
id|OSS_TO_LGAIN
c_func
(paren
id|value
)paren
)paren
op_rshift
id|AUDIO_BALANCE_SHIFT
)paren
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|BAL_TO_OSS
r_int
id|BAL_TO_OSS
c_func
(paren
r_int
id|value
comma
r_int
r_char
id|balance
)paren
(brace
r_int
id|l
comma
id|r
comma
id|adj
suffix:semicolon
r_if
c_cond
(paren
id|balance
OG
l_int|63
)paren
id|balance
op_assign
l_int|63
suffix:semicolon
r_if
c_cond
(paren
id|balance
OL
id|AUDIO_MID_BALANCE
)paren
(brace
id|l
op_assign
(paren
r_int
)paren
id|value
op_star
l_int|100
op_div
l_int|255
op_plus
(paren
(paren
id|value
op_star
l_int|100
op_mod
l_int|255
)paren
OG
l_int|0
)paren
suffix:semicolon
id|adj
op_assign
(paren
(paren
id|AUDIO_MID_BALANCE
op_minus
id|balance
)paren
op_lshift
id|AUDIO_BALANCE_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adj
OL
id|value
)paren
id|r
op_assign
(paren
r_int
)paren
(paren
id|value
op_minus
id|adj
)paren
op_star
l_int|100
op_div
l_int|255
suffix:semicolon
r_else
id|r
op_assign
l_int|0
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|balance
OG
id|AUDIO_MID_BALANCE
)paren
(brace
id|r
op_assign
(paren
r_int
)paren
id|value
op_star
l_int|100
op_div
l_int|255
op_plus
(paren
(paren
id|value
op_star
l_int|100
op_mod
l_int|255
)paren
OG
l_int|0
)paren
suffix:semicolon
id|adj
op_assign
(paren
(paren
id|balance
op_minus
id|AUDIO_MID_BALANCE
)paren
op_lshift
id|AUDIO_BALANCE_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
id|adj
OL
id|value
)paren
id|l
op_assign
(paren
r_int
)paren
(paren
id|value
op_minus
id|adj
)paren
op_star
l_int|100
op_div
l_int|255
suffix:semicolon
r_else
id|l
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|l
op_assign
id|r
op_assign
(paren
r_int
)paren
id|value
op_star
l_int|100
op_div
l_int|255
op_plus
(paren
(paren
id|value
op_star
l_int|100
op_mod
l_int|255
)paren
OG
l_int|0
)paren
suffix:semicolon
)brace
r_return
(paren
(paren
id|r
op_lshift
l_int|8
)paren
op_plus
id|l
)paren
suffix:semicolon
)brace
macro_line|#ifdef __KERNEL__
multiline_comment|/* OSS mixer ioctl port handling */
r_static
id|__inline__
DECL|function|OSS_PORT_AUDIO
r_int
id|OSS_PORT_AUDIO
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
id|drv
comma
r_int
r_int
id|set
)paren
(brace
r_int
id|p
suffix:semicolon
r_if
c_cond
(paren
id|drv-&gt;ops-&gt;get_output_port
)paren
(brace
id|p
op_assign
id|drv-&gt;ops
op_member_access_from_pointer
id|get_output_port
c_func
(paren
id|drv
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
op_amp
id|set
)paren
r_return
l_int|0x6464
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|OSS_IPORT_AUDIO
r_int
id|OSS_IPORT_AUDIO
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
id|drv
comma
r_int
r_int
id|set
)paren
(brace
r_int
id|p
suffix:semicolon
r_if
c_cond
(paren
id|drv-&gt;ops-&gt;get_input_port
)paren
(brace
id|p
op_assign
id|drv-&gt;ops
op_member_access_from_pointer
id|get_input_port
c_func
(paren
id|drv
)paren
suffix:semicolon
r_if
c_cond
(paren
id|p
op_amp
id|set
)paren
r_return
l_int|0x6464
suffix:semicolon
)brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
id|__inline__
DECL|function|OSS_TWIDDLE_PORT
r_void
id|OSS_TWIDDLE_PORT
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
id|drv
comma
r_int
r_int
id|ioctl
comma
r_int
r_int
id|port
comma
r_int
r_int
id|set
comma
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
id|ioctl
op_eq
id|port
)paren
(brace
r_int
id|p
suffix:semicolon
r_if
c_cond
(paren
id|drv-&gt;ops-&gt;get_output_port
op_logical_and
id|drv-&gt;ops-&gt;set_output_port
)paren
(brace
id|p
op_assign
id|drv-&gt;ops
op_member_access_from_pointer
id|get_output_port
c_func
(paren
id|drv
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|value
op_eq
l_int|0
)paren
op_logical_or
(paren
(paren
id|p
op_amp
id|set
)paren
op_logical_and
(paren
id|OSS_LEFT
c_func
(paren
id|value
)paren
OL
l_int|100
)paren
)paren
)paren
id|drv-&gt;ops
op_member_access_from_pointer
id|set_output_port
c_func
(paren
id|drv
comma
id|p
op_amp
op_complement
(paren
id|set
)paren
)paren
suffix:semicolon
r_else
id|drv-&gt;ops
op_member_access_from_pointer
id|set_output_port
c_func
(paren
id|drv
comma
id|p
op_or
id|set
)paren
suffix:semicolon
)brace
)brace
)brace
r_static
id|__inline__
DECL|function|OSS_TWIDDLE_IPORT
r_void
id|OSS_TWIDDLE_IPORT
c_func
(paren
r_struct
id|sparcaudio_driver
op_star
id|drv
comma
r_int
r_int
id|ioctl
comma
r_int
r_int
id|port
comma
r_int
r_int
id|set
comma
r_int
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
id|ioctl
op_eq
id|port
)paren
(brace
r_int
id|p
suffix:semicolon
r_if
c_cond
(paren
id|drv-&gt;ops-&gt;get_input_port
op_logical_and
id|drv-&gt;ops-&gt;set_input_port
)paren
(brace
id|p
op_assign
id|drv-&gt;ops
op_member_access_from_pointer
id|get_input_port
c_func
(paren
id|drv
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|value
op_eq
l_int|0
)paren
op_logical_or
(paren
(paren
id|p
op_amp
id|set
)paren
op_logical_and
(paren
id|OSS_LEFT
c_func
(paren
id|value
)paren
OL
l_int|100
)paren
)paren
)paren
id|drv-&gt;ops
op_member_access_from_pointer
id|set_input_port
c_func
(paren
id|drv
comma
id|p
op_amp
op_complement
(paren
id|set
)paren
)paren
suffix:semicolon
r_else
id|drv-&gt;ops
op_member_access_from_pointer
id|set_input_port
c_func
(paren
id|drv
comma
id|p
op_or
id|set
)paren
suffix:semicolon
)brace
)brace
)brace
macro_line|#endif /* __KERNEL__ */
macro_line|#endif /* _AUDIOIO_H_ */
eof
