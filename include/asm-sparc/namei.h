multiline_comment|/* $Id: namei.h,v 1.8 1997/09/05 12:38:51 jj Exp $&n; * linux/include/asm-sparc/namei.h&n; *&n; * Routines to handle famous /usr/gnemul/s*.&n; * Included from linux/fs/namei.c&n; */
macro_line|#ifndef __SPARC_NAMEI_H
DECL|macro|__SPARC_NAMEI_H
mdefine_line|#define __SPARC_NAMEI_H
DECL|macro|SPARC_BSD_EMUL
mdefine_line|#define SPARC_BSD_EMUL &quot;usr/gnemul/sunos/&quot;
DECL|macro|SPARC_SOL_EMUL
mdefine_line|#define SPARC_SOL_EMUL &quot;usr/gnemul/solaris/&quot;
r_static
r_inline
r_struct
id|dentry
op_star
DECL|function|__sparc_lookup_dentry
id|__sparc_lookup_dentry
c_func
(paren
r_const
r_char
op_star
id|name
comma
r_int
id|follow_link
)paren
(brace
r_int
id|error
suffix:semicolon
r_struct
id|dentry
op_star
id|base
suffix:semicolon
r_switch
c_cond
(paren
id|current-&gt;personality
)paren
(brace
r_case
id|PER_BSD
suffix:colon
r_case
id|PER_SVR4
suffix:colon
r_break
suffix:semicolon
r_default
suffix:colon
r_return
id|ERR_PTR
c_func
(paren
op_minus
id|ENOENT
)paren
suffix:semicolon
)brace
id|base
op_assign
id|lookup_dentry
(paren
(paren
id|current-&gt;personality
op_eq
id|PER_BSD
)paren
ques
c_cond
id|SPARC_BSD_EMUL
suffix:colon
id|SPARC_SOL_EMUL
comma
id|dget
(paren
id|current-&gt;fs-&gt;root
)paren
comma
l_int|1
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_ERR
(paren
id|base
)paren
)paren
r_return
id|base
suffix:semicolon
id|base
op_assign
id|lookup_dentry
(paren
id|name
comma
id|base
comma
id|follow_link
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_ERR
(paren
id|base
)paren
)paren
r_return
id|base
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|base-&gt;d_inode
)paren
(brace
id|dput
c_func
(paren
id|base
)paren
suffix:semicolon
r_return
id|ERR_PTR
c_func
(paren
op_minus
id|ENOENT
)paren
suffix:semicolon
)brace
r_return
id|base
suffix:semicolon
)brace
DECL|macro|__prefix_lookup_dentry
mdefine_line|#define __prefix_lookup_dentry(name, follow_link)&t;&t;&t;&t;&bslash;&n;&t;dentry = __sparc_lookup_dentry (name, follow_link);&t;&t;&t;&bslash;&n;&t;if (!IS_ERR (dentry)) return dentry;
macro_line|#endif /* __SPARC_NAMEI_H */
eof
