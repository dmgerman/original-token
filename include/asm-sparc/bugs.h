multiline_comment|/*  include/asm-sparc/bugs.h:  Sparc probes for various bugs.&n; *&n; *  Copyright (C) 1994 David S. Miller (davem@caip.rutgers.edu)&n; */
multiline_comment|/*&n; * This is included by init/main.c to check for architecture-dependent bugs.&n; *&n; * Needs:&n; *&t;void check_bugs(void);&n; */
DECL|macro|CONFIG_BUGSPARC
mdefine_line|#define CONFIG_BUGSPARC
macro_line|#include &lt;asm/openprom.h&gt;
r_extern
r_struct
id|linux_romvec
op_star
id|romvec
suffix:semicolon
r_extern
r_int
id|tbase_needs_unmapping
suffix:semicolon
multiline_comment|/* We do the bug workaround in pagetables.c */
DECL|function|check_mmu
r_static
r_void
id|check_mmu
c_func
(paren
r_void
)paren
(brace
r_register
r_struct
id|linux_romvec
op_star
id|lvec
suffix:semicolon
r_register
r_int
id|root_node
suffix:semicolon
r_int
r_int
id|present
suffix:semicolon
id|lvec
op_assign
id|romvec
suffix:semicolon
id|root_node
op_assign
(paren
op_star
(paren
id|romvec-&gt;pv_nodeops-&gt;no_nextnode
)paren
)paren
(paren
l_int|0
)paren
suffix:semicolon
id|tbase_needs_unmapping
op_assign
l_int|0
suffix:semicolon
id|present
op_assign
l_int|0
suffix:semicolon
(paren
op_star
(paren
id|romvec-&gt;pv_nodeops-&gt;no_getprop
)paren
)paren
(paren
id|root_node
comma
l_string|&quot;buserr-type&quot;
comma
(paren
r_char
op_star
)paren
op_amp
id|present
)paren
suffix:semicolon
r_if
c_cond
(paren
id|present
op_eq
l_int|1
)paren
(brace
id|tbase_needs_unmapping
op_assign
l_int|1
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;MMU bug found: not allowing trapbase to be cached&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_return
suffix:semicolon
)brace
r_static
r_void
DECL|function|check_bugs
id|check_bugs
c_func
(paren
r_void
)paren
(brace
id|check_mmu
c_func
(paren
)paren
suffix:semicolon
)brace
eof
