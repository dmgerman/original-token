multiline_comment|/* $Id: md.h,v 1.2 1997/12/27 16:28:38 jj Exp $&n; * md.h: High speed xor_block operation for RAID4/5 &n; *            utilizing the UltraSparc Visual Instruction Set.&n; *&n; * Copyright (C) 1997 Jakub Jelinek (jj@sunsite.mff.cuni.cz)&n; */
macro_line|#ifndef __ASM_MD_H
DECL|macro|__ASM_MD_H
mdefine_line|#define __ASM_MD_H
macro_line|#include &lt;asm/head.h&gt;
macro_line|#include &lt;asm/asi.h&gt;
DECL|macro|HAVE_ARCH_XORBLOCK
mdefine_line|#define HAVE_ARCH_XORBLOCK
DECL|macro|MD_XORBLOCK_ALIGNMENT
mdefine_line|#define MD_XORBLOCK_ALIGNMENT&t;64
multiline_comment|/*&t;void __xor_block (char *dest, char *src, long len)&n; *&t;{&n; *&t;&t;while (len--) *dest++ ^= *src++;&n; * &t;}&n; *&n; *&t;Requirements:&n; *&t;!(((long)dest | (long)src) &amp; (MD_XORBLOCK_ALIGNMENT - 1)) &amp;&amp;&n; *&t;!(len &amp; 127) &amp;&amp; len &gt;= 256&n; */
DECL|function|__xor_block
r_static
r_inline
r_void
id|__xor_block
(paren
r_char
op_star
id|dest
comma
r_char
op_star
id|src
comma
r_int
id|len
)paren
(brace
id|__asm__
id|__volatile__
(paren
"&quot;"
id|wr
op_mod
op_mod
id|g0
comma
op_mod
l_int|3
comma
op_mod
op_mod
id|fprs
id|wr
op_mod
op_mod
id|g0
comma
op_mod
l_int|4
comma
op_mod
op_mod
id|asi
id|membar
macro_line|#LoadStore|#StoreLoad|#StoreStore
id|sub
op_mod
l_int|2
comma
l_int|128
comma
op_mod
l_int|2
id|ldda
(braket
op_mod
l_int|0
)braket
op_mod
l_int|4
comma
op_mod
op_mod
id|f0
id|ldda
(braket
op_mod
l_int|1
)braket
op_mod
l_int|4
comma
op_mod
op_mod
id|f16
l_int|1
suffix:colon
id|ldda
(braket
op_mod
l_int|0
op_plus
l_int|64
)braket
op_mod
op_mod
id|asi
comma
op_mod
op_mod
id|f32
id|fxor
op_mod
op_mod
id|f0
comma
op_mod
op_mod
id|f16
comma
op_mod
op_mod
id|f16
id|fxor
op_mod
op_mod
id|f2
comma
op_mod
op_mod
id|f18
comma
op_mod
op_mod
id|f18
id|fxor
op_mod
op_mod
id|f4
comma
op_mod
op_mod
id|f20
comma
op_mod
op_mod
id|f20
id|fxor
op_mod
op_mod
id|f6
comma
op_mod
op_mod
id|f22
comma
op_mod
op_mod
id|f22
id|fxor
op_mod
op_mod
id|f8
comma
op_mod
op_mod
id|f24
comma
op_mod
op_mod
id|f24
id|fxor
op_mod
op_mod
id|f10
comma
op_mod
op_mod
id|f26
comma
op_mod
op_mod
id|f26
id|fxor
op_mod
op_mod
id|f12
comma
op_mod
op_mod
id|f28
comma
op_mod
op_mod
id|f28
id|fxor
op_mod
op_mod
id|f14
comma
op_mod
op_mod
id|f30
comma
op_mod
op_mod
id|f30
id|stda
op_mod
op_mod
id|f16
comma
(braket
op_mod
l_int|0
)braket
op_mod
l_int|4
id|ldda
(braket
op_mod
l_int|1
op_plus
l_int|64
)braket
op_mod
op_mod
id|asi
comma
op_mod
op_mod
id|f48
id|ldda
(braket
op_mod
l_int|0
op_plus
l_int|128
)braket
op_mod
op_mod
id|asi
comma
op_mod
op_mod
id|f0
id|fxor
op_mod
op_mod
id|f32
comma
op_mod
op_mod
id|f48
comma
op_mod
op_mod
id|f48
id|fxor
op_mod
op_mod
id|f34
comma
op_mod
op_mod
id|f50
comma
op_mod
op_mod
id|f50
id|add
op_mod
l_int|0
comma
l_int|128
comma
op_mod
l_int|0
id|fxor
op_mod
op_mod
id|f36
comma
op_mod
op_mod
id|f52
comma
op_mod
op_mod
id|f52
id|add
op_mod
l_int|1
comma
l_int|128
comma
op_mod
l_int|1
id|fxor
op_mod
op_mod
id|f38
comma
op_mod
op_mod
id|f54
comma
op_mod
op_mod
id|f54
id|subcc
op_mod
l_int|2
comma
l_int|128
comma
op_mod
l_int|2
id|fxor
op_mod
op_mod
id|f40
comma
op_mod
op_mod
id|f56
comma
op_mod
op_mod
id|f56
id|fxor
op_mod
op_mod
id|f42
comma
op_mod
op_mod
id|f58
comma
op_mod
op_mod
id|f58
id|fxor
op_mod
op_mod
id|f44
comma
op_mod
op_mod
id|f60
comma
op_mod
op_mod
id|f60
id|fxor
op_mod
op_mod
id|f46
comma
op_mod
op_mod
id|f62
comma
op_mod
op_mod
id|f62
id|stda
op_mod
op_mod
id|f48
comma
(braket
op_mod
l_int|0
op_minus
l_int|64
)braket
op_mod
op_mod
id|asi
id|bne
comma
id|pt
op_mod
op_mod
id|xcc
comma
l_int|1
id|b
id|ldda
(braket
op_mod
l_int|1
)braket
op_mod
l_int|4
comma
op_mod
op_mod
id|f16
id|ldda
(braket
op_mod
l_int|0
op_plus
l_int|64
)braket
op_mod
op_mod
id|asi
comma
op_mod
op_mod
id|f32
id|fxor
op_mod
op_mod
id|f0
comma
op_mod
op_mod
id|f16
comma
op_mod
op_mod
id|f16
id|fxor
op_mod
op_mod
id|f2
comma
op_mod
op_mod
id|f18
comma
op_mod
op_mod
id|f18
id|fxor
op_mod
op_mod
id|f4
comma
op_mod
op_mod
id|f20
comma
op_mod
op_mod
id|f20
id|fxor
op_mod
op_mod
id|f6
comma
op_mod
op_mod
id|f22
comma
op_mod
op_mod
id|f22
id|fxor
op_mod
op_mod
id|f8
comma
op_mod
op_mod
id|f24
comma
op_mod
op_mod
id|f24
id|fxor
op_mod
op_mod
id|f10
comma
op_mod
op_mod
id|f26
comma
op_mod
op_mod
id|f26
id|fxor
op_mod
op_mod
id|f12
comma
op_mod
op_mod
id|f28
comma
op_mod
op_mod
id|f28
id|fxor
op_mod
op_mod
id|f14
comma
op_mod
op_mod
id|f30
comma
op_mod
op_mod
id|f30
id|stda
op_mod
op_mod
id|f16
comma
(braket
op_mod
l_int|0
)braket
op_mod
l_int|4
id|ldda
(braket
op_mod
l_int|1
op_plus
l_int|64
)braket
op_mod
op_mod
id|asi
comma
op_mod
op_mod
id|f48
id|membar
macro_line|#Sync
id|fxor
op_mod
op_mod
id|f32
comma
op_mod
op_mod
id|f48
comma
op_mod
op_mod
id|f48
id|fxor
op_mod
op_mod
id|f34
comma
op_mod
op_mod
id|f50
comma
op_mod
op_mod
id|f50
id|fxor
op_mod
op_mod
id|f36
comma
op_mod
op_mod
id|f52
comma
op_mod
op_mod
id|f52
id|fxor
op_mod
op_mod
id|f38
comma
op_mod
op_mod
id|f54
comma
op_mod
op_mod
id|f54
id|fxor
op_mod
op_mod
id|f40
comma
op_mod
op_mod
id|f56
comma
op_mod
op_mod
id|f56
id|fxor
op_mod
op_mod
id|f42
comma
op_mod
op_mod
id|f58
comma
op_mod
op_mod
id|f58
id|fxor
op_mod
op_mod
id|f44
comma
op_mod
op_mod
id|f60
comma
op_mod
op_mod
id|f60
id|fxor
op_mod
op_mod
id|f46
comma
op_mod
op_mod
id|f62
comma
op_mod
op_mod
id|f62
id|stda
op_mod
op_mod
id|f48
comma
(braket
op_mod
l_int|0
op_plus
l_int|64
)braket
op_mod
op_mod
id|asi
id|membar
macro_line|#Sync|#StoreStore|#StoreLoad
id|wr
op_mod
op_mod
id|g0
comma
l_int|0
comma
op_mod
op_mod
id|fprs
"&quot;"
suffix:colon
suffix:colon
l_string|&quot;r&quot;
(paren
id|dest
)paren
comma
l_string|&quot;r&quot;
(paren
id|src
)paren
comma
l_string|&quot;r&quot;
(paren
id|len
)paren
comma
l_string|&quot;i&quot;
(paren
id|FPRS_FEF
)paren
comma
l_string|&quot;i&quot;
(paren
id|ASI_BLK_P
)paren
suffix:colon
l_string|&quot;cc&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
)brace
macro_line|#endif /* __ASM_MD_H */
eof
