multiline_comment|/* $Id: pbm.h,v 1.14 1998/05/29 06:00:40 ecd Exp $&n; * pbm.h: U2P PCI bus module pseudo driver software state.&n; *&n; * Copyright (C) 1997 David S. Miller (davem@caip.rutgers.edu)&n; */
macro_line|#ifndef __SPARC64_PBM_H
DECL|macro|__SPARC64_PBM_H
mdefine_line|#define __SPARC64_PBM_H
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;asm/psycho.h&gt;
macro_line|#include &lt;asm/oplib.h&gt;
r_struct
id|linux_pbm_info
suffix:semicolon
multiline_comment|/* This is what we use to determine what the PROM has assigned so&n; * far, so that we can perform assignments for addresses which&n; * were not taken care of by OBP.  See psycho.c for details.&n; * Per-PBM these are ordered by start address.&n; */
DECL|struct|pci_vma
r_struct
id|pci_vma
(brace
DECL|member|next
r_struct
id|pci_vma
op_star
id|next
suffix:semicolon
DECL|member|pbm
r_struct
id|linux_pbm_info
op_star
id|pbm
suffix:semicolon
DECL|member|start
r_int
r_int
id|start
suffix:semicolon
DECL|member|end
r_int
r_int
id|end
suffix:semicolon
DECL|member|offset
r_int
r_int
id|offset
suffix:semicolon
DECL|member|_pad
r_int
r_int
id|_pad
suffix:semicolon
)brace
suffix:semicolon
r_struct
id|linux_psycho
suffix:semicolon
DECL|struct|linux_pbm_info
r_struct
id|linux_pbm_info
(brace
DECL|member|parent
r_struct
id|linux_psycho
op_star
id|parent
suffix:semicolon
DECL|member|IO_assignments
r_struct
id|pci_vma
op_star
id|IO_assignments
suffix:semicolon
DECL|member|MEM_assignments
r_struct
id|pci_vma
op_star
id|MEM_assignments
suffix:semicolon
DECL|member|prom_node
r_int
id|prom_node
suffix:semicolon
DECL|member|prom_name
r_char
id|prom_name
(braket
l_int|64
)braket
suffix:semicolon
DECL|member|pbm_ranges
r_struct
id|linux_prom_pci_ranges
id|pbm_ranges
(braket
id|PROMREG_MAX
)braket
suffix:semicolon
DECL|member|num_pbm_ranges
r_int
id|num_pbm_ranges
suffix:semicolon
DECL|member|pbm_intmap
r_struct
id|linux_prom_pci_intmap
id|pbm_intmap
(braket
id|PROMREG_MAX
)braket
suffix:semicolon
DECL|member|num_pbm_intmap
r_int
id|num_pbm_intmap
suffix:semicolon
DECL|member|pbm_intmask
r_struct
id|linux_prom_pci_intmask
id|pbm_intmask
suffix:semicolon
multiline_comment|/* Now things for the actual PCI bus probes. */
DECL|member|pci_first_busno
r_int
r_int
id|pci_first_busno
suffix:semicolon
DECL|member|pci_last_busno
r_int
r_int
id|pci_last_busno
suffix:semicolon
DECL|member|pci_bus
r_struct
id|pci_bus
id|pci_bus
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|linux_psycho
r_struct
id|linux_psycho
(brace
DECL|member|next
r_struct
id|linux_psycho
op_star
id|next
suffix:semicolon
DECL|member|psycho_regs
r_struct
id|psycho_regs
op_star
id|psycho_regs
suffix:semicolon
DECL|member|pci_config_space
r_int
r_int
op_star
id|pci_config_space
suffix:semicolon
DECL|member|pci_IO_space
r_int
r_int
op_star
id|pci_IO_space
suffix:semicolon
DECL|member|pci_mem_space
r_int
r_int
op_star
id|pci_mem_space
suffix:semicolon
DECL|member|upa_portid
id|u32
id|upa_portid
suffix:semicolon
DECL|member|index
r_int
id|index
suffix:semicolon
DECL|member|pbm_A
r_struct
id|linux_pbm_info
id|pbm_A
suffix:semicolon
DECL|member|pbm_B
r_struct
id|linux_pbm_info
id|pbm_B
suffix:semicolon
multiline_comment|/* Now things for the actual PCI bus probes. */
DECL|member|pci_first_busno
r_int
r_int
id|pci_first_busno
suffix:semicolon
DECL|member|pci_last_busno
r_int
r_int
id|pci_last_busno
suffix:semicolon
DECL|member|pci_bus
r_struct
id|pci_bus
op_star
id|pci_bus
suffix:semicolon
)brace
suffix:semicolon
multiline_comment|/* PCI devices which are not bridges have this placed in their pci_dev&n; * sysdata member.  This makes OBP aware PCI device drivers easier to&n; * code.&n; */
DECL|struct|pcidev_cookie
r_struct
id|pcidev_cookie
(brace
DECL|member|pbm
r_struct
id|linux_pbm_info
op_star
id|pbm
suffix:semicolon
DECL|member|prom_node
r_int
id|prom_node
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|PCI_IRQ_IGN
mdefine_line|#define PCI_IRQ_IGN&t;0x000007c0&t;/* PSYCHO &quot;Int Group Number&quot;. */
DECL|macro|PCI_IRQ_INO
mdefine_line|#define PCI_IRQ_INO&t;0x0000003f&t;/* PSYCHO INO.                */
multiline_comment|/* Used by EBus */
r_extern
r_int
r_int
id|psycho_irq_build
c_func
(paren
r_struct
id|linux_pbm_info
op_star
id|pbm
comma
r_struct
id|pci_dev
op_star
id|pdev
comma
r_int
r_int
id|full_ino
)paren
suffix:semicolon
macro_line|#endif /* !(__SPARC64_PBM_H) */
eof
