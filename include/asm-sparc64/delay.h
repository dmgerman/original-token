multiline_comment|/* $Id: delay.h,v 1.5 1997/06/18 12:36:23 jj Exp $&n; * delay.h: Linux delay routines on the V9.&n; *&n; * Copyright (C) 1996 David S. Miller (davem@caip.rutgers.edu).&n; */
macro_line|#ifndef __SPARC64_DELAY_H
DECL|macro|__SPARC64_DELAY_H
mdefine_line|#define __SPARC64_DELAY_H
r_extern
r_int
r_int
id|loops_per_sec
suffix:semicolon
DECL|function|__delay
r_extern
id|__inline__
r_void
id|__delay
c_func
(paren
r_int
r_int
id|loops
)paren
(brace
id|__asm__
id|__volatile__
c_func
(paren
"&quot;"
id|b
comma
id|pt
op_mod
op_mod
id|xcc
comma
l_float|1f
id|cmp
op_mod
l_int|0
comma
l_int|0
dot
id|align
l_int|32
l_int|1
suffix:colon
id|bne
comma
id|pt
op_mod
op_mod
id|xcc
comma
l_int|1
id|b
id|subcc
op_mod
l_int|0
comma
l_int|1
comma
op_mod
l_int|0
l_string|&quot;&t;: &quot;
op_assign
op_amp
id|r
"&quot;"
(paren
id|loops
)paren
suffix:colon
l_string|&quot;0&quot;
(paren
id|loops
)paren
suffix:colon
l_string|&quot;cc&quot;
)paren
suffix:semicolon
)brace
DECL|function|udelay
r_extern
id|__inline__
r_void
id|udelay
c_func
(paren
r_int
r_int
id|usecs
)paren
(brace
id|usecs
op_mul_assign
l_int|0x00000000000010c6UL
suffix:semicolon
multiline_comment|/* 2**32 / 1000000 */
id|__asm__
id|__volatile__
c_func
(paren
"&quot;"
id|mulx
op_mod
l_int|1
comma
op_mod
l_int|2
comma
op_mod
l_int|0
id|srlx
op_mod
l_int|0
comma
l_int|32
comma
op_mod
l_int|0
l_string|&quot;&t;: &quot;
op_assign
id|r
"&quot;"
(paren
id|usecs
)paren
suffix:colon
l_string|&quot;r&quot;
(paren
id|usecs
)paren
comma
l_string|&quot;r&quot;
(paren
id|loops_per_sec
)paren
)paren
suffix:semicolon
id|__delay
c_func
(paren
id|usecs
)paren
suffix:semicolon
)brace
DECL|function|muldiv
r_extern
id|__inline__
r_int
r_int
id|muldiv
c_func
(paren
r_int
r_int
id|a
comma
r_int
r_int
id|b
comma
r_int
r_int
id|c
)paren
(brace
r_return
(paren
id|a
op_star
id|b
)paren
op_div
id|c
suffix:semicolon
)brace
macro_line|#endif /* defined(__SPARC64_DELAY_H) */
eof
