multiline_comment|/*&n; * linux/include/asm-arm/arch-ebsa285/time.h&n; *&n; * Copyright (c) 1998 Russell King.&n; *&n; * No real time clock on the evalulation board!&n; *&n; * Changelog:&n; *  21-Mar-1998&t;RMK&t;Created&n; */
macro_line|#include &lt;asm/leds.h&gt;
DECL|function|gettimeoffset
r_extern
id|__inline__
r_int
r_int
id|gettimeoffset
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|reset_timer
r_extern
id|__inline__
r_int
id|reset_timer
(paren
r_void
)paren
(brace
r_static
r_int
r_int
id|count
op_assign
l_int|50
suffix:semicolon
r_static
r_int
id|last_pid
suffix:semicolon
op_star
id|CSR_TIMER1_CLR
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|current-&gt;pid
op_ne
id|last_pid
)paren
(brace
id|last_pid
op_assign
id|current-&gt;pid
suffix:semicolon
r_if
c_cond
(paren
id|last_pid
)paren
id|leds_event
c_func
(paren
id|led_idle_end
)paren
suffix:semicolon
r_else
id|leds_event
c_func
(paren
id|led_idle_start
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_decrement
id|count
op_eq
l_int|0
)paren
(brace
id|count
op_assign
l_int|50
suffix:semicolon
id|leds_event
c_func
(paren
id|led_timer
)paren
suffix:semicolon
)brace
r_return
l_int|1
suffix:semicolon
)brace
multiline_comment|/*&n; * We don&squot;t have a RTC to update!&n; */
DECL|macro|update_rtc
mdefine_line|#define update_rtc()
multiline_comment|/*&n; * Set up timer interrupt, and return the current time in seconds.&n; */
DECL|function|setup_timer
r_extern
id|__inline__
r_int
r_int
id|setup_timer
(paren
r_void
)paren
(brace
op_star
id|CSR_TIMER1_CLR
op_assign
l_int|0
suffix:semicolon
op_star
id|CSR_TIMER1_LOAD
op_assign
id|LATCH
suffix:semicolon
op_star
id|CSR_TIMER1_CNTL
op_assign
id|TIMER_CNTL_ENABLE
op_or
id|TIMER_CNTL_AUTORELOAD
op_or
id|TIMER_CNTL_DIV16
suffix:semicolon
r_return
id|mktime
c_func
(paren
l_int|1970
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
)paren
suffix:semicolon
)brace
eof
