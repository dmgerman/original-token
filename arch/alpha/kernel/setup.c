multiline_comment|/*&n; *  linux/arch/alpha/kernel/setup.c&n; *&n; *  Copyright (C) 1995  Linus Torvalds&n; */
multiline_comment|/* 2.3.x bootmem, 1999 Andrea Arcangeli &lt;andrea@suse.de&gt; */
multiline_comment|/*&n; * Bootup setup stuff.&n; */
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/stddef.h&gt;
macro_line|#include &lt;linux/unistd.h&gt;
macro_line|#include &lt;linux/ptrace.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/user.h&gt;
macro_line|#include &lt;linux/a.out.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/config.h&gt;&t;/* CONFIG_ALPHA_LCA etc */
macro_line|#include &lt;linux/mc146818rtc.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/bootmem.h&gt;
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
macro_line|#include &lt;linux/blk.h&gt;
macro_line|#endif
macro_line|#include &lt;linux/notifier.h&gt;
r_extern
r_struct
id|notifier_block
op_star
id|panic_notifier_list
suffix:semicolon
r_static
r_int
id|alpha_panic_event
c_func
(paren
r_struct
id|notifier_block
op_star
comma
r_int
r_int
comma
r_void
op_star
)paren
suffix:semicolon
DECL|variable|alpha_panic_block
r_static
r_struct
id|notifier_block
id|alpha_panic_block
op_assign
(brace
id|alpha_panic_event
comma
l_int|NULL
comma
id|INT_MAX
multiline_comment|/* try to do it first */
)brace
suffix:semicolon
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/hwrpb.h&gt;
macro_line|#include &lt;asm/dma.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/pci.h&gt;
macro_line|#include &lt;asm/mmu_context.h&gt;
macro_line|#include &lt;asm/console.h&gt;
macro_line|#include &quot;proto.h&quot;
macro_line|#include &quot;pci_impl.h&quot;
DECL|variable|hwrpb
r_struct
id|hwrpb_struct
op_star
id|hwrpb
suffix:semicolon
DECL|variable|srm_hae
r_int
r_int
id|srm_hae
suffix:semicolon
multiline_comment|/* Which processor we booted from.  */
DECL|variable|boot_cpuid
r_int
id|boot_cpuid
suffix:semicolon
multiline_comment|/* Using SRM callbacks for initial console output. This works from&n;   setup_arch() time through the end of init_IRQ(), as those places&n;   are under our control.&n;&n;   By default, OFF; set it with a bootcommand arg of &quot;srmcons&quot;.&n;*/
DECL|variable|srmcons_output
r_int
id|srmcons_output
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Enforce a memory size limit; useful for testing. By default, none. */
DECL|variable|mem_size_limit
r_int
r_int
id|mem_size_limit
op_assign
l_int|0
suffix:semicolon
macro_line|#ifdef CONFIG_ALPHA_GENERIC
DECL|variable|alpha_mv
r_struct
id|alpha_machine_vector
id|alpha_mv
suffix:semicolon
DECL|variable|alpha_using_srm
r_int
id|alpha_using_srm
suffix:semicolon
macro_line|#endif
DECL|variable|aux_device_present
r_int
r_char
id|aux_device_present
op_assign
l_int|0xaa
suffix:semicolon
DECL|macro|N
mdefine_line|#define N(a) (sizeof(a)/sizeof(a[0]))
r_static
r_struct
id|alpha_machine_vector
op_star
id|get_sysvec
c_func
(paren
r_int
comma
r_int
comma
r_int
)paren
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|get_sysvec_byname
c_func
(paren
r_const
r_char
op_star
)paren
suffix:semicolon
r_static
r_void
id|get_sysnames
c_func
(paren
r_int
comma
r_int
comma
r_char
op_star
op_star
comma
r_char
op_star
op_star
)paren
suffix:semicolon
multiline_comment|/*&n; * This is setup by the secondary bootstrap loader.  Because&n; * the zero page is zeroed out as soon as the vm system is&n; * initialized, we need to copy things out into a more permanent&n; * place.&n; */
DECL|macro|PARAM
mdefine_line|#define PARAM&t;&t;&t;ZERO_PGE
DECL|macro|COMMAND_LINE
mdefine_line|#define COMMAND_LINE&t;&t;((char*)(PARAM + 0x0000))
DECL|macro|COMMAND_LINE_SIZE
mdefine_line|#define COMMAND_LINE_SIZE&t;256
DECL|macro|INITRD_START
mdefine_line|#define INITRD_START&t;&t;(*(unsigned long *) (PARAM+0x100))
DECL|macro|INITRD_SIZE
mdefine_line|#define INITRD_SIZE&t;&t;(*(unsigned long *) (PARAM+0x108))
DECL|variable|command_line
r_static
r_char
id|command_line
(braket
id|COMMAND_LINE_SIZE
)braket
suffix:semicolon
DECL|variable|saved_command_line
r_char
id|saved_command_line
(braket
id|COMMAND_LINE_SIZE
)braket
suffix:semicolon
multiline_comment|/*&n; * The format of &quot;screen_info&quot; is strange, and due to early&n; * i386-setup code. This is just enough to make the console&n; * code think we&squot;re on a VGA color display.&n; */
DECL|variable|screen_info
r_struct
id|screen_info
id|screen_info
op_assign
(brace
id|orig_x
suffix:colon
l_int|0
comma
id|orig_y
suffix:colon
l_int|25
comma
id|orig_video_cols
suffix:colon
l_int|80
comma
id|orig_video_lines
suffix:colon
l_int|25
comma
id|orig_video_isVGA
suffix:colon
l_int|1
comma
id|orig_video_points
suffix:colon
l_int|16
)brace
suffix:semicolon
multiline_comment|/*&n; * The direct map I/O window, if any.  This should be the same&n; * for all busses, since it&squot;s used by virt_to_bus.&n; */
DECL|variable|__direct_map_base
r_int
r_int
id|__direct_map_base
suffix:semicolon
DECL|variable|__direct_map_size
r_int
r_int
id|__direct_map_size
suffix:semicolon
multiline_comment|/*&n; * Declare all of the machine vectors.&n; */
multiline_comment|/* GCC 2.7.2 (on alpha at least) is lame.  It does not support either &n;   __attribute__((weak)) or #pragma weak.  Bypass it and talk directly&n;   to the assembler.  */
DECL|macro|WEAK
mdefine_line|#define WEAK(X) &bslash;&n;&t;extern struct alpha_machine_vector X; &bslash;&n;&t;asm(&quot;.weak &quot;#X)
DECL|variable|alcor_mv
id|WEAK
c_func
(paren
id|alcor_mv
)paren
suffix:semicolon
DECL|variable|alphabook1_mv
id|WEAK
c_func
(paren
id|alphabook1_mv
)paren
suffix:semicolon
DECL|variable|avanti_mv
id|WEAK
c_func
(paren
id|avanti_mv
)paren
suffix:semicolon
DECL|variable|cabriolet_mv
id|WEAK
c_func
(paren
id|cabriolet_mv
)paren
suffix:semicolon
DECL|variable|clipper_mv
id|WEAK
c_func
(paren
id|clipper_mv
)paren
suffix:semicolon
DECL|variable|dp264_mv
id|WEAK
c_func
(paren
id|dp264_mv
)paren
suffix:semicolon
DECL|variable|eb164_mv
id|WEAK
c_func
(paren
id|eb164_mv
)paren
suffix:semicolon
DECL|variable|eb64p_mv
id|WEAK
c_func
(paren
id|eb64p_mv
)paren
suffix:semicolon
DECL|variable|eb66_mv
id|WEAK
c_func
(paren
id|eb66_mv
)paren
suffix:semicolon
DECL|variable|eb66p_mv
id|WEAK
c_func
(paren
id|eb66p_mv
)paren
suffix:semicolon
DECL|variable|eiger_mv
id|WEAK
c_func
(paren
id|eiger_mv
)paren
suffix:semicolon
DECL|variable|jensen_mv
id|WEAK
c_func
(paren
id|jensen_mv
)paren
suffix:semicolon
DECL|variable|lx164_mv
id|WEAK
c_func
(paren
id|lx164_mv
)paren
suffix:semicolon
DECL|variable|miata_mv
id|WEAK
c_func
(paren
id|miata_mv
)paren
suffix:semicolon
DECL|variable|mikasa_mv
id|WEAK
c_func
(paren
id|mikasa_mv
)paren
suffix:semicolon
DECL|variable|mikasa_primo_mv
id|WEAK
c_func
(paren
id|mikasa_primo_mv
)paren
suffix:semicolon
DECL|variable|monet_mv
id|WEAK
c_func
(paren
id|monet_mv
)paren
suffix:semicolon
DECL|variable|nautilus_mv
id|WEAK
c_func
(paren
id|nautilus_mv
)paren
suffix:semicolon
DECL|variable|noname_mv
id|WEAK
c_func
(paren
id|noname_mv
)paren
suffix:semicolon
DECL|variable|noritake_mv
id|WEAK
c_func
(paren
id|noritake_mv
)paren
suffix:semicolon
DECL|variable|noritake_primo_mv
id|WEAK
c_func
(paren
id|noritake_primo_mv
)paren
suffix:semicolon
DECL|variable|p2k_mv
id|WEAK
c_func
(paren
id|p2k_mv
)paren
suffix:semicolon
DECL|variable|pc164_mv
id|WEAK
c_func
(paren
id|pc164_mv
)paren
suffix:semicolon
DECL|variable|privateer_mv
id|WEAK
c_func
(paren
id|privateer_mv
)paren
suffix:semicolon
DECL|variable|rawhide_mv
id|WEAK
c_func
(paren
id|rawhide_mv
)paren
suffix:semicolon
DECL|variable|ruffian_mv
id|WEAK
c_func
(paren
id|ruffian_mv
)paren
suffix:semicolon
DECL|variable|rx164_mv
id|WEAK
c_func
(paren
id|rx164_mv
)paren
suffix:semicolon
DECL|variable|sable_mv
id|WEAK
c_func
(paren
id|sable_mv
)paren
suffix:semicolon
DECL|variable|sable_gamma_mv
id|WEAK
c_func
(paren
id|sable_gamma_mv
)paren
suffix:semicolon
DECL|variable|sx164_mv
id|WEAK
c_func
(paren
id|sx164_mv
)paren
suffix:semicolon
DECL|variable|takara_mv
id|WEAK
c_func
(paren
id|takara_mv
)paren
suffix:semicolon
DECL|variable|webbrick_mv
id|WEAK
c_func
(paren
id|webbrick_mv
)paren
suffix:semicolon
DECL|variable|wildfire_mv
id|WEAK
c_func
(paren
id|wildfire_mv
)paren
suffix:semicolon
DECL|variable|xl_mv
id|WEAK
c_func
(paren
id|xl_mv
)paren
suffix:semicolon
DECL|variable|xlt_mv
id|WEAK
c_func
(paren
id|xlt_mv
)paren
suffix:semicolon
DECL|macro|WEAK
macro_line|#undef WEAK
multiline_comment|/*&n; * I/O resources inherited from PeeCees.  Except for perhaps the&n; * turbochannel alphas, everyone has these on some sort of SuperIO chip.&n; *&n; * ??? If this becomes less standard, move the struct out into the&n; * machine vector.&n; */
r_static
r_void
id|__init
DECL|function|reserve_std_resources
id|reserve_std_resources
c_func
(paren
r_void
)paren
(brace
r_static
r_struct
id|resource
id|standard_io_resources
(braket
)braket
op_assign
(brace
(brace
l_string|&quot;rtc&quot;
comma
op_minus
l_int|1
comma
op_minus
l_int|1
)brace
comma
(brace
l_string|&quot;dma1&quot;
comma
l_int|0x00
comma
l_int|0x1f
)brace
comma
(brace
l_string|&quot;pic1&quot;
comma
l_int|0x20
comma
l_int|0x3f
)brace
comma
(brace
l_string|&quot;timer&quot;
comma
l_int|0x40
comma
l_int|0x5f
)brace
comma
(brace
l_string|&quot;keyboard&quot;
comma
l_int|0x60
comma
l_int|0x6f
)brace
comma
(brace
l_string|&quot;dma page reg&quot;
comma
l_int|0x80
comma
l_int|0x8f
)brace
comma
(brace
l_string|&quot;pic2&quot;
comma
l_int|0xa0
comma
l_int|0xbf
)brace
comma
(brace
l_string|&quot;dma2&quot;
comma
l_int|0xc0
comma
l_int|0xdf
)brace
comma
)brace
suffix:semicolon
r_struct
id|resource
op_star
id|io
op_assign
op_amp
id|ioport_resource
suffix:semicolon
r_int
id|i
suffix:semicolon
r_if
c_cond
(paren
id|hose_head
)paren
(brace
r_struct
id|pci_controler
op_star
id|hose
suffix:semicolon
r_for
c_loop
(paren
id|hose
op_assign
id|hose_head
suffix:semicolon
id|hose
suffix:semicolon
id|hose
op_assign
id|hose-&gt;next
)paren
r_if
c_cond
(paren
id|hose-&gt;index
op_eq
l_int|0
)paren
(brace
id|io
op_assign
id|hose-&gt;io_space
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/* Fix up for the Jensen&squot;s queer RTC placement.  */
id|standard_io_resources
(braket
l_int|0
)braket
dot
id|start
op_assign
id|RTC_PORT
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|standard_io_resources
(braket
l_int|0
)braket
dot
id|end
op_assign
id|RTC_PORT
c_func
(paren
l_int|0
)paren
op_plus
l_int|0x10
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|N
c_func
(paren
id|standard_io_resources
)paren
suffix:semicolon
op_increment
id|i
)paren
id|request_resource
c_func
(paren
id|io
comma
id|standard_io_resources
op_plus
id|i
)paren
suffix:semicolon
)brace
DECL|macro|PFN_UP
mdefine_line|#define PFN_UP(x)&t;(((x) + PAGE_SIZE-1) &gt;&gt; PAGE_SHIFT)
DECL|macro|PFN_DOWN
mdefine_line|#define PFN_DOWN(x)&t;((x) &gt;&gt; PAGE_SHIFT)
DECL|macro|PFN_PHYS
mdefine_line|#define PFN_PHYS(x)&t;((x) &lt;&lt; PAGE_SHIFT)
DECL|macro|PFN_MAX
mdefine_line|#define PFN_MAX&t;&t;PFN_DOWN(0x80000000)
DECL|macro|for_each_mem_cluster
mdefine_line|#define for_each_mem_cluster(memdesc, cluster, i)&t;&t;&bslash;&n;&t;for ((cluster) = (memdesc)-&gt;cluster, (i) = 0;&t;&t;&bslash;&n;&t;     (i) &lt; (memdesc)-&gt;numclusters; (i)++, (cluster)++)
r_static
r_int
r_int
id|__init
DECL|function|get_mem_size_limit
id|get_mem_size_limit
c_func
(paren
r_char
op_star
id|s
)paren
(brace
r_int
r_int
id|end
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|from
op_assign
id|s
suffix:semicolon
id|end
op_assign
id|simple_strtoul
c_func
(paren
id|from
comma
op_amp
id|from
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_star
id|from
op_eq
l_char|&squot;K&squot;
op_logical_or
op_star
id|from
op_eq
l_char|&squot;k&squot;
)paren
(brace
id|end
op_assign
id|end
op_lshift
l_int|10
suffix:semicolon
id|from
op_increment
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_star
id|from
op_eq
l_char|&squot;M&squot;
op_logical_or
op_star
id|from
op_eq
l_char|&squot;m&squot;
)paren
(brace
id|end
op_assign
id|end
op_lshift
l_int|20
suffix:semicolon
id|from
op_increment
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_star
id|from
op_eq
l_char|&squot;G&squot;
op_logical_or
op_star
id|from
op_eq
l_char|&squot;g&squot;
)paren
(brace
id|end
op_assign
id|end
op_lshift
l_int|30
suffix:semicolon
id|from
op_increment
suffix:semicolon
)brace
r_return
id|end
op_rshift
id|PAGE_SHIFT
suffix:semicolon
multiline_comment|/* Return the PFN of the limit. */
)brace
r_static
r_void
id|__init
DECL|function|setup_memory
id|setup_memory
c_func
(paren
r_void
op_star
id|kernel_end
)paren
(brace
r_struct
id|memclust_struct
op_star
id|cluster
suffix:semicolon
r_struct
id|memdesc_struct
op_star
id|memdesc
suffix:semicolon
r_int
r_int
id|start_kernel_pfn
comma
id|end_kernel_pfn
suffix:semicolon
r_int
r_int
id|bootmap_size
comma
id|bootmap_pages
comma
id|bootmap_start
suffix:semicolon
r_int
r_int
id|start
comma
id|end
suffix:semicolon
r_int
id|i
suffix:semicolon
multiline_comment|/* Find free clusters, and init and free the bootmem accordingly.  */
id|memdesc
op_assign
(paren
r_struct
id|memdesc_struct
op_star
)paren
(paren
id|hwrpb-&gt;mddt_offset
op_plus
(paren
r_int
r_int
)paren
id|hwrpb
)paren
suffix:semicolon
id|for_each_mem_cluster
c_func
(paren
id|memdesc
comma
id|cluster
comma
id|i
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;memcluster %d, usage %01lx, start %8lu, end %8lu&bslash;n&quot;
comma
id|i
comma
id|cluster-&gt;usage
comma
id|cluster-&gt;start_pfn
comma
id|cluster-&gt;start_pfn
op_plus
id|cluster-&gt;numpages
)paren
suffix:semicolon
multiline_comment|/* Bit 0 is console/PALcode reserved.  Bit 1 is&n;&t;&t;   non-volatile memory -- we might want to mark&n;&t;&t;   this for later.  */
r_if
c_cond
(paren
id|cluster-&gt;usage
op_amp
l_int|3
)paren
r_continue
suffix:semicolon
id|end
op_assign
id|cluster-&gt;start_pfn
op_plus
id|cluster-&gt;numpages
suffix:semicolon
r_if
c_cond
(paren
id|end
OG
id|max_low_pfn
)paren
id|max_low_pfn
op_assign
id|end
suffix:semicolon
)brace
r_if
c_cond
(paren
id|mem_size_limit
op_logical_and
id|max_low_pfn
op_ge
id|mem_size_limit
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;setup: forcing memory size to %ldK (from %ldK).&bslash;n&quot;
comma
id|mem_size_limit
op_lshift
(paren
id|PAGE_SHIFT
op_minus
l_int|10
)paren
comma
id|max_low_pfn
op_lshift
(paren
id|PAGE_SHIFT
op_minus
l_int|10
)paren
)paren
suffix:semicolon
id|max_low_pfn
op_assign
id|mem_size_limit
suffix:semicolon
)brace
multiline_comment|/* Find the bounds of kernel memory.  */
id|start_kernel_pfn
op_assign
id|PFN_DOWN
c_func
(paren
id|KERNEL_START_PHYS
)paren
suffix:semicolon
id|end_kernel_pfn
op_assign
id|PFN_UP
c_func
(paren
id|virt_to_phys
c_func
(paren
id|kernel_end
)paren
)paren
suffix:semicolon
id|bootmap_start
op_assign
op_minus
l_int|1
suffix:semicolon
id|try_again
suffix:colon
r_if
c_cond
(paren
id|max_low_pfn
op_le
id|end_kernel_pfn
)paren
id|panic
c_func
(paren
l_string|&quot;not enough memory to boot&quot;
)paren
suffix:semicolon
multiline_comment|/* We need to know how many physically contiguous pages&n;&t;   we&squot;ll need for the bootmap.  */
id|bootmap_pages
op_assign
id|bootmem_bootmap_pages
c_func
(paren
id|max_low_pfn
)paren
suffix:semicolon
multiline_comment|/* Now find a good region where to allocate the bootmap.  */
id|for_each_mem_cluster
c_func
(paren
id|memdesc
comma
id|cluster
comma
id|i
)paren
(brace
r_if
c_cond
(paren
id|cluster-&gt;usage
op_amp
l_int|3
)paren
r_continue
suffix:semicolon
id|start
op_assign
id|cluster-&gt;start_pfn
suffix:semicolon
id|end
op_assign
id|start
op_plus
id|cluster-&gt;numpages
suffix:semicolon
r_if
c_cond
(paren
id|start
op_ge
id|max_low_pfn
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|end
OG
id|max_low_pfn
)paren
id|end
op_assign
id|max_low_pfn
suffix:semicolon
r_if
c_cond
(paren
id|start
OL
id|start_kernel_pfn
)paren
(brace
r_if
c_cond
(paren
id|end
OG
id|end_kernel_pfn
op_logical_and
id|end
op_minus
id|end_kernel_pfn
op_ge
id|bootmap_pages
)paren
(brace
id|bootmap_start
op_assign
id|end_kernel_pfn
suffix:semicolon
r_break
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|end
OG
id|start_kernel_pfn
)paren
id|end
op_assign
id|start_kernel_pfn
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|start
OL
id|end_kernel_pfn
)paren
id|start
op_assign
id|end_kernel_pfn
suffix:semicolon
r_if
c_cond
(paren
id|end
op_minus
id|start
op_ge
id|bootmap_pages
)paren
(brace
id|bootmap_start
op_assign
id|start
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
id|bootmap_start
op_eq
op_minus
l_int|1
)paren
(brace
id|max_low_pfn
op_rshift_assign
l_int|1
suffix:semicolon
r_goto
id|try_again
suffix:semicolon
)brace
multiline_comment|/* Allocate the bootmap and mark the whole MM as reserved.  */
id|bootmap_size
op_assign
id|init_bootmem
c_func
(paren
id|bootmap_start
comma
id|max_low_pfn
)paren
suffix:semicolon
multiline_comment|/* Mark the free regions.  */
id|for_each_mem_cluster
c_func
(paren
id|memdesc
comma
id|cluster
comma
id|i
)paren
(brace
r_if
c_cond
(paren
id|cluster-&gt;usage
op_amp
l_int|3
)paren
r_continue
suffix:semicolon
id|start
op_assign
id|cluster-&gt;start_pfn
suffix:semicolon
id|end
op_assign
id|cluster-&gt;start_pfn
op_plus
id|cluster-&gt;numpages
suffix:semicolon
r_if
c_cond
(paren
id|start
op_ge
id|max_low_pfn
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|end
OG
id|max_low_pfn
)paren
id|end
op_assign
id|max_low_pfn
suffix:semicolon
r_if
c_cond
(paren
id|start
OL
id|start_kernel_pfn
)paren
(brace
r_if
c_cond
(paren
id|end
OG
id|end_kernel_pfn
)paren
(brace
id|free_bootmem
c_func
(paren
id|PFN_PHYS
c_func
(paren
id|start
)paren
comma
(paren
id|PFN_PHYS
c_func
(paren
id|start_kernel_pfn
)paren
op_minus
id|PFN_PHYS
c_func
(paren
id|start
)paren
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;freeing pages %ld:%ld&bslash;n&quot;
comma
id|start
comma
id|start_kernel_pfn
)paren
suffix:semicolon
id|start
op_assign
id|end_kernel_pfn
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|end
OG
id|start_kernel_pfn
)paren
id|end
op_assign
id|start_kernel_pfn
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|start
OL
id|end_kernel_pfn
)paren
id|start
op_assign
id|end_kernel_pfn
suffix:semicolon
r_if
c_cond
(paren
id|start
op_ge
id|end
)paren
r_continue
suffix:semicolon
id|free_bootmem
c_func
(paren
id|PFN_PHYS
c_func
(paren
id|start
)paren
comma
id|PFN_PHYS
c_func
(paren
id|end
)paren
op_minus
id|PFN_PHYS
c_func
(paren
id|start
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;freeing pages %ld:%ld&bslash;n&quot;
comma
id|start
comma
id|end
)paren
suffix:semicolon
)brace
multiline_comment|/* Reserve the bootmap memory.  */
id|reserve_bootmem
c_func
(paren
id|PFN_PHYS
c_func
(paren
id|bootmap_start
)paren
comma
id|bootmap_size
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
id|initrd_start
op_assign
id|INITRD_START
suffix:semicolon
r_if
c_cond
(paren
id|initrd_start
)paren
(brace
id|initrd_end
op_assign
id|initrd_start
op_plus
id|INITRD_SIZE
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Initial ramdisk at: 0x%p (%lu bytes)&bslash;n&quot;
comma
(paren
r_void
op_star
)paren
id|initrd_start
comma
id|INITRD_SIZE
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_void
op_star
)paren
id|initrd_end
OG
id|phys_to_virt
c_func
(paren
id|PFN_PHYS
c_func
(paren
id|max_low_pfn
)paren
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;initrd extends beyond end of memory &quot;
l_string|&quot;(0x%08lx &gt; 0x%p)&bslash;ndisabling initrd&bslash;n&quot;
comma
id|initrd_end
comma
id|phys_to_virt
c_func
(paren
id|PFN_PHYS
c_func
(paren
id|max_low_pfn
)paren
)paren
)paren
suffix:semicolon
id|initrd_start
op_assign
id|initrd_end
op_assign
l_int|0
suffix:semicolon
)brace
r_else
(brace
id|reserve_bootmem
c_func
(paren
id|virt_to_phys
c_func
(paren
(paren
r_void
op_star
)paren
id|initrd_start
)paren
comma
id|INITRD_SIZE
)paren
suffix:semicolon
)brace
)brace
macro_line|#endif /* CONFIG_BLK_DEV_INITRD */
)brace
r_int
id|__init
DECL|function|page_is_ram
id|page_is_ram
c_func
(paren
r_int
r_int
id|pfn
)paren
(brace
r_struct
id|memclust_struct
op_star
id|cluster
suffix:semicolon
r_struct
id|memdesc_struct
op_star
id|memdesc
suffix:semicolon
r_int
id|i
suffix:semicolon
id|memdesc
op_assign
(paren
r_struct
id|memdesc_struct
op_star
)paren
(paren
id|hwrpb-&gt;mddt_offset
op_plus
(paren
r_int
r_int
)paren
id|hwrpb
)paren
suffix:semicolon
id|for_each_mem_cluster
c_func
(paren
id|memdesc
comma
id|cluster
comma
id|i
)paren
(brace
r_if
c_cond
(paren
id|pfn
op_ge
id|cluster-&gt;start_pfn
op_logical_and
id|pfn
OL
id|cluster-&gt;start_pfn
op_plus
id|cluster-&gt;numpages
)paren
(brace
r_return
(paren
id|cluster-&gt;usage
op_amp
l_int|3
)paren
ques
c_cond
l_int|0
suffix:colon
l_int|1
suffix:semicolon
)brace
)brace
r_return
l_int|0
suffix:semicolon
)brace
DECL|macro|PFN_UP
macro_line|#undef PFN_UP
DECL|macro|PFN_DOWN
macro_line|#undef PFN_DOWN
DECL|macro|PFN_PHYS
macro_line|#undef PFN_PHYS
DECL|macro|PFN_MAX
macro_line|#undef PFN_MAX
macro_line|#if defined(CONFIG_ALPHA_GENERIC) || defined(CONFIG_ALPHA_SRM)
multiline_comment|/*&n; *      Manage the SRM callbacks as a &quot;console&quot;.&n; */
DECL|variable|srmcons
r_static
r_struct
id|console
id|srmcons
suffix:semicolon
DECL|function|register_srm_console
r_void
id|__init
id|register_srm_console
c_func
(paren
r_void
)paren
(brace
id|register_console
c_func
(paren
op_amp
id|srmcons
)paren
suffix:semicolon
)brace
DECL|function|unregister_srm_console
r_void
id|__init
id|unregister_srm_console
c_func
(paren
r_void
)paren
(brace
id|unregister_console
c_func
(paren
op_amp
id|srmcons
)paren
suffix:semicolon
)brace
DECL|function|srm_console_write
r_static
r_void
id|srm_console_write
c_func
(paren
r_struct
id|console
op_star
id|co
comma
r_const
r_char
op_star
id|s
comma
r_int
id|count
)paren
(brace
id|srm_printk
c_func
(paren
id|s
)paren
suffix:semicolon
)brace
DECL|function|srm_console_device
r_static
id|kdev_t
id|srm_console_device
c_func
(paren
r_struct
id|console
op_star
id|c
)paren
(brace
multiline_comment|/* Huh? */
r_return
id|MKDEV
c_func
(paren
id|TTY_MAJOR
comma
l_int|64
op_plus
id|c-&gt;index
)paren
suffix:semicolon
)brace
DECL|function|srm_console_wait_key
r_static
r_int
id|srm_console_wait_key
c_func
(paren
r_struct
id|console
op_star
id|co
)paren
(brace
multiline_comment|/* Huh? */
r_return
l_int|1
suffix:semicolon
)brace
DECL|function|srm_console_setup
r_static
r_int
id|__init
id|srm_console_setup
c_func
(paren
r_struct
id|console
op_star
id|co
comma
r_char
op_star
id|options
)paren
(brace
r_return
l_int|1
suffix:semicolon
)brace
DECL|variable|srmcons
r_static
r_struct
id|console
id|srmcons
op_assign
(brace
id|name
suffix:colon
l_string|&quot;srm0&quot;
comma
id|write
suffix:colon
id|srm_console_write
comma
id|device
suffix:colon
id|srm_console_device
comma
id|wait_key
suffix:colon
id|srm_console_wait_key
comma
id|setup
suffix:colon
id|srm_console_setup
comma
id|flags
suffix:colon
id|CON_PRINTBUFFER
op_or
id|CON_ENABLED
comma
multiline_comment|/* fake it out */
id|index
suffix:colon
op_minus
l_int|1
comma
)brace
suffix:semicolon
macro_line|#else
DECL|function|register_srm_console
r_void
id|__init
id|register_srm_console
c_func
(paren
r_void
)paren
(brace
)brace
DECL|function|unregister_srm_console
r_void
id|__init
id|unregister_srm_console
c_func
(paren
r_void
)paren
(brace
)brace
macro_line|#endif
r_void
id|__init
DECL|function|setup_arch
id|setup_arch
c_func
(paren
r_char
op_star
op_star
id|cmdline_p
)paren
(brace
r_extern
r_char
id|_end
(braket
)braket
suffix:semicolon
r_struct
id|alpha_machine_vector
op_star
id|vec
op_assign
l_int|NULL
suffix:semicolon
r_struct
id|percpu_struct
op_star
id|cpu
suffix:semicolon
r_char
op_star
id|type_name
comma
op_star
id|var_name
comma
op_star
id|p
suffix:semicolon
r_void
op_star
id|kernel_end
op_assign
id|_end
suffix:semicolon
multiline_comment|/* end of kernel */
id|hwrpb
op_assign
(paren
r_struct
id|hwrpb_struct
op_star
)paren
id|__va
c_func
(paren
id|INIT_HWRPB-&gt;phys_addr
)paren
suffix:semicolon
id|boot_cpuid
op_assign
id|hard_smp_processor_id
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* Register a call for panic conditions. */
id|notifier_chain_register
c_func
(paren
op_amp
id|panic_notifier_list
comma
op_amp
id|alpha_panic_block
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_ALPHA_GENERIC
multiline_comment|/* Assume that we&squot;ve booted from SRM if we havn&squot;t booted from MILO.&n;&t;   Detect the later by looking for &quot;MILO&quot; in the system serial nr.  */
id|alpha_using_srm
op_assign
id|strncmp
c_func
(paren
(paren
r_const
r_char
op_star
)paren
id|hwrpb-&gt;ssn
comma
l_string|&quot;MILO&quot;
comma
l_int|4
)paren
op_ne
l_int|0
suffix:semicolon
macro_line|#endif
multiline_comment|/* If we are using SRM, we want to allow callbacks&n;&t;   as early as possible, so do this NOW, and then&n;&t;   they should work immediately thereafter.&n;&t;*/
id|kernel_end
op_assign
id|callback_init
c_func
(paren
id|kernel_end
)paren
suffix:semicolon
multiline_comment|/* &n;&t; * Locate the command line.&n;&t; */
multiline_comment|/* Hack for Jensen... since we&squot;re restricted to 8 or 16 chars for&n;&t;   boot flags depending on the boot mode, we need some shorthand.&n;&t;   This should do for installation.  */
r_if
c_cond
(paren
id|strcmp
c_func
(paren
id|COMMAND_LINE
comma
l_string|&quot;INSTALL&quot;
)paren
op_eq
l_int|0
)paren
(brace
id|strcpy
c_func
(paren
id|command_line
comma
l_string|&quot;root=/dev/fd0 load_ramdisk=1&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
id|strncpy
c_func
(paren
id|command_line
comma
id|COMMAND_LINE
comma
r_sizeof
id|command_line
)paren
suffix:semicolon
id|command_line
(braket
r_sizeof
(paren
id|command_line
)paren
op_minus
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
)brace
id|strcpy
c_func
(paren
id|saved_command_line
comma
id|command_line
)paren
suffix:semicolon
op_star
id|cmdline_p
op_assign
id|command_line
suffix:semicolon
multiline_comment|/* &n;&t; * Process command-line arguments.&n;&t; */
r_for
c_loop
(paren
id|p
op_assign
id|strtok
c_func
(paren
id|command_line
comma
l_string|&quot; &bslash;t&quot;
)paren
suffix:semicolon
id|p
suffix:semicolon
id|p
op_assign
id|strtok
c_func
(paren
l_int|NULL
comma
l_string|&quot; &bslash;t&quot;
)paren
)paren
(brace
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|p
comma
l_string|&quot;alpha_mv=&quot;
comma
l_int|9
)paren
op_eq
l_int|0
)paren
(brace
id|vec
op_assign
id|get_sysvec_byname
c_func
(paren
id|p
op_plus
l_int|9
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|p
comma
l_string|&quot;cycle=&quot;
comma
l_int|6
)paren
op_eq
l_int|0
)paren
(brace
id|est_cycle_freq
op_assign
id|simple_strtol
c_func
(paren
id|p
op_plus
l_int|6
comma
l_int|NULL
comma
l_int|0
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|p
comma
l_string|&quot;mem=&quot;
comma
l_int|4
)paren
op_eq
l_int|0
)paren
(brace
id|mem_size_limit
op_assign
id|get_mem_size_limit
c_func
(paren
id|p
op_plus
l_int|4
)paren
suffix:semicolon
r_continue
suffix:semicolon
)brace
r_if
c_cond
(paren
id|strncmp
c_func
(paren
id|p
comma
l_string|&quot;srmcons&quot;
comma
l_int|7
)paren
op_eq
l_int|0
)paren
(brace
id|srmcons_output
op_assign
l_int|1
suffix:semicolon
r_continue
suffix:semicolon
)brace
)brace
multiline_comment|/* Replace the command line, now that we&squot;ve killed it with strtok.  */
id|strcpy
c_func
(paren
id|command_line
comma
id|saved_command_line
)paren
suffix:semicolon
multiline_comment|/* If we want SRM console printk echoing early, do it now. */
r_if
c_cond
(paren
id|alpha_using_srm
op_logical_and
id|srmcons_output
)paren
(brace
id|register_srm_console
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Indentify and reconfigure for the current system.&n;&t; */
id|get_sysnames
c_func
(paren
id|hwrpb-&gt;sys_type
comma
id|hwrpb-&gt;sys_variation
comma
op_amp
id|type_name
comma
op_amp
id|var_name
)paren
suffix:semicolon
r_if
c_cond
(paren
op_star
id|var_name
op_eq
l_char|&squot;0&squot;
)paren
id|var_name
op_assign
l_string|&quot;&quot;
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|vec
)paren
(brace
id|cpu
op_assign
(paren
r_struct
id|percpu_struct
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|hwrpb
op_plus
id|hwrpb-&gt;processor_offset
)paren
suffix:semicolon
id|vec
op_assign
id|get_sysvec
c_func
(paren
id|hwrpb-&gt;sys_type
comma
id|hwrpb-&gt;sys_variation
comma
id|cpu-&gt;type
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
op_logical_neg
id|vec
)paren
(brace
id|panic
c_func
(paren
l_string|&quot;Unsupported system type: %s%s%s (%ld %ld)&bslash;n&quot;
comma
id|type_name
comma
(paren
op_star
id|var_name
ques
c_cond
l_string|&quot; variation &quot;
suffix:colon
l_string|&quot;&quot;
)paren
comma
id|var_name
comma
id|hwrpb-&gt;sys_type
comma
id|hwrpb-&gt;sys_variation
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|vec
op_ne
op_amp
id|alpha_mv
)paren
(brace
id|alpha_mv
op_assign
op_star
id|vec
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;Booting &quot;
macro_line|#ifdef CONFIG_ALPHA_GENERIC
l_string|&quot;GENERIC &quot;
macro_line|#endif
l_string|&quot;on %s%s%s using machine vector %s from %s&bslash;n&quot;
comma
id|type_name
comma
(paren
op_star
id|var_name
ques
c_cond
l_string|&quot; variation &quot;
suffix:colon
l_string|&quot;&quot;
)paren
comma
id|var_name
comma
id|alpha_mv.vector_name
comma
(paren
id|alpha_using_srm
ques
c_cond
l_string|&quot;SRM&quot;
suffix:colon
l_string|&quot;MILO&quot;
)paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Command line: %s&bslash;n&quot;
comma
id|command_line
)paren
suffix:semicolon
multiline_comment|/* &n;&t; * Sync up the HAE.&n;&t; * Save the SRM&squot;s current value for restoration.&n;&t; */
id|srm_hae
op_assign
op_star
id|alpha_mv.hae_register
suffix:semicolon
id|__set_hae
c_func
(paren
id|alpha_mv.hae_cache
)paren
suffix:semicolon
multiline_comment|/* Reset enable correctable error reports.  */
id|wrmces
c_func
(paren
l_int|0x7
)paren
suffix:semicolon
multiline_comment|/* Find our memory.  */
id|setup_memory
c_func
(paren
id|kernel_end
)paren
suffix:semicolon
multiline_comment|/* Initialize the machine.  Usually has to do with setting up&n;&t;   DMA windows and the like.  */
r_if
c_cond
(paren
id|alpha_mv.init_arch
)paren
id|alpha_mv
dot
id|init_arch
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* Reserve standard resources.  */
id|reserve_std_resources
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/* &n;&t; * Give us a default console.  TGA users will see nothing until&n;&t; * chr_dev_init is called, rather late in the boot sequence.&n;&t; */
macro_line|#ifdef CONFIG_VT
macro_line|#if defined(CONFIG_VGA_CONSOLE)
id|conswitchp
op_assign
op_amp
id|vga_con
suffix:semicolon
macro_line|#elif defined(CONFIG_DUMMY_CONSOLE)
id|conswitchp
op_assign
op_amp
id|dummy_con
suffix:semicolon
macro_line|#endif
macro_line|#endif
multiline_comment|/* Default root filesystem to sda2.  */
id|ROOT_DEV
op_assign
id|to_kdev_t
c_func
(paren
l_int|0x0802
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Check ASN in HWRPB for validity, report if bad.&n;&t; * FIXME: how was this failing?  Should we trust it instead,&n;&t; * and copy the value into alpha_mv.max_asn?&n; &t; */
r_if
c_cond
(paren
id|hwrpb-&gt;max_asn
op_ne
id|MAX_ASN
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;Max ASN from HWRPB is bad (0x%lx)&bslash;n&quot;
comma
id|hwrpb-&gt;max_asn
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Identify the flock of penguins.&n;&t; */
macro_line|#ifdef CONFIG_SMP
id|setup_smp
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
id|paging_init
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|variable|sys_unknown
r_static
r_char
id|sys_unknown
(braket
)braket
op_assign
l_string|&quot;Unknown&quot;
suffix:semicolon
DECL|variable|systype_names
r_static
r_char
id|systype_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;0&quot;
comma
l_string|&quot;ADU&quot;
comma
l_string|&quot;Cobra&quot;
comma
l_string|&quot;Ruby&quot;
comma
l_string|&quot;Flamingo&quot;
comma
l_string|&quot;Mannequin&quot;
comma
l_string|&quot;Jensen&quot;
comma
l_string|&quot;Pelican&quot;
comma
l_string|&quot;Morgan&quot;
comma
l_string|&quot;Sable&quot;
comma
l_string|&quot;Medulla&quot;
comma
l_string|&quot;Noname&quot;
comma
l_string|&quot;Turbolaser&quot;
comma
l_string|&quot;Avanti&quot;
comma
l_string|&quot;Mustang&quot;
comma
l_string|&quot;Alcor&quot;
comma
l_string|&quot;Tradewind&quot;
comma
l_string|&quot;Mikasa&quot;
comma
l_string|&quot;EB64&quot;
comma
l_string|&quot;EB66&quot;
comma
l_string|&quot;EB64+&quot;
comma
l_string|&quot;AlphaBook1&quot;
comma
l_string|&quot;Rawhide&quot;
comma
l_string|&quot;K2&quot;
comma
l_string|&quot;Lynx&quot;
comma
l_string|&quot;XL&quot;
comma
l_string|&quot;EB164&quot;
comma
l_string|&quot;Noritake&quot;
comma
l_string|&quot;Cortex&quot;
comma
l_string|&quot;29&quot;
comma
l_string|&quot;Miata&quot;
comma
l_string|&quot;XXM&quot;
comma
l_string|&quot;Takara&quot;
comma
l_string|&quot;Yukon&quot;
comma
l_string|&quot;Tsunami&quot;
comma
l_string|&quot;Wildfire&quot;
comma
l_string|&quot;CUSCO&quot;
comma
l_string|&quot;Eiger&quot;
comma
l_string|&quot;Titan&quot;
)brace
suffix:semicolon
DECL|variable|unofficial_names
r_static
r_char
id|unofficial_names
(braket
)braket
(braket
l_int|8
)braket
op_assign
(brace
l_string|&quot;100&quot;
comma
l_string|&quot;Ruffian&quot;
)brace
suffix:semicolon
DECL|variable|api_names
r_static
r_char
id|api_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;200&quot;
comma
l_string|&quot;Nautilus&quot;
)brace
suffix:semicolon
DECL|variable|eb164_names
r_static
r_char
id|eb164_names
(braket
)braket
(braket
l_int|8
)braket
op_assign
(brace
l_string|&quot;EB164&quot;
comma
l_string|&quot;PC164&quot;
comma
l_string|&quot;LX164&quot;
comma
l_string|&quot;SX164&quot;
comma
l_string|&quot;RX164&quot;
)brace
suffix:semicolon
DECL|variable|eb164_indices
r_static
r_int
id|eb164_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|3
comma
l_int|4
)brace
suffix:semicolon
DECL|variable|alcor_names
r_static
r_char
id|alcor_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;Alcor&quot;
comma
l_string|&quot;Maverick&quot;
comma
l_string|&quot;Bret&quot;
)brace
suffix:semicolon
DECL|variable|alcor_indices
r_static
r_int
id|alcor_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
)brace
suffix:semicolon
DECL|variable|eb64p_names
r_static
r_char
id|eb64p_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;EB64+&quot;
comma
l_string|&quot;Cabriolet&quot;
comma
l_string|&quot;AlphaPCI64&quot;
)brace
suffix:semicolon
DECL|variable|eb64p_indices
r_static
r_int
id|eb64p_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|2
)brace
suffix:semicolon
DECL|variable|eb66_names
r_static
r_char
id|eb66_names
(braket
)braket
(braket
l_int|8
)braket
op_assign
(brace
l_string|&quot;EB66&quot;
comma
l_string|&quot;EB66+&quot;
)brace
suffix:semicolon
DECL|variable|eb66_indices
r_static
r_int
id|eb66_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|1
)brace
suffix:semicolon
DECL|variable|rawhide_names
r_static
r_char
id|rawhide_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;Dodge&quot;
comma
l_string|&quot;Wrangler&quot;
comma
l_string|&quot;Durango&quot;
comma
l_string|&quot;Tincup&quot;
comma
l_string|&quot;DaVinci&quot;
)brace
suffix:semicolon
DECL|variable|rawhide_indices
r_static
r_int
id|rawhide_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|3
comma
l_int|3
comma
l_int|4
comma
l_int|4
)brace
suffix:semicolon
DECL|variable|titan_names
r_static
r_char
id|titan_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;0&quot;
comma
l_string|&quot;Privateer&quot;
)brace
suffix:semicolon
DECL|variable|titan_indices
r_static
r_int
id|titan_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|1
)brace
suffix:semicolon
DECL|variable|tsunami_names
r_static
r_char
id|tsunami_names
(braket
)braket
(braket
l_int|16
)braket
op_assign
(brace
l_string|&quot;0&quot;
comma
l_string|&quot;DP264&quot;
comma
l_string|&quot;Warhol&quot;
comma
l_string|&quot;Windjammer&quot;
comma
l_string|&quot;Monet&quot;
comma
l_string|&quot;Clipper&quot;
comma
l_string|&quot;Goldrush&quot;
comma
l_string|&quot;Webbrick&quot;
comma
l_string|&quot;Catamaran&quot;
)brace
suffix:semicolon
DECL|variable|tsunami_indices
r_static
r_int
id|tsunami_indices
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|1
comma
l_int|2
comma
l_int|3
comma
l_int|4
comma
l_int|5
comma
l_int|6
comma
l_int|7
comma
l_int|8
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|__init
DECL|function|get_sysvec
id|get_sysvec
c_func
(paren
r_int
id|type
comma
r_int
id|variation
comma
r_int
id|cpu
)paren
(brace
r_static
r_struct
id|alpha_machine_vector
op_star
id|systype_vecs
(braket
)braket
id|__initdata
op_assign
(brace
l_int|NULL
comma
multiline_comment|/* 0 */
l_int|NULL
comma
multiline_comment|/* ADU */
l_int|NULL
comma
multiline_comment|/* Cobra */
l_int|NULL
comma
multiline_comment|/* Ruby */
l_int|NULL
comma
multiline_comment|/* Flamingo */
l_int|NULL
comma
multiline_comment|/* Mannequin */
op_amp
id|jensen_mv
comma
l_int|NULL
comma
multiline_comment|/* Pelican */
l_int|NULL
comma
multiline_comment|/* Morgan */
l_int|NULL
comma
multiline_comment|/* Sable -- see below.  */
l_int|NULL
comma
multiline_comment|/* Medulla */
op_amp
id|noname_mv
comma
l_int|NULL
comma
multiline_comment|/* Turbolaser */
op_amp
id|avanti_mv
comma
l_int|NULL
comma
multiline_comment|/* Mustang */
op_amp
id|alcor_mv
comma
multiline_comment|/* Alcor, Bret, Maverick.  */
l_int|NULL
comma
multiline_comment|/* Tradewind */
l_int|NULL
comma
multiline_comment|/* Mikasa -- see below.  */
l_int|NULL
comma
multiline_comment|/* EB64 */
l_int|NULL
comma
multiline_comment|/* EB66 -- see variation.  */
l_int|NULL
comma
multiline_comment|/* EB64+ -- see variation.  */
op_amp
id|alphabook1_mv
comma
op_amp
id|rawhide_mv
comma
l_int|NULL
comma
multiline_comment|/* K2 */
l_int|NULL
comma
multiline_comment|/* Lynx */
op_amp
id|xl_mv
comma
l_int|NULL
comma
multiline_comment|/* EB164 -- see variation.  */
l_int|NULL
comma
multiline_comment|/* Noritake -- see below.  */
l_int|NULL
comma
multiline_comment|/* Cortex */
l_int|NULL
comma
multiline_comment|/* 29 */
op_amp
id|miata_mv
comma
l_int|NULL
comma
multiline_comment|/* XXM */
op_amp
id|takara_mv
comma
l_int|NULL
comma
multiline_comment|/* Yukon */
l_int|NULL
comma
multiline_comment|/* Tsunami -- see variation.  */
op_amp
id|wildfire_mv
comma
multiline_comment|/* Wildfire */
l_int|NULL
comma
multiline_comment|/* CUSCO */
op_amp
id|eiger_mv
comma
multiline_comment|/* Eiger */
l_int|NULL
comma
multiline_comment|/* Titan */
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|unofficial_vecs
(braket
)braket
id|__initdata
op_assign
(brace
l_int|NULL
comma
multiline_comment|/* 100 */
op_amp
id|ruffian_mv
comma
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|api_vecs
(braket
)braket
id|__initdata
op_assign
(brace
l_int|NULL
comma
multiline_comment|/* 200 */
op_amp
id|nautilus_mv
comma
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|alcor_vecs
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|alcor_mv
comma
op_amp
id|xlt_mv
comma
op_amp
id|xlt_mv
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|eb164_vecs
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|eb164_mv
comma
op_amp
id|pc164_mv
comma
op_amp
id|lx164_mv
comma
op_amp
id|sx164_mv
comma
op_amp
id|rx164_mv
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|eb64p_vecs
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|eb64p_mv
comma
op_amp
id|cabriolet_mv
comma
op_amp
id|cabriolet_mv
multiline_comment|/* AlphaPCI64 */
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|eb66_vecs
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|eb66_mv
comma
op_amp
id|eb66p_mv
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|titan_vecs
(braket
)braket
id|__initdata
op_assign
(brace
l_int|NULL
comma
op_amp
id|privateer_mv
comma
multiline_comment|/* privateer */
)brace
suffix:semicolon
r_static
r_struct
id|alpha_machine_vector
op_star
id|tsunami_vecs
(braket
)braket
id|__initdata
op_assign
(brace
l_int|NULL
comma
op_amp
id|dp264_mv
comma
multiline_comment|/* dp264 */
op_amp
id|dp264_mv
comma
multiline_comment|/* warhol */
op_amp
id|dp264_mv
comma
multiline_comment|/* windjammer */
op_amp
id|monet_mv
comma
multiline_comment|/* monet */
op_amp
id|clipper_mv
comma
multiline_comment|/* clipper */
op_amp
id|dp264_mv
comma
multiline_comment|/* goldrush */
op_amp
id|webbrick_mv
comma
multiline_comment|/* webbrick */
op_amp
id|dp264_mv
comma
multiline_comment|/* catamaran */
)brace
suffix:semicolon
multiline_comment|/* ??? Do we need to distinguish between Rawhides?  */
r_struct
id|alpha_machine_vector
op_star
id|vec
suffix:semicolon
multiline_comment|/* Restore real CABRIO and EB66+ family names, ie EB64+ and EB66 */
r_if
c_cond
(paren
id|type
OL
l_int|0
)paren
id|type
op_assign
op_minus
id|type
suffix:semicolon
multiline_comment|/* Search the system tables first... */
id|vec
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|type
OL
id|N
c_func
(paren
id|systype_vecs
)paren
)paren
(brace
id|vec
op_assign
id|systype_vecs
(braket
id|type
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|type
OG
id|ST_API_BIAS
)paren
op_logical_and
(paren
id|type
op_minus
id|ST_API_BIAS
)paren
OL
id|N
c_func
(paren
id|api_vecs
)paren
)paren
(brace
id|vec
op_assign
id|api_vecs
(braket
id|type
op_minus
id|ST_API_BIAS
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|type
OG
id|ST_UNOFFICIAL_BIAS
)paren
op_logical_and
(paren
id|type
op_minus
id|ST_UNOFFICIAL_BIAS
)paren
OL
id|N
c_func
(paren
id|unofficial_vecs
)paren
)paren
(brace
id|vec
op_assign
id|unofficial_vecs
(braket
id|type
op_minus
id|ST_UNOFFICIAL_BIAS
)braket
suffix:semicolon
)brace
multiline_comment|/* If we&squot;ve not found one, try for a variation.  */
r_if
c_cond
(paren
op_logical_neg
id|vec
)paren
(brace
multiline_comment|/* Member ID is a bit-field. */
r_int
id|member
op_assign
(paren
id|variation
op_rshift
l_int|10
)paren
op_amp
l_int|0x3f
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
id|ST_DEC_ALCOR
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|alcor_indices
)paren
)paren
id|vec
op_assign
id|alcor_vecs
(braket
id|alcor_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_EB164
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|eb164_indices
)paren
)paren
id|vec
op_assign
id|eb164_vecs
(braket
id|eb164_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_EB64P
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|eb64p_indices
)paren
)paren
id|vec
op_assign
id|eb64p_vecs
(braket
id|eb64p_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_EB66
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|eb66_indices
)paren
)paren
id|vec
op_assign
id|eb66_vecs
(braket
id|eb66_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_TITAN
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|titan_indices
)paren
)paren
id|vec
op_assign
id|titan_vecs
(braket
id|titan_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_TSUNAMI
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|tsunami_indices
)paren
)paren
id|vec
op_assign
id|tsunami_vecs
(braket
id|tsunami_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_1000
suffix:colon
id|cpu
op_and_assign
l_int|0xffffffff
suffix:semicolon
r_if
c_cond
(paren
id|cpu
op_eq
id|EV5_CPU
op_logical_or
id|cpu
op_eq
id|EV56_CPU
)paren
id|vec
op_assign
op_amp
id|mikasa_primo_mv
suffix:semicolon
r_else
id|vec
op_assign
op_amp
id|mikasa_mv
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_NORITAKE
suffix:colon
id|cpu
op_and_assign
l_int|0xffffffff
suffix:semicolon
r_if
c_cond
(paren
id|cpu
op_eq
id|EV5_CPU
op_logical_or
id|cpu
op_eq
id|EV56_CPU
)paren
id|vec
op_assign
op_amp
id|noritake_primo_mv
suffix:semicolon
r_else
id|vec
op_assign
op_amp
id|noritake_mv
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_2100_A500
suffix:colon
id|cpu
op_and_assign
l_int|0xffffffff
suffix:semicolon
r_if
c_cond
(paren
id|cpu
op_eq
id|EV5_CPU
op_logical_or
id|cpu
op_eq
id|EV56_CPU
)paren
id|vec
op_assign
op_amp
id|sable_gamma_mv
suffix:semicolon
r_else
id|vec
op_assign
op_amp
id|sable_mv
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
r_return
id|vec
suffix:semicolon
)brace
r_static
r_struct
id|alpha_machine_vector
op_star
id|__init
DECL|function|get_sysvec_byname
id|get_sysvec_byname
c_func
(paren
r_const
r_char
op_star
id|name
)paren
(brace
r_static
r_struct
id|alpha_machine_vector
op_star
id|all_vecs
(braket
)braket
id|__initdata
op_assign
(brace
op_amp
id|alcor_mv
comma
op_amp
id|alphabook1_mv
comma
op_amp
id|avanti_mv
comma
op_amp
id|cabriolet_mv
comma
op_amp
id|clipper_mv
comma
op_amp
id|dp264_mv
comma
op_amp
id|eb164_mv
comma
op_amp
id|eb64p_mv
comma
op_amp
id|eb66_mv
comma
op_amp
id|eb66p_mv
comma
op_amp
id|eiger_mv
comma
op_amp
id|jensen_mv
comma
op_amp
id|lx164_mv
comma
op_amp
id|miata_mv
comma
op_amp
id|mikasa_mv
comma
op_amp
id|mikasa_primo_mv
comma
op_amp
id|monet_mv
comma
op_amp
id|nautilus_mv
comma
op_amp
id|noname_mv
comma
op_amp
id|noritake_mv
comma
op_amp
id|noritake_primo_mv
comma
op_amp
id|p2k_mv
comma
op_amp
id|pc164_mv
comma
op_amp
id|privateer_mv
comma
op_amp
id|rawhide_mv
comma
op_amp
id|ruffian_mv
comma
op_amp
id|rx164_mv
comma
op_amp
id|sable_mv
comma
op_amp
id|sable_gamma_mv
comma
op_amp
id|sx164_mv
comma
op_amp
id|takara_mv
comma
op_amp
id|webbrick_mv
comma
op_amp
id|wildfire_mv
comma
op_amp
id|xl_mv
comma
op_amp
id|xlt_mv
)brace
suffix:semicolon
r_int
id|i
comma
id|n
op_assign
r_sizeof
(paren
id|all_vecs
)paren
op_div
r_sizeof
(paren
op_star
id|all_vecs
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|n
suffix:semicolon
op_increment
id|i
)paren
(brace
r_struct
id|alpha_machine_vector
op_star
id|mv
op_assign
id|all_vecs
(braket
id|i
)braket
suffix:semicolon
r_if
c_cond
(paren
id|strcasecmp
c_func
(paren
id|mv-&gt;vector_name
comma
id|name
)paren
op_eq
l_int|0
)paren
r_return
id|mv
suffix:semicolon
)brace
r_return
l_int|NULL
suffix:semicolon
)brace
r_static
r_void
DECL|function|get_sysnames
id|get_sysnames
c_func
(paren
r_int
id|type
comma
r_int
id|variation
comma
r_char
op_star
op_star
id|type_name
comma
r_char
op_star
op_star
id|variation_name
)paren
(brace
r_int
id|member
suffix:semicolon
multiline_comment|/* Restore real CABRIO and EB66+ family names, ie EB64+ and EB66 */
r_if
c_cond
(paren
id|type
OL
l_int|0
)paren
id|type
op_assign
op_minus
id|type
suffix:semicolon
multiline_comment|/* If not in the tables, make it UNKNOWN,&n;&t;   else set type name to family */
r_if
c_cond
(paren
id|type
OL
id|N
c_func
(paren
id|systype_names
)paren
)paren
(brace
op_star
id|type_name
op_assign
id|systype_names
(braket
id|type
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|type
OG
id|ST_API_BIAS
)paren
op_logical_and
(paren
id|type
op_minus
id|ST_API_BIAS
)paren
OL
id|N
c_func
(paren
id|api_names
)paren
)paren
(brace
op_star
id|type_name
op_assign
id|api_names
(braket
id|type
op_minus
id|ST_API_BIAS
)braket
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|type
OG
id|ST_UNOFFICIAL_BIAS
)paren
op_logical_and
(paren
id|type
op_minus
id|ST_UNOFFICIAL_BIAS
)paren
OL
id|N
c_func
(paren
id|unofficial_names
)paren
)paren
(brace
op_star
id|type_name
op_assign
id|unofficial_names
(braket
id|type
op_minus
id|ST_UNOFFICIAL_BIAS
)braket
suffix:semicolon
)brace
r_else
(brace
op_star
id|type_name
op_assign
id|sys_unknown
suffix:semicolon
op_star
id|variation_name
op_assign
id|sys_unknown
suffix:semicolon
r_return
suffix:semicolon
)brace
multiline_comment|/* Set variation to &quot;0&quot;; if variation is zero, done */
op_star
id|variation_name
op_assign
id|systype_names
(braket
l_int|0
)braket
suffix:semicolon
r_if
c_cond
(paren
id|variation
op_eq
l_int|0
)paren
(brace
r_return
suffix:semicolon
)brace
id|member
op_assign
(paren
id|variation
op_rshift
l_int|10
)paren
op_amp
l_int|0x3f
suffix:semicolon
multiline_comment|/* member ID is a bit-field */
r_switch
c_cond
(paren
id|type
)paren
(brace
multiline_comment|/* select by family */
r_default
suffix:colon
multiline_comment|/* default to variation &quot;0&quot; for now */
r_break
suffix:semicolon
r_case
id|ST_DEC_EB164
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|eb164_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|eb164_names
(braket
id|eb164_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_ALCOR
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|alcor_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|alcor_names
(braket
id|alcor_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_EB64P
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|eb64p_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|eb64p_names
(braket
id|eb64p_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_EB66
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|eb66_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|eb66_names
(braket
id|eb66_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_RAWHIDE
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|rawhide_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|rawhide_names
(braket
id|rawhide_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_TITAN
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|titan_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|titan_names
(braket
id|titan_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
r_case
id|ST_DEC_TSUNAMI
suffix:colon
r_if
c_cond
(paren
id|member
OL
id|N
c_func
(paren
id|tsunami_indices
)paren
)paren
op_star
id|variation_name
op_assign
id|tsunami_names
(braket
id|tsunami_indices
(braket
id|member
)braket
)braket
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * A change was made to the HWRPB via an ECO and the following code&n; * tracks a part of the ECO.  In HWRPB versions less than 5, the ECO&n; * was not implemented in the console firmware.  If it&squot;s revision 5 or&n; * greater we can get the name of the platform as an ASCII string from&n; * the HWRPB.  That&squot;s what this function does.  It checks the revision&n; * level and if the string is in the HWRPB it returns the address of&n; * the string--a pointer to the name of the platform.&n; *&n; * Returns:&n; *      - Pointer to a ASCII string if it&squot;s in the HWRPB&n; *      - Pointer to a blank string if the data is not in the HWRPB.&n; */
r_static
r_char
op_star
DECL|function|platform_string
id|platform_string
c_func
(paren
r_void
)paren
(brace
r_struct
id|dsr_struct
op_star
id|dsr
suffix:semicolon
r_static
r_char
id|unk_system_string
(braket
)braket
op_assign
l_string|&quot;N/A&quot;
suffix:semicolon
multiline_comment|/* Go to the console for the string pointer.&n;&t; * If the rpb_vers is not 5 or greater the rpb&n;&t; * is old and does not have this data in it.&n;&t; */
r_if
c_cond
(paren
id|hwrpb-&gt;revision
OL
l_int|5
)paren
r_return
(paren
id|unk_system_string
)paren
suffix:semicolon
r_else
(brace
multiline_comment|/* The Dynamic System Recognition struct&n;&t;&t; * has the system platform name starting&n;&t;&t; * after the character count of the string.&n;&t;&t; */
id|dsr
op_assign
(paren
(paren
r_struct
id|dsr_struct
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|hwrpb
op_plus
id|hwrpb-&gt;dsr_offset
)paren
)paren
suffix:semicolon
r_return
(paren
(paren
r_char
op_star
)paren
id|dsr
op_plus
(paren
id|dsr-&gt;sysname_off
op_plus
r_sizeof
(paren
r_int
)paren
)paren
)paren
suffix:semicolon
)brace
)brace
r_static
r_int
DECL|function|get_nr_processors
id|get_nr_processors
c_func
(paren
r_struct
id|percpu_struct
op_star
id|cpubase
comma
r_int
r_int
id|num
)paren
(brace
r_struct
id|percpu_struct
op_star
id|cpu
suffix:semicolon
r_int
id|i
comma
id|count
op_assign
l_int|0
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|num
suffix:semicolon
id|i
op_increment
)paren
(brace
id|cpu
op_assign
(paren
r_struct
id|percpu_struct
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|cpubase
op_plus
id|i
op_star
id|hwrpb-&gt;processor_size
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|cpu-&gt;flags
op_amp
l_int|0x1cc
)paren
op_eq
l_int|0x1cc
)paren
id|count
op_increment
suffix:semicolon
)brace
r_return
id|count
suffix:semicolon
)brace
multiline_comment|/*&n; * BUFFER is PAGE_SIZE bytes long.&n; */
DECL|function|get_cpuinfo
r_int
id|get_cpuinfo
c_func
(paren
r_char
op_star
id|buffer
)paren
(brace
r_extern
r_struct
id|unaligned_stat
(brace
r_int
r_int
id|count
comma
id|va
comma
id|pc
suffix:semicolon
)brace
id|unaligned
(braket
l_int|2
)braket
suffix:semicolon
r_static
r_char
id|cpu_names
(braket
)braket
(braket
l_int|8
)braket
op_assign
(brace
l_string|&quot;EV3&quot;
comma
l_string|&quot;EV4&quot;
comma
l_string|&quot;Simulate&quot;
comma
l_string|&quot;LCA4&quot;
comma
l_string|&quot;EV5&quot;
comma
l_string|&quot;EV45&quot;
comma
l_string|&quot;EV56&quot;
comma
l_string|&quot;EV6&quot;
comma
l_string|&quot;PCA56&quot;
comma
l_string|&quot;PCA57&quot;
comma
l_string|&quot;EV67&quot;
comma
l_string|&quot;EV68CB&quot;
comma
l_string|&quot;EV68AL&quot;
)brace
suffix:semicolon
r_struct
id|percpu_struct
op_star
id|cpu
suffix:semicolon
r_int
r_int
id|cpu_index
suffix:semicolon
r_char
op_star
id|cpu_name
suffix:semicolon
r_char
op_star
id|systype_name
suffix:semicolon
r_char
op_star
id|sysvariation_name
suffix:semicolon
r_int
id|len
comma
id|nr_processors
suffix:semicolon
id|cpu
op_assign
(paren
r_struct
id|percpu_struct
op_star
)paren
(paren
(paren
r_char
op_star
)paren
id|hwrpb
op_plus
id|hwrpb-&gt;processor_offset
)paren
suffix:semicolon
id|cpu_index
op_assign
(paren
r_int
)paren
(paren
id|cpu-&gt;type
op_minus
l_int|1
)paren
suffix:semicolon
id|cpu_name
op_assign
l_string|&quot;Unknown&quot;
suffix:semicolon
r_if
c_cond
(paren
id|cpu_index
OL
id|N
c_func
(paren
id|cpu_names
)paren
)paren
id|cpu_name
op_assign
id|cpu_names
(braket
id|cpu_index
)braket
suffix:semicolon
id|get_sysnames
c_func
(paren
id|hwrpb-&gt;sys_type
comma
id|hwrpb-&gt;sys_variation
comma
op_amp
id|systype_name
comma
op_amp
id|sysvariation_name
)paren
suffix:semicolon
id|nr_processors
op_assign
id|get_nr_processors
c_func
(paren
id|cpu
comma
id|hwrpb-&gt;nr_processors
)paren
suffix:semicolon
id|len
op_assign
id|sprintf
c_func
(paren
id|buffer
comma
l_string|&quot;cpu&bslash;t&bslash;t&bslash;t: Alpha&bslash;n&quot;
l_string|&quot;cpu model&bslash;t&bslash;t: %s&bslash;n&quot;
l_string|&quot;cpu variation&bslash;t&bslash;t: %ld&bslash;n&quot;
l_string|&quot;cpu revision&bslash;t&bslash;t: %ld&bslash;n&quot;
l_string|&quot;cpu serial number&bslash;t: %s&bslash;n&quot;
l_string|&quot;system type&bslash;t&bslash;t: %s&bslash;n&quot;
l_string|&quot;system variation&bslash;t: %s&bslash;n&quot;
l_string|&quot;system revision&bslash;t&bslash;t: %ld&bslash;n&quot;
l_string|&quot;system serial number&bslash;t: %s&bslash;n&quot;
l_string|&quot;cycle frequency [Hz]&bslash;t: %lu %s&bslash;n&quot;
l_string|&quot;timer frequency [Hz]&bslash;t: %lu.%02lu&bslash;n&quot;
l_string|&quot;page size [bytes]&bslash;t: %ld&bslash;n&quot;
l_string|&quot;phys. address bits&bslash;t: %ld&bslash;n&quot;
l_string|&quot;max. addr. space #&bslash;t: %ld&bslash;n&quot;
l_string|&quot;BogoMIPS&bslash;t&bslash;t: %lu.%02lu&bslash;n&quot;
l_string|&quot;kernel unaligned acc&bslash;t: %ld (pc=%lx,va=%lx)&bslash;n&quot;
l_string|&quot;user unaligned acc&bslash;t: %ld (pc=%lx,va=%lx)&bslash;n&quot;
l_string|&quot;platform string&bslash;t&bslash;t: %s&bslash;n&quot;
l_string|&quot;cpus detected&bslash;t&bslash;t: %d&bslash;n&quot;
comma
id|cpu_name
comma
id|cpu-&gt;variation
comma
id|cpu-&gt;revision
comma
(paren
r_char
op_star
)paren
id|cpu-&gt;serial_no
comma
id|systype_name
comma
id|sysvariation_name
comma
id|hwrpb-&gt;sys_revision
comma
(paren
r_char
op_star
)paren
id|hwrpb-&gt;ssn
comma
id|est_cycle_freq
ques
c_cond
suffix:colon
id|hwrpb-&gt;cycle_freq
comma
id|est_cycle_freq
ques
c_cond
l_string|&quot;est.&quot;
suffix:colon
l_string|&quot;&quot;
comma
id|hwrpb-&gt;intr_freq
op_div
l_int|4096
comma
(paren
l_int|100
op_star
id|hwrpb-&gt;intr_freq
op_div
l_int|4096
)paren
op_mod
l_int|100
comma
id|hwrpb-&gt;pagesize
comma
id|hwrpb-&gt;pa_bits
comma
id|hwrpb-&gt;max_asn
comma
id|loops_per_jiffy
op_div
(paren
l_int|500000
op_div
id|HZ
)paren
comma
(paren
id|loops_per_jiffy
op_div
(paren
l_int|5000
op_div
id|HZ
)paren
)paren
op_mod
l_int|100
comma
id|unaligned
(braket
l_int|0
)braket
dot
id|count
comma
id|unaligned
(braket
l_int|0
)braket
dot
id|pc
comma
id|unaligned
(braket
l_int|0
)braket
dot
id|va
comma
id|unaligned
(braket
l_int|1
)braket
dot
id|count
comma
id|unaligned
(braket
l_int|1
)braket
dot
id|pc
comma
id|unaligned
(braket
l_int|1
)braket
dot
id|va
comma
id|platform_string
c_func
(paren
)paren
comma
id|nr_processors
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_SMP
id|len
op_add_assign
id|smp_info
c_func
(paren
id|buffer
op_plus
id|len
)paren
suffix:semicolon
macro_line|#endif
r_return
id|len
suffix:semicolon
)brace
DECL|function|alpha_panic_event
r_static
r_int
id|alpha_panic_event
c_func
(paren
r_struct
id|notifier_block
op_star
id|this
comma
r_int
r_int
id|event
comma
r_void
op_star
id|ptr
)paren
(brace
macro_line|#if 1
multiline_comment|/* FIXME FIXME FIXME */
multiline_comment|/* If we are using SRM and serial console, just hard halt here. */
r_if
c_cond
(paren
id|alpha_using_srm
op_logical_and
id|srmcons_output
)paren
id|__halt
c_func
(paren
)paren
suffix:semicolon
macro_line|#endif
r_return
id|NOTIFY_DONE
suffix:semicolon
)brace
eof
