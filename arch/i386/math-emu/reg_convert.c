multiline_comment|/*---------------------------------------------------------------------------+&n; |  reg_convert.c                                                            |&n; |                                                                           |&n; |  Convert register representation.                                         |&n; |                                                                           |&n; | Copyright (C) 1992,1993,1994,1996,1997                                    |&n; |                  W. Metzenthen, 22 Parker St, Ormond, Vic 3163, Australia |&n; |                  E-mail   billm@suburbia.net                              |&n; |                                                                           |&n; |                                                                           |&n; +---------------------------------------------------------------------------*/
macro_line|#include &quot;exception.h&quot;
macro_line|#include &quot;fpu_emu.h&quot;
DECL|function|FPU_to_exp16
r_int
id|FPU_to_exp16
c_func
(paren
id|FPU_REG
r_const
op_star
id|a
comma
id|FPU_REG
op_star
id|x
)paren
(brace
r_int
id|sign
op_assign
id|getsign
c_func
(paren
id|a
)paren
suffix:semicolon
op_star
(paren
r_int
r_int
op_star
)paren
op_amp
(paren
id|x-&gt;sigl
)paren
op_assign
op_star
(paren
r_const
r_int
r_int
op_star
)paren
op_amp
(paren
id|a-&gt;sigl
)paren
suffix:semicolon
multiline_comment|/* Set up the exponent as a 16 bit quantity. */
id|setexponent16
c_func
(paren
id|x
comma
id|exponent
c_func
(paren
id|a
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|exponent16
c_func
(paren
id|x
)paren
op_eq
id|EXP_UNDER
)paren
(brace
multiline_comment|/* The number is a de-normal or pseudodenormal. */
multiline_comment|/* We only deal with the significand and exponent. */
r_if
c_cond
(paren
id|x-&gt;sigh
op_amp
l_int|0x80000000
)paren
(brace
multiline_comment|/* Is a pseudodenormal. */
multiline_comment|/* This is non-80486 behaviour because the number&n;&t;     loses its &squot;denormal&squot; identity. */
id|addexponent
c_func
(paren
id|x
comma
l_int|1
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* Is a denormal. */
id|addexponent
c_func
(paren
id|x
comma
l_int|1
)paren
suffix:semicolon
id|FPU_normalize_nuo
c_func
(paren
id|x
)paren
suffix:semicolon
)brace
)brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|x-&gt;sigh
op_amp
l_int|0x80000000
)paren
)paren
(brace
id|EXCEPTION
c_func
(paren
id|EX_INTERNAL
op_or
l_int|0x180
)paren
suffix:semicolon
)brace
r_return
id|sign
suffix:semicolon
)brace
eof
