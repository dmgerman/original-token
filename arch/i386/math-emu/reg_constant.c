multiline_comment|/*---------------------------------------------------------------------------+&n; |  reg_constant.c                                                           |&n; |                                                                           |&n; | All of the constant FPU_REGs                                              |&n; |                                                                           |&n; | Copyright (C) 1992,1993,1994,1997                                         |&n; |                     W. Metzenthen, 22 Parker St, Ormond, Vic 3163,        |&n; |                     Australia.  E-mail   billm@suburbia.net               |&n; |                                                                           |&n; |                                                                           |&n; +---------------------------------------------------------------------------*/
macro_line|#include &quot;fpu_system.h&quot;
macro_line|#include &quot;fpu_emu.h&quot;
macro_line|#include &quot;status_w.h&quot;
macro_line|#include &quot;reg_constant.h&quot;
macro_line|#include &quot;control_w.h&quot;
DECL|macro|MAKE_REG
mdefine_line|#define MAKE_REG(s,e,l,h) { l, h, &bslash;&n;                            ((EXTENDED_Ebias+(e)) | ((SIGN_##s != 0)*0x8000)) }
DECL|variable|CONST_1
id|FPU_REG
r_const
id|CONST_1
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
l_int|0
comma
l_int|0x00000000
comma
l_int|0x80000000
)paren
suffix:semicolon
DECL|variable|CONST_2
id|FPU_REG
r_const
id|CONST_2
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
l_int|1
comma
l_int|0x00000000
comma
l_int|0x80000000
)paren
suffix:semicolon
DECL|variable|CONST_HALF
id|FPU_REG
r_const
id|CONST_HALF
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
op_minus
l_int|1
comma
l_int|0x00000000
comma
l_int|0x80000000
)paren
suffix:semicolon
DECL|variable|CONST_L2T
id|FPU_REG
r_const
id|CONST_L2T
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
l_int|1
comma
l_int|0xcd1b8afe
comma
l_int|0xd49a784b
)paren
suffix:semicolon
DECL|variable|CONST_L2E
id|FPU_REG
r_const
id|CONST_L2E
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
l_int|0
comma
l_int|0x5c17f0bc
comma
l_int|0xb8aa3b29
)paren
suffix:semicolon
DECL|variable|CONST_PI
id|FPU_REG
r_const
id|CONST_PI
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
l_int|1
comma
l_int|0x2168c235
comma
l_int|0xc90fdaa2
)paren
suffix:semicolon
DECL|variable|CONST_PI2
id|FPU_REG
r_const
id|CONST_PI2
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
l_int|0
comma
l_int|0x2168c235
comma
l_int|0xc90fdaa2
)paren
suffix:semicolon
DECL|variable|CONST_PI4
id|FPU_REG
r_const
id|CONST_PI4
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
op_minus
l_int|1
comma
l_int|0x2168c235
comma
l_int|0xc90fdaa2
)paren
suffix:semicolon
DECL|variable|CONST_LG2
id|FPU_REG
r_const
id|CONST_LG2
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
op_minus
l_int|2
comma
l_int|0xfbcff799
comma
l_int|0x9a209a84
)paren
suffix:semicolon
DECL|variable|CONST_LN2
id|FPU_REG
r_const
id|CONST_LN2
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
op_minus
l_int|1
comma
l_int|0xd1cf79ac
comma
l_int|0xb17217f7
)paren
suffix:semicolon
multiline_comment|/* Extra bits to take pi/2 to more than 128 bits precision. */
DECL|variable|CONST_PI2extra
id|FPU_REG
r_const
id|CONST_PI2extra
op_assign
id|MAKE_REG
c_func
(paren
id|NEG
comma
op_minus
l_int|66
comma
l_int|0xfc8f8cbb
comma
l_int|0xece675d1
)paren
suffix:semicolon
multiline_comment|/* Only the sign (and tag) is used in internal zeroes */
DECL|variable|CONST_Z
id|FPU_REG
r_const
id|CONST_Z
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
id|EXP_UNDER
comma
l_int|0x0
comma
l_int|0x0
)paren
suffix:semicolon
multiline_comment|/* Only the sign and significand (and tag) are used in internal NaNs */
multiline_comment|/* The 80486 never generates one of these &n;FPU_REG const CONST_SNAN = MAKE_REG(POS, EXP_OVER, 0x00000001, 0x80000000);&n; */
multiline_comment|/* This is the real indefinite QNaN */
DECL|variable|CONST_QNaN
id|FPU_REG
r_const
id|CONST_QNaN
op_assign
id|MAKE_REG
c_func
(paren
id|NEG
comma
id|EXP_OVER
comma
l_int|0x00000000
comma
l_int|0xC0000000
)paren
suffix:semicolon
multiline_comment|/* Only the sign (and tag) is used in internal infinities */
DECL|variable|CONST_INF
id|FPU_REG
r_const
id|CONST_INF
op_assign
id|MAKE_REG
c_func
(paren
id|POS
comma
id|EXP_OVER
comma
l_int|0x00000000
comma
l_int|0x80000000
)paren
suffix:semicolon
DECL|function|fld_const
r_static
r_void
id|fld_const
c_func
(paren
id|FPU_REG
r_const
op_star
id|c
comma
r_int
id|adj
comma
id|u_char
id|tag
)paren
(brace
id|FPU_REG
op_star
id|st_new_ptr
suffix:semicolon
r_if
c_cond
(paren
id|STACK_OVERFLOW
)paren
(brace
id|FPU_stack_overflow
c_func
(paren
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|push
c_func
(paren
)paren
suffix:semicolon
id|reg_copy
c_func
(paren
id|c
comma
id|st_new_ptr
)paren
suffix:semicolon
id|st_new_ptr-&gt;sigl
op_add_assign
id|adj
suffix:semicolon
multiline_comment|/* For all our fldxxx constants, we don&squot;t need to&n;&t;&t;&t;       borrow or carry. */
id|FPU_settag0
c_func
(paren
id|tag
)paren
suffix:semicolon
id|clear_C1
c_func
(paren
)paren
suffix:semicolon
)brace
multiline_comment|/* A fast way to find out whether x is one of RC_DOWN or RC_CHOP&n;   (and not one of RC_RND or RC_UP).&n;   */
DECL|macro|DOWN_OR_CHOP
mdefine_line|#define DOWN_OR_CHOP(x)  (x &amp; RC_DOWN)
DECL|function|fld1
r_static
r_void
id|fld1
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_1
comma
l_int|0
comma
id|TAG_Valid
)paren
suffix:semicolon
)brace
DECL|function|fldl2t
r_static
r_void
id|fldl2t
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_L2T
comma
(paren
id|rc
op_eq
id|RC_UP
)paren
ques
c_cond
l_int|1
suffix:colon
l_int|0
comma
id|TAG_Valid
)paren
suffix:semicolon
)brace
DECL|function|fldl2e
r_static
r_void
id|fldl2e
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_L2E
comma
id|DOWN_OR_CHOP
c_func
(paren
id|rc
)paren
ques
c_cond
op_minus
l_int|1
suffix:colon
l_int|0
comma
id|TAG_Valid
)paren
suffix:semicolon
)brace
DECL|function|fldpi
r_static
r_void
id|fldpi
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_PI
comma
id|DOWN_OR_CHOP
c_func
(paren
id|rc
)paren
ques
c_cond
op_minus
l_int|1
suffix:colon
l_int|0
comma
id|TAG_Valid
)paren
suffix:semicolon
)brace
DECL|function|fldlg2
r_static
r_void
id|fldlg2
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_LG2
comma
id|DOWN_OR_CHOP
c_func
(paren
id|rc
)paren
ques
c_cond
op_minus
l_int|1
suffix:colon
l_int|0
comma
id|TAG_Valid
)paren
suffix:semicolon
)brace
DECL|function|fldln2
r_static
r_void
id|fldln2
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_LN2
comma
id|DOWN_OR_CHOP
c_func
(paren
id|rc
)paren
ques
c_cond
op_minus
l_int|1
suffix:colon
l_int|0
comma
id|TAG_Valid
)paren
suffix:semicolon
)brace
DECL|function|fldz
r_static
r_void
id|fldz
c_func
(paren
r_int
id|rc
)paren
(brace
id|fld_const
c_func
(paren
op_amp
id|CONST_Z
comma
l_int|0
comma
id|TAG_Zero
)paren
suffix:semicolon
)brace
DECL|typedef|FUNC_RC
r_typedef
r_void
(paren
op_star
id|FUNC_RC
)paren
(paren
r_int
)paren
suffix:semicolon
DECL|variable|constants_table
r_static
id|FUNC_RC
id|constants_table
(braket
)braket
op_assign
(brace
id|fld1
comma
id|fldl2t
comma
id|fldl2e
comma
id|fldpi
comma
id|fldlg2
comma
id|fldln2
comma
id|fldz
comma
(paren
id|FUNC_RC
)paren
id|FPU_illegal
)brace
suffix:semicolon
DECL|function|fconst
r_void
id|fconst
c_func
(paren
r_void
)paren
(brace
(paren
id|constants_table
(braket
id|FPU_rm
)braket
)paren
(paren
id|control_word
op_amp
id|CW_RC
)paren
suffix:semicolon
)brace
eof
