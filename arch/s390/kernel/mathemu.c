multiline_comment|/*&n; *  arch/s390/kernel/mathemu.c&n; *&n; *  S390 version&n; *    Copyright (C) 1999 IBM Deutschland Entwicklung GmbH, IBM Corporation&n; *    Author(s): Martin Schwidefsky (schwidefsky@de.ibm.com),&n; *&n; * &squot;mathemu.c&squot; handles IEEE instructions on a S390 processor&n; * that does not have the IEEE fpu&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/ptrace.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/mathemu.h&gt;
DECL|function|set_CC_df
r_static
r_void
id|set_CC_df
c_func
(paren
id|__u64
id|val1
comma
id|__u64
id|val2
)paren
(brace
r_int
id|rc
suffix:semicolon
id|rc
op_assign
id|__cmpdf2
c_func
(paren
id|val1
comma
id|val2
)paren
suffix:semicolon
id|current-&gt;thread.regs-&gt;psw.mask
op_and_assign
l_int|0xFFFFCFFF
suffix:semicolon
r_switch
c_cond
(paren
id|rc
)paren
(brace
r_case
op_minus
l_int|1
suffix:colon
id|current-&gt;thread.regs-&gt;psw.mask
op_or_assign
l_int|0x00001000
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|current-&gt;thread.regs-&gt;psw.mask
op_or_assign
l_int|0x00002000
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|set_CC_sf
r_static
r_void
id|set_CC_sf
c_func
(paren
id|__u32
id|val1
comma
id|__u32
id|val2
)paren
(brace
r_int
id|rc
suffix:semicolon
id|rc
op_assign
id|__cmpsf2
c_func
(paren
id|val1
comma
id|val2
)paren
suffix:semicolon
id|current-&gt;thread.regs-&gt;psw.mask
op_and_assign
l_int|0xFFFFCFFF
suffix:semicolon
r_switch
c_cond
(paren
id|rc
)paren
(brace
r_case
op_minus
l_int|1
suffix:colon
id|current-&gt;thread.regs-&gt;psw.mask
op_or_assign
l_int|0x00001000
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
id|current-&gt;thread.regs-&gt;psw.mask
op_or_assign
l_int|0x00002000
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|emu_adb
r_static
r_void
id|emu_adb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__adddf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|val
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_adbr
r_static
r_void
id|emu_adbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__adddf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_aeb
r_static
r_void
id|emu_aeb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__addsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|val
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_aebr
r_static
r_void
id|emu_aebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__addsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_axbr
r_static
r_void
id|emu_axbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;axbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_cdb
r_static
r_void
id|emu_cdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|val
)paren
suffix:semicolon
)brace
DECL|function|emu_cdbr
r_static
r_void
id|emu_cdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
)brace
DECL|function|emu_cdfbr
r_static
r_void
id|emu_cdfbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__floatsidf
c_func
(paren
id|current-&gt;thread.regs-&gt;gprs
(braket
id|ry
)braket
)paren
suffix:semicolon
)brace
DECL|function|emu_ceb
r_static
r_void
id|emu_ceb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|val
)paren
suffix:semicolon
)brace
DECL|function|emu_cebr
r_static
r_void
id|emu_cebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
)brace
DECL|function|emu_cefbr
r_static
r_void
id|emu_cefbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__floatsisf
c_func
(paren
id|current-&gt;thread.regs-&gt;gprs
(braket
id|ry
)braket
)paren
suffix:semicolon
)brace
DECL|function|emu_cfdbr
r_static
r_void
id|emu_cfdbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|current-&gt;thread.regs-&gt;gprs
(braket
id|rx
)braket
op_assign
id|__fixdfsi
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
)brace
DECL|function|emu_cfebr
r_static
r_void
id|emu_cfebr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|current-&gt;thread.regs-&gt;gprs
(braket
id|rx
)braket
op_assign
id|__fixsfsi
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
)brace
DECL|function|emu_cfxbr
r_static
r_void
id|emu_cfxbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;cfxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_cxbr
r_static
r_void
id|emu_cxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;cxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_cxfbr
r_static
r_void
id|emu_cxfbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;cxfbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_ddb
r_static
r_void
id|emu_ddb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__divdf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|val
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_ddbr
r_static
r_void
id|emu_ddbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__divdf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_deb
r_static
r_void
id|emu_deb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__divsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|val
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_debr
r_static
r_void
id|emu_debr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__divsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_didbr
r_static
r_void
id|emu_didbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;didbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_diebr
r_static
r_void
id|emu_diebr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;diebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_dxbr
r_static
r_void
id|emu_dxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;dxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_efpc
r_static
r_void
id|emu_efpc
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;efpc emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_fidbr
r_static
r_void
id|emu_fidbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;fidbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_fiebr
r_static
r_void
id|emu_fiebr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;fiebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_fixbr
r_static
r_void
id|emu_fixbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;fixbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_kdb
r_static
r_void
id|emu_kdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;kdb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_kdbr
r_static
r_void
id|emu_kdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;kdbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_keb
r_static
r_void
id|emu_keb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;keb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_kebr
r_static
r_void
id|emu_kebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;kebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_kxbr
r_static
r_void
id|emu_kxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;kxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lcdbr
r_static
r_void
id|emu_lcdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__negdf2
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_lcebr
r_static
r_void
id|emu_lcebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__negsf2
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_lcxbr
r_static
r_void
id|emu_lcxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lcxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_ldeb
r_static
r_void
id|emu_ldeb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__extendsfdf2
c_func
(paren
id|val
)paren
suffix:semicolon
)brace
DECL|function|emu_ldebr
r_static
r_void
id|emu_ldebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__extendsfdf2
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
)brace
DECL|function|emu_ldxbr
r_static
r_void
id|emu_ldxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;ldxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_ledbr
r_static
r_void
id|emu_ledbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__truncdfsf2
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_lexbr
r_static
r_void
id|emu_lexbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lexbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lndbr
r_static
r_void
id|emu_lndbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lndbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lnebr
r_static
r_void
id|emu_lnebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lnebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lnxbr
r_static
r_void
id|emu_lnxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lnxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lpdbr
r_static
r_void
id|emu_lpdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__absdf2
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_lpebr
r_static
r_void
id|emu_lpebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__abssf2
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_lpxbr
r_static
r_void
id|emu_lpxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lpxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_ltdbr
r_static
r_void
id|emu_ltdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_ltebr
r_static
r_void
id|emu_ltebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_ltxbr
r_static
r_void
id|emu_ltxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;ltxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lxdb
r_static
r_void
id|emu_lxdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lxdb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lxdbr
r_static
r_void
id|emu_lxdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lxdbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lxeb
r_static
r_void
id|emu_lxeb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lxeb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_lxebr
r_static
r_void
id|emu_lxebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;lxebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_madb
r_static
r_void
id|emu_madb
(paren
r_int
id|rx
comma
id|__u64
id|val
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;madb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_madbr
r_static
r_void
id|emu_madbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot; emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_maeb
r_static
r_void
id|emu_maeb
(paren
r_int
id|rx
comma
id|__u32
id|val
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;maeb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_maebr
r_static
r_void
id|emu_maebr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;maebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_mdb
r_static
r_void
id|emu_mdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__muldf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|val
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_mdbr
r_static
r_void
id|emu_mdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__muldf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_df
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_mdeb
r_static
r_void
id|emu_mdeb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;mdeb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_mdebr
r_static
r_void
id|emu_mdebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;mdebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_meeb
r_static
r_void
id|emu_meeb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__mulsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|val
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_meebr
r_static
r_void
id|emu_meebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__mulsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_msdb
r_static
r_void
id|emu_msdb
(paren
r_int
id|rx
comma
id|__u64
id|val
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;msdb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_msdbr
r_static
r_void
id|emu_msdbr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;msdbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_mseb
r_static
r_void
id|emu_mseb
(paren
r_int
id|rx
comma
id|__u32
id|val
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;mseb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_msebr
r_static
r_void
id|emu_msebr
(paren
r_int
id|rx
comma
r_int
id|ry
comma
r_int
id|mask
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;msebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_mxbr
r_static
r_void
id|emu_mxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;mxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_mxdb
r_static
r_void
id|emu_mxdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;mxdb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_mxdbr
r_static
r_void
id|emu_mxdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;mxdbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sdb
r_static
r_void
id|emu_sdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__subdf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|val
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_sdbr
r_static
r_void
id|emu_sdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
op_assign
id|__subdf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|d
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|d
comma
l_int|0ULL
)paren
suffix:semicolon
)brace
DECL|function|emu_seb
r_static
r_void
id|emu_seb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__subsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|val
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_sebr
r_static
r_void
id|emu_sebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
op_assign
id|__subsf3
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
id|current-&gt;thread.fp_regs.fprs
(braket
id|ry
)braket
dot
id|f
)paren
suffix:semicolon
id|set_CC_sf
c_func
(paren
id|current-&gt;thread.fp_regs.fprs
(braket
id|rx
)braket
dot
id|f
comma
l_int|0
)paren
suffix:semicolon
)brace
DECL|function|emu_sfpc
r_static
r_void
id|emu_sfpc
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sfpc emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sqdb
r_static
r_void
id|emu_sqdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sqdb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sqdbr
r_static
r_void
id|emu_sqdbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sqdbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sqeb
r_static
r_void
id|emu_sqeb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sqeb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sqebr
r_static
r_void
id|emu_sqebr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sqebr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sqxbr
r_static
r_void
id|emu_sqxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sqxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_sxbr
r_static
r_void
id|emu_sxbr
(paren
r_int
id|rx
comma
r_int
id|ry
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;sxbr emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_tcdb
r_static
r_void
id|emu_tcdb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;tcdb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_tceb
r_static
r_void
id|emu_tceb
(paren
r_int
id|rx
comma
id|__u32
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;tceb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_tcxb
r_static
r_void
id|emu_tcxb
(paren
r_int
id|rx
comma
id|__u64
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;tcxb emulation not implemented!&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|emu_load_regd
r_static
r_inline
r_void
id|emu_load_regd
c_func
(paren
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
(paren
id|reg
op_amp
l_int|9
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if reg in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* load reg from fp_regs.fprs[reg] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     ld    0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
id|reg
op_lshift
l_int|4
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
id|reg
)braket
dot
id|d
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|emu_load_rege
r_static
r_inline
r_void
id|emu_load_rege
c_func
(paren
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
(paren
id|reg
op_amp
l_int|9
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if reg in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* load reg from fp_regs.fprs[reg] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     le    0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
id|reg
op_lshift
l_int|4
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
id|reg
)braket
dot
id|f
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|emu_store_regd
r_static
r_inline
r_void
id|emu_store_regd
c_func
(paren
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
(paren
id|reg
op_amp
l_int|9
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if reg in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* store reg to fp_regs.fprs[reg] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     std   0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
id|reg
op_lshift
l_int|4
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
id|reg
)braket
dot
id|d
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|emu_store_rege
r_static
r_inline
r_void
id|emu_store_rege
c_func
(paren
r_int
id|reg
)paren
(brace
r_if
c_cond
(paren
(paren
id|reg
op_amp
l_int|9
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if reg in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* store reg to fp_regs.fprs[reg] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     ste   0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
id|reg
op_lshift
l_int|4
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
id|reg
)braket
dot
id|f
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
)brace
DECL|function|math_emu_b3
r_int
id|math_emu_b3
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_static
r_const
id|__u8
id|format_table
(braket
)braket
op_assign
(brace
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|9
comma
l_int|1
comma
l_int|2
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|9
comma
l_int|2
comma
l_int|4
comma
l_int|4
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|10
comma
l_int|1
comma
l_int|1
comma
l_int|3
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|4
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|4
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|2
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|5
comma
l_int|6
comma
l_int|6
comma
l_int|0
comma
l_int|7
comma
l_int|8
comma
l_int|8
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_static
r_const
r_void
op_star
id|jump_table
(braket
)braket
op_assign
(brace
id|emu_lpebr
comma
id|emu_lnebr
comma
id|emu_ltebr
comma
id|emu_lcebr
comma
id|emu_ldebr
comma
id|emu_lxdbr
comma
id|emu_lxebr
comma
id|emu_mxdbr
comma
id|emu_kebr
comma
id|emu_cebr
comma
id|emu_aebr
comma
id|emu_sebr
comma
id|emu_mdebr
comma
id|emu_debr
comma
id|emu_maebr
comma
id|emu_msebr
comma
id|emu_lpdbr
comma
id|emu_lndbr
comma
id|emu_ltdbr
comma
id|emu_lcdbr
comma
id|emu_sqebr
comma
id|emu_sqdbr
comma
id|emu_sqxbr
comma
id|emu_meebr
comma
id|emu_kdbr
comma
id|emu_cdbr
comma
id|emu_adbr
comma
id|emu_sdbr
comma
id|emu_mdbr
comma
id|emu_ddbr
comma
id|emu_madbr
comma
id|emu_msdbr
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_lpxbr
comma
id|emu_lnxbr
comma
id|emu_ltxbr
comma
id|emu_lcxbr
comma
id|emu_ledbr
comma
id|emu_ldxbr
comma
id|emu_lexbr
comma
id|emu_fixbr
comma
id|emu_kxbr
comma
id|emu_cxbr
comma
id|emu_axbr
comma
id|emu_sxbr
comma
id|emu_mxbr
comma
id|emu_dxbr
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_diebr
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_fiebr
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_didbr
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_fidbr
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_sfpc
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_efpc
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_cefbr
comma
id|emu_cdfbr
comma
id|emu_cxfbr
comma
l_int|NULL
comma
id|emu_cfebr
comma
id|emu_cfdbr
comma
id|emu_cfxbr
)brace
suffix:semicolon
r_switch
c_cond
(paren
id|format_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(brace
r_case
l_int|1
suffix:colon
multiline_comment|/* RRE format, double operation */
id|emu_store_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_store_regd
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* RRE format, float operation */
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_store_rege
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/* RRF format, double operation */
id|emu_store_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_store_regd
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
comma
id|opcode
(braket
l_int|2
)braket
op_rshift
l_int|4
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|4
suffix:colon
multiline_comment|/* RRF format, float operation */
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_store_rege
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
comma
id|opcode
(braket
l_int|2
)braket
op_rshift
l_int|4
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|5
suffix:colon
multiline_comment|/* RRE format, cefbr instruction */
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|6
suffix:colon
multiline_comment|/* RRE format, cdfbr &amp; cxfbr instruction */
id|emu_store_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
multiline_comment|/* FIXME !! */
r_return
l_int|0
suffix:semicolon
r_case
l_int|7
suffix:colon
multiline_comment|/* RRF format, cfebr instruction */
id|emu_store_rege
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
comma
id|opcode
(braket
l_int|2
)braket
op_rshift
l_int|4
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|8
suffix:colon
multiline_comment|/* RRF format, cfdbr &amp; cfxbr instruction */
id|emu_store_regd
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
comma
id|opcode
(braket
l_int|2
)braket
op_rshift
l_int|4
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|9
suffix:colon
multiline_comment|/* RRE format, ldebr &amp; mdebr instruction */
multiline_comment|/* float store but double load */
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_store_rege
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_case
l_int|10
suffix:colon
multiline_comment|/* RRE format, ledbr instruction */
multiline_comment|/* double store but float load */
id|emu_store_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_store_regd
c_func
(paren
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|1
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
comma
id|opcode
(braket
l_int|3
)braket
op_amp
l_int|15
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|3
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
r_default
suffix:colon
r_return
l_int|1
suffix:semicolon
)brace
)brace
DECL|function|calc_addr
r_static
r_void
op_star
id|calc_addr
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|rx
comma
r_int
id|rb
comma
r_int
id|disp
)paren
(brace
id|rx
op_and_assign
l_int|0xf
suffix:semicolon
id|rb
op_and_assign
l_int|0xf
suffix:semicolon
id|disp
op_and_assign
l_int|0xfff
suffix:semicolon
r_return
(paren
r_void
op_star
)paren
(paren
(paren
id|rx
op_ne
l_int|0
ques
c_cond
id|regs-&gt;gprs
(braket
id|rx
)braket
suffix:colon
l_int|0
)paren
op_plus
multiline_comment|/* index */
(paren
id|rb
op_ne
l_int|0
ques
c_cond
id|regs-&gt;gprs
(braket
id|rb
)braket
suffix:colon
l_int|0
)paren
op_plus
multiline_comment|/* base */
id|disp
)paren
suffix:semicolon
)brace
DECL|function|math_emu_ed
r_int
id|math_emu_ed
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_static
r_const
id|__u8
id|format_table
(braket
)braket
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|5
comma
l_int|1
comma
l_int|2
comma
l_int|1
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|2
comma
l_int|5
comma
l_int|2
comma
l_int|4
comma
l_int|4
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|0
comma
l_int|2
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|1
comma
l_int|3
comma
l_int|3
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
)brace
suffix:semicolon
r_static
r_const
r_void
op_star
id|jump_table
(braket
)braket
op_assign
(brace
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
l_int|NULL
comma
id|emu_ldeb
comma
id|emu_lxdb
comma
id|emu_lxeb
comma
id|emu_mxdb
comma
id|emu_keb
comma
id|emu_ceb
comma
id|emu_aeb
comma
id|emu_seb
comma
id|emu_mdeb
comma
id|emu_deb
comma
id|emu_maeb
comma
id|emu_mseb
comma
id|emu_tceb
comma
id|emu_tcdb
comma
id|emu_tcxb
comma
l_int|NULL
comma
id|emu_sqeb
comma
id|emu_sqdb
comma
l_int|NULL
comma
id|emu_meeb
comma
id|emu_kdb
comma
id|emu_cdb
comma
id|emu_adb
comma
id|emu_sdb
comma
id|emu_mdb
comma
id|emu_ddb
comma
id|emu_madb
comma
id|emu_msdb
)brace
suffix:semicolon
r_switch
c_cond
(paren
id|format_table
(braket
id|opcode
(braket
l_int|5
)braket
)braket
)paren
(brace
r_case
l_int|1
suffix:colon
multiline_comment|/* RXE format, __u64 constant */
(brace
id|__u64
op_star
id|dxb
comma
id|temp
suffix:semicolon
id|__u32
id|opc
suffix:semicolon
id|emu_store_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|dxb
op_assign
(paren
id|__u64
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if copy_from_user fails ? */
id|copy_from_user
c_func
(paren
op_amp
id|temp
comma
id|dxb
comma
l_int|8
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
id|__u64
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|5
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
comma
id|temp
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
l_int|2
suffix:colon
multiline_comment|/* RXE format, __u32 constant */
(brace
id|__u32
op_star
id|dxb
comma
id|temp
suffix:semicolon
id|__u32
id|opc
suffix:semicolon
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|dxb
op_assign
(paren
id|__u32
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if get_user fails ? */
id|get_user
c_func
(paren
id|temp
comma
id|dxb
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
id|__u32
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|5
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
comma
id|temp
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
l_int|3
suffix:colon
multiline_comment|/* RXF format, __u64 constant */
(brace
id|__u32
op_star
id|dxb
comma
id|temp
suffix:semicolon
id|__u32
id|opc
suffix:semicolon
id|emu_store_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|dxb
op_assign
(paren
id|__u32
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if copy_from_user fails ? */
id|copy_from_user
c_func
(paren
op_amp
id|temp
comma
id|dxb
comma
l_int|8
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
id|__u32
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|5
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
comma
id|temp
comma
id|opcode
(braket
l_int|4
)braket
op_rshift
l_int|4
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
l_int|4
suffix:colon
multiline_comment|/* RXF format, __u32 constant */
(brace
id|__u32
op_star
id|dxb
comma
id|temp
suffix:semicolon
id|__u32
id|opc
suffix:semicolon
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|dxb
op_assign
(paren
id|__u32
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if get_user fails ? */
id|get_user
c_func
(paren
id|temp
comma
id|dxb
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
id|__u32
comma
r_int
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|5
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
comma
id|temp
comma
id|opcode
(braket
l_int|4
)braket
op_rshift
l_int|4
)paren
suffix:semicolon
id|emu_load_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_case
l_int|5
suffix:colon
multiline_comment|/* RXE format, __u32 constant */
multiline_comment|/* store_rege and load_regd */
(brace
id|__u32
op_star
id|dxb
comma
id|temp
suffix:semicolon
id|__u32
id|opc
suffix:semicolon
id|emu_store_rege
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|dxb
op_assign
(paren
id|__u32
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if get_user fails ? */
id|get_user
c_func
(paren
id|temp
comma
id|dxb
)paren
suffix:semicolon
multiline_comment|/* call the emulation function */
(paren
(paren
r_void
(paren
op_star
)paren
(paren
r_int
comma
id|__u32
)paren
)paren
id|jump_table
(braket
id|opcode
(braket
l_int|5
)braket
)braket
)paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
comma
id|temp
)paren
suffix:semicolon
id|emu_load_regd
c_func
(paren
(paren
id|opcode
(braket
l_int|1
)braket
op_rshift
l_int|4
)paren
op_amp
l_int|15
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_default
suffix:colon
r_return
l_int|1
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Emulate LDR Rx,Ry with Rx or Ry not in {0, 2, 4, 6}&n; */
DECL|function|math_emu_ldr
r_void
id|math_emu_ldr
c_func
(paren
id|__u8
op_star
id|opcode
)paren
(brace
id|__u16
id|opc
op_assign
op_star
(paren
(paren
id|__u16
op_star
)paren
id|opcode
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|opc
op_amp
l_int|0x0090
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if rx in {0,2,4,6} */
multiline_comment|/* we got an exception therfore ry can&squot;t be in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* load rx from fp_regs.fprs[ry] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     ld    0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
id|opc
op_amp
l_int|0x00f0
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
id|opc
op_amp
l_int|0x000f
)braket
dot
id|d
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|opc
op_amp
l_int|0x0009
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if ry in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* store ry to fp_regs.fprs[rx] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     std   0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
(paren
id|opc
op_amp
l_int|0x000f
)paren
op_lshift
l_int|4
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_amp
l_int|0x00f0
)paren
op_rshift
l_int|4
)braket
dot
id|d
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* move fp_regs.fprs[ry] to fp_regs.fprs[rx] */
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_amp
l_int|0x00f0
)paren
op_rshift
l_int|4
)braket
op_assign
id|current-&gt;thread.fp_regs.fprs
(braket
id|opc
op_amp
l_int|0x000f
)braket
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Emulate LER Rx,Ry with Rx or Ry not in {0, 2, 4, 6}&n; */
DECL|function|math_emu_ler
r_void
id|math_emu_ler
c_func
(paren
id|__u8
op_star
id|opcode
)paren
(brace
id|__u16
id|opc
op_assign
op_star
(paren
(paren
id|__u16
op_star
)paren
id|opcode
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|opc
op_amp
l_int|0x0090
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if rx in {0,2,4,6} */
multiline_comment|/* we got an exception therfore ry can&squot;t be in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* load rx from fp_regs.fprs[ry] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     le    0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
id|opc
op_amp
l_int|0x00f0
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
id|opc
op_amp
l_int|0x000f
)braket
dot
id|f
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
(paren
id|opc
op_amp
l_int|0x0009
)paren
op_eq
l_int|0
)paren
(brace
multiline_comment|/* test if ry in {0,2,4,6} */
id|__asm__
id|__volatile
(paren
multiline_comment|/* store ry to fp_regs.fprs[rx] */
l_string|&quot;     bras  1,0f&bslash;n&quot;
l_string|&quot;     ste   0,0(%1)&bslash;n&quot;
l_string|&quot;0:   ex    %0,0(1)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;a&quot;
(paren
(paren
id|opc
op_amp
l_int|0x000f
)paren
op_lshift
l_int|4
)paren
comma
l_string|&quot;a&quot;
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_amp
l_int|0x00f0
)paren
op_rshift
l_int|4
)braket
dot
id|f
)paren
suffix:colon
l_string|&quot;1&quot;
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/* move fp_regs.fprs[ry] to fp_regs.fprs[rx] */
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_amp
l_int|0x00f0
)paren
op_rshift
l_int|4
)braket
op_assign
id|current-&gt;thread.fp_regs.fprs
(braket
id|opc
op_amp
l_int|0x000f
)braket
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Emulate LD R,D(X,B) with R not in {0, 2, 4, 6}&n; */
DECL|function|math_emu_ld
r_void
id|math_emu_ld
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|__u32
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|__u64
op_star
id|dxb
suffix:semicolon
id|dxb
op_assign
(paren
id|__u64
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if copy_from_user fails ? */
id|copy_from_user
c_func
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_rshift
l_int|20
)paren
op_amp
l_int|15
)braket
dot
id|d
comma
id|dxb
comma
l_int|8
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Emulate LE R,D(X,B) with R not in {0, 2, 4, 6}&n; */
DECL|function|math_emu_le
r_void
id|math_emu_le
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|__u32
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|__u32
op_star
id|mem
comma
op_star
id|dxb
suffix:semicolon
id|dxb
op_assign
(paren
id|__u32
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if get_user fails ? */
id|mem
op_assign
(paren
id|__u32
op_star
)paren
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_rshift
l_int|20
)paren
op_amp
l_int|15
)braket
dot
id|f
)paren
suffix:semicolon
id|get_user
c_func
(paren
id|mem
(braket
l_int|0
)braket
comma
id|dxb
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Emulate STD R,D(X,B) with R not in {0, 2, 4, 6}&n; */
DECL|function|math_emu_std
r_void
id|math_emu_std
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|__u32
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|__u64
op_star
id|dxb
suffix:semicolon
id|dxb
op_assign
(paren
id|__u64
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if copy_to_user fails ? */
id|copy_to_user
c_func
(paren
id|dxb
comma
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_rshift
l_int|20
)paren
op_amp
l_int|15
)braket
dot
id|d
comma
l_int|8
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Emulate STE R,D(X,B) with R not in {0, 2, 4, 6}&n; */
DECL|function|math_emu_ste
r_void
id|math_emu_ste
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|__u32
id|opc
op_assign
op_star
(paren
(paren
id|__u32
op_star
)paren
id|opcode
)paren
suffix:semicolon
id|__u32
op_star
id|mem
comma
op_star
id|dxb
suffix:semicolon
id|dxb
op_assign
(paren
id|__u32
op_star
)paren
id|calc_addr
c_func
(paren
id|regs
comma
id|opc
op_rshift
l_int|16
comma
id|opc
op_rshift
l_int|12
comma
id|opc
)paren
suffix:semicolon
multiline_comment|/* FIXME: how to react if put_user fails ? */
id|mem
op_assign
(paren
id|__u32
op_star
)paren
(paren
op_amp
id|current-&gt;thread.fp_regs.fprs
(braket
(paren
id|opc
op_rshift
l_int|20
)paren
op_amp
l_int|15
)braket
dot
id|f
)paren
suffix:semicolon
id|put_user
c_func
(paren
id|mem
(braket
l_int|0
)braket
comma
id|dxb
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * Emulate LFPC D(B)&n; */
DECL|function|math_emu_lfpc
r_int
id|math_emu_lfpc
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/* FIXME: how to do that ?!? */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Emulate STFPC D(B)&n; */
DECL|function|math_emu_stfpc
r_int
id|math_emu_stfpc
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/* FIXME: how to do that ?!? */
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Emulate SRNM D(B)&n; */
DECL|function|math_emu_srnm
r_int
id|math_emu_srnm
c_func
(paren
id|__u8
op_star
id|opcode
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/* FIXME: how to do that ?!? */
r_return
l_int|0
suffix:semicolon
)brace
eof
