multiline_comment|/* $Id: sparc_namei.c,v 1.2 1996/12/12 09:39:25 jj Exp $&n; * linux/arch/sparc/kernel/sparc_namei.c&n; *&n; * Routines to handle famous /usr/gnemul/s*.&n; * Included from linux/fs/namei.c&n; */
DECL|macro|BSD_EMUL
mdefine_line|#define BSD_EMUL &quot;usr/gnemul/sunos/&quot;
DECL|macro|SOL_EMUL
mdefine_line|#define SOL_EMUL &quot;usr/gnemul/solaris/&quot;
r_static
r_int
id|dir_namei
c_func
(paren
r_const
r_char
op_star
id|pathname
comma
r_int
op_star
id|namelen
comma
r_const
r_char
op_star
op_star
id|name
comma
r_struct
id|inode
op_star
id|base
comma
r_struct
id|inode
op_star
op_star
id|res_inode
)paren
suffix:semicolon
r_static
r_int
id|_namei
c_func
(paren
r_const
r_char
op_star
id|pathname
comma
r_struct
id|inode
op_star
id|base
comma
r_int
id|follow_links
comma
r_struct
id|inode
op_star
op_star
id|res_inode
)paren
suffix:semicolon
r_int
id|open_namei
c_func
(paren
r_const
r_char
op_star
id|pathname
comma
r_int
id|flag
comma
r_int
id|mode
comma
r_struct
id|inode
op_star
op_star
id|res_inode
comma
r_struct
id|inode
op_star
id|base
)paren
suffix:semicolon
DECL|function|sparc_namei
r_static
r_int
id|sparc_namei
c_func
(paren
r_const
r_char
op_star
op_star
id|pathname
comma
r_struct
id|inode
op_star
op_star
id|base
comma
r_int
id|follow_links
comma
r_struct
id|inode
op_star
op_star
id|res_inode
)paren
(brace
r_struct
id|inode
op_star
id|emul_ino
suffix:semicolon
r_int
id|namelen
suffix:semicolon
r_const
r_char
op_star
id|name
suffix:semicolon
r_int
id|error
suffix:semicolon
r_while
c_loop
(paren
op_star
op_star
id|pathname
op_eq
l_char|&squot;/&squot;
)paren
(paren
op_star
id|pathname
)paren
op_increment
suffix:semicolon
id|current-&gt;fs-&gt;root-&gt;i_count
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|dir_namei
(paren
id|current-&gt;personality
op_amp
id|PER_BSD
ques
c_cond
id|BSD_EMUL
suffix:colon
id|SOL_EMUL
comma
op_amp
id|namelen
comma
op_amp
id|name
comma
id|current-&gt;fs-&gt;root
comma
op_amp
id|emul_ino
)paren
op_ge
l_int|0
op_logical_and
id|emul_ino
)paren
(brace
op_star
id|res_inode
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
(paren
id|error
op_assign
id|_namei
(paren
op_star
id|pathname
comma
id|emul_ino
comma
id|follow_links
comma
id|res_inode
)paren
)paren
op_ge
l_int|0
op_logical_and
op_star
id|res_inode
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
)brace
op_star
id|base
op_assign
id|current-&gt;fs-&gt;root
suffix:semicolon
(paren
op_star
id|base
)paren
op_member_access_from_pointer
id|i_count
op_increment
suffix:semicolon
r_return
op_minus
id|ENOTDIR
suffix:semicolon
)brace
DECL|function|sparc_open_namei
r_static
r_int
id|sparc_open_namei
c_func
(paren
r_const
r_char
op_star
op_star
id|pathname
comma
r_int
id|flag
comma
r_int
id|mode
comma
r_struct
id|inode
op_star
op_star
id|res_inode
comma
r_struct
id|inode
op_star
op_star
id|base
)paren
(brace
r_struct
id|inode
op_star
id|emul_ino
suffix:semicolon
r_int
id|namelen
suffix:semicolon
r_const
r_char
op_star
id|name
suffix:semicolon
r_while
c_loop
(paren
op_star
op_star
id|pathname
op_eq
l_char|&squot;/&squot;
)paren
(paren
op_star
id|pathname
)paren
op_increment
suffix:semicolon
id|current-&gt;fs-&gt;root-&gt;i_count
op_increment
suffix:semicolon
r_if
c_cond
(paren
id|dir_namei
(paren
id|current-&gt;personality
op_amp
id|PER_BSD
ques
c_cond
id|BSD_EMUL
suffix:colon
id|SOL_EMUL
comma
op_amp
id|namelen
comma
op_amp
id|name
comma
id|current-&gt;fs-&gt;root
comma
op_amp
id|emul_ino
)paren
op_ge
l_int|0
op_logical_and
id|emul_ino
)paren
(brace
op_star
id|res_inode
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|open_namei
(paren
op_star
id|pathname
comma
id|flag
multiline_comment|/* &amp; ~O_CREAT */
comma
id|mode
comma
id|res_inode
comma
id|emul_ino
)paren
op_ge
l_int|0
op_logical_and
op_star
id|res_inode
)paren
r_return
l_int|0
suffix:semicolon
)brace
op_star
id|base
op_assign
id|current-&gt;fs-&gt;root
suffix:semicolon
(paren
op_star
id|base
)paren
op_member_access_from_pointer
id|i_count
op_increment
suffix:semicolon
r_return
op_minus
id|ENOTDIR
suffix:semicolon
)brace
eof
