multiline_comment|/* loadmmu.c:  This code loads up all the mm function pointers once the&n; *             machine type has been determined.  It also sets the static&n; *             mmu values such as PAGE_NONE, etc.&n; *&n; * Copyright (C) 1995 David S. Miller (davem@caip.rutgers.edu)&n; */
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
DECL|variable|invalidate
r_void
(paren
op_star
id|invalidate
)paren
(paren
r_void
)paren
suffix:semicolon
DECL|variable|pmd_shift
DECL|variable|pmd_size
DECL|variable|pmd_mask
r_int
r_int
id|pmd_shift
comma
id|pmd_size
comma
id|pmd_mask
suffix:semicolon
DECL|variable|pmd_align
r_int
r_int
(paren
op_star
id|pmd_align
)paren
(paren
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pgdir_shift
DECL|variable|pgdir_size
DECL|variable|pgdir_mask
r_int
r_int
id|pgdir_shift
comma
id|pgdir_size
comma
id|pgdir_mask
suffix:semicolon
DECL|variable|pgdir_align
r_int
r_int
(paren
op_star
id|pgdir_align
)paren
(paren
r_int
r_int
)paren
suffix:semicolon
DECL|variable|ptrs_per_pte
DECL|variable|ptrs_per_pmd
DECL|variable|ptrs_per_pgd
r_int
r_int
id|ptrs_per_pte
comma
id|ptrs_per_pmd
comma
id|ptrs_per_pgd
suffix:semicolon
DECL|variable|page_none
DECL|variable|page_shared
DECL|variable|page_copy
DECL|variable|page_readonly
DECL|variable|page_kernel
id|pgprot_t
id|page_none
comma
id|page_shared
comma
id|page_copy
comma
id|page_readonly
comma
id|page_kernel
suffix:semicolon
DECL|variable|page_invalid
id|pgprot_t
id|page_invalid
suffix:semicolon
multiline_comment|/* Grrr... function pointers galore... */
DECL|variable|pte_page
r_int
r_int
(paren
op_star
id|pte_page
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pmd_page
r_int
r_int
(paren
op_star
id|pmd_page
)paren
(paren
id|pmd_t
)paren
suffix:semicolon
DECL|variable|pgd_page
r_int
r_int
(paren
op_star
id|pgd_page
)paren
(paren
id|pgd_t
)paren
suffix:semicolon
DECL|variable|sparc_update_rootmmu_dir
r_void
(paren
op_star
id|sparc_update_rootmmu_dir
)paren
(paren
r_struct
id|task_struct
op_star
comma
id|pgd_t
op_star
id|pgdir
)paren
suffix:semicolon
DECL|variable|vmalloc_start
r_int
r_int
(paren
op_star
(paren
id|vmalloc_start
)paren
)paren
(paren
r_void
)paren
suffix:semicolon
DECL|variable|switch_to_context
r_void
(paren
op_star
id|switch_to_context
)paren
(paren
r_int
)paren
suffix:semicolon
DECL|variable|pte_none
r_int
(paren
op_star
id|pte_none
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_present
r_int
(paren
op_star
id|pte_present
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_inuse
r_int
(paren
op_star
id|pte_inuse
)paren
(paren
id|pte_t
op_star
)paren
suffix:semicolon
DECL|variable|pte_clear
r_void
(paren
op_star
id|pte_clear
)paren
(paren
id|pte_t
op_star
)paren
suffix:semicolon
DECL|variable|pte_reuse
r_void
(paren
op_star
id|pte_reuse
)paren
(paren
id|pte_t
op_star
)paren
suffix:semicolon
DECL|variable|pmd_none
r_int
(paren
op_star
id|pmd_none
)paren
(paren
id|pmd_t
)paren
suffix:semicolon
DECL|variable|pmd_bad
r_int
(paren
op_star
id|pmd_bad
)paren
(paren
id|pmd_t
)paren
suffix:semicolon
DECL|variable|pmd_present
r_int
(paren
op_star
id|pmd_present
)paren
(paren
id|pmd_t
)paren
suffix:semicolon
DECL|variable|pmd_inuse
r_int
(paren
op_star
id|pmd_inuse
)paren
(paren
id|pmd_t
op_star
)paren
suffix:semicolon
DECL|variable|pmd_clear
r_void
(paren
op_star
id|pmd_clear
)paren
(paren
id|pmd_t
op_star
)paren
suffix:semicolon
DECL|variable|pmd_reuse
r_void
(paren
op_star
id|pmd_reuse
)paren
(paren
id|pmd_t
op_star
)paren
suffix:semicolon
DECL|variable|pgd_none
r_int
(paren
op_star
id|pgd_none
)paren
(paren
id|pgd_t
)paren
suffix:semicolon
DECL|variable|pgd_bad
r_int
(paren
op_star
id|pgd_bad
)paren
(paren
id|pgd_t
)paren
suffix:semicolon
DECL|variable|pgd_present
r_int
(paren
op_star
id|pgd_present
)paren
(paren
id|pgd_t
)paren
suffix:semicolon
DECL|variable|pgd_inuse
r_int
(paren
op_star
id|pgd_inuse
)paren
(paren
id|pgd_t
op_star
)paren
suffix:semicolon
DECL|variable|pgd_clear
r_void
(paren
op_star
id|pgd_clear
)paren
(paren
id|pgd_t
op_star
)paren
suffix:semicolon
DECL|variable|pgd_reuse
r_void
(paren
op_star
id|pgd_reuse
)paren
(paren
id|pgd_t
op_star
)paren
suffix:semicolon
DECL|variable|mk_pte
id|pte_t
(paren
op_star
id|mk_pte
)paren
(paren
r_int
r_int
comma
id|pgprot_t
)paren
suffix:semicolon
DECL|variable|pgd_set
r_void
(paren
op_star
id|pgd_set
)paren
(paren
id|pgd_t
op_star
comma
id|pte_t
op_star
)paren
suffix:semicolon
DECL|variable|pte_modify
id|pte_t
(paren
op_star
id|pte_modify
)paren
(paren
id|pte_t
comma
id|pgprot_t
)paren
suffix:semicolon
DECL|variable|pgd_offset
id|pgd_t
op_star
(paren
op_star
id|pgd_offset
)paren
(paren
r_struct
id|task_struct
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pmd_offset
id|pmd_t
op_star
(paren
op_star
id|pmd_offset
)paren
(paren
id|pgd_t
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pte_offset
id|pte_t
op_star
(paren
op_star
id|pte_offset
)paren
(paren
id|pmd_t
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pte_free_kernel
r_void
(paren
op_star
id|pte_free_kernel
)paren
(paren
id|pte_t
op_star
)paren
suffix:semicolon
DECL|variable|pte_alloc_kernel
id|pte_t
op_star
(paren
op_star
id|pte_alloc_kernel
)paren
(paren
id|pmd_t
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pmd_free_kernel
r_void
(paren
op_star
id|pmd_free_kernel
)paren
(paren
id|pmd_t
op_star
)paren
suffix:semicolon
DECL|variable|pmd_alloc_kernel
id|pmd_t
op_star
(paren
op_star
id|pmd_alloc_kernel
)paren
(paren
id|pgd_t
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pte_free
r_void
(paren
op_star
id|pte_free
)paren
(paren
id|pte_t
op_star
)paren
suffix:semicolon
DECL|variable|pte_alloc
id|pte_t
op_star
(paren
op_star
id|pte_alloc
)paren
(paren
id|pmd_t
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pmd_free
r_void
(paren
op_star
id|pmd_free
)paren
(paren
id|pmd_t
op_star
)paren
suffix:semicolon
DECL|variable|pmd_alloc
id|pmd_t
op_star
(paren
op_star
id|pmd_alloc
)paren
(paren
id|pgd_t
op_star
comma
r_int
r_int
)paren
suffix:semicolon
DECL|variable|pgd_free
r_void
(paren
op_star
id|pgd_free
)paren
(paren
id|pgd_t
op_star
)paren
suffix:semicolon
DECL|variable|pgd_alloc
id|pgd_t
op_star
(paren
op_star
id|pgd_alloc
)paren
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/*&n; * The following only work if pte_present() is true.&n; * Undefined behaviour if not..&n; */
DECL|variable|pte_read
r_int
(paren
op_star
id|pte_read
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_write
r_int
(paren
op_star
id|pte_write
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_exec
r_int
(paren
op_star
id|pte_exec
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_dirty
r_int
(paren
op_star
id|pte_dirty
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_young
r_int
(paren
op_star
id|pte_young
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_cow
r_int
(paren
op_star
id|pte_cow
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_wrprotect
id|pte_t
(paren
op_star
id|pte_wrprotect
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_rdprotect
id|pte_t
(paren
op_star
id|pte_rdprotect
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_exprotect
id|pte_t
(paren
op_star
id|pte_exprotect
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkclean
id|pte_t
(paren
op_star
id|pte_mkclean
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkold
id|pte_t
(paren
op_star
id|pte_mkold
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_uncow
id|pte_t
(paren
op_star
id|pte_uncow
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkwrite
id|pte_t
(paren
op_star
id|pte_mkwrite
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkread
id|pte_t
(paren
op_star
id|pte_mkread
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkexec
id|pte_t
(paren
op_star
id|pte_mkexec
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkdirty
id|pte_t
(paren
op_star
id|pte_mkdirty
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkyoung
id|pte_t
(paren
op_star
id|pte_mkyoung
)paren
(paren
id|pte_t
)paren
suffix:semicolon
DECL|variable|pte_mkcow
id|pte_t
(paren
op_star
id|pte_mkcow
)paren
(paren
id|pte_t
)paren
suffix:semicolon
r_extern
r_void
id|ld_mmu_sun4c
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|ld_mmu_srmmu
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
DECL|function|load_mmu
id|load_mmu
c_func
(paren
r_void
)paren
(brace
r_switch
c_cond
(paren
id|sparc_cpu_model
)paren
(brace
r_case
id|sun4c
suffix:colon
id|ld_mmu_sun4c
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|sun4m
suffix:colon
r_case
id|sun4d
suffix:colon
r_case
id|sun4e
suffix:colon
id|ld_mmu_srmmu
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;load_mmu:  MMU support not available for this architecture&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;load_mmu:  sparc_cpu_model = %d&bslash;n&quot;
comma
(paren
r_int
)paren
id|sparc_cpu_model
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;load_mmu:  Halting...&bslash;n&quot;
)paren
suffix:semicolon
id|halt
c_func
(paren
)paren
suffix:semicolon
)brace
suffix:semicolon
r_return
suffix:semicolon
)brace
eof
