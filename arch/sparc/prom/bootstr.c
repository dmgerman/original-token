multiline_comment|/* $Id: bootstr.c,v 1.4 1996/02/08 07:06:43 zaitcev Exp $&n; * bootstr.c:  Boot string/argument acquisition from the PROM.&n; *&n; * Copyright(C) 1995 David S. Miller (davem@caip.rutgers.edu)&n; */
macro_line|#include &lt;asm/oplib.h&gt;
DECL|variable|barg_buf
r_static
r_char
id|barg_buf
(braket
l_int|256
)braket
suffix:semicolon
r_char
op_star
DECL|function|prom_getbootargs
id|prom_getbootargs
c_func
(paren
r_void
)paren
(brace
r_int
id|iter
suffix:semicolon
r_char
op_star
id|cp
suffix:semicolon
r_switch
c_cond
(paren
id|prom_vers
)paren
(brace
r_case
id|PROM_V0
suffix:colon
id|cp
op_assign
id|barg_buf
suffix:semicolon
r_for
c_loop
(paren
id|iter
op_assign
l_int|0
suffix:semicolon
id|iter
OL
l_int|8
suffix:semicolon
id|iter
op_increment
)paren
(brace
id|strcpy
c_func
(paren
id|cp
comma
(paren
op_star
(paren
id|romvec-&gt;pv_v0bootargs
)paren
)paren
op_member_access_from_pointer
id|argv
(braket
id|iter
)braket
)paren
suffix:semicolon
id|cp
op_add_assign
id|strlen
c_func
(paren
id|cp
)paren
suffix:semicolon
op_star
id|cp
op_increment
op_assign
l_char|&squot; &squot;
suffix:semicolon
)brace
op_star
id|cp
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PROM_V2
suffix:colon
r_case
id|PROM_V3
suffix:colon
id|cp
op_assign
id|barg_buf
suffix:semicolon
id|strcpy
c_func
(paren
id|cp
comma
op_star
id|romvec-&gt;pv_v2bootargs.bootpath
)paren
suffix:semicolon
id|cp
op_add_assign
id|strlen
c_func
(paren
id|cp
)paren
suffix:semicolon
op_star
id|cp
op_increment
op_assign
l_char|&squot; &squot;
suffix:semicolon
id|strcpy
c_func
(paren
id|cp
comma
op_star
id|romvec-&gt;pv_v2bootargs.bootargs
)paren
suffix:semicolon
id|cp
op_add_assign
id|strlen
c_func
(paren
id|cp
)paren
suffix:semicolon
op_star
id|cp
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|barg_buf
(braket
l_int|0
)braket
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|barg_buf
suffix:semicolon
)brace
eof
