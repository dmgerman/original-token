multiline_comment|/*&n; * This file contains various system calls that have different calling&n; * conventions on different platforms.&n; *&n; * Copyright (C) 1999-2000 Hewlett-Packard Co&n; * Copyright (C) 1999-2000 David Mosberger-Tang &lt;davidm@hpl.hp.com&gt;&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/mman.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/file.h&gt;&t;&t;/* doh, must come after sched.h... */
macro_line|#include &lt;linux/smp.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/highuid.h&gt;
macro_line|#include &lt;asm/shmparam.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
DECL|macro|COLOR_ALIGN
mdefine_line|#define COLOR_ALIGN(addr)&t;(((addr) + SHMLBA - 1) &amp; ~(SHMLBA - 1))
r_int
r_int
DECL|function|get_unmapped_area
id|get_unmapped_area
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
)paren
(brace
r_struct
id|vm_area_struct
op_star
id|vmm
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
id|RGN_MAP_LIMIT
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|addr
)paren
id|addr
op_assign
id|TASK_UNMAPPED_BASE
suffix:semicolon
r_if
c_cond
(paren
id|current-&gt;thread.flags
op_amp
id|IA64_THREAD_MAP_SHARED
)paren
id|addr
op_assign
id|COLOR_ALIGN
c_func
(paren
id|addr
)paren
suffix:semicolon
r_else
id|addr
op_assign
id|PAGE_ALIGN
c_func
(paren
id|addr
)paren
suffix:semicolon
r_for
c_loop
(paren
id|vmm
op_assign
id|find_vma
c_func
(paren
id|current-&gt;mm
comma
id|addr
)paren
suffix:semicolon
suffix:semicolon
id|vmm
op_assign
id|vmm-&gt;vm_next
)paren
(brace
multiline_comment|/* At this point:  (!vmm || addr &lt; vmm-&gt;vm_end). */
r_if
c_cond
(paren
id|TASK_SIZE
op_minus
id|len
OL
id|addr
)paren
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|rgn_offset
c_func
(paren
id|addr
)paren
op_plus
id|len
OG
id|RGN_MAP_LIMIT
)paren
multiline_comment|/* no risk of overflow here... */
r_return
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|vmm
op_logical_or
id|addr
op_plus
id|len
op_le
id|vmm-&gt;vm_start
)paren
r_return
id|addr
suffix:semicolon
id|addr
op_assign
id|vmm-&gt;vm_end
suffix:semicolon
)brace
)brace
id|asmlinkage
r_int
DECL|function|ia64_getpriority
id|ia64_getpriority
(paren
r_int
id|which
comma
r_int
id|who
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_extern
r_int
id|sys_getpriority
(paren
r_int
comma
r_int
)paren
suffix:semicolon
r_int
id|prio
suffix:semicolon
id|prio
op_assign
id|sys_getpriority
c_func
(paren
id|which
comma
id|who
)paren
suffix:semicolon
r_if
c_cond
(paren
id|prio
op_ge
l_int|0
)paren
(brace
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure negative priority is not mistaken as error code */
id|prio
op_assign
l_int|20
op_minus
id|prio
suffix:semicolon
)brace
r_return
id|prio
suffix:semicolon
)brace
multiline_comment|/* XXX obsolete, but leave it here until the old libc is gone... */
id|asmlinkage
r_int
r_int
DECL|function|sys_getpagesize
id|sys_getpagesize
(paren
r_void
)paren
(brace
r_return
id|PAGE_SIZE
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|ia64_shmat
id|ia64_shmat
(paren
r_int
id|shmid
comma
r_void
op_star
id|shmaddr
comma
r_int
id|shmflg
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_extern
r_int
id|sys_shmat
(paren
r_int
id|shmid
comma
r_char
op_star
id|shmaddr
comma
r_int
id|shmflg
comma
id|ulong
op_star
id|raddr
)paren
suffix:semicolon
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
r_int
id|raddr
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|retval
op_assign
id|sys_shmat
c_func
(paren
id|shmid
comma
id|shmaddr
comma
id|shmflg
comma
op_amp
id|raddr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
OL
l_int|0
)paren
r_return
id|retval
suffix:semicolon
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure negative addresses are not mistaken as an error code */
r_return
id|raddr
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|ia64_brk
id|ia64_brk
(paren
r_int
r_int
id|brk
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_extern
r_int
id|vm_enough_memory
(paren
r_int
id|pages
)paren
suffix:semicolon
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
r_int
id|rlim
comma
id|retval
comma
id|newbrk
comma
id|oldbrk
suffix:semicolon
r_struct
id|mm_struct
op_star
id|mm
op_assign
id|current-&gt;mm
suffix:semicolon
multiline_comment|/*&n;&t; * Most of this replicates the code in sys_brk() except for an additional safety&n;&t; * check and the clearing of r8.  However, we can&squot;t call sys_brk() because we need&n;&t; * to acquire the mmap_sem before we can do the test...&n;&t; */
id|down
c_func
(paren
op_amp
id|mm-&gt;mmap_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|brk
OL
id|mm-&gt;end_code
)paren
r_goto
id|out
suffix:semicolon
id|newbrk
op_assign
id|PAGE_ALIGN
c_func
(paren
id|brk
)paren
suffix:semicolon
id|oldbrk
op_assign
id|PAGE_ALIGN
c_func
(paren
id|mm-&gt;brk
)paren
suffix:semicolon
r_if
c_cond
(paren
id|oldbrk
op_eq
id|newbrk
)paren
r_goto
id|set_brk
suffix:semicolon
multiline_comment|/* Always allow shrinking brk. */
r_if
c_cond
(paren
id|brk
op_le
id|mm-&gt;brk
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|do_munmap
c_func
(paren
id|mm
comma
id|newbrk
comma
id|oldbrk
op_minus
id|newbrk
)paren
)paren
r_goto
id|set_brk
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/* Check against unimplemented/unmapped addresses: */
r_if
c_cond
(paren
(paren
id|newbrk
op_minus
id|oldbrk
)paren
OG
id|RGN_MAP_LIMIT
op_logical_or
id|rgn_offset
c_func
(paren
id|newbrk
)paren
OG
id|RGN_MAP_LIMIT
)paren
r_goto
id|out
suffix:semicolon
multiline_comment|/* Check against rlimit.. */
id|rlim
op_assign
id|current-&gt;rlim
(braket
id|RLIMIT_DATA
)braket
dot
id|rlim_cur
suffix:semicolon
r_if
c_cond
(paren
id|rlim
template_param
id|rlim
)paren
r_goto
id|out
suffix:semicolon
multiline_comment|/* Check against existing mmap mappings. */
r_if
c_cond
(paren
id|find_vma_intersection
c_func
(paren
id|mm
comma
id|oldbrk
comma
id|newbrk
op_plus
id|PAGE_SIZE
)paren
)paren
r_goto
id|out
suffix:semicolon
multiline_comment|/* Check if we have enough memory.. */
r_if
c_cond
(paren
op_logical_neg
id|vm_enough_memory
c_func
(paren
(paren
id|newbrk
op_minus
id|oldbrk
)paren
op_rshift
id|PAGE_SHIFT
)paren
)paren
r_goto
id|out
suffix:semicolon
multiline_comment|/* Ok, looks good - let it rip. */
r_if
c_cond
(paren
id|do_brk
c_func
(paren
id|oldbrk
comma
id|newbrk
op_minus
id|oldbrk
)paren
op_ne
id|oldbrk
)paren
r_goto
id|out
suffix:semicolon
id|set_brk
suffix:colon
id|mm-&gt;brk
op_assign
id|brk
suffix:semicolon
id|out
suffix:colon
id|retval
op_assign
id|mm-&gt;brk
suffix:semicolon
id|up
c_func
(paren
op_amp
id|mm-&gt;mmap_sem
)paren
suffix:semicolon
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large retval isn&squot;t mistaken as error code */
r_return
id|retval
suffix:semicolon
)brace
multiline_comment|/*&n; * On IA-64, we return the two file descriptors in ret0 and ret1 (r8&n; * and r9) as this is faster than doing a copy_to_user().&n; */
id|asmlinkage
r_int
DECL|function|sys_pipe
id|sys_pipe
(paren
r_int
id|arg0
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
id|fd
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|retval
op_assign
id|do_pipe
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_goto
id|out
suffix:semicolon
id|retval
op_assign
id|fd
(braket
l_int|0
)braket
suffix:semicolon
id|regs-&gt;r9
op_assign
id|fd
(braket
l_int|1
)braket
suffix:semicolon
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
r_static
r_inline
r_int
r_int
DECL|function|do_mmap2
id|do_mmap2
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
r_int
r_int
id|pgoff
)paren
(brace
r_int
r_int
id|roff
suffix:semicolon
r_struct
id|file
op_star
id|file
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;&t; * A zero mmap always succeeds in Linux, independent of&n;&t; * whether or not the remaining arguments are valid.&n;&t; */
r_if
c_cond
(paren
id|PAGE_ALIGN
c_func
(paren
id|len
)paren
op_eq
l_int|0
)paren
r_return
id|addr
suffix:semicolon
multiline_comment|/* don&squot;t permit mappings into unmapped space or the virtual page table of a region: */
id|roff
op_assign
id|rgn_offset
c_func
(paren
id|addr
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
id|len
op_or
id|roff
op_or
(paren
id|roff
op_plus
id|len
)paren
)paren
op_ge
id|RGN_MAP_LIMIT
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* don&squot;t permit mappings that would cross a region boundary: */
r_if
c_cond
(paren
id|rgn_index
c_func
(paren
id|addr
)paren
op_ne
id|rgn_index
c_func
(paren
id|addr
op_plus
id|len
)paren
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|flags
op_and_assign
op_complement
(paren
id|MAP_EXECUTABLE
op_or
id|MAP_DENYWRITE
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|flags
op_amp
id|MAP_ANONYMOUS
)paren
)paren
(brace
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|file
)paren
r_return
op_minus
id|EBADF
suffix:semicolon
)brace
r_if
c_cond
(paren
id|flags
op_amp
id|MAP_SHARED
)paren
id|current-&gt;thread.flags
op_or_assign
id|IA64_THREAD_MAP_SHARED
suffix:semicolon
id|down
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
id|addr
op_assign
id|do_mmap_pgoff
c_func
(paren
id|file
comma
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|pgoff
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
id|current-&gt;thread.flags
op_and_assign
op_complement
id|IA64_THREAD_MAP_SHARED
suffix:semicolon
r_if
c_cond
(paren
id|file
)paren
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|addr
suffix:semicolon
)brace
multiline_comment|/*&n; * mmap2() is like mmap() except that the offset is expressed in units&n; * of PAGE_SIZE (instead of bytes).  This allows to mmap2() (pieces&n; * of) files that are larger than the address space of the CPU.&n; */
id|asmlinkage
r_int
r_int
DECL|function|sys_mmap2
id|sys_mmap2
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
r_int
id|pgoff
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
id|addr
op_assign
id|do_mmap2
c_func
(paren
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|fd
comma
id|pgoff
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|IS_ERR
c_func
(paren
(paren
r_void
op_star
)paren
id|addr
)paren
)paren
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large addresses are not mistaken as failures... */
r_return
id|addr
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|sys_mmap
id|sys_mmap
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
r_int
id|off
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_if
c_cond
(paren
(paren
id|off
op_amp
op_complement
id|PAGE_MASK
)paren
op_ne
l_int|0
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|addr
op_assign
id|do_mmap2
c_func
(paren
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|fd
comma
id|off
op_rshift
id|PAGE_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|IS_ERR
c_func
(paren
(paren
r_void
op_star
)paren
id|addr
)paren
)paren
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large addresses are not mistaken as failures... */
r_return
id|addr
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_vm86
id|sys_vm86
(paren
r_int
id|arg0
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sys_vm86(%lx, %lx, %lx, %lx)!&bslash;n&quot;
comma
id|arg0
comma
id|arg1
comma
id|arg2
comma
id|arg3
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_modify_ldt
id|sys_modify_ldt
(paren
r_int
id|arg0
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sys_modify_ldt(%lx, %lx, %lx, %lx)!&bslash;n&quot;
comma
id|arg0
comma
id|arg1
comma
id|arg2
comma
id|arg3
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|ia64_create_module
id|ia64_create_module
(paren
r_const
r_char
op_star
id|name_user
comma
r_int
id|size
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_extern
r_int
r_int
id|sys_create_module
(paren
r_const
r_char
op_star
comma
r_int
)paren
suffix:semicolon
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
r_int
id|addr
suffix:semicolon
id|addr
op_assign
id|sys_create_module
(paren
id|name_user
comma
id|size
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|IS_ERR
c_func
(paren
(paren
r_void
op_star
)paren
id|addr
)paren
)paren
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large addresses are not mistaken as failures... */
r_return
id|addr
suffix:semicolon
)brace
macro_line|#if 1
multiline_comment|/*&n; * This is here for a while to keep compatibillity with the old stat()&n; * call - it will be removed later once everybody migrates to the new&n; * kernel stat structure that matches the glibc one - Jes&n; */
r_static
id|__inline__
r_int
DECL|function|do_revalidate
id|do_revalidate
(paren
r_struct
id|dentry
op_star
id|dentry
)paren
(brace
r_struct
id|inode
op_star
id|inode
op_assign
id|dentry-&gt;d_inode
suffix:semicolon
r_if
c_cond
(paren
id|inode-&gt;i_op
op_logical_and
id|inode-&gt;i_op-&gt;revalidate
)paren
r_return
id|inode-&gt;i_op
op_member_access_from_pointer
id|revalidate
c_func
(paren
id|dentry
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_int
DECL|function|cp_ia64_old_stat
id|cp_ia64_old_stat
(paren
r_struct
id|inode
op_star
id|inode
comma
r_struct
id|ia64_oldstat
op_star
id|statbuf
)paren
(brace
r_struct
id|ia64_oldstat
id|tmp
suffix:semicolon
r_int
r_int
id|blocks
comma
id|indirect
suffix:semicolon
id|memset
c_func
(paren
op_amp
id|tmp
comma
l_int|0
comma
r_sizeof
(paren
id|tmp
)paren
)paren
suffix:semicolon
id|tmp.st_dev
op_assign
id|kdev_t_to_nr
c_func
(paren
id|inode-&gt;i_dev
)paren
suffix:semicolon
id|tmp.st_ino
op_assign
id|inode-&gt;i_ino
suffix:semicolon
id|tmp.st_mode
op_assign
id|inode-&gt;i_mode
suffix:semicolon
id|tmp.st_nlink
op_assign
id|inode-&gt;i_nlink
suffix:semicolon
id|SET_STAT_UID
c_func
(paren
id|tmp
comma
id|inode-&gt;i_uid
)paren
suffix:semicolon
id|SET_STAT_GID
c_func
(paren
id|tmp
comma
id|inode-&gt;i_gid
)paren
suffix:semicolon
id|tmp.st_rdev
op_assign
id|kdev_t_to_nr
c_func
(paren
id|inode-&gt;i_rdev
)paren
suffix:semicolon
id|tmp.st_size
op_assign
id|inode-&gt;i_size
suffix:semicolon
id|tmp.st_atime
op_assign
id|inode-&gt;i_atime
suffix:semicolon
id|tmp.st_mtime
op_assign
id|inode-&gt;i_mtime
suffix:semicolon
id|tmp.st_ctime
op_assign
id|inode-&gt;i_ctime
suffix:semicolon
multiline_comment|/*&n; * st_blocks and st_blksize are approximated with a simple algorithm if&n; * they aren&squot;t supported directly by the filesystem. The minix and msdos&n; * filesystems don&squot;t keep track of blocks, so they would either have to&n; * be counted explicitly (by delving into the file itself), or by using&n; * this simple algorithm to get a reasonable (although not 100% accurate)&n; * value.&n; */
multiline_comment|/*&n; * Use minix fs values for the number of direct and indirect blocks.  The&n; * count is now exact for the minix fs except that it counts zero blocks.&n; * Everything is in units of BLOCK_SIZE until the assignment to&n; * tmp.st_blksize.&n; */
DECL|macro|D_B
mdefine_line|#define D_B   7
DECL|macro|I_B
mdefine_line|#define I_B   (BLOCK_SIZE / sizeof(unsigned short))
r_if
c_cond
(paren
op_logical_neg
id|inode-&gt;i_blksize
)paren
(brace
id|blocks
op_assign
(paren
id|tmp.st_size
op_plus
id|BLOCK_SIZE
op_minus
l_int|1
)paren
op_div
id|BLOCK_SIZE
suffix:semicolon
r_if
c_cond
(paren
id|blocks
OG
id|D_B
)paren
(brace
id|indirect
op_assign
(paren
id|blocks
op_minus
id|D_B
op_plus
id|I_B
op_minus
l_int|1
)paren
op_div
id|I_B
suffix:semicolon
id|blocks
op_add_assign
id|indirect
suffix:semicolon
r_if
c_cond
(paren
id|indirect
OG
l_int|1
)paren
(brace
id|indirect
op_assign
(paren
id|indirect
op_minus
l_int|1
op_plus
id|I_B
op_minus
l_int|1
)paren
op_div
id|I_B
suffix:semicolon
id|blocks
op_add_assign
id|indirect
suffix:semicolon
r_if
c_cond
(paren
id|indirect
OG
l_int|1
)paren
id|blocks
op_increment
suffix:semicolon
)brace
)brace
id|tmp.st_blocks
op_assign
(paren
id|BLOCK_SIZE
op_div
l_int|512
)paren
op_star
id|blocks
suffix:semicolon
id|tmp.st_blksize
op_assign
id|BLOCK_SIZE
suffix:semicolon
)brace
r_else
(brace
id|tmp.st_blocks
op_assign
id|inode-&gt;i_blocks
suffix:semicolon
id|tmp.st_blksize
op_assign
id|inode-&gt;i_blksize
suffix:semicolon
)brace
r_return
id|copy_to_user
c_func
(paren
id|statbuf
comma
op_amp
id|tmp
comma
r_sizeof
(paren
id|tmp
)paren
)paren
ques
c_cond
op_minus
id|EFAULT
suffix:colon
l_int|0
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|ia64_oldstat
id|ia64_oldstat
(paren
r_char
op_star
id|filename
comma
r_struct
id|ia64_oldstat
op_star
id|statbuf
)paren
(brace
r_struct
id|nameidata
id|nd
suffix:semicolon
r_int
id|error
suffix:semicolon
id|error
op_assign
id|user_path_walk
c_func
(paren
id|filename
comma
op_amp
id|nd
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
)paren
(brace
id|error
op_assign
id|do_revalidate
c_func
(paren
id|nd.dentry
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
)paren
id|error
op_assign
id|cp_ia64_old_stat
c_func
(paren
id|nd.dentry-&gt;d_inode
comma
id|statbuf
)paren
suffix:semicolon
id|path_release
c_func
(paren
op_amp
id|nd
)paren
suffix:semicolon
)brace
r_return
id|error
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|ia64_oldlstat
id|ia64_oldlstat
(paren
r_char
op_star
id|filename
comma
r_struct
id|ia64_oldstat
op_star
id|statbuf
)paren
(brace
r_struct
id|nameidata
id|nd
suffix:semicolon
r_int
id|error
suffix:semicolon
id|error
op_assign
id|user_path_walk_link
c_func
(paren
id|filename
comma
op_amp
id|nd
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
)paren
(brace
id|error
op_assign
id|do_revalidate
c_func
(paren
id|nd.dentry
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|error
)paren
id|error
op_assign
id|cp_ia64_old_stat
c_func
(paren
id|nd.dentry-&gt;d_inode
comma
id|statbuf
)paren
suffix:semicolon
id|path_release
c_func
(paren
op_amp
id|nd
)paren
suffix:semicolon
)brace
r_return
id|error
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|ia64_oldfstat
id|ia64_oldfstat
(paren
r_int
r_int
id|fd
comma
r_struct
id|ia64_oldstat
op_star
id|statbuf
)paren
(brace
r_struct
id|file
op_star
id|f
suffix:semicolon
r_int
id|err
op_assign
op_minus
id|EBADF
suffix:semicolon
id|f
op_assign
id|fget
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|f
)paren
(brace
r_struct
id|dentry
op_star
id|dentry
op_assign
id|f-&gt;f_dentry
suffix:semicolon
id|err
op_assign
id|do_revalidate
c_func
(paren
id|dentry
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|err
)paren
id|err
op_assign
id|cp_ia64_old_stat
c_func
(paren
id|dentry-&gt;d_inode
comma
id|statbuf
)paren
suffix:semicolon
id|fput
c_func
(paren
id|f
)paren
suffix:semicolon
)brace
r_return
id|err
suffix:semicolon
)brace
macro_line|#endif
macro_line|#ifndef CONFIG_PCI
id|asmlinkage
r_int
DECL|function|sys_pciconfig_read
id|sys_pciconfig_read
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
comma
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_void
op_star
id|buf
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_pciconfig_write
id|sys_pciconfig_write
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
comma
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_void
op_star
id|buf
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
macro_line|#endif /* CONFIG_PCI */
eof
