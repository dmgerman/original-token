multiline_comment|/*&n; * This file contains various system calls that have different calling&n; * conventions on different platforms.&n; *&n; * Copyright (C) 1999 Hewlett-Packard Co&n; * Copyright (C) 1999 David Mosberger-Tang &lt;davidm@hpl.hp.com&gt;&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/fs.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/mman.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/file.h&gt;&t;&t;/* doh, must come after sched.h... */
macro_line|#include &lt;linux/smp.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
id|asmlinkage
r_int
DECL|function|ia64_getpriority
id|ia64_getpriority
(paren
r_int
id|which
comma
r_int
id|who
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_extern
r_int
id|sys_getpriority
(paren
r_int
comma
r_int
)paren
suffix:semicolon
r_int
id|prio
suffix:semicolon
id|prio
op_assign
id|sys_getpriority
c_func
(paren
id|which
comma
id|who
)paren
suffix:semicolon
r_if
c_cond
(paren
id|prio
op_ge
l_int|0
)paren
(brace
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure negative priority is not mistaken as error code */
id|prio
op_assign
l_int|20
op_minus
id|prio
suffix:semicolon
)brace
r_return
id|prio
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|sys_getpagesize
id|sys_getpagesize
(paren
r_void
)paren
(brace
r_return
id|PAGE_SIZE
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|ia64_shmat
id|ia64_shmat
(paren
r_int
id|shmid
comma
r_void
op_star
id|shmaddr
comma
r_int
id|shmflg
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_extern
r_int
id|sys_shmat
(paren
r_int
id|shmid
comma
r_char
op_star
id|shmaddr
comma
r_int
id|shmflg
comma
id|ulong
op_star
id|raddr
)paren
suffix:semicolon
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
r_int
id|raddr
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|retval
op_assign
id|sys_shmat
c_func
(paren
id|shmid
comma
id|shmaddr
comma
id|shmflg
comma
op_amp
id|raddr
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
OL
l_int|0
)paren
r_return
id|retval
suffix:semicolon
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure negative addresses are not mistaken as an error code */
r_return
id|raddr
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|ia64_brk
id|ia64_brk
(paren
r_int
id|brk
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_extern
r_int
r_int
id|sys_brk
(paren
r_int
r_int
id|brk
)paren
suffix:semicolon
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
r_int
id|retval
suffix:semicolon
id|retval
op_assign
id|sys_brk
c_func
(paren
id|brk
)paren
suffix:semicolon
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large retval isn&squot;t mistaken as error code */
r_return
id|retval
suffix:semicolon
)brace
multiline_comment|/*&n; * On IA-64, we return the two file descriptors in ret0 and ret1 (r8&n; * and r9) as this is faster than doing a copy_to_user().&n; */
id|asmlinkage
r_int
DECL|function|sys_pipe
id|sys_pipe
(paren
r_int
id|arg0
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
comma
r_int
id|arg4
comma
r_int
id|arg5
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
r_int
id|fd
(braket
l_int|2
)braket
suffix:semicolon
r_int
id|retval
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|retval
op_assign
id|do_pipe
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_goto
id|out
suffix:semicolon
id|retval
op_assign
id|fd
(braket
l_int|0
)braket
suffix:semicolon
id|regs-&gt;r9
op_assign
id|fd
(braket
l_int|1
)braket
suffix:semicolon
id|out
suffix:colon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
r_static
r_inline
r_int
r_int
DECL|function|do_mmap2
id|do_mmap2
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
r_int
r_int
id|pgoff
)paren
(brace
r_struct
id|file
op_star
id|file
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;&t; * A zero mmap always succeeds in Linux, independent of&n;&t; * whether or not the remaining arguments are valid.&n;&t; */
r_if
c_cond
(paren
id|PAGE_ALIGN
c_func
(paren
id|len
)paren
op_eq
l_int|0
)paren
r_return
id|addr
suffix:semicolon
macro_line|#ifdef notyet
multiline_comment|/* Don&squot;t permit mappings that would cross a region boundary: */
id|region_start
op_assign
id|IA64_GET_REGION
c_func
(paren
id|addr
)paren
suffix:semicolon
id|region_end
op_assign
id|IA64_GET_REGION
c_func
(paren
id|addr
op_plus
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|region_start
op_ne
id|region_end
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
op_lshift
id|x
ques
c_cond
ques
c_cond
id|x
op_rshift
macro_line|#endif
id|flags
op_and_assign
op_complement
(paren
id|MAP_EXECUTABLE
op_or
id|MAP_DENYWRITE
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|flags
op_amp
id|MAP_ANONYMOUS
)paren
)paren
(brace
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|file
)paren
r_return
op_minus
id|EBADF
suffix:semicolon
)brace
id|down
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|addr
op_assign
id|do_mmap_pgoff
c_func
(paren
id|file
comma
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|pgoff
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|file
)paren
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|addr
suffix:semicolon
)brace
multiline_comment|/*&n; * mmap2() is like mmap() except that the offset is expressed in units&n; * of PAGE_SIZE (instead of bytes).  This allows to mmap2() (pieces&n; * of) files that are larger than the address space of the CPU.&n; */
id|asmlinkage
r_int
r_int
DECL|function|sys_mmap2
id|sys_mmap2
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
r_int
id|pgoff
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
id|addr
op_assign
id|do_mmap2
c_func
(paren
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|fd
comma
id|pgoff
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|IS_ERR
c_func
(paren
id|addr
)paren
)paren
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large addresses are not mistaken as failures... */
r_return
id|addr
suffix:semicolon
)brace
id|asmlinkage
r_int
r_int
DECL|function|sys_mmap
id|sys_mmap
(paren
r_int
r_int
id|addr
comma
r_int
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
r_int
id|off
comma
r_int
id|arg6
comma
r_int
id|arg7
comma
r_int
id|stack
)paren
(brace
r_struct
id|pt_regs
op_star
id|regs
op_assign
(paren
r_struct
id|pt_regs
op_star
)paren
op_amp
id|stack
suffix:semicolon
id|addr
op_assign
id|do_mmap2
c_func
(paren
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|fd
comma
id|off
op_rshift
id|PAGE_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|IS_ERR
c_func
(paren
id|addr
)paren
)paren
id|regs-&gt;r8
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* ensure large addresses are not mistaken as failures... */
r_return
id|addr
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_ioperm
id|sys_ioperm
(paren
r_int
r_int
id|from
comma
r_int
r_int
id|num
comma
r_int
id|on
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sys_ioperm(from=%lx, num=%lx, on=%d)&bslash;n&quot;
comma
id|from
comma
id|num
comma
id|on
)paren
suffix:semicolon
r_return
op_minus
id|EIO
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_iopl
id|sys_iopl
(paren
r_int
id|level
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
)paren
(brace
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sys_iopl(level=%d)!&bslash;n&quot;
comma
id|level
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_vm86
id|sys_vm86
(paren
r_int
id|arg0
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
)paren
(brace
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sys_vm86(%lx, %lx, %lx, %lx)!&bslash;n&quot;
comma
id|arg0
comma
id|arg1
comma
id|arg2
comma
id|arg3
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_modify_ldt
id|sys_modify_ldt
(paren
r_int
id|arg0
comma
r_int
id|arg1
comma
r_int
id|arg2
comma
r_int
id|arg3
)paren
(brace
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;sys_modify_ldt(%lx, %lx, %lx, %lx)!&bslash;n&quot;
comma
id|arg0
comma
id|arg1
comma
id|arg2
comma
id|arg3
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
macro_line|#ifndef CONFIG_PCI
id|asmlinkage
r_int
DECL|function|sys_pciconfig_read
id|sys_pciconfig_read
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
comma
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_void
op_star
id|buf
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
id|asmlinkage
r_int
DECL|function|sys_pciconfig_write
id|sys_pciconfig_write
(paren
r_int
r_int
id|bus
comma
r_int
r_int
id|dfn
comma
r_int
r_int
id|off
comma
r_int
r_int
id|len
comma
r_void
op_star
id|buf
)paren
(brace
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
macro_line|#endif /* CONFIG_PCI */
eof
