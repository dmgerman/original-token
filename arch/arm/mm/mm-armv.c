multiline_comment|/*&n; * arch/arm/mm/mm-armv.c&n; *&n; * Common routines for ARM v3 and v4 architectures.&n; *&n; * Copyright (C) 1998 Russell King&n; *&n; * Do not compile this file directly!&n; */
macro_line|#ifndef MAPPING
macro_line|#error MAPPING not defined - do not compile this file individually
macro_line|#endif
DECL|struct|mapping
r_static
r_const
r_struct
id|mapping
(brace
DECL|member|virtual
r_int
r_int
r_virtual
suffix:semicolon
DECL|member|physical
r_int
r_int
id|physical
suffix:semicolon
DECL|member|length
r_int
r_int
id|length
suffix:semicolon
DECL|member|domain
r_int
id|domain
suffix:colon
l_int|4
comma
DECL|member|prot_read
id|prot_read
suffix:colon
l_int|1
comma
DECL|member|prot_write
id|prot_write
suffix:colon
l_int|1
suffix:semicolon
DECL|variable|__initdata
)brace
id|mapping
(braket
)braket
id|__initdata
op_assign
(brace
id|MAPPING
)brace
suffix:semicolon
DECL|macro|SIZEOFMAP
mdefine_line|#define SIZEOFMAP (sizeof(mapping) / sizeof(mapping[0]))
DECL|function|__initfunc
id|__initfunc
c_func
(paren
r_int
r_int
id|setup_io_pagetables
c_func
(paren
r_int
r_int
id|start_mem
)paren
)paren
(brace
r_const
r_struct
id|mapping
op_star
id|mp
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
comma
id|mp
op_assign
id|mapping
suffix:semicolon
id|i
OL
id|SIZEOFMAP
suffix:semicolon
id|i
op_increment
comma
id|mp
op_increment
)paren
(brace
r_int
r_int
r_virtual
comma
id|physical
comma
id|length
suffix:semicolon
r_int
id|prot
suffix:semicolon
r_virtual
op_assign
id|mp
op_member_access_from_pointer
r_virtual
suffix:semicolon
id|physical
op_assign
id|mp-&gt;physical
suffix:semicolon
id|length
op_assign
id|mp-&gt;length
suffix:semicolon
id|prot
op_assign
(paren
id|mp-&gt;prot_read
ques
c_cond
id|L_PTE_USER
suffix:colon
l_int|0
)paren
op_or
(paren
id|mp-&gt;prot_write
ques
c_cond
id|L_PTE_WRITE
suffix:colon
l_int|0
)paren
op_or
id|L_PTE_PRESENT
op_or
id|L_PTE_YOUNG
op_or
id|L_PTE_DIRTY
suffix:semicolon
r_while
c_loop
(paren
(paren
r_virtual
op_amp
l_int|1048575
op_logical_or
id|physical
op_amp
l_int|1048575
)paren
op_logical_and
id|length
op_ge
id|PAGE_SIZE
)paren
(brace
id|alloc_init_page
c_func
(paren
op_amp
id|start_mem
comma
r_virtual
comma
id|physical
comma
id|mp-&gt;domain
comma
id|prot
)paren
suffix:semicolon
id|length
op_sub_assign
id|PAGE_SIZE
suffix:semicolon
r_virtual
op_add_assign
id|PAGE_SIZE
suffix:semicolon
id|physical
op_add_assign
id|PAGE_SIZE
suffix:semicolon
)brace
id|prot
op_assign
(paren
id|mp-&gt;prot_read
ques
c_cond
id|PMD_SECT_AP_READ
suffix:colon
l_int|0
)paren
op_or
(paren
id|mp-&gt;prot_write
ques
c_cond
id|PMD_SECT_AP_WRITE
suffix:colon
l_int|0
)paren
suffix:semicolon
r_while
c_loop
(paren
id|length
op_ge
l_int|1048576
)paren
(brace
id|alloc_init_section
c_func
(paren
op_amp
id|start_mem
comma
r_virtual
comma
id|physical
comma
id|mp-&gt;domain
comma
id|prot
)paren
suffix:semicolon
id|length
op_sub_assign
l_int|1048576
suffix:semicolon
r_virtual
op_add_assign
l_int|1048576
suffix:semicolon
id|physical
op_add_assign
l_int|1048576
suffix:semicolon
)brace
id|prot
op_assign
(paren
id|mp-&gt;prot_read
ques
c_cond
id|L_PTE_USER
suffix:colon
l_int|0
)paren
op_or
(paren
id|mp-&gt;prot_write
ques
c_cond
id|L_PTE_WRITE
suffix:colon
l_int|0
)paren
op_or
id|L_PTE_PRESENT
op_or
id|L_PTE_YOUNG
op_or
id|L_PTE_DIRTY
suffix:semicolon
r_while
c_loop
(paren
id|length
op_ge
id|PAGE_SIZE
)paren
(brace
id|alloc_init_page
c_func
(paren
op_amp
id|start_mem
comma
r_virtual
comma
id|physical
comma
id|mp-&gt;domain
comma
id|prot
)paren
suffix:semicolon
id|length
op_sub_assign
id|PAGE_SIZE
suffix:semicolon
r_virtual
op_add_assign
id|PAGE_SIZE
suffix:semicolon
id|physical
op_add_assign
id|PAGE_SIZE
suffix:semicolon
)brace
)brace
r_return
id|start_mem
suffix:semicolon
)brace
eof
