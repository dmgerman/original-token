multiline_comment|/*&n; *  linux/arch/arm/kernel/traps.c&n; *&n; *  Copyright (C) 1995, 1996 Russell King&n; *  Fragments that appear the same as linux/arch/i386/kernel/traps.c (C) Linus Torvalds&n; */
multiline_comment|/*&n; * &squot;traps.c&squot; handles hardware exceptions after we have saved some state in&n; * &squot;linux/arch/arm/lib/traps.S&squot;.  Mostly a debugging aid, but will probably&n; * kill the offending process.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/signal.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/spinlock.h&gt;
macro_line|#include &lt;asm/atomic.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
r_extern
r_struct
id|task_struct
op_star
id|last_task_used_math
suffix:semicolon
r_extern
r_void
id|fpe_save
c_func
(paren
r_struct
id|fp_soft_struct
op_star
)paren
suffix:semicolon
r_extern
r_void
id|fpe_restore
c_func
(paren
r_struct
id|fp_soft_struct
op_star
)paren
suffix:semicolon
r_extern
r_void
id|die_if_kernel
c_func
(paren
r_char
op_star
id|str
comma
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|err
comma
r_int
id|ret
)paren
suffix:semicolon
r_extern
r_void
id|c_backtrace
(paren
r_int
r_int
id|fp
comma
r_int
id|pmode
)paren
suffix:semicolon
r_extern
r_int
id|ptrace_cancel_bpt
(paren
r_struct
id|task_struct
op_star
)paren
suffix:semicolon
DECL|variable|processor_modes
r_char
op_star
id|processor_modes
(braket
)braket
op_assign
(brace
l_string|&quot;USER_26&quot;
comma
l_string|&quot;FIQ_26&quot;
comma
l_string|&quot;IRQ_26&quot;
comma
l_string|&quot;SVC_26&quot;
comma
l_string|&quot;UK4_26&quot;
comma
l_string|&quot;UK5_26&quot;
comma
l_string|&quot;UK6_26&quot;
comma
l_string|&quot;UK7_26&quot;
comma
l_string|&quot;UK8_26&quot;
comma
l_string|&quot;UK9_26&quot;
comma
l_string|&quot;UK10_26&quot;
comma
l_string|&quot;UK11_26&quot;
comma
l_string|&quot;UK12_26&quot;
comma
l_string|&quot;UK13_26&quot;
comma
l_string|&quot;UK14_26&quot;
comma
l_string|&quot;UK15_26&quot;
comma
l_string|&quot;USER_32&quot;
comma
l_string|&quot;FIQ_32&quot;
comma
l_string|&quot;IRQ_32&quot;
comma
l_string|&quot;SVC_32&quot;
comma
l_string|&quot;UK4_32&quot;
comma
l_string|&quot;UK5_32&quot;
comma
l_string|&quot;UK6_32&quot;
comma
l_string|&quot;ABT_32&quot;
comma
l_string|&quot;UK8_32&quot;
comma
l_string|&quot;UK9_32&quot;
comma
l_string|&quot;UK10_32&quot;
comma
l_string|&quot;UND_32&quot;
comma
l_string|&quot;UK12_32&quot;
comma
l_string|&quot;UK13_32&quot;
comma
l_string|&quot;UK14_32&quot;
comma
l_string|&quot;SYS_32&quot;
)brace
suffix:semicolon
DECL|variable|handler
r_static
r_char
op_star
id|handler
(braket
)braket
op_assign
(brace
l_string|&quot;prefetch abort&quot;
comma
l_string|&quot;data abort&quot;
comma
l_string|&quot;address exception&quot;
comma
l_string|&quot;interrupt&quot;
)brace
suffix:semicolon
DECL|function|console_verbose
r_static
r_inline
r_void
id|console_verbose
c_func
(paren
r_void
)paren
(brace
r_extern
r_int
id|console_loglevel
suffix:semicolon
id|console_loglevel
op_assign
l_int|15
suffix:semicolon
)brace
DECL|variable|kstack_depth_to_print
r_int
id|kstack_depth_to_print
op_assign
l_int|200
suffix:semicolon
DECL|function|verify_stack_pointer
r_static
r_int
id|verify_stack_pointer
(paren
r_int
r_int
id|stackptr
comma
r_int
id|size
)paren
(brace
macro_line|#ifdef CONFIG_CPU_26
r_if
c_cond
(paren
id|stackptr
template_param
l_int|0x03000000
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
macro_line|#else
r_if
c_cond
(paren
id|stackptr
template_param
(paren
r_int
r_int
)paren
id|high_memory
)paren
r_return
op_minus
id|EFAULT
suffix:semicolon
macro_line|#endif
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Dump out the contents of some memory nicely...&n; */
DECL|function|dump_mem
r_void
id|dump_mem
c_func
(paren
r_int
r_int
id|bottom
comma
r_int
r_int
id|top
)paren
(brace
r_int
r_int
id|p
op_assign
id|bottom
op_amp
op_complement
l_int|31
suffix:semicolon
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|p
op_assign
id|bottom
op_amp
op_complement
l_int|31
suffix:semicolon
id|p
OL
id|top
suffix:semicolon
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%08lx: &quot;
comma
id|p
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|8
suffix:semicolon
id|i
op_increment
comma
id|p
op_add_assign
l_int|4
)paren
(brace
r_if
c_cond
(paren
id|p
OL
id|bottom
op_logical_or
id|p
op_ge
id|top
)paren
id|printk
c_func
(paren
l_string|&quot;         &quot;
)paren
suffix:semicolon
r_else
id|printk
c_func
(paren
l_string|&quot;%08lx &quot;
comma
op_star
(paren
r_int
r_int
op_star
)paren
id|p
)paren
suffix:semicolon
r_if
c_cond
(paren
id|i
op_eq
l_int|3
)paren
id|printk
c_func
(paren
l_string|&quot; &quot;
)paren
suffix:semicolon
)brace
id|printk
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * These constants are for searching for possible module text&n; * segments.  VMALLOC_OFFSET comes from mm/vmalloc.c; MODULE_RANGE is&n; * a guess of how much space is likely to be vmalloced.&n; */
DECL|macro|VMALLOC_OFFSET
mdefine_line|#define VMALLOC_OFFSET (8*1024*1024)
DECL|macro|MODULE_RANGE
mdefine_line|#define MODULE_RANGE (8*1024*1024)
DECL|function|dump_instr
r_static
r_void
id|dump_instr
c_func
(paren
r_int
r_int
id|pc
comma
r_int
id|user
)paren
(brace
r_int
r_int
id|module_start
comma
id|module_end
suffix:semicolon
r_int
id|pmin
op_assign
op_minus
l_int|2
comma
id|pmax
op_assign
l_int|3
comma
id|ok
op_assign
l_int|0
suffix:semicolon
r_extern
r_char
id|start_kernel
comma
id|_etext
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|user
)paren
(brace
id|module_start
op_assign
id|VMALLOC_START
suffix:semicolon
id|module_end
op_assign
id|module_start
op_plus
id|MODULE_RANGE
suffix:semicolon
r_if
c_cond
(paren
(paren
id|pc
op_ge
(paren
r_int
r_int
)paren
op_amp
id|start_kernel
)paren
op_logical_and
(paren
id|pc
op_le
(paren
r_int
r_int
)paren
op_amp
id|_etext
)paren
)paren
(brace
r_if
c_cond
(paren
id|pc
op_plus
id|pmin
OL
(paren
r_int
r_int
)paren
op_amp
id|start_kernel
)paren
id|pmin
op_assign
(paren
(paren
r_int
r_int
)paren
op_amp
id|start_kernel
)paren
op_minus
id|pc
suffix:semicolon
r_if
c_cond
(paren
id|pc
op_plus
id|pmax
OG
(paren
r_int
r_int
)paren
op_amp
id|_etext
)paren
id|pmax
op_assign
(paren
(paren
r_int
r_int
)paren
op_amp
id|_etext
)paren
op_minus
id|pc
suffix:semicolon
id|ok
op_assign
l_int|1
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|pc
op_ge
id|module_start
op_logical_and
id|pc
op_le
id|module_end
)paren
(brace
r_if
c_cond
(paren
id|pc
op_plus
id|pmin
OL
id|module_start
)paren
id|pmin
op_assign
id|module_start
op_minus
id|pc
suffix:semicolon
r_if
c_cond
(paren
id|pc
op_plus
id|pmax
OG
id|module_end
)paren
id|pmax
op_assign
id|module_end
op_minus
id|pc
suffix:semicolon
id|ok
op_assign
l_int|1
suffix:semicolon
)brace
)brace
r_else
id|ok
op_assign
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
(paren
r_void
op_star
)paren
(paren
id|pc
op_plus
id|pmin
)paren
comma
id|pmax
op_minus
id|pmin
)paren
op_eq
l_int|0
suffix:semicolon
id|printk
(paren
l_string|&quot;Code: &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|ok
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
id|pmin
suffix:semicolon
id|i
OL
id|pmax
suffix:semicolon
id|i
op_increment
)paren
id|printk
c_func
(paren
id|i
op_eq
l_int|0
ques
c_cond
l_string|&quot;(%08lx) &quot;
suffix:colon
l_string|&quot;%08lx &quot;
comma
(paren
(paren
r_int
r_int
op_star
)paren
id|pc
)paren
(braket
id|i
)braket
)paren
suffix:semicolon
id|printk
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
r_else
id|printk
(paren
l_string|&quot;pc not in code space&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|dump_state
r_static
r_void
id|dump_state
c_func
(paren
r_char
op_star
id|str
comma
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|err
)paren
(brace
id|console_verbose
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Internal error: %s: %x&bslash;n&quot;
comma
id|str
comma
id|err
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;CPU: %d&bslash;n&quot;
comma
id|smp_processor_id
c_func
(paren
)paren
)paren
suffix:semicolon
id|show_regs
c_func
(paren
id|regs
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Process %s (pid: %d, stackpage=%08lx)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
l_int|4096
op_plus
(paren
r_int
r_int
)paren
id|current
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * This function is protected against kernel-mode re-entrancy.  If it&n; * is re-entered it will hang the system since we can&squot;t guarantee in&n; * this case that any of the functions that it calls are safe any more.&n; * Even the panic function could be a problem, but we&squot;ll give it a go.&n; */
DECL|function|die_if_kernel
r_void
id|die_if_kernel
c_func
(paren
r_char
op_star
id|str
comma
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|err
comma
r_int
id|ret
)paren
(brace
r_static
r_int
id|died
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|cstack
comma
id|sstack
comma
id|frameptr
suffix:semicolon
r_if
c_cond
(paren
id|user_mode
c_func
(paren
id|regs
)paren
)paren
r_return
suffix:semicolon
r_switch
c_cond
(paren
id|died
)paren
(brace
r_case
l_int|2
suffix:colon
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
r_case
l_int|1
suffix:colon
id|died
op_increment
suffix:semicolon
id|panic
(paren
l_string|&quot;die_if_kernel re-entered.  Major kernel corruption.  Please reboot me!&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0
suffix:colon
id|died
op_increment
suffix:semicolon
r_break
suffix:semicolon
)brace
id|dump_state
c_func
(paren
id|str
comma
id|regs
comma
id|err
)paren
suffix:semicolon
id|cstack
op_assign
(paren
r_int
r_int
)paren
(paren
id|regs
op_plus
l_int|1
)paren
suffix:semicolon
id|sstack
op_assign
l_int|4096
op_plus
(paren
r_int
r_int
)paren
id|current
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Stack: &quot;
)paren
suffix:semicolon
r_if
c_cond
(paren
id|verify_stack_pointer
c_func
(paren
id|cstack
comma
l_int|4
)paren
)paren
id|printk
c_func
(paren
l_string|&quot;invalid kernel stack pointer %08lx&quot;
comma
id|cstack
)paren
suffix:semicolon
r_else
r_if
c_cond
(paren
id|cstack
OG
id|sstack
op_plus
l_int|4096
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;(sp overflow)&quot;
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|cstack
OL
id|sstack
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;(sp underflow)&quot;
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|dump_mem
c_func
(paren
id|cstack
comma
id|sstack
op_plus
l_int|4096
)paren
suffix:semicolon
id|frameptr
op_assign
id|regs-&gt;ARM_fp
suffix:semicolon
r_if
c_cond
(paren
id|frameptr
)paren
(brace
r_if
c_cond
(paren
id|verify_stack_pointer
(paren
id|frameptr
comma
l_int|4
)paren
)paren
id|printk
(paren
l_string|&quot;Backtrace: invalid frame pointer&bslash;n&quot;
)paren
suffix:semicolon
r_else
(brace
id|printk
c_func
(paren
l_string|&quot;Backtrace: &bslash;n&quot;
)paren
suffix:semicolon
id|c_backtrace
(paren
id|frameptr
comma
id|processor_mode
c_func
(paren
id|regs
)paren
)paren
suffix:semicolon
)brace
)brace
id|dump_instr
c_func
(paren
id|instruction_pointer
c_func
(paren
id|regs
)paren
comma
l_int|0
)paren
suffix:semicolon
id|died
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|ret
op_ne
op_minus
l_int|1
)paren
id|do_exit
(paren
id|ret
)paren
suffix:semicolon
r_else
(brace
id|cli
(paren
)paren
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
)brace
)brace
DECL|function|bad_user_access_alignment
r_void
id|bad_user_access_alignment
(paren
r_const
r_void
op_star
id|ptr
)paren
(brace
r_void
op_star
id|pc
suffix:semicolon
id|__asm__
c_func
(paren
l_string|&quot;mov %0, lr&bslash;n&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|pc
)paren
)paren
suffix:semicolon
id|printk
(paren
id|KERN_ERR
l_string|&quot;bad_user_access_alignment called: ptr = %p, pc = %p&bslash;n&quot;
comma
id|ptr
comma
id|pc
)paren
suffix:semicolon
id|current-&gt;tss.error_code
op_assign
l_int|0
suffix:semicolon
id|current-&gt;tss.trap_no
op_assign
l_int|11
suffix:semicolon
id|force_sig
(paren
id|SIGBUS
comma
id|current
)paren
suffix:semicolon
multiline_comment|/*&t;die_if_kernel(&quot;Oops - bad user access alignment&quot;, regs, mode, SIGBUS);*/
)brace
DECL|function|do_undefinstr
id|asmlinkage
r_void
id|do_undefinstr
(paren
r_int
id|address
comma
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|mode
)paren
(brace
id|current-&gt;tss.error_code
op_assign
l_int|0
suffix:semicolon
id|current-&gt;tss.trap_no
op_assign
l_int|6
suffix:semicolon
id|force_sig
(paren
id|SIGILL
comma
id|current
)paren
suffix:semicolon
id|die_if_kernel
c_func
(paren
l_string|&quot;Oops - undefined instruction&quot;
comma
id|regs
comma
id|mode
comma
id|SIGILL
)paren
suffix:semicolon
)brace
DECL|function|do_excpt
id|asmlinkage
r_void
id|do_excpt
(paren
r_int
id|address
comma
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|mode
)paren
(brace
id|current-&gt;tss.error_code
op_assign
l_int|0
suffix:semicolon
id|current-&gt;tss.trap_no
op_assign
l_int|11
suffix:semicolon
id|force_sig
(paren
id|SIGBUS
comma
id|current
)paren
suffix:semicolon
id|die_if_kernel
c_func
(paren
l_string|&quot;Oops - address exception&quot;
comma
id|regs
comma
id|mode
comma
id|SIGBUS
)paren
suffix:semicolon
)brace
DECL|function|do_unexp_fiq
id|asmlinkage
r_void
id|do_unexp_fiq
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
macro_line|#ifndef CONFIG_IGNORE_FIQ
id|printk
(paren
l_string|&quot;Hmm.  Unexpected FIQ received, but trying to continue&bslash;n&quot;
)paren
suffix:semicolon
id|printk
(paren
l_string|&quot;You may have a hardware problem...&bslash;n&quot;
)paren
suffix:semicolon
macro_line|#endif
)brace
DECL|function|bad_mode
id|asmlinkage
r_void
id|bad_mode
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|reason
comma
r_int
id|proc_mode
)paren
(brace
id|printk
(paren
id|KERN_CRIT
l_string|&quot;Bad mode in %s handler detected: mode %s&bslash;n&quot;
comma
id|handler
(braket
id|reason
)braket
comma
id|processor_modes
(braket
id|proc_mode
)braket
)paren
suffix:semicolon
id|die_if_kernel
(paren
l_string|&quot;Oops&quot;
comma
id|regs
comma
l_int|0
comma
op_minus
l_int|1
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * &squot;math_state_restore()&squot; saves the current math information in the&n; * old math state array, and gets the new ones from the current task.&n; *&n; * We no longer save/restore the math state on every context switch&n; * any more.  We only do this now if it actually gets used.&n; */
DECL|function|math_state_restore
id|asmlinkage
r_void
id|math_state_restore
(paren
r_void
)paren
(brace
r_if
c_cond
(paren
id|last_task_used_math
op_eq
id|current
)paren
r_return
suffix:semicolon
r_if
c_cond
(paren
id|last_task_used_math
)paren
multiline_comment|/*&n;&t;&t; * Save current fp state into last_task_used_math-&gt;tss.fpe_save&n;&t;&t; */
id|fpe_save
(paren
op_amp
id|last_task_used_math-&gt;tss.fpstate.soft
)paren
suffix:semicolon
id|last_task_used_math
op_assign
id|current
suffix:semicolon
r_if
c_cond
(paren
id|current-&gt;used_math
)paren
(brace
multiline_comment|/*&n;    &t;&t; * Restore current fp state from current-&gt;tss.fpe_save&n;&t;    &t; */
id|fpe_restore
(paren
op_amp
id|current-&gt;tss.fpstate.soft
)paren
suffix:semicolon
)brace
r_else
(brace
multiline_comment|/*&n;&t;    &t; * initialise fp state&n;    &t;&t; */
id|fpe_restore
(paren
op_amp
id|init_task.tss.fpstate.soft
)paren
suffix:semicolon
id|current-&gt;used_math
op_assign
l_int|1
suffix:semicolon
)brace
)brace
DECL|function|arm_syscall
id|asmlinkage
r_void
id|arm_syscall
(paren
r_int
id|no
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_switch
c_cond
(paren
id|no
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/* branch through 0 */
id|force_sig
c_func
(paren
id|SIGSEGV
comma
id|current
)paren
suffix:semicolon
singleline_comment|//&t;&t;if (user_mode(regs)) {
singleline_comment|//&t;&t;&t;dump_state(&quot;branch through zero&quot;, regs, 0);
singleline_comment|//&t;&t;&t;if (regs-&gt;ARM_fp)
singleline_comment|//&t;&t;&t;&t;c_backtrace (regs-&gt;ARM_fp, processor_mode(regs));
singleline_comment|//&t;&t;}
id|die_if_kernel
(paren
l_string|&quot;branch through zero&quot;
comma
id|regs
comma
l_int|0
comma
id|SIGSEGV
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|1
suffix:colon
multiline_comment|/* SWI_BREAK_POINT */
id|regs-&gt;ARM_pc
op_sub_assign
l_int|4
suffix:semicolon
multiline_comment|/* Decrement PC by one instruction */
id|ptrace_cancel_bpt
(paren
id|current
)paren
suffix:semicolon
id|force_sig
(paren
id|SIGTRAP
comma
id|current
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
(paren
l_string|&quot;[%d] %s: arm syscall %d&bslash;n&quot;
comma
id|current-&gt;pid
comma
id|current-&gt;comm
comma
id|no
)paren
suffix:semicolon
id|force_sig
(paren
id|SIGILL
comma
id|current
)paren
suffix:semicolon
r_if
c_cond
(paren
id|user_mode
c_func
(paren
id|regs
)paren
)paren
(brace
id|show_regs
(paren
id|regs
)paren
suffix:semicolon
id|c_backtrace
(paren
id|regs-&gt;ARM_fp
comma
id|processor_mode
c_func
(paren
id|regs
)paren
)paren
suffix:semicolon
)brace
id|die_if_kernel
(paren
l_string|&quot;Oops&quot;
comma
id|regs
comma
id|no
comma
id|SIGILL
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
DECL|function|deferred
id|asmlinkage
r_void
id|deferred
c_func
(paren
r_int
id|n
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|dump_state
c_func
(paren
l_string|&quot;old system call&quot;
comma
id|regs
comma
id|n
)paren
suffix:semicolon
id|force_sig
(paren
id|SIGILL
comma
id|current
)paren
suffix:semicolon
)brace
DECL|function|arm_malalignedptr
id|asmlinkage
r_void
id|arm_malalignedptr
c_func
(paren
r_const
r_char
op_star
id|str
comma
r_void
op_star
id|pc
comma
r_volatile
r_void
op_star
id|ptr
)paren
(brace
id|printk
(paren
l_string|&quot;Mal-aligned pointer in %s: %p (PC=%p)&bslash;n&quot;
comma
id|str
comma
id|ptr
comma
id|pc
)paren
suffix:semicolon
)brace
DECL|function|arm_invalidptr
id|asmlinkage
r_void
id|arm_invalidptr
(paren
r_const
r_char
op_star
id|function
comma
r_int
id|size
)paren
(brace
id|printk
(paren
l_string|&quot;Invalid pointer size in %s (PC=%p) size %d&bslash;n&quot;
comma
id|function
comma
id|__builtin_return_address
c_func
(paren
l_int|0
)paren
comma
id|size
)paren
suffix:semicolon
)brace
macro_line|#ifdef CONFIG_CPU_26
DECL|function|baddataabort
id|asmlinkage
r_void
id|baddataabort
c_func
(paren
r_int
id|code
comma
r_int
r_int
id|instr
comma
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|phys
comma
id|addr
op_assign
id|instruction_pointer
c_func
(paren
id|regs
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_DEBUG_ERRORS
id|printk
c_func
(paren
l_string|&quot;pid=%d&bslash;n&quot;
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|show_regs
c_func
(paren
id|regs
)paren
suffix:semicolon
id|dump_instr
c_func
(paren
id|instruction_pointer
c_func
(paren
id|regs
)paren
comma
l_int|1
)paren
suffix:semicolon
(brace
id|pgd_t
op_star
id|pgd
suffix:semicolon
id|printk
(paren
l_string|&quot;current-&gt;tss.memmap = %08lX&bslash;n&quot;
comma
id|current-&gt;tss.memmap
)paren
suffix:semicolon
id|pgd
op_assign
id|pgd_offset
c_func
(paren
id|current-&gt;mm
comma
id|addr
)paren
suffix:semicolon
id|printk
(paren
l_string|&quot;*pgd = %08lx&quot;
comma
id|pgd_val
(paren
op_star
id|pgd
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pgd_none
(paren
op_star
id|pgd
)paren
)paren
(brace
id|pmd_t
op_star
id|pmd
suffix:semicolon
id|pmd
op_assign
id|pmd_offset
(paren
id|pgd
comma
id|addr
)paren
suffix:semicolon
id|printk
(paren
l_string|&quot;, *pmd = %08lx&quot;
comma
id|pmd_val
(paren
op_star
id|pmd
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pmd_none
(paren
op_star
id|pmd
)paren
)paren
(brace
r_int
r_int
id|ptr
op_assign
id|pte_page
c_func
(paren
op_star
id|pte_offset
c_func
(paren
id|pmd
comma
id|addr
)paren
)paren
suffix:semicolon
id|printk
(paren
l_string|&quot;, *pte = %08lx&quot;
comma
id|pte_val
(paren
op_star
id|pte_offset
(paren
id|pmd
comma
id|addr
)paren
)paren
)paren
suffix:semicolon
id|phys
op_assign
id|ptr
op_plus
(paren
id|addr
op_amp
l_int|0x7fff
)paren
suffix:semicolon
)brace
)brace
id|printk
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
)brace
macro_line|#endif
id|panic
c_func
(paren
l_string|&quot;unknown data abort code %d [pc=%08lx *pc=%08lx lr=%08lx sp=%08lx]&quot;
comma
id|code
comma
id|regs-&gt;ARM_pc
comma
id|instr
comma
id|regs-&gt;ARM_lr
comma
id|regs-&gt;ARM_sp
)paren
suffix:semicolon
)brace
macro_line|#endif
eof
