multiline_comment|/*&n; *  linux/arch/arm/kernel/setup.c&n; *&n; *  Copyright (C) 1995, 1996, 1997 Russell King&n; */
multiline_comment|/*&n; * This file obtains various parameters about the system that the kernel&n; * is running on.&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/stddef.h&gt;
macro_line|#include &lt;linux/unistd.h&gt;
macro_line|#include &lt;linux/ptrace.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/user.h&gt;
macro_line|#include &lt;linux/a.out.h&gt;
macro_line|#include &lt;linux/tty.h&gt;
macro_line|#include &lt;linux/ioport.h&gt;
macro_line|#include &lt;linux/delay.h&gt;
macro_line|#include &lt;linux/major.h&gt;
macro_line|#include &lt;linux/utsname.h&gt;
macro_line|#include &lt;linux/blk.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;asm/elf.h&gt;
macro_line|#include &lt;asm/hardware.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/pgtable.h&gt;
macro_line|#include &lt;asm/procinfo.h&gt;
macro_line|#include &lt;asm/segment.h&gt;
macro_line|#include &lt;asm/setup.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/arch/mmu.h&gt;
DECL|struct|drive_info_struct
DECL|member|dummy
DECL|variable|drive_info
r_struct
id|drive_info_struct
(brace
r_char
id|dummy
(braket
l_int|32
)braket
suffix:semicolon
)brace
id|drive_info
suffix:semicolon
DECL|variable|screen_info
r_struct
id|screen_info
id|screen_info
op_assign
(brace
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|0
comma
l_int|1
comma
l_int|8
)brace
suffix:semicolon
DECL|variable|processor
r_struct
id|processor
id|processor
suffix:semicolon
DECL|variable|aux_device_present
r_int
r_char
id|aux_device_present
suffix:semicolon
r_extern
r_const
r_struct
id|processor
id|arm2_processor_functions
suffix:semicolon
r_extern
r_const
r_struct
id|processor
id|arm250_processor_functions
suffix:semicolon
r_extern
r_const
r_struct
id|processor
id|arm3_processor_functions
suffix:semicolon
r_extern
r_const
r_struct
id|processor
id|arm6_processor_functions
suffix:semicolon
r_extern
r_const
r_struct
id|processor
id|arm7_processor_functions
suffix:semicolon
r_extern
r_const
r_struct
id|processor
id|sa110_processor_functions
suffix:semicolon
DECL|variable|elf_platform
r_char
id|elf_platform
(braket
id|ELF_PLATFORM_SIZE
)braket
suffix:semicolon
DECL|variable|armidlist
r_const
r_struct
id|armversions
id|armidlist
(braket
)braket
op_assign
(brace
multiline_comment|/*-- Match -- --- Mask -- -- Manu --  Processor  uname -m   --- ELF STUFF ---&n;&t;--- processor asm funcs --- */
macro_line|#if defined(CONFIG_CPU_26)
(brace
l_int|0x41560200
comma
l_int|0xfffffff0
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm2&quot;
comma
l_string|&quot;armv1&quot;
comma
l_string|&quot;v1&quot;
comma
l_int|0
comma
op_amp
id|arm2_processor_functions
)brace
comma
(brace
l_int|0x41560250
comma
l_int|0xfffffff0
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm250&quot;
comma
l_string|&quot;armv2&quot;
comma
l_string|&quot;v2&quot;
comma
id|HWCAP_SWP
comma
op_amp
id|arm250_processor_functions
)brace
comma
(brace
l_int|0x41560300
comma
l_int|0xfffffff0
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm3&quot;
comma
l_string|&quot;armv2&quot;
comma
l_string|&quot;v2&quot;
comma
id|HWCAP_SWP
comma
op_amp
id|arm3_processor_functions
)brace
comma
macro_line|#elif defined(CONFIG_CPU_32)
(brace
l_int|0x41560600
comma
l_int|0xfffffff0
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm6&quot;
comma
l_string|&quot;armv3&quot;
comma
l_string|&quot;v3&quot;
comma
id|HWCAP_SWP
comma
op_amp
id|arm6_processor_functions
)brace
comma
(brace
l_int|0x41560610
comma
l_int|0xfffffff0
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm610&quot;
comma
l_string|&quot;armv3&quot;
comma
l_string|&quot;v3&quot;
comma
id|HWCAP_SWP
comma
op_amp
id|arm6_processor_functions
)brace
comma
(brace
l_int|0x41007000
comma
l_int|0xffffff00
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm7&quot;
comma
l_string|&quot;armv3&quot;
comma
l_string|&quot;v3&quot;
comma
id|HWCAP_SWP
comma
op_amp
id|arm7_processor_functions
)brace
comma
multiline_comment|/* ARM710 IDs are non-standard */
(brace
l_int|0x41007100
comma
l_int|0xfff8ff00
comma
l_string|&quot;ARM/VLSI&quot;
comma
l_string|&quot;arm710&quot;
comma
l_string|&quot;armv3&quot;
comma
l_string|&quot;v3&quot;
comma
id|HWCAP_SWP
comma
op_amp
id|arm7_processor_functions
)brace
comma
(brace
l_int|0x4401a100
comma
l_int|0xfffffff0
comma
l_string|&quot;DEC&quot;
comma
l_string|&quot;sa110&quot;
comma
l_string|&quot;armv4&quot;
comma
l_string|&quot;v3&quot;
comma
id|HWCAP_SWP
op_or
id|HWCAP_HALF
comma
op_amp
id|sa110_processor_functions
)brace
comma
macro_line|#endif
(brace
l_int|0x00000000
comma
l_int|0x00000000
comma
l_string|&quot;***&quot;
comma
l_string|&quot;unknown&quot;
comma
l_string|&quot;unknown&quot;
comma
l_string|&quot;**&quot;
comma
l_int|0
comma
l_int|NULL
)brace
)brace
suffix:semicolon
DECL|variable|params
r_static
r_const
r_struct
id|param_struct
op_star
id|params
op_assign
(paren
r_struct
id|param_struct
op_star
)paren
id|PARAMS_BASE
suffix:semicolon
DECL|variable|arm_id
r_int
r_int
id|arm_id
suffix:semicolon
DECL|variable|vram_half_sam
r_int
r_int
id|vram_half_sam
suffix:semicolon
DECL|variable|armidindex
r_int
id|armidindex
suffix:semicolon
DECL|variable|memc_ctrl_reg
r_int
id|memc_ctrl_reg
suffix:semicolon
DECL|variable|number_ide_drives
r_int
id|number_ide_drives
suffix:semicolon
DECL|variable|number_mfm_drives
r_int
id|number_mfm_drives
suffix:semicolon
r_extern
r_int
id|bytes_per_char_h
suffix:semicolon
r_extern
r_int
id|bytes_per_char_v
suffix:semicolon
r_extern
r_int
id|root_mountflags
suffix:semicolon
r_extern
r_int
id|_etext
comma
id|_edata
comma
id|_end
suffix:semicolon
r_extern
r_int
r_int
id|real_end_mem
suffix:semicolon
multiline_comment|/*-------------------------------------------------------------------------&n; * Early initialisation routines for various configurable items in the&n; * kernel.  Each one either supplies a setup_ function, or defines this&n; * symbol to be empty if not configured.&n; */
multiline_comment|/*&n; * Risc-PC specific initialisation&n; */
macro_line|#ifdef CONFIG_ARCH_RPC
r_extern
r_void
id|init_dram_banks
c_func
(paren
r_const
r_struct
id|param_struct
op_star
id|params
)paren
suffix:semicolon
r_static
r_void
DECL|function|setup_rpc
id|setup_rpc
c_func
(paren
r_const
r_struct
id|param_struct
op_star
id|params
)paren
(brace
id|init_dram_banks
c_func
(paren
id|params
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|params-&gt;u1.s.pages_in_vram
)paren
(brace
r_case
l_int|256
suffix:colon
id|vram_half_sam
op_assign
l_int|1024
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|512
suffix:colon
r_default
suffix:colon
id|vram_half_sam
op_assign
l_int|2048
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Set ROM speed to maximum&n;&t; */
id|outb
(paren
l_int|0x1d
comma
id|IOMD_ROMCR0
)paren
suffix:semicolon
)brace
macro_line|#else
DECL|macro|setup_rpc
mdefine_line|#define setup_rpc(x)
macro_line|#endif
multiline_comment|/*&n; * ram disk&n; */
macro_line|#ifdef CONFIG_BLK_DEV_RAM
r_extern
r_int
id|rd_doload
suffix:semicolon
multiline_comment|/* 1 = load ramdisk, 0 = don&squot;t load */
r_extern
r_int
id|rd_prompt
suffix:semicolon
multiline_comment|/* 1 = prompt for ramdisk, 0 = don&squot;t prompt */
r_extern
r_int
id|rd_image_start
suffix:semicolon
multiline_comment|/* starting block # of image */
r_static
r_void
DECL|function|setup_ramdisk
id|setup_ramdisk
c_func
(paren
r_const
r_struct
id|param_struct
op_star
id|params
)paren
(brace
id|rd_image_start
op_assign
id|params-&gt;u1.s.rd_start
suffix:semicolon
id|rd_prompt
op_assign
(paren
id|params-&gt;u1.s.flags
op_amp
id|FLAG_RDPROMPT
)paren
op_eq
l_int|0
suffix:semicolon
id|rd_doload
op_assign
(paren
id|params-&gt;u1.s.flags
op_amp
id|FLAG_RDLOAD
)paren
op_eq
l_int|0
suffix:semicolon
)brace
macro_line|#else
DECL|macro|setup_ramdisk
mdefine_line|#define setup_ramdisk(p)
macro_line|#endif
multiline_comment|/*&n; * initial ram disk&n; */
macro_line|#ifdef CONFIG_BLK_DEV_INITRD
r_static
r_void
DECL|function|setup_initrd
id|setup_initrd
c_func
(paren
r_const
r_struct
id|param_struct
op_star
id|params
comma
r_int
r_int
id|memory_end
)paren
(brace
r_if
c_cond
(paren
id|params-&gt;u1.s.initrd_start
)paren
(brace
id|initrd_start
op_assign
id|params-&gt;u1.s.initrd_start
suffix:semicolon
id|initrd_end
op_assign
id|initrd_start
op_plus
id|params-&gt;u1.s.initrd_size
suffix:semicolon
)brace
r_else
(brace
id|initrd_start
op_assign
l_int|0
suffix:semicolon
id|initrd_end
op_assign
l_int|0
suffix:semicolon
)brace
r_if
c_cond
(paren
id|initrd_end
OG
id|memory_end
)paren
(brace
id|printk
(paren
l_string|&quot;initrd extends beyond end of memory &quot;
l_string|&quot;(0x%08lx &gt; 0x%08lx) - disabling initrd&bslash;n&quot;
comma
id|initrd_end
comma
id|memory_end
)paren
suffix:semicolon
id|initrd_start
op_assign
l_int|0
suffix:semicolon
)brace
)brace
macro_line|#else
DECL|macro|setup_initrd
mdefine_line|#define setup_initrd(p,m)
macro_line|#endif
r_static
r_inline
r_void
DECL|function|get_processor_type
id|get_processor_type
c_func
(paren
r_void
)paren
(brace
r_for
c_loop
(paren
id|armidindex
op_assign
l_int|0
suffix:semicolon
suffix:semicolon
id|armidindex
op_increment
)paren
r_if
c_cond
(paren
op_logical_neg
(paren
(paren
id|armidlist
(braket
id|armidindex
)braket
dot
id|id
op_xor
id|arm_id
)paren
op_amp
id|armidlist
(braket
id|armidindex
)braket
dot
id|mask
)paren
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|armidlist
(braket
id|armidindex
)braket
dot
id|id
op_eq
l_int|0
)paren
(brace
r_int
id|i
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|3200
suffix:semicolon
id|i
op_increment
)paren
(paren
(paren
r_int
r_int
op_star
)paren
id|SCREEN2_BASE
)paren
(braket
id|i
)braket
op_assign
l_int|0x77113322
suffix:semicolon
r_while
c_loop
(paren
l_int|1
)paren
suffix:semicolon
)brace
id|processor
op_assign
op_star
id|armidlist
(braket
id|armidindex
)braket
dot
id|proc
suffix:semicolon
)brace
DECL|macro|COMMAND_LINE_SIZE
mdefine_line|#define COMMAND_LINE_SIZE 256
multiline_comment|/* Can this be initdata?  --pb&n; *  command_line can be, saved_command_line can&squot;t though&n; */
DECL|variable|__initdata
r_static
r_char
id|command_line
(braket
id|COMMAND_LINE_SIZE
)braket
id|__initdata
op_assign
(brace
l_int|0
comma
)brace
suffix:semicolon
DECL|variable|saved_command_line
r_char
id|saved_command_line
(braket
id|COMMAND_LINE_SIZE
)braket
suffix:semicolon
DECL|function|__initfunc
id|__initfunc
c_func
(paren
r_void
id|setup_arch
c_func
(paren
r_char
op_star
op_star
id|cmdline_p
comma
r_int
r_int
op_star
id|memory_start_p
comma
r_int
r_int
op_star
id|memory_end_p
)paren
)paren
(brace
r_static
r_int
r_char
id|smptrap
suffix:semicolon
r_int
r_int
id|memory_start
comma
id|memory_end
suffix:semicolon
r_char
id|endian
op_assign
l_char|&squot;l&squot;
comma
id|c
op_assign
l_char|&squot; &squot;
comma
op_star
id|to
op_assign
id|command_line
suffix:semicolon
r_char
op_star
id|from
suffix:semicolon
r_int
id|len
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|smptrap
op_eq
l_int|1
)paren
r_return
suffix:semicolon
id|smptrap
op_assign
l_int|1
suffix:semicolon
id|get_processor_type
(paren
)paren
suffix:semicolon
id|processor._proc_init
(paren
)paren
suffix:semicolon
macro_line|#ifndef CONFIG_FB
id|bytes_per_char_h
op_assign
id|params-&gt;u1.s.bytes_per_char_h
suffix:semicolon
id|bytes_per_char_v
op_assign
id|params-&gt;u1.s.bytes_per_char_v
suffix:semicolon
macro_line|#endif
id|from
op_assign
(paren
r_char
op_star
)paren
id|params-&gt;commandline
suffix:semicolon
id|ROOT_DEV
op_assign
id|to_kdev_t
(paren
id|params-&gt;u1.s.rootdev
)paren
suffix:semicolon
id|ORIG_X
op_assign
id|params-&gt;u1.s.video_x
suffix:semicolon
id|ORIG_Y
op_assign
id|params-&gt;u1.s.video_y
suffix:semicolon
id|ORIG_VIDEO_COLS
op_assign
id|params-&gt;u1.s.video_num_cols
suffix:semicolon
id|ORIG_VIDEO_LINES
op_assign
id|params-&gt;u1.s.video_num_rows
suffix:semicolon
id|memc_ctrl_reg
op_assign
id|params-&gt;u1.s.memc_control_reg
suffix:semicolon
id|number_ide_drives
op_assign
(paren
id|params-&gt;u1.s.adfsdrives
op_rshift
l_int|6
)paren
op_amp
l_int|3
suffix:semicolon
id|number_mfm_drives
op_assign
(paren
id|params-&gt;u1.s.adfsdrives
op_rshift
l_int|3
)paren
op_amp
l_int|3
suffix:semicolon
id|setup_rpc
c_func
(paren
id|params
)paren
suffix:semicolon
id|setup_ramdisk
c_func
(paren
id|params
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|params-&gt;u1.s.flags
op_amp
id|FLAG_READONLY
)paren
)paren
id|root_mountflags
op_and_assign
op_complement
id|MS_RDONLY
suffix:semicolon
id|memory_start
op_assign
id|MAPTOPHYS
c_func
(paren
(paren
r_int
r_int
)paren
op_amp
id|_end
)paren
suffix:semicolon
id|memory_end
op_assign
id|GET_MEMORY_END
c_func
(paren
id|params
)paren
suffix:semicolon
id|init_task.mm-&gt;start_code
op_assign
id|TASK_SIZE
suffix:semicolon
id|init_task.mm-&gt;end_code
op_assign
id|TASK_SIZE
op_plus
(paren
r_int
r_int
)paren
op_amp
id|_etext
suffix:semicolon
id|init_task.mm-&gt;end_data
op_assign
id|TASK_SIZE
op_plus
(paren
r_int
r_int
)paren
op_amp
id|_edata
suffix:semicolon
id|init_task.mm-&gt;brk
op_assign
id|TASK_SIZE
op_plus
(paren
r_int
r_int
)paren
op_amp
id|_end
suffix:semicolon
multiline_comment|/* Save unparsed command line copy for /proc/cmdline */
id|memcpy
c_func
(paren
id|saved_command_line
comma
id|from
comma
id|COMMAND_LINE_SIZE
)paren
suffix:semicolon
id|saved_command_line
(braket
id|COMMAND_LINE_SIZE
op_minus
l_int|1
)braket
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
r_for
c_loop
(paren
suffix:semicolon
suffix:semicolon
)paren
(brace
r_if
c_cond
(paren
id|c
op_eq
l_char|&squot; &squot;
op_logical_and
id|from
(braket
l_int|0
)braket
op_eq
l_char|&squot;m&squot;
op_logical_and
id|from
(braket
l_int|1
)braket
op_eq
l_char|&squot;e&squot;
op_logical_and
id|from
(braket
l_int|2
)braket
op_eq
l_char|&squot;m&squot;
op_logical_and
id|from
(braket
l_int|3
)braket
op_eq
l_char|&squot;=&squot;
)paren
(brace
id|memory_end
op_assign
id|simple_strtoul
c_func
(paren
id|from
op_plus
l_int|4
comma
op_amp
id|from
comma
l_int|0
)paren
suffix:semicolon
r_if
c_cond
(paren
op_star
id|from
op_eq
l_char|&squot;K&squot;
op_logical_or
op_star
id|from
op_eq
l_char|&squot;k&squot;
)paren
(brace
id|memory_end
op_assign
id|memory_end
op_lshift
l_int|10
suffix:semicolon
id|from
op_increment
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
op_star
id|from
op_eq
l_char|&squot;M&squot;
op_logical_or
op_star
id|from
op_eq
l_char|&squot;m&squot;
)paren
(brace
id|memory_end
op_assign
id|memory_end
op_lshift
l_int|20
suffix:semicolon
id|from
op_increment
suffix:semicolon
)brace
id|memory_end
op_assign
id|memory_end
op_plus
id|PAGE_OFFSET
suffix:semicolon
)brace
id|c
op_assign
op_star
id|from
op_increment
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|c
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|COMMAND_LINE_SIZE
op_le
op_increment
id|len
)paren
r_break
suffix:semicolon
op_star
id|to
op_increment
op_assign
id|c
suffix:semicolon
)brace
op_star
id|to
op_assign
l_char|&squot;&bslash;0&squot;
suffix:semicolon
op_star
id|cmdline_p
op_assign
id|command_line
suffix:semicolon
op_star
id|memory_start_p
op_assign
id|memory_start
suffix:semicolon
op_star
id|memory_end_p
op_assign
id|memory_end
suffix:semicolon
id|setup_initrd
c_func
(paren
id|params
comma
id|memory_end
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|system_utsname.machine
comma
l_string|&quot;%s%c&quot;
comma
id|armidlist
(braket
id|armidindex
)braket
dot
id|arch_vsn
comma
id|endian
)paren
suffix:semicolon
id|sprintf
c_func
(paren
id|elf_platform
comma
l_string|&quot;%s%c&quot;
comma
id|armidlist
(braket
id|armidindex
)braket
dot
id|elf_vsn
comma
id|endian
)paren
suffix:semicolon
macro_line|#ifdef CONFIG_FB
id|conswitchp
op_assign
op_amp
id|fb_con
suffix:semicolon
macro_line|#endif
)brace
macro_line|#if defined(CONFIG_ARCH_ARC)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;Acorn-Archimedes&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS&t; &quot;Acorn&quot;
macro_line|#elif defined(CONFIG_ARCH_A5K)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;Acorn-A5000&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS&t; &quot;Acorn&quot;
macro_line|#elif defined(CONFIG_ARCH_RPC)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;Acorn-RiscPC&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS&t; &quot;Acorn&quot;
macro_line|#elif defined(CONFIG_ARCH_EBSA110)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;DEC-EBSA110&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS&t; &quot;DEC&quot;
macro_line|#elif defined(CONFIG_ARCH_EBSA285)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;DEC-EBSA285&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS   &quot;PCI&quot;
macro_line|#elif defined(CONFIG_ARCH_NEXUSPCI)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;Nexus-NexusPCI&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS   &quot;PCI&quot;
macro_line|#elif defined(CONFIG_ARCH_VNC)
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;Corel-VNC&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS   &quot;PCI&quot;
macro_line|#else
DECL|macro|HARDWARE
mdefine_line|#define HARDWARE &quot;unknown&quot;
DECL|macro|IO_BUS
mdefine_line|#define IO_BUS   &quot;unknown&quot;
macro_line|#endif
macro_line|#if defined(CONFIG_CPU_ARM2)
DECL|macro|OPTIMISATION
mdefine_line|#define OPTIMISATION &quot;ARM2&quot;
macro_line|#elif defined(CONFIG_CPU_ARM3)
DECL|macro|OPTIMISATION
mdefine_line|#define OPTIMISATION &quot;ARM3&quot;
macro_line|#elif defined(CONFIG_CPU_ARM6)
DECL|macro|OPTIMISATION
mdefine_line|#define OPTIMISATION &quot;ARM6&quot;
macro_line|#elif defined(CONFIG_CPU_ARM7)
DECL|macro|OPTIMISATION
mdefine_line|#define OPTIMISATION &quot;ARM7&quot;
macro_line|#elif defined(CONFIG_CPU_SA110)
DECL|macro|OPTIMISATION
mdefine_line|#define OPTIMISATION &quot;StrongARM&quot;
macro_line|#else
DECL|macro|OPTIMISATION
mdefine_line|#define OPTIMISATION &quot;unknown&quot;
macro_line|#endif
DECL|function|get_cpuinfo
r_int
id|get_cpuinfo
c_func
(paren
r_char
op_star
id|buffer
)paren
(brace
r_int
id|len
suffix:semicolon
id|len
op_assign
id|sprintf
c_func
(paren
id|buffer
comma
l_string|&quot;Processor&bslash;t: %s %s rev %d&bslash;n&quot;
l_string|&quot;BogoMips&bslash;t: %lu.%02lu&bslash;n&quot;
l_string|&quot;Hardware&bslash;t: %s&bslash;n&quot;
l_string|&quot;Optimisation&bslash;t: %s&bslash;n&quot;
l_string|&quot;IO Bus&bslash;t: %s&bslash;n&quot;
comma
id|armidlist
(braket
id|armidindex
)braket
dot
id|manu
comma
id|armidlist
(braket
id|armidindex
)braket
dot
id|name
comma
(paren
r_int
)paren
id|arm_id
op_amp
l_int|15
comma
(paren
id|loops_per_sec
op_plus
l_int|2500
)paren
op_div
l_int|500000
comma
(paren
(paren
id|loops_per_sec
op_plus
l_int|2500
)paren
op_div
l_int|5000
)paren
op_mod
l_int|100
comma
id|HARDWARE
comma
id|OPTIMISATION
comma
id|IO_BUS
)paren
suffix:semicolon
r_return
id|len
suffix:semicolon
)brace
eof
