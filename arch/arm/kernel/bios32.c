multiline_comment|/*&n; * arch/arm/kernel/bios32.c&n; *&n; * PCI bios-type initialisation for PCI machines&n; *&n; * Bits taken from various places.&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/pci.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/system.h&gt;
DECL|variable|have_isa_bridge
r_int
id|have_isa_bridge
suffix:semicolon
DECL|variable|pci_irq_fixup
r_int
(paren
op_star
id|pci_irq_fixup
)paren
(paren
r_struct
id|pci_dev
op_star
id|dev
)paren
suffix:semicolon
r_extern
r_struct
id|pci_ops
op_star
id|dc21285_init
c_func
(paren
r_int
id|pass
)paren
suffix:semicolon
r_extern
r_void
id|pcibios_fixup_ebsa285
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
)paren
suffix:semicolon
r_extern
r_void
id|hw_init
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
DECL|function|pcibios_report_device_errors
id|pcibios_report_device_errors
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
suffix:semicolon
r_for
c_loop
(paren
id|dev
op_assign
id|pci_devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
(brace
id|u16
id|status
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|dev
comma
id|PCI_STATUS
comma
op_amp
id|status
)paren
suffix:semicolon
r_if
c_cond
(paren
id|status
op_amp
l_int|0xf900
)paren
(brace
id|pci_write_config_word
c_func
(paren
id|dev
comma
id|PCI_STATUS
comma
id|status
op_amp
l_int|0xf900
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_DEBUG
l_string|&quot;PCI: %02x:%02x status = %X&bslash;n&quot;
comma
id|dev-&gt;bus-&gt;number
comma
id|dev-&gt;devfn
comma
id|status
)paren
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * We don&squot;t use this to fix the device, but more our initialisation.&n; * It&squot;s not the correct use for this, but it works.  The actions we&n; * take are:&n; * - enable only IO&n; * - set memory region to start at zero&n; * - (0x48) enable all memory requests from ISA to be channeled to PCI&n; * - (0x42) disable ping-pong (as per errata)&n; * - (0x40) enable PCI packet retry&n; * - (0x83) don&squot;t use CPU park enable, park on last master, disable GAT bit&n; * - (0x80) default rotating priorities&n; * - (0x81) rotate bank 4&n; */
DECL|function|pci_fixup_83c553
r_static
r_void
id|__init
id|pci_fixup_83c553
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
)paren
(brace
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|PCI_BASE_ADDRESS_0
comma
id|PCI_BASE_ADDRESS_SPACE_MEMORY
)paren
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|dev
comma
id|PCI_COMMAND
comma
id|PCI_COMMAND_IO
)paren
suffix:semicolon
id|dev-&gt;resource
(braket
l_int|0
)braket
dot
id|end
op_sub_assign
id|dev-&gt;resource
(braket
l_int|0
)braket
dot
id|start
suffix:semicolon
id|dev-&gt;resource
(braket
l_int|0
)braket
dot
id|start
op_assign
l_int|0
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
l_int|0x48
comma
l_int|0xff
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
l_int|0x42
comma
l_int|0x00
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
l_int|0x40
comma
l_int|0x22
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
l_int|0x83
comma
l_int|0x02
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
l_int|0x80
comma
l_int|0xe0
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
l_int|0x81
comma
l_int|0x01
)paren
suffix:semicolon
)brace
DECL|variable|pcibios_fixups
r_struct
id|pci_fixup
id|pcibios_fixups
(braket
)braket
op_assign
(brace
(brace
id|PCI_FIXUP_HEADER
comma
id|PCI_VENDOR_ID_WINBOND
comma
id|PCI_DEVICE_ID_WINBOND_83C553
comma
id|pci_fixup_83c553
)brace
comma
(brace
l_int|0
)brace
)brace
suffix:semicolon
multiline_comment|/*&n; * Assign new address to PCI resource.  We hope our resource information&n; * is complete.  On the PC, we don&squot;t re-assign resources unless we are&n; * forced to do so.&n; *&n; * Expects start=0, end=size-1, flags=resource type.&n; */
DECL|function|pcibios_assign_resource
r_int
id|__init
id|pcibios_assign_resource
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_int
id|i
)paren
(brace
r_struct
id|resource
op_star
id|r
op_assign
op_amp
id|dev-&gt;resource
(braket
id|i
)braket
suffix:semicolon
r_struct
id|resource
op_star
id|pr
op_assign
id|pci_find_parent_resource
c_func
(paren
id|dev
comma
id|r
)paren
suffix:semicolon
r_int
r_int
id|size
op_assign
id|r-&gt;end
op_plus
l_int|1
suffix:semicolon
r_int
r_int
id|flags
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|pr
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|r-&gt;flags
op_amp
id|IORESOURCE_IO
)paren
(brace
r_if
c_cond
(paren
id|size
OG
l_int|0x100
)paren
r_return
op_minus
id|EFBIG
suffix:semicolon
r_if
c_cond
(paren
id|allocate_resource
c_func
(paren
id|pr
comma
id|r
comma
id|size
comma
l_int|0x9000
comma
op_complement
l_int|0
comma
l_int|1024
)paren
)paren
r_return
op_minus
id|EBUSY
suffix:semicolon
id|flags
op_assign
id|PCI_BASE_ADDRESS_SPACE_IO
suffix:semicolon
)brace
r_else
(brace
r_if
c_cond
(paren
id|allocate_resource
c_func
(paren
id|pr
comma
id|r
comma
id|size
comma
l_int|0x00100000
comma
l_int|0x7fffffff
comma
id|size
)paren
)paren
r_return
op_minus
id|EBUSY
suffix:semicolon
)brace
r_if
c_cond
(paren
id|i
OL
l_int|6
)paren
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|PCI_BASE_ADDRESS_0
op_plus
l_int|4
op_star
id|i
comma
id|r-&gt;start
op_or
id|flags
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/*&n; * Assign an address to an I/O range.&n; */
DECL|function|pcibios_fixup_io_addr
r_static
r_void
id|__init
id|pcibios_fixup_io_addr
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_struct
id|resource
op_star
id|r
comma
r_int
id|idx
)paren
(brace
r_int
r_int
id|reg
op_assign
id|PCI_BASE_ADDRESS_0
op_plus
(paren
id|idx
op_lshift
l_int|2
)paren
suffix:semicolon
r_int
r_int
id|size
op_assign
id|r-&gt;end
op_minus
id|r-&gt;start
op_plus
l_int|1
suffix:semicolon
id|u32
r_try
suffix:semicolon
multiline_comment|/*&n;&t; * We need to avoid collisions with `mirrored&squot; VGA ports and other strange&n;&t; * ISA hardware, so we always want the addresses kilobyte aligned.&n;&t; */
r_if
c_cond
(paren
op_logical_neg
id|size
op_logical_or
id|size
OG
l_int|256
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: Cannot assign I/O space to %s, &quot;
l_string|&quot;%d bytes are too much.&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|size
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|allocate_resource
c_func
(paren
op_amp
id|ioport_resource
comma
id|r
comma
id|size
comma
l_int|0x9000
comma
op_complement
l_int|0
comma
l_int|1024
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: Unable to find free %d bytes of I/O &quot;
l_string|&quot;space for %s.&bslash;n&quot;
comma
id|size
comma
id|dev-&gt;name
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;PCI: Assigning I/O space %04lx-%04lx to %s&bslash;n&quot;
comma
id|r-&gt;start
comma
id|r-&gt;end
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|reg
comma
id|r-&gt;start
op_or
id|PCI_BASE_ADDRESS_SPACE_IO
)paren
suffix:semicolon
id|pci_read_config_dword
c_func
(paren
id|dev
comma
id|reg
comma
op_amp
r_try
)paren
suffix:semicolon
r_if
c_cond
(paren
(paren
r_try
op_amp
id|PCI_BASE_ADDRESS_IO_MASK
)paren
op_ne
id|r-&gt;start
)paren
(brace
id|r-&gt;start
op_assign
l_int|0
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|reg
comma
l_int|0
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: I/O address setup failed, got %04x&bslash;n&quot;
comma
r_try
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Assign an address to an memory range.&n; */
DECL|function|pcibios_fixup_mem_addr
r_static
r_void
id|__init
id|pcibios_fixup_mem_addr
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
r_struct
id|resource
op_star
id|r
comma
r_int
id|idx
)paren
(brace
r_int
r_int
id|reg
op_assign
id|PCI_BASE_ADDRESS_0
op_plus
(paren
id|idx
op_lshift
l_int|2
)paren
suffix:semicolon
r_int
r_int
id|size
op_assign
id|r-&gt;end
op_minus
id|r-&gt;start
op_plus
l_int|1
suffix:semicolon
id|u32
r_try
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|size
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: Cannot assign memory space to %s, &quot;
l_string|&quot;%d bytes are too much.&bslash;n&quot;
comma
id|dev-&gt;name
comma
id|size
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
r_if
c_cond
(paren
id|allocate_resource
c_func
(paren
op_amp
id|iomem_resource
comma
id|r
comma
id|size
comma
l_int|0x00100000
comma
l_int|0x0fffffff
comma
l_int|1024
)paren
)paren
(brace
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: Unable to find free %d bytes of memory &quot;
l_string|&quot;space for %s.&bslash;n&quot;
comma
id|size
comma
id|dev-&gt;name
)paren
suffix:semicolon
r_return
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;PCI: Assigning memory space %08lx-%08lx to %s&bslash;n&quot;
comma
id|r-&gt;start
comma
id|r-&gt;end
comma
id|dev-&gt;name
)paren
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|reg
comma
id|r-&gt;start
)paren
suffix:semicolon
id|pci_read_config_dword
c_func
(paren
id|dev
comma
id|reg
comma
op_amp
r_try
)paren
suffix:semicolon
r_if
c_cond
(paren
r_try
op_ne
id|r-&gt;start
)paren
(brace
id|r-&gt;start
op_assign
l_int|0
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|reg
comma
l_int|0
)paren
suffix:semicolon
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: memory address setup failed, &quot;
l_string|&quot;got %08x&bslash;n&quot;
comma
r_try
)paren
suffix:semicolon
)brace
)brace
DECL|macro|_PCI_REGION_IO
mdefine_line|#define _PCI_REGION_IO&t;1
DECL|macro|_PCI_REGION_MEM
mdefine_line|#define _PCI_REGION_MEM&t;2
multiline_comment|/*&n; * Fix up one PCI devices regions, enables and interrupt lines&n; */
DECL|function|pcibios_fixup_device
r_static
r_void
id|__init
id|pcibios_fixup_device
c_func
(paren
r_struct
id|pci_dev
op_star
id|dev
comma
id|u16
op_star
id|cmd
)paren
(brace
r_int
id|i
comma
id|has_regions
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;&t; * Fix up the regions.  Any regions which aren&squot;t allocated&n;&t; * are given a free region.&n;&t; */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
(brace
r_struct
id|resource
op_star
id|r
op_assign
id|dev-&gt;resource
op_plus
id|i
suffix:semicolon
r_if
c_cond
(paren
id|r-&gt;flags
op_amp
id|IORESOURCE_IO
)paren
(brace
id|has_regions
op_or_assign
id|_PCI_REGION_IO
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|r-&gt;start
op_logical_or
id|r-&gt;end
op_eq
l_int|0xffffffff
)paren
id|pcibios_fixup_io_addr
c_func
(paren
id|dev
comma
id|r
comma
id|i
)paren
suffix:semicolon
)brace
r_else
r_if
c_cond
(paren
id|r-&gt;end
)paren
(brace
id|has_regions
op_or_assign
id|_PCI_REGION_MEM
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|r-&gt;start
)paren
id|pcibios_fixup_mem_addr
c_func
(paren
id|dev
comma
id|r
comma
id|i
)paren
suffix:semicolon
)brace
)brace
r_switch
c_cond
(paren
id|dev
op_member_access_from_pointer
r_class
op_rshift
l_int|8
)paren
(brace
r_case
id|PCI_CLASS_BRIDGE_ISA
suffix:colon
r_case
id|PCI_CLASS_BRIDGE_EISA
suffix:colon
multiline_comment|/*&n;&t;&t; * If this device is an ISA bridge, set the have_isa_bridge&n;&t;&t; * flag.  We will then go looking for things like keyboard,&n;&t;&t; * etc&n;&t;&t; */
id|have_isa_bridge
op_assign
op_logical_neg
l_int|0
suffix:semicolon
multiline_comment|/* FALL THROUGH */
r_default
suffix:colon
(brace
)brace
multiline_comment|/*&n;&t;&t; * Don&squot;t enable VGA-compatible cards since they have&n;&t;&t; * fixed I/O and memory space.&n;&t;&t; *&n;&t;&t; * Don&squot;t enabled disabled IDE interfaces either because&n;&t;&t; * some BIOSes may reallocate the same address when they&n;&t;&t; * find that no devices are attached. &n;&t;&t; */
r_if
c_cond
(paren
id|has_regions
op_amp
id|_PCI_REGION_IO
op_logical_and
op_logical_neg
(paren
(paren
op_star
id|cmd
)paren
op_amp
id|PCI_COMMAND_IO
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;PCI: Enabling I/O for %s&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
op_star
id|cmd
op_or_assign
id|PCI_COMMAND_IO
suffix:semicolon
)brace
r_if
c_cond
(paren
id|has_regions
op_amp
id|_PCI_REGION_MEM
op_logical_and
op_logical_neg
(paren
(paren
op_star
id|cmd
)paren
op_amp
id|PCI_COMMAND_MEMORY
)paren
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;PCI: Enabling memory for %s&bslash;n&quot;
comma
id|dev-&gt;name
)paren
suffix:semicolon
op_star
id|cmd
op_or_assign
id|PCI_COMMAND_MEMORY
suffix:semicolon
)brace
)brace
)brace
multiline_comment|/*&n; * Fix base addresses, I/O and memory enables and IRQ&squot;s&n; */
DECL|function|pcibios_fixup_devices
r_static
r_void
id|__init
id|pcibios_fixup_devices
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
suffix:semicolon
r_for
c_loop
(paren
id|dev
op_assign
id|pci_devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
(brace
id|u16
id|cmd
suffix:semicolon
multiline_comment|/*&n;&t;&t; * architecture specific hacks.&n;&t;&t; * I don&squot;t really want this here,&n;&t;&t; * but I don&squot;t see any other place&n;&t;&t; * for it to live.&n;&t;&t; */
r_if
c_cond
(paren
id|machine_is_netwinder
c_func
(paren
)paren
op_logical_and
id|dev-&gt;vendor
op_eq
id|PCI_VENDOR_ID_DEC
op_logical_and
id|dev-&gt;device
op_eq
id|PCI_DEVICE_ID_DEC_21142
)paren
multiline_comment|/* Put the chip to sleep in case the driver isn&squot;t loaded */
id|pci_write_config_dword
c_func
(paren
id|dev
comma
l_int|0x40
comma
l_int|0x80000000
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; * Set latency timer to 32, and a cache line size to 32 bytes.&n;&t;&t; * Also, set system error enable, parity error enable, and&n;&t;&t; * fast back to back transaction enable.  Disable ROM.&n;&t;&t; */
id|pci_write_config_byte
c_func
(paren
id|dev
comma
id|PCI_LATENCY_TIMER
comma
l_int|32
)paren
suffix:semicolon
id|pci_write_config_byte
c_func
(paren
id|dev
comma
id|PCI_CACHE_LINE_SIZE
comma
l_int|8
)paren
suffix:semicolon
id|pci_write_config_dword
c_func
(paren
id|dev
comma
id|PCI_ROM_ADDRESS
comma
l_int|0
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|dev
comma
id|PCI_COMMAND
comma
op_amp
id|cmd
)paren
suffix:semicolon
id|cmd
op_or_assign
id|PCI_COMMAND_FAST_BACK
op_or
id|PCI_COMMAND_SERR
op_or
id|PCI_COMMAND_PARITY
suffix:semicolon
id|pcibios_fixup_device
c_func
(paren
id|dev
comma
op_amp
id|cmd
)paren
suffix:semicolon
id|pci_write_config_word
c_func
(paren
id|dev
comma
id|PCI_COMMAND
comma
id|cmd
)paren
suffix:semicolon
id|pci_read_config_word
c_func
(paren
id|dev
comma
id|PCI_COMMAND
comma
op_amp
id|cmd
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; * now fixup the IRQs, if required&n;&t;&t; */
r_if
c_cond
(paren
id|pci_irq_fixup
)paren
id|dev-&gt;irq
op_assign
id|pci_irq_fixup
c_func
(paren
id|dev
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; * If any remaining IRQs are weird, fix it now.&n;&t;&t; */
r_if
c_cond
(paren
id|dev-&gt;irq
op_ge
id|NR_IRQS
)paren
id|dev-&gt;irq
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;&t;&t; * catch any drivers still reading this from the&n;&t;&t; * device itself.  This can be removed once&n;&t;&t; * all drivers are fixed. (are there any?)&n;&t;&t; */
id|pci_write_config_byte
c_func
(paren
id|dev
comma
id|PCI_INTERRUPT_LINE
comma
id|dev-&gt;irq
)paren
suffix:semicolon
)brace
)brace
multiline_comment|/*&n; * Allocate resources for all PCI devices that have been enabled.&n; * We need to do that before we try to fix up anything.&n; */
DECL|function|pcibios_claim_resources
r_static
r_void
id|__init
id|pcibios_claim_resources
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_dev
op_star
id|dev
suffix:semicolon
r_int
id|idx
suffix:semicolon
r_for
c_loop
(paren
id|dev
op_assign
id|pci_devices
suffix:semicolon
id|dev
suffix:semicolon
id|dev
op_assign
id|dev-&gt;next
)paren
r_for
c_loop
(paren
id|idx
op_assign
l_int|0
suffix:semicolon
id|idx
OL
id|PCI_NUM_RESOURCES
suffix:semicolon
id|idx
op_increment
)paren
(brace
r_struct
id|resource
op_star
id|a
comma
op_star
id|r
op_assign
op_amp
id|dev-&gt;resource
(braket
id|idx
)braket
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t; * Ignore regions that start at 0 or&n;&t;&t;&t; * end at 0xffffffff&n;&t;&t;&t; */
r_if
c_cond
(paren
op_logical_neg
id|r-&gt;start
op_logical_or
id|r-&gt;end
op_eq
l_int|0xffffffff
)paren
r_continue
suffix:semicolon
r_if
c_cond
(paren
id|r-&gt;flags
op_amp
id|IORESOURCE_IO
)paren
id|a
op_assign
op_amp
id|ioport_resource
suffix:semicolon
r_else
id|a
op_assign
op_amp
id|iomem_resource
suffix:semicolon
r_if
c_cond
(paren
id|request_resource
c_func
(paren
id|a
comma
id|r
)paren
OL
l_int|0
)paren
id|printk
c_func
(paren
id|KERN_ERR
l_string|&quot;PCI: Address space collision &quot;
l_string|&quot;on region %d of %s&bslash;n&quot;
comma
id|idx
comma
id|dev-&gt;name
)paren
suffix:semicolon
multiline_comment|/* We probably should disable the region,&n;&t;&t;&t;&t; * shouldn&squot;t we?&n;&t;&t;&t;&t; */
)brace
)brace
multiline_comment|/*&n; * Called after each bus is probed, but before its children&n; * are examined.&n; *&n; * No fixup of bus required&n; */
DECL|function|pcibios_fixup_bus
r_void
id|__init
id|pcibios_fixup_bus
c_func
(paren
r_struct
id|pci_bus
op_star
id|bus
)paren
(brace
)brace
DECL|function|pcibios_init
r_void
id|__init
id|pcibios_init
c_func
(paren
r_void
)paren
(brace
r_struct
id|pci_ops
op_star
id|ops
suffix:semicolon
multiline_comment|/*&n;&t; * Pre-initialisation.  Set up the host bridge.&n;&t; */
id|ops
op_assign
id|dc21285_init
c_func
(paren
l_int|0
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;PCI: Probing PCI hardware&bslash;n&quot;
)paren
suffix:semicolon
id|pci_scan_bus
c_func
(paren
l_int|0
comma
id|ops
comma
l_int|NULL
)paren
suffix:semicolon
id|pcibios_claim_resources
c_func
(paren
)paren
suffix:semicolon
id|pcibios_fixup_devices
c_func
(paren
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Now clear down any PCI error IRQs and&n;&t; * register the error handler&n;&t; */
id|dc21285_init
c_func
(paren
l_int|1
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Initialise any other hardware after we&squot;ve&n;&t; * got the PCI bus initialised.  We may need&n;&t; * the PCI bus to talk to this other hardware.&n;&t; */
id|hw_init
c_func
(paren
)paren
suffix:semicolon
)brace
DECL|function|pcibios_setup
r_char
op_star
id|__init
id|pcibios_setup
c_func
(paren
r_char
op_star
id|str
)paren
(brace
r_return
id|str
suffix:semicolon
)brace
eof
