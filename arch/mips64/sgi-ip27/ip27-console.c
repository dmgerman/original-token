multiline_comment|/*&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; */
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;linux/console.h&gt;
macro_line|#include &lt;linux/kdev_t.h&gt;
macro_line|#include &lt;linux/major.h&gt;
macro_line|#include &lt;asm/sn/addrs.h&gt;
macro_line|#include &lt;asm/sn/sn0/hub.h&gt;
macro_line|#include &lt;asm/sn/klconfig.h&gt;
macro_line|#include &lt;asm/sn/ioc3.h&gt;
macro_line|#include &lt;asm/sgialib.h&gt;
macro_line|#include &lt;asm/sn/sn_private.h&gt;
DECL|function|prom_putchar
r_void
id|prom_putchar
c_func
(paren
r_char
id|c
)paren
(brace
r_struct
id|ioc3
op_star
id|ioc3
suffix:semicolon
r_struct
id|ioc3_uartregs
op_star
id|uart
suffix:semicolon
id|ioc3
op_assign
(paren
r_struct
id|ioc3
op_star
)paren
id|KL_CONFIG_CH_CONS_INFO
c_func
(paren
id|master_nasid
)paren
op_member_access_from_pointer
id|memory_base
suffix:semicolon
id|uart
op_assign
op_amp
id|ioc3-&gt;sregs.uarta
suffix:semicolon
r_while
c_loop
(paren
(paren
id|uart-&gt;iu_lsr
op_amp
l_int|0x20
)paren
op_eq
l_int|0
)paren
suffix:semicolon
id|uart-&gt;iu_thr
op_assign
id|c
suffix:semicolon
)brace
DECL|function|prom_getchar
r_char
id|__init
id|prom_getchar
c_func
(paren
r_void
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
r_static
r_void
DECL|function|ip27prom_console_write
id|ip27prom_console_write
c_func
(paren
r_struct
id|console
op_star
id|con
comma
r_const
r_char
op_star
id|s
comma
r_int
id|n
)paren
(brace
id|prom_printf
c_func
(paren
l_string|&quot;%s&quot;
comma
id|s
)paren
suffix:semicolon
)brace
r_static
id|kdev_t
DECL|function|ip27prom_console_dev
id|ip27prom_console_dev
c_func
(paren
r_struct
id|console
op_star
id|c
)paren
(brace
r_return
id|MKDEV
c_func
(paren
id|TTY_MAJOR
comma
l_int|64
op_plus
id|c-&gt;index
)paren
suffix:semicolon
)brace
DECL|variable|ip27_prom_console
r_static
r_struct
id|console
id|ip27_prom_console
op_assign
(brace
id|name
suffix:colon
l_string|&quot;prom&quot;
comma
id|write
suffix:colon
id|ip27prom_console_write
comma
id|device
suffix:colon
id|ip27prom_console_dev
comma
id|flags
suffix:colon
id|CON_PRINTBUFFER
comma
id|index
suffix:colon
op_minus
l_int|1
comma
)brace
suffix:semicolon
DECL|function|ip27_setup_console
id|__init
r_void
id|ip27_setup_console
c_func
(paren
r_void
)paren
(brace
id|register_console
c_func
(paren
op_amp
id|ip27_prom_console
)paren
suffix:semicolon
)brace
eof
