multiline_comment|/*&n;** linux/arch/m68k/boot/amiga/bootstrap.h -- This file is part of the Amiga&n;**&t;&t;&t;&t;&t;     bootloader.&n;**&n;** Copyright 1993, 1994 by Hamish Macdonald&n;**&n;** Some minor additions by Michael Rausch 1-11-94&n;** Modified 11-May-94 by Geert Uytterhoeven&n;**&t;&t;&t;(Geert.Uytterhoeven@cs.kuleuven.ac.be)&n;**     - inline Supervisor() call&n;** Modified 10-Jan-96 by Geert Uytterhoeven&n;**     - The real Linux/m68k boot code moved to linuxboot.[ch]&n;** Modified 9-Sep-96 by Geert Uytterhoeven&n;**     - const library bases&n;**     - fixed register naming for m68k-cbm-amigados-gcc&n;**&n;** This file is subject to the terms and conditions of the GNU General Public&n;** License.  See the file COPYING in the main directory of this archive&n;** for more details.&n;**&n;*/
DECL|struct|MsgPort
r_struct
id|MsgPort
(brace
DECL|member|fill1
id|u_char
id|fill1
(braket
l_int|15
)braket
suffix:semicolon
DECL|member|mp_SigBit
id|u_char
id|mp_SigBit
suffix:semicolon
DECL|member|fill2
id|u_char
id|fill2
(braket
l_int|18
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|IOStdReq
r_struct
id|IOStdReq
(brace
DECL|member|fill1
id|u_char
id|fill1
(braket
l_int|20
)braket
suffix:semicolon
DECL|member|io_Device
r_struct
id|Device
op_star
id|io_Device
suffix:semicolon
DECL|member|fill2
id|u_char
id|fill2
(braket
l_int|4
)braket
suffix:semicolon
DECL|member|io_Command
id|u_short
id|io_Command
suffix:semicolon
DECL|member|io_Flags
id|u_char
id|io_Flags
suffix:semicolon
DECL|member|io_Error
r_char
id|io_Error
suffix:semicolon
DECL|member|io_Actual
id|u_long
id|io_Actual
suffix:semicolon
DECL|member|io_Length
id|u_long
id|io_Length
suffix:semicolon
DECL|member|io_Data
r_void
op_star
id|io_Data
suffix:semicolon
DECL|member|fill4
id|u_char
id|fill4
(braket
l_int|4
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|IOF_QUICK
mdefine_line|#define IOF_QUICK&t;(1&lt;&lt;0)
DECL|struct|timerequest
r_struct
id|timerequest
(brace
DECL|member|fill1
id|u_char
id|fill1
(braket
l_int|28
)braket
suffix:semicolon
DECL|member|io_Command
id|u_short
id|io_Command
suffix:semicolon
DECL|member|io_Flags
id|u_char
id|io_Flags
suffix:semicolon
DECL|member|fill2
id|u_char
id|fill2
(braket
l_int|1
)braket
suffix:semicolon
DECL|member|tv_secs
id|u_long
id|tv_secs
suffix:semicolon
DECL|member|tv_micro
id|u_long
id|tv_micro
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|UNIT_VBLANK
mdefine_line|#define UNIT_VBLANK&t;1
DECL|macro|TR_ADDREQUEST
mdefine_line|#define TR_ADDREQUEST&t;9
r_struct
id|Library
suffix:semicolon
r_struct
id|IORequest
suffix:semicolon
DECL|function|OpenDevice
r_static
id|__inline
r_char
id|OpenDevice
c_func
(paren
id|u_char
op_star
id|devName
comma
id|u_long
id|unit
comma
r_struct
id|IORequest
op_star
id|ioRequest
comma
id|u_long
id|flags
)paren
(brace
r_register
r_char
id|_res
id|__asm
c_func
(paren
l_string|&quot;d0&quot;
)paren
suffix:semicolon
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
r_register
id|u_char
op_star
id|a0
id|__asm
c_func
(paren
l_string|&quot;a0&quot;
)paren
op_assign
id|devName
suffix:semicolon
r_register
id|u_long
id|d0
id|__asm
c_func
(paren
l_string|&quot;d0&quot;
)paren
op_assign
id|unit
suffix:semicolon
r_register
r_struct
id|IORequest
op_star
id|a1
id|__asm
c_func
(paren
l_string|&quot;a1&quot;
)paren
op_assign
id|ioRequest
suffix:semicolon
r_register
id|u_long
id|d1
id|__asm
c_func
(paren
l_string|&quot;d1&quot;
)paren
op_assign
id|flags
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x1bc)&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|_res
)paren
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
comma
l_string|&quot;r&quot;
(paren
id|a0
)paren
comma
l_string|&quot;r&quot;
(paren
id|a1
)paren
comma
l_string|&quot;r&quot;
(paren
id|d0
)paren
comma
l_string|&quot;r&quot;
(paren
id|d1
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
r_return
id|_res
suffix:semicolon
)brace
DECL|function|CloseDevice
r_static
id|__inline
r_void
id|CloseDevice
c_func
(paren
r_struct
id|IORequest
op_star
id|ioRequest
)paren
(brace
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
r_register
r_struct
id|IORequest
op_star
id|a1
id|__asm
c_func
(paren
l_string|&quot;a1&quot;
)paren
op_assign
id|ioRequest
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x1c2)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
comma
l_string|&quot;r&quot;
(paren
id|a1
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
)brace
DECL|function|DoIO
r_static
id|__inline
r_char
id|DoIO
c_func
(paren
r_struct
id|IORequest
op_star
id|ioRequest
)paren
(brace
r_register
r_char
id|_res
id|__asm
c_func
(paren
l_string|&quot;d0&quot;
)paren
suffix:semicolon
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
r_register
r_struct
id|IORequest
op_star
id|a1
id|__asm
c_func
(paren
l_string|&quot;a1&quot;
)paren
op_assign
id|ioRequest
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x1c8)&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|_res
)paren
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
comma
l_string|&quot;r&quot;
(paren
id|a1
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
r_return
id|_res
suffix:semicolon
)brace
DECL|function|CreateIORequest
r_static
id|__inline
r_void
op_star
id|CreateIORequest
c_func
(paren
r_struct
id|MsgPort
op_star
id|port
comma
id|u_long
id|size
)paren
(brace
r_register
r_struct
id|Library
op_star
id|_res
id|__asm
c_func
(paren
l_string|&quot;d0&quot;
)paren
suffix:semicolon
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
r_register
r_struct
id|MsgPort
op_star
id|a0
id|__asm
c_func
(paren
l_string|&quot;a0&quot;
)paren
op_assign
id|port
suffix:semicolon
r_register
id|u_long
id|d0
id|__asm
c_func
(paren
l_string|&quot;d0&quot;
)paren
op_assign
id|size
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x28e)&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|_res
)paren
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
comma
l_string|&quot;r&quot;
(paren
id|a0
)paren
comma
l_string|&quot;r&quot;
(paren
id|d0
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
r_return
id|_res
suffix:semicolon
)brace
DECL|function|DeleteIORequest
r_static
id|__inline
r_void
id|DeleteIORequest
c_func
(paren
r_void
op_star
id|ioRequest
)paren
(brace
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
r_register
r_void
op_star
id|a0
id|__asm
c_func
(paren
l_string|&quot;a0&quot;
)paren
op_assign
id|ioRequest
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x294)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
comma
l_string|&quot;r&quot;
(paren
id|a0
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
)brace
DECL|function|CreateMsgPort
r_static
id|__inline
r_struct
id|MsgPort
op_star
id|CreateMsgPort
c_func
(paren
r_void
)paren
(brace
r_register
r_struct
id|MsgPort
op_star
id|_res
id|__asm
c_func
(paren
l_string|&quot;d0&quot;
)paren
suffix:semicolon
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x29a)&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|_res
)paren
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
r_return
id|_res
suffix:semicolon
)brace
DECL|function|DeleteMsgPort
r_static
id|__inline
r_void
id|DeleteMsgPort
c_func
(paren
r_struct
id|MsgPort
op_star
id|port
)paren
(brace
r_register
r_const
r_struct
id|ExecBase
op_star
id|a6
id|__asm
c_func
(paren
l_string|&quot;a6&quot;
)paren
op_assign
id|SysBase
suffix:semicolon
r_register
r_struct
id|MsgPort
op_star
id|a0
id|__asm
c_func
(paren
l_string|&quot;a0&quot;
)paren
op_assign
id|port
suffix:semicolon
id|__asm
id|__volatile
(paren
l_string|&quot;jsr a6@(-0x2a0)&quot;
suffix:colon
multiline_comment|/* no output */
suffix:colon
l_string|&quot;r&quot;
(paren
id|a6
)paren
comma
l_string|&quot;r&quot;
(paren
id|a0
)paren
suffix:colon
l_string|&quot;a0&quot;
comma
l_string|&quot;a1&quot;
comma
l_string|&quot;d0&quot;
comma
l_string|&quot;d1&quot;
comma
l_string|&quot;memory&quot;
)paren
suffix:semicolon
)brace
eof
