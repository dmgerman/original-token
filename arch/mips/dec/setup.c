multiline_comment|/*&n; * Setup the interrupt stuff.&n; *&n; * This file is subject to the terms and conditions of the GNU General Public&n; * License.  See the file &quot;COPYING&quot; in the main directory of this archive&n; * for more details.&n; *&n; * Copyright (C) 1998 Harald Koerfgen&n; */
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/interrupt.h&gt;
macro_line|#include &lt;linux/mc146818rtc.h&gt;
macro_line|#include &lt;linux/param.h&gt;
macro_line|#include &lt;asm/mipsregs.h&gt;
macro_line|#include &lt;asm/bootinfo.h&gt;
macro_line|#include &lt;linux/init.h&gt;
macro_line|#include &lt;asm/irq.h&gt;
macro_line|#include &lt;asm/reboot.h&gt;
macro_line|#include &lt;asm/dec/interrupts.h&gt;
macro_line|#include &lt;asm/dec/kn01.h&gt;
macro_line|#include &lt;asm/dec/kn02.h&gt;
macro_line|#include &lt;asm/dec/kn02xa.h&gt;
macro_line|#include &lt;asm/dec/kn03.h&gt;
macro_line|#include &lt;asm/dec/ioasic_ints.h&gt;
r_extern
id|asmlinkage
r_void
id|decstation_handle_int
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|dec_init_kn01
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|dec_init_kn230
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|dec_init_kn02
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|dec_init_kn02ba
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|dec_init_kn02ca
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|dec_init_kn03
c_func
(paren
r_void
)paren
suffix:semicolon
DECL|variable|dec_rtc_base
r_char
op_star
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN01_RTC_BASE
suffix:semicolon
multiline_comment|/* Assume DS2100/3100 initially */
DECL|variable|dec_interrupt
id|decint_t
id|dec_interrupt
(braket
id|NR_INTS
)braket
suffix:semicolon
multiline_comment|/* &n; * Information regarding the IRQ Controller&n; *&n; * isr and imr are also hardcoded for different machines in int_handler.S&n; */
DECL|variable|isr
r_volatile
r_int
r_int
op_star
id|isr
op_assign
l_int|0L
suffix:semicolon
multiline_comment|/* address of the interrupt status register     */
DECL|variable|imr
r_volatile
r_int
r_int
op_star
id|imr
op_assign
l_int|0L
suffix:semicolon
multiline_comment|/* address of the interrupt mask register       */
r_extern
r_void
id|dec_machine_restart
c_func
(paren
r_char
op_star
id|command
)paren
suffix:semicolon
r_extern
r_void
id|dec_machine_halt
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|dec_machine_power_off
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_void
id|wbflush_setup
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_struct
id|rtc_ops
id|dec_rtc_ops
suffix:semicolon
r_extern
r_void
id|intr_halt
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|setup_dec_irq
c_func
(paren
r_int
comma
r_struct
id|irqaction
op_star
)paren
suffix:semicolon
DECL|variable|board_time_init
r_void
(paren
op_star
id|board_time_init
)paren
(paren
r_struct
id|irqaction
op_star
id|irq
)paren
suffix:semicolon
DECL|function|dec_irq_setup
r_static
r_void
id|__init
id|dec_irq_setup
c_func
(paren
r_void
)paren
(brace
r_switch
c_cond
(paren
id|mips_machtype
)paren
(brace
r_case
id|MACH_DS23100
suffix:colon
id|dec_init_kn01
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5100
suffix:colon
multiline_comment|/*  DS5100 MIPSMATE */
id|dec_init_kn230
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5000_200
suffix:colon
multiline_comment|/* DS5000 3max */
id|dec_init_kn02
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5000_1XX
suffix:colon
multiline_comment|/* DS5000/100 3min */
id|dec_init_kn02ba
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5000_2X0
suffix:colon
multiline_comment|/* DS5000/240 3max+ */
id|dec_init_kn03
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5000_XX
suffix:colon
multiline_comment|/* Personal DS5000/2x */
id|dec_init_kn02ca
c_func
(paren
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5800
suffix:colon
multiline_comment|/* DS5800 Isis */
id|panic
c_func
(paren
l_string|&quot;Don&squot;t know how to set this up!&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5400
suffix:colon
multiline_comment|/* DS5400 MIPSfair */
id|panic
c_func
(paren
l_string|&quot;Don&squot;t know how to set this up!&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_DS5500
suffix:colon
multiline_comment|/* DS5500 MIPSfair-2 */
id|panic
c_func
(paren
l_string|&quot;Don&squot;t know how to set this up!&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
id|set_except_vector
c_func
(paren
l_int|0
comma
id|decstation_handle_int
)paren
suffix:semicolon
)brace
multiline_comment|/*&n; * enable the periodic interrupts&n; */
DECL|function|dec_time_init
r_static
r_void
id|__init
id|dec_time_init
c_func
(paren
r_struct
id|irqaction
op_star
id|irq
)paren
(brace
multiline_comment|/*&n;     * Here we go, enable periodic rtc interrupts.&n;     */
macro_line|#ifndef LOG_2_HZ
DECL|macro|LOG_2_HZ
macro_line|#  define LOG_2_HZ 7
macro_line|#endif
id|CMOS_WRITE
c_func
(paren
id|RTC_REF_CLCK_32KHZ
op_or
(paren
l_int|16
op_minus
id|LOG_2_HZ
)paren
comma
id|RTC_REG_A
)paren
suffix:semicolon
id|CMOS_WRITE
c_func
(paren
id|CMOS_READ
c_func
(paren
id|RTC_REG_B
)paren
op_or
id|RTC_PIE
comma
id|RTC_REG_B
)paren
suffix:semicolon
id|setup_dec_irq
c_func
(paren
id|CLOCK
comma
id|irq
)paren
suffix:semicolon
)brace
DECL|function|decstation_setup
r_void
id|__init
id|decstation_setup
c_func
(paren
r_void
)paren
(brace
id|irq_setup
op_assign
id|dec_irq_setup
suffix:semicolon
id|board_time_init
op_assign
id|dec_time_init
suffix:semicolon
id|wbflush_setup
c_func
(paren
)paren
suffix:semicolon
id|_machine_restart
op_assign
id|dec_machine_restart
suffix:semicolon
id|_machine_halt
op_assign
id|dec_machine_halt
suffix:semicolon
id|_machine_power_off
op_assign
id|dec_machine_power_off
suffix:semicolon
id|rtc_ops
op_assign
op_amp
id|dec_rtc_ops
suffix:semicolon
)brace
multiline_comment|/*&n; * Machine-specific initialisation for kn01, aka Pmax, aka DS2100, DS3100,&n; * and possibly also the DS5100.&n; */
DECL|function|dec_init_kn01
r_void
id|__init
id|dec_init_kn01
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;     * Setup some memory addresses.&n;     */
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN01_RTC_BASE
suffix:semicolon
multiline_comment|/*&n;     * Setup interrupt structure&n;     */
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|0
)braket
op_assign
id|IE_IRQ3
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|0
)braket
op_assign
id|CLOCK
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|1
)braket
op_assign
id|IE_IRQ0
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|1
)braket
op_assign
id|SCSI_INT
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ1
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|2
)braket
op_assign
id|IE_IRQ1
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|2
)braket
op_assign
id|ETHER
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ2
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|3
)braket
op_assign
id|IE_IRQ2
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|3
)braket
op_assign
id|SERIAL
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ4
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|4
)braket
op_assign
id|IE_IRQ4
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|4
)braket
op_assign
id|MEMORY
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ5
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|5
)braket
op_assign
id|IE_IRQ5
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|5
)braket
op_assign
id|FPU
suffix:semicolon
)brace
multiline_comment|/* dec_init_kn01 */
multiline_comment|/*&n; * Machine-specific initialisation for kn230, aka MIPSmate, aka DS5100&n; *&n; * There are a lot of experiments to do, this is definitely incomplete.&n; */
DECL|function|dec_init_kn230
r_void
id|__init
id|dec_init_kn230
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;     * Setup some memory addresses.&n;     */
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN01_RTC_BASE
suffix:semicolon
multiline_comment|/*&n;     * Setup interrupt structure&n;     */
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ2
suffix:semicolon
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|0
)braket
op_assign
id|IE_IRQ2
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|0
)braket
op_assign
id|CLOCK
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ5
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|5
)braket
op_assign
id|IE_IRQ5
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|5
)braket
op_assign
id|FPU
suffix:semicolon
)brace
multiline_comment|/* dec_init_kn230 */
multiline_comment|/*&n; * Machine-specific initialisation for kn02, aka 3max, aka DS5000/2xx.&n; */
DECL|function|dec_init_kn02
r_void
id|__init
id|dec_init_kn02
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;     * Setup some memory addresses. FIXME: probably incomplete!&n;     */
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN02_RTC_BASE
suffix:semicolon
id|isr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN02_CSR_ADDR
suffix:semicolon
id|imr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN02_CSR_ADDR
suffix:semicolon
multiline_comment|/*&n;     * Setup IOASIC interrupt&n;     */
id|cpu_ivec_tbl
(braket
l_int|1
)braket
op_assign
id|kn02_io_int
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|1
)braket
op_assign
id|IE_IRQ0
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|1
)braket
op_assign
op_minus
l_int|1
suffix:semicolon
op_star
id|imr
op_assign
op_star
id|imr
op_amp
l_int|0xff00ff00
suffix:semicolon
multiline_comment|/*&n;     * Setup interrupt structure&n;     */
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ1
suffix:semicolon
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|0
)braket
op_assign
id|IE_IRQ1
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|0
)braket
op_assign
id|CLOCK
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|iemask
op_assign
id|KN02_SLOT5
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|0
)braket
op_assign
id|KN02_SLOT5
suffix:semicolon
id|asic_irq_nr
(braket
l_int|0
)braket
op_assign
id|SCSI_INT
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|iemask
op_assign
id|KN02_SLOT6
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|1
)braket
op_assign
id|KN02_SLOT6
suffix:semicolon
id|asic_irq_nr
(braket
l_int|1
)braket
op_assign
id|ETHER
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|iemask
op_assign
id|KN02_SLOT7
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|2
)braket
op_assign
id|KN02_SLOT7
suffix:semicolon
id|asic_irq_nr
(braket
l_int|2
)braket
op_assign
id|SERIAL
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|iemask
op_assign
id|KN02_SLOT0
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|3
)braket
op_assign
id|KN02_SLOT0
suffix:semicolon
id|asic_irq_nr
(braket
l_int|3
)braket
op_assign
id|TC0
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|iemask
op_assign
id|KN02_SLOT1
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|4
)braket
op_assign
id|KN02_SLOT1
suffix:semicolon
id|asic_irq_nr
(braket
l_int|4
)braket
op_assign
id|TC1
suffix:semicolon
id|dec_interrupt
(braket
id|TC2
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC2
)braket
dot
id|iemask
op_assign
id|KN02_SLOT2
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|5
)braket
op_assign
id|KN02_SLOT2
suffix:semicolon
id|asic_irq_nr
(braket
l_int|5
)braket
op_assign
id|TC2
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|2
)braket
op_assign
id|IE_IRQ3
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|2
)braket
op_assign
id|MEMORY
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ5
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|3
)braket
op_assign
id|IE_IRQ5
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|3
)braket
op_assign
id|FPU
suffix:semicolon
)brace
multiline_comment|/* dec_init_kn02 */
multiline_comment|/*&n; * Machine-specific initialisation for kn02ba, aka 3min, aka DS5000/1xx.&n; */
DECL|function|dec_init_kn02ba
r_void
id|__init
id|dec_init_kn02ba
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;     * Setup some memory addresses.&n;     */
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN02XA_RTC_BASE
suffix:semicolon
id|isr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN02XA_SIR_ADDR
suffix:semicolon
id|imr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN02XA_SIRM_ADDR
suffix:semicolon
multiline_comment|/*&n;     * Setup IOASIC interrupt&n;     */
id|cpu_mask_tbl
(braket
l_int|0
)braket
op_assign
id|IE_IRQ3
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|0
)braket
op_assign
op_minus
l_int|1
suffix:semicolon
id|cpu_ivec_tbl
(braket
l_int|0
)braket
op_assign
id|kn02ba_io_int
suffix:semicolon
op_star
id|imr
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;     * Setup interrupt structure&n;     */
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|iemask
op_assign
id|KMIN_CLOCK
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|0
)braket
op_assign
id|KMIN_CLOCK
suffix:semicolon
id|asic_irq_nr
(braket
l_int|0
)braket
op_assign
id|CLOCK
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_DMA_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_DMA_INT
)braket
dot
id|iemask
op_assign
id|SCSI_DMA_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|1
)braket
op_assign
id|SCSI_DMA_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|1
)braket
op_assign
id|SCSI_DMA_INT
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|iemask
op_assign
id|SCSI_CHIP
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|2
)braket
op_assign
id|SCSI_CHIP
suffix:semicolon
id|asic_irq_nr
(braket
l_int|2
)braket
op_assign
id|SCSI_INT
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|iemask
op_assign
id|LANCE_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|3
)braket
op_assign
id|LANCE_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|3
)braket
op_assign
id|ETHER
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|iemask
op_assign
id|SERIAL_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|4
)braket
op_assign
id|SERIAL_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|4
)braket
op_assign
id|SERIAL
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|iemask
op_assign
id|KMIN_TIMEOUT
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|5
)braket
op_assign
id|KMIN_TIMEOUT
suffix:semicolon
id|asic_irq_nr
(braket
l_int|5
)braket
op_assign
id|MEMORY
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|1
)braket
op_assign
id|IE_IRQ0
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|1
)braket
op_assign
id|TC0
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ1
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|2
)braket
op_assign
id|IE_IRQ1
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|2
)braket
op_assign
id|TC1
suffix:semicolon
id|dec_interrupt
(braket
id|TC2
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ2
suffix:semicolon
id|dec_interrupt
(braket
id|TC2
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|3
)braket
op_assign
id|IE_IRQ2
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|3
)braket
op_assign
id|TC2
suffix:semicolon
id|dec_interrupt
(braket
id|HALT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ4
suffix:semicolon
id|dec_interrupt
(braket
id|HALT
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|4
)braket
op_assign
id|IE_IRQ4
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|4
)braket
op_assign
id|HALT
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ5
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|5
)braket
op_assign
id|IE_IRQ5
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|5
)braket
op_assign
id|FPU
suffix:semicolon
)brace
multiline_comment|/* dec_init_kn02ba */
multiline_comment|/*&n; * Machine-specific initialisation for kn02ca, aka maxine, aka DS5000/2x.&n; */
DECL|function|dec_init_kn02ca
r_void
id|__init
id|dec_init_kn02ca
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;     * Setup some memory addresses. FIXME: probably incomplete!&n;     */
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN02XA_RTC_BASE
suffix:semicolon
id|isr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN02XA_SIR_ADDR
suffix:semicolon
id|imr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN02XA_SIRM_ADDR
suffix:semicolon
multiline_comment|/*&n;     * Setup IOASIC interrupt&n;     */
id|cpu_ivec_tbl
(braket
l_int|1
)braket
op_assign
id|kn02ba_io_int
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|1
)braket
op_assign
op_minus
l_int|1
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|1
)braket
op_assign
id|IE_IRQ3
suffix:semicolon
op_star
id|imr
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;     * Setup interrupt structure&n;     */
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ1
suffix:semicolon
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|0
)braket
op_assign
id|IE_IRQ1
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|0
)braket
op_assign
id|CLOCK
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_DMA_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_DMA_INT
)braket
dot
id|iemask
op_assign
id|SCSI_DMA_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|0
)braket
op_assign
id|SCSI_DMA_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|0
)braket
op_assign
id|SCSI_DMA_INT
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|iemask
op_assign
id|SCSI_CHIP
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|1
)braket
op_assign
id|SCSI_CHIP
suffix:semicolon
id|asic_irq_nr
(braket
l_int|1
)braket
op_assign
id|SCSI_INT
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|iemask
op_assign
id|LANCE_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|2
)braket
op_assign
id|LANCE_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|2
)braket
op_assign
id|ETHER
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|iemask
op_assign
id|XINE_SERIAL_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|3
)braket
op_assign
id|XINE_SERIAL_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|3
)braket
op_assign
id|SERIAL
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|iemask
op_assign
id|MAXINE_TC0
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|4
)braket
op_assign
id|MAXINE_TC0
suffix:semicolon
id|asic_irq_nr
(braket
l_int|4
)braket
op_assign
id|TC0
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|iemask
op_assign
id|MAXINE_TC1
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|5
)braket
op_assign
id|MAXINE_TC1
suffix:semicolon
id|asic_irq_nr
(braket
l_int|5
)braket
op_assign
id|TC1
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ2
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|2
)braket
op_assign
id|IE_IRQ2
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|2
)braket
op_assign
id|MEMORY
suffix:semicolon
id|dec_interrupt
(braket
id|HALT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ4
suffix:semicolon
id|dec_interrupt
(braket
id|HALT
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|3
)braket
op_assign
id|IE_IRQ4
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|3
)braket
op_assign
id|HALT
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ5
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|4
)braket
op_assign
id|IE_IRQ5
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|4
)braket
op_assign
id|FPU
suffix:semicolon
)brace
multiline_comment|/* dec_init_kn02ca */
multiline_comment|/*&n; * Machine-specific initialisation for kn03, aka 3max+, aka DS5000/240.&n; */
DECL|function|dec_init_kn03
r_void
id|__init
id|dec_init_kn03
c_func
(paren
r_void
)paren
(brace
multiline_comment|/*&n;     * Setup some memory addresses. FIXME: probably incomplete!&n;     */
id|dec_rtc_base
op_assign
(paren
r_char
op_star
)paren
id|KN03_RTC_BASE
suffix:semicolon
id|isr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN03_SIR_ADDR
suffix:semicolon
id|imr
op_assign
(paren
r_volatile
r_int
r_int
op_star
)paren
id|KN03_SIRM_ADDR
suffix:semicolon
multiline_comment|/*&n;     * Setup IOASIC interrupt&n;     */
id|cpu_ivec_tbl
(braket
l_int|1
)braket
op_assign
id|kn03_io_int
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|1
)braket
op_assign
id|IE_IRQ0
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|1
)braket
op_assign
op_minus
l_int|1
suffix:semicolon
op_star
id|imr
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;     * Setup interrupt structure&n;     */
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ1
suffix:semicolon
id|dec_interrupt
(braket
id|CLOCK
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|0
)braket
op_assign
id|IE_IRQ1
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|0
)braket
op_assign
id|CLOCK
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_DMA_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_DMA_INT
)braket
dot
id|iemask
op_assign
id|SCSI_DMA_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|0
)braket
op_assign
id|SCSI_DMA_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|0
)braket
op_assign
id|SCSI_DMA_INT
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|SCSI_INT
)braket
dot
id|iemask
op_assign
id|SCSI_CHIP
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|1
)braket
op_assign
id|SCSI_CHIP
suffix:semicolon
id|asic_irq_nr
(braket
l_int|1
)braket
op_assign
id|SCSI_INT
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|ETHER
)braket
dot
id|iemask
op_assign
id|LANCE_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|2
)braket
op_assign
id|LANCE_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|2
)braket
op_assign
id|ETHER
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|SERIAL
)braket
dot
id|iemask
op_assign
id|SERIAL_INTS
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|3
)braket
op_assign
id|SERIAL_INTS
suffix:semicolon
id|asic_irq_nr
(braket
l_int|3
)braket
op_assign
id|SERIAL
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC0
)braket
dot
id|iemask
op_assign
id|KN03_TC0
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|4
)braket
op_assign
id|KN03_TC0
suffix:semicolon
id|asic_irq_nr
(braket
l_int|4
)braket
op_assign
id|TC0
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC1
)braket
dot
id|iemask
op_assign
id|KN03_TC1
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|5
)braket
op_assign
id|KN03_TC1
suffix:semicolon
id|asic_irq_nr
(braket
l_int|5
)braket
op_assign
id|TC1
suffix:semicolon
id|dec_interrupt
(braket
id|TC2
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ0
suffix:semicolon
id|dec_interrupt
(braket
id|TC2
)braket
dot
id|iemask
op_assign
id|KN03_TC2
suffix:semicolon
id|asic_mask_tbl
(braket
l_int|6
)braket
op_assign
id|KN03_TC2
suffix:semicolon
id|asic_irq_nr
(braket
l_int|6
)braket
op_assign
id|TC2
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ3
suffix:semicolon
id|dec_interrupt
(braket
id|MEMORY
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|2
)braket
op_assign
id|IE_IRQ3
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|2
)braket
op_assign
id|MEMORY
suffix:semicolon
id|dec_interrupt
(braket
id|HALT
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ4
suffix:semicolon
id|dec_interrupt
(braket
id|HALT
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|3
)braket
op_assign
id|IE_IRQ4
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|3
)braket
op_assign
id|HALT
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|cpu_mask
op_assign
id|IE_IRQ5
suffix:semicolon
id|dec_interrupt
(braket
id|FPU
)braket
dot
id|iemask
op_assign
l_int|0
suffix:semicolon
id|cpu_mask_tbl
(braket
l_int|4
)braket
op_assign
id|IE_IRQ5
suffix:semicolon
id|cpu_irq_nr
(braket
l_int|4
)braket
op_assign
id|FPU
suffix:semicolon
)brace
multiline_comment|/* dec_init_kn03 */
eof
