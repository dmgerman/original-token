multiline_comment|/* $Id: offset.c,v 1.11 1999/09/28 22:25:50 ralf Exp $&n; *&n; * offset.c: Calculate pt_regs and task_struct offsets.&n; *&n; * Copyright (C) 1996 David S. Miller&n; * Copyright (C) 1997, 1998, 1999 Ralf Baechle&n; * Copyright (C) 1999 Silicon Graphics, Inc.&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;asm/ptrace.h&gt;
macro_line|#include &lt;asm/processor.h&gt;
DECL|macro|text
mdefine_line|#define text(t) __asm__(&quot;&bslash;n@@@&quot; t)
DECL|macro|_offset
mdefine_line|#define _offset(type, member) (&amp;(((type *)NULL)-&gt;member))
DECL|macro|offset
mdefine_line|#define offset(string, ptr, member) &bslash;&n;&t;__asm__(&quot;&bslash;n@@@&quot; string &quot;%0&quot; : : &quot;i&quot; (_offset(ptr, member)))
DECL|macro|size
mdefine_line|#define size(string, size) &bslash;&n;&t;__asm__(&quot;&bslash;n@@@&quot; string &quot;%0&quot; : : &quot;i&quot; (sizeof(size)))
DECL|macro|linefeed
mdefine_line|#define linefeed text(&quot;&quot;)
id|text
c_func
(paren
l_string|&quot;/* DO NOT TOUCH, AUTOGENERATED BY OFFSET.C */&quot;
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
id|text
c_func
(paren
l_string|&quot;#ifndef _MIPS_OFFSET_H&quot;
)paren
suffix:semicolon
id|text
c_func
(paren
l_string|&quot;#define _MIPS_OFFSET_H&quot;
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
DECL|function|output_ptreg_defines
r_void
id|output_ptreg_defines
c_func
(paren
r_void
)paren
(brace
id|text
c_func
(paren
l_string|&quot;/* MIPS pt_regs offsets. */&quot;
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R0     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R1     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R2     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R3     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|3
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R4     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|4
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R5     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|5
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R6     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|6
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R7     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|7
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R8     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|8
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R9     &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|9
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R10    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|10
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R11    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|11
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R12    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|12
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R13    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|13
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R14    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|14
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R15    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|15
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R16    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|16
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R17    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|17
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R18    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|18
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R19    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|19
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R20    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|20
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R21    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|21
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R22    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|22
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R23    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|23
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R24    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|24
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R25    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|25
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R26    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|26
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R27    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|27
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R28    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|28
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R29    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|29
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R30    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|30
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_R31    &quot;
comma
r_struct
id|pt_regs
comma
id|regs
(braket
l_int|31
)braket
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_LO     &quot;
comma
r_struct
id|pt_regs
comma
id|lo
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_HI     &quot;
comma
r_struct
id|pt_regs
comma
id|hi
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_EPC    &quot;
comma
r_struct
id|pt_regs
comma
id|cp0_epc
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_BVADDR &quot;
comma
r_struct
id|pt_regs
comma
id|cp0_badvaddr
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_STATUS &quot;
comma
r_struct
id|pt_regs
comma
id|cp0_status
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define PT_CAUSE  &quot;
comma
r_struct
id|pt_regs
comma
id|cp0_cause
)paren
suffix:semicolon
id|size
c_func
(paren
l_string|&quot;#define PT_SIZE   &quot;
comma
r_struct
id|pt_regs
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
)brace
DECL|function|output_task_defines
r_void
id|output_task_defines
c_func
(paren
r_void
)paren
(brace
id|text
c_func
(paren
l_string|&quot;/* MIPS task_struct offsets. */&quot;
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_STATE         &quot;
comma
r_struct
id|task_struct
comma
id|state
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_FLAGS         &quot;
comma
r_struct
id|task_struct
comma
id|flags
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_SIGPENDING    &quot;
comma
r_struct
id|task_struct
comma
id|sigpending
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_NEED_RESCHED  &quot;
comma
r_struct
id|task_struct
comma
id|need_resched
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_PTRACE        &quot;
comma
r_struct
id|task_struct
comma
id|ptrace
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_COUNTER       &quot;
comma
r_struct
id|task_struct
comma
id|counter
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_NICE          &quot;
comma
r_struct
id|task_struct
comma
id|nice
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define TASK_MM            &quot;
comma
r_struct
id|task_struct
comma
id|mm
)paren
suffix:semicolon
id|size
c_func
(paren
l_string|&quot;#define TASK_STRUCT_SIZE   &quot;
comma
r_struct
id|task_struct
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
)brace
DECL|function|output_thread_defines
r_void
id|output_thread_defines
c_func
(paren
r_void
)paren
(brace
id|text
c_func
(paren
l_string|&quot;/* MIPS specific thread_struct offsets. */&quot;
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG16   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg16
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG17   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg17
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG18   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg18
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG19   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg19
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG20   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg20
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG21   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg21
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG22   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg22
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG23   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg23
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG29   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg29
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG30   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg30
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_REG31   &quot;
comma
r_struct
id|task_struct
comma
id|thread.reg31
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_STATUS  &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.cp0_status
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_FPU     &quot;
comma
r_struct
id|task_struct
comma
id|thread.fpu
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_BVADDR  &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.cp0_badvaddr
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_BUADDR  &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.cp0_baduaddr
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_ECODE   &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.error_code
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_TRAPNO  &quot;
comma
r_struct
id|task_struct
comma
id|thread.trap_no
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_MFLAGS  &quot;
comma
r_struct
id|task_struct
comma
id|thread.mflags
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_CURDS   &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.current_ds
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_TRAMP   &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.irix_trampoline
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define THREAD_OLDCTX  &quot;
comma
r_struct
id|task_struct
comma
"&bslash;"
id|thread.irix_oldctx
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
)brace
DECL|function|output_mm_defines
r_void
id|output_mm_defines
c_func
(paren
r_void
)paren
(brace
id|text
c_func
(paren
l_string|&quot;/* Linux mm_struct offsets. */&quot;
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define MM_USERS      &quot;
comma
r_struct
id|mm_struct
comma
id|mm_users
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define MM_PGD        &quot;
comma
r_struct
id|mm_struct
comma
id|pgd
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define MM_CONTEXT    &quot;
comma
r_struct
id|mm_struct
comma
id|context
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
)brace
DECL|function|output_sc_defines
r_void
id|output_sc_defines
c_func
(paren
r_void
)paren
(brace
id|text
c_func
(paren
l_string|&quot;/* Linux sigcontext offsets. */&quot;
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_REGS       &quot;
comma
r_struct
id|sigcontext
comma
id|sc_regs
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_FPREGS     &quot;
comma
r_struct
id|sigcontext
comma
id|sc_fpregs
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_MDHI       &quot;
comma
r_struct
id|sigcontext
comma
id|sc_mdhi
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_MDLO       &quot;
comma
r_struct
id|sigcontext
comma
id|sc_mdlo
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_PC         &quot;
comma
r_struct
id|sigcontext
comma
id|sc_pc
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_STATUS     &quot;
comma
r_struct
id|sigcontext
comma
id|sc_status
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_OWNEDFP    &quot;
comma
r_struct
id|sigcontext
comma
id|sc_ownedfp
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_FPC_CSR    &quot;
comma
r_struct
id|sigcontext
comma
id|sc_fpc_csr
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_FPC_EIR    &quot;
comma
r_struct
id|sigcontext
comma
id|sc_fpc_eir
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_CAUSE      &quot;
comma
r_struct
id|sigcontext
comma
id|sc_cause
)paren
suffix:semicolon
id|offset
c_func
(paren
l_string|&quot;#define SC_BADVADDR   &quot;
comma
r_struct
id|sigcontext
comma
id|sc_badvaddr
)paren
suffix:semicolon
id|linefeed
suffix:semicolon
)brace
id|text
c_func
(paren
l_string|&quot;#endif /* !(_MIPS_OFFSET_H) */&quot;
)paren
suffix:semicolon
eof
