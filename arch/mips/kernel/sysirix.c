multiline_comment|/*&n; * sysirix.c: IRIX system call emulation.&n; *&n; * Copyright (C) 1996 David S. Miller&n; * Copyright (C) 1997 Miguel de Icaza&n; * Copyright (C) 1997, 1998 Ralf Baechle&n; */
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/pagemap.h&gt;
macro_line|#include &lt;linux/mm.h&gt;
macro_line|#include &lt;linux/mman.h&gt;
macro_line|#include &lt;linux/malloc.h&gt;
macro_line|#include &lt;linux/swap.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/timex.h&gt;
macro_line|#include &lt;linux/times.h&gt;
macro_line|#include &lt;linux/elf.h&gt;
macro_line|#include &lt;linux/msg.h&gt;
macro_line|#include &lt;linux/shm.h&gt;
macro_line|#include &lt;linux/smp.h&gt;
macro_line|#include &lt;linux/smp_lock.h&gt;
macro_line|#include &lt;linux/utsname.h&gt;
macro_line|#include &lt;linux/file.h&gt;
macro_line|#include &lt;asm/ptrace.h&gt;
macro_line|#include &lt;asm/page.h&gt;
macro_line|#include &lt;asm/pgalloc.h&gt;
macro_line|#include &lt;asm/uaccess.h&gt;
macro_line|#include &lt;asm/sgialib.h&gt;
macro_line|#include &lt;asm/inventory.h&gt;
multiline_comment|/* 2,191 lines of complete and utter shit coming up... */
r_extern
r_int
id|max_threads
suffix:semicolon
multiline_comment|/* The sysmp commands supported thus far. */
DECL|macro|MP_NPROCS
mdefine_line|#define MP_NPROCS       &t;1 /* # processor in complex */
DECL|macro|MP_NAPROCS
mdefine_line|#define MP_NAPROCS      &t;2 /* # active processors in complex */
DECL|macro|MP_PGSIZE
mdefine_line|#define MP_PGSIZE           &t;14 /* Return system page size in v1. */
DECL|function|irix_sysmp
id|asmlinkage
r_int
id|irix_sysmp
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|cmd
suffix:semicolon
r_int
id|base
op_assign
l_int|0
suffix:semicolon
r_int
id|error
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;regs
(braket
l_int|2
)braket
op_eq
l_int|1000
)paren
(brace
id|base
op_assign
l_int|1
suffix:semicolon
)brace
id|cmd
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|4
)braket
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|MP_PGSIZE
suffix:colon
id|error
op_assign
id|PAGE_SIZE
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MP_NPROCS
suffix:colon
r_case
id|MP_NAPROCS
suffix:colon
id|error
op_assign
id|smp_num_cpus
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;SYSMP[%s:%d]: Unsupported opcode %d&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|cmd
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|error
suffix:semicolon
)brace
multiline_comment|/* The prctl commands. */
DECL|macro|PR_MAXPROCS
mdefine_line|#define PR_MAXPROCS          1 /* Tasks/user. */
DECL|macro|PR_ISBLOCKED
mdefine_line|#define PR_ISBLOCKED         2 /* If blocked, return 1. */
DECL|macro|PR_SETSTACKSIZE
mdefine_line|#define PR_SETSTACKSIZE      3 /* Set largest task stack size. */
DECL|macro|PR_GETSTACKSIZE
mdefine_line|#define PR_GETSTACKSIZE      4 /* Get largest task stack size. */
DECL|macro|PR_MAXPPROCS
mdefine_line|#define PR_MAXPPROCS         5 /* Num parallel tasks. */
DECL|macro|PR_UNBLKONEXEC
mdefine_line|#define PR_UNBLKONEXEC       6 /* When task exec/exit&squot;s, unblock. */
DECL|macro|PR_SETEXITSIG
mdefine_line|#define PR_SETEXITSIG        8 /* When task exit&squot;s, set signal. */
DECL|macro|PR_RESIDENT
mdefine_line|#define PR_RESIDENT          9 /* Make task unswappable. */
DECL|macro|PR_ATTACHADDR
mdefine_line|#define PR_ATTACHADDR       10 /* (Re-)Connect a vma to a task. */
DECL|macro|PR_DETACHADDR
mdefine_line|#define PR_DETACHADDR       11 /* Disconnect a vma from a task. */
DECL|macro|PR_TERMCHILD
mdefine_line|#define PR_TERMCHILD        12 /* When parent sleeps with fishes, kill child. */
DECL|macro|PR_GETSHMASK
mdefine_line|#define PR_GETSHMASK        13 /* Get the sproc() share mask. */
DECL|macro|PR_GETNSHARE
mdefine_line|#define PR_GETNSHARE        14 /* Number of share group members. */
DECL|macro|PR_COREPID
mdefine_line|#define PR_COREPID          15 /* Add task pid to name when it core. */
DECL|macro|PR_ATTACHADDRPERM
mdefine_line|#define&t;PR_ATTACHADDRPERM   16 /* (Re-)Connect vma, with specified prot. */
DECL|macro|PR_PTHREADEXIT
mdefine_line|#define PR_PTHREADEXIT      17 /* Kill a pthread without prejudice. */
DECL|function|irix_prctl
id|asmlinkage
r_int
id|irix_prctl
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|cmd
suffix:semicolon
r_int
id|error
op_assign
l_int|0
comma
id|base
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;regs
(braket
l_int|2
)braket
op_eq
l_int|1000
)paren
id|base
op_assign
l_int|1
suffix:semicolon
id|cmd
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|4
)braket
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|PR_MAXPROCS
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_MAXPROCS&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
id|max_threads
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_ISBLOCKED
suffix:colon
(brace
r_struct
id|task_struct
op_star
id|task
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_ISBLOCKED&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|read_lock
c_func
(paren
op_amp
id|tasklist_lock
)paren
suffix:semicolon
id|task
op_assign
id|find_task_by_pid
c_func
(paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|ESRCH
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
id|error
op_assign
(paren
id|task-&gt;run_list.next
op_ne
l_int|NULL
)paren
suffix:semicolon
id|read_unlock
c_func
(paren
op_amp
id|tasklist_lock
)paren
suffix:semicolon
multiline_comment|/* Can _your_ OS find this out that fast? */
r_break
suffix:semicolon
)brace
r_case
id|PR_SETSTACKSIZE
suffix:colon
(brace
r_int
id|value
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_SETSTACKSIZE&lt;%08lx&gt;&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
r_int
)paren
id|value
)paren
suffix:semicolon
r_if
c_cond
(paren
id|value
OG
id|RLIM_INFINITY
)paren
id|value
op_assign
id|RLIM_INFINITY
suffix:semicolon
r_if
c_cond
(paren
id|capable
c_func
(paren
id|CAP_SYS_ADMIN
)paren
)paren
(brace
id|current-&gt;rlim
(braket
id|RLIMIT_STACK
)braket
dot
id|rlim_max
op_assign
id|current-&gt;rlim
(braket
id|RLIMIT_STACK
)braket
dot
id|rlim_cur
op_assign
id|value
suffix:semicolon
id|error
op_assign
id|value
suffix:semicolon
r_break
suffix:semicolon
)brace
r_if
c_cond
(paren
id|value
OG
id|current-&gt;rlim
(braket
id|RLIMIT_STACK
)braket
dot
id|rlim_max
)paren
(brace
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|current-&gt;rlim
(braket
id|RLIMIT_STACK
)braket
dot
id|rlim_cur
op_assign
id|value
suffix:semicolon
id|error
op_assign
id|value
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|PR_GETSTACKSIZE
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_GETSTACKSIZE&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
id|current-&gt;rlim
(braket
id|RLIMIT_STACK
)braket
dot
id|rlim_cur
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_MAXPPROCS
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_MAXPROCS&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
l_int|1
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_UNBLKONEXEC
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_UNBLKONEXEC&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_SETEXITSIG
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_SETEXITSIG&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
multiline_comment|/* We can probably play some game where we set the task&n;&t;&t; * exit_code to some non-zero value when this is requested,&n;&t;&t; * and check whether exit_code is already set in do_exit().&n;&t;&t; */
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_RESIDENT
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_RESIDENT&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Compatibility indeed. */
r_break
suffix:semicolon
r_case
id|PR_ATTACHADDR
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_ATTACHADDR&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_DETACHADDR
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_DETACHADDR&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_TERMCHILD
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_TERMCHILD&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_GETSHMASK
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_GETSHMASK&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* Until I have the sproc() stuff in. */
r_break
suffix:semicolon
r_case
id|PR_GETNSHARE
suffix:colon
id|error
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Until I have the sproc() stuff in. */
r_break
suffix:semicolon
r_case
id|PR_COREPID
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_COREPID&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_ATTACHADDRPERM
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_ATTACHADDRPERM&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
r_case
id|PR_PTHREADEXIT
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Wants PR_PTHREADEXIT&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|do_exit
c_func
(paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
)paren
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_prctl[%s:%d]: Non-existant opcode %d&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|cmd
)paren
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
r_return
id|error
suffix:semicolon
)brace
DECL|macro|DEBUG_PROCGRPS
macro_line|#undef DEBUG_PROCGRPS
r_extern
r_int
r_int
id|irix_mapelf
c_func
(paren
r_int
id|fd
comma
r_struct
id|elf_phdr
op_star
id|user_phdrp
comma
r_int
id|cnt
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_setpgid
c_func
(paren
id|pid_t
id|pid
comma
id|pid_t
id|pgid
)paren
suffix:semicolon
r_extern
r_void
id|sys_sync
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_getsid
c_func
(paren
id|pid_t
id|pid
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_write
(paren
r_int
r_int
id|fd
comma
r_const
r_char
op_star
id|buf
comma
r_int
r_int
id|count
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_lseek
(paren
r_int
r_int
id|fd
comma
id|off_t
id|offset
comma
r_int
r_int
id|origin
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_getgroups
c_func
(paren
r_int
id|gidsetsize
comma
id|gid_t
op_star
id|grouplist
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_setgroups
c_func
(paren
r_int
id|gidsetsize
comma
id|gid_t
op_star
id|grouplist
)paren
suffix:semicolon
r_extern
r_int
id|getrusage
c_func
(paren
r_struct
id|task_struct
op_star
id|p
comma
r_int
id|who
comma
r_struct
id|rusage
op_star
id|ru
)paren
suffix:semicolon
r_extern
r_char
op_star
id|prom_getenv
c_func
(paren
r_char
op_star
id|name
)paren
suffix:semicolon
r_extern
r_int
id|prom_setenv
c_func
(paren
r_char
op_star
id|name
comma
r_char
op_star
id|value
)paren
suffix:semicolon
multiline_comment|/* The syssgi commands supported thus far. */
DECL|macro|SGI_SYSID
mdefine_line|#define SGI_SYSID         1       /* Return unique per-machine identifier. */
DECL|macro|SGI_INVENT
mdefine_line|#define SGI_INVENT        5       /* Fetch inventory  */
DECL|macro|SGI_INV_SIZEOF
macro_line|#   define SGI_INV_SIZEOF 1
DECL|macro|SGI_INV_READ
macro_line|#   define SGI_INV_READ   2
DECL|macro|SGI_RDNAME
mdefine_line|#define SGI_RDNAME        6       /* Return string name of a process. */
DECL|macro|SGI_SETNVRAM
mdefine_line|#define SGI_SETNVRAM&t;  8&t;  /* Set PROM variable. */
DECL|macro|SGI_GETNVRAM
mdefine_line|#define SGI_GETNVRAM&t;  9&t;  /* Get PROM variable. */
DECL|macro|SGI_SETPGID
mdefine_line|#define SGI_SETPGID      21       /* Set process group id. */
DECL|macro|SGI_SYSCONF
mdefine_line|#define SGI_SYSCONF      22       /* POSIX sysconf garbage. */
DECL|macro|SGI_PATHCONF
mdefine_line|#define SGI_PATHCONF     24       /* POSIX sysconf garbage. */
DECL|macro|SGI_SETGROUPS
mdefine_line|#define SGI_SETGROUPS    40       /* POSIX sysconf garbage. */
DECL|macro|SGI_GETGROUPS
mdefine_line|#define SGI_GETGROUPS    41       /* POSIX sysconf garbage. */
DECL|macro|SGI_RUSAGE
mdefine_line|#define SGI_RUSAGE       56       /* BSD style rusage(). */
DECL|macro|SGI_SSYNC
mdefine_line|#define SGI_SSYNC        62       /* Synchronous fs sync. */
DECL|macro|SGI_GETSID
mdefine_line|#define SGI_GETSID       65       /* SysVr4 get session id. */
DECL|macro|SGI_ELFMAP
mdefine_line|#define SGI_ELFMAP       68       /* Map an elf image. */
DECL|macro|SGI_TOSSTSAVE
mdefine_line|#define SGI_TOSSTSAVE   108       /* Toss saved vma&squot;s. */
DECL|macro|SGI_FP_BCOPY
mdefine_line|#define SGI_FP_BCOPY    129       /* Should FPU bcopy be used on this machine? */
DECL|macro|SGI_PHYSP
mdefine_line|#define SGI_PHYSP      1011       /* Translate virtual into physical page. */
DECL|function|irix_syssgi
id|asmlinkage
r_int
id|irix_syssgi
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|cmd
suffix:semicolon
r_int
id|retval
comma
id|base
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;regs
(braket
l_int|2
)braket
op_eq
l_int|1000
)paren
id|base
op_assign
l_int|1
suffix:semicolon
id|cmd
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|4
)braket
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
id|SGI_SYSID
suffix:colon
(brace
r_char
op_star
id|buf
op_assign
(paren
r_char
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
multiline_comment|/* XXX Use ethernet addr.... */
id|retval
op_assign
id|clear_user
c_func
(paren
id|buf
comma
l_int|64
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
macro_line|#if 0
r_case
id|SGI_RDNAME
suffix:colon
(brace
r_int
id|pid
op_assign
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
r_char
op_star
id|buf
op_assign
(paren
r_char
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
suffix:semicolon
r_struct
id|task_struct
op_star
id|p
suffix:semicolon
r_char
id|comm
(braket
l_int|16
)braket
suffix:semicolon
id|retval
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
l_int|16
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_break
suffix:semicolon
id|read_lock
c_func
(paren
op_amp
id|tasklist_lock
)paren
suffix:semicolon
id|p
op_assign
id|find_task_by_pid
c_func
(paren
id|pid
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|p
)paren
(brace
id|read_unlock
c_func
(paren
op_amp
id|tasklist_lock
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|ESRCH
suffix:semicolon
r_break
suffix:semicolon
)brace
id|memcpy
c_func
(paren
id|comm
comma
id|p-&gt;comm
comma
l_int|16
)paren
suffix:semicolon
id|read_unlock
c_func
(paren
op_amp
id|tasklist_lock
)paren
suffix:semicolon
multiline_comment|/* XXX Need to check sizes. */
id|copy_to_user
c_func
(paren
id|buf
comma
id|p-&gt;comm
comma
l_int|16
)paren
suffix:semicolon
id|retval
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|SGI_GETNVRAM
suffix:colon
(brace
r_char
op_star
id|name
op_assign
(paren
r_char
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
r_char
op_star
id|buf
op_assign
(paren
r_char
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
suffix:semicolon
r_char
op_star
id|value
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* til I fix it */
id|retval
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
l_int|128
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_break
suffix:semicolon
id|value
op_assign
id|prom_getenv
c_func
(paren
id|name
)paren
suffix:semicolon
multiline_comment|/* PROM lock?  */
r_if
c_cond
(paren
op_logical_neg
id|value
)paren
(brace
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
multiline_comment|/* Do I strlen() for the length? */
id|copy_to_user
c_func
(paren
id|buf
comma
id|value
comma
l_int|128
)paren
suffix:semicolon
id|retval
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|SGI_SETNVRAM
suffix:colon
(brace
r_char
op_star
id|name
op_assign
(paren
r_char
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
r_char
op_star
id|value
op_assign
(paren
r_char
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* til I fix it */
id|retval
op_assign
id|prom_setenv
c_func
(paren
id|name
comma
id|value
)paren
suffix:semicolon
multiline_comment|/* XXX make sure retval conforms to syssgi(2) */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] setnvram(&bslash;&quot;%s&bslash;&quot;, &bslash;&quot;%s&bslash;&quot;): retval %d&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|name
comma
id|value
comma
id|retval
)paren
suffix:semicolon
multiline_comment|/*&t;&t;if (retval == PROM_ENOENT)&n;&t;&t;  &t;retval = -ENOENT; */
r_break
suffix:semicolon
)brace
macro_line|#endif
r_case
id|SGI_SETPGID
suffix:colon
(brace
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] setpgid(%d, %d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
)paren
suffix:semicolon
macro_line|#endif
id|retval
op_assign
id|sys_setpgid
c_func
(paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;retval=%d&bslash;n&quot;
comma
id|retval
)paren
suffix:semicolon
macro_line|#endif
)brace
r_case
id|SGI_SYSCONF
suffix:colon
(brace
r_switch
c_cond
(paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
)paren
(brace
r_case
l_int|1
suffix:colon
id|retval
op_assign
(paren
id|MAX_ARG_PAGES
op_rshift
l_int|4
)paren
suffix:semicolon
multiline_comment|/* XXX estimate... */
r_goto
id|out
suffix:semicolon
r_case
l_int|2
suffix:colon
id|retval
op_assign
id|max_threads
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|3
suffix:colon
id|retval
op_assign
id|HZ
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|4
suffix:colon
id|retval
op_assign
id|NGROUPS
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|5
suffix:colon
id|retval
op_assign
id|NR_OPEN
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|6
suffix:colon
id|retval
op_assign
l_int|1
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|7
suffix:colon
id|retval
op_assign
l_int|1
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|8
suffix:colon
id|retval
op_assign
l_int|199009
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|11
suffix:colon
id|retval
op_assign
id|PAGE_SIZE
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|12
suffix:colon
id|retval
op_assign
l_int|4
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|25
suffix:colon
r_case
l_int|26
suffix:colon
r_case
l_int|27
suffix:colon
r_case
l_int|28
suffix:colon
r_case
l_int|29
suffix:colon
r_case
l_int|30
suffix:colon
id|retval
op_assign
l_int|0
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|31
suffix:colon
id|retval
op_assign
l_int|32
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_default
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
suffix:semicolon
)brace
r_case
id|SGI_SETGROUPS
suffix:colon
id|retval
op_assign
id|sys_setgroups
c_func
(paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
(paren
id|gid_t
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_GETGROUPS
suffix:colon
id|retval
op_assign
id|sys_getgroups
c_func
(paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
(paren
id|gid_t
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_RUSAGE
suffix:colon
(brace
r_struct
id|rusage
op_star
id|ru
op_assign
(paren
r_struct
id|rusage
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
suffix:semicolon
r_switch
c_cond
(paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/* rusage self */
id|retval
op_assign
id|getrusage
c_func
(paren
id|current
comma
id|RUSAGE_SELF
comma
id|ru
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
op_minus
l_int|1
suffix:colon
multiline_comment|/* rusage children */
id|retval
op_assign
id|getrusage
c_func
(paren
id|current
comma
id|RUSAGE_CHILDREN
comma
id|ru
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_default
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
suffix:semicolon
)brace
r_case
id|SGI_SSYNC
suffix:colon
id|sys_sync
c_func
(paren
)paren
suffix:semicolon
id|retval
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_GETSID
suffix:colon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] getsid(%d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
)paren
suffix:semicolon
macro_line|#endif
id|retval
op_assign
id|sys_getsid
c_func
(paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;retval=%d&bslash;n&quot;
comma
id|retval
)paren
suffix:semicolon
macro_line|#endif
r_break
suffix:semicolon
r_case
id|SGI_ELFMAP
suffix:colon
id|retval
op_assign
id|irix_mapelf
c_func
(paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
(paren
r_struct
id|elf_phdr
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
comma
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|7
)braket
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_TOSSTSAVE
suffix:colon
multiline_comment|/* XXX We don&squot;t need to do anything? */
id|retval
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_FP_BCOPY
suffix:colon
id|retval
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_PHYSP
suffix:colon
(brace
r_int
r_int
id|addr
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
r_int
op_star
id|pageno
op_assign
(paren
r_int
op_star
)paren
(paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
)paren
suffix:semicolon
r_struct
id|mm_struct
op_star
id|mm
op_assign
id|current-&gt;mm
suffix:semicolon
id|pgd_t
op_star
id|pgdp
suffix:semicolon
id|pmd_t
op_star
id|pmdp
suffix:semicolon
id|pte_t
op_star
id|ptep
suffix:semicolon
id|retval
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|pageno
comma
r_sizeof
(paren
r_int
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|retval
)paren
r_return
id|retval
suffix:semicolon
id|down
c_func
(paren
op_amp
id|mm-&gt;mmap_sem
)paren
suffix:semicolon
id|pgdp
op_assign
id|pgd_offset
c_func
(paren
id|mm
comma
id|addr
)paren
suffix:semicolon
id|pmdp
op_assign
id|pmd_offset
c_func
(paren
id|pgdp
comma
id|addr
)paren
suffix:semicolon
id|ptep
op_assign
id|pte_offset
c_func
(paren
id|pmdp
comma
id|addr
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|ptep
)paren
(brace
id|pte_t
id|pte
op_assign
op_star
id|ptep
suffix:semicolon
r_if
c_cond
(paren
id|pte_val
c_func
(paren
id|pte
)paren
op_amp
(paren
id|_PAGE_VALID
op_or
id|_PAGE_PRESENT
)paren
)paren
(brace
id|retval
op_assign
id|put_user
c_func
(paren
(paren
id|pte_val
c_func
(paren
id|pte
)paren
op_amp
id|PAGE_MASK
)paren
op_rshift
id|PAGE_SHIFT
comma
id|pageno
)paren
suffix:semicolon
)brace
)brace
id|up
c_func
(paren
op_amp
id|mm-&gt;mmap_sem
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
r_case
id|SGI_INVENT
suffix:colon
(brace
r_int
id|arg1
op_assign
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
r_void
op_star
id|buffer
op_assign
(paren
r_void
op_star
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
suffix:semicolon
r_int
id|count
op_assign
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|7
)braket
suffix:semicolon
r_switch
c_cond
(paren
id|arg1
)paren
(brace
r_case
id|SGI_INV_SIZEOF
suffix:colon
id|retval
op_assign
r_sizeof
(paren
id|inventory_t
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|SGI_INV_READ
suffix:colon
id|retval
op_assign
id|dump_inventory_to_user
(paren
id|buffer
comma
id|count
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
)brace
r_break
suffix:semicolon
)brace
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;irix_syssgi: Unsupported command %d&bslash;n&quot;
comma
(paren
r_int
)paren
id|cmd
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
suffix:semicolon
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_gtime
id|asmlinkage
r_int
id|irix_gtime
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_return
id|CURRENT_TIME
suffix:semicolon
)brace
r_int
id|vm_enough_memory
c_func
(paren
r_int
id|pages
)paren
suffix:semicolon
multiline_comment|/*&n; * IRIX is completely broken... it returns 0 on success, otherwise&n; * ENOMEM.&n; */
DECL|function|irix_brk
id|asmlinkage
r_int
id|irix_brk
c_func
(paren
r_int
r_int
id|brk
)paren
(brace
r_int
r_int
id|rlim
suffix:semicolon
r_int
r_int
id|newbrk
comma
id|oldbrk
suffix:semicolon
r_struct
id|mm_struct
op_star
id|mm
op_assign
id|current-&gt;mm
suffix:semicolon
r_int
id|ret
suffix:semicolon
id|down
c_func
(paren
op_amp
id|mm-&gt;mmap_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|brk
OL
id|mm-&gt;end_code
)paren
(brace
id|ret
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|newbrk
op_assign
id|PAGE_ALIGN
c_func
(paren
id|brk
)paren
suffix:semicolon
id|oldbrk
op_assign
id|PAGE_ALIGN
c_func
(paren
id|mm-&gt;brk
)paren
suffix:semicolon
r_if
c_cond
(paren
id|oldbrk
op_eq
id|newbrk
)paren
(brace
id|mm-&gt;brk
op_assign
id|brk
suffix:semicolon
id|ret
op_assign
l_int|0
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Always allow shrinking brk&n;&t; */
r_if
c_cond
(paren
id|brk
op_le
id|mm-&gt;brk
)paren
(brace
id|mm-&gt;brk
op_assign
id|brk
suffix:semicolon
id|do_munmap
c_func
(paren
id|mm
comma
id|newbrk
comma
id|oldbrk
op_minus
id|newbrk
)paren
suffix:semicolon
id|ret
op_assign
l_int|0
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Check against rlimit and stack..&n;&t; */
id|rlim
op_assign
id|current-&gt;rlim
(braket
id|RLIMIT_DATA
)braket
dot
id|rlim_cur
suffix:semicolon
r_if
c_cond
(paren
id|rlim
op_ge
id|RLIM_INFINITY
)paren
id|rlim
op_assign
op_complement
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|brk
op_minus
id|mm-&gt;end_code
OG
id|rlim
)paren
(brace
id|ret
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Check against existing mmap mappings.&n;&t; */
r_if
c_cond
(paren
id|find_vma_intersection
c_func
(paren
id|mm
comma
id|oldbrk
comma
id|newbrk
op_plus
id|PAGE_SIZE
)paren
)paren
(brace
id|ret
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Check if we have enough memory..&n;&t; */
r_if
c_cond
(paren
op_logical_neg
id|vm_enough_memory
c_func
(paren
(paren
id|newbrk
op_minus
id|oldbrk
)paren
op_rshift
id|PAGE_SHIFT
)paren
)paren
(brace
id|ret
op_assign
op_minus
id|ENOMEM
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * Ok, looks good - let it rip.&n;&t; */
id|mm-&gt;brk
op_assign
id|brk
suffix:semicolon
id|do_brk
c_func
(paren
id|oldbrk
comma
id|newbrk
op_minus
id|oldbrk
)paren
suffix:semicolon
id|ret
op_assign
l_int|0
suffix:semicolon
id|out
suffix:colon
id|up
c_func
(paren
op_amp
id|mm-&gt;mmap_sem
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|irix_getpid
id|asmlinkage
r_int
id|irix_getpid
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|regs-&gt;regs
(braket
l_int|3
)braket
op_assign
id|current-&gt;p_opptr-&gt;pid
suffix:semicolon
r_return
id|current-&gt;pid
suffix:semicolon
)brace
DECL|function|irix_getuid
id|asmlinkage
r_int
id|irix_getuid
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|regs-&gt;regs
(braket
l_int|3
)braket
op_assign
id|current-&gt;euid
suffix:semicolon
r_return
id|current-&gt;uid
suffix:semicolon
)brace
DECL|function|irix_getgid
id|asmlinkage
r_int
id|irix_getgid
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|regs-&gt;regs
(braket
l_int|3
)braket
op_assign
id|current-&gt;egid
suffix:semicolon
r_return
id|current-&gt;gid
suffix:semicolon
)brace
r_extern
id|rwlock_t
id|xtime_lock
suffix:semicolon
DECL|function|irix_stime
id|asmlinkage
r_int
id|irix_stime
c_func
(paren
r_int
id|value
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
id|capable
c_func
(paren
id|CAP_SYS_TIME
)paren
)paren
r_return
op_minus
id|EPERM
suffix:semicolon
id|write_lock_irq
c_func
(paren
op_amp
id|xtime_lock
)paren
suffix:semicolon
id|xtime.tv_sec
op_assign
id|value
suffix:semicolon
id|xtime.tv_usec
op_assign
l_int|0
suffix:semicolon
id|time_maxerror
op_assign
id|MAXPHASE
suffix:semicolon
id|time_esterror
op_assign
id|MAXPHASE
suffix:semicolon
id|write_unlock_irq
c_func
(paren
op_amp
id|xtime_lock
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
r_extern
r_int
id|do_setitimer
c_func
(paren
r_int
id|which
comma
r_struct
id|itimerval
op_star
id|value
comma
r_struct
id|itimerval
op_star
id|ovalue
)paren
suffix:semicolon
DECL|function|jiffiestotv
r_static
r_inline
r_void
id|jiffiestotv
c_func
(paren
r_int
r_int
id|jiffies
comma
r_struct
id|timeval
op_star
id|value
)paren
(brace
id|value-&gt;tv_usec
op_assign
(paren
id|jiffies
op_mod
id|HZ
)paren
op_star
(paren
l_int|1000000
op_div
id|HZ
)paren
suffix:semicolon
id|value-&gt;tv_sec
op_assign
id|jiffies
op_div
id|HZ
suffix:semicolon
)brace
DECL|function|getitimer_real
r_static
r_inline
r_void
id|getitimer_real
c_func
(paren
r_struct
id|itimerval
op_star
id|value
)paren
(brace
r_register
r_int
r_int
id|val
comma
id|interval
suffix:semicolon
id|interval
op_assign
id|current-&gt;it_real_incr
suffix:semicolon
id|val
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|del_timer
c_func
(paren
op_amp
id|current-&gt;real_timer
)paren
)paren
(brace
r_int
r_int
id|now
op_assign
id|jiffies
suffix:semicolon
id|val
op_assign
id|current-&gt;real_timer.expires
suffix:semicolon
id|add_timer
c_func
(paren
op_amp
id|current-&gt;real_timer
)paren
suffix:semicolon
multiline_comment|/* look out for negative/zero itimer.. */
r_if
c_cond
(paren
id|val
op_le
id|now
)paren
id|val
op_assign
id|now
op_plus
l_int|1
suffix:semicolon
id|val
op_sub_assign
id|now
suffix:semicolon
)brace
id|jiffiestotv
c_func
(paren
id|val
comma
op_amp
id|value-&gt;it_value
)paren
suffix:semicolon
id|jiffiestotv
c_func
(paren
id|interval
comma
op_amp
id|value-&gt;it_interval
)paren
suffix:semicolon
)brace
DECL|function|irix_alarm
id|asmlinkage
r_int
r_int
id|irix_alarm
c_func
(paren
r_int
r_int
id|seconds
)paren
(brace
r_struct
id|itimerval
id|it_new
comma
id|it_old
suffix:semicolon
r_int
r_int
id|oldalarm
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|seconds
)paren
(brace
id|getitimer_real
c_func
(paren
op_amp
id|it_old
)paren
suffix:semicolon
id|del_timer
c_func
(paren
op_amp
id|current-&gt;real_timer
)paren
suffix:semicolon
)brace
r_else
(brace
id|it_new.it_interval.tv_sec
op_assign
id|it_new.it_interval.tv_usec
op_assign
l_int|0
suffix:semicolon
id|it_new.it_value.tv_sec
op_assign
id|seconds
suffix:semicolon
id|it_new.it_value.tv_usec
op_assign
l_int|0
suffix:semicolon
id|do_setitimer
c_func
(paren
id|ITIMER_REAL
comma
op_amp
id|it_new
comma
op_amp
id|it_old
)paren
suffix:semicolon
)brace
id|oldalarm
op_assign
id|it_old.it_value.tv_sec
suffix:semicolon
multiline_comment|/*&n;&t; * ehhh.. We can&squot;t return 0 if we have an alarm pending ...&n;&t; * And we&squot;d better return too much than too little anyway&n;&t; */
r_if
c_cond
(paren
id|it_old.it_value.tv_usec
)paren
id|oldalarm
op_increment
suffix:semicolon
r_return
id|oldalarm
suffix:semicolon
)brace
DECL|function|irix_pause
id|asmlinkage
r_int
id|irix_pause
c_func
(paren
r_void
)paren
(brace
id|current-&gt;state
op_assign
id|TASK_INTERRUPTIBLE
suffix:semicolon
id|schedule
c_func
(paren
)paren
suffix:semicolon
r_return
op_minus
id|EINTR
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_mount
c_func
(paren
r_char
op_star
id|dev_name
comma
r_char
op_star
id|dir_name
comma
r_char
op_star
id|type
comma
r_int
r_int
id|new_flags
comma
r_void
op_star
id|data
)paren
suffix:semicolon
multiline_comment|/* XXX need more than this... */
DECL|function|irix_mount
id|asmlinkage
r_int
id|irix_mount
c_func
(paren
r_char
op_star
id|dev_name
comma
r_char
op_star
id|dir_name
comma
r_int
r_int
id|flags
comma
r_char
op_star
id|type
comma
r_void
op_star
id|data
comma
r_int
id|datalen
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_mount(%p,%p,%08lx,%p,%p,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|dev_name
comma
id|dir_name
comma
id|flags
comma
id|type
comma
id|data
comma
id|datalen
)paren
suffix:semicolon
r_return
id|sys_mount
c_func
(paren
id|dev_name
comma
id|dir_name
comma
id|type
comma
id|flags
comma
id|data
)paren
suffix:semicolon
)brace
DECL|struct|irix_statfs
r_struct
id|irix_statfs
(brace
DECL|member|f_type
r_int
id|f_type
suffix:semicolon
DECL|member|f_bsize
DECL|member|f_frsize
DECL|member|f_blocks
DECL|member|f_bfree
DECL|member|f_files
DECL|member|f_ffree
r_int
id|f_bsize
comma
id|f_frsize
comma
id|f_blocks
comma
id|f_bfree
comma
id|f_files
comma
id|f_ffree
suffix:semicolon
DECL|member|f_fname
DECL|member|f_fpack
r_char
id|f_fname
(braket
l_int|6
)braket
comma
id|f_fpack
(braket
l_int|6
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|function|irix_statfs
id|asmlinkage
r_int
id|irix_statfs
c_func
(paren
r_const
r_char
op_star
id|path
comma
r_struct
id|irix_statfs
op_star
id|buf
comma
r_int
id|len
comma
r_int
id|fs_type
)paren
(brace
r_struct
id|nameidata
id|nd
suffix:semicolon
r_struct
id|statfs
id|kbuf
suffix:semicolon
r_int
id|error
comma
id|i
suffix:semicolon
multiline_comment|/* We don&squot;t support this feature yet. */
r_if
c_cond
(paren
id|fs_type
)paren
(brace
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
r_sizeof
(paren
r_struct
id|irix_statfs
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
id|user_path_walk
c_func
(paren
id|path
comma
op_amp
id|nd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
id|vfs_statfs
c_func
(paren
id|nd.dentry-&gt;d_inode-&gt;i_sb
comma
op_amp
id|kbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|dput_and_out
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_type
comma
op_amp
id|buf-&gt;f_type
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bsize
comma
op_amp
id|buf-&gt;f_bsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_frsize
comma
op_amp
id|buf-&gt;f_frsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_blocks
comma
op_amp
id|buf-&gt;f_blocks
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bfree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_files
comma
op_amp
id|buf-&gt;f_files
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_ffree
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
(brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_fname
(braket
id|i
)braket
)paren
suffix:semicolon
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_fpack
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|error
op_assign
l_int|0
suffix:semicolon
id|dput_and_out
suffix:colon
id|path_release
c_func
(paren
op_amp
id|nd
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_fstatfs
id|asmlinkage
r_int
id|irix_fstatfs
c_func
(paren
r_int
r_int
id|fd
comma
r_struct
id|irix_statfs
op_star
id|buf
)paren
(brace
r_struct
id|statfs
id|kbuf
suffix:semicolon
r_struct
id|file
op_star
id|file
suffix:semicolon
r_int
id|error
comma
id|i
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
r_sizeof
(paren
r_struct
id|irix_statfs
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
(brace
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|vfs_statfs
c_func
(paren
id|file-&gt;f_dentry-&gt;d_inode-&gt;i_sb
comma
op_amp
id|kbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out_f
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_type
comma
op_amp
id|buf-&gt;f_type
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bsize
comma
op_amp
id|buf-&gt;f_bsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_frsize
comma
op_amp
id|buf-&gt;f_frsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_blocks
comma
op_amp
id|buf-&gt;f_blocks
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bfree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_files
comma
op_amp
id|buf-&gt;f_files
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_ffree
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|6
suffix:semicolon
id|i
op_increment
)paren
(brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_fname
(braket
id|i
)braket
)paren
suffix:semicolon
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_fpack
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|out_f
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_setpgid
c_func
(paren
id|pid_t
id|pid
comma
id|pid_t
id|pgid
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_setsid
c_func
(paren
r_void
)paren
suffix:semicolon
DECL|function|irix_setpgrp
id|asmlinkage
r_int
id|irix_setpgrp
c_func
(paren
r_int
id|flags
)paren
(brace
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] setpgrp(%d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|flags
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|flags
)paren
(brace
id|error
op_assign
id|current-&gt;pgrp
suffix:semicolon
)brace
r_else
id|error
op_assign
id|sys_setsid
c_func
(paren
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;returning %d&bslash;n&quot;
comma
id|current-&gt;pgrp
)paren
suffix:semicolon
macro_line|#endif
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_times
id|asmlinkage
r_int
id|irix_times
c_func
(paren
r_struct
id|tms
op_star
id|tbuf
)paren
(brace
r_int
id|err
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|tbuf
)paren
(brace
id|err
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|tbuf
comma
r_sizeof
op_star
id|tbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
r_return
id|err
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
id|current-&gt;times.tms_utime
comma
op_amp
id|tbuf-&gt;tms_utime
)paren
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
id|current-&gt;times.tms_stime
comma
op_amp
id|tbuf-&gt;tms_stime
)paren
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
id|current-&gt;times.tms_cutime
comma
op_amp
id|tbuf-&gt;tms_cutime
)paren
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
id|current-&gt;times.tms_cstime
comma
op_amp
id|tbuf-&gt;tms_cstime
)paren
suffix:semicolon
)brace
r_return
id|err
suffix:semicolon
)brace
DECL|function|irix_exec
id|asmlinkage
r_int
id|irix_exec
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|error
comma
id|base
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|filename
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;regs
(braket
l_int|2
)braket
op_eq
l_int|1000
)paren
(brace
id|base
op_assign
l_int|1
suffix:semicolon
)brace
id|filename
op_assign
id|getname
c_func
(paren
(paren
r_char
op_star
)paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|4
)braket
)paren
suffix:semicolon
id|error
op_assign
id|PTR_ERR
c_func
(paren
id|filename
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_ERR
c_func
(paren
id|filename
)paren
)paren
r_return
id|error
suffix:semicolon
id|error
op_assign
id|do_execve
c_func
(paren
id|filename
comma
(paren
r_char
op_star
op_star
)paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
(paren
r_char
op_star
op_star
)paren
l_int|0
comma
id|regs
)paren
suffix:semicolon
id|putname
c_func
(paren
id|filename
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_exece
id|asmlinkage
r_int
id|irix_exece
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|error
comma
id|base
op_assign
l_int|0
suffix:semicolon
r_char
op_star
id|filename
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;regs
(braket
l_int|2
)braket
op_eq
l_int|1000
)paren
id|base
op_assign
l_int|1
suffix:semicolon
id|filename
op_assign
id|getname
c_func
(paren
(paren
r_char
op_star
)paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|4
)braket
)paren
suffix:semicolon
id|error
op_assign
id|PTR_ERR
c_func
(paren
id|filename
)paren
suffix:semicolon
r_if
c_cond
(paren
id|IS_ERR
c_func
(paren
id|filename
)paren
)paren
r_return
id|error
suffix:semicolon
id|error
op_assign
id|do_execve
c_func
(paren
id|filename
comma
(paren
r_char
op_star
op_star
)paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
comma
(paren
r_char
op_star
op_star
)paren
(paren
r_int
)paren
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
comma
id|regs
)paren
suffix:semicolon
id|putname
c_func
(paren
id|filename
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_gethostid
id|asmlinkage
r_int
r_int
id|irix_gethostid
c_func
(paren
r_void
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d]: irix_gethostid() called...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_sethostid
id|asmlinkage
r_int
r_int
id|irix_sethostid
c_func
(paren
r_int
r_int
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d]: irix_sethostid(%08lx) called...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|val
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_socket
c_func
(paren
r_int
id|family
comma
r_int
id|type
comma
r_int
id|protocol
)paren
suffix:semicolon
DECL|function|irix_socket
id|asmlinkage
r_int
id|irix_socket
c_func
(paren
r_int
id|family
comma
r_int
id|type
comma
r_int
id|protocol
)paren
(brace
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
l_int|1
suffix:colon
id|type
op_assign
id|SOCK_DGRAM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|2
suffix:colon
id|type
op_assign
id|SOCK_STREAM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|3
suffix:colon
id|type
op_assign
l_int|9
suffix:semicolon
multiline_comment|/* Invalid... */
r_break
suffix:semicolon
r_case
l_int|4
suffix:colon
id|type
op_assign
id|SOCK_RAW
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|5
suffix:colon
id|type
op_assign
id|SOCK_RDM
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|6
suffix:colon
id|type
op_assign
id|SOCK_SEQPACKET
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
r_break
suffix:semicolon
)brace
r_return
id|sys_socket
c_func
(paren
id|family
comma
id|type
comma
id|protocol
)paren
suffix:semicolon
)brace
DECL|function|irix_getdomainname
id|asmlinkage
r_int
id|irix_getdomainname
c_func
(paren
r_char
op_star
id|name
comma
r_int
id|len
)paren
(brace
r_int
id|error
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|name
comma
id|len
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_return
id|error
suffix:semicolon
id|down_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|len
OG
(paren
id|__NEW_UTS_LEN
op_minus
l_int|1
)paren
)paren
(brace
id|len
op_assign
id|__NEW_UTS_LEN
op_minus
l_int|1
suffix:semicolon
)brace
id|error
op_assign
l_int|0
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|name
comma
id|system_utsname.domainname
comma
id|len
)paren
)paren
id|error
op_assign
op_minus
id|EFAULT
suffix:semicolon
id|up_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_getpagesize
id|asmlinkage
r_int
r_int
id|irix_getpagesize
c_func
(paren
r_void
)paren
(brace
r_return
id|PAGE_SIZE
suffix:semicolon
)brace
DECL|function|irix_msgsys
id|asmlinkage
r_int
id|irix_msgsys
c_func
(paren
r_int
id|opcode
comma
r_int
r_int
id|arg0
comma
r_int
r_int
id|arg1
comma
r_int
r_int
id|arg2
comma
r_int
r_int
id|arg3
comma
r_int
r_int
id|arg4
)paren
(brace
r_switch
c_cond
(paren
id|opcode
)paren
(brace
r_case
l_int|0
suffix:colon
r_return
id|sys_msgget
c_func
(paren
(paren
id|key_t
)paren
id|arg0
comma
(paren
r_int
)paren
id|arg1
)paren
suffix:semicolon
r_case
l_int|1
suffix:colon
r_return
id|sys_msgctl
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_int
)paren
id|arg1
comma
(paren
r_struct
id|msqid_ds
op_star
)paren
id|arg2
)paren
suffix:semicolon
r_case
l_int|2
suffix:colon
r_return
id|sys_msgrcv
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_struct
id|msgbuf
op_star
)paren
id|arg1
comma
(paren
r_int
)paren
id|arg2
comma
(paren
r_int
)paren
id|arg3
comma
(paren
r_int
)paren
id|arg4
)paren
suffix:semicolon
r_case
l_int|3
suffix:colon
r_return
id|sys_msgsnd
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_struct
id|msgbuf
op_star
)paren
id|arg1
comma
(paren
r_int
)paren
id|arg2
comma
(paren
r_int
)paren
id|arg3
)paren
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
DECL|function|irix_shmsys
id|asmlinkage
r_int
id|irix_shmsys
c_func
(paren
r_int
id|opcode
comma
r_int
r_int
id|arg0
comma
r_int
r_int
id|arg1
comma
r_int
r_int
id|arg2
comma
r_int
r_int
id|arg3
)paren
(brace
r_switch
c_cond
(paren
id|opcode
)paren
(brace
r_case
l_int|0
suffix:colon
r_return
id|sys_shmat
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_char
op_star
)paren
id|arg1
comma
(paren
r_int
)paren
id|arg2
comma
(paren
r_int
r_int
op_star
)paren
id|arg3
)paren
suffix:semicolon
r_case
l_int|1
suffix:colon
r_return
id|sys_shmctl
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_int
)paren
id|arg1
comma
(paren
r_struct
id|shmid_ds
op_star
)paren
id|arg2
)paren
suffix:semicolon
r_case
l_int|2
suffix:colon
r_return
id|sys_shmdt
c_func
(paren
(paren
r_char
op_star
)paren
id|arg0
)paren
suffix:semicolon
r_case
l_int|3
suffix:colon
r_return
id|sys_shmget
c_func
(paren
(paren
id|key_t
)paren
id|arg0
comma
(paren
r_int
)paren
id|arg1
comma
(paren
r_int
)paren
id|arg2
)paren
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
DECL|function|irix_semsys
id|asmlinkage
r_int
id|irix_semsys
c_func
(paren
r_int
id|opcode
comma
r_int
r_int
id|arg0
comma
r_int
r_int
id|arg1
comma
r_int
r_int
id|arg2
comma
r_int
id|arg3
)paren
(brace
r_switch
c_cond
(paren
id|opcode
)paren
(brace
r_case
l_int|0
suffix:colon
r_return
id|sys_semctl
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_int
)paren
id|arg1
comma
(paren
r_int
)paren
id|arg2
comma
(paren
r_union
id|semun
)paren
id|arg3
)paren
suffix:semicolon
r_case
l_int|1
suffix:colon
r_return
id|sys_semget
c_func
(paren
(paren
id|key_t
)paren
id|arg0
comma
(paren
r_int
)paren
id|arg1
comma
(paren
r_int
)paren
id|arg2
)paren
suffix:semicolon
r_case
l_int|2
suffix:colon
r_return
id|sys_semop
c_func
(paren
(paren
r_int
)paren
id|arg0
comma
(paren
r_struct
id|sembuf
op_star
)paren
id|arg1
comma
(paren
r_int
r_int
)paren
id|arg2
)paren
suffix:semicolon
r_default
suffix:colon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
)brace
DECL|function|llseek
r_static
r_inline
id|loff_t
id|llseek
c_func
(paren
r_struct
id|file
op_star
id|file
comma
id|loff_t
id|offset
comma
r_int
id|origin
)paren
(brace
id|loff_t
(paren
op_star
id|fn
)paren
(paren
r_struct
id|file
op_star
comma
id|loff_t
comma
r_int
)paren
suffix:semicolon
id|loff_t
id|retval
suffix:semicolon
id|fn
op_assign
id|default_llseek
suffix:semicolon
r_if
c_cond
(paren
id|file-&gt;f_op
op_logical_and
id|file-&gt;f_op-&gt;llseek
)paren
id|fn
op_assign
id|file-&gt;f_op-&gt;llseek
suffix:semicolon
id|lock_kernel
c_func
(paren
)paren
suffix:semicolon
id|retval
op_assign
id|fn
c_func
(paren
id|file
comma
id|offset
comma
id|origin
)paren
suffix:semicolon
id|unlock_kernel
c_func
(paren
)paren
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_lseek64
id|asmlinkage
r_int
id|irix_lseek64
c_func
(paren
r_int
id|fd
comma
r_int
id|_unused
comma
r_int
id|offhi
comma
r_int
id|offlow
comma
r_int
id|origin
)paren
(brace
r_int
id|retval
suffix:semicolon
r_struct
id|file
op_star
id|file
suffix:semicolon
id|loff_t
id|offset
suffix:semicolon
id|retval
op_assign
op_minus
id|EBADF
suffix:semicolon
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|file
)paren
r_goto
id|bad
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|origin
OG
l_int|2
)paren
r_goto
id|out_putf
suffix:semicolon
id|offset
op_assign
id|llseek
c_func
(paren
id|file
comma
(paren
(paren
id|loff_t
)paren
id|offhi
op_lshift
l_int|32
)paren
op_or
id|offlow
comma
id|origin
)paren
suffix:semicolon
id|retval
op_assign
(paren
r_int
)paren
id|offset
suffix:semicolon
id|out_putf
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|bad
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_sginap
id|asmlinkage
r_int
id|irix_sginap
c_func
(paren
r_int
id|ticks
)paren
(brace
id|current-&gt;state
op_assign
id|TASK_INTERRUPTIBLE
suffix:semicolon
id|schedule_timeout
c_func
(paren
id|ticks
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|irix_sgikopt
id|asmlinkage
r_int
id|irix_sgikopt
c_func
(paren
r_char
op_star
id|istring
comma
r_char
op_star
id|ostring
comma
r_int
id|len
)paren
(brace
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_gettimeofday
id|asmlinkage
r_int
id|irix_gettimeofday
c_func
(paren
r_struct
id|timeval
op_star
id|tv
)paren
(brace
r_int
id|retval
suffix:semicolon
id|retval
op_assign
id|copy_to_user
c_func
(paren
id|tv
comma
op_amp
id|xtime
comma
r_sizeof
(paren
op_star
id|tv
)paren
)paren
ques
c_cond
op_minus
id|EFAULT
suffix:colon
l_int|0
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
DECL|macro|IRIX_MAP_AUTOGROW
mdefine_line|#define IRIX_MAP_AUTOGROW 0x40
DECL|function|irix_mmap32
id|asmlinkage
r_int
r_int
id|irix_mmap32
c_func
(paren
r_int
r_int
id|addr
comma
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
id|off_t
id|offset
)paren
(brace
r_struct
id|file
op_star
id|file
op_assign
l_int|NULL
suffix:semicolon
r_int
r_int
id|retval
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|flags
op_amp
id|MAP_ANONYMOUS
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
r_return
op_minus
id|EBADF
suffix:semicolon
multiline_comment|/* Ok, bad taste hack follows, try to think in something else&n;&t;&t; * when reading this.  */
r_if
c_cond
(paren
id|flags
op_amp
id|IRIX_MAP_AUTOGROW
)paren
(brace
r_int
r_int
id|old_pos
suffix:semicolon
r_int
id|max_size
op_assign
id|offset
op_plus
id|len
suffix:semicolon
r_if
c_cond
(paren
id|max_size
OG
id|file-&gt;f_dentry-&gt;d_inode-&gt;i_size
)paren
(brace
id|old_pos
op_assign
id|sys_lseek
(paren
id|fd
comma
id|max_size
op_minus
l_int|1
comma
l_int|0
)paren
suffix:semicolon
id|sys_write
(paren
id|fd
comma
l_string|&quot;&quot;
comma
l_int|1
)paren
suffix:semicolon
id|sys_lseek
(paren
id|fd
comma
id|old_pos
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
id|flags
op_and_assign
op_complement
(paren
id|MAP_EXECUTABLE
op_or
id|MAP_DENYWRITE
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
id|retval
op_assign
id|do_mmap
c_func
(paren
id|file
comma
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|offset
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|file
)paren
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_madvise
id|asmlinkage
r_int
id|irix_madvise
c_func
(paren
r_int
r_int
id|addr
comma
r_int
id|len
comma
r_int
id|behavior
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_madvise(%08lx,%d,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|addr
comma
id|len
comma
id|behavior
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_pagelock
id|asmlinkage
r_int
id|irix_pagelock
c_func
(paren
r_char
op_star
id|addr
comma
r_int
id|len
comma
r_int
id|op
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_pagelock(%p,%d,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|addr
comma
id|len
comma
id|op
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_quotactl
id|asmlinkage
r_int
id|irix_quotactl
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_quotactl()&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_BSDsetpgrp
id|asmlinkage
r_int
id|irix_BSDsetpgrp
c_func
(paren
r_int
id|pid
comma
r_int
id|pgrp
)paren
(brace
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] BSDsetpgrp(%d, %d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|pid
comma
id|pgrp
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
op_logical_neg
id|pid
)paren
(brace
id|pid
op_assign
id|current-&gt;pid
suffix:semicolon
)brace
multiline_comment|/* Wheee, weird sysv thing... */
r_if
c_cond
(paren
(paren
id|pgrp
op_eq
l_int|0
)paren
op_logical_and
(paren
id|pid
op_eq
id|current-&gt;pid
)paren
)paren
id|error
op_assign
id|sys_setsid
c_func
(paren
)paren
suffix:semicolon
r_else
id|error
op_assign
id|sys_setpgid
c_func
(paren
id|pid
comma
id|pgrp
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_PROCGRPS
id|printk
c_func
(paren
l_string|&quot;error = %d&bslash;n&quot;
comma
id|error
)paren
suffix:semicolon
macro_line|#endif
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_systeminfo
id|asmlinkage
r_int
id|irix_systeminfo
c_func
(paren
r_int
id|cmd
comma
r_char
op_star
id|buf
comma
r_int
id|cnt
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_systeminfo(%d,%p,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|cmd
comma
id|buf
comma
id|cnt
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|struct|iuname
r_struct
id|iuname
(brace
DECL|member|sysname
DECL|member|nodename
DECL|member|release
r_char
id|sysname
(braket
l_int|257
)braket
comma
id|nodename
(braket
l_int|257
)braket
comma
id|release
(braket
l_int|257
)braket
suffix:semicolon
DECL|member|version
DECL|member|machine
r_char
id|version
(braket
l_int|257
)braket
comma
id|machine
(braket
l_int|257
)braket
suffix:semicolon
DECL|member|m_type
DECL|member|base_rel
r_char
id|m_type
(braket
l_int|257
)braket
comma
id|base_rel
(braket
l_int|257
)braket
suffix:semicolon
DECL|member|_unused0
DECL|member|_unused1
DECL|member|_unused2
r_char
id|_unused0
(braket
l_int|257
)braket
comma
id|_unused1
(braket
l_int|257
)braket
comma
id|_unused2
(braket
l_int|257
)braket
suffix:semicolon
DECL|member|_unused3
DECL|member|_unused4
DECL|member|_unused5
r_char
id|_unused3
(braket
l_int|257
)braket
comma
id|_unused4
(braket
l_int|257
)braket
comma
id|_unused5
(braket
l_int|257
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|function|irix_uname
id|asmlinkage
r_int
id|irix_uname
c_func
(paren
r_struct
id|iuname
op_star
id|buf
)paren
(brace
id|down_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|copy_to_user
c_func
(paren
id|system_utsname.sysname
comma
id|buf-&gt;sysname
comma
l_int|65
)paren
op_logical_or
id|copy_to_user
c_func
(paren
id|system_utsname.nodename
comma
id|buf-&gt;nodename
comma
l_int|65
)paren
op_logical_or
id|copy_to_user
c_func
(paren
id|system_utsname.release
comma
id|buf-&gt;release
comma
l_int|65
)paren
op_logical_or
id|copy_to_user
c_func
(paren
id|system_utsname.version
comma
id|buf-&gt;version
comma
l_int|65
)paren
op_logical_or
id|copy_to_user
c_func
(paren
id|system_utsname.machine
comma
id|buf-&gt;machine
comma
l_int|65
)paren
)paren
(brace
r_return
op_minus
id|EFAULT
suffix:semicolon
)brace
id|up_read
c_func
(paren
op_amp
id|uts_sem
)paren
suffix:semicolon
r_return
l_int|1
suffix:semicolon
)brace
DECL|macro|DEBUG_XSTAT
macro_line|#undef DEBUG_XSTAT
r_static
r_inline
id|u32
DECL|function|linux_to_irix_dev_t
id|linux_to_irix_dev_t
(paren
id|dev_t
id|t
)paren
(brace
r_return
id|MAJOR
(paren
id|t
)paren
op_lshift
l_int|18
op_or
id|MINOR
(paren
id|t
)paren
suffix:semicolon
)brace
DECL|function|irix_xstat32_xlate
r_static
r_inline
r_int
id|irix_xstat32_xlate
c_func
(paren
r_struct
id|stat
op_star
id|kb
comma
r_void
op_star
id|ubuf
)paren
(brace
r_struct
id|xstat32
(brace
id|u32
id|st_dev
comma
id|st_pad1
(braket
l_int|3
)braket
comma
id|st_ino
comma
id|st_mode
comma
id|st_nlink
comma
id|st_uid
comma
id|st_gid
suffix:semicolon
id|u32
id|st_rdev
comma
id|st_pad2
(braket
l_int|2
)braket
comma
id|st_size
comma
id|st_pad3
suffix:semicolon
id|u32
id|st_atime0
comma
id|st_atime1
suffix:semicolon
id|u32
id|st_mtime0
comma
id|st_mtime1
suffix:semicolon
id|u32
id|st_ctime0
comma
id|st_ctime1
suffix:semicolon
id|u32
id|st_blksize
comma
id|st_blocks
suffix:semicolon
r_char
id|st_fstype
(braket
l_int|16
)braket
suffix:semicolon
id|u32
id|st_pad4
(braket
l_int|8
)braket
suffix:semicolon
)brace
id|ub
suffix:semicolon
id|ub.st_dev
op_assign
id|linux_to_irix_dev_t
(paren
id|kb-&gt;st_dev
)paren
suffix:semicolon
id|ub.st_ino
op_assign
id|kb-&gt;st_ino
suffix:semicolon
id|ub.st_mode
op_assign
id|kb-&gt;st_mode
suffix:semicolon
id|ub.st_nlink
op_assign
id|kb-&gt;st_nlink
suffix:semicolon
id|ub.st_uid
op_assign
id|kb-&gt;st_uid
suffix:semicolon
id|ub.st_gid
op_assign
id|kb-&gt;st_gid
suffix:semicolon
id|ub.st_rdev
op_assign
id|linux_to_irix_dev_t
(paren
id|kb-&gt;st_rdev
)paren
suffix:semicolon
id|ub.st_size
op_assign
id|kb-&gt;st_size
suffix:semicolon
id|ub.st_atime0
op_assign
id|kb-&gt;st_atime
suffix:semicolon
id|ub.st_atime1
op_assign
l_int|0
suffix:semicolon
id|ub.st_mtime0
op_assign
id|kb-&gt;st_mtime
suffix:semicolon
id|ub.st_mtime1
op_assign
l_int|0
suffix:semicolon
id|ub.st_ctime0
op_assign
id|kb-&gt;st_ctime
suffix:semicolon
id|ub.st_ctime1
op_assign
l_int|0
suffix:semicolon
id|ub.st_blksize
op_assign
id|kb-&gt;st_blksize
suffix:semicolon
id|ub.st_blocks
op_assign
id|kb-&gt;st_blocks
suffix:semicolon
id|strcpy
(paren
id|ub.st_fstype
comma
l_string|&quot;efs&quot;
)paren
suffix:semicolon
r_return
id|copy_to_user
c_func
(paren
id|ubuf
comma
op_amp
id|ub
comma
r_sizeof
(paren
id|ub
)paren
)paren
ques
c_cond
op_minus
id|EFAULT
suffix:colon
l_int|0
suffix:semicolon
)brace
DECL|function|irix_xstat64_xlate
r_static
r_inline
r_void
id|irix_xstat64_xlate
c_func
(paren
r_struct
id|stat
op_star
id|sb
)paren
(brace
r_struct
id|xstat64
(brace
id|u32
id|st_dev
suffix:semicolon
id|s32
id|st_pad1
(braket
l_int|3
)braket
suffix:semicolon
r_int
r_int
r_int
id|st_ino
suffix:semicolon
id|u32
id|st_mode
suffix:semicolon
id|u32
id|st_nlink
suffix:semicolon
id|s32
id|st_uid
suffix:semicolon
id|s32
id|st_gid
suffix:semicolon
id|u32
id|st_rdev
suffix:semicolon
id|s32
id|st_pad2
(braket
l_int|2
)braket
suffix:semicolon
r_int
r_int
id|st_size
suffix:semicolon
id|s32
id|st_pad3
suffix:semicolon
r_struct
(brace
id|s32
id|tv_sec
comma
id|tv_nsec
suffix:semicolon
)brace
id|st_atime
comma
id|st_mtime
comma
id|st_ctime
suffix:semicolon
id|s32
id|st_blksize
suffix:semicolon
r_int
r_int
id|st_blocks
suffix:semicolon
r_char
id|st_fstype
(braket
l_int|16
)braket
suffix:semicolon
id|s32
id|st_pad4
(braket
l_int|8
)braket
suffix:semicolon
)brace
id|ks
suffix:semicolon
id|ks.st_dev
op_assign
id|linux_to_irix_dev_t
(paren
id|sb-&gt;st_dev
)paren
suffix:semicolon
id|ks.st_pad1
(braket
l_int|0
)braket
op_assign
id|ks.st_pad1
(braket
l_int|1
)braket
op_assign
id|ks.st_pad1
(braket
l_int|2
)braket
op_assign
l_int|0
suffix:semicolon
id|ks.st_ino
op_assign
(paren
r_int
r_int
r_int
)paren
id|sb-&gt;st_ino
suffix:semicolon
id|ks.st_mode
op_assign
(paren
id|u32
)paren
id|sb-&gt;st_mode
suffix:semicolon
id|ks.st_nlink
op_assign
(paren
id|u32
)paren
id|sb-&gt;st_nlink
suffix:semicolon
id|ks.st_uid
op_assign
(paren
id|s32
)paren
id|sb-&gt;st_uid
suffix:semicolon
id|ks.st_gid
op_assign
(paren
id|s32
)paren
id|sb-&gt;st_gid
suffix:semicolon
id|ks.st_rdev
op_assign
id|linux_to_irix_dev_t
(paren
id|sb-&gt;st_rdev
)paren
suffix:semicolon
id|ks.st_pad2
(braket
l_int|0
)braket
op_assign
id|ks.st_pad2
(braket
l_int|1
)braket
op_assign
l_int|0
suffix:semicolon
id|ks.st_size
op_assign
(paren
r_int
r_int
)paren
id|sb-&gt;st_size
suffix:semicolon
id|ks.st_pad3
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
id|ks.st_atime.tv_sec
op_assign
(paren
id|s32
)paren
id|sb-&gt;st_atime
suffix:semicolon
id|ks.st_atime.tv_nsec
op_assign
l_int|0
suffix:semicolon
id|ks.st_mtime.tv_sec
op_assign
(paren
id|s32
)paren
id|sb-&gt;st_atime
suffix:semicolon
id|ks.st_mtime.tv_nsec
op_assign
l_int|0
suffix:semicolon
id|ks.st_ctime.tv_sec
op_assign
(paren
id|s32
)paren
id|sb-&gt;st_atime
suffix:semicolon
id|ks.st_ctime.tv_nsec
op_assign
l_int|0
suffix:semicolon
id|ks.st_blksize
op_assign
(paren
id|s32
)paren
id|sb-&gt;st_blksize
suffix:semicolon
id|ks.st_blocks
op_assign
(paren
r_int
r_int
)paren
id|sb-&gt;st_blocks
suffix:semicolon
id|memcpy
c_func
(paren
op_amp
id|ks.st_fstype
(braket
l_int|0
)braket
comma
op_amp
id|sb-&gt;st_fstype
(braket
l_int|0
)braket
comma
l_int|16
)paren
suffix:semicolon
id|ks.st_pad4
(braket
l_int|0
)braket
op_assign
id|ks.st_pad4
(braket
l_int|1
)braket
op_assign
id|ks.st_pad4
(braket
l_int|2
)braket
op_assign
id|ks.st_pad4
(braket
l_int|3
)braket
op_assign
id|ks.st_pad4
(braket
l_int|4
)braket
op_assign
id|ks.st_pad4
(braket
l_int|5
)braket
op_assign
id|ks.st_pad4
(braket
l_int|6
)braket
op_assign
id|ks.st_pad4
(braket
l_int|7
)braket
op_assign
l_int|0
suffix:semicolon
multiline_comment|/* Now write it all back. */
id|copy_to_user
c_func
(paren
id|sb
comma
op_amp
id|ks
comma
r_sizeof
(paren
r_struct
id|xstat64
)paren
)paren
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_newstat
c_func
(paren
r_char
op_star
id|filename
comma
r_struct
id|stat
op_star
id|statbuf
)paren
suffix:semicolon
DECL|function|irix_xstat
id|asmlinkage
r_int
id|irix_xstat
c_func
(paren
r_int
id|version
comma
r_char
op_star
id|filename
comma
r_struct
id|stat
op_star
id|statbuf
)paren
(brace
r_int
id|retval
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_xstat(%d,%s,%p) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|version
comma
id|filename
comma
id|statbuf
)paren
suffix:semicolon
macro_line|#endif
r_switch
c_cond
(paren
id|version
)paren
(brace
r_case
l_int|2
suffix:colon
(brace
r_struct
id|stat
id|kb
suffix:semicolon
id|mm_segment_t
id|old_fs
suffix:semicolon
id|old_fs
op_assign
id|get_fs
c_func
(paren
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|get_ds
c_func
(paren
)paren
)paren
suffix:semicolon
id|retval
op_assign
id|sys_newstat
c_func
(paren
id|filename
comma
op_amp
id|kb
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|old_fs
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;retval[%d]&bslash;n&quot;
comma
id|retval
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|retval
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|retval
op_assign
id|irix_xstat32_xlate
c_func
(paren
op_amp
id|kb
comma
id|statbuf
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_case
l_int|3
suffix:colon
(brace
id|retval
op_assign
id|sys_newstat
c_func
(paren
id|filename
comma
id|statbuf
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;retval[%d]&bslash;n&quot;
comma
id|retval
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|retval
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|irix_xstat64_xlate
c_func
(paren
id|statbuf
)paren
suffix:semicolon
id|retval
op_assign
l_int|0
suffix:semicolon
r_break
suffix:semicolon
)brace
r_default
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_newlstat
c_func
(paren
r_char
op_star
id|filename
comma
r_struct
id|stat
op_star
id|statbuf
)paren
suffix:semicolon
DECL|function|irix_lxstat
id|asmlinkage
r_int
id|irix_lxstat
c_func
(paren
r_int
id|version
comma
r_char
op_star
id|filename
comma
r_struct
id|stat
op_star
id|statbuf
)paren
(brace
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_lxstat(%d,%s,%p) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|version
comma
id|filename
comma
id|statbuf
)paren
suffix:semicolon
macro_line|#endif
r_switch
c_cond
(paren
id|version
)paren
(brace
r_case
l_int|2
suffix:colon
(brace
r_struct
id|stat
id|kb
suffix:semicolon
id|mm_segment_t
id|old_fs
suffix:semicolon
id|old_fs
op_assign
id|get_fs
c_func
(paren
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|get_ds
c_func
(paren
)paren
)paren
suffix:semicolon
id|error
op_assign
id|sys_newlstat
c_func
(paren
id|filename
comma
op_amp
id|kb
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|old_fs
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;error[%d]&bslash;n&quot;
comma
id|error
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|irix_xstat32_xlate
c_func
(paren
op_amp
id|kb
comma
id|statbuf
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_case
l_int|3
suffix:colon
(brace
id|error
op_assign
id|sys_newlstat
c_func
(paren
id|filename
comma
id|statbuf
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;error[%d]&bslash;n&quot;
comma
id|error
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|irix_xstat64_xlate
c_func
(paren
id|statbuf
)paren
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_default
suffix:colon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_newfstat
c_func
(paren
r_int
r_int
id|fd
comma
r_struct
id|stat
op_star
id|statbuf
)paren
suffix:semicolon
DECL|function|irix_fxstat
id|asmlinkage
r_int
id|irix_fxstat
c_func
(paren
r_int
id|version
comma
r_int
id|fd
comma
r_struct
id|stat
op_star
id|statbuf
)paren
(brace
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_fxstat(%d,%d,%p) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|version
comma
id|fd
comma
id|statbuf
)paren
suffix:semicolon
macro_line|#endif
r_switch
c_cond
(paren
id|version
)paren
(brace
r_case
l_int|2
suffix:colon
(brace
r_struct
id|stat
id|kb
suffix:semicolon
id|mm_segment_t
id|old_fs
suffix:semicolon
id|old_fs
op_assign
id|get_fs
c_func
(paren
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|get_ds
c_func
(paren
)paren
)paren
suffix:semicolon
id|error
op_assign
id|sys_newfstat
c_func
(paren
id|fd
comma
op_amp
id|kb
)paren
suffix:semicolon
id|set_fs
c_func
(paren
id|old_fs
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;error[%d]&bslash;n&quot;
comma
id|error
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|irix_xstat32_xlate
c_func
(paren
op_amp
id|kb
comma
id|statbuf
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_case
l_int|3
suffix:colon
(brace
id|error
op_assign
id|sys_newfstat
c_func
(paren
id|fd
comma
id|statbuf
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_XSTAT
id|printk
c_func
(paren
l_string|&quot;error[%d]&bslash;n&quot;
comma
id|error
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|irix_xstat64_xlate
c_func
(paren
id|statbuf
)paren
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
r_default
suffix:colon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_mknod
c_func
(paren
r_const
r_char
op_star
id|filename
comma
r_int
id|mode
comma
id|dev_t
id|dev
)paren
suffix:semicolon
DECL|function|irix_xmknod
id|asmlinkage
r_int
id|irix_xmknod
c_func
(paren
r_int
id|ver
comma
r_char
op_star
id|filename
comma
r_int
id|mode
comma
id|dev_t
id|dev
)paren
(brace
r_int
id|retval
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_xmknod(%d,%s,%x,%x)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|ver
comma
id|filename
comma
id|mode
comma
(paren
r_int
)paren
id|dev
)paren
suffix:semicolon
r_switch
c_cond
(paren
id|ver
)paren
(brace
r_case
l_int|2
suffix:colon
id|retval
op_assign
id|sys_mknod
c_func
(paren
id|filename
comma
id|mode
comma
id|dev
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_break
suffix:semicolon
)brace
suffix:semicolon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_swapctl
id|asmlinkage
r_int
id|irix_swapctl
c_func
(paren
r_int
id|cmd
comma
r_char
op_star
id|arg
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_swapctl(%d,%p)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|cmd
comma
id|arg
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|struct|irix_statvfs
r_struct
id|irix_statvfs
(brace
DECL|member|f_bsize
DECL|member|f_frsize
DECL|member|f_blocks
id|u32
id|f_bsize
suffix:semicolon
id|u32
id|f_frsize
suffix:semicolon
id|u32
id|f_blocks
suffix:semicolon
DECL|member|f_bfree
DECL|member|f_bavail
DECL|member|f_files
DECL|member|f_ffree
DECL|member|f_favail
id|u32
id|f_bfree
suffix:semicolon
id|u32
id|f_bavail
suffix:semicolon
id|u32
id|f_files
suffix:semicolon
id|u32
id|f_ffree
suffix:semicolon
id|u32
id|f_favail
suffix:semicolon
DECL|member|f_fsid
DECL|member|f_basetype
id|u32
id|f_fsid
suffix:semicolon
r_char
id|f_basetype
(braket
l_int|16
)braket
suffix:semicolon
DECL|member|f_flag
DECL|member|f_namemax
id|u32
id|f_flag
suffix:semicolon
id|u32
id|f_namemax
suffix:semicolon
DECL|member|f_fstr
DECL|member|f_filler
r_char
id|f_fstr
(braket
l_int|32
)braket
suffix:semicolon
id|u32
id|f_filler
(braket
l_int|16
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|function|irix_statvfs
id|asmlinkage
r_int
id|irix_statvfs
c_func
(paren
r_char
op_star
id|fname
comma
r_struct
id|irix_statvfs
op_star
id|buf
)paren
(brace
r_struct
id|nameidata
id|nd
suffix:semicolon
r_struct
id|statfs
id|kbuf
suffix:semicolon
r_int
id|error
comma
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_statvfs(%s,%p)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fname
comma
id|buf
)paren
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
r_sizeof
(paren
r_struct
id|irix_statvfs
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
id|user_path_walk
c_func
(paren
id|fname
comma
op_amp
id|nd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
id|vfs_statfs
c_func
(paren
id|nd.dentry-&gt;d_inode-&gt;i_sb
comma
op_amp
id|kbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|dput_and_out
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bsize
comma
op_amp
id|buf-&gt;f_bsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_frsize
comma
op_amp
id|buf-&gt;f_frsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_blocks
comma
op_amp
id|buf-&gt;f_blocks
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bfree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bavail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
id|__put_user
c_func
(paren
id|kbuf.f_files
comma
op_amp
id|buf-&gt;f_files
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_ffree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_favail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
macro_line|#ifdef __MIPSEB__
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|1
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#else
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|0
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_basetype
(braket
id|i
)braket
)paren
suffix:semicolon
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_flag
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_namelen
comma
op_amp
id|buf-&gt;f_namemax
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_fstr
(braket
id|i
)braket
)paren
suffix:semicolon
id|error
op_assign
l_int|0
suffix:semicolon
id|dput_and_out
suffix:colon
id|path_release
c_func
(paren
op_amp
id|nd
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_fstatvfs
id|asmlinkage
r_int
id|irix_fstatvfs
c_func
(paren
r_int
id|fd
comma
r_struct
id|irix_statvfs
op_star
id|buf
)paren
(brace
r_struct
id|statfs
id|kbuf
suffix:semicolon
r_struct
id|file
op_star
id|file
suffix:semicolon
r_int
id|error
comma
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_fstatvfs(%d,%p)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|buf
)paren
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
r_sizeof
(paren
r_struct
id|irix_statvfs
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
(brace
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|vfs_statfs
c_func
(paren
id|file-&gt;f_dentry-&gt;d_inode-&gt;i_sb
comma
op_amp
id|kbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out_f
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bsize
comma
op_amp
id|buf-&gt;f_bsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_frsize
comma
op_amp
id|buf-&gt;f_frsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_blocks
comma
op_amp
id|buf-&gt;f_blocks
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bfree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bavail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
id|__put_user
c_func
(paren
id|kbuf.f_files
comma
op_amp
id|buf-&gt;f_files
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_ffree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_favail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
macro_line|#ifdef __MIPSEB__
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|1
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#else
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|0
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_basetype
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_flag
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_namelen
comma
op_amp
id|buf-&gt;f_namemax
)paren
suffix:semicolon
id|__clear_user
c_func
(paren
op_amp
id|buf-&gt;f_fstr
comma
r_sizeof
(paren
id|buf-&gt;f_fstr
)paren
)paren
suffix:semicolon
id|out_f
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_priocntl
id|asmlinkage
r_int
id|irix_priocntl
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_priocntl()&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_sigqueue
id|asmlinkage
r_int
id|irix_sigqueue
c_func
(paren
r_int
id|pid
comma
r_int
id|sig
comma
r_int
id|code
comma
r_int
id|val
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_sigqueue(%d,%d,%d,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|pid
comma
id|sig
comma
id|code
comma
id|val
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
id|sys_truncate
c_func
(paren
r_const
r_char
op_star
id|path
comma
r_int
r_int
id|length
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_int
id|sys_ftruncate
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|length
)paren
suffix:semicolon
DECL|function|irix_truncate64
id|asmlinkage
r_int
id|irix_truncate64
c_func
(paren
r_char
op_star
id|name
comma
r_int
id|pad
comma
r_int
id|size1
comma
r_int
id|size2
)paren
(brace
r_int
id|retval
suffix:semicolon
r_if
c_cond
(paren
id|size1
)paren
(brace
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|retval
op_assign
id|sys_truncate
c_func
(paren
id|name
comma
id|size2
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_ftruncate64
id|asmlinkage
r_int
id|irix_ftruncate64
c_func
(paren
r_int
id|fd
comma
r_int
id|pad
comma
r_int
id|size1
comma
r_int
id|size2
)paren
(brace
r_int
id|retval
suffix:semicolon
r_if
c_cond
(paren
id|size1
)paren
(brace
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|retval
op_assign
id|sys_ftruncate
c_func
(paren
id|fd
comma
id|size2
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
r_extern
id|asmlinkage
r_int
r_int
id|sys_mmap
c_func
(paren
r_int
r_int
id|addr
comma
r_int
id|len
comma
r_int
id|prot
comma
r_int
id|flags
comma
r_int
id|fd
comma
id|off_t
id|offset
)paren
suffix:semicolon
DECL|function|irix_mmap64
id|asmlinkage
r_int
id|irix_mmap64
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
id|len
comma
id|prot
comma
id|flags
comma
id|fd
comma
id|off1
comma
id|off2
comma
id|error
comma
id|base
op_assign
l_int|0
suffix:semicolon
r_int
r_int
id|addr
comma
id|pgoff
comma
op_star
id|sp
suffix:semicolon
r_struct
id|file
op_star
id|file
op_assign
l_int|NULL
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;regs
(braket
l_int|2
)braket
op_eq
l_int|1000
)paren
id|base
op_assign
l_int|1
suffix:semicolon
id|sp
op_assign
(paren
r_int
r_int
op_star
)paren
(paren
id|regs-&gt;regs
(braket
l_int|29
)braket
op_plus
l_int|16
)paren
suffix:semicolon
id|addr
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|4
)braket
suffix:semicolon
id|len
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|5
)braket
suffix:semicolon
id|prot
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|6
)braket
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|base
)paren
(brace
id|flags
op_assign
id|regs-&gt;regs
(braket
id|base
op_plus
l_int|7
)braket
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
id|sp
comma
(paren
l_int|4
op_star
r_sizeof
(paren
r_int
r_int
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|fd
op_assign
id|sp
(braket
l_int|0
)braket
suffix:semicolon
id|__get_user
c_func
(paren
id|off1
comma
op_amp
id|sp
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|__get_user
c_func
(paren
id|off2
comma
op_amp
id|sp
(braket
l_int|2
)braket
)paren
suffix:semicolon
)brace
r_else
(brace
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_READ
comma
id|sp
comma
(paren
l_int|5
op_star
r_sizeof
(paren
r_int
r_int
)paren
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|__get_user
c_func
(paren
id|flags
comma
op_amp
id|sp
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|__get_user
c_func
(paren
id|fd
comma
op_amp
id|sp
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|__get_user
c_func
(paren
id|off1
comma
op_amp
id|sp
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|__get_user
c_func
(paren
id|off2
comma
op_amp
id|sp
(braket
l_int|3
)braket
)paren
suffix:semicolon
)brace
r_if
c_cond
(paren
id|off1
op_amp
id|PAGE_MASK
)paren
(brace
id|error
op_assign
op_minus
id|EOVERFLOW
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|pgoff
op_assign
(paren
id|off1
op_lshift
(paren
l_int|32
op_minus
id|PAGE_SHIFT
)paren
)paren
op_or
(paren
id|off2
op_rshift
id|PAGE_SHIFT
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|flags
op_amp
id|MAP_ANONYMOUS
)paren
)paren
(brace
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
(brace
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
multiline_comment|/* Ok, bad taste hack follows, try to think in something else&n;&t;&t;   when reading this */
r_if
c_cond
(paren
id|flags
op_amp
id|IRIX_MAP_AUTOGROW
)paren
(brace
r_int
r_int
id|old_pos
suffix:semicolon
r_int
id|max_size
op_assign
id|off2
op_plus
id|len
suffix:semicolon
r_if
c_cond
(paren
id|max_size
OG
id|file-&gt;f_dentry-&gt;d_inode-&gt;i_size
)paren
(brace
id|old_pos
op_assign
id|sys_lseek
(paren
id|fd
comma
id|max_size
op_minus
l_int|1
comma
l_int|0
)paren
suffix:semicolon
id|sys_write
(paren
id|fd
comma
l_string|&quot;&quot;
comma
l_int|1
)paren
suffix:semicolon
id|sys_lseek
(paren
id|fd
comma
id|old_pos
comma
l_int|0
)paren
suffix:semicolon
)brace
)brace
)brace
id|flags
op_and_assign
op_complement
(paren
id|MAP_EXECUTABLE
op_or
id|MAP_DENYWRITE
)paren
suffix:semicolon
id|down
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
id|error
op_assign
id|do_mmap_pgoff
c_func
(paren
id|file
comma
id|addr
comma
id|len
comma
id|prot
comma
id|flags
comma
id|pgoff
)paren
suffix:semicolon
id|up
c_func
(paren
op_amp
id|current-&gt;mm-&gt;mmap_sem
)paren
suffix:semicolon
r_if
c_cond
(paren
id|file
)paren
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_dmi
id|asmlinkage
r_int
id|irix_dmi
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_dmi()&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_pread
id|asmlinkage
r_int
id|irix_pread
c_func
(paren
r_int
id|fd
comma
r_char
op_star
id|buf
comma
r_int
id|cnt
comma
r_int
id|off64
comma
r_int
id|off1
comma
r_int
id|off2
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_pread(%d,%p,%d,%d,%d,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|buf
comma
id|cnt
comma
id|off64
comma
id|off1
comma
id|off2
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_pwrite
id|asmlinkage
r_int
id|irix_pwrite
c_func
(paren
r_int
id|fd
comma
r_char
op_star
id|buf
comma
r_int
id|cnt
comma
r_int
id|off64
comma
r_int
id|off1
comma
r_int
id|off2
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_pwrite(%d,%p,%d,%d,%d,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|buf
comma
id|cnt
comma
id|off64
comma
id|off1
comma
id|off2
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|function|irix_sgifastpath
id|asmlinkage
r_int
id|irix_sgifastpath
c_func
(paren
r_int
id|cmd
comma
r_int
r_int
id|arg0
comma
r_int
r_int
id|arg1
comma
r_int
r_int
id|arg2
comma
r_int
r_int
id|arg3
comma
r_int
r_int
id|arg4
comma
r_int
r_int
id|arg5
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_fastpath(%d,%08lx,%08lx,%08lx,%08lx,&quot;
l_string|&quot;%08lx,%08lx)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|cmd
comma
id|arg0
comma
id|arg1
comma
id|arg2
comma
id|arg3
comma
id|arg4
comma
id|arg5
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|struct|irix_statvfs64
r_struct
id|irix_statvfs64
(brace
DECL|member|f_bsize
DECL|member|f_frsize
id|u32
id|f_bsize
suffix:semicolon
id|u32
id|f_frsize
suffix:semicolon
DECL|member|f_blocks
DECL|member|f_bfree
DECL|member|f_bavail
id|u64
id|f_blocks
suffix:semicolon
id|u64
id|f_bfree
suffix:semicolon
id|u64
id|f_bavail
suffix:semicolon
DECL|member|f_files
DECL|member|f_ffree
DECL|member|f_favail
id|u64
id|f_files
suffix:semicolon
id|u64
id|f_ffree
suffix:semicolon
id|u64
id|f_favail
suffix:semicolon
DECL|member|f_fsid
id|u32
id|f_fsid
suffix:semicolon
DECL|member|f_basetype
r_char
id|f_basetype
(braket
l_int|16
)braket
suffix:semicolon
DECL|member|f_flag
DECL|member|f_namemax
id|u32
id|f_flag
suffix:semicolon
id|u32
id|f_namemax
suffix:semicolon
DECL|member|f_fstr
r_char
id|f_fstr
(braket
l_int|32
)braket
suffix:semicolon
DECL|member|f_filler
id|u32
id|f_filler
(braket
l_int|16
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|function|irix_statvfs64
id|asmlinkage
r_int
id|irix_statvfs64
c_func
(paren
r_char
op_star
id|fname
comma
r_struct
id|irix_statvfs64
op_star
id|buf
)paren
(brace
r_struct
id|nameidata
id|nd
suffix:semicolon
r_struct
id|statfs
id|kbuf
suffix:semicolon
r_int
id|error
comma
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_statvfs(%s,%p)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fname
comma
id|buf
)paren
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
r_sizeof
(paren
r_struct
id|irix_statvfs
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
(brace
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|user_path_walk
c_func
(paren
id|fname
comma
op_amp
id|nd
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
id|vfs_statfs
c_func
(paren
id|nd.dentry-&gt;d_inode-&gt;i_sb
comma
op_amp
id|kbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|dput_and_out
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bsize
comma
op_amp
id|buf-&gt;f_bsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_frsize
comma
op_amp
id|buf-&gt;f_frsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_blocks
comma
op_amp
id|buf-&gt;f_blocks
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bfree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bavail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
id|__put_user
c_func
(paren
id|kbuf.f_files
comma
op_amp
id|buf-&gt;f_files
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_ffree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_favail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
macro_line|#ifdef __MIPSEB__
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|1
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#else
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|0
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_basetype
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_flag
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_namelen
comma
op_amp
id|buf-&gt;f_namemax
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|32
suffix:semicolon
id|i
op_increment
)paren
(brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_fstr
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|error
op_assign
l_int|0
suffix:semicolon
id|dput_and_out
suffix:colon
id|path_release
c_func
(paren
op_amp
id|nd
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_fstatvfs64
id|asmlinkage
r_int
id|irix_fstatvfs64
c_func
(paren
r_int
id|fd
comma
r_struct
id|irix_statvfs
op_star
id|buf
)paren
(brace
r_struct
id|statfs
id|kbuf
suffix:semicolon
r_struct
id|file
op_star
id|file
suffix:semicolon
r_int
id|error
comma
id|i
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_fstatvfs(%d,%p)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|buf
)paren
suffix:semicolon
id|error
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|buf
comma
r_sizeof
(paren
r_struct
id|irix_statvfs
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
(brace
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|error
op_assign
id|vfs_statfs
c_func
(paren
id|file-&gt;f_dentry-&gt;d_inode-&gt;i_sb
comma
op_amp
id|kbuf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
)paren
r_goto
id|out_f
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bsize
comma
op_amp
id|buf-&gt;f_bsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_frsize
comma
op_amp
id|buf-&gt;f_frsize
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_blocks
comma
op_amp
id|buf-&gt;f_blocks
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bfree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_bfree
comma
op_amp
id|buf-&gt;f_bavail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
id|__put_user
c_func
(paren
id|kbuf.f_files
comma
op_amp
id|buf-&gt;f_files
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_ffree
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_ffree
comma
op_amp
id|buf-&gt;f_favail
)paren
suffix:semicolon
multiline_comment|/* XXX hackety hack... */
macro_line|#ifdef __MIPSEB__
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|1
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#else
id|__put_user
c_func
(paren
id|kbuf.f_fsid.val
(braket
l_int|0
)braket
comma
op_amp
id|buf-&gt;f_fsid
)paren
suffix:semicolon
macro_line|#endif
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|16
suffix:semicolon
id|i
op_increment
)paren
(brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_basetype
(braket
id|i
)braket
)paren
suffix:semicolon
)brace
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|buf-&gt;f_flag
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|kbuf.f_namelen
comma
op_amp
id|buf-&gt;f_namemax
)paren
suffix:semicolon
id|__clear_user
c_func
(paren
id|buf-&gt;f_fstr
comma
r_sizeof
(paren
id|buf-&gt;f_fstr
(braket
id|i
)braket
)paren
)paren
suffix:semicolon
id|out_f
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_getmountid
id|asmlinkage
r_int
id|irix_getmountid
c_func
(paren
r_char
op_star
id|fname
comma
r_int
r_int
op_star
id|midbuf
)paren
(brace
r_int
id|err
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_getmountid(%s, %p)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fname
comma
id|midbuf
)paren
suffix:semicolon
id|err
op_assign
id|verify_area
c_func
(paren
id|VERIFY_WRITE
comma
id|midbuf
comma
(paren
r_sizeof
(paren
r_int
r_int
)paren
op_star
l_int|4
)paren
)paren
suffix:semicolon
r_if
c_cond
(paren
id|err
)paren
r_return
id|err
suffix:semicolon
multiline_comment|/*&n;&t; * The idea with this system call is that when trying to determine&n;&t; * &squot;pwd&squot; and it&squot;s a toss-up for some reason, userland can use the&n;&t; * fsid of the filesystem to try and make the right decision, but&n;&t; * we don&squot;t have this so for now. XXX&n;&t; */
id|err
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|midbuf
(braket
l_int|0
)braket
)paren
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|midbuf
(braket
l_int|1
)braket
)paren
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|midbuf
(braket
l_int|2
)braket
)paren
suffix:semicolon
id|err
op_or_assign
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|midbuf
(braket
l_int|3
)braket
)paren
suffix:semicolon
r_return
id|err
suffix:semicolon
)brace
DECL|function|irix_nsproc
id|asmlinkage
r_int
id|irix_nsproc
c_func
(paren
r_int
r_int
id|entry
comma
r_int
r_int
id|mask
comma
r_int
r_int
id|arg
comma
r_int
r_int
id|sp
comma
r_int
id|slen
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;[%s:%d] Wheee.. irix_nsproc(%08lx,%08lx,%08lx,%08lx,%d)&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|entry
comma
id|mask
comma
id|arg
comma
id|sp
comma
id|slen
)paren
suffix:semicolon
r_return
op_minus
id|EINVAL
suffix:semicolon
)brace
DECL|macro|DEBUG_GETDENTS
macro_line|#undef DEBUG_GETDENTS
DECL|struct|irix_dirent32
r_struct
id|irix_dirent32
(brace
DECL|member|d_ino
id|u32
id|d_ino
suffix:semicolon
DECL|member|d_off
id|u32
id|d_off
suffix:semicolon
DECL|member|d_reclen
r_int
r_int
id|d_reclen
suffix:semicolon
DECL|member|d_name
r_char
id|d_name
(braket
l_int|1
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|irix_dirent32_callback
r_struct
id|irix_dirent32_callback
(brace
DECL|member|current_dir
r_struct
id|irix_dirent32
op_star
id|current_dir
suffix:semicolon
DECL|member|previous
r_struct
id|irix_dirent32
op_star
id|previous
suffix:semicolon
DECL|member|count
r_int
id|count
suffix:semicolon
DECL|member|error
r_int
id|error
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|NAME_OFFSET32
mdefine_line|#define NAME_OFFSET32(de) ((int) ((de)-&gt;d_name - (char *) (de)))
DECL|macro|ROUND_UP32
mdefine_line|#define ROUND_UP32(x) (((x)+sizeof(u32)-1) &amp; ~(sizeof(u32)-1))
DECL|function|irix_filldir32
r_static
r_int
id|irix_filldir32
c_func
(paren
r_void
op_star
id|__buf
comma
r_const
r_char
op_star
id|name
comma
r_int
id|namlen
comma
id|off_t
id|offset
comma
id|ino_t
id|ino
comma
r_int
r_int
id|d_type
)paren
(brace
r_struct
id|irix_dirent32
op_star
id|dirent
suffix:semicolon
r_struct
id|irix_dirent32_callback
op_star
id|buf
op_assign
(paren
r_struct
id|irix_dirent32_callback
op_star
)paren
id|__buf
suffix:semicolon
r_int
r_int
id|reclen
op_assign
id|ROUND_UP32
c_func
(paren
id|NAME_OFFSET32
c_func
(paren
id|dirent
)paren
op_plus
id|namlen
op_plus
l_int|1
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;&bslash;nirix_filldir32[reclen&lt;%d&gt;namlen&lt;%d&gt;count&lt;%d&gt;]&quot;
comma
id|reclen
comma
id|namlen
comma
id|buf-&gt;count
)paren
suffix:semicolon
macro_line|#endif
id|buf-&gt;error
op_assign
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* only used if we fail.. */
r_if
c_cond
(paren
id|reclen
OG
id|buf-&gt;count
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|dirent
op_assign
id|buf-&gt;previous
suffix:semicolon
r_if
c_cond
(paren
id|dirent
)paren
id|__put_user
c_func
(paren
id|offset
comma
op_amp
id|dirent-&gt;d_off
)paren
suffix:semicolon
id|dirent
op_assign
id|buf-&gt;current_dir
suffix:semicolon
id|buf-&gt;previous
op_assign
id|dirent
suffix:semicolon
id|__put_user
c_func
(paren
id|ino
comma
op_amp
id|dirent-&gt;d_ino
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|reclen
comma
op_amp
id|dirent-&gt;d_reclen
)paren
suffix:semicolon
id|copy_to_user
c_func
(paren
id|dirent-&gt;d_name
comma
id|name
comma
id|namlen
)paren
suffix:semicolon
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|dirent-&gt;d_name
(braket
id|namlen
)braket
)paren
suffix:semicolon
(paren
(paren
r_char
op_star
)paren
id|dirent
)paren
op_add_assign
id|reclen
suffix:semicolon
id|buf-&gt;current_dir
op_assign
id|dirent
suffix:semicolon
id|buf-&gt;count
op_sub_assign
id|reclen
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|irix_ngetdents
id|asmlinkage
r_int
id|irix_ngetdents
c_func
(paren
r_int
r_int
id|fd
comma
r_void
op_star
id|dirent
comma
r_int
r_int
id|count
comma
r_int
op_star
id|eob
)paren
(brace
r_struct
id|file
op_star
id|file
suffix:semicolon
r_struct
id|irix_dirent32
op_star
id|lastdirent
suffix:semicolon
r_struct
id|irix_dirent32_callback
id|buf
suffix:semicolon
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] ngetdents(%d, %p, %d, %p) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|dirent
comma
id|count
comma
id|eob
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|file
)paren
r_goto
id|out
suffix:semicolon
id|buf.current_dir
op_assign
(paren
r_struct
id|irix_dirent32
op_star
)paren
id|dirent
suffix:semicolon
id|buf.previous
op_assign
l_int|NULL
suffix:semicolon
id|buf.count
op_assign
id|count
suffix:semicolon
id|buf.error
op_assign
l_int|0
suffix:semicolon
id|error
op_assign
id|vfs_readdir
c_func
(paren
id|file
comma
id|irix_filldir32
comma
op_amp
id|buf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
OL
l_int|0
)paren
r_goto
id|out_putf
suffix:semicolon
id|error
op_assign
id|buf.error
suffix:semicolon
id|lastdirent
op_assign
id|buf.previous
suffix:semicolon
r_if
c_cond
(paren
id|lastdirent
)paren
(brace
id|put_user
c_func
(paren
id|file-&gt;f_pos
comma
op_amp
id|lastdirent-&gt;d_off
)paren
suffix:semicolon
id|error
op_assign
id|count
op_minus
id|buf.count
suffix:semicolon
)brace
r_if
c_cond
(paren
id|put_user
c_func
(paren
l_int|0
comma
id|eob
)paren
OL
l_int|0
)paren
(brace
id|error
op_assign
id|EFAULT
suffix:semicolon
r_goto
id|out_putf
suffix:semicolon
)brace
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;eob=%d returning %d&bslash;n&quot;
comma
op_star
id|eob
comma
id|count
op_minus
id|buf.count
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
id|count
op_minus
id|buf.count
suffix:semicolon
id|out_putf
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|struct|irix_dirent64
r_struct
id|irix_dirent64
(brace
DECL|member|d_ino
id|u64
id|d_ino
suffix:semicolon
DECL|member|d_off
id|u64
id|d_off
suffix:semicolon
DECL|member|d_reclen
r_int
r_int
id|d_reclen
suffix:semicolon
DECL|member|d_name
r_char
id|d_name
(braket
l_int|1
)braket
suffix:semicolon
)brace
suffix:semicolon
DECL|struct|irix_dirent64_callback
r_struct
id|irix_dirent64_callback
(brace
DECL|member|curr
r_struct
id|irix_dirent64
op_star
id|curr
suffix:semicolon
DECL|member|previous
r_struct
id|irix_dirent64
op_star
id|previous
suffix:semicolon
DECL|member|count
r_int
id|count
suffix:semicolon
DECL|member|error
r_int
id|error
suffix:semicolon
)brace
suffix:semicolon
DECL|macro|NAME_OFFSET64
mdefine_line|#define NAME_OFFSET64(de) ((int) ((de)-&gt;d_name - (char *) (de)))
DECL|macro|ROUND_UP64
mdefine_line|#define ROUND_UP64(x) (((x)+sizeof(u64)-1) &amp; ~(sizeof(u64)-1))
DECL|function|irix_filldir64
r_static
r_int
id|irix_filldir64
c_func
(paren
r_void
op_star
id|__buf
comma
r_const
r_char
op_star
id|name
comma
r_int
id|namlen
comma
id|off_t
id|offset
comma
id|ino_t
id|ino
comma
r_int
r_int
id|d_type
)paren
(brace
r_struct
id|irix_dirent64
op_star
id|dirent
suffix:semicolon
r_struct
id|irix_dirent64_callback
op_star
id|buf
op_assign
(paren
r_struct
id|irix_dirent64_callback
op_star
)paren
id|__buf
suffix:semicolon
r_int
r_int
id|reclen
op_assign
id|ROUND_UP64
c_func
(paren
id|NAME_OFFSET64
c_func
(paren
id|dirent
)paren
op_plus
id|namlen
op_plus
l_int|1
)paren
suffix:semicolon
id|buf-&gt;error
op_assign
op_minus
id|EINVAL
suffix:semicolon
multiline_comment|/* only used if we fail.. */
r_if
c_cond
(paren
id|reclen
OG
id|buf-&gt;count
)paren
r_return
op_minus
id|EINVAL
suffix:semicolon
id|dirent
op_assign
id|buf-&gt;previous
suffix:semicolon
r_if
c_cond
(paren
id|dirent
)paren
id|__put_user
c_func
(paren
id|offset
comma
op_amp
id|dirent-&gt;d_off
)paren
suffix:semicolon
id|dirent
op_assign
id|buf-&gt;curr
suffix:semicolon
id|buf-&gt;previous
op_assign
id|dirent
suffix:semicolon
id|__put_user
c_func
(paren
id|ino
comma
op_amp
id|dirent-&gt;d_ino
)paren
suffix:semicolon
id|__put_user
c_func
(paren
id|reclen
comma
op_amp
id|dirent-&gt;d_reclen
)paren
suffix:semicolon
id|__copy_to_user
c_func
(paren
id|dirent-&gt;d_name
comma
id|name
comma
id|namlen
)paren
suffix:semicolon
id|__put_user
c_func
(paren
l_int|0
comma
op_amp
id|dirent-&gt;d_name
(braket
id|namlen
)braket
)paren
suffix:semicolon
(paren
(paren
r_char
op_star
)paren
id|dirent
)paren
op_add_assign
id|reclen
suffix:semicolon
id|buf-&gt;curr
op_assign
id|dirent
suffix:semicolon
id|buf-&gt;count
op_sub_assign
id|reclen
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
DECL|function|irix_getdents64
id|asmlinkage
r_int
id|irix_getdents64
c_func
(paren
r_int
id|fd
comma
r_void
op_star
id|dirent
comma
r_int
id|cnt
)paren
(brace
r_struct
id|file
op_star
id|file
suffix:semicolon
r_struct
id|irix_dirent64
op_star
id|lastdirent
suffix:semicolon
r_struct
id|irix_dirent64_callback
id|buf
suffix:semicolon
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] getdents64(%d, %p, %d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|dirent
comma
id|cnt
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|access_ok
c_func
(paren
id|VERIFY_WRITE
comma
id|dirent
comma
id|cnt
)paren
)paren
r_goto
id|out_f
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|cnt
OL
(paren
r_sizeof
(paren
r_struct
id|irix_dirent64
)paren
op_plus
l_int|255
)paren
)paren
r_goto
id|out_f
suffix:semicolon
id|buf.curr
op_assign
(paren
r_struct
id|irix_dirent64
op_star
)paren
id|dirent
suffix:semicolon
id|buf.previous
op_assign
l_int|NULL
suffix:semicolon
id|buf.count
op_assign
id|cnt
suffix:semicolon
id|buf.error
op_assign
l_int|0
suffix:semicolon
id|error
op_assign
id|vfs_readdir
c_func
(paren
id|file
comma
id|irix_filldir64
comma
op_amp
id|buf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
OL
l_int|0
)paren
r_goto
id|out_f
suffix:semicolon
id|lastdirent
op_assign
id|buf.previous
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|lastdirent
)paren
(brace
id|error
op_assign
id|buf.error
suffix:semicolon
r_goto
id|out_f
suffix:semicolon
)brace
id|lastdirent-&gt;d_off
op_assign
(paren
id|u64
)paren
id|file-&gt;f_pos
suffix:semicolon
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;returning %d&bslash;n&quot;
comma
id|cnt
op_minus
id|buf.count
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
id|cnt
op_minus
id|buf.count
suffix:semicolon
id|out_f
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_ngetdents64
id|asmlinkage
r_int
id|irix_ngetdents64
c_func
(paren
r_int
id|fd
comma
r_void
op_star
id|dirent
comma
r_int
id|cnt
comma
r_int
op_star
id|eob
)paren
(brace
r_struct
id|file
op_star
id|file
suffix:semicolon
r_struct
id|irix_dirent64
op_star
id|lastdirent
suffix:semicolon
r_struct
id|irix_dirent64_callback
id|buf
suffix:semicolon
r_int
id|error
suffix:semicolon
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;[%s:%d] ngetdents64(%d, %p, %d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|dirent
comma
id|cnt
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
op_minus
id|EBADF
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
(paren
id|file
op_assign
id|fget
c_func
(paren
id|fd
)paren
)paren
)paren
r_goto
id|out
suffix:semicolon
id|error
op_assign
op_minus
id|EFAULT
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|access_ok
c_func
(paren
id|VERIFY_WRITE
comma
id|dirent
comma
id|cnt
)paren
op_logical_or
op_logical_neg
id|access_ok
c_func
(paren
id|VERIFY_WRITE
comma
id|eob
comma
r_sizeof
(paren
op_star
id|eob
)paren
)paren
)paren
r_goto
id|out_f
suffix:semicolon
id|error
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_if
c_cond
(paren
id|cnt
OL
(paren
r_sizeof
(paren
r_struct
id|irix_dirent64
)paren
op_plus
l_int|255
)paren
)paren
r_goto
id|out_f
suffix:semicolon
op_star
id|eob
op_assign
l_int|0
suffix:semicolon
id|buf.curr
op_assign
(paren
r_struct
id|irix_dirent64
op_star
)paren
id|dirent
suffix:semicolon
id|buf.previous
op_assign
l_int|NULL
suffix:semicolon
id|buf.count
op_assign
id|cnt
suffix:semicolon
id|buf.error
op_assign
l_int|0
suffix:semicolon
id|error
op_assign
id|vfs_readdir
c_func
(paren
id|file
comma
id|irix_filldir64
comma
op_amp
id|buf
)paren
suffix:semicolon
r_if
c_cond
(paren
id|error
OL
l_int|0
)paren
r_goto
id|out_f
suffix:semicolon
id|lastdirent
op_assign
id|buf.previous
suffix:semicolon
r_if
c_cond
(paren
op_logical_neg
id|lastdirent
)paren
(brace
id|error
op_assign
id|buf.error
suffix:semicolon
r_goto
id|out_f
suffix:semicolon
)brace
id|lastdirent-&gt;d_off
op_assign
(paren
id|u64
)paren
id|file-&gt;f_pos
suffix:semicolon
macro_line|#ifdef DEBUG_GETDENTS
id|printk
c_func
(paren
l_string|&quot;eob=%d returning %d&bslash;n&quot;
comma
op_star
id|eob
comma
id|cnt
op_minus
id|buf.count
)paren
suffix:semicolon
macro_line|#endif
id|error
op_assign
id|cnt
op_minus
id|buf.count
suffix:semicolon
id|out_f
suffix:colon
id|fput
c_func
(paren
id|file
)paren
suffix:semicolon
id|out
suffix:colon
r_return
id|error
suffix:semicolon
)brace
DECL|function|irix_uadmin
id|asmlinkage
r_int
id|irix_uadmin
c_func
(paren
r_int
r_int
id|op
comma
r_int
r_int
id|func
comma
r_int
r_int
id|arg
)paren
(brace
r_int
id|retval
suffix:semicolon
r_switch
c_cond
(paren
id|op
)paren
(brace
r_case
l_int|1
suffix:colon
multiline_comment|/* Reboot */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_uadmin: Wants to reboot...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* Shutdown */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_uadmin: Wants to shutdown...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|4
suffix:colon
multiline_comment|/* Remount-root */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_uadmin: Wants to remount root...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|8
suffix:colon
multiline_comment|/* Kill all tasks. */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_uadmin: Wants to kill all tasks...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|256
suffix:colon
multiline_comment|/* Set magic mushrooms... */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_uadmin: Wants to set magic mushroom[%d]...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|func
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_uadmin: Unknown operation [%d]...&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|op
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
suffix:semicolon
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_utssys
id|asmlinkage
r_int
id|irix_utssys
c_func
(paren
r_char
op_star
id|inbuf
comma
r_int
id|arg
comma
r_int
id|type
comma
r_char
op_star
id|outbuf
)paren
(brace
r_int
id|retval
suffix:semicolon
r_switch
c_cond
(paren
id|type
)paren
(brace
r_case
l_int|0
suffix:colon
multiline_comment|/* uname() */
id|retval
op_assign
id|irix_uname
c_func
(paren
(paren
r_struct
id|iuname
op_star
)paren
id|inbuf
)paren
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|2
suffix:colon
multiline_comment|/* ustat() */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_utssys: Wants to do ustat()&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|3
suffix:colon
multiline_comment|/* fusers() */
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_utssys: Wants to do fusers()&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_utssys: Wants to do unknown type[%d]&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|type
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|macro|DEBUG_FCNTL
macro_line|#undef DEBUG_FCNTL
r_extern
id|asmlinkage
r_int
id|sys_fcntl
c_func
(paren
r_int
r_int
id|fd
comma
r_int
r_int
id|cmd
comma
r_int
r_int
id|arg
)paren
suffix:semicolon
DECL|macro|IRIX_F_ALLOCSP
mdefine_line|#define IRIX_F_ALLOCSP 10
DECL|function|irix_fcntl
id|asmlinkage
r_int
id|irix_fcntl
c_func
(paren
r_int
id|fd
comma
r_int
id|cmd
comma
r_int
id|arg
)paren
(brace
r_int
id|retval
suffix:semicolon
macro_line|#ifdef DEBUG_FCNTL
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_fcntl(%d, %d, %d) &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|fd
comma
id|cmd
comma
id|arg
)paren
suffix:semicolon
macro_line|#endif
r_if
c_cond
(paren
id|cmd
op_eq
id|IRIX_F_ALLOCSP
)paren
(brace
r_return
l_int|0
suffix:semicolon
)brace
id|retval
op_assign
id|sys_fcntl
c_func
(paren
id|fd
comma
id|cmd
comma
id|arg
)paren
suffix:semicolon
macro_line|#ifdef DEBUG_FCNTL
id|printk
c_func
(paren
l_string|&quot;%d&bslash;n&quot;
comma
id|retval
)paren
suffix:semicolon
macro_line|#endif
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_ulimit
id|asmlinkage
r_int
id|irix_ulimit
c_func
(paren
r_int
id|cmd
comma
r_int
id|arg
)paren
(brace
r_int
id|retval
suffix:semicolon
r_switch
c_cond
(paren
id|cmd
)paren
(brace
r_case
l_int|1
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_ulimit: Wants to get file size limit.&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|2
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_ulimit: Wants to set file size limit.&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|3
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_ulimit: Wants to get brk limit.&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|4
suffix:colon
macro_line|#if 0
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_ulimit: Wants to get fd limit.&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
macro_line|#endif
id|retval
op_assign
id|current-&gt;rlim
(braket
id|RLIMIT_NOFILE
)braket
dot
id|rlim_cur
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_case
l_int|5
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_ulimit: Wants to get txt offset.&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
r_default
suffix:colon
id|printk
c_func
(paren
l_string|&quot;[%s:%d] irix_ulimit: Unknown command [%d].&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
id|cmd
)paren
suffix:semicolon
id|retval
op_assign
op_minus
id|EINVAL
suffix:semicolon
r_goto
id|out
suffix:semicolon
)brace
id|out
suffix:colon
r_return
id|retval
suffix:semicolon
)brace
DECL|function|irix_unimp
id|asmlinkage
r_int
id|irix_unimp
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;irix_unimp [%s:%d] v0=%d v1=%d a0=%08lx a1=%08lx a2=%08lx &quot;
l_string|&quot;a3=%08lx&bslash;n&quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
(paren
r_int
)paren
id|regs-&gt;regs
(braket
l_int|2
)braket
comma
(paren
r_int
)paren
id|regs-&gt;regs
(braket
l_int|3
)braket
comma
id|regs-&gt;regs
(braket
l_int|4
)braket
comma
id|regs-&gt;regs
(braket
l_int|5
)braket
comma
id|regs-&gt;regs
(braket
l_int|6
)braket
comma
id|regs-&gt;regs
(braket
l_int|7
)braket
)paren
suffix:semicolon
r_return
op_minus
id|ENOSYS
suffix:semicolon
)brace
eof
