multiline_comment|/*&n; *  arch/mips/kernel/traps.c&n; *&n; *  Copyright (C) 1991, 1992  Linus Torvalds&n; */
multiline_comment|/*&n; * &squot;traps.c&squot; handles hardware traps and faults after we have saved some&n; * state in &squot;asm.s&squot;. Currently mostly a debugging-aid, will be extended&n; * to mainly kill the offending process (probably by giving it a signal,&n; * but possibly by killing it outright if necessary).&n; */
macro_line|#include &lt;linux/head.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/signal.h&gt;
macro_line|#include &lt;linux/string.h&gt;
macro_line|#include &lt;linux/errno.h&gt;
macro_line|#include &lt;linux/ptrace.h&gt;
macro_line|#include &lt;linux/config.h&gt;
macro_line|#include &lt;linux/timer.h&gt;
macro_line|#include &lt;asm/system.h&gt;
macro_line|#include &lt;asm/segment.h&gt;
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/mipsregs.h&gt;
macro_line|#include &lt;asm/bootinfo.h&gt;
DECL|function|console_verbose
r_static
r_inline
r_void
id|console_verbose
c_func
(paren
r_void
)paren
(brace
r_extern
r_int
id|console_loglevel
suffix:semicolon
id|console_loglevel
op_assign
l_int|15
suffix:semicolon
)brace
DECL|macro|get_seg_byte
mdefine_line|#define get_seg_byte(seg,addr) ({ &bslash;&n;register unsigned char __res; &bslash;&n;__res = get_user_byte(addr); &bslash;&n;__res;})
DECL|macro|get_seg_long
mdefine_line|#define get_seg_long(seg,addr) ({ &bslash;&n;register unsigned long __res; &bslash;&n;__res = get_user_word(addr); &bslash;&n;__res;})
r_extern
id|asmlinkage
r_void
id|deskstation_tyne_handle_int
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|acer_pica_61_handle_int
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_mod
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_tlbl
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_tlbs
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_adel
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_ades
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_ibe
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_dbe
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_sys
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_bp
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_ri
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_cpu
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_ov
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_tr
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_vcei
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_fpe
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_vced
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_watch
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
id|asmlinkage
r_void
id|handle_reserved
c_func
(paren
r_void
)paren
suffix:semicolon
DECL|variable|cpu_names
r_char
op_star
id|cpu_names
(braket
)braket
op_assign
id|CPU_NAMES
suffix:semicolon
DECL|variable|kstack_depth_to_print
r_int
id|kstack_depth_to_print
op_assign
l_int|24
suffix:semicolon
multiline_comment|/*&n; * These constants are for searching for possible module text&n; * segments.  VMALLOC_OFFSET comes from mm/vmalloc.c; MODULE_RANGE is&n; * a guess of how much space is likely to be vmalloced.&n; */
DECL|macro|VMALLOC_OFFSET
mdefine_line|#define VMALLOC_OFFSET (8*1024*1024)
DECL|macro|MODULE_RANGE
mdefine_line|#define MODULE_RANGE (8*1024*1024)
DECL|function|die_if_kernel
r_void
id|die_if_kernel
c_func
(paren
r_char
op_star
id|str
comma
r_struct
id|pt_regs
op_star
id|regs
comma
r_int
id|err
)paren
(brace
r_int
id|i
suffix:semicolon
r_int
r_int
op_star
id|sp
comma
op_star
id|pc
suffix:semicolon
r_int
r_int
op_star
id|stack
comma
id|addr
comma
id|module_start
comma
id|module_end
suffix:semicolon
r_extern
r_char
id|start_kernel
comma
id|etext
suffix:semicolon
r_if
c_cond
(paren
(paren
id|regs-&gt;cp0_status
op_amp
(paren
id|ST0_ERL
op_or
id|ST0_EXL
)paren
)paren
op_eq
l_int|0
)paren
r_return
suffix:semicolon
id|sp
op_assign
(paren
r_int
r_int
op_star
)paren
id|regs-&gt;reg29
suffix:semicolon
id|pc
op_assign
(paren
r_int
r_int
op_star
)paren
id|regs-&gt;cp0_epc
suffix:semicolon
id|console_verbose
c_func
(paren
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;%s: %08lx&bslash;n&quot;
comma
id|str
comma
id|err
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Saved main processor registers&n;&t; */
id|printk
c_func
(paren
l_string|&quot;at   : %08lx&bslash;n&quot;
comma
id|regs-&gt;reg1
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;v0   : %08lx %08lx&bslash;n&quot;
comma
id|regs-&gt;reg2
comma
id|regs-&gt;reg3
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;a0   : %08lx %08lx %08lx %08lx&bslash;n&quot;
comma
id|regs-&gt;reg4
comma
id|regs-&gt;reg5
comma
id|regs-&gt;reg6
comma
id|regs-&gt;reg7
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;t0   : %08lx %08lx %08lx %08lx %08lx&bslash;n&quot;
comma
id|regs-&gt;reg8
comma
id|regs-&gt;reg9
comma
id|regs-&gt;reg10
comma
id|regs-&gt;reg11
comma
id|regs-&gt;reg12
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;t5   : %08lx %08lx %08lx %08lx %08lx&bslash;n&quot;
comma
id|regs-&gt;reg13
comma
id|regs-&gt;reg14
comma
id|regs-&gt;reg15
comma
id|regs-&gt;reg24
comma
id|regs-&gt;reg25
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;s0   : %08lx %08lx %08lx %08lx&bslash;n&quot;
comma
id|regs-&gt;reg16
comma
id|regs-&gt;reg17
comma
id|regs-&gt;reg18
comma
id|regs-&gt;reg19
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;s4   : %08lx %08lx %08lx %08lx&bslash;n&quot;
comma
id|regs-&gt;reg20
comma
id|regs-&gt;reg21
comma
id|regs-&gt;reg22
comma
id|regs-&gt;reg23
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;gp   : %08lx&bslash;n&quot;
comma
id|regs-&gt;reg28
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;sp   : %08lx&bslash;n&quot;
comma
id|regs-&gt;reg29
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;fp/s8: %08lx&bslash;n&quot;
comma
id|regs-&gt;reg30
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;ra   : %08lx&bslash;n&quot;
comma
id|regs-&gt;reg31
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Saved cp0 registers&n;&t; */
id|printk
c_func
(paren
l_string|&quot;epc  : %08lx&bslash;nStatus: %08lx&bslash;nCause : %08lx&bslash;n&quot;
comma
id|regs-&gt;cp0_epc
comma
id|regs-&gt;cp0_status
comma
id|regs-&gt;cp0_cause
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Some goodies...&n;&t; */
id|printk
c_func
(paren
l_string|&quot;Int  : %ld&bslash;n&quot;
comma
id|regs-&gt;interrupt
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Dump the stack&n;&t; */
r_if
c_cond
(paren
id|STACK_MAGIC
op_ne
op_star
(paren
r_int
r_int
op_star
)paren
id|current-&gt;kernel_stack_page
)paren
id|printk
c_func
(paren
l_string|&quot;Corrupted stack page&bslash;n&quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;Process %s (pid: %d, process nr: %d, stackpage=%08lx)&bslash;nStack: &quot;
comma
id|current-&gt;comm
comma
id|current-&gt;pid
comma
l_int|0xffff
op_amp
id|i
comma
id|current-&gt;kernel_stack_page
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%08lx &quot;
comma
op_star
id|sp
op_increment
)paren
suffix:semicolon
)brace
id|stack
op_assign
(paren
r_int
r_int
op_star
)paren
id|sp
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
id|kstack_depth_to_print
suffix:semicolon
id|i
op_increment
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
r_int
)paren
id|stack
op_amp
l_int|4095
)paren
op_eq
l_int|0
)paren
r_break
suffix:semicolon
r_if
c_cond
(paren
id|i
op_logical_and
(paren
(paren
id|i
op_mod
l_int|8
)paren
op_eq
l_int|0
)paren
)paren
id|printk
c_func
(paren
l_string|&quot;&bslash;n       &quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;%08lx &quot;
comma
id|get_seg_long
c_func
(paren
id|ss
comma
id|stack
op_increment
)paren
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;&bslash;nCall Trace: &quot;
)paren
suffix:semicolon
id|stack
op_assign
(paren
r_int
r_int
op_star
)paren
id|sp
suffix:semicolon
id|i
op_assign
l_int|1
suffix:semicolon
id|module_start
op_assign
(paren
(paren
id|high_memory
op_plus
id|VMALLOC_OFFSET
)paren
op_amp
op_complement
(paren
id|VMALLOC_OFFSET
op_minus
l_int|1
)paren
)paren
suffix:semicolon
id|module_end
op_assign
id|module_start
op_plus
id|MODULE_RANGE
suffix:semicolon
r_while
c_loop
(paren
(paren
(paren
r_int
)paren
id|stack
op_amp
l_int|4095
)paren
op_ne
l_int|0
)paren
(brace
id|addr
op_assign
id|get_seg_long
c_func
(paren
id|ss
comma
id|stack
op_increment
)paren
suffix:semicolon
multiline_comment|/*&n;&t;&t; * If the address is either in the text segment of the&n;&t;&t; * kernel, or in the region which contains vmalloc&squot;ed&n;&t;&t; * memory, it *may* be the address of a calling&n;&t;&t; * routine; if so, print it so that someone tracing&n;&t;&t; * down the cause of the crash will be able to figure&n;&t;&t; * out the call path that was taken.&n;&t;&t; */
r_if
c_cond
(paren
(paren
(paren
id|addr
op_ge
(paren
r_int
r_int
)paren
op_amp
id|start_kernel
)paren
op_logical_and
(paren
id|addr
op_le
(paren
r_int
r_int
)paren
op_amp
id|etext
)paren
)paren
op_logical_or
(paren
(paren
id|addr
op_ge
id|module_start
)paren
op_logical_and
(paren
id|addr
op_le
id|module_end
)paren
)paren
)paren
(brace
r_if
c_cond
(paren
id|i
op_logical_and
(paren
(paren
id|i
op_mod
l_int|8
)paren
op_eq
l_int|0
)paren
)paren
id|printk
c_func
(paren
l_string|&quot;&bslash;n       &quot;
)paren
suffix:semicolon
id|printk
c_func
(paren
l_string|&quot;%08lx &quot;
comma
id|addr
)paren
suffix:semicolon
id|i
op_increment
suffix:semicolon
)brace
)brace
id|printk
c_func
(paren
l_string|&quot;&bslash;nCode : &quot;
)paren
suffix:semicolon
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
OL
l_int|5
suffix:semicolon
id|i
op_increment
)paren
(brace
id|printk
c_func
(paren
l_string|&quot;%08lx &quot;
comma
op_star
id|pc
op_increment
)paren
suffix:semicolon
)brace
id|printk
c_func
(paren
l_string|&quot;&bslash;n&quot;
)paren
suffix:semicolon
id|do_exit
c_func
(paren
id|SIGSEGV
)paren
suffix:semicolon
)brace
DECL|function|do_adel
r_void
id|do_adel
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGSEGV
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_ades
r_void
id|do_ades
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGSEGV
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_ibe
r_void
id|do_ibe
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGSEGV
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_dbe
r_void
id|do_dbe
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGSEGV
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_ov
r_void
id|do_ov
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGFPE
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_fpe
r_void
id|do_fpe
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/*&n;&t; * FIXME: This is the place for a fpu emulator. Not written&n;&t; * yet and the demand seems to be quite low.&n;&t; */
id|printk
c_func
(paren
l_string|&quot;Caught FPE exception at %lx.&bslash;n&quot;
comma
id|regs-&gt;cp0_epc
)paren
suffix:semicolon
id|send_sig
c_func
(paren
id|SIGFPE
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_bp
r_void
id|do_bp
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGILL
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_tr
r_void
id|do_tr
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGILL
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_ri
r_void
id|do_ri
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
id|send_sig
c_func
(paren
id|SIGILL
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
DECL|function|do_cpu
r_void
id|do_cpu
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
r_int
r_int
id|pc
suffix:semicolon
r_int
r_int
id|insn
suffix:semicolon
multiline_comment|/*&n;&t; * Check whether this was a cp1 instruction&n;&t; */
id|pc
op_assign
id|regs-&gt;cp0_epc
suffix:semicolon
r_if
c_cond
(paren
id|regs-&gt;cp0_cause
op_amp
(paren
l_int|1
op_lshift
l_int|31
)paren
)paren
id|pc
op_add_assign
l_int|4
suffix:semicolon
id|insn
op_assign
op_star
(paren
r_int
r_int
op_star
)paren
id|pc
suffix:semicolon
id|insn
op_and_assign
l_int|0xfc000000
suffix:semicolon
r_switch
c_cond
(paren
id|insn
)paren
(brace
r_case
l_int|0x44000000
suffix:colon
r_case
l_int|0xc4000000
suffix:colon
r_case
l_int|0xe4000000
suffix:colon
id|printk
c_func
(paren
l_string|&quot;CP1 instruction - enabling cp1.&bslash;n&quot;
)paren
suffix:semicolon
id|regs-&gt;cp0_status
op_or_assign
id|ST0_CU1
suffix:semicolon
multiline_comment|/*&n;&t;&t;&t; * No need to handle branch delay slots&n;&t;&t;&t; */
r_break
suffix:semicolon
r_default
suffix:colon
multiline_comment|/*&n;&t;&t;&t; * This wasn&squot;t a cp1 instruction and therefore illegal.&n;&t;&t;&t; * Default is to kill the process.&n;&t;&t;&t; */
id|send_sig
c_func
(paren
id|SIGILL
comma
id|current
comma
l_int|1
)paren
suffix:semicolon
)brace
)brace
DECL|function|do_vcei
r_void
id|do_vcei
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/*&n;&t; * Only possible on R4[04]00[SM]C. No handler because&n;&t; * I don&squot;t have such a cpu.&n;&t; */
id|panic
c_func
(paren
l_string|&quot;Caught VCEI exception - can&squot;t handle yet&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|do_vced
r_void
id|do_vced
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/*&n;&t; * Only possible on R4[04]00[SM]C. No handler because&n;&t; * I don&squot;t have such a cpu.&n;&t; */
id|panic
c_func
(paren
l_string|&quot;Caught VCED exception - can&squot;t handle yet&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|do_watch
r_void
id|do_watch
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/*&n;&t; * Only possible on R4[04]00. No way to handle this because&n;&t; * I don&squot;t have such a cpu.&n;&t; */
id|panic
c_func
(paren
l_string|&quot;Caught WATCH exception - can&squot;t handle yet&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|do_reserved
r_void
id|do_reserved
c_func
(paren
r_struct
id|pt_regs
op_star
id|regs
)paren
(brace
multiline_comment|/*&n;&t; * Game over - no way to handle this if it ever occurs.&n;&t; * Most probably caused by a new unknown cpu type or a&n;&t; * after another deadly hard/software error.&n;&t; */
id|panic
c_func
(paren
l_string|&quot;Caught reserved exception - can&squot;t handle.&bslash;n&quot;
)paren
suffix:semicolon
)brace
DECL|function|trap_init
r_void
id|trap_init
c_func
(paren
r_void
)paren
(brace
r_int
id|i
suffix:semicolon
multiline_comment|/*&n;&t; * FIXME: Mips Magnum R4000 has an EISA bus!&n;&t; */
id|EISA_bus
op_assign
l_int|0
suffix:semicolon
multiline_comment|/*&n;&t; * Setup default vectors&n;&t; */
r_for
c_loop
(paren
id|i
op_assign
l_int|0
suffix:semicolon
id|i
op_le
l_int|31
suffix:semicolon
id|i
op_increment
)paren
id|set_except_vector
c_func
(paren
id|i
comma
id|handle_reserved
)paren
suffix:semicolon
multiline_comment|/*&n;&t; * Handling the following exceptions depends mostly of the cpu type&n;&t; */
r_switch
c_cond
(paren
id|boot_info.cputype
)paren
(brace
r_case
id|CPU_R4000MC
suffix:colon
r_case
id|CPU_R4400MC
suffix:colon
r_case
id|CPU_R4000SC
suffix:colon
r_case
id|CPU_R4400SC
suffix:colon
multiline_comment|/*&n;&t;&t; * Handlers not implemented yet&n;&t;&t; */
id|set_except_vector
c_func
(paren
l_int|14
comma
id|handle_vcei
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|31
comma
id|handle_vced
)paren
suffix:semicolon
r_case
id|CPU_R4000PC
suffix:colon
r_case
id|CPU_R4400PC
suffix:colon
multiline_comment|/*&n;&t;&t; * Handler not implemented yet&n;&t;&t; */
id|set_except_vector
c_func
(paren
l_int|23
comma
id|handle_watch
)paren
suffix:semicolon
r_case
id|CPU_R4200
suffix:colon
r_case
id|CPU_R4600
suffix:colon
id|set_except_vector
c_func
(paren
l_int|1
comma
id|handle_mod
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|2
comma
id|handle_tlbl
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|3
comma
id|handle_tlbs
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|4
comma
id|handle_adel
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|5
comma
id|handle_ades
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|6
comma
id|handle_ibe
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|7
comma
id|handle_dbe
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|8
comma
id|handle_sys
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|9
comma
id|handle_bp
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|10
comma
id|handle_ri
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|11
comma
id|handle_cpu
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|12
comma
id|handle_ov
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|13
comma
id|handle_tr
)paren
suffix:semicolon
id|set_except_vector
c_func
(paren
l_int|15
comma
id|handle_fpe
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CPU_R2000
suffix:colon
r_case
id|CPU_R3000
suffix:colon
r_case
id|CPU_R3000A
suffix:colon
r_case
id|CPU_R3041
suffix:colon
r_case
id|CPU_R3051
suffix:colon
r_case
id|CPU_R3052
suffix:colon
r_case
id|CPU_R3081
suffix:colon
r_case
id|CPU_R3081E
suffix:colon
r_case
id|CPU_R6000
suffix:colon
r_case
id|CPU_R6000A
suffix:colon
r_case
id|CPU_R8000
suffix:colon
r_case
id|CPU_R10000
suffix:colon
id|printk
c_func
(paren
l_string|&quot;Detected unsupported CPU type %s.&bslash;n&quot;
comma
id|cpu_names
(braket
id|boot_info.cputype
)braket
)paren
suffix:semicolon
id|panic
c_func
(paren
l_string|&quot;Can&squot;t handle CPU&bslash;n&quot;
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|CPU_UNKNOWN
suffix:colon
r_default
suffix:colon
id|panic
c_func
(paren
l_string|&quot;Unknown type of CPU&quot;
)paren
suffix:semicolon
)brace
multiline_comment|/*&n;&t; * The interrupt handler depends of both type of the board and cpu&n;&t; */
r_switch
c_cond
(paren
id|boot_info.machtype
)paren
(brace
r_case
id|MACH_DESKSTATION_TYNE
suffix:colon
id|set_except_vector
c_func
(paren
l_int|0
comma
id|deskstation_tyne_handle_int
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
id|MACH_ACER_PICA_61
suffix:colon
id|set_except_vector
c_func
(paren
l_int|0
comma
id|acer_pica_61_handle_int
)paren
suffix:semicolon
r_break
suffix:semicolon
r_default
suffix:colon
id|panic
c_func
(paren
l_string|&quot;Unknown machine type&quot;
)paren
suffix:semicolon
)brace
)brace
eof
