multiline_comment|/* $Id: PeeCeeI.c,v 1.4 1999/09/06 01:17:35 davem Exp $&n; * PeeCeeI.c: The emerging standard...&n; *&n; * Copyright (C) 1997 David S. Miller (davem@caip.rutgers.edu)&n; */
macro_line|#include &lt;linux/config.h&gt;
macro_line|#ifdef CONFIG_PCI
macro_line|#include &lt;asm/io.h&gt;
macro_line|#include &lt;asm/byteorder.h&gt;
DECL|function|outsb
r_void
id|outsb
c_func
(paren
r_int
r_int
id|addr
comma
r_const
r_void
op_star
id|src
comma
r_int
r_int
id|count
)paren
(brace
r_const
id|u8
op_star
id|p
op_assign
id|src
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|outb
c_func
(paren
op_star
id|p
op_increment
comma
id|addr
)paren
suffix:semicolon
)brace
)brace
DECL|function|outsw
r_void
id|outsw
c_func
(paren
r_int
r_int
id|addr
comma
r_const
r_void
op_star
id|src
comma
r_int
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
)paren
(brace
id|u16
op_star
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|src
suffix:semicolon
id|u32
op_star
id|pi
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
id|u64
)paren
id|src
)paren
op_amp
l_int|0x2
)paren
(brace
id|u16
id|val
op_assign
id|le16_to_cpup
c_func
(paren
id|ps
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|addr
)paren
suffix:semicolon
id|ps
op_increment
suffix:semicolon
id|count
op_decrement
suffix:semicolon
)brace
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|ps
suffix:semicolon
r_while
c_loop
(paren
id|count
op_ge
l_int|2
)paren
(brace
id|u32
id|w
op_assign
id|le32_to_cpup
c_func
(paren
id|pi
)paren
suffix:semicolon
id|pi
op_increment
suffix:semicolon
id|outw
c_func
(paren
id|w
op_rshift
l_int|0
comma
id|addr
)paren
suffix:semicolon
id|outw
c_func
(paren
id|w
op_rshift
l_int|16
comma
id|addr
)paren
suffix:semicolon
id|count
op_sub_assign
l_int|2
suffix:semicolon
)brace
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pi
suffix:semicolon
r_if
c_cond
(paren
id|count
)paren
(brace
id|u16
id|val
op_assign
id|le16_to_cpup
c_func
(paren
id|ps
)paren
suffix:semicolon
id|outw
c_func
(paren
id|val
comma
id|addr
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|outsl
r_void
id|outsl
c_func
(paren
r_int
r_int
id|addr
comma
r_const
r_void
op_star
id|src
comma
r_int
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
(paren
id|u64
)paren
id|src
)paren
op_amp
l_int|0x3
)paren
op_eq
l_int|0
)paren
(brace
id|u32
op_star
id|p
op_assign
(paren
id|u32
op_star
)paren
id|src
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|u32
id|val
op_assign
id|cpu_to_le32p
c_func
(paren
id|p
)paren
suffix:semicolon
id|outl
c_func
(paren
id|val
comma
id|addr
)paren
suffix:semicolon
id|p
op_increment
suffix:semicolon
)brace
)brace
r_else
(brace
id|u8
op_star
id|pb
suffix:semicolon
id|u16
op_star
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|src
suffix:semicolon
id|u32
id|l
op_assign
l_int|0
comma
id|l2
suffix:semicolon
id|u32
op_star
id|pi
suffix:semicolon
r_switch
c_cond
(paren
(paren
(paren
id|u64
)paren
id|src
)paren
op_amp
l_int|0x3
)paren
(brace
r_case
l_int|0x2
suffix:colon
id|count
op_sub_assign
l_int|1
suffix:semicolon
id|l
op_assign
id|cpu_to_le16p
c_func
(paren
id|ps
)paren
op_lshift
l_int|16
suffix:semicolon
id|ps
op_increment
suffix:semicolon
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|ps
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|l2
op_assign
id|cpu_to_le32p
c_func
(paren
id|pi
)paren
suffix:semicolon
id|pi
op_increment
suffix:semicolon
id|outl
c_func
(paren
(paren
(paren
id|l
op_rshift
l_int|16
)paren
op_or
(paren
id|l2
op_lshift
l_int|16
)paren
)paren
comma
id|addr
)paren
suffix:semicolon
id|l
op_assign
id|l2
suffix:semicolon
)brace
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pi
suffix:semicolon
id|l2
op_assign
id|cpu_to_le16p
c_func
(paren
id|ps
)paren
suffix:semicolon
id|outl
c_func
(paren
(paren
(paren
id|l
op_rshift
l_int|16
)paren
op_or
(paren
id|l2
op_lshift
l_int|16
)paren
)paren
comma
id|addr
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x1
suffix:colon
id|count
op_sub_assign
l_int|1
suffix:semicolon
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|src
suffix:semicolon
id|l
op_assign
(paren
op_star
id|pb
op_increment
op_lshift
l_int|8
)paren
suffix:semicolon
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pb
suffix:semicolon
id|l2
op_assign
id|cpu_to_le16p
c_func
(paren
id|ps
)paren
suffix:semicolon
id|ps
op_increment
suffix:semicolon
id|l
op_or_assign
(paren
id|l2
op_lshift
l_int|16
)paren
suffix:semicolon
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|ps
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|l2
op_assign
id|cpu_to_le32p
c_func
(paren
id|pi
)paren
suffix:semicolon
id|pi
op_increment
suffix:semicolon
id|outl
c_func
(paren
(paren
(paren
id|l
op_rshift
l_int|8
)paren
op_or
(paren
id|l2
op_lshift
l_int|24
)paren
)paren
comma
id|addr
)paren
suffix:semicolon
id|l
op_assign
id|l2
suffix:semicolon
)brace
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|pi
suffix:semicolon
id|outl
c_func
(paren
(paren
(paren
id|l
op_rshift
l_int|8
)paren
op_or
(paren
op_star
id|pb
op_lshift
l_int|24
)paren
)paren
comma
id|addr
)paren
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x3
suffix:colon
id|count
op_sub_assign
l_int|1
suffix:semicolon
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|src
suffix:semicolon
id|l
op_assign
(paren
op_star
id|pb
op_increment
op_lshift
l_int|24
)paren
suffix:semicolon
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|pb
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|l2
op_assign
id|cpu_to_le32p
c_func
(paren
id|pi
)paren
suffix:semicolon
id|pi
op_increment
suffix:semicolon
id|outl
c_func
(paren
(paren
(paren
id|l
op_rshift
l_int|24
)paren
op_or
(paren
id|l2
op_lshift
l_int|8
)paren
)paren
comma
id|addr
)paren
suffix:semicolon
id|l
op_assign
id|l2
suffix:semicolon
)brace
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pi
suffix:semicolon
id|l2
op_assign
id|cpu_to_le16p
c_func
(paren
id|ps
)paren
suffix:semicolon
id|ps
op_increment
suffix:semicolon
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|ps
suffix:semicolon
id|l2
op_or_assign
(paren
op_star
id|pb
op_lshift
l_int|16
)paren
suffix:semicolon
id|outl
c_func
(paren
(paren
(paren
id|l
op_rshift
l_int|24
)paren
op_or
(paren
id|l2
op_lshift
l_int|8
)paren
)paren
comma
id|addr
)paren
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
DECL|function|insb
r_void
id|insb
c_func
(paren
r_int
r_int
id|addr
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
)paren
(brace
id|u32
op_star
id|pi
suffix:semicolon
id|u8
op_star
id|pb
op_assign
id|dst
suffix:semicolon
r_while
c_loop
(paren
(paren
(paren
(paren
r_int
r_int
)paren
id|pb
)paren
op_amp
l_int|0x3
)paren
op_logical_and
id|count
op_decrement
)paren
(brace
op_star
id|pb
op_increment
op_assign
id|inb
c_func
(paren
id|addr
)paren
suffix:semicolon
)brace
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|pb
suffix:semicolon
r_while
c_loop
(paren
id|count
op_ge
l_int|4
)paren
(brace
id|u32
id|w
suffix:semicolon
id|w
op_assign
(paren
id|inb
c_func
(paren
id|addr
)paren
op_lshift
l_int|24
)paren
suffix:semicolon
id|w
op_or_assign
(paren
id|inb
c_func
(paren
id|addr
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|w
op_or_assign
(paren
id|inb
c_func
(paren
id|addr
)paren
op_lshift
l_int|8
)paren
suffix:semicolon
id|w
op_or_assign
(paren
id|inb
c_func
(paren
id|addr
)paren
op_lshift
l_int|0
)paren
suffix:semicolon
op_star
id|pi
op_increment
op_assign
id|w
suffix:semicolon
id|count
op_sub_assign
l_int|4
suffix:semicolon
)brace
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|pi
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
id|pb
op_increment
op_assign
id|inb
c_func
(paren
id|addr
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|insw
r_void
id|insw
c_func
(paren
r_int
r_int
id|addr
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
)paren
(brace
id|u16
op_star
id|ps
op_assign
id|dst
suffix:semicolon
id|u32
op_star
id|pi
suffix:semicolon
r_if
c_cond
(paren
(paren
(paren
r_int
r_int
)paren
id|ps
)paren
op_amp
l_int|0x2
)paren
(brace
op_star
id|ps
op_increment
op_assign
id|le16_to_cpu
c_func
(paren
id|inw
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
id|count
op_decrement
suffix:semicolon
)brace
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|ps
suffix:semicolon
r_while
c_loop
(paren
id|count
op_ge
l_int|2
)paren
(brace
id|u32
id|w
suffix:semicolon
id|w
op_assign
(paren
id|le16_to_cpu
c_func
(paren
id|inw
c_func
(paren
id|addr
)paren
)paren
op_lshift
l_int|16
)paren
suffix:semicolon
id|w
op_or_assign
(paren
id|le16_to_cpu
c_func
(paren
id|inw
c_func
(paren
id|addr
)paren
)paren
op_lshift
l_int|0
)paren
suffix:semicolon
op_star
id|pi
op_increment
op_assign
id|w
suffix:semicolon
id|count
op_sub_assign
l_int|2
suffix:semicolon
)brace
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pi
suffix:semicolon
r_if
c_cond
(paren
id|count
)paren
(brace
op_star
id|ps
op_assign
id|le16_to_cpu
c_func
(paren
id|inw
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
)brace
)brace
)brace
DECL|function|insl
r_void
id|insl
c_func
(paren
r_int
r_int
id|addr
comma
r_void
op_star
id|dst
comma
r_int
r_int
id|count
)paren
(brace
r_if
c_cond
(paren
id|count
)paren
(brace
r_if
c_cond
(paren
(paren
(paren
(paren
r_int
r_int
)paren
id|dst
)paren
op_amp
l_int|0x3
)paren
op_eq
l_int|0
)paren
(brace
id|u32
op_star
id|pi
op_assign
id|dst
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
op_star
id|pi
op_increment
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
)brace
)brace
r_else
(brace
id|u32
id|l
op_assign
l_int|0
comma
id|l2
comma
op_star
id|pi
suffix:semicolon
id|u16
op_star
id|ps
suffix:semicolon
id|u8
op_star
id|pb
suffix:semicolon
r_switch
c_cond
(paren
(paren
(paren
r_int
r_int
)paren
id|dst
)paren
op_amp
l_int|3
)paren
(brace
r_case
l_int|0x2
suffix:colon
id|ps
op_assign
id|dst
suffix:semicolon
id|count
op_sub_assign
l_int|1
suffix:semicolon
id|l
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
op_star
id|ps
op_increment
op_assign
id|l
suffix:semicolon
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|ps
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|l2
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
op_star
id|pi
op_increment
op_assign
(paren
id|l
op_lshift
l_int|16
)paren
op_or
(paren
id|l2
op_rshift
l_int|16
)paren
suffix:semicolon
id|l
op_assign
id|l2
suffix:semicolon
)brace
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pi
suffix:semicolon
op_star
id|ps
op_assign
id|l
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x1
suffix:colon
id|pb
op_assign
id|dst
suffix:semicolon
id|count
op_sub_assign
l_int|1
suffix:semicolon
id|l
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
op_star
id|pb
op_increment
op_assign
id|l
op_rshift
l_int|24
suffix:semicolon
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pb
suffix:semicolon
op_star
id|ps
op_increment
op_assign
(paren
(paren
id|l
op_rshift
l_int|8
)paren
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|ps
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|l2
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
op_star
id|pi
op_increment
op_assign
(paren
id|l
op_lshift
l_int|24
)paren
op_or
(paren
id|l2
op_rshift
l_int|8
)paren
suffix:semicolon
id|l
op_assign
id|l2
suffix:semicolon
)brace
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|pi
suffix:semicolon
op_star
id|pb
op_assign
id|l
suffix:semicolon
r_break
suffix:semicolon
r_case
l_int|0x3
suffix:colon
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|dst
suffix:semicolon
id|count
op_sub_assign
l_int|1
suffix:semicolon
id|l
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
op_star
id|pb
op_increment
op_assign
id|l
op_rshift
l_int|24
suffix:semicolon
id|pi
op_assign
(paren
id|u32
op_star
)paren
id|pb
suffix:semicolon
r_while
c_loop
(paren
id|count
op_decrement
)paren
(brace
id|l2
op_assign
id|le32_to_cpu
c_func
(paren
id|inl
c_func
(paren
id|addr
)paren
)paren
suffix:semicolon
op_star
id|pi
op_increment
op_assign
(paren
id|l
op_lshift
l_int|8
)paren
op_or
(paren
id|l2
op_rshift
l_int|24
)paren
suffix:semicolon
id|l
op_assign
id|l2
suffix:semicolon
)brace
id|ps
op_assign
(paren
id|u16
op_star
)paren
id|pi
suffix:semicolon
op_star
id|ps
op_increment
op_assign
(paren
(paren
id|l
op_rshift
l_int|8
)paren
op_amp
l_int|0xffff
)paren
suffix:semicolon
id|pb
op_assign
(paren
id|u8
op_star
)paren
id|ps
suffix:semicolon
op_star
id|pb
op_assign
id|l
suffix:semicolon
r_break
suffix:semicolon
)brace
)brace
)brace
)brace
macro_line|#endif /* CONFIG_PCI */
eof
