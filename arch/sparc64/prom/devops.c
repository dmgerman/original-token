multiline_comment|/* $Id: devops.c,v 1.3 1997/10/29 07:43:28 ecd Exp $&n; * devops.c:  Device operations using the PROM.&n; *&n; * Copyright (C) 1995 David S. Miller (davem@caip.rutgers.edu)&n; * Copyright (C) 1996,1997 Jakub Jelinek (jj@sunsite.mff.cuni.cz)&n; */
macro_line|#include &lt;linux/types.h&gt;
macro_line|#include &lt;linux/kernel.h&gt;
macro_line|#include &lt;linux/sched.h&gt;
macro_line|#include &lt;asm/openprom.h&gt;
macro_line|#include &lt;asm/oplib.h&gt;
multiline_comment|/* Open the device described by the string &squot;dstr&squot;.  Returns the handle&n; * to that device used for subsequent operations on that device.&n; * Returns 0 on failure.&n; */
r_int
DECL|function|prom_devopen
id|prom_devopen
c_func
(paren
r_char
op_star
id|dstr
)paren
(brace
r_return
id|p1275_cmd
(paren
l_string|&quot;open&quot;
comma
id|P1275_ARG
c_func
(paren
l_int|0
comma
id|P1275_ARG_IN_STRING
)paren
op_or
id|P1275_INOUT
c_func
(paren
l_int|1
comma
l_int|1
)paren
comma
id|dstr
)paren
suffix:semicolon
)brace
multiline_comment|/* Close the device described by device handle &squot;dhandle&squot;. */
r_int
DECL|function|prom_devclose
id|prom_devclose
c_func
(paren
r_int
id|dhandle
)paren
(brace
id|p1275_cmd
(paren
l_string|&quot;close&quot;
comma
id|P1275_INOUT
c_func
(paren
l_int|1
comma
l_int|0
)paren
comma
id|dhandle
)paren
suffix:semicolon
r_return
l_int|0
suffix:semicolon
)brace
multiline_comment|/* Seek to specified location described by &squot;seekhi&squot; and &squot;seeklo&squot;&n; * for device &squot;dhandle&squot;.&n; */
r_void
DECL|function|prom_seek
id|prom_seek
c_func
(paren
r_int
id|dhandle
comma
r_int
r_int
id|seekhi
comma
r_int
r_int
id|seeklo
)paren
(brace
id|p1275_cmd
(paren
l_string|&quot;seek&quot;
comma
id|P1275_INOUT
c_func
(paren
l_int|3
comma
l_int|1
)paren
comma
id|dhandle
comma
id|seekhi
comma
id|seeklo
)paren
suffix:semicolon
)brace
eof
