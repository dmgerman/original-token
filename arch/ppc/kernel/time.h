multiline_comment|/*&n; * $Id: time.h,v 1.7 1997/12/28 22:47:24 paulus Exp $&n; * Common time prototypes and such for all ppc machines.&n; *&n; * Written by Cort Dougan (cort@cs.nmt.edu) to merge&n; * Paul Mackerras&squot; version and mine for PReP and Pmac.&n; */
macro_line|#include &lt;linux/mc146818rtc.h&gt;
multiline_comment|/* time.c */
r_void
id|prep_calibrate_decr_handler
c_func
(paren
r_int
comma
r_void
op_star
comma
r_struct
id|pt_regs
op_star
)paren
suffix:semicolon
r_void
id|prep_calibrate_decr
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|pmac_calibrate_decr
c_func
(paren
r_void
)paren
suffix:semicolon
r_extern
r_int
id|decrementer_count
suffix:semicolon
r_extern
r_int
id|count_period_num
suffix:semicolon
r_extern
r_int
id|count_period_den
suffix:semicolon
r_extern
r_int
r_int
id|mktime
c_func
(paren
r_int
r_int
comma
r_int
r_int
comma
r_int
r_int
comma
r_int
r_int
comma
r_int
r_int
comma
r_int
r_int
)paren
suffix:semicolon
r_extern
r_void
id|to_tm
c_func
(paren
r_int
id|tim
comma
r_struct
id|rtc_time
op_star
id|tm
)paren
suffix:semicolon
r_extern
r_int
r_int
id|last_rtc_update
suffix:semicolon
multiline_comment|/* pmac/prep/chrp_time.c */
r_int
r_int
id|prep_get_rtc_time
c_func
(paren
r_void
)paren
suffix:semicolon
r_int
r_int
id|pmac_get_rtc_time
c_func
(paren
r_void
)paren
suffix:semicolon
r_int
r_int
id|chrp_get_rtc_time
c_func
(paren
r_void
)paren
suffix:semicolon
r_int
id|prep_set_rtc_time
c_func
(paren
r_int
r_int
id|nowtime
)paren
suffix:semicolon
r_int
id|pmac_set_rtc_time
c_func
(paren
r_int
r_int
id|nowtime
)paren
suffix:semicolon
r_int
id|chrp_set_rtc_time
c_func
(paren
r_int
r_int
id|nowtime
)paren
suffix:semicolon
r_void
id|pmac_read_rtc_time
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|chrp_calibrate_decr
c_func
(paren
r_void
)paren
suffix:semicolon
r_void
id|chrp_time_init
c_func
(paren
r_void
)paren
suffix:semicolon
multiline_comment|/* Accessor functions for the decrementer register. */
DECL|function|get_dec
r_static
id|__inline__
r_int
r_int
id|get_dec
c_func
(paren
r_void
)paren
(brace
r_int
r_int
id|ret
suffix:semicolon
id|asm
r_volatile
(paren
l_string|&quot;mfspr %0,22&quot;
suffix:colon
l_string|&quot;=r&quot;
(paren
id|ret
)paren
suffix:colon
)paren
suffix:semicolon
r_return
id|ret
suffix:semicolon
)brace
DECL|function|set_dec
r_static
id|__inline__
r_void
id|set_dec
c_func
(paren
r_int
r_int
id|val
)paren
(brace
id|asm
r_volatile
(paren
l_string|&quot;mtspr 22,%0&quot;
suffix:colon
suffix:colon
l_string|&quot;r&quot;
(paren
id|val
)paren
)paren
suffix:semicolon
)brace
eof
