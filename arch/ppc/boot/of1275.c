multiline_comment|/* Open Firmware Client Interface */
macro_line|#include &quot;of1275.h&quot;
DECL|variable|of_server
r_static
r_int
(paren
op_star
id|of_server
)paren
(paren
r_void
op_star
)paren
op_assign
(paren
r_int
(paren
op_star
)paren
(paren
r_void
op_star
)paren
)paren
op_minus
l_int|1
suffix:semicolon
r_void
DECL|function|of_init
id|of_init
c_func
(paren
r_void
op_star
id|handler
)paren
(brace
id|of_server
op_assign
(paren
r_int
(paren
op_star
)paren
(paren
r_void
op_star
)paren
)paren
id|handler
suffix:semicolon
)brace
multiline_comment|/* 6.3.2.1 Client interface */
r_int
DECL|function|of_test
id|of_test
c_func
(paren
r_const
r_char
op_star
id|name
comma
r_int
op_star
id|missing
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_test_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;test&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.name
op_assign
id|name
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|missing
op_assign
id|s.missing
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* 6.3.2.2 Device tree */
r_int
DECL|function|of_peer
id|of_peer
c_func
(paren
r_int
id|phandle
comma
r_int
op_star
id|sibling_phandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_peer_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;peer&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|sibling_phandle
op_assign
id|s.sibling_phandle
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_child
id|of_child
c_func
(paren
r_int
id|phandle
comma
r_int
op_star
id|child_phandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_child_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;child&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|child_phandle
op_assign
id|s.child_phandle
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_parent
id|of_parent
c_func
(paren
r_int
id|phandle
comma
r_int
op_star
id|parent_phandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_parent_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;parent&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|parent_phandle
op_assign
id|s.parent_phandle
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_instance_to_package
id|of_instance_to_package
c_func
(paren
r_int
id|ihandle
comma
r_int
op_star
id|phandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_instance_to_package_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;instance-to-package&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.ihandle
op_assign
id|ihandle
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|phandle
op_assign
id|s.phandle
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_getproplen
id|of_getproplen
c_func
(paren
r_int
id|phandle
comma
r_const
r_char
op_star
id|name
comma
r_int
op_star
id|proplen
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_getproplen_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;getproplen&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|2
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|s.name
op_assign
id|name
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|proplen
op_assign
id|s.proplen
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_getprop
id|of_getprop
c_func
(paren
r_int
id|phandle
comma
r_const
r_char
op_star
id|name
comma
r_void
op_star
id|buf
comma
r_int
id|buflen
comma
r_int
op_star
id|size
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_getprop_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;getprop&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|4
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|s.name
op_assign
id|name
suffix:semicolon
id|s.buf
op_assign
id|buf
suffix:semicolon
id|s.buflen
op_assign
id|buflen
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|size
op_assign
id|s.size
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_nextprop
id|of_nextprop
c_func
(paren
r_int
id|phandle
comma
r_const
r_char
op_star
id|previous
comma
r_void
op_star
id|buf
comma
r_int
op_star
id|flag
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_nextprop_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;nextprop&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|s.previous
op_assign
id|previous
suffix:semicolon
id|s.buf
op_assign
id|buf
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|flag
op_assign
id|s.flag
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_setprop
id|of_setprop
c_func
(paren
r_int
id|phandle
comma
r_const
r_char
op_star
id|name
comma
r_void
op_star
id|buf
comma
r_int
id|len
comma
r_int
op_star
id|size
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_setprop_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;setprop&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|4
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|s.name
op_assign
id|name
suffix:semicolon
id|s.buf
op_assign
id|buf
suffix:semicolon
id|s.len
op_assign
id|len
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|size
op_assign
id|s.size
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_canon
id|of_canon
c_func
(paren
r_const
r_char
op_star
id|device_specifier
comma
r_void
op_star
id|buf
comma
r_int
id|buflen
comma
r_int
op_star
id|length
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_canon_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;canon&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.device_specifier
op_assign
id|device_specifier
suffix:semicolon
id|s.buf
op_assign
id|buf
suffix:semicolon
id|s.buflen
op_assign
id|buflen
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|length
op_assign
id|s.length
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_finddevice
id|of_finddevice
c_func
(paren
r_const
r_char
op_star
id|device_specifier
comma
r_int
op_star
id|phandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_finddevice_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;finddevice&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.device_specifier
op_assign
id|device_specifier
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|phandle
op_assign
id|s.phandle
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_instance_to_path
id|of_instance_to_path
c_func
(paren
r_int
id|ihandle
comma
r_void
op_star
id|buf
comma
r_int
id|buflen
comma
r_int
op_star
id|length
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_instance_to_path_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;instance-to-path&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.ihandle
op_assign
id|ihandle
suffix:semicolon
id|s.buf
op_assign
id|buf
suffix:semicolon
id|s.buflen
op_assign
id|buflen
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|length
op_assign
id|s.length
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_package_to_path
id|of_package_to_path
c_func
(paren
r_int
id|phandle
comma
r_void
op_star
id|buf
comma
r_int
id|buflen
comma
r_int
op_star
id|length
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_package_to_path_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;package-to-path&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.phandle
op_assign
id|phandle
suffix:semicolon
id|s.buf
op_assign
id|buf
suffix:semicolon
id|s.buflen
op_assign
id|buflen
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|length
op_assign
id|s.length
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* int of_call_method(const char *method, int ihandle, ...); */
multiline_comment|/* 6.3.2.3 Device I/O */
r_int
DECL|function|of_open
id|of_open
c_func
(paren
r_const
r_char
op_star
id|device_specifier
comma
r_int
op_star
id|ihandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_open_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;open&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.device_specifier
op_assign
id|device_specifier
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|ihandle
op_assign
id|s.ihandle
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_close
id|of_close
c_func
(paren
r_int
id|ihandle
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_close_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;close&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|0
suffix:semicolon
id|s.ihandle
op_assign
id|ihandle
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_read
id|of_read
c_func
(paren
r_int
id|ihandle
comma
r_void
op_star
id|addr
comma
r_int
id|len
comma
r_int
op_star
id|actual
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_read_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;read&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.ihandle
op_assign
id|ihandle
suffix:semicolon
id|s.addr
op_assign
id|addr
suffix:semicolon
id|s.len
op_assign
id|len
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|actual
op_assign
id|s.actual
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_write
id|of_write
c_func
(paren
r_int
id|ihandle
comma
r_void
op_star
id|addr
comma
r_int
id|len
comma
r_int
op_star
id|actual
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_write_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;write&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.ihandle
op_assign
id|ihandle
suffix:semicolon
id|s.addr
op_assign
id|addr
suffix:semicolon
id|s.len
op_assign
id|len
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|actual
op_assign
id|s.actual
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_seek
id|of_seek
c_func
(paren
r_int
id|ihandle
comma
r_int
id|pos_hi
comma
r_int
id|pos_lo
comma
r_int
op_star
id|status
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_seek_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;seek&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.ihandle
op_assign
id|ihandle
suffix:semicolon
id|s.pos_hi
op_assign
id|pos_hi
suffix:semicolon
id|s.pos_lo
op_assign
id|pos_lo
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|status
op_assign
id|s.status
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* 6.3.2.4 Memory */
r_int
DECL|function|of_claim
id|of_claim
c_func
(paren
r_void
op_star
id|virt
comma
r_int
id|size
comma
r_int
id|align
comma
r_void
op_star
op_star
id|baseaddr
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_claim_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;claim&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|3
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.virt
op_assign
id|virt
suffix:semicolon
id|s.size
op_assign
id|size
suffix:semicolon
id|s.align
op_assign
id|align
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|baseaddr
op_assign
id|s.baseaddr
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_release
id|of_release
c_func
(paren
r_void
op_star
id|virt
comma
r_int
id|size
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_release_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;release&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|2
suffix:semicolon
id|s.n_returns
op_assign
l_int|0
suffix:semicolon
id|s.virt
op_assign
id|virt
suffix:semicolon
id|s.size
op_assign
id|size
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* 6.3.2.5 Control transfer */
r_int
DECL|function|of_boot
id|of_boot
c_func
(paren
r_const
r_char
op_star
id|bootspec
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_boot_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;boot&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|0
suffix:semicolon
id|s.bootspec
op_assign
id|bootspec
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_enter
id|of_enter
c_func
(paren
r_void
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_enter_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;enter&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|0
suffix:semicolon
id|s.n_returns
op_assign
l_int|0
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_exit
id|of_exit
c_func
(paren
r_void
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_exit_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;exit&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|0
suffix:semicolon
id|s.n_returns
op_assign
l_int|0
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* int of_chain(void *virt, int size, void *entry, void *args, int len); */
multiline_comment|/* 6.3.2.6 User interface */
multiline_comment|/* int of_interpret(const char *arg, ...); */
r_int
DECL|function|of_set_callback
id|of_set_callback
c_func
(paren
r_void
op_star
id|newfunc
comma
r_void
op_star
op_star
id|oldfunc
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_set_callback_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;set-callback&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|1
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|s.newfunc
op_assign
id|newfunc
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|oldfunc
op_assign
id|s.oldfunc
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
r_int
DECL|function|of_set_symbol_lookup
id|of_set_symbol_lookup
c_func
(paren
r_void
op_star
id|sym_to_value
comma
r_void
op_star
id|value_to_sym
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_set_symbol_lookup_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;set-symbol-lookup&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|2
suffix:semicolon
id|s.n_returns
op_assign
l_int|0
suffix:semicolon
id|s.sym_to_value
op_assign
id|sym_to_value
suffix:semicolon
id|s.value_to_sym
op_assign
id|s.value_to_sym
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
multiline_comment|/* 6.3.2.7 Time */
r_int
DECL|function|of_milliseconds
id|of_milliseconds
c_func
(paren
r_int
op_star
id|ms
)paren
(brace
r_int
id|result
suffix:semicolon
r_static
id|of_milliseconds_service
id|s
suffix:semicolon
id|s.service
op_assign
l_string|&quot;milliseconds&quot;
suffix:semicolon
id|s.n_args
op_assign
l_int|0
suffix:semicolon
id|s.n_returns
op_assign
l_int|1
suffix:semicolon
id|result
op_assign
id|of_server
c_func
(paren
op_amp
id|s
)paren
suffix:semicolon
op_star
id|ms
op_assign
id|s.ms
suffix:semicolon
r_return
id|result
suffix:semicolon
)brace
eof
